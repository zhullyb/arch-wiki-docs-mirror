<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Network configuration (正體中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Network_configuration_正體中文 rootpage-Network_configuration_正體中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Network configuration (正體中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>相關文章</p>
<ul>
<li><a href="../en/Jumbo_frames.html" title="Jumbo frames">巨型封包 (英)</a></li>
<li><a href="../en/Category:Firewalls.html" class="mw-redirect" title="Firewalls">防火牆 (英)</a></li>
<li><a href="../en/Network_configuration/Wireless.html" class="mw-redirect" title="Wireless Setup">無線網路設定 (英)</a></li>
<li><a href="../en/List_of_applications.html#Network_managers" title="List of applications">應用程式清單#網路管理員 (英)</a></li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>翻譯狀態：</strong>本文章是 <a href="../en/Network_configuration.html" class="mw-redirect" title="Network Configuration">Network_Configuration</a> 的翻譯版本。最近一次的翻譯時間：2014-05-02。點擊<a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Network_Configuration&amp;diff=0&amp;oldid=311601">本連結</a>查看英文頁面之後的變更。</div>
<p>本頁將介紹如何設定<b>有線</b>網路連線。若您需要設定<b>無線</b>網路，請參考<a href="../en/Network_configuration/Wireless.html" class="mw-redirect" title="Wireless network configuration">無線網路設定</a>。
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#%E6%AA%A2%E6%9F%A5%E9%80%A3%E7%B7%9A"><span class="tocnumber">1</span> <span class="toctext">檢查連線</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#%E8%A8%AD%E5%AE%9A%E4%B8%BB%E6%A9%9F%E5%90%8D%E7%A8%B1"><span class="tocnumber">2</span> <span class="toctext">設定主機名稱</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#%E8%A3%9D%E7%BD%AE%E9%A9%85%E5%8B%95%E7%A8%8B%E5%BC%8F"><span class="tocnumber">3</span> <span class="toctext">裝置驅動程式</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#%E6%AA%A2%E6%9F%A5%E9%A9%85%E5%8B%95%E7%A8%8B%E5%BC%8F%E7%8B%80%E6%85%8B"><span class="tocnumber">3.1</span> <span class="toctext">檢查驅動程式狀態</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#%E8%BC%89%E5%85%A5%E8%A3%9D%E7%BD%AE%E6%A8%A1%E7%B5%84"><span class="tocnumber">3.2</span> <span class="toctext">載入裝置模組</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6">
<a href="#%E7%B6%B2%E8%B7%AF%E4%BB%8B%E9%9D%A2"><span class="tocnumber">4</span> <span class="toctext">網路介面</span></a>
<ul>
<li class="toclevel-2 tocsection-7">
<a href="#%E8%A3%9D%E7%BD%AE%E5%90%8D%E7%A8%B1"><span class="tocnumber">4.1</span> <span class="toctext">裝置名稱</span></a>
<ul>
<li class="toclevel-3 tocsection-8"><a href="#%E6%9B%B4%E6%94%B9%E8%A3%9D%E7%BD%AE%E5%90%8D%E7%A8%B1"><span class="tocnumber">4.1.1</span> <span class="toctext">更改裝置名稱</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-9"><a href="#%E8%A8%AD%E5%AE%9A%E8%A3%9D%E7%BD%AE%E7%9A%84_MTU_%E8%88%87%E4%BD%87%E5%88%97%E9%95%B7%E5%BA%A6"><span class="tocnumber">4.2</span> <span class="toctext">設定裝置的 MTU 與佇列長度</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#%E5%8F%96%E5%BE%97%E7%9B%AE%E5%89%8D%E7%9A%84%E8%A3%9D%E7%BD%AE%E5%90%8D%E7%A8%B1"><span class="tocnumber">4.3</span> <span class="toctext">取得目前的裝置名稱</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#%E5%95%9F%E7%94%A8%E8%88%87%E7%A6%81%E7%94%A8%E7%B6%B2%E8%B7%AF%E4%BB%8B%E9%9D%A2"><span class="tocnumber">4.4</span> <span class="toctext">啟用與禁用網路介面</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12">
<a href="#%E7%B5%84%E6%85%8B%E8%A8%AD%E5%AE%9A_IP_%E4%BD%8D%E5%9D%80"><span class="tocnumber">5</span> <span class="toctext">組態設定 IP 位址</span></a>
<ul>
<li class="toclevel-2 tocsection-13">
<a href="#%E5%8B%95%E6%85%8B_IP_%E4%BD%8D%E5%9D%80"><span class="tocnumber">5.1</span> <span class="toctext">動態 IP 位址</span></a>
<ul>
<li class="toclevel-3 tocsection-14"><a href="#dhcpcd"><span class="tocnumber">5.1.1</span> <span class="toctext">dhcpcd</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-15">
<a href="#%E9%9D%9C%E6%85%8B_IP_%E4%BD%8D%E5%9D%80"><span class="tocnumber">5.2</span> <span class="toctext">靜態 IP 位址</span></a>
<ul>
<li class="toclevel-3 tocsection-16"><a href="#%E6%89%8B%E5%8B%95%E6%8C%87%E6%B4%BE"><span class="tocnumber">5.2.1</span> <span class="toctext">手動指派</span></a></li>
<li class="toclevel-3 tocsection-17"><a href="#%E6%B0%B8%E4%B9%85%E6%96%BC%E5%95%9F%E5%8B%95%E6%99%82%E9%80%9A%E9%81%8E_systemd_%E9%80%B2%E8%A1%8C%E7%B5%84%E6%85%8B%E8%A8%AD%E5%AE%9A%E8%88%87_udev_%E8%A6%8F%E5%89%87"><span class="tocnumber">5.2.2</span> <span class="toctext">永久於啟動時通過 systemd 進行組態設定與 udev 規則</span></a></li>
<li class="toclevel-3 tocsection-18"><a href="#%E8%A8%88%E7%AE%97%E4%BD%8D%E5%9D%80"><span class="tocnumber">5.2.3</span> <span class="toctext">計算位址</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-19"><a href="#systemd-networkd"><span class="tocnumber">5.3</span> <span class="toctext">systemd-networkd</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-20"><a href="#%E8%BC%89%E5%85%A5%E7%B5%84%E6%85%8B%E8%A8%AD%E5%AE%9A"><span class="tocnumber">6</span> <span class="toctext">載入組態設定</span></a></li>
<li class="toclevel-1 tocsection-21">
<a href="#%E9%99%84%E5%8A%A0%E8%A8%AD%E5%AE%9A"><span class="tocnumber">7</span> <span class="toctext">附加設定</span></a>
<ul>
<li class="toclevel-2 tocsection-22"><a href="#%E7%AD%86%E8%A8%98%E5%9E%8B%E9%9B%BB%E8%85%A6%E4%B9%8B_ifplugd"><span class="tocnumber">7.1</span> <span class="toctext">筆記型電腦之 ifplugd</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#Bonding_%E6%88%96_LAG"><span class="tocnumber">7.2</span> <span class="toctext">Bonding 或 LAG</span></a></li>
<li class="toclevel-2 tocsection-24">
<a href="#IP_%E5%88%A5%E5%90%8D"><span class="tocnumber">7.3</span> <span class="toctext">IP 別名</span></a>
<ul>
<li class="toclevel-3 tocsection-25"><a href="#%E7%AF%84%E4%BE%8B"><span class="tocnumber">7.3.1</span> <span class="toctext">範例</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-26"><a href="#%E6%9B%B4%E6%94%B9_MAC/%E7%A1%AC%E9%AB%94_%E4%BD%8D%E5%9D%80"><span class="tocnumber">7.4</span> <span class="toctext">更改 MAC/硬體 位址</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#%E7%B6%B2%E8%B7%AF%E5%85%B1%E4%BA%AB"><span class="tocnumber">7.5</span> <span class="toctext">網路共享</span></a></li>
<li class="toclevel-2 tocsection-28"><a href="#%E8%B7%AF%E7%94%B1%E7%B5%84%E6%85%8B%E8%A8%AD%E5%AE%9A"><span class="tocnumber">7.6</span> <span class="toctext">路由組態設定</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="#%E5%8D%80%E5%9F%9F%E7%B6%B2%E8%B7%AF%E4%B8%BB%E6%A9%9F%E5%90%8D%E7%A8%B1%E8%A7%A3%E6%9E%90"><span class="tocnumber">7.7</span> <span class="toctext">區域網路主機名稱解析</span></a></li>
<li class="toclevel-2 tocsection-30"><a href="#%E9%9B%9C%E4%BA%82%E6%A8%A1%E5%BC%8F"><span class="tocnumber">7.8</span> <span class="toctext">雜亂模式</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-31">
<a href="#%E8%A8%BA%E6%96%B7"><span class="tocnumber">8</span> <span class="toctext">診斷</span></a>
<ul>
<li class="toclevel-2 tocsection-32"><a href="#Swapping_computers_on_the_cable_modem"><span class="tocnumber">8.1</span> <span class="toctext">Swapping computers on the cable modem</span></a></li>
<li class="toclevel-2 tocsection-33">
<a href="#The_TCP_window_scaling_problem"><span class="tocnumber">8.2</span> <span class="toctext">The TCP window scaling problem</span></a>
<ul>
<li class="toclevel-3 tocsection-34"><a href="#How_to_diagnose_the_problem"><span class="tocnumber">8.2.1</span> <span class="toctext">How to diagnose the problem</span></a></li>
<li class="toclevel-3 tocsection-35"><a href="#How_to_fix_it_(The_bad_way)"><span class="tocnumber">8.2.2</span> <span class="toctext">How to fix it (The bad way)</span></a></li>
<li class="toclevel-3 tocsection-36"><a href="#How_to_fix_it_(The_good_way)"><span class="tocnumber">8.2.3</span> <span class="toctext">How to fix it (The good way)</span></a></li>
<li class="toclevel-3 tocsection-37"><a href="#How_to_fix_it_(The_best_way)"><span class="tocnumber">8.2.4</span> <span class="toctext">How to fix it (The best way)</span></a></li>
<li class="toclevel-3 tocsection-38"><a href="#More_about_it"><span class="tocnumber">8.2.5</span> <span class="toctext">More about it</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-39">
<a href="#Realtek_no_link_/_WOL_problem"><span class="tocnumber">8.3</span> <span class="toctext">Realtek no link / WOL problem</span></a>
<ul>
<li class="toclevel-3 tocsection-40"><a href="#Method_1_-_Enable_the_NIC_directly_in_Linux"><span class="tocnumber">8.3.1</span> <span class="toctext">Method 1 - Enable the NIC directly in Linux</span></a></li>
<li class="toclevel-3 tocsection-41"><a href="#Method_2_-_Rollback/change_Windows_driver"><span class="tocnumber">8.3.2</span> <span class="toctext">Method 2 - Rollback/change Windows driver</span></a></li>
<li class="toclevel-3 tocsection-42"><a href="#Method_3_-_Enable_WOL_in_Windows_driver"><span class="tocnumber">8.3.3</span> <span class="toctext">Method 3 - Enable WOL in Windows driver</span></a></li>
<li class="toclevel-3 tocsection-43"><a href="#Method_4_-_Newer_Realtek_Linux_driver"><span class="tocnumber">8.3.4</span> <span class="toctext">Method 4 - Newer Realtek Linux driver</span></a></li>
<li class="toclevel-3 tocsection-44"><a href="#Method_5_-_Enable_LAN_Boot_ROM_in_BIOS/CMOS"><span class="tocnumber">8.3.5</span> <span class="toctext">Method 5 - Enable <i>LAN Boot ROM</i> in BIOS/CMOS</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-45"><a href="#No_interface_with_Atheros_chipsets"><span class="tocnumber">8.4</span> <span class="toctext">No interface with Atheros chipsets</span></a></li>
<li class="toclevel-2 tocsection-46"><a href="#Broadcom_BCM57780"><span class="tocnumber">8.5</span> <span class="toctext">Broadcom BCM57780</span></a></li>
</ul>
</li>
</ul>
</div>

<h2>
<span id=".E6.AA.A2.E6.9F.A5.E9.80.A3.E7.B7.9A"></span><span class="mw-headline" id="檢查連線">檢查連線</span>
</h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>註記:</strong> 若您在執行 ping 時收到了類似 <code>ping: icmp open socket: Operation not permitted</code> 這樣的錯誤訊息，請嘗試重新安裝 <code>iputils</code> 軟體包。</div>  
<p>一般來說，基本的安裝過程都已經建立了可運作的網路設定。請執行下列指令以進行檢查：
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>註記:</strong> <code>-c 3</code> 選項表示將會呼叫三次。詳細請參閱 <span class="plainlinks archwiki-template-man" title="$ man 8 ping"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/ping.8">ping(8)</a></span> 。</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>提示：</strong> 您也可以嘗試使用其他的 Domain ，如 www.hinet.net 。</div>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ping -c 3 www.google.com</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">PING www.l.google.com (74.125.224.146) 56(84) bytes of data.
64 bytes from 74.125.224.146: icmp_req=1 ttl=50 time=437 ms
64 bytes from 74.125.224.146: icmp_req=2 ttl=50 time=385 ms
64 bytes from 74.125.224.146: icmp_req=3 ttl=50 time=298 ms

--- www.l.google.com ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 1999ms
rtt min/avg/max/mdev = 298.107/373.642/437.202/57.415 ms
</pre>
<p>如果沒問題的話，您可能只是想以本文的下列部分來自定您的設定。
</p>
<p>若剛才的指令出現了 unknown hosts 之類的訊息，代表您的機器無法解析網域。這可能是因為您的網路服務提供商/閘道造成的。您可以嘗試 ping 一個靜態 IP 以實驗您的機器能否存取網際網路。
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>提示：</strong> 您也可以嘗試使用其他的 IP ，如 168.95.1.1 。</div>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ping -c 3 8.8.8.8</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">PING 8.8.8.8 (8.8.8.8) 56(84) bytes of data.
64 bytes from 8.8.8.8: icmp_req=1 ttl=53 time=52.9 ms
64 bytes from 8.8.8.8: icmp_req=2 ttl=53 time=72.5 ms
64 bytes from 8.8.8.8: icmp_req=3 ttl=53 time=70.6 ms

--- 8.8.8.8 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2002ms
rtt min/avg/max/mdev = 52.975/65.375/72.543/8.803 ms
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>註記:</strong> <code>8.8.8.8</code> 為一個好記的靜態 IP 位置。這是 Google 的主要 DNS 伺服器，這表示其有一定的可信度，並且通常不會被系統或代理伺服器擋下。</div>
<p>若您可以 Ping 通 <code>8.8.8.8</code> ，但 <code>www.google.com</code> 不能，請檢查您的 DNS 組態設定檔。詳情請參考 <a href="../en/Domain_name_resolution.html" class="mw-redirect" title="Resolv.conf">resolv.conf</a>。
</p>
<h2>
<span id=".E8.A8.AD.E5.AE.9A.E4.B8.BB.E6.A9.9F.E5.90.8D.E7.A8.B1"></span><span class="mw-headline" id="設定主機名稱">設定主機名稱</span>
</h2>
<p><a href="https://en.wikipedia.org/wiki/Hostname" class="extiw" title="wikipedia:Hostname">主機名稱</a>為網路中用於識別機器的唯一識別名稱：主機名稱可以通過 <code>/etc/hostname</code> 檔案來進行設定。一般來說該檔案包含了系統的網域名稱。下面為設定主機名稱的方法：
</p>
<pre># hostnamectl set-hostname <b>myhostname</b>
</pre>
<p>這樣會將 <code><i>myhostname</i></code> 寫入 <code>/etc/hostname</code> 檔案中。
</p>
<p>詳細請參閱 <span class="plainlinks archwiki-template-man" title="$ man 5 hostname"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/hostname.5">hostname(5)</a></span> 與 <span class="plainlinks archwiki-template-man" title="$ man 1 hostnamectl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/hostnamectl.1">hostnamectl(1)</a></span> 。
</p>
<p>在 <code>/etc/hosts</code> 中加入相同的主機名稱：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/hosts</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">

#&lt;ip-address&gt; &lt;hostname.domain.org&gt; &lt;hostname&gt;
127.0.0.1 localhost.localdomain localhost <i>myhostname</i>
::1 localhost.localdomain localhost
</pre>
<p>使用來自 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=inetutils">inetutils</a></span> 的 <i>hostname</i> 以設定臨時主機名稱（直到重新啟動）：
</p>
<pre># hostname <i>myhostname</i>
</pre>
<h2>
<span id=".E8.A3.9D.E7.BD.AE.E9.A9.85.E5.8B.95.E7.A8.8B.E5.BC.8F"></span><span class="mw-headline" id="裝置驅動程式">裝置驅動程式</span>
</h2>
<h3>
<span id=".E6.AA.A2.E6.9F.A5.E9.A9.85.E5.8B.95.E7.A8.8B.E5.BC.8F.E7.8B.80.E6.85.8B"></span><span class="mw-headline" id="檢查驅動程式狀態">檢查驅動程式狀態</span>
</h3>
<p><a href="../en/Udev.html" title="Udev">udev</a> 應該會檢測您的網路介面卡（<a href="https://en.wikipedia.org/wiki/Network_interface_controller" class="extiw" title="wikipedia:Network interface controller">NIC</a>）並自動於啟動時載入必要的模組。檢查 <code>lspci -v</code> 輸出內容中的「Ethernet controller」 項目（或類似的）。這應該會告訴您哪些核心模組包含了網路設備的驅動程式。舉例來說：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ lspci -v</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">02:00.0 Ethernet controller: Attansic Technology Corp. L1 Gigabit Ethernet Adapter (rev b0)
 	...
 	Kernel driver in use: atl1
 	Kernel modules: atl1
</pre>
<p>接下來，確認該驅動程式已經通過 <code>dmesg | grep <i>module_name</i></code> 載入了。舉例來說：
</p>
<pre>$ dmesg | grep atl1
    ...
    atl1 0000:02:00.0: eth0 link is up 100 Mbps full duplex
</pre>
<p>若驅動程式已成功加載可以跳過接下來這段。否則，您會需要知道哪些模組時您的特定型號的裝置需要哪個模組。
</p>
<h3>
<span id=".E8.BC.89.E5.85.A5.E8.A3.9D.E7.BD.AE.E6.A8.A1.E7.B5.84"></span><span class="mw-headline" id="載入裝置模組">載入裝置模組</span>
</h3>
<p>以 Google 搜尋正確的晶片組模組/驅動程式。常見的驅動模組有 Realtek 晶片組網卡的 <code>8139too</code> ，或是 SiS 晶片組網卡的 <code>sis900</code>。當您知道要使用何種模組了之後，試著<a href="../en/Kernel_module.html#Manual_module_handling" class="mw-redirect" title="Kernel modules">手動將其載入</a>。若您得到了錯誤訊息告訴您找不到該模組，則該驅動可能未包含於 Arch 核心中。您可以在 <a href="../en/Arch_User_Repository.html" class="mw-redirect" title="AUR">AUR</a> 中搜尋該模組名稱。
</p>
<p>若 udev 未在開機期間檢測與載入正確的模組，請參閱 <a href="../en/Kernel_module.html#Loading" class="mw-redirect" title="Kernel modules">Kernel modules#Loading</a><sup>[<a href="../en/Help:Procedures.html#Fix_broken_section_links" title="Help:Procedures">broken link</a>: invalid section]</sup>。
</p>
<h2>
<span id=".E7.B6.B2.E8.B7.AF.E4.BB.8B.E9.9D.A2"></span><span class="mw-headline" id="網路介面">網路介面</span>
</h2>
<h3>
<span id=".E8.A3.9D.E7.BD.AE.E5.90.8D.E7.A8.B1"></span><span class="mw-headline" id="裝置名稱">裝置名稱</span>
</h3>
<p>對於多網路卡的電腦，固定裝置名稱非常重要。許多設定問題都是因為介面卡名稱的改動造成的。
</p>
<p><a href="../en/Udev.html" title="Udev">udev</a> 負責命名裝置。Systemd v197 則有<a rel="nofollow" class="external text" href="https://systemd.io/PREDICTABLE_INTERFACE_NAMES/">可預測之網路介面名稱</a>並可自動支配靜態名稱給網路裝置。介面名稱以 <code>en</code> （乙太網路）、 <code>wl</code> （無線網路） 或是 <code>ww</code> （WWAN）作為前置字串並附上一個自動產生的識別名稱，進而產生了類似 <code>enp0s25</code> 這樣的名稱。 
</p>
<p>要禁用這種行為，可以將 <code>net.ifnames=0</code> 到您的核心指令列。
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>提示：</strong> 您可以執行 <code>ip link</code> 或是 <code>ls /sys/class/net</code> 以列出所有可用的介面。</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>註記:</strong> 當您更改了介面名稱規則後，別忘了更新所有跟網路有關的組態檔案與自定的 systemd unit 檔案以因應該更改。特別是當您啟用了 <a href="../en/Netctl.html#Basic_method" title="Netctl">netctl  靜態設定檔</a><sup>[<a href="../en/Help:Procedures.html#Fix_broken_section_links" title="Help:Procedures">broken link</a>: invalid section]</sup> ，請執行 <code>netctl reenable <i>profile</i></code> 以更新所有產生的服務檔案。</div>
<h4>
<span id=".E6.9B.B4.E6.94.B9.E8.A3.9D.E7.BD.AE.E5.90.8D.E7.A8.B1"></span><span class="mw-headline" id="更改裝置名稱">更改裝置名稱</span>
</h4>
<p>您可以使用 udev-rule 來手動定義裝置名稱。舉例來說：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/10-network.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">SUBSYSTEM=="net", ACTION=="add", ATTR{address}=="aa:bb:cc:dd:ee:ff", NAME="net1"
SUBSYSTEM=="net", ACTION=="add", ATTR{address}=="ff:ee:dd:cc:bb:aa", NAME="net0"
</pre>
<p>請注意這兩點：
</p>
<ul>
<li>使用這個指令以取得 MAC 位置：<code>cat /sys/class/net/<i>設備名稱</i>/address</code>。</li>
<li>請確定 udev 規則中使用的是小寫的十六進位數值而不是大寫。</li>
</ul>
<p>若該網路卡為動態 MAC ，您可以使用 DEVPATH ，例如：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/10-network.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">SUBSYSTEM=="net", DEVPATH=="/devices/platform/wemac.*", NAME="int"
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>註記:</strong> 當使用了靜態的名稱時，<b>應該要避免使用類似 "eth<i>X</i>" 與 "wlan<i>X</i>"</b> 這樣的名稱，因為這可能會導致核心與 udev 在開機時發生衝突。而剛好相反地，最好使用核心預設不會使用的介面名稱，如 <code>net0</code> 、 <code>net1</code> 、 <code>wifi0</code> 、 <code>wifi1</code> 。詳細說明請參閱 <a rel="nofollow" class="external text" href="https://systemd.io/PREDICTABLE_INTERFACE_NAMES/">systemd</a> 文件。</div>
<h3>
<span id=".E8.A8.AD.E5.AE.9A.E8.A3.9D.E7.BD.AE.E7.9A.84_MTU_.E8.88.87.E4.BD.87.E5.88.97.E9.95.B7.E5.BA.A6"></span><span class="mw-headline" id="設定裝置的_MTU_與佇列長度">設定裝置的 MTU 與佇列長度</span>
</h3>
<p>您可以手動定義 udev 規則來更改裝置的 MTU 與佇列長度。舉例來說：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/10-network.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ACTION=="add", SUBSYSTEM=="net", KERNEL=="wl*", ATTR{mtu}="1480", ATTR{tx_queue_len}="2000"
</pre>
<h3>
<span id=".E5.8F.96.E5.BE.97.E7.9B.AE.E5.89.8D.E7.9A.84.E8.A3.9D.E7.BD.AE.E5.90.8D.E7.A8.B1"></span><span class="mw-headline" id="取得目前的裝置名稱">取得目前的裝置名稱</span>
</h3>
<p>目前的 NIC 名稱可以通過 sysfs 找到
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ls /sys/class/net</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">lo eth0 eth1 firewire0
</pre>
<h3>
<span id=".E5.95.9F.E7.94.A8.E8.88.87.E7.A6.81.E7.94.A8.E7.B6.B2.E8.B7.AF.E4.BB.8B.E9.9D.A2"></span><span class="mw-headline" id="啟用與禁用網路介面">啟用與禁用網路介面</span>
</h3>
<p>您可以使用下列指令來啟用或禁用網路介面：
</p>
<pre># ip link set eth0 up
# ip link set eth0 down
</pre>
<p>要確認結果，請執行：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ip link show dev eth0</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">2: eth0: &lt;BROADCAST,MULTICAST,PROMISC,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast master br0 state UP mode DEFAULT qlen 1000
...
</pre>
<h2>
<span id=".E7.B5.84.E6.85.8B.E8.A8.AD.E5.AE.9A_IP_.E4.BD.8D.E5.9D.80"></span><span class="mw-headline" id="組態設定_IP_位址">組態設定 IP 位址</span>
</h2>
<p>您有兩個選擇：使用 <a href="https://en.wikipedia.org/wiki/Dynamic_Host_Configuration_Protocol" class="extiw" title="wikipedia:Dynamic Host Configuration Protocol">DHCP</a> 指派動態位址，或是使用「靜態」的位址。
</p>
<h3>
<span id=".E5.8B.95.E6.85.8B_IP_.E4.BD.8D.E5.9D.80"></span><span class="mw-headline" id="動態_IP_位址">動態 IP 位址</span>
</h3>
<h4><span class="mw-headline" id="dhcpcd">dhcpcd</span></h4>
<p>最簡單的方式就是使用 <a href="../en/Dhcpcd.html" title="Dhcpcd">dhcpcd</a>，它包含在 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=base">base</a></span> 群組中。無論是使用提供服務檔案 <code>dhcpcd@.service</code> ，以參數方式傳入介面卡名稱，或是手動通過 <code>dhcpcd <i>interface</i></code> 將其執行。
</p>
<h3>
<span id=".E9.9D.9C.E6.85.8B_IP_.E4.BD.8D.E5.9D.80"></span><span class="mw-headline" id="靜態_IP_位址">靜態 IP 位址</span>
</h3>
<p>您可能因為各種原因而希望在您的網路中指派靜態 IP 位址，例如靜態的位址可以獲得一定程度的可預測性，或是您沒有可用的 DHCP 伺服器。
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>註記:</strong> 若您通過 Windows 機器來共享您的網路而不是使用路由器，請確保兩台電腦皆使用了靜態 IP 位址以避免區域網路問題。</div>
<p>您需要：
</p>
<ul>
<li>靜態 IP 位址</li>
<li><a href="https://en.wikipedia.org/wiki/Subnetwork" class="extiw" title="wikipedia:Subnetwork">子網路遮罩</a></li>
<li><a href="https://en.wikipedia.org/wiki/Broadcast_address" class="extiw" title="wikipedia:Broadcast address">廣播位址</a></li>
<li>
<a href="https://en.wikipedia.org/wiki/Default_gateway" class="extiw" title="wikipedia:Default gateway">預設閘道器</a>的 IP 位址</li>
</ul>
<p>若您處在內部網路中，使用 192.168.*.* 這樣的 IP 位址較為安全，搭配其的子網路遮罩 255.255.255.0 ，廣播位址為 192.168.*.255 。而閘道通常是 192.168.*.1 或是 192.168.*.254 。
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> You may need to manually set the DNS servers, see <a href="../en/Domain_name_resolution.html" class="mw-redirect" title="Resolv.conf">resolv.conf</a> for details.</div>
<h4>
<span id=".E6.89.8B.E5.8B.95.E6.8C.87.E6.B4.BE"></span><span class="mw-headline" id="手動指派">手動指派</span>
</h4>
<p>您可於控制台中指派一靜態 IP 位址：
</p>
<pre># ip addr add <i>IP位址</i>/<i>子網路遮罩</i> broadcast <i>廣播</i> dev <i>介面</i>
</pre>
<p>舉例來說：
</p>
<pre># ip addr add 192.168.1.2/24 broadcast 192.168.1.255 dev eth0
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>註記:</strong> 子網路遮罩使用了 <a href="https://en.wikipedia.org/wiki/CIDR_notation" class="extiw" title="wikipedia:CIDR notation">CIDR 表示法</a>（CIDR，Classless Inter-Domain Routing，無類別網路間路由）。</div>
<p>詳情請參閱 <span class="plainlinks archwiki-template-man" title="$ man 7 ip"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/ip.7">ip(7)</a></span> 。
</p>
<p>以類似下列的方法加上您的 IP 位址：
</p>
<pre># ip route add default via <i>預設閘道IP位址</i>
</pre>
<p>舉例來說：
</p>
<pre># ip route add default via 192.168.1.1
</pre>
<p>若您得到了 "No such process" 這樣的錯誤訊息，這代表您必須以 root 執行 <code>ip link set dev eth0 up</code> 。
</p>
<h4>
<span id=".E6.B0.B8.E4.B9.85.E6.96.BC.E5.95.9F.E5.8B.95.E6.99.82.E9.80.9A.E9.81.8E_systemd_.E9.80.B2.E8.A1.8C.E7.B5.84.E6.85.8B.E8.A8.AD.E5.AE.9A.E8.88.87_udev_.E8.A6.8F.E5.89.87"></span><span class="mw-headline" id="永久於啟動時通過_systemd_進行組態設定與_udev_規則">永久於啟動時通過 systemd 進行組態設定與 udev 規則</span>
</h4>
<p>首先先為 <a href="../en/Systemd.html" title="Systemd">systemd</a> 服務建立一個組態設定檔，請以網路介面卡名稱取代下列的 <code><i>interface</i></code>：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/conf.d/network@<i>interface</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">address=192.168.0.15
netmask=24
broadcast=192.168.0.255
gateway=192.168.0.1
</pre>
<p>建立 systemd unit 檔案：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/network@.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Network connectivity (%i)
Wants=network.target
Before=network.target
BindsTo=sys-subsystem-net-devices-%i.device
After=sys-subsystem-net-devices-%i.device

[Service]
Type=oneshot
RemainAfterExit=yes
EnvironmentFile=/etc/conf.d/network@%i

ExecStart=/usr/bin/ip link set dev %i up
ExecStart=/usr/bin/ip addr add ${address}/${netmask} broadcast ${broadcast} dev %i
ExecStart=/usr/bin/sh -c 'test -n ${gateway} &amp;&amp; /usr/bin/ip route add default via ${gateway}'

ExecStop=/usr/bin/ip addr flush dev %i
ExecStop=/usr/bin/ip link set dev %i down

[Install]
WantedBy=multi-user.target
</pre>
<p>啟用該 unit 並將其啟動，傳入介面名稱：
</p>
<pre># systemctl enable network@<i>介面名稱</i>.service
# systemctl start network@<i>介面名稱</i>.service
</pre>
<h4>
<span id=".E8.A8.88.E7.AE.97.E4.BD.8D.E5.9D.80"></span><span class="mw-headline" id="計算位址">計算位址</span>
</h4>
<p>您可以使用 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ipcalc">ipcalc</a></span> 提供的 <code>ipcalc</code> 來計算 IP 廣播、網域、子網路遮罩與主機範圍等進階設定舉例來說，我使用了位於防火牆後的乙太網路來連線 Windows 機器至 Arch。為了安全性與網路組織，我將他們放置於各自獨立的網路，接著組態設定子網路遮罩與廣播位址，如此一來網路中就只有兩台機器。為了找出子網路遮罩跟廣播位址，我使用了 ipcalc ，提供其 Arch firewire nic 的 IP 位址 10.66.66.1 ，並指定 ipcalc 要建立一個只有兩台主機的網路。
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ipcalc -nb 10.66.66.1 -s 1</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Address:   10.66.66.1

Netmask:   255.255.255.252 = 30
Network:   10.66.66.0/30
HostMin:   10.66.66.1
HostMax:   10.66.66.2
Broadcast: 10.66.66.3
Hosts/Net: 2                     Class A, Private Internet
</pre>
<h3><span class="mw-headline" id="systemd-networkd">systemd-networkd</span></h3>
<p>若 <a href="../en/Systemd.html" title="Systemd">systemd</a> 的版本為 209 以上（含），則可使用 <a href="../en/Systemd-networkd.html" title="Systemd-networkd">systemd-networkd</a> 來管理網路，可輕鬆地代替在 Containers 與虛擬機中設定網路。並可同時管理動態與靜態 IP 位址。
</p>
<h2>
<span id=".E8.BC.89.E5.85.A5.E7.B5.84.E6.85.8B.E8.A8.AD.E5.AE.9A"></span><span class="mw-headline" id="載入組態設定">載入組態設定</span>
</h2>
<p>要測試您的設定，您可以重新啟動電腦或是重新載入相關的 systemd 服務。然後嘗試 Ping 您的閘道器、DNS 伺服器、ISP 業者與其他的網際網路站台，用這樣的方式便能檢測哪裡出了問題，舉例來說：
</p>
<pre>$ ping -c 3 www.google.com
</pre>
<h2>
<span id=".E9.99.84.E5.8A.A0.E8.A8.AD.E5.AE.9A"></span><span class="mw-headline" id="附加設定">附加設定</span>
</h2>
<h3>
<span id=".E7.AD.86.E8.A8.98.E5.9E.8B.E9.9B.BB.E8.85.A6.E4.B9.8B_ifplugd"></span><span class="mw-headline" id="筆記型電腦之_ifplugd">筆記型電腦之 ifplugd</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>提示：</strong> <a href="../en/Dhcpcd.html" title="Dhcpcd">dhcpcd</a> 提供了開箱即用的相同功能。</div>
<p><a href="../zh-TW/Official_repositories.html" title="Official repositories (正體中文)">官方軟體套件庫</a>中的 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ifplugd">ifplugd</a></span> 為一個當網路線插入後自動組態乙太設備；網路線拔除後自動取消組態的 Daemon 。
這對於搭載內建網路介面卡的筆記型電腦特別有用，因為其只會在網路線真正連上後才會對介面進行組態。另一個會用到的情況為，當您需要重新啟動網路，但您並不想重開及或在 Shell 中進行設定。
</p>
<p>預設情況下，其會對 <code>eth0</code> 裝置進行設定使其運作。這與其他設定類似延遲之類的設定能在 <code>/etc/ifplugd/ifplugd.conf</code> 中進行設定。
</p>
<p><br>
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>註記:</strong> <a href="../en/Netctl.html" title="Netctl">Netctl</a> 軟體包包含了 <code>netctl-ifplugd@.service</code>，否則您可以使用來自 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ifplugd">ifplugd</a></span> 軟體包的 <code>ifplugd@.service</code> 。例如這樣使用：<code>systemctl enable ifplugd@eth0.service</code>。</div>
<h3>
<span id="Bonding_.E6.88.96_LAG"></span><span class="mw-headline" id="Bonding_或_LAG">Bonding 或 LAG</span>
</h3>
<p>請參閱 <a href="../en/Netctl.html#Bonding" title="Netctl">netctl#Bonding</a> 。
</p>
<h3>
<span id="IP_.E5.88.A5.E5.90.8D"></span><span class="mw-headline" id="IP_別名">IP 別名</span>
</h3>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a><b>This article or section needs expansion.</b><a href="../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Manual method using <a href="../en/Core_utilities.html#ip" title="Core utilities">ip</a> should be added; then move current example using <i>netctl</i> into <a href="../en/Netctl.html" title="Netctl">netctl</a>. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Network_configuration_(%E6%AD%A3%E9%AB%94%E4%B8%AD%E6%96%87)">Talk:Network configuration (正體中文)#</a>)</div>
</div>
<p>IP 別名為讓同一個網路介面有多個 IP 位址。如此一來，單個節點的網路就能有多個網路連線，進而實現不同的作用。經典的使用方法為網頁與 FTP 伺服器的虛擬主機，或是重組伺服器而無需更新任何其他的機器（對於名稱伺服器來說特別有用）。
</p>
<h4>
<span id=".E7.AF.84.E4.BE.8B"></span><span class="mw-headline" id="範例">範例</span>
</h4>
<p>您將需要來自<a href="../zh-TW/Official_repositories.html" title="Official repositories (正體中文)">官方軟體套件庫</a>的 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=netctl">netctl</a></span> 。
</p>
<p>準備組態設定檔：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/netctl/mynetwork</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Connection='ethernet'
Description='Five different addresses on the same NIC.'
Interface='eth0'
IP='static'
Address=('192.168.1.10' '192.168.178.11' '192.168.1.12' '192.168.1.13' '192.168.1.14' '192.168.1.15')
Gateway='192.168.1.1'
DNS=('192.168.1.1')
</pre>
<p>接著只需要將其執行即可：
</p>
<pre>$ netctl start mynetwork
</pre>
<h3>
<span id=".E6.9B.B4.E6.94.B9_MAC.2F.E7.A1.AC.E9.AB.94_.E4.BD.8D.E5.9D.80"></span><span class="mw-headline" id="更改_MAC/硬體_位址">更改 MAC/硬體 位址</span>
</h3>
<p>請參閱 <a href="../en/MAC_address_spoofing.html" title="MAC address spoofing">MAC address spoofing</a> 。
</p>
<h3>
<span id=".E7.B6.B2.E8.B7.AF.E5.85.B1.E4.BA.AB"></span><span class="mw-headline" id="網路共享">網路共享</span>
</h3>
<p>請參閱 <a href="../en/Internet_sharing.html" title="Internet sharing">Internet sharing</a> 。
</p>
<h3>
<span id=".E8.B7.AF.E7.94.B1.E7.B5.84.E6.85.8B.E8.A8.AD.E5.AE.9A"></span><span class="mw-headline" id="路由組態設定">路由組態設定</span>
</h3>
<p>請參閱 <a href="../en/Router.html" title="Router">Router</a> 。
</p>
<h3>
<span id=".E5.8D.80.E5.9F.9F.E7.B6.B2.E8.B7.AF.E4.B8.BB.E6.A9.9F.E5.90.8D.E7.A8.B1.E8.A7.A3.E6.9E.90"></span><span class="mw-headline" id="區域網路主機名稱解析">區域網路主機名稱解析</span>
</h3>
<p>先決條件為<a href="#.E8.A8.AD.E5.AE.9A.E4.B8.BB.E6.A9.9F.E5.90.8D.E7.A8.B1">設定主機名稱</a>之後，主機名稱可在本機系統上解析：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ping hostname</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">PING hostname (192.168.1.2) 56(84) bytes of data.
64 bytes from hostname (192.168.1.2): icmp_seq=1 ttl=64 time=0.043 ms</pre>
<p>要以其他機器的名稱來解析主機，需要手動設定各自的 <code>/etc/hosts</code> 檔案或是廣播/解析名稱的服務。
</p>
<p>過度設定 DNS 伺服器，如 <a href="../en/BIND.html" title="BIND">BIND</a> 、 <a href="../en/Unbound.html" title="Unbound">Unbound</a> ，手動編輯 <code>/etc/hosts</code> 過於繁瑣，或是您希望對於動態地將主機離開、加入網路有更大的靈活性，您可以在您的區域網路中使用 Zero-configuration networking 來進行主機名稱解析。這裡有兩個可用選擇：
</p>
<ul><li>
<a href="../en/Samba.html" title="Samba">Samba</a> 提供了通過微軟 <b>NetBIOS</b> 的主機名稱解析。其只需要安裝 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=samba">samba</a></span> 並啟用 <code>nmbd.service</code> 服務。執行 Windows 、OS X 或執行了 <code>nmbd</code> 的 Linux ，將能夠找到您的機器。</li></ul>
<ul><li>
<a href="../en/Avahi.html" title="Avahi">Avahi</a> 提供通過 <b>zeroconf</b> 的主機名稱解析，也稱作 Avahi 或 Boujour 。它比 Samba 還需要稍微複雜一點的設定：詳情請參考 <a href="../en/Avahi.html#Hostname_resolution" title="Avahi">Avahi#Hostname resolution</a>。執行 OS X 或執行了 Avahi daemon 的 Linux ，將能夠找到您的機器。Windows 並無內建 Avahi 用戶端或 Daemon 。</li></ul>
<h3>
<span id=".E9.9B.9C.E4.BA.82.E6.A8.A1.E5.BC.8F"></span><span class="mw-headline" id="雜亂模式">雜亂模式</span>
</h3>
<p>Toggling <a href="https://en.wikipedia.org/wiki/Promiscuous_mode" class="extiw" title="wikipedia:Promiscuous mode">promiscuous mode</a> will make a (wireless) NIC forward all traffic it receives to the OS for further processing. This is opposite to "normal mode" where a NIC will drop frames it is not intended to receive. It is most often used for advanced network troubleshooting and <a href="https://en.wikipedia.org/wiki/Packet_sniffing" class="extiw" title="wikipedia:Packet sniffing">packet sniffing</a>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/promiscuous@.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Set %i interface in promiscuous mode
After=network.target

[Service]
Type=oneshot
ExecStart=/usr/bin/ip link set dev %i promisc on
RemainAfterExit=yes

[Install]
WantedBy=multi-user.target
</pre>
<p>若您想在介面卡 <code>eth0</code> 中啟用雜亂模式，請執行：
</p>
<pre># systemctl enable promiscuous@eth0.service
</pre>
<h2>
<span id=".E8.A8.BA.E6.96.B7"></span><span class="mw-headline" id="診斷">診斷</span>
</h2>
<h3><span class="mw-headline" id="Swapping_computers_on_the_cable_modem">Swapping computers on the cable modem</span></h3>
<p>Some cable ISPs (videotron for example) have the cable modem configured to recognize only one client PC, by the MAC address of its network interface. Once the cable modem has learned the MAC address of the first PC or equipment that talks to it, it will not respond to another MAC address in any way. Thus if you swap one PC for another (or for a router), the new PC (or router) will not work with the cable modem, because the new PC (or router) has a MAC address different from the old one. To reset the cable modem so that it will recognise the new PC, you must power the cable modem off and on again. Once the cable modem has rebooted and gone fully online again (indicator lights settled down), reboot the newly connected PC so that it makes a DHCP request, or manually make it request a new DHCP lease.
</p>
<p>If this method does not work, you will need to clone the MAC address of the original machine. See also <a href="../en/Network_configuration.html#Change_MAC/hardware_address" class="mw-redirect" title="Configuring Network">Change MAC/hardware address</a><sup>[<a href="../en/Help:Procedures.html#Fix_broken_section_links" title="Help:Procedures">broken link</a>: invalid section]</sup>.
</p>
<h3><span class="mw-headline" id="The_TCP_window_scaling_problem">The TCP window scaling problem</span></h3>
<p>TCP packets contain a "window" value in their headers indicating how much data the other host may send in return. This value is represented with only 16 bits, hence the window size is at most 64Kb. TCP packets are cached for a while (they have to be reordered), and as memory is (or used to be) limited, one host could easily run out of it.
</p>
<p>Back in 1992, as more and more memory became available, <a rel="nofollow" class="external text" href="http://www.faqs.org/rfcs/rfc1323.html">RFC 1323</a> was written to improve the situation: Window Scaling. The "window" value, provided in all packets, will be modified by a Scale Factor defined once, at the very beginning of the connection.
</p>
<p>That 8-bit Scale Factor allows the Window to be up to 32 times higher than the initial 64Kb.
</p>
<p>It appears that some broken routers and firewalls on the Internet are rewriting the Scale Factor to 0 which causes misunderstandings between hosts.
</p>
<p>The Linux kernel 2.6.17 introduced a new calculation scheme generating higher Scale Factors, virtually making the aftermaths of the broken routers and firewalls more visible.
</p>
<p>The resulting connection is at best very slow or broken.
</p>
<h4><span class="mw-headline" id="How_to_diagnose_the_problem">How to diagnose the problem</span></h4>
<p>First of all, let's make it clear: this problem is odd. In some cases, you will not be able to use TCP connections (HTTP, FTP, ...) at all and in others, you will be able to communicate with some hosts (very few).
</p>
<p>When you have this problem, the <code>dmesg</code>'s output is OK, logs are clean and <code>ip addr</code> will report normal status... and actually everything appears normal.
</p>
<p>If you cannot browse any website, but you can ping some random hosts, chances are great that you're experiencing this problem: ping uses ICMP and is not affected by TCP problems.
</p>
<p>You can try to use Wireshark. You might see successful UDP and ICMP communications but unsuccessful TCP communications (only to foreign hosts).
</p>
<h4>
<span id="How_to_fix_it_.28The_bad_way.29"></span><span class="mw-headline" id="How_to_fix_it_(The_bad_way)">How to fix it (The bad way)</span>
</h4>
<p>To fix it the bad way, you can change the tcp_rmem value, on which Scale Factor calculation is based. Although it should work for most hosts, it is not guaranteed, especially for very distant ones.
</p>
<pre># echo "4096 87380 174760" &gt; /proc/sys/net/ipv4/tcp_rmem
</pre>
<h4>
<span id="How_to_fix_it_.28The_good_way.29"></span><span class="mw-headline" id="How_to_fix_it_(The_good_way)">How to fix it (The good way)</span>
</h4>
<p>Simply disable Window Scaling. Since Window Scaling is a nice TCP feature, it may be uncomfortable to disable it, especially if you cannot fix the broken router. There are several ways to disable Window Scaling, and it seems that the most bulletproof way (which will work with most kernels) is to add the following line to <code>/etc/sysctl.d/99-disable_window_scaling.conf</code> (see also <a href="../en/Sysctl.html" title="Sysctl">sysctl</a>)
</p>
<pre>net.ipv4.tcp_window_scaling = 0
</pre>
<h4>
<span id="How_to_fix_it_.28The_best_way.29"></span><span class="mw-headline" id="How_to_fix_it_(The_best_way)">How to fix it (The best way)</span>
</h4>
<p>This problem is caused by broken routers/firewalls, so let's change them. Some users have reported that the broken router was their very own DSL router.
</p>
<h4><span class="mw-headline" id="More_about_it">More about it</span></h4>
<p>This section is based on the LWN article <a rel="nofollow" class="external text" href="http://lwn.net/Articles/92727/">TCP window scaling and broken routers</a> and a Kernel Trap article: <a rel="nofollow" class="external text" href="http://kerneltrap.org/node/6723">Window Scaling on the Internet</a><sup title="Last check status: domain name not resolved">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2020-08-04 ⓘ]</sup>.
</p>
<p>There are also several relevant threads on the LKML.
</p>
<h3>
<span id="Realtek_no_link_.2F_WOL_problem"></span><span class="mw-headline" id="Realtek_no_link_/_WOL_problem">Realtek no link / WOL problem</span>
</h3>
<p>Users with Realtek 8168 8169 8101 8111(C) based NICs (cards / and on-board) may notice a problem where the NIC seems to be disabled on boot and has no Link light. This can usually be found on a dual boot system where Windows is also installed. It seems that using the offical Realtek drivers (dated anything after May 2007) under Windows is the cause. These newer drivers disable the Wake-On-LAN feature by disabling the NIC at Windows shutdown time, where it will remain disabled until the next time Windows boots. You will be able to notice if this problem is affecting you if the Link light remains off until Windows boots up; during Windows shutdown the Link light will switch off. Normal operation should be that the link light is always on as long as the system is on, even during POST. This problem will also affect other operative systems without newer drivers (eg. Live CDs). Here are a few fixes for this problem:
</p>
<h4><span class="mw-headline" id="Method_1_-_Enable_the_NIC_directly_in_Linux">Method 1 - Enable the NIC directly in Linux</span></h4>
<p>Get the ethernet NIC name from the output of
</p>
<pre>$ ip a
</pre>
<p>Bring up the device as root using the NIC name:
</p>
<pre># ip link set dev &lt;NIC_name&gt; up
</pre>
<p>For ex, if &lt;NIC_name&gt; is enp7s0
</p>
<pre># ip link set dev enp7s0 up
</pre>
<p>If it worked and the card is powered on, you should see <code>state UP</code> for the given interface in the output of <code>ip link</code>.
</p>
<h4>
<span id="Method_2_-_Rollback.2Fchange_Windows_driver"></span><span class="mw-headline" id="Method_2_-_Rollback/change_Windows_driver">Method 2 - Rollback/change Windows driver</span>
</h4>
<p>You can roll back your Windows NIC driver to the Microsoft provided one (if available), or roll back/install an official Realtek driver pre-dating May 2007 (may be on the CD that came with your hardware).
</p>
<h4><span class="mw-headline" id="Method_3_-_Enable_WOL_in_Windows_driver">Method 3 - Enable WOL in Windows driver</span></h4>
<p>Probably the best and the fastest fix is to change this setting in the Windows driver. This way it should be fixed system-wide and not only under Arch (eg. live CDs, other operative systems). In Windows, under Device Manager, find your Realtek network adapter and double-click it. Under the Advanced tab, change "Wake-on-LAN after shutdown" to Enable.
</p>
<pre>In Windows XP (example)
Right click my computer
--&gt; Hardware tab
  --&gt; Device Manager
    --&gt; Network Adapters
      --&gt; "double click" Realtek ...
        --&gt; Advanced tab
          --&gt; Wake-On-Lan After Shutdown
            --&gt; Enable
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Newer Realtek Windows drivers (tested with <i>Realtek 8111/8169 LAN Driver v5.708.1030.2008</i>, dated 2009/01/22, available from GIGABYTE) may refer to this option slightly differently, like <i>Shutdown Wake-On-LAN --&gt; Enable</i>. It seems that switching it to <code>Disable</code> has no effect (you will notice the Link light still turns off upon Windows shutdown). One rather dirty workaround is to boot to Windows and just reset the system (perform an ungraceful restart/shutdown) thus not giving the Windows driver a chance to disable LAN. The Link light will remain on and the LAN adapter will remain accessible after POST - that is until you boot back to Windows and shut it down properly again.</div>
<h4><span class="mw-headline" id="Method_4_-_Newer_Realtek_Linux_driver">Method 4 - Newer Realtek Linux driver</span></h4>
<p>Any newer driver for these Realtek cards can be found for Linux on the realtek site. (untested but believed to also solve the problem).
</p>
<h4>
<span id="Method_5_-_Enable_LAN_Boot_ROM_in_BIOS.2FCMOS"></span><span class="mw-headline" id="Method_5_-_Enable_LAN_Boot_ROM_in_BIOS/CMOS">Method 5 - Enable <i>LAN Boot ROM</i> in BIOS/CMOS</span>
</h4>
<p>It appears that setting <i>Integrated Peripherals --&gt; Onboard LAN Boot ROM --&gt; Enabled</i> in BIOS/CMOS reactivates the Realtek LAN chip on system boot-up, despite the Windows driver disabling it on OS shutdown.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This was tested successfully multiple times with GIGABYTE system board GA-G31M-ES2L with BIOS version F8 released on 2009/02/05. YMMV.</div>
<h3><span class="mw-headline" id="No_interface_with_Atheros_chipsets">No interface with Atheros chipsets</span></h3>
<p>Users of some Atheros ethernet chips are reporting it does not work out-of-the-box (with installation media of February 2014). The working solution for this is to install the package <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/backports-patched/">backports-patched</a></span><sup><small>AUR</small></sup> from AUR.
</p>
<h3><span class="mw-headline" id="Broadcom_BCM57780">Broadcom BCM57780</span></h3>
<p>This Broadcom chipset sometimes does not behave well unless you specify the order of the modules to be loaded. The modules are <code>broadcom</code> and <code>tg3</code>, the former needing to be loaded first.
</p>
<p>These steps should help if your computer has this chipset:
</p>
<pre>$ lspci | grep Ethernet
02:00.0 Ethernet controller: Broadcom Corporation NetLink BCM57780 Gigabit Ethernet PCIe (rev 01)
</pre>
<p>If your wired networking is not functioning in some way or another, try unplugging your cable then doing the following (as root):
</p>
<pre># modprobe -r tg3
# modprobe broadcom
# modprobe tg3
</pre>
<p>Now plug you network cable in. If this solves your problems you can make this permanent by adding <code>broadcom</code> and <code>tg3</code> (in this order) to the <code>MODULES</code> array in <code>/etc/mkinitcpio.conf</code>:
</p>
<pre>MODULES=".. broadcom tg3 .."
</pre>
<p>Then rebuild the initramfs:
</p>
<pre># mkinitcpio -p linux
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> These methods may work for other chipsets, such as BCM57760.</div>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:7d876dcc0aeb99723c8082d6986c7db5.html" title="Category:正體中文">正體中文</a></li>
<li><a href="../zh-TW/Category:Networking.html" title="Category:Networking (正體中文)">Networking (正體中文)</a></li>
<li><a href="../zh-TW/Category:Installation_process.html" title="Category:Installation process (正體中文)">Installation process (正體中文)</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Network_configuration_(%E6%AD%A3%E9%AB%94%E4%B8%AD%E6%96%87)&amp;oldid=656164">https://wiki.archlinux.org/index.php?title=Network_configuration_(正體中文)&amp;oldid=656164</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 26 March 2021, at 09:09.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
