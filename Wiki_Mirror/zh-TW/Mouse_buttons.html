<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Mouse buttons (正體中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Mouse_buttons_正體中文 rootpage-Mouse_buttons_正體中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Mouse buttons (正體中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="noprint archwiki-template-message">
<p><a href="/title/File:Tango-preferences-desktop-locale.png" class="image"><img alt="Tango-preferences-desktop-locale.png" src="../File:Tango-preferences-desktop-locale.png" decoding="async" width="48" height="48"></a><b>本條目或段落需要進行<a href="/title/ArchWiki:Contributing#Translating" title="ArchWiki:Contributing">翻譯</a>。</b><a href="/title/File:Tango-preferences-desktop-locale.png" class="image"><img alt="Tango-preferences-desktop-locale.png" src="../File:Tango-preferences-desktop-locale.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>註記: </b> <span style="color:red;">please use the first argument of the template to provide more detailed indications.</span> (<a rel="nofollow" class="external text" href="https://wiki.archlinux.org/title/Talk:Mouse_buttons_(%E6%AD%A3%E9%AB%94%E4%B8%AD%E6%96%87)">討論</a>)</div>
</div>
<div class="noprint archwiki-template-message">
<p><a href="/title/File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a><b>This article or section is out of date.</b><a href="/title/File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> rc.d references. Needs update to <a href="/title/Systemd" title="Systemd">Systemd</a>. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/title/Talk:Mouse_buttons_(%E6%AD%A3%E9%AB%94%E4%B8%AD%E6%96%87)">Talk:Mouse buttons (正體中文)#</a>)</div>
</div>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#About_/_Prerequisites"><span class="tocnumber">1</span> <span class="toctext">About / Prerequisites</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Finding_the_Mouse_Name"><span class="tocnumber">2</span> <span class="toctext">Finding the Mouse Name</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Configuring_Xorg"><span class="tocnumber">3</span> <span class="toctext">Configuring Xorg</span></a></li>
<li class="toclevel-1 tocsection-4">
<a href="#Post_Configuration"><span class="tocnumber">4</span> <span class="toctext">Post Configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#Google_Chrome"><span class="tocnumber">4.1</span> <span class="toctext">Google Chrome</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Opera"><span class="tocnumber">4.2</span> <span class="toctext">Opera</span></a></li>
<li class="toclevel-2 tocsection-7">
<a href="#Firefox"><span class="tocnumber">4.3</span> <span class="toctext">Firefox</span></a>
<ul>
<li class="toclevel-3 tocsection-8"><a href="#Horizontal_Scroll"><span class="tocnumber">4.3.1</span> <span class="toctext">Horizontal Scroll</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-9">
<a href="#Firefox3"><span class="tocnumber">4.4</span> <span class="toctext">Firefox3</span></a>
<ul>
<li class="toclevel-3 tocsection-10"><a href="#Thumb_Buttons_-_Forward_and_Back"><span class="tocnumber">4.4.1</span> <span class="toctext">Thumb Buttons - Forward and Back</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-11"><a href="#xmodmap_tweaking"><span class="tocnumber">4.5</span> <span class="toctext">xmodmap tweaking</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12">
<a href="#Alternate_Methods"><span class="tocnumber">5</span> <span class="toctext">Alternate Methods</span></a>
<ul>
<li class="toclevel-2 tocsection-13"><a href="#Method_1_-_IMPS/2"><span class="tocnumber">5.1</span> <span class="toctext">Method 1 - IMPS/2</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Method_2_-_ExplorerPS/2"><span class="tocnumber">5.2</span> <span class="toctext">Method 2 - ExplorerPS/2</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Method_3_-_Auto"><span class="tocnumber">5.3</span> <span class="toctext">Method 3 - Auto</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Method_4_-_btnx_(DEPRECATED!!)"><span class="tocnumber">5.4</span> <span class="toctext">Method 4 - btnx (DEPRECATED!!)</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Method_5_-_easystroke"><span class="tocnumber">5.5</span> <span class="toctext">Method 5 - easystroke</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Firefox_3_button_6_+_7_correction:"><span class="tocnumber">5.6</span> <span class="toctext">Firefox 3 button 6 + 7 correction:</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-19">
<a href="#Binding_keyboard_to_mouse_buttons"><span class="tocnumber">6</span> <span class="toctext">Binding keyboard to mouse buttons</span></a>
<ul>
<li class="toclevel-2 tocsection-20"><a href="#xvkbd_and_xbindkeys"><span class="tocnumber">6.1</span> <span class="toctext">xvkbd and xbindkeys</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#Why_standard_methods_are_not_enough?"><span class="tocnumber">6.2</span> <span class="toctext">Why standard methods are not enough?</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#kbde"><span class="tocnumber">6.3</span> <span class="toctext">kbde</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#evrouter"><span class="tocnumber">6.4</span> <span class="toctext">evrouter</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#Binding_+_and_-_in_Logitech_G5_mouse"><span class="tocnumber">6.5</span> <span class="toctext">Binding + and - in Logitech G5 mouse</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="#Startup_scripts"><span class="tocnumber">6.6</span> <span class="toctext">Startup scripts</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-26"><a href="#User_Tools"><span class="tocnumber">7</span> <span class="toctext">User Tools</span></a></li>
<li class="toclevel-1 tocsection-27"><a href="#Credits"><span class="tocnumber">8</span> <span class="toctext">Credits</span></a></li>
</ul>
</div>

<h2>
<span id="About_.2F_Prerequisites"></span><span class="mw-headline" id="About_/_Prerequisites">About / Prerequisites</span>
</h2>
<p>This article is for users that have a mouse with more than 7 mouse buttons and want to be able to use all of them. Logitech makes several of these (if you have a <a rel="nofollow" class="external text" href="https://secure.logitech.com/index.cfm/mice_pointers/trackballs/devices/156&amp;cl=us,en">Logitech Marble® Mouse</a> you can also look at <a href="/title/Logitech_Marble_Mouse" title="Logitech Marble Mouse">this page</a>), and Microsoft makes a few as well. If you have one of these mice, read on!
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  These are helper comments, and can be ignored if you are looking for nothing but raw information. Due to community feedback, I decided to add a bit more commenting that describes what's going on "behind the scenes" with this configuration.</div>
<p>We will be using the <code>evdev</code> driver for Xorg. EVentDEVice is an advanced driver for USB input devices which offers much greater power over the standard Xorg <code>mouse</code> driver. It's also more "direct" than the <code>mouse</code> driver, allowing lower latency and less translation issues.
</p>
<ul><li>Note that <code>evdev</code> is both a kernel module and an Xorg input driver. All the Arch kernels come with the <code>evdev</code> module.</li></ul>
<p>With the newer xorg 11R7.0 it seems only the following changes to /etc/X11/xorg.conf need to be made with nothing else needing to be done.
</p>
<h2><span class="mw-headline" id="Finding_the_Mouse_Name">Finding the Mouse Name</span></h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  To get accurate information it is sometimes required to execute this command from a boot where no Xorg or mouse drivers have been loaded.</div>
<p>The first step is to find the name of the mouse. To do this, execute the following command:
</p>
<pre>$ egrep "Name|Handlers" /proc/bus/input/devices
</pre>
<p>This should output something like this:
</p>
<pre>N: Name="Logitech USB Gaming Mouse"
H: Handlers=mouse0 event0 ts0 
N: Name="HID 0566:3002"
H: Handlers=kbd event1 
</pre>
<p>The mouse is the one that has the <code>Handlers=mouse0</code>, so the name of the device is <code>Logitech USB Gaming Mouse</code>.
</p>
<ul><li>My mouse is a Logitch G5, your mouse is probably different, and therefore the Name will be different.</li></ul>
<p>Copy the name of the device, and open up <code>/etc/X11/xorg.conf</code>.
</p>
<h2><span class="mw-headline" id="Configuring_Xorg">Configuring Xorg</span></h2>
<p>Now, we need an entry in xorg.conf that tells X how to use this mouse. It should look something like this:
</p>
<pre>Section "InputDevice"
  Identifier      "Evdev Mouse"
  Driver          "evdev"
  Option          "Name" "Logitech USB Gaming Mouse"
  Option          "evBits"  "+1-2"
  Option          "keyBits" "~272-287"
  Option          "relBits" "~0-2 ~6 ~8"
  Option          "Pass"    "3"
  Option          "CorePointer"
EndSection
</pre>
<p>Replace the "Name" option with the name you copied from above. You may also omit the "CorePointer" option if you use multiple mice or experience errors when attempting to load Xorg.   The other options are all basic mouse configurations for evdev and should work with most mice.
</p>
<p>Next, we need to tell X to use the mouse, so look in xorg.conf for <code>ServerLayout</code>.
</p>
<p>Modify the <code>InputDevice</code> section to use "Evdev Mouse" as the device. When you are done, it should look something like this:
</p>
<pre>Section "ServerLayout"
  Identifier     "Default Layout"
  Screen 0       "Monitor0" 0 0
  InputDevice    "Keyboard0" "CoreKeyboard"
  InputDevice    "Evdev Mouse" "CorePointer"
EndSection
</pre>
<p>The only thing you should change in the layout is the InputDevice line that refers to your mouse.
</p>
<p>That should be all that's required.
</p>
<ul><li>Edit by: xxsashixx</li></ul>
<p>This is for Logitech G5 Mouse users. I have not tested this for other mouses but if you do not add this your mouse <b>MAY</b> not work.
If you do not need to add this, then do not.
</p>
<p>Put 
</p>
<pre>Option "Device" "/dev/input/event[#]"
</pre>
<p>in the InputDevice section or else the mouse will not be picked up.
</p>
<p>[#] = The number you got from:
</p>
<pre>egrep "Name|Handlers" /proc/bus/input/devices
</pre>
<ul><li>Edit by: bapman</li></ul>
<p>With the above method, your mouse might not to work after reboot (event number changes). To fix this, you can use symlinks in /dev/input/by-id. For example :
</p>
<pre>Option      "Device" "/dev/input/by-id/usb-Logitech_USB_Receiver-event-mouse"
</pre>
<p>To find the appropriate id, do :
</p>
<pre>ls /dev/input/by-id/
</pre>
<ul><li>Edit by: Diamir</li></ul>
<p>With a Desktop type keyboard-mouse, this doesnt work because there is only one usb attachement 
and /dev/input/by-id contains only the keyboard.
In this case, we can build an udev rule to get a consistant link.
The following rules create the link /dev/input/usbmouse which point on the correct event entry:
</p>
<pre>KERNEL=="event[0-9]*", BUS=="usb", SYSFS{modalias}=="usb:v045Ep008Ad7373dc00dsc00dp00ic03isc00ip00", SYMLINK+="input/usbmouse"
</pre>
<p>You can call it z10_usb_mouse.rules and put it in /etc/udev/rules.d
</p>
<p>The cryptic value to use for SYSFS(modalias) can be get the following way:
</p>
<p>enter the command cat /proc/bus/input/devices
</p>
<p>You will find the keyvoard and the mouse and see event4 is the mouse in this case: 
</p>
<pre>I: Bus=0003 Vendor=045e Product=008a Version=0111
N: Name="Microsoft Microsoft Wireless Optical Desktop� 1.00"
P: Phys=usb-0000:00:10.0-2/input0
S: Sysfs=/devices/pci0000:00/0000:00:10.0/usb1/1-2/1-2:1.0/input/input3
U: Uniq=
H: Handlers=kbd event0 
B: EV=120013
B: KEY=1000000000007 ff800000000007ff febeffdff3cfffff fffffffffffffffe
B: MSC=10
B: LED=107
</pre>
<pre>I: Bus=0003 Vendor=045e Product=008a Version=0111
N: Name="Microsoft Microsoft Wireless Optical Desktop� 1.00"
P: Phys=usb-0000:00:10.0-2/input1
S: Sysfs=/devices/pci0000:00/0000:00:10.0/usb1/1-2/1-2:1.1/input/input4
U: Uniq=
H: Handlers=kbd mouse0 event1 
B: EV=17
B: KEY=3000000000000 0 1f0000 f8400244000 601878d800d448 1e000000000000 0
B: REL=7c3
B: MSC=10
</pre>
<p>So I enter the following command (adapt event # to your particular case):
</p>
<pre>udevinfo -a -p `udevinfo -q path -n /dev/input/event4` | grep modalias
   ATTRS{modalias}=="input:b0003v045Ep008Ae0111-e0,1,2,4,k71,72,73,74,83,86,8A,8C,8E,8F,9B,9C,9E,9F,A3,A4,A5,A6,AB,AC,B5,B6,CE,D2,D5,E2,E7,E8,E9,EA,EB,110,111,112,113,114,1B0,1B1,r0,1,6,7,8,9,A,am4,lsfw"
   ATTRS{modalias}=="usb:v045Ep008Ad7373dc00dsc00dp00ic03isc00ip00"
   ATTRS{modalias}=="pci:v00001106d00003038sv00001043sd000080EDbc0Csc03i00"
</pre>
<p>grab the ATTRS which becomes with usb: to complete "SYSFS{modalias}== " entry
</p>
<p>And finaly, use "usbmouse" as the Device Option in xorg.conf:
</p>
<pre>Option "Device" "/dev/input/usbmouse"
</pre>
<h2><span class="mw-headline" id="Post_Configuration">Post Configuration</span></h2>
<h3><span class="mw-headline" id="Google_Chrome">Google Chrome</span></h3>
<p>It just works™.
</p>
<p>Horizontal scroll works out of the box - push the scroll wheel left or right.  Thumb buttons also work as next/previous page.
</p>
<h3><span class="mw-headline" id="Opera">Opera</span></h3>
<p>It just works™.
</p>
<p>Note: buttons can be mapped to functions easily in <code>Preferences &gt; Advanced &gt; Shortcuts &gt; Mouse set-up</code>. For example, to bind <i>button 8</i> to <i>back</i>:
</p>
<ol>
<li>Navigate to mouse set-up and expand the <i>Application</i> drop-down</li>
<li>In the input column, type: <i>Button 8</i>
</li>
<li>In the actions column, type: <i>Back</i>
</li>
</ol>
<h3><span class="mw-headline" id="Firefox">Firefox</span></h3>
<h4><span class="mw-headline" id="Horizontal_Scroll">Horizontal Scroll</span></h4>
<p>By default, left right scroll on a FX/MX mouse translates into back/forward, respectively. If you do not like this, open <code>about:config</code> and change a few values:
</p>
<pre>mousewheel.horizscroll.withnokey.action      0
mousewheel.horizscroll.withnokey.numlines   -3
</pre>
<p>OR (tested on Logitech G5)
</p>
<pre>mousewheel.horizscroll.withnokey.action      2
mousewheel.horizscroll.withnokey.numlines    2
</pre>
<p>NOTE: If you use a positive value for numlines, your left/right will switch, ie: pressing left scrolls the window to the right.
</p>
<h3><span class="mw-headline" id="Firefox3">Firefox3</span></h3>
<p>OR (tested on Microsoft Wireless Intellimouse explorer 2.0)
</p>
<pre>mousewheel.horizscroll.withnokey.action         2
mousewheel.horizscroll.withnokey.numlines      -1
mousewheel.horizscroll.withnokey.sysnumlines   false
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  If you use the true value for numlines, your left/right will be inverted.</div>
<h4><span class="mw-headline" id="Thumb_Buttons_-_Forward_and_Back">Thumb Buttons - Forward and Back</span></h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  The following maybe redundant depending on whether xev detects all your mouse buttons correctly (functions can be mapped on a per-app basis) or you want to change the default behaviour.</div>
<p>To do this we need to map keystrokes to the desired mouse buttons and install xvkbd and xbindkeys.
</p>
<pre># pacman -S xvkbd xbindkeys
</pre>
<p>In most modern applications which use back/forward features, XF86Back is mapped to back and XF86Forward is mapped to forward by default. On most MX mice the thumb buttons resolve to 8 &amp; 9. If your mouse is different, check button numbers using xev and replace the numbers used in the example (b:8 &amp; b:9).
</p>
<p>So if you have an MX mouse you would create the file ~/.xbindkeysrc, containing:
</p>
<pre># Mouse Buttons
"xvkbd -xsendevent -text "\[XF86Back]""
m:0x0 + b:8 
"xvkbd -xsendevent -text "\[XF86Forward]""
m:0x0 + b:9
</pre>
<p>Now to test... Run the following command and if it works as expected remember to add xbindkeys to <code>.xinitrc</code> or somewhere where it will be executed each time X starts. Also, this should work with Epiphany and Konqueror without any additional configuration or use of  <a href="/title/IMWheel" title="IMWheel">IMWheel</a>.
</p>
<pre>xbindkeys
</pre>
<p>The above info and more help may be found in the <a href="/title/MX1000_Buttons" class="mw-redirect" title="MX1000 Buttons">MX1000 Buttons</a> wiki.
</p>
<h3><span class="mw-headline" id="xmodmap_tweaking">xmodmap tweaking</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  None of the below is necessary with evdev, but it's here for non-evdev users. Unless something does not work on your mouse, ignore this whole section!</div>
<p>If you use .xinitrc to load X, then add this to <code>.xinitrc</code> (change for the number of buttons you have):
</p>
<pre> xmodmap -e "pointer = 1 2 3 6 7 8 9 10 11 12 4 5" &amp;
</pre>
<p>Note that buttons 4 and 5 <b>must go on the end</b> or else your scroll wheel will not work.
</p>
<p>If you use GDM/XDM/KDM instead of .xinitrc, then create the file <code>~/.Xmodmap</code> and add this to it (change for the number of buttons you have):
</p>
<pre> pointer = 1 2 3 6 7 8 9 10 11 12 4 5
</pre>
<ul><li>GDM/XDM/KDM read the <code>~/.Xmodmap</code> file if it's present, whereas <code>startx</code> does not. Another solution would be to add this to your ~/.xinitrc: <code>xmodmap -e $(cat ~/.Xmodmap)</code>. This would allow you to use *DM and <code>startx</code> while only having to edit <code>~/.Xmodmap</code> when you need to make changes.</li></ul>
<p>You may have to play with these numbers a bit to get your desired behavior. Some mice use buttons 6 and 7 for the scroll wheel, in which case those buttons would have to be the last numbers. Keep playing with it until it works!
</p>
<p>You can also check to see which buttons are being read with a program called 'xev', which is part of XOrg. When xev is run, it will show a box on your desktop that you can put the cursor into and click buttons to find out what buttons have been mapped.
</p>
<h2><span class="mw-headline" id="Alternate_Methods">Alternate Methods</span></h2>
<p>The following methods use standard X.org mouse input driver (xf86-input-mouse) instead of using the evdev driver. It works on mice up to 7 buttons.  Edit <code>/etc/X11/xorg.conf</code> InputDevice section for your mouse to reflect the changes shown below. Then restart X and you are done.
</p>
<h3>
<span id="Method_1_-_IMPS.2F2"></span><span class="mw-headline" id="Method_1_-_IMPS/2">Method 1 - IMPS/2</span>
</h3>
<p>This has been tested on an IntelliMouse Explorer 3.0.  Your mileage may vary, as this does not seem to work for all said mice.
</p>
<pre>   Driver      "mouse"
   Option      "Protocol" "IMPS/2"
   Option      "Device" "/dev/input/mice"
   Option      "ZAxisMapping" "4 5 6 7"
</pre>
<h3>
<span id="Method_2_-_ExplorerPS.2F2"></span><span class="mw-headline" id="Method_2_-_ExplorerPS/2">Method 2 - ExplorerPS/2</span>
</h3>
<p>This has been tested on a Logitech MX400 and MX518 and should work on any mx series mouse with up to 7 buttons. 
</p>
<pre>   Driver         "mouse"
   Option         "Protocol" "ExplorerPS/2"
   Option         "Device" "/dev/input/mice"
   Option         "Buttons" "7"
   Option         "ZAxisMapping" "4 5"
   Option         "ButtonMapping" "1 2 3 6 7"
</pre>
<p>Settings from above also works for Microsoft InteliMouse Explorer 3.0 that connects through USB.
</p>
<h3><span class="mw-headline" id="Method_3_-_Auto">Method 3 - Auto</span></h3>
<p>This has been tested on a Logitech MX400 and should work on most mice with up to 7 buttons.
</p>
<pre>   Driver         "mouse"
   Option         "Protocol" "auto"
   Option         "Device" "/dev/input/mice"
   Option         "Buttons" "7"
   Option         "ZAxisMapping" "4 5"
   Option         "ButtonMapping" "1 2 3 6 7"
</pre>
<p>This has been tested to work with Logitech MX1000.
</p>
<pre>   Driver         "mouse"
   Option         "Protocol" "auto"
   Option         "Device" "/dev/input/mice"
   Option         "Emulate3Buttons" "no"
   Option         "Buttons" "12"
   Option         "ZAxisMapping" "4 5 7 6 8 9"
</pre>
<h3>
<span id="Method_4_-_btnx_.28DEPRECATED.21.21.29"></span><span class="mw-headline" id="Method_4_-_btnx_(DEPRECATED!!)">Method 4 - btnx (DEPRECATED!!)</span>
</h3>
<p><a rel="nofollow" class="external text" href="http://www.ollisalonen.com/btnx/">btnx: Button Extension – a GNU/GPL mouse tool for GNU/Linux</a>
</p>
<p>This allows the use of all buttons on the Logitech MX Revolution and reportedly other multi-button mice as well.  Provides greater control &amp; configuration than the evdev driver.
</p>
<p>btnx is a daemon, as such it needs to be configured as root, and its actions are available to all users.
</p>
<p>Install via AUR:
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/btnx-config-git/">btnx-config-git</a></span><sup><small>AUR</small></sup> then <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/btnx-git/">btnx-git</a></span><sup><small>AUR</small></sup>
Be sure the xorg.conf "Device" is at the default "/dev/input/mice" rather than "evdev".
</p>
<p>Then configure your buttons by running btnx-config as root:
</p>
<pre>btnx-config
</pre>
<p>Save your configuration and start btnx daemon (as root):
</p>
<pre>/etc/rc.d/btnx start
</pre>
<p>You are likely to want this daemon to be started during boot, so add it to the DAEMONS array of you are /etc/rc.conf
</p>
<pre>DAEMONS=(.... @btnx ....)
</pre>
<p><b>Though very convenient, btnx is no longer available. Its developper states "btnx might not work as intended on some distros anymore". He advises to use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/easystroke/">easystroke</a></span><sup><small>AUR</small></sup> instead</b>.
</p>
<h3><span class="mw-headline" id="Method_5_-_easystroke">Method 5 - easystroke</span></h3>
<p><a rel="nofollow" class="external text" href="https://sourceforge.net/projects/easystroke/">easystroke is a gesture-recognition application for X11</a>
</p>
<p>easystroke is a mouse gesture application, but it can be used to manage mouse buttons as well. It's main advantage o-ver btnx is that it's more versatile. On the other hand, it's user-based, so any user has to configure it to reflect his own needs. 
</p>
<p>In order to set up easystroke to manage your extra mouse buttons, you will need to do this (example features Back/Forward mouse buttons) :
run:
</p>
<pre>easystroke -g
</pre>
<p>Go to Preferences tab &gt; Additional buttons &gt; Add, and add any special button.
</p>
<p>Go to Action tab &gt; Add action, give the new action a name, as Type choose "Key", as Details set "Alt+Left" for Back button, "Alt+Right" for Forward button, as Stroke click the proper mouse button (confirm if a warning is displayed), and voilà! Your mouse button is configured.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  <b>Since Firefox 3, buttons 6 + 7 are no longer mapped to back and forward as in Firefox 2.</b> Therefore, if using the above methods in Xorg, refer further to corrective methods below if necessary</div>
<h3>
<span id="Firefox_3_button_6_.2B_7_correction:"></span><span class="mw-headline" id="Firefox_3_button_6_+_7_correction:">Firefox 3 button 6 + 7 correction:</span>
</h3>
<p>For MX518, try changing the above ButtonMapping Option to:
</p>
<pre>Option         "ButtonMapping" "1 2 3 8 9" 
</pre>
<p>And restart X. (Successfully tested on MX518)
</p>
<p>Another method:
</p>
<p>Leave back/forward mapped to 6+7 in xorg. In Firefox 3 about:config change the following keys:
</p>
<pre>mousewheel.horizscroll.withnokey.action = 2
mousewheel.horizscroll.withnokey.numlines = -1
mousewheel.horizscroll.withnokey.sysnumlines = false
</pre>
<h2><span class="mw-headline" id="Binding_keyboard_to_mouse_buttons">Binding keyboard to mouse buttons</span></h2>
<h3><span class="mw-headline" id="xvkbd_and_xbindkeys">xvkbd and xbindkeys</span></h3>
<p>Let us say we want to bind some mouse buttons to keyboard ones. The problem we will encounter is that we do not know how to emulate a key press. Here comes in handy xvkbd. We can use it along with xbindkeys. 
</p>
<pre>pacman -S xbindkeys xvkbd
xbindkeys --defaults &gt;&gt; ~/.xbindkeysrc
xbindkeys
</pre>
<p>to restart xbindkeys type:
</p>
<pre>pkill -f xbindkeys
xbindkeys 
</pre>
<p>Here is example ~/.xbindkeysrc config:
</p>
<pre>"xvkbd  -text "\[F8]""
       m:0x0 + b:8
"xvkbd  -text "\[Shift]\[Left]""
       m:0x0 + b:9
"xvkbd  -text "\[Shift]\[Right]""
       m:0x0 + b:10
"xvkbd  -text 2"
       m:0x0 + b:11
"xvkbd  -text 3"
       m:0x0 + b:12
</pre>
<p>if you want to check your mouse buttons number use xev. Do not forget to type capital letters in xvkbd -text usage and to escape opening bracket with \, or you get simply [Shift] written.
</p>
<h3>
<span id="Why_standard_methods_are_not_enough.3F"></span><span class="mw-headline" id="Why_standard_methods_are_not_enough?">Why standard methods are not enough?</span>
</h3>
<p>This will work great for X servers, but it seems not to work in some specific situations, like in Enemy Territory game. So I will describe a bit more advanced configuration, which work with my logitech G5 buttons - I can use all my 5 additional buttons along with 3 standard and a scroll, which gives overall 10 events to use in Enemy Territory. So here we go:
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  <b>Update:</b> evrouter can now simulate X11 key events so it is now possible to skip to <a href="#kbde">#kbde</a> and only use <a href="/title/Get_All_Mouse_Buttons_Working#evrouter" class="mw-redirect" title="Get All Mouse Buttons Working">evrouter</a> to bind keyboard buttons to your mouse. </div>
<h3><span class="mw-headline" id="kbde">kbde</span></h3>
<p>To emulate keystroke which will be later detected in Enemy Territory we need something more advanced than xvkbd. Here comes in handy kbde, but it does not exist in AUR yet – we have got to compile it by ourselves. We need two programs: kbde and kbde-driver. Kbde website is located on sourceforge <a rel="nofollow" class="external autonumber" href="http://kbde.sourceforge.net/">[1]</a>, check it for download, you need only kbde-driver. Apparently, it does not work for me without some hacking. Use your editor and add 
</p>
<pre>#include &lt;linux/version.h&gt;
</pre>
<p>somewhere near other includes in the driver/kbde.c file. (OK, I'm not sure whether it is a proper way to compile it, but it works).
Assuming that you have already done that try:
</p>
<pre>tar -zxvf kbde-driver-1*
cd kbde-driver-1*
make
# if you don't have sudo just use su and type this as root
sudo make install mknod
modprobe kbde
</pre>
<p>and now you should have kbde working. If you want to use it as a non-root (yes, you want) change permissions, the quickest and dirtiest way is (note that I added my startup scripts at the end of this text):
</p>
<pre>chgrp users /dev/kbde
chmod 220 /dev/kbde
</pre>
<p>If not try reading installation instructions on the site. Now we can use it to emulate keystrokes visible even in login shells:
</p>
<pre>kbde --press 5 --release 5 -b
</pre>
<p>this will press 5 for about three times. If you want to type a string using this, rather than this use --asci=STRING, as press sometimes generates 3 strokes before it is released.
</p>
<h3><span class="mw-headline" id="evrouter">evrouter</span></h3>
<p>Now we need something which will work when Enemy Territory is loaded. Apparently, xbindkeys does not work here, so we need another program: evrouter <a rel="nofollow" class="external autonumber" href="https://www.bedroomlan.org/projects/evrouter/">[2]</a>, which can be found in the AUR: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/evrouter/">evrouter</a></span><sup><small>AUR</small></sup>
</p>
<p>OK, so now we must have evdev and we canNOT use it in X, so here is how my example <code>/etc/X11/xorg.conf</code> mouse section looks like:
</p>
<pre> Section "InputDevice"
   
   Identifier  "Logitech G5"
   
   Driver      "mouse"
   Option      "Protocol" "Auto"
   Option      "Device" "/dev/input/mouse1" # probably you'll need here mouse0
   Option      "Name"   "Logitech USB Gaming Mouse"
   Option      "Buttons" "8" # set this to your number of buttons
   Option      "ZAxisMapping" "4 5"

 EndSection
</pre>
<p>and now we have to restart the X server. 
You will run this as user, and event devices are owned by root, so you have to change the permissions at this point. Let us say we do it just like that, but I advise you to do this more carefully (note that I added my start-up scripts at the end of this text):
</p>
<pre>chgrp users /dev/input/event*
chmod 660 /dev/input/event*
</pre>
<p>Now we can use the <code>--dump</code> option to check what we will have to bind and to which device:
</p>
<pre>evrouter --dump /dev/input/event*
# here click buttons you would like to bind
</pre>
<p>It will give you output similar to config. Here is my example config <code>~/.evrouterrc</code> with kbde usage:
</p>
<pre>"Logitech USB Gaming Mouse" "/dev/input/event.*" any key/278 "SHELL/kbde --press 2 --release 2 -b"
"Logitech USB Gaming Mouse" "/dev/input/event.*" any key/279 "SHELL/kbde --press 3 --release 3 -b"
"Logitech USB Gaming Mouse" "/dev/input/event.*" any key/274 "SHELL/kbde --press 4 --release 4 -b"
"Logitech USB Gaming Mouse" "/dev/input/event.*" any key/277 "SHELL/kbde --press 5 --release 5 -b"
"Logitech USB Gaming Mouse" "/dev/input/event.*" any key/276 "SHELL/kbde --press 6 --release 6 -b"
</pre>
<p>Same config using evrouters built in X11 key event emulator instead of kbde:
</p>
<pre>  "Logitech USB Gaming Mouse" "/dev/input/event.*" any key/278 "XKey/2"
  "Logitech USB Gaming Mouse" "/dev/input/event.*" any key/278 "XKey/3"
  "Logitech USB Gaming Mouse" "/dev/input/event.*" any key/278 "XKey/4"
  "Logitech USB Gaming Mouse" "/dev/input/event.*" any key/278 "XKey/5"
  "Logitech USB Gaming Mouse" "/dev/input/event.*" any key/278 "XKey/6"
</pre>
<p>This works great, even in enemy territory. "none" modifier means that I have to only press the button, other options are <code>Ctrl</code> + <code>Alt</code> and so on. Here I use "any" because "none" means that after pressing <code>Shift</code>, <code>Ctrl</code> or <code>Alt</code>, our buttons would not work. Also note that it accepts regular expressions for mouse name and event path. Then, after setting up a config, run service with:
</p>
<pre>evrouter /dev/input/event* &gt;&gt; /dev/null
</pre>
<p>or change the <code>event*</code> to a device corresponding to your mouse -- but be aware that the numbers are changing sometimes. It will work in background, while outputting some annoying messages, so we stream it to <code>/dev/null</code>. If something went wrong, run it without streaming and check what it outputs. If you want to end it, you have to delete <code>/tmp/evrouter.*</code> manually. Here is a script to kill evrouter:
</p>
<pre>#!/bin/bash
evrouter -q
rm -f /tmp/.evrouter*
</pre>
<p>and here is one to start it:
</p>
<pre>#!/bin/bash
mydevicename="Logitech USB Gaming Mouse"

device=`evrouter -D /dev/input/event* | grep "$mydevicename"` | cut -d ":" -f 2
evrouter $device &gt; /dev/null
</pre>
<p>You have to edit the <code>mydevicename</code> variable to the proper value (the one which is shown by evrouter -D), or just change it to listen on all events by changing device var to /dev/input/event*. OK, I have saved them in <code>/usr/bin/</code> . Now, everything should be ready for use!
</p>
<h3>
<span id="Binding_.2B_and_-_in_Logitech_G5_mouse"></span><span class="mw-headline" id="Binding_+_and_-_in_Logitech_G5_mouse">Binding <code>+</code> and <code>-</code> in Logitech G5 mouse</span>
</h3>
<p>If you want to bind buttons <code>+</code> and <code>-</code> in Logitech G5/7 mouse, which normally changes DPI, you have to use <code>g5hack</code> <a rel="nofollow" class="external autonumber" href="http://piie.net/temp/g5_hiddev.c">[3]</a> released by a lomoco author.
</p>
<pre>wget <a rel="nofollow" class="external free" href="http://piie.net/temp/g5_hiddev.c">http://piie.net/temp/g5_hiddev.c</a>
gcc -o g5hack g5_hiddev.c
./g5hack /dev/usb/hiddev0 3
</pre>
<p>This will change your DPI to 2000, light the 1st LED and disables DPI on-the-fly changing, so you can use it with evrouter. If you would use it frequently I suggest you to copy it to the <code>/usr/bin</code> directory:
</p>
<pre>$ sudo cp g5hack /usr/bin/
</pre>
<p>If you want to bind your <code>+</code> and <code>-</code> buttons, you must copy the line at the bottom (one with the comment '"-" button does not function anymore' above) to the mode you will be using, like, for example, under the "case 3:" you can put it on the line with the comment 'turn on third led' above (deleting the old one before of course).
</p>
<p>For the newest G5 mouse which is reported as "product 0xc049", the original hack does not work. You have to simply change the <code>#define MOUSE_G5 0xc041</code> to <code>#define MOUSE_G5 0xc049</code> and recompile.
</p>
<h3><span class="mw-headline" id="Startup_scripts">Startup scripts</span></h3>
<p>Currently, I am using startup script with a bit dirty methods, so if somebody can propose better, please edit. I have created input group and make my user a member of it.
<code>/etc/rc.local</code>:
</p>
<pre>#!/bin/bash
# creating /dev/kbde nod and changing permissions
# also don't forget to add kbde in modules line in /etc/rc.conf
# to be honest, I'm not sure why we have to create /dev/kbde after each startup, but it seems that only this way it works
# maybe first check if it's needed for you, too
mknod --mode=220 /dev/kbde c 11 0 
chgrp input /dev/kbde
# changing permissions for event* -- evrouter needs that
chmod 660 /dev/input/event*
chgrp input /dev/input/event*
# g5hack ran for a few times to make sure that it'll work...
# note that I've add it to /usr/bin, you should probably put your full path here
# you probably should skip this lines, especially if you don't have logitech g5/g3/g7
g5hack /dev/usb/hiddev0 3
g5hack /dev/usb/hiddev0 3
g5hack /dev/usb/hiddev0 3
</pre>
<p><code>~/.kde/Autostart/init</code>:
</p>
<pre>#!/bin/bash
# there I use my script to start evrouter, which I have presented above
evrouter-start
# here I map my buttons so I can use G5 thumb button as push to talk in TS
# note that I have to use it as middle button also on kde 
# you probably don't need it
xmodmap -e "pointer = 1 9 3 4 5 6 7 2 8 10 11 12"
</pre>
<p>And voila! We have got it working immediately after KDE login.
</p>
<h2><span class="mw-headline" id="User_Tools">User Tools</span></h2>
<p><a rel="nofollow" class="external text" href="http://imwheel.sourceforge.net/">IMWheel</a> provides configurable mouse wheel and button mapping. It can be configured globally or for individual processes.
</p>
<pre># pacman -S imwheel
</pre>
<p>Sample <code>~/.imwheelrc</code> to enable back/forward thumb buttons for all applications, and increased scroll speed in Chromium:
</p>
<pre>".*"
None, Thumb1, Alt_L|Left
None, Thumb2, Alt_L|Right

"^chromium$"
None, Up, Button4, 3
None, Down, Button5, 3
</pre>
<p><a rel="nofollow" class="external text" href="https://web.archive.org/web/20150213031627/http://www.lomoco.org/">lomoco</a> for Logitech MX mice will help you set the proper resolution, enable or disable smart scroll (with boot time support too!), etc. lomoco is available from the <code>[community]</code> repository and can be installed with the following command:
</p>
<pre># pacman -S lomoco
</pre>
<p>Be sure to look at <code>/etc/udev/lomoco_mouse.conf</code> and set up the the options you want to be automatically applied when the mouse gets loaded by <a href="/title/Udev" title="Udev">udev</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The <code>lomoco</code> package may be out of date. There is a hack for newer Logitech mice: <a rel="nofollow" class="external autonumber" href="http://piie.net/temp/g5_hiddev.c">[4]</a>
</div>
<h2><span class="mw-headline" id="Credits">Credits</span></h2>
<ul><li><a rel="nofollow" class="external text" href="https://web.archive.org/web/20081224081950/http://www.linux-gamers.net/modules/wiwimod/index.php?page=HOWTO+Mouse+Buttons">linuX-gamers.net How-Tos: Getting all mouse buttons working in X</a></li></ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="/title/Special:Categories" title="Special:Categories">Categories</a>: <ul>
<li><a href="/title/Category:%E6%AD%A3%E9%AB%94%E4%B8%AD%E6%96%87" title="Category:正體中文">正體中文</a></li>
<li><a href="/title/Category:Mice_(%E6%AD%A3%E9%AB%94%E4%B8%AD%E6%96%87)" title="Category:Mice (正體中文)">Mice (正體中文)</a></li>
<li><a href="/title/Category:X_server_(%E6%AD%A3%E9%AB%94%E4%B8%AD%E6%96%87)" title="Category:X server (正體中文)">X server (正體中文)</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="/title/Category:Pages_or_sections_flagged_with_Template:Translateme_(%E6%AD%A3%E9%AB%94%E4%B8%AD%E6%96%87)" title="Category:Pages or sections flagged with Template:Translateme (正體中文)">Pages or sections flagged with Template:Translateme (正體中文)</a></li>
<li><a href="/title/Category:Pages_or_sections_flagged_with_Template:Out_of_date" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Mouse_buttons_(%E6%AD%A3%E9%AB%94%E4%B8%AD%E6%96%87)&amp;oldid=664164">https://wiki.archlinux.org/index.php?title=Mouse_buttons_(正體中文)&amp;oldid=664164</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 25 April 2021, at 11:55.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="/title/ArchWiki:Privacy_policy" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="/title/ArchWiki:About" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="/title/ArchWiki:General_disclaimer" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
