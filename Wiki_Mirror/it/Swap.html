<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>swap (Italiano) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Swap_Italiano rootpage-Swap_Italiano skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">swap (Italiano)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<p><span></span>
</p>
<div class="archwiki-template-meta-related-articles-start">
<p>Articoli correlati</p>
<ul>
<li><a href="../it/Fstab.html" title="Fstab (Italiano)">fstab (Italiano)</a></li>
</ul>
</div>
<p>Definizione dello swap tratta da quest'articolo <a rel="nofollow" class="external text" href="http://www.linux.com/news/software/applications/8208-all-about-linux-swap-space">All about Linux swap space</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">link interrotto</a> 2020-08-06]</sup>:
</p>
<dl><dd><i>Linux suddivide la memoria fisica RAM (Memoria ad accesso casuale) in blocchi chiamate pagine. Lo swapping è il processo durante il quale una pagina di memoria viene copiata su uno spazio di disco, chiamata area di swap, per liberare memoria RAM. Le dimensioni combinate della memoria fisica e dell'area di swap è la quantità di memoria virtuale disponibile.</i></dd></dl>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Area_di_swap"><span class="tocnumber">1</span> <span class="toctext">Area di swap</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Partizione_dello_swap"><span class="tocnumber">2</span> <span class="toctext">Partizione dello swap</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#File_dello_swap"><span class="tocnumber">3</span> <span class="toctext">File dello swap</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Creazione_di_un_file_di_swap"><span class="tocnumber">3.1</span> <span class="toctext">Creazione di un file di swap</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Rimuovere_il_file_di_swap"><span class="tocnumber">3.2</span> <span class="toctext">Rimuovere il file di swap</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Ripristino_dal_file_di_swap"><span class="tocnumber">3.3</span> <span class="toctext">Ripristino dal file di swap</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Swap_su_una_periferica_USB"><span class="tocnumber">4</span> <span class="toctext">Swap su una periferica USB</span></a></li>
<li class="toclevel-1 tocsection-8">
<a href="#Ottimizzazione_delle_prestazioni"><span class="tocnumber">5</span> <span class="toctext">Ottimizzazione delle prestazioni</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="#Swappiness"><span class="tocnumber">5.1</span> <span class="toctext">Swappiness</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Priorit%C3%A0"><span class="tocnumber">5.2</span> <span class="toctext">Priorità</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Area_di_swap">Area di swap</span></h2>
<p>L'area di swap è di solito una partizione del disco, ma può anche essere un file. Gli utenti possono creare uno spazio di swap durante l'installazione di Arch Linux o in qualsiasi momento in caso di necessità. Lo spazio di swap è generalmente raccomandato per gli utenti con meno di 1 GB di RAM, ma diventa più una questione di preferenza personale su sistemi con una quantità di RAM fisica gratuiti (anche se è necessaria per poter utilizzare la sospensione su disco).
</p>
<p>Per verificare lo stato dello swap, usare il seguente comando:
</p>
<pre>$ swapon -s
</pre>
<p>Oppure：
</p>
<pre>$ free -m
</pre>
<h2><span class="mw-headline" id="Partizione_dello_swap">Partizione dello swap</span></h2>
<p>Una partizione dello swap può essere creata con la maggior parte dei programmi di gestioni delle partizioni (ad es. <code>fdisk</code>, <code>cfdisk</code>). Queste partizioni hanno come numero identificativo <b>82</b>.
</p>
<p>Per impostare un'area di swap, si utilizza il comando <code>mkswap</code>:
</p>
<pre># mkswap /dev/sda2
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attenzione:</strong> Tutti i dati nella partizione specificata andranno perduti.</div>
<p>Per abilitare la partizione per lo swap:
</p>
<pre># swapon /dev/sda2
</pre>
<p>Per abilitare la partizione per lo swap durante l'avvio del sistema, aggiungere questa riga al file <a href="../en/Fstab.html" title="Fstab">fstab</a>:
</p>
<pre>/dev/sda2 none swap defaults 0 0
</pre>
<h2><span class="mw-headline" id="File_dello_swap">File dello swap</span></h2>
<p>Come alternativa alla creazione di una partizione, un file di scambio offre la possibilità di variare la dimensione al volo, e lo si può rimuovere più facilmente. Questo può essere particolarmente utile se lo spazio su disco è prezioso (ad esempio un SSD di modeste dimensioni).
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Il filesystem BTRFS non supporta attualmente i file di swap.</div>
<h3><span class="mw-headline" id="Creazione_di_un_file_di_swap">Creazione di un file di swap</span></h3>
<p>Da root utilizzare <code>fallocate</code> per creare un file di swap di dimensioni a tua scelta (M = Megabytes, G = Gigabytes) (Si può utilizzare anche <code>dd</code>, ma richiede più tempo).  Ad esempio, per creare un file di swap di 512 MB:
</p>
<pre># fallocate -l 512M /swapfile
# dd if=/dev/zero of=/swapfile bs=1M count=512
</pre>
<p>Impostare le autorizzazioni giuste (un file di swap leggibile da tutti è una grande vulnerabilità di sicurezza):
</p>
<pre># chmod 600 /swapfile
</pre>
<p>Dopo aver creato il file dalle dimensioni adeguate, formattarlo:
</p>
<pre># mkswap /swapfile
</pre>
<p>Attivare il file di swap:
</p>
<pre># swapon /swapfile
</pre>
<p>Modificare il file <code>/etc/fstab</code> e aggiungere questa riga:
</p>
<pre>/swapfile none swap defaults 0 0
</pre>
<h3><span class="mw-headline" id="Rimuovere_il_file_di_swap">Rimuovere il file di swap</span></h3>
<p>Per rimuovere il file di swap, bisogna prima disattivarlo.
</p>
<p>Da root:
</p>
<pre># swapoff -a
</pre>
<p>Cancellare il file di swap:
</p>
<pre># rm -rf /swapfile
</pre>
<h3><span class="mw-headline" id="Ripristino_dal_file_di_swap">Ripristino dal file di swap</span></h3>
<p>Per ripristinare il sistema da un file di swap dopo un'ibernazione, richiede l'aggiunta di un parametro al kernel. Questo parametro è <code>resume_offset=&lt;Swap File Offset&gt;</code>. 
</p>
<p>Il valore di <code>&lt;Swap File Offset&gt;</code> può essere ricavato dal comando <code>filefrag -v</code> che mostrerà una tabella. Il valore richiesto si trova alla colonna <code>physical</code> della prima riga. Ad esempio:
</p>
<pre># filefrag -v /swapfile
Filesystem type is: ef53
File size of /swapfile is 4290772992 (1047552 blocks, blocksize 4096)
ext logical  physical  expected  length flags
  0       0     7546880                6144 
  1    6144  7557120  7553023   2048 
  2    8192  7567360  7559167   2048 
...
</pre>
<p>Dall'esempio, il valore di <code>&lt;Swap FIle Offset&gt;</code> è <code>7546880</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Nel parametro del kernel <code>resume</code> bisogna inserire la partizione (es. <code>resume=/dev/sda1</code>), non il percorso al file di swap! Il parametro <code>resume_offset</code> serve ad indicare il blocco sul disco dove inizia il file di swap (es. <code>resume_offset=7546880</code>).</div>
<h2><span class="mw-headline" id="Swap_su_una_periferica_USB">Swap su una periferica USB</span></h2>
<p>Grazie alla modularità offerta da Linux, siamo in grado di avere una partizione di swap su diversi dispositivi. Se si dispone di un disco rigido molto pieno, il dispositivo USB può essere utilizzato come partizione temporaneamente. Questo metodo ha qualche svantaggio:
</p>
<ul>
<li>Il dispositivo USB è più lento del disco rigido.</li>
<li>Le memorie flash hanno cicli limitati di scrittura. Utilizzandole come partizione di swap ridurranno la loro vita.</li>
<li>Quando un altro dispositivo è collegato al computer, non può essere utilizzato lo swap.</li>
</ul>
<p>Per aggiungere un dispositivo USB per lo swap, in primo luogo prendere un flash USB e formattarlo con una partizione di swap. E' possibile utilizzare programmi come Gparted o fdisk. Assicurarsi di etichettare la partizione come swap prima di scrivere la tabella delle partizioni.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attenzione:</strong> Accertarsi di farlo sul disco giusto!</div>
<p>Successivamente, modificare il file <code>fstab</code>
</p>
<pre># nano /etc/fstab
</pre>
<p>Aggiungere una riga sotto l'attuale partizione di swap:
</p>
<pre>UUID=... none swap defaults,pri=10 0 0
</pre>
<p>Dove UUID è ottenuto dal comando:
</p>
<pre>ls -l /dev/disk/by-uuid/ | grep /dev/sdc1
</pre>
<p>Sostituire sdc1 con la partizione di swap su USB. <code>sdb1</code>
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Suggerimento:</strong> E' preferibile utilizzare la UUID perché quando si collegano altri dispositivi al computer si potrebbe modificare l'ordine delle periferiche</div>
<p>Infine, aggiungere
</p>
<pre>pri=0
</pre>
<p>nella voce attuale dello swap nel file fstab, per utilizzare il file di swap sull'hard disk quando la partizione su USB è piena.
</p>
<h2><span class="mw-headline" id="Ottimizzazione_delle_prestazioni">Ottimizzazione delle prestazioni</span></h2>
<p>I parametri dello swap possono essere regolati per aumentare le prestazioni.
</p>
<h3><span class="mw-headline" id="Swappiness">Swappiness</span></h3>
<p>Il parametro dello <i>swappiness</i> <a href="../en/Sysctl.html" title="Sysctl">sysctl</a> rappresenta la preferenza (o l'inibizione) del kernel di utilizzare lo spazio di swap. Swappiness può avere un valore compreso tra 0 e 100. L'impostazione di questo parametro ad un valore basso riduce lo scambio di RAM, ed è noto per migliorare la risposta su molti sistemi.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sysctl.d/90-swappiness.conf
</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">vm.swappiness=1
vm.vfs_cache_pressure=50
</pre>
<h3>
<span id="Priorit.C3.A0"></span><span class="mw-headline" id="Priorità">Priorità</span>
</h3>
<p>Se si dispone di più di un file di swap o una partizione di swap si dovrebbe prendere in considerazione l'assegnazione di un valore di priorità (da 0 a 32767) per ogni area di swap.  Il sistema utilizzerà aree di swap di priorità più elevata prima di utilizzare aree di swap di priorità inferiore. Ad esempio, se si dispone di un disco più veloce (<code>/dev/sda</code>) ed un disco lento (<code>/dev/sdb</code>), assegnare una priorità superiore per l'area di swap trova sul dispositivo veloce. Le priorità possono essere assegnati in fstab attraverso il parametro <code>pri</code>:
</p>
<pre>/dev/sda1 none swap defaults,pri=100 0 0
/dev/sdb2 none swap defaults,pri=10  0 0
</pre>
<p>Oppure attraverso il parametro di swapon <code>−p</code> (o <code>−−priority</code>):
</p>
<pre># swapon -p 100 /dev/sda1
</pre>
<p>Se due o più aree hanno la stessa priorità, ed è la massima priorità disponibili, le pagine sono allocate su un round-robin tra di loro.
</p>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../it/Category:File_systems.html" title="Category:File systems (Italiano)">File systems (Italiano)</a></li></ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Swap_(Italiano)&amp;oldid=638637">https://wiki.archlinux.org/index.php?title=Swap_(Italiano)&amp;oldid=638637</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 14 October 2020, at 07:18.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
