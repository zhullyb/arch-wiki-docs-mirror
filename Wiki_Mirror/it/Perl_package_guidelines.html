<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Perl package guidelines (Italiano) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Perl_package_guidelines_Italiano rootpage-Perl_package_guidelines_Italiano skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Perl package guidelines (Italiano)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="toc" style="display:block; text-align: center; margin-bottom: 1em;">
<b><a href="/title/Creating_Packages_(Italiano)" class="mw-redirect" title="Creating Packages (Italiano)">Linee guida per la creazione di pacchetti</a></b>
<hr>
<p><a href="/title/Eclipse_Plugin_Package_Guidelines_(Italiano)" class="mw-redirect" title="Eclipse Plugin Package Guidelines (Italiano)">Eclipse</a> – <a href="/title/Gnome_Package_Guidelines_(Italiano)" class="mw-redirect" title="Gnome Package Guidelines (Italiano)">GNOME</a> – <a href="/title/Haskell_Package_Guidelines_(Italiano)" class="mw-redirect" title="Haskell Package Guidelines (Italiano)">Haskell</a> – <a href="/title/Java_Package_Guidelines_(Italiano)" class="mw-redirect" title="Java Package Guidelines (Italiano)">Java</a> – <a href="/title/Kernel_Module_Package_Guidelines_(Italiano)" class="mw-redirect" title="Kernel Module Package Guidelines (Italiano)">Kernel</a> – <a href="/title/Lisp_Package_Guidelines_(Italiano)" class="mw-redirect" title="Lisp Package Guidelines (Italiano)">Lisp</a> – <a href="/index.php?title=MinGW_PKGBUILD_Guidelines_(Italiano)&amp;action=edit&amp;redlink=1" class="new" title="MinGW PKGBUILD Guidelines (Italiano) (page does not exist)">MinGW</a> – <a href="/title/OCaml_Package_Guidelines_(Italiano)" class="mw-redirect" title="OCaml Package Guidelines (Italiano)">OCaml</a> – <a href="/title/Perl_Package_Guidelines_(Italiano)" class="mw-redirect" title="Perl Package Guidelines (Italiano)">Perl</a> – <a href="/title/Python_Package_Guidelines_(Italiano)" class="mw-redirect" title="Python Package Guidelines (Italiano)">Python</a> – <a href="/title/Ruby_Gem_Package_Guidelines_(Italiano)" class="mw-redirect" title="Ruby Gem Package Guidelines (Italiano)">Ruby</a> – <a href="/title/VCS_PKGBUILD_Guidelines_(Italiano)" class="mw-redirect" title="VCS PKGBUILD Guidelines (Italiano)">VCS</a> – <a href="/title/Wine_PKGBUILD_Guidelines_(Italiano)" class="mw-redirect" title="Wine PKGBUILD Guidelines (Italiano)">Wine</a> – <a href="/index.php?title=Nonfree_Applications_Package_Guidelines_(Italiano)&amp;action=edit&amp;redlink=1" class="new" title="Nonfree Applications Package Guidelines (Italiano) (page does not exist)">Other</a>
</p>
</div>
<div class="noprint archwiki-template-message">
<p><a href="/title/File:Tango-preferences-desktop-locale-modified.png" class="image"><img alt="Tango-preferences-desktop-locale-modified.png" src="../File:Tango-preferences-desktop-locale-modified.png" decoding="async" width="48" height="48"></a><b>The <a href="/title/ArchWiki:Contributing#Translating" title="ArchWiki:Contributing">translation</a> of this article or section does not reflect the original text.</b><a href="/title/File:Tango-preferences-desktop-locale-modified.png" class="image"><img alt="Tango-preferences-desktop-locale-modified.png" src="../File:Tango-preferences-desktop-locale-modified.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Last updated in 2012, mentions abs (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/title/Talk:Perl_package_guidelines_(Italiano)">Talk:Perl package guidelines (Italiano)#</a>)</div>
</div>
<p>Crezione di <a href="/title/PKGBUILD_(Italiano)" title="PKGBUILD (Italiano)">PKGBUILDs</a> per software scritto in <a href="https://en.wikipedia.org/wiki/Perl" class="extiw" title="wikipedia:Perl">Perl</a>.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Nomenclatura_pacchetti"><span class="tocnumber">1</span> <span class="toctext">Nomenclatura pacchetti</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Posizione_dei_files"><span class="tocnumber">2</span> <span class="toctext">Posizione dei files</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Note"><span class="tocnumber">3</span> <span class="toctext">Note</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Esempio"><span class="tocnumber">4</span> <span class="toctext">Esempio</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Automatizzazione"><span class="tocnumber">5</span> <span class="toctext">Automatizzazione</span></a></li>
<li class="toclevel-1 tocsection-6">
<a href="#Dipendenze_dei_moduli"><span class="tocnumber">6</span> <span class="toctext">Dipendenze dei moduli</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#Implementazione"><span class="tocnumber">6.1</span> <span class="toctext">Implementazione</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Definizione_delle_dipendenze"><span class="tocnumber">6.2</span> <span class="toctext">Definizione delle dipendenze</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Informazioni_Metadata"><span class="tocnumber">6.3</span> <span class="toctext">Informazioni Metadata</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10"><a href="#Perl_e_versioning_di_Pacman"><span class="tocnumber">7</span> <span class="toctext">Perl e versioning di Pacman</span></a></li>
<li class="toclevel-1 tocsection-11">
<a href="#Argomenti_avanzati"><span class="tocnumber">8</span> <span class="toctext">Argomenti avanzati</span></a>
<ul>
<li class="toclevel-2 tocsection-12">
<a href="#Glossario"><span class="tocnumber">8.1</span> <span class="toctext">Glossario</span></a>
<ul>
<li class="toclevel-3 tocsection-13"><a href="#Modulo"><span class="tocnumber">8.1.1</span> <span class="toctext">Modulo</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#Core_Module"><span class="tocnumber">8.1.2</span> <span class="toctext">Core Module</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#Dist_Packages"><span class="tocnumber">8.1.3</span> <span class="toctext">Dist Packages</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-16"><a href="#Installazione_di_Perl_locale"><span class="tocnumber">8.2</span> <span class="toctext">Installazione di Perl locale</span></a></li>
<li class="toclevel-2 tocsection-17">
<a href="#Moduli_per_l'installazione_di_moduli_Perl"><span class="tocnumber">8.3</span> <span class="toctext">Moduli per l'installazione di moduli Perl</span></a>
<ul>
<li class="toclevel-3 tocsection-18"><a href="#ExtUtils::MakeMaker"><span class="tocnumber">8.3.1</span> <span class="toctext">ExtUtils::MakeMaker</span></a></li>
<li class="toclevel-3 tocsection-19"><a href="#Module::Build"><span class="tocnumber">8.3.2</span> <span class="toctext">Module::Build</span></a></li>
<li class="toclevel-3 tocsection-20"><a href="#Module::Install"><span class="tocnumber">8.3.3</span> <span class="toctext">Module::Install</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-21">
<a href="#Variabili_d'ambiente"><span class="tocnumber">8.4</span> <span class="toctext">Variabili d'ambiente</span></a>
<ul>
<li class="toclevel-3 tocsection-22"><a href="#PERL_MM_USE_DEFAULT"><span class="tocnumber">8.4.1</span> <span class="toctext">PERL_MM_USE_DEFAULT</span></a></li>
<li class="toclevel-3 tocsection-23"><a href="#PERL_AUTOINSTALL"><span class="tocnumber">8.4.2</span> <span class="toctext">PERL_AUTOINSTALL</span></a></li>
<li class="toclevel-3 tocsection-24"><a href="#PERL_MM_OPT"><span class="tocnumber">8.4.3</span> <span class="toctext">PERL_MM_OPT</span></a></li>
<li class="toclevel-3 tocsection-25"><a href="#PERL_MB_OPT"><span class="tocnumber">8.4.4</span> <span class="toctext">PERL_MB_OPT</span></a></li>
<li class="toclevel-3 tocsection-26"><a href="#MODULEBUILDRC"><span class="tocnumber">8.4.5</span> <span class="toctext">MODULEBUILDRC</span></a></li>
<li class="toclevel-3 tocsection-27"><a href="#PERL5LIB"><span class="tocnumber">8.4.6</span> <span class="toctext">PERL5LIB</span></a></li>
<li class="toclevel-3 tocsection-28"><a href="#PERL_LOCAL_LIB_ROOT"><span class="tocnumber">8.4.7</span> <span class="toctext">PERL_LOCAL_LIB_ROOT</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-29"><a href="#Esempio_migliorato"><span class="tocnumber">8.5</span> <span class="toctext">Esempio migliorato</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Nomenclatura_pacchetti">Nomenclatura pacchetti</span></h2>
<p>Per quanto riguarda i moduli, il nome del pacchetto dovrebbe iniziare con <code>perl-</code>, mentre il resto dovrebbe essere ricavato dal nome del modulo scritto in minuscolo, sostituendo i due punti con dei trattini. Per esempio, il nome pacchetto corrispondente al modulo <code>HTML::Parser</code> sarà <code>perl-html-parser</code>. Le applicazioni in Perl, dovrebbero mantenere il loro nome, avendo però cura di scriverlo in minuscolo.
</p>
<h2><span class="mw-headline" id="Posizione_dei_files">Posizione dei files</span></h2>
<p>I moduli Perl dovrebbero installare i propri files in <code>/usr/lib/perl5/vendor_perl/</code> (questo comportamento si può ottenere impostando la variabile <code>INSTALLDIRS</code>, come mostrato sotto). Nessun file dovrebbe essere inserito in <code>/usr/lib/perl5/site_perl/</code>, poichè quella directory è riservata ai pacchetti Perl non installati tramite il package manager. I files <code>perllocal.pod</code> e <code>.packlist</code> dovrebbero essere presenti. Le operazioni sopra elencate vengono eseguite nel PKGBUILD d'esempio mostrato sotto.
</p>
<h2><span class="mw-headline" id="Note">Note</span></h2>
<p>E' consigliabile inserire <code>any</code> nell'array <code>arch</code>, poichè la maggior parte dei pacchetti perl sono indipendenti dall'architettura del sistema installato.
</p>
<h2><span class="mw-headline" id="Esempio">Esempio</span></h2>
<p>E' possibile trovare un PKGBUILD d'esempio in <code>/usr/share/pacman/PKGBUILD-perl.proto</code>, fornito dal pacchetto <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=abs">abs</a></span><sup>[<a href="/title/Help:Procedures#Fix_broken_package_links" title="Help:Procedures">broken link</a>: package not found]</sup>.
</p>
<h2><span class="mw-headline" id="Automatizzazione">Automatizzazione</span></h2>
<p>Poichè Perl si basa su <a rel="nofollow" class="external text" href="https://www.cpan.org/">CPAN</a>, esistono alcuni script che eseguono quanto scritto sopra automaticamente, risparmiandovi dallo scrivere i PKGBUILD a mano.
</p>
<p>CPANPLUS (disponibile come <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=perl-cpanplus-dist-arch">perl-cpanplus-dist-arch</a></span> nel repository [community]), è un plugin a CPAN che pacchettizza al volo i moduli installati tramite lo stesso. E' possibile consultare la documentazione online all'indirizzo: <a rel="nofollow" class="external free" href="https://metacpan.org/release/CPANPLUS-Dist-Arch">https://metacpan.org/release/CPANPLUS-Dist-Arch</a>
</p>
<h2><span class="mw-headline" id="Dipendenze_dei_moduli">Dipendenze dei moduli</span></h2>
<p>Perl ha un modo particolare per definire le dipendenze di un pacchetto, rispetto ad altri sistemi come le python eggs o le ruby gems: un egg dipende da altri eggs; una gem da altre gems, mentre le varie Distribuzioni Perl dipendono dai moduli. I moduli sono disponibili esclusivamente tramite distribuzioni CPAN, ma una distribuzione dipende da altre distribuzioni in maniera indiretta: un modulo può definire una propria versione indipendente da quella della distribuzione a cui appartiene, specificandola all'interno del codice sorgente. Allo scopo, viene usata la variabile <code>$VERSION</code> che, quando si usano <code>strics</code> e <code>warnings</code>, viene indicata con la keyword <code>our</code>. Ad esempio:
</p>
<pre>package Foo::Module;
use warnings;
use strict;
our $VERSION = '1.00';
</pre>
<p>I moduli possono cambiare la propria versione a piacimento, ed essere indipendenti da quela della distribuzione. L'utilità di questo comportamento è alquanto dubbia, ma è importante tenerlo a mente. Le versioni dei vari moduli sono difficili da determinare all'infuori dell'interprete perl e richiedono il parsing del codice del modulo, o persino il caricamento dello stesso in perl. Tuttavia, dall'interno dell'interprete perl, determinare la versione di un modulo è molto semplice. Ad esempio:
</p>
<pre>use Foo::Module;
print $Foo::Module::VERSION, "\n";
</pre>
<h3><span class="mw-headline" id="Implementazione">Implementazione</span></h3>
<p>CPAN è l'acronimo di "Centralized Network for Perl Authors". Ogni mirror CPAN, contiene gli indici delle distribuzioni disponibili su CPAN, i moduli in esse contenuti e il nome dell'autore che le ha caricate, il tutto contenuto in semplici files di testo. L'indice più utile risiede in <code>/modules/02packages.details.txt.gz</code>, disponibile in ogni mirror CPAN. Il termine "packages" si riferisce alla keyword <code>package</code> propria del linguaggio perl, e non ad un entità simile ai pacchetti pacman. La shell CPAN, scritta in minuscolo è semplicemente uno script Perl che naviga tali indici alla ricerca dei moduli che si desidera installare.
</p>
<p>I moduli sono elencati nel file <code>02packages.details.txt.gz</code>. Sulla stessa linea del nome del modulo/pacchetto, c'è il percorso al tarball della distribuzione contenente il modulo. Quando si richiede l'installazione di un modulo tramite <i>cpan</i>, quest'ultimo verrà cercato nell'elenco e sarà installata la relativa distribuzione. Durante l'installazione, verrà generata una lista di dipendenze. <i>Cpan</i> proverà quindi a caricare ogni dipendenza nell'interprete perl: se un modulo della versione specificata non può essere caricato, il processo si ripete.
</p>
<p>La shell <i>cpan</i> non deve preoccuparsi di quale versione del modulo richiesto stia installando, poichè l'ultima versione del modulo soddisferà sicuramente la richiesta del modulo di cui era stata inizialmente richiesta l'installazione. Solamente l'ultima versione di ogni modulo viene elencata nel file <code>02packages.details.txt.gz</code> ma, sfortunatamente per l'autore di un pacchetto perl, non è sempre possibile fare affidamento sul fatto che i nostri pacchetti offrano l'ultima versione di una distribuzione perl e dei relativi moduli, poichè il controllo sulle dipendenze operato da Pacman, è molto più statico e rigido.
</p>
<h3><span class="mw-headline" id="Definizione_delle_dipendenze">Definizione delle dipendenze</span></h3>
<p>Le dipendenze di una distribuzione Perl sono definite nei file <code>Makefile.PL</code> o <code>Build.PL</code>. Ad esempio, all'interno dello script <code>Makefile.PL</code>, viene chiamata la funzione <code>WriteMakeFile</code>, che genera il corrispondente <code>Makefile</code>:
</p>
<pre>use ExtUtils::MakeMaker;
WriteMakeFile(
    'NAME' =&gt; 'ArchLinux::Module',
    'VERSION' =&gt; '0.01',
    'PREREQ_PM' =&gt; { 'POSIX' =&gt; '0.01' },
);
</pre>
<p>Benchè il seguente sia un esempio un pò forzato, è importante capire che le dipendenze non vengono finalizzate fino all'esecuzione degli script <code>Makefile.PL</code> o <code>Build.PL</code>. Le dipendenze sono comunque specificate a runtime, il che significa che possono essere alterate o modificate sfruttando la potenza offerta da Perl. L'autore del modulo può, ad esempio, aggiungere, rimuovere o modificare la versione delle dipendenze richieste esattamente prima che la distribuzione sia installata. Alcune distribuzioni multipiattaforma dipendono da moduli specifici del sistema operativo sul quale sono eseguite.
</p>
<p>Ad esempio, la distribuzione CPANPLUS verifica quali plugin del modulo <code>CPANPLUS::Dist</code> sono stati installati. Se vengono rilevati plugins per la versione di CPANPLUS correntemente installata sul sistema, essi vengono aggiunti ai prerequisiti della nuova versione di CPANPLUS. Fortunatamente per il pacchettizzatore Perl, la maggior parte delle dipendenze sono statiche come nell'esempio sopra citato, che richiede il modulo <code>POSIX</code> alla versione minima <code>0.01</code>.
</p>
<h3><span class="mw-headline" id="Informazioni_Metadata">Informazioni Metadata</span></h3>
<p>I file Meta contengono informazioni relative ad una specifica distribuzione, come nome, autore, descrizione astratta e moduli richiesti. Precedentemente, venivano utilizzati dei files nel formato YAML (<code>META.yml</code>), ma recentemente è stato completato il passaggio al formato JSON (<code>META.json</code>). Questi files possono essere modificati a mano, anche se vengono solitamente generati dagli script <code>Makefile.PL</code> o <code>Build.PL</code> quando si pacchettizza una distribuzione per il rilascio. L'ultima versione della specifica è descritta nella relativa <a rel="nofollow" class="external text" href="https://search.cpan.org/perldoc?CPAN::Meta::Spec">documentazione online</a>
</p>
<p>Si ricordi che le dipendenze possono essere cambiate a runtime! Per questo motivo, viene generato un altro file contenente i metadata dopo aver eseguito gli script di pacchettizzazione. Il file è chiamato <code>MYMETA.json</code> e contiene i cambiamenti effettuati a runtime dallo script; quindi potrebbe differire dal file meta generato durante la pacchettizzazione per CPAN.
</p>
<p>Distribuzioni più datate di CPAN non disponevano di file meta, e i prerequisiti venivano semplicemente descritti nel <code>Makefile.PL</code>.
</p>
<h2><span class="mw-headline" id="Perl_e_versioning_di_Pacman">Perl e versioning di Pacman</span></h2>
<p>In Perl le versioni sono numeri, mentre in pacman stringhe.
</p>
<p>Perl ammette versioni decimali nel formato <code>5.002006</code>, oppure utilizzando i punti (<code>5.2.6</code>). Potrebbe essere difficile comparare i due formati, perciò Perl converte la notazione puntata in versione decimale usando gli zeri come padding. Ogni punto separa fino a tre cifre e <code>5.2.6</code> diventa <code>5.002006</code>. E' ora semplice effettuare un confronto con un pò di aritmetica! La <a rel="nofollow" class="external text" href="https://metacpan.org/module/version::Internals">documentazione</a> per il modulo <code>version.pm</code> descrive nel dettaglio la conversione.
</p>
<p>La cosa importante da ricordare è che Perl compara le versioni esattamente come farebbe con due numeri. <code>5.10 = 5.1</code> Semplice, no? Con la notazione puntata, le cose non sono così semplici. <code>5.1.1 == 5.001001</code>. La cosa peggiore in tutto questo è che la maggior parte degli altri sistemi considerano le versioni come stringhe, facendo apparire Perl come un estraneo.
</p>
<p>Pacman funziona meglio utilizzando la notazione puntata, poichè i componenti sono divisi in caratteri non alfanumerici e confrontati uno ad uno come interi. Il primo componente non uguale determina quale versione è minore o maggiore dell'altra. Il componente dalla lunghezza più lunga, preso come stringa, è considerato maggiore, il che significa che <code>5.0001</code> è più grande di <code>5.1</code>.
<code>5.10</code> è quindi maggiore di <code>5.1</code>.
</p>
<p>Il problema è che cambiare la lunghezza della stringa di versione confonde pacman. Si considerino i rilasci di <a rel="nofollow" class="external text" href="https://metacpan.org/release/AnyEvent">AnyEvent</a>:
</p>
<ol>
<li>6.01 (2011-08-26)</li>
<li>6.02 (2011-08-26)</li>
<li>6.1 (2011-10-24)</li>
<li>6.11 (2011-11-22)</li>
<li>6.12 (2011-12-12)</li>
</ol>
<p>Il <code>6.1</code> centrale può causare problemi, in quanto la lunghezza della stringa è diminuita. Nel mondo di pacman, <code>6.1</code> è minore di <code>6.02</code>. Se un pacchetto dipende da <code>perl-anyevent&gt;=6.02</code> e la versione <code>6.1</code> è disponibile nei repository, allora non sarà possibile soddisfare la dipendenza.
</p>
<p>Una soluzione è quella di utilizzare degli zeri come padding, e riservare lo stesso trattamento alle dipendenze. La versione <code>6.1</code> diventerà quindi <code>6.10</code>.
</p>
<h2><span class="mw-headline" id="Argomenti_avanzati">Argomenti avanzati</span></h2>
<p>Una volta che si è acquisita dimestichezza con la creazione di pacchetti perl, è possibile leggere la sezione sottostante, che potrebbe offrire parecchi spunti interessanti. Le informazioni sotto riportate potrebbero inoltre essere utili per risolvere i problemi di pacchettizzazione.
</p>
<h3><span class="mw-headline" id="Glossario">Glossario</span></h3>
<p>Si dovrebbe aver già acquisito familiarità con i seguenti termini:
</p>
<h4><span class="mw-headline" id="Modulo">Modulo</span></h4>
<p>In Perl, moduli sono dichiarati con la parola chiave <code>package</code>. Essi sono contenuti all'interno di un file con estensione <code>.pm</code>, che può a sua volta ospitare diversi moduli al suo interno. I namespace dei moduli sono separati da <code>::</code>, (due doppi punti), ad esempio: <code>Archlinux::Modulo</code>. Quando si carica un modulo, i due doppi punti sono sostituiti con uno slash. Per esempio, il modulo <code>Archlinux::Modulo</code> caricherà il file <code>Archlinux/Modulo.pm</code>.
</p>
<h4><span class="mw-headline" id="Core_Module">Core Module</span></h4>
<p>I Core Modules sono quelli inclusi in un'installazione di Perl, ed alcuni di essi sono disponibili <i>solamente</i> con Perl stesso. Altri moduli possono invece essere scaricati tramite CPAN.
</p>
<h4><span class="mw-headline" id="Dist_Packages">Dist Packages</span></h4>
<p>Sono l'equivalente Perl di un pacchetto di Archlinux. I dist packages sono archivi <code>.tar.gz</code> pieni di files con estensione .pm, tests, documentazione, e tutto il necessario per i moduli ivi contenuti.
</p>
<h3><span class="mw-headline" id="Installazione_di_Perl_locale">Installazione di Perl locale</span></h3>
<p>Il fatto che i programmatori perl potrebbero voler installare diverse versioni di perl potrebbe rappresentare un problema, benchè ciò sia utile per verificare la retrocompatibilità dei programmi. Compilare una propria versione di perl potrebbe garantire inoltre benefici prestazionali. Inoltre, poichè spesso il perl di sistema non è all'ultima versione disponibile, l'utente potrebbe decidere di voler provare una versione più recente.
</p>
<p>Se l'utente ha l'eseguibile perl nel proprio <code>$PATH</code>, esso verrà eseguito quando si scrive il comando "perl" nella shell. Inoltre, questo verrà eseguito anche all'interno del <code>PKGBUILD</code>, cosa che potrebbe causare problemi di difficile individuazione.
</p>
<p>Il problema principale risiede nei moduli XS, che fungono da bridge tra Perl e C, usando le API proprie del Perl. Poichè queste ultime possono cambiare in modo significativo tra due versioni di Perl, se l'utente compila dei moduli XS con la propria versione dell'interprete, questi saranno incompatibili con il Perl di sistema, il quale darà luogo ad un errore di linkin quando si proverà a caricarli.
</p>
<p>Una soluzione potrebbe essere quella di specificare il path assoluto dell'interprete di sistema (<code>/usr/bin/perl</code>) quando si richiama il comando perl nel <code>PKGBUILD</code>.
</p>
<h3>
<span id="Moduli_per_l.27installazione_di_moduli_Perl"></span><span class="mw-headline" id="Moduli_per_l'installazione_di_moduli_Perl">Moduli per l'installazione di moduli Perl</span>
</h3>
<p>Uno dei maggiori vantaggi del Perl, è la grande varietà di moduli/dist packages installabili tramite CPAN. Tra gli altri, esistono moduli che si occupano dell'installazione di... moduli!
</p>
<p>Ne esistono di diversi tipi, ma generalmente il procedimento è sempre lo stesso e si basa sull'inserimento di un piccolo build script nel pacchetto contenente il modulo perl: avviando questo script, il processo di compilazione e installazione ha inizio.
</p>
<p>Di seguito, un elenco dei moduli più comuni:
</p>
<h4><span class="mw-headline" id="ExtUtils::MakeMaker">ExtUtils::MakeMaker</span></h4>
<dl>
<dt>Build script</dt>
<dd><code>MakeFile.PL</code></dd>
<dt>CPAN Link</dt>
<dd><a rel="nofollow" class="external free" href="https://search.cpan.org/dist/ExtUtils-MakeMaker">https://search.cpan.org/dist/ExtUtils-MakeMaker</a></dd>
</dl>
<p>Il primo, e più vecchio è sicuramente <code>ExtUtils::MakeMaker</code>. Il principale svantaggio di questo sistema, è che richiede l'utility <code>make</code> affinché possa compilare ed installare il tutto. Benchè questo non sia un grande problema su un sistema Linux, può diventare problematico per utenti Windows!
La comunità Perl sta cercando di incoraggiare l'uso di moduli più nuovi, che non hanno questo problema.
</p>
<h4><span class="mw-headline" id="Module::Build">Module::Build</span></h4>
<dl>
<dt>Build Script</dt>
<dd><code>Build.PL</code></dd>
<dt>CPAN Link</dt>
<dd><a rel="nofollow" class="external free" href="https://search.cpan.org/dist/Module-Build">https://search.cpan.org/dist/Module-Build</a></dd>
</dl>
<p>Il vantaggio principale derivante dall'uso di questo modulo, è che usa solamente perl e perciò non richiede l'utility <code>make</code> per funzionare. Un tempo, la sua installazione era abbastanza difficoltosa, poichè non era possibile eseguire il build script senza averlo prima installato.
Ad oggi, ciò non rappresenta più un problema, visto <code>Module::Build</code> fa parte dei core modules.
</p>
<h4><span class="mw-headline" id="Module::Install">Module::Install</span></h4>
<dl>
<dt>Build Script</dt>
<dd><code>Makefile.PL</code></dd>
<dt>CPAN Link</dt>
<dd><a rel="nofollow" class="external free" href="https://search.cpan.org/dist/Module-Install">https://search.cpan.org/dist/Module-Install</a></dd>
</dl>
<p>Di recente introduzione, <code>Module::Install</code> richiede che <code>make</code> sia installato per funzionare. È stato scritto per essere un sostituto naturale di <code>ExtUtils::MakeMaker</code>, oltre che per compensare ad alcune delle sue mancanze.
</p>
<p>Una caratteristica molto interessante di questo modulo, è che ne viene fornita una copia all'interno del dist package, cosicchè, a differenza dei moduli sopra menzionati, non sia necessario installarlo nel sistema.
</p>
<p>Un'altra caratteristica di rilievo è l'auto-install. <i>Anche se l'uso di questa feature non è raccomandato, questa viene usata molto spesso</i>. Quando l'autore del modulo ne abilita l'uso, <code>Module::Install</code> procederà alla ricerca e all'installazione di tutti i moduli richiesti che non siano presenti al momento dell'esecuzione di <code>Makefile.PL</code>. Benchè questa funzione venga disabilitata quando <code>Module::Install</code> viene eseguito da <code>CPAN</code> o <code>CPANPLUS</code>, ciò non accade se viene utilizzato all'interno di un <b>PKGBUILD</b>! Si veda <a href="#PERL_AUTOINSTALL">PERL_AUTOINSTALL</a> per risolvere il problema.
</p>
<h3>
<span id="Variabili_d.27ambiente"></span><span class="mw-headline" id="Variabili_d'ambiente">Variabili d'ambiente</span>
</h3>
<p>Alcune variabili di sistema, possono influenzare il modo in cui i moduli sono compilati o installati, e potrebbero causare problemi inaspettati se usate in modo scorretto, specialmente all'interno di un <code>PKGBUILD</code>.
</p>
<h4><span class="mw-headline" id="PERL_MM_USE_DEFAULT">PERL_MM_USE_DEFAULT</span></h4>
<p>Quando questa variabile ha valore "true", i sistemi di installazione dei moduli descritti sopra, risponderanno ad eventuali domande con una risposta affermativa.
</p>
<h4><span class="mw-headline" id="PERL_AUTOINSTALL">PERL_AUTOINSTALL</span></h4>
<p>È possibile passare degli argomenti a linea di comando aggiuntivi a <code>Module::Install</code> attraverso questa variabile. Per disattivare l'auto-install (<i>altamente consigliato</i>), si assegni il valore <code>--skipdeps</code> a questa variabile.
</p>
<pre>export PERL_AUTOINSTALL="--skipdeps"
</pre>
<h4><span class="mw-headline" id="PERL_MM_OPT">PERL_MM_OPT</span></h4>
<p>Questa variabile consente, similmente a PERL_AUTOINSTALL, di passare degli argomenti al sistema di build. Per esempio, è possibile installare i moduli nella propria home directory usando:
</p>
<pre>export PERL_MM_OPT=INSTALLBASE=~/perl5
</pre>
<h4><span class="mw-headline" id="PERL_MB_OPT">PERL_MB_OPT</span></h4>
<p>Uguale a PERL_MM_OPT, questa variabile è riservata a <code>Module::Build</code>. Come sopra, per installare i moduli nella propria home directory:
</p>
<pre>export PERL_MB_OPT=--install_base=~/perl5
</pre>
<h4><span class="mw-headline" id="MODULEBUILDRC">MODULEBUILDRC</span></h4>
<p><code>Module::Build</code> permette di scavalcare gli argomenti a riga di comando con un file di configurazione. Di default, questo è <code>~/.modulebuildrc</code>. È possibile definire un file di configurazione personalizzato inserendone il percorso in <code>MODULEBUILDRC</code>.
</p>
<h4><span class="mw-headline" id="PERL5LIB">PERL5LIB</span></h4>
<p>È possibile definire le directory in cui le librerie verranno cercate (in particolare se le stesse utilizzano <code>Local::Lib</code>) definendo <code>PERL5LIB</code>. Si azzeri il valore della variabile prima di procedere con la compilazione.
</p>
<h4><span class="mw-headline" id="PERL_LOCAL_LIB_ROOT">PERL_LOCAL_LIB_ROOT</span></h4>
<p>Se l'utente usa <code>Local::Lib</code>, la variabile <code>PERL_LOCAL_LIB_ROOT</code> sarà automaticamente definita. Si azzeri il suo valore prima di procedere con la compilazione.
</p>
<h3><span class="mw-headline" id="Esempio_migliorato">Esempio migliorato</span></h3>
<p>Usando le nozioni appena acquisite, è possibile creare un PKGBUILD che resisterà a qualunque tentativo di sabotaggio da parte delle variabili d'ambiente:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">PKGBUILD</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Contributor: Your Name &lt;youremail@domain.com&gt;
pkgname=perl-foo-bar
pkgver=VERSION
pkgrel=1
pkgdesc='This is the awesome Foo::Bar module!'
arch=('any')
url='http://search.cpan.org/dist/Foo-Bar'
license=('GPL' 'PerlArtistic')
depends=('perl&gt;=5.10.0')
makedepends=()
provides=()
conflicts=()
replaces=()
backup=()
options=('!emptydirs')
install=
source=("http://search.cpan.org/CPAN/authors/id/***/***-$pkgver.tar.gz")
md5sums=()

build() {
  cd "$srcdir/***-$pkgver"
  
  # Setting these env variables overwrites any command-line-options we don't want...
  export PERL_MM_USE_DEFAULT=1 PERL_AUTOINSTALL=--skipdeps \
    PERL_MM_OPT="INSTALLDIRS=vendor DESTDIR='$pkgdir'" \
    PERL_MB_OPT="--installdirs vendor --destdir '$pkgdir'" \
    MODULEBUILDRC=/dev/null

  # If using Makefile.PL
  { /usr/bin/perl Makefile.PL &amp;&amp;
    make &amp;&amp;
    make test &amp;&amp;
    make install; } || return 1

  # If using Build.PL
  { /usr/bin/perl Build.PL &amp;&amp;
    ./Build &amp;&amp;
    ./Build test &amp;&amp;
    ./Build install; } || return 1
}
</pre>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="/title/Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="/title/Category:Package_development_(Italiano)" title="Category:Package development (Italiano)">Package development (Italiano)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="/title/Category:Pages_or_sections_flagged_with_Template:Bad_translation" title="Category:Pages or sections flagged with Template:Bad translation">Pages or sections flagged with Template:Bad translation</a></li>
<li><a href="/title/Category:Pages_with_broken_package_links" title="Category:Pages with broken package links">Pages with broken package links</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Perl_package_guidelines_(Italiano)&amp;oldid=665312">https://wiki.archlinux.org/index.php?title=Perl_package_guidelines_(Italiano)&amp;oldid=665312</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 29 April 2021, at 17:36.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="/title/ArchWiki:Privacy_policy" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="/title/ArchWiki:About" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="/title/ArchWiki:General_disclaimer" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
