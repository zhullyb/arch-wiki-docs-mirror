<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>PulseAudio (Italiano)/Examples (Italiano) - ArchWiki</title>
<link rel="stylesheet" href="../../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-PulseAudio_Italiano_Examples_Italiano rootpage-PulseAudio_Italiano skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">PulseAudio (Italiano)/Examples (Italiano)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"><span class="subpages">&lt; <a href="../../it/PulseAudio.html" title="PulseAudio (Italiano)">PulseAudio (Italiano)</a></span></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Impostare_l'output_analogico_come_default"><span class="tocnumber">1</span> <span class="toctext">Impostare l'output analogico come default</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Usare_l'uscita_HDMI_e_analogica_contemporaneamente"><span class="tocnumber">2</span> <span class="toctext">Usare l'uscita HDMI e analogica contemporaneamente</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#Configurazione_dell'uscita_HDMI"><span class="tocnumber">3</span> <span class="toctext">Configurazione dell'uscita HDMI</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Trovare_l'output_HDMI"><span class="tocnumber">3.1</span> <span class="toctext">Trovare l'output HDMI</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Identificare_la_scheda_corretta"><span class="tocnumber">3.2</span> <span class="toctext">Identificare la scheda corretta</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Configurare_Pulseaudio_per_rilevare_l'uscita_HDMI_Nvidia"><span class="tocnumber">3.3</span> <span class="toctext">Configurare Pulseaudio per rilevare l'uscita HDMI Nvidia</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7">
<a href="#Sistemi_surround"><span class="tocnumber">4</span> <span class="toctext">Sistemi surround</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#Dividere_le_uscite_frontali/posteriori"><span class="tocnumber">4.1</span> <span class="toctext">Dividere le uscite frontali/posteriori</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Remixing_LFE"><span class="tocnumber">4.2</span> <span class="toctext">Remixing LFE</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10">
<a href="#Streaming_audio_via_rete_attraverso_Pulseaudio"><span class="tocnumber">5</span> <span class="toctext">Streaming audio via rete attraverso Pulseaudio</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#Supporto_TCP_(streaming_audio_via_rete)"><span class="tocnumber">5.1</span> <span class="toctext">Supporto TCP (streaming audio via rete)</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Supporto_TCP_con_client_anonimi"><span class="tocnumber">5.2</span> <span class="toctext">Supporto TCP con client anonimi</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Publishing_attraverso_Zeroconf_(avahi)"><span class="tocnumber">5.3</span> <span class="toctext">Publishing attraverso Zeroconf (avahi)</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Cambiare_il_server_Pulseaudio_usato_dai_clients_X_locali"><span class="tocnumber">5.4</span> <span class="toctext">Cambiare il server Pulseaudio usato dai clients X locali</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Quando_ogni_altro_tentativo_risulta_vano"><span class="tocnumber">5.5</span> <span class="toctext">Quando ogni altro tentativo risulta vano</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-16"><a href="#ALSA_Monitor_source"><span class="tocnumber">6</span> <span class="toctext">ALSA Monitor source</span></a></li>
<li class="toclevel-1 tocsection-17">
<a href="#Pulseaudio_attraverso_JACK"><span class="tocnumber">7</span> <span class="toctext">Pulseaudio attraverso JACK</span></a>
<ul>
<li class="toclevel-2 tocsection-18"><a href="#Il_metodo_ancora_pi%C3%B9_nuovo"><span class="tocnumber">7.1</span> <span class="toctext">Il metodo ancora più nuovo</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#Nuovo_metodo"><span class="tocnumber">7.2</span> <span class="toctext">Nuovo metodo</span></a></li>
<li class="toclevel-2 tocsection-20">
<a href="#Vecchio_metodo"><span class="tocnumber">7.3</span> <span class="toctext">Vecchio metodo</span></a>
<ul>
<li class="toclevel-3 tocsection-21"><a href="#QjackCtl_con_script_di_avvio/shutdown"><span class="tocnumber">7.3.1</span> <span class="toctext">QjackCtl con script di avvio/shutdown</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-22"><a href="#Pulseaudio_attraverso_OSS"><span class="tocnumber">8</span> <span class="toctext">Pulseaudio attraverso OSS</span></a></li>
<li class="toclevel-1 tocsection-23"><a href="#Pulseaudio_da_chroot"><span class="tocnumber">9</span> <span class="toctext">Pulseaudio da chroot</span></a></li>
<li class="toclevel-1 tocsection-24"><a href="#Disabilitare_l'auto_spawning_del_server_PulseAudio"><span class="tocnumber">10</span> <span class="toctext">Disabilitare l'auto spawning del server PulseAudio</span></a></li>
<li class="toclevel-1 tocsection-25"><a href="#Mappare_il_canale_stereo_su_mono"><span class="tocnumber">11</span> <span class="toctext">Mappare il canale stereo su mono</span></a></li>
</ul>
</div>

<h2>
<span id="Impostare_l.27output_analogico_come_default"></span><span class="mw-headline" id="Impostare_l'output_analogico_come_default">Impostare l'output analogico come default</span>
</h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Per ottenere l'elenco dei dispositivi, viene utilizzato  <code>aplay</code>. Questo programma è parte del pacchetto <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=alsa-utils">alsa-utils</a></span> e NON è richiesto per effettuare l'output su sorgenti multiple: è solamente necessario per elencare i dispositivi di riproduzione, e può essere rimosso alla fine della procedura.</div>
<p>Per selezionare una sorgente output diversa da quella di default, è innanzitutto necessario elencarle tutte:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ aplay -l</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">**** List of PLAYBACK Hardware Devices ****
card 0: Intel [HDA Intel], device 0: ALC889A Analog [ALC889A Analog]
  Subdevices: 0/1
  Subdevice #0: subdevice #0
card 0: Intel [HDA Intel], device 1: ALC889A Digital [ALC889A Digital]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 0: Intel [HDA Intel], device 3: HDMI 0 [HDMI 0]
  Subdevices: 0/1
  Subdevice #0: subdevice #0
</pre>
<p>Su questa macchina, la sorgente analogica è identificata da <code>card 0</code> <code>device 0</code>. Si modifichi <code>/etc/pulse/default.pa</code> inserendo la seguente linea:
</p>
<pre>load-module module-alsa-sink device=hw:0,0
</pre>
<p>Si determini l'indice corretto della nuova sorgente:
</p>
<pre>$ pacmd list-sinks | less
</pre>
<p>Si annoti il numero d'indice che corrisponde al sink <code>alsa_output.hw_0_0</code>
</p>
<p>Infine, si aggiunga una seconda linea ad <code>/etc/pulse/default.pa</code> per impostare l'output di default:
</p>
<pre>set-default-sink 2
</pre>
<p>Si effettui nuovamente il login o si riavvii PulseAudio per applicare i cambiamenti.
</p>
<h2>
<span id="Usare_l.27uscita_HDMI_e_analogica_contemporaneamente"></span><span class="mw-headline" id="Usare_l'uscita_HDMI_e_analogica_contemporaneamente">Usare l'uscita HDMI e analogica contemporaneamente</span>
</h2>
<p>Pulseaudio permette l'output simulteaneo su più dispositivi. Nell'esempio presentato di seguito, alcune applicazioni sono configurate per usare l'uscita HDMI, mentre altre utilizzeranno quella analogica. E' possibile inviare l'audio a più applicazioni contemporaneamente.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ aplay -l</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">**** List of PLAYBACK Hardware Devices ****
card 0: Intel [HDA Intel], device 0: ALC889A Analog [ALC889A Analog]
  Subdevices: 0/1
  Subdevice #0: subdevice #0
card 0: Intel [HDA Intel], device 1: ALC889A Digital [ALC889A Digital]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 0: Intel [HDA Intel], device 3: HDMI 0 [HDMI 0]
  Subdevices: 0/1
  Subdevice #0: subdevice #0
</pre>
<p>Il segreto per realizzare con succcesso una configurazione come questa è capire che il dispositivo selezionato in pavucontrol (sotto Configuration-&gt;Internal Audio), verrà trattato come quello di default. Si avvii pavucontrol, ci si rechi nella sezione <i>Configurazion</i> e si selezioni il profilo HDMI.
</p>
<p>Si aggiungano poi le seguenti linee ad <code>/etc/pulse/default.pa</code>, per impostare l'uscita analogica come sorgente secondaria:
</p>
<pre>### Load analog device
load-module module-alsa-sink device=hw:0,0
load-module module-combine-sink sink_name=combined
set-default-sink combined
</pre>
<p>Si riavvi PulseAudio e si esegua <code>pavucontrol</code>, quindi selezionare il tab "Output Devices". Dovrebbero ora apparire tre voci:
</p>
<ol>
<li>Internal Audio Digital Stereo (HDMI)</li>
<li>Internal Audio</li>
<li>Simultaneous ouput to Internal Audio Digital Stereo (HDMI), Internal Audio</li>
</ol>
<p>Avviare quindi un programma che utilizzi Pulseaudio come mplayer,vlc,mpd eccetera, quindi si clicchi sulla tab "Playback". Dovrebbe comparire un menù a tendina per ciascuno dei programmi avviati, che permette di scegliere una sorgente fra le tre elencate sopra.
</p>
<p>Si veda inoltre <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=118026">questo thread</a> per una variazione sul tema e le <a rel="nofollow" class="external text" href="https://www.freedesktop.org/wiki/Software/PulseAudio/FAQ#Can_I_use_PulseAudio_to_playback_music_on_two_sound_cards_simultaneously.3F">FAQ di PulseAudio</a>.
</p>
<h2>
<span id="Configurazione_dell.27uscita_HDMI"></span><span class="mw-headline" id="Configurazione_dell'uscita_HDMI">Configurazione dell'uscita HDMI</span>
</h2>
<p>Come sottolineato in <a rel="nofollow" class="external free" href="ftp://download.nvidia.com/XFree86/gpu-hdmi-audio-document/gpu-hdmi-audio.html#_issues_in_pulseaudio">ftp://download.nvidia.com/XFree86/gpu-hdmi-audio-document/gpu-hdmi-audio.html#_issues_in_pulseaudio</a>, a causa di un bug di Pulseaudio, usando una scheda video con supporto HDMI, non verrà riprodotto alcun suono a meno che la porta HDMI sia impostata come primo dispositivo di output. La soluzione proposta sotto, consiste nello scoprire quale output HTMI funziona usando l'utility <code>aplay</code>, contenuta nel pacchetto <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=alsa-utils">alsa-utils</a></span>.
</p>
<p>Il titolo originale di questa sezione assumeva che il problema fosse relativo alle sole schede nvidia, ma come si è visto in <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=133222">questo thread</a>, anche altre schede video potrebbero esserne affette. Il resto dell'articolo, userà una scheda nvidia come esempio, ma la soluzione dovrebbe applicarsi anche agli utilizzatori di schede diverse.
</p>
<h3>
<span id="Trovare_l.27output_HDMI"></span><span class="mw-headline" id="Trovare_l'output_HDMI">Trovare l'output HDMI</span>
</h3>
<pre># aplay -l
</pre>
<pre>sample output:
 **** List of PLAYBACK Hardware Devices ****
 card 0: NVidia [HDA NVidia], device 0: ALC1200 Analog [ALC1200 Analog]
   Subdevices: 1/1
   Subdevice #0: subdevice #0
 card 0: NVidia [HDA NVidia], device 3: ALC1200 Digital [ALC1200 Digital]
   Subdevices: 1/1
   Subdevice #0: subdevice #0
 card 1: NVidia_1 [HDA NVidia], device 3: HDMI 0 [HDMI 0]
   Subdevices: 1/1
   Subdevice #0: subdevice #0
 card 1: NVidia_1 [HDA NVidia], device 7: HDMI 0 [HDMI 0]
   Subdevices: 0/1
   Subdevice #0: subdevice #0
 card 1: NVidia_1 [HDA NVidia], device 8: HDMI 0 [HDMI 0]
   Subdevices: 1/1
   Subdevice #0: subdevice #0
 card 1: NVidia_1 [HDA NVidia], device 9: HDMI 0 [HDMI 0]
   Subdevices: 1/1
   Subdevice #0: subdevice #0
</pre>
<h3><span class="mw-headline" id="Identificare_la_scheda_corretta">Identificare la scheda corretta</span></h3>
<p>Ora che si dispone di un elenco di tutte le schede rilevate, è necessario scoprire quale di esse invia l'output al tv/monitor:
</p>
<pre># aplay -D plughw:1,3 /usr/share/sounds/alsa/Front_Right.wav
</pre>
<p>Dove 1 rappresenta la scheda e 3 è il device (i valori sono quelli elencati nella sezione precedente). Se non viene riprodotto alcun suono, si provi ad usare un device differente (nel mio caso ho dovuto usare la scheda 1 e il subdevice 7).
</p>
<h3>
<span id="Configurare_Pulseaudio_per_rilevare_l.27uscita_HDMI_Nvidia"></span><span class="mw-headline" id="Configurare_Pulseaudio_per_rilevare_l'uscita_HDMI_Nvidia">Configurare Pulseaudio per rilevare l'uscita HDMI Nvidia</span>
</h3>
<p>Una volta ricavato il dispositivo funzionante, è necessario forzare Pulseaudio ad usarlo. Si modifichi <code>/etc/pulse/default.pa</code>, aggiungendo la seguente linea:
</p>
<pre># load-module module-alsa-sink device=hw:1,7
</pre>
<p>Dove 1 e 7 rappresentano i valori trovati nella sezione precedente.
</p>
<p>Si riavvii quindi Pulseaudio:
</p>
<pre># killall pulseaudio
</pre>
<p>Si apra il pannello impostazioni del suono, e ci si assicuri che, sotto la scheda "Hardware", l'audio HDMI della scheda video sia impostato su "Digital Stereo (HDMI) Output" (L'audio della mia scheda video era identificato con "GF100 High Definition Audio Controller").
</p>
<p>Si apra quindi la scheda "Output", dove dovrebbero ora apparire due output HDMI per la scheda video. Si verifichi quale dei due funziona selezionandolo e poi aprendo un programma per la riproduzione audio (ad esempio, si usi VLC per riprodurre un filmato: se non si ottiene nessun suono, selezionare l'altra uscita).
</p>
<h2><span class="mw-headline" id="Sistemi_surround">Sistemi surround</span></h2>
<p>Molte persone hanno una scheda che supporta il surround, ma diffusori che usano solamente due canali, cosa che impedisce a Pulseaudio di configurarsi per il supporto al surround in modo automatico. Per abilitare tutti i canali, modificare  <code>/etc/pulse/daemon.conf</code>: si decommenti la linea "default-sample-channels" (ossia si rimuova il ';' dall'inizio della linea), modificando il valore a <b>6</b> se si ha un impianto 5.1, oppure a <b>8</b> se si dispone di un sistema 7.1.
</p>
<pre># Default
default-sample-channels=2
# Sistemi 5.1
default-sample-channels=6
# Sistemi 7.1
default-sample-channels=8
</pre>
<p>Dopo aver effettuato le modifiche, sarà necessario riavviare Pulseaudio.
</p>
<h3>
<span id="Dividere_le_uscite_frontali.2Fposteriori"></span><span class="mw-headline" id="Dividere_le_uscite_frontali/posteriori">Dividere le uscite frontali/posteriori</span>
</h3>
<p>Si potrebbe voler connettere gli altoparlanti all'output analogico frontale e le cuffie a quello posteriore. Sarebbe utile dividere le uscite in sink separati. Si aggiunga al file <code>/etc/pulse/default.pa</code>:
</p>
<pre>load-module module-remap-sink sink_name=speakers remix=no master=alsa_output.pci-0000_05_00.0.analog-surround-40 channels=2 master_channel_map=front-left,front-right channel_map=front-left,front-right
</pre>
<pre>load-module module-remap-sink sink_name=headphones remix=no master=alsa_output.pci-0000_05_00.0.analog-surround-40 channels=2 master_channel_map=rear-left,rear-right  channel_map=front-left,front-right
</pre>
<p>(Si sostituisca <code>alsa_output.pci-0000_05_00.0.analog-surround-40</code> con il nome della propria scheda audio, ottenuto con <code>pacmd list-sinks</code>).
</p>
<p>E' ora possibile scegliere se usare le cuffie o gli altoparlanti direttamente dal player audio.
</p>
<h3><span class="mw-headline" id="Remixing_LFE">Remixing LFE</span></h3>
<p>Di default, Pulseaudio effettua il remix del numero di canali basandosi sul valore di <code>default-sample-channels</code>, escludendo però il canale LFE. Per abilitare il remixing LFE, si decommenti la linea:
</p>
<pre>; enable-lfe-remixing = no
</pre>
<p>sostituendo "no" con "yes":
</p>
<pre>enable-lfe-remixing = yes
</pre>
<p>Si riavvii quindi Pulseaudio.
</p>
<h2><span class="mw-headline" id="Streaming_audio_via_rete_attraverso_Pulseaudio">Streaming audio via rete attraverso Pulseaudio</span></h2>
<p>Una delle caratteristiche più interessanti di Pulseaudio è la possibilità di effettuare lo streaming audio dai clients, attraverso i protocollo TCP, al server che ha in esecuzione  il demone Pulseaudio, permettendo all'audio di essere trasmesso in streaming attraverso la propria LAN.
</p>
<p>Affinché questo funzioni, è necessario abilitare il relativo modulo in Pulseaudio e copiare il pulse-cookie sui clients.
</p>
<h3>
<span id="Supporto_TCP_.28streaming_audio_via_rete.29"></span><span class="mw-headline" id="Supporto_TCP_(streaming_audio_via_rete)">Supporto TCP (streaming audio via rete)</span>
</h3>
<p>Per abilitare il modulo TCP, aggiungere questa riga (o decommentarla, se già presente) al file <code>/etc/pulse/default.pa</code> (sia sul client che sul server):
</p>
<pre>load-module module-native-protocol-tcp
</pre>
<p>Affinchè il tutto funzioni, è necessario che sia il client che il server condividano lo stesso cookie, situato in <code>~/.config/pulse/cookie</code>.
Non fa differenza utilizzare il cookie del server o quello del client: l'importante è che entrambe le macchine utilizzino lo stesso.
</p>
<p>Nota: Se si riscontrano problemi di connessione, si usi (sul server):
</p>
<pre>pacmd list-modules
</pre>
<h3><span class="mw-headline" id="Supporto_TCP_con_client_anonimi">Supporto TCP con client anonimi</span></h3>
<p>Se non si desidera copiare il file del cookie dai vari client, è possibile consentire a client anonimi di connettersi, passando questi parametri al modulo <code>module-native-protocol-tcp</code> sul server (sempre modificando <code>/etc/pulse/default.pa</code>):
</p>
<pre> load-module module-native-protocol-tcp auth-ip-acl=127.0.0.1;192.168.0.0/24 auth-anonymous=1
</pre>
<p>Si cambi la sottorete della LAN in modo che combaci con quella in cui si trovano i client che desiderano connettersi al server.
</p>
<h3>
<span id="Publishing_attraverso_Zeroconf_.28avahi.29"></span><span class="mw-headline" id="Publishing_attraverso_Zeroconf_(avahi)">Publishing attraverso Zeroconf (avahi)</span>
</h3>
<p>Affinché il server Pulseaudio remoto appaia nel Device Chooser di Pulseaudio (<code>pasystray</code>) sarà necessario caricare i moduli di zeroconf necessari ed abilitare il demone <a href="../../en/Avahi.html" title="Avahi">Avahi</a>.
</p>
<p>Su entrambe le macchine si esegua:
</p>
<pre># systemctl start avahi-daemon.service
# systemctl enable avahi-daemon.service
</pre>
<p>Sul server si aggiunga <code>load-module module-zeroconf-publish</code> al file <code>/etc/pulse/default.pa</code>, mentre sul client aggiungere allo stesso file <code>load-module module-zeroconf-discover</code>. Redirigere infine qualsiasi stream o output audio al server pulseaudio remoto selezionando il sink apposito.
</p>
<p>Se si riscontrano problemi con i sink remoti dalle macchine client, si provi a riavviare il demone avahi in modo da effettuare nuovamente il broadcast delle interfacce disponibili.
</p>
<h3><span class="mw-headline" id="Cambiare_il_server_Pulseaudio_usato_dai_clients_X_locali">Cambiare il server Pulseaudio usato dai clients X locali</span></h3>
<p>Per scegliere tra diversi server sul client da dentro X, è possibile utilizzare il comando <code>pax11publish</code>. Per esempio, per usare, al posto di quello di default, il server avviato sulla macchina con hostname foo:
</p>
<pre>$ pax11publish -e -S foo
</pre>
<p>Oppure, per tornare al server di default:
</p>
<pre>$ pax11publish -e -r
</pre>
<p>Si noti che, affinché il cambio abbia effetto, è necessario riavviare i programmi che usano Pulseaudio.
</p>
<h3><span class="mw-headline" id="Quando_ogni_altro_tentativo_risulta_vano">Quando ogni altro tentativo risulta vano</span></h3>
<p>Si noti che quanto presentato di seguito, è un fix temporaneo e <b>non</b> rappresenta una soluzione permanente.
</p>
<p>Sul server:
</p>
<pre>$ paprefs
</pre>
<p>Accesso alla rete -&gt; Abilitare l'accesso per i dispositivi audio locali (Selezionare sia 'Permetti discover' che 'Non richedere autenticazione').
</p>
<p>Sul client:
</p>
<pre>$ export PULSE_SERVER=server.ip &amp;&amp; mplayer test.mp3
</pre>
<h2><span class="mw-headline" id="ALSA_Monitor_source">ALSA Monitor source</span></h2>
<p>Per registrare da una monitor source (ossia "What-U-Hear", "Stereo Mix"), si utilizzi <code>pactl list</code> per individuare il nome della sorgente in Pulseaudio (es: <code>alsa_output.pci-0000_00_1b.0.analog-stereo.monitor</code>). Si aggiungano quindi le linee simili a quella di cui sopra al file <code>/etc/asound.conf</code>, oppure <code>~/.asoundrc</code>:
</p>
<pre>pcm.pulse_monitor {
  type pulse
  device alsa_output.pci-0000_00_1b.0.analog-stereo.monitor
}
ctl.pulse_monitor {
  type pulse
  device alsa_output.pci-0000_00_1b.0.analog-stereo.monitor
}
</pre>
<p>È ora possibile selezionare <code>pulse_monitor</code> come sorgente di registrazione.
</p>
<p>È altresì possibile usare pavucontrol per svolgere questo compito: ci si assicuri di aver impostato il display su "All input Devices" e si selezioni "Monitor of [nome scheda audio]" come sorgente di registrazione.
</p>
<h2><span class="mw-headline" id="Pulseaudio_attraverso_JACK">Pulseaudio attraverso JACK</span></h2>
<h3>
<span id="Il_metodo_ancora_pi.C3.B9_nuovo"></span><span class="mw-headline" id="Il_metodo_ancora_più_nuovo">Il metodo ancora più nuovo</span>
</h3>
<p>Questo metodo funzionerà solo con jackdbus (JACK compilato con il supporto a D-Bus).
Si aggiunga la seguente linea ad <code>/etc/pulse/default.pa</code>:
</p>
<pre>load-module module-jackdbus-detect
</pre>
<p>Come descritto sulla pagina relativa alla <a rel="nofollow" class="external text" href="http://trac.jackaudio.org/wiki/JackDbusPackaging">pacchettizzazione di Jack-DBUS</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">link interrotto</a> 2020-08-04]</sup>:
</p>
<p><i>L'autoavvio del server è implementato come una chiamata a D-Bus che attiva automaticamente il servizio D-Bus relativo a Jack, nel caso in cui non sia già stato avviato automaticamente, ed inizializza il server Jack. L'interazione corretta con PulseAudio avviene attraverso un sistema di "acquisizione/rilascio" della scheda audio basato su D-Bus. Quando il server Jack si avvia, richiede al servizio D-Bus di prendere possesso della scheda audio e PulseAudio la rilascia immediatamente. Al contrario, quando il server viene fermato, è quest'ultimo a rilasciare la scheda audio che potrà così essere di nuovo gestita da PulseAudio.</i>
</p>
<p><code>module-jackdbus-detect.so</code> carica e rimuove dinamicamente i moduli <code>module-jack-sink</code> e <code>module-jack-source</code> quando jackdbus viene avviato o fermato.
</p>
<h3><span class="mw-headline" id="Nuovo_metodo">Nuovo metodo</span></h3>
<p>Uccidere Pulseaudio non è una buona idea, poichè potrebbe far crashare le applicazioni che lo stanno utilizzando ed interrompere la riproduzione dell'audio.
</p>
<p>Si procederà come segue:
</p>
<ol>
<li>PulseAudio rilascia la scheda audio</li>
<li>Jack ne prende possesso e si avvia</li>
<li>Lo script redirige PulseAudio a JACK</li>
<li>inviare manualmente l'output delle applicazioni PulseAudio a JACK (pavucontrol potrebbe essere d'aiuto in questo caso)</li>
<li>usare programmi JACK</li>
<li>attraverso lo script, smettere di redirigere l'output di PulseAudio a JACK</li>
<li>uccidere JACK e rilasciare la scheda audio</li>
<li>PulseAudio riprende possesso della scheda e redirige l'audio di conseguenza</li>
</ol>
<p>Con QJackCTL, implementare questi script:
</p>
<p>Script da eseguire all'avvio: <code>pulse-jack-pre-start.sh</code>
</p>
<pre>#!/bin/bash
pacmd suspend true
</pre>
<p>Script da eseguire dopo l'avvio: <code>pulse-jack-post-start.sh</code>
</p>
<pre>#!/bin/bash
pactl load-module module-jack-sink channels=2
pactl load-module module-jack-source channels=2
pacmd set-default-sink jack_out
pacmd set-default-source jack_in
</pre>
<p>Script da eseguire allo spegnimento: <code>pulse-jack-pre-stop.sh</code>
</p>
<pre>#!/bin/bash
SINKID=$(pactl list | grep -B 1 "Name: module-jack-sink" | grep Module | sed 's/[^0-9]//g')
SOURCEID=$(pactl list | grep -B 1 "Name: module-jack-source" | grep Module | sed 's/[^0-9]//g')
pactl unload-module $SINKID
pactl unload-module $SOURCEID
sleep 5
</pre>
<p>Script da eseguire dopo lo spegnimento: <code>pulse-jack-post-stop.sh</code>
</p>
<pre>#!/bin/bash
pacmd suspend false
</pre>
<h3><span class="mw-headline" id="Vecchio_metodo">Vecchio metodo</span></h3>
<p>Il JACK-Audio-Connection-Kit è popolare tra chi lavora in ambito audio, ed è ampiamente supportato dalle relative applicazioni Linux. Si inserisce in una nicchia d'uso simile a quella occupata da Pulseaudio, ma è più adatto ad essere usato da chi lavora in ambito multimediale. In particolare, applicazioni audio come Ardour e Audacity (recentemente), funzionano bene con Jack.
</p>
<p>Pulseaudio fornisce i moduli jack-source e jack-sink, che gli permettono di essere avviato come sound server sopra al demone JACK. Ciò consente di impostare valori di volume personalizzati per ogni applicazione che lo necessiti, applicazioni play-back per filmati ed audio, consentendo al tempo stesso di stabilire  una interconnettività a bassa latenza per applicazioni di sound processing che si connettono a JACK.
</p>
<p>Tuttavia, ciò impedirà a Pulseaudio di scrivere direttamente nei buffers della scheda audio, cosa che aumenterà l'uso complessivo della CPU.
</p>
<p>Per provare ad utilizzare Pulseaudio su JACK, è necessario caricare i relativi moduli all'avvio:
</p>
<pre>pulseaudio -L module-jack-sink -L module-jack-source
</pre>
<p>Per usare Pulsaudio con JACK, questo deve essere caricato prima di Pulseaudio, usando un metodo di vostra scelta. Pulseaudio deve quindi essere avviato avendo cura di caricare due moduli rilevanti. Si modifichi <code>/etc/pulse/default.pa</code>, cambiando la seguente parte:
</p>
<pre>### Load audio drivers statically (it is probably better to not load
### these drivers manually, but instead use module-hal-detect --
### see below -- for doing this automatically)
#load-module module-alsa-sink
#load-module module-alsa-source device=hw:1,0
#load-module module-oss device="/dev/dsp" sink_name=output source_name=input
#load-module module-oss-mmap device="/dev/dsp" sink_name=output source_name=input
#load-module module-null-sink 
#load-module module-pipe-sink
### Automatically load driver modules depending on the hardware available
.ifexists module-udev-detect.so
load-module module-udev-detect
.else
### Alternatively use the static hardware detection module (for  systems that
### lack udev support)
load-module module-detect
.endif
</pre>
<p>In questo modo:
</p>
<pre>### Load audio drivers statically (it is probably better to not load
### these drivers manually, but instead use module-hal-detect --
### see below -- for doing this automatically)
#load-module module-alsa-sink
#load-module module-alsa-source device=hw:1,0
#load-module module-oss device="/dev/dsp" sink_name=output source_name=input
#load-module module-oss-mmap device="/dev/dsp" sink_name=output source_name=input
#load-module module-null-sink
#load-module module-pipe-sink
load-module module-jack-source
load-module module-jack-sink
### Automatically load driver modules depending on the hardware available
#.ifexists module-udev-detect.so
#load-module module-udev-detect
#.else
### Alternatively use the static hardware detection module (for  systems that
### lack udev support)
#load-module module-detect
#.endif
</pre>
<p>Sostanzialmente, viene qui impedito il caricamento del modulo udev-detect, il quale cercherà di prendere il controllo della vostra scheda audio. (JACK ha già effettutato questa operazione, perciò si otterrà un errore se il modulo viene caricato). Inoltre, i moduli jack-source e jack-sink, devono essere caricati esplicitamente.
</p>
<h4>
<span id="QjackCtl_con_script_di_avvio.2Fshutdown"></span><span class="mw-headline" id="QjackCtl_con_script_di_avvio/shutdown">QjackCtl con script di avvio/shutdown</span>
</h4>
<p>Usando le impostazioni descritte sopra, è possibile usare <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=qjackctl">qjackctl</a></span> per eseguire uno script all'avvio e allo spegnimento per avviare/terminare Pulseaudio. Una delle ragioni percui si possa voler fare una cosa simile è che i cambiamenti riportati sopra disabilitano i moduli di Pulseaudio che si occupano dell'autorilevazione dell'hardware.
</p>
<p>Le impostazioni che seguono, sono adatte per utilizzare  Pulseaudio con JACK, benché gli script possano essere modificati per essere usati con un setup diverso da questo. Terminare e riavviare Pulseaudio mentre dei programmi lo stanno utilizzando potrebbe rivelarsi problematico.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Per quanto riguarda l'esempio seguente, <code>padevchooser</code> è da considerarsi deprecato e sostituito da <code>pasystray</code>.</div>
<p>L'esempio seguente può essere usato e modificato secondo le proprie necessità in uno script d'avvio che avvia Pulseaudio in modalità demone e carica il programma <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/padevchooser/">padevchooser</a></span><sup><small>AUR</small></sup><sup>[<a href="../../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">broken link</a>: package not found]</sup> (opzionale, va compilato dopo averlo scaricato da AUR) chiamato <code>jack_startup</code>:
</p>
<pre>#!/bin/bash
#Load PulseAudio and PulseAudio Device Chooser
pulseaudio -D
padevchooser&amp;
</pre>
<p>Segue uno script di shutdown che termina Pulseaudio, chiamato <code>jack_shutdown</code>, da posizionare anch'esso nella propria home directory:
</p>
<pre>#!/bin/bash
#Kill PulseAudio and PulseAudio Device Chooser
pulseaudio --kill
killall padevchooser
</pre>
<p>Entrambi gli script devono essere resi eseguibili:
</p>
<pre>chmod +x jack_startup jack_shutdown
</pre>
<p>Poi, una volta avviato QjackCtl, fare click sul pulsante <i>setup</i>, selezionare il tab <i>Opzioni</i> e spuntare "Execute Script after Startup" e "Execute Script on Shutdown", quindi specificare il percorso relativo ai due script appena visti, avendo cura di salvare le modifiche apportate.
</p>
<h2><span class="mw-headline" id="Pulseaudio_attraverso_OSS">Pulseaudio attraverso OSS</span></h2>
<p>Si aggiunga la seguente riga ad <code>/etc/pulse/default.pa</code>
</p>
<pre>load-module module-oss
</pre>
<p>Poi si avvii Pulseaudio come al solito. Dovrebbero essere disponibili sinks e sorgenti per i propri dispositivi OSS.
</p>
<h2><span class="mw-headline" id="Pulseaudio_da_chroot">Pulseaudio da chroot</span></h2>
<p>Poiché un ambiente di chroot definisce una root alternativa per l'ingabbiamento e l'utilizzo delle applicazioni, Pulseaudio deve essere installato all'interno dello stesso (<code>pacman -S pulseaudio</code> dato da dentro l'ambiente di chroot).
</p>
<p>Se Pulseaudio non è configurato per connettersi ad un server specifico (si può ovviare modificando <code>/etc/pulse/client.conf</code>, usando la variabile d'ambiente PULSE_SERVER, oppure tramite l'annuncio alle proprietà locali di X11 usando il modulo x11-publish), tenterà di connettersi al server Pulseaudio locale, fallendo ed avviando una nuova istanza dello stesso. Ogni server Pulseaudio è identificato da un ID univoco basato sul valore <i>machine-id</i> contenuto in <code>/var/lib/dbus</code>. Affinché le applicazioni eseguite all'interno del chroot possano accedere al server, le seguenti directory devono essere montate nel chroot:
</p>
<pre>/var/run
/var/lib/dbus
/tmp
~/.pulse
</pre>
<p>Si consiglia di montare anche <code>/dev/shm</code> per ottenere le massime performance ed efficienza. Si noti che montando la <code>/home</code>, è possibile condividere la cartella <code>~/.pulse</code>.
</p>
<p>PulseAudio sceglie il percorso al socket in base al valore di <code>XDG_RUNTIME_DIR</code>, percui assicurarsi di importarla durante il chroot via <a href="../../it/Sudo.html" title="Sudo (Italiano)">sudo</a> da utente normale (si veda <a href="../../it/Sudo.html#Variabili_d'ambiente" title="Sudo (Italiano)">Sudo (Italiano)#Variabili d'ambiente</a>).
</p>
<p>Per istruzioni specifiche su come effettuare i vari mount, si faccia riferimento al wiki relativo all'installazione di un ambiente chroot a 32 bit, specialmente si legga la <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Arch64_Install_bundled_32bit_system#Additional_mount_option_to_allow_32-bit_apps_to_access_the_64-bit_Pulseaudio_server">sezione aggiuntiva</a> relativa a Pulseaudio.
</p>
<h2>
<span id="Disabilitare_l.27auto_spawning_del_server_PulseAudio"></span><span class="mw-headline" id="Disabilitare_l'auto_spawning_del_server_PulseAudio">Disabilitare l'auto spawning del server PulseAudio</span>
</h2>
<p>Alcuni utenti potrebbero voler avviare il server pulseaudio manualmente prima di eseguire certi programmi e chiuderlo quando questi ultimi hanno portato a termine le proprie operazioni.
</p>
<p>È possibile ottenere questo comportamento modificando <code>/etc/pulse/client.conf</code>, cambiando <code>autospawn = yes</code> in <code>autospawn = no</code>, ed impostando la variabile <code>daemon-binary</code> a <code>/bin/true</code>.
Ci si assicuri inoltre che le due linee di cui sopra siano decommentate:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/client.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">autospawn = no
daemon-binary = /bin/true 
</pre>
<p>È ora possibile avviare manualmente pulseaudio con:
</p>
<pre>$ pulseaudio --start
</pre>
<p>e terminarlo con:
</p>
<pre>$ pulseaudio --kill
</pre>
<p>Potrebbe inoltre essere necessario rimuovere o rinominare il file <code>.desktop</code> in <code>/etc/xdg/autostart</code>, se presente.
</p>
<h2><span class="mw-headline" id="Mappare_il_canale_stereo_su_mono">Mappare il canale stereo su mono</span></h2>
<p>È possibile rimappare un sink di input stereo in un sink mono utilizzando un sink virtuale. Si aggiunga ad <code>/etc/pulse/default.pa</code>:
</p>
<pre>load-module module-remap-sink master=alsa_output.pci-0000_00_1f.5.analog-stereo sink_name=mono channels=2 channel_map=mono,mono
</pre>
<ol><li>Opzionale: Impostare il sink appena creato come predefinito.</li></ol>
<pre>set-default-sink mono
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Sostituire ad <code>alsa_output.pci-0000_00_1f.5.analog-stereo</code> il nome della propria scheda audio, come visualizzato da <code>pacmd list-sinks</code>.</div>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../../it/Category:Multimedia.html" title="Category:Multimedia (Italiano)">Multimedia (Italiano)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=PulseAudio_(Italiano)/Examples_(Italiano)&amp;oldid=629904">https://wiki.archlinux.org/index.php?title=PulseAudio_(Italiano)/Examples_(Italiano)&amp;oldid=629904</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 6 August 2020, at 07:02.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
