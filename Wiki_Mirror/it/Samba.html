<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Samba (Italiano) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Samba_Italiano rootpage-Samba_Italiano skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Samba (Italiano)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Articoli correlati</p>
<ul>
<li><a href="/title/NFS_(Italiano)" title="NFS (Italiano)">NFS (Italiano)</a></li>
<li><a href="/title/Samba/Active_Directory_domain_controller" title="Samba/Active Directory domain controller">Samba/Active Directory domain controller</a></li>
</ul>
</div>
<p><b>Samba</b> è una re implementazione del protocollo di rete SMB/CIFS, serve per facilitare la condivisione di file e stampanti tra sistemi Linux e Windows, come alternativa ad <a href="/title/NFS_(Italiano)" title="NFS (Italiano)">NFS</a>. Samba è facilmente configurabile e le opzioni sono molto chiare. In ogni caso, gli utenti meno esperti potrebbero incontrare problemi per la sua complessità e per i meccanismi non intuitivi. Si consiglia quindi di attenersi alle seguenti indicazioni.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Installazione"><span class="tocnumber">1</span> <span class="toctext">Installazione</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Configurazione"><span class="tocnumber">2</span> <span class="toctext">Configurazione</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Configrazione_base"><span class="tocnumber">2.1</span> <span class="toctext">Configrazione base</span></a></li>
<li class="toclevel-2 tocsection-4">
<a href="#Opzioni_della_shell"><span class="tocnumber">2.2</span> <span class="toctext">Opzioni della shell</span></a>
<ul>
<li class="toclevel-3 tocsection-5"><a href="#Aggiungere_gli_utenti"><span class="tocnumber">2.2.1</span> <span class="toctext">Aggiungere gli utenti</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-6">
<a href="#Opzioni_web"><span class="tocnumber">2.3</span> <span class="toctext">Opzioni web</span></a>
<ul>
<li class="toclevel-3 tocsection-7"><a href="#SWAT:_Samba_web_administration_tool"><span class="tocnumber">2.3.1</span> <span class="toctext">SWAT: Samba web administration tool</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-8">
<a href="#Accedere_alle_condivisioni"><span class="tocnumber">3</span> <span class="toctext">Accedere alle condivisioni</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="#Accedere_alle_condivisioni_Samba_da_GNOME/Xfce4"><span class="tocnumber">3.1</span> <span class="toctext">Accedere alle condivisioni Samba da GNOME/Xfce4</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Accedere_alle_condivisioni_da_altri_ambienti_grafici"><span class="tocnumber">3.2</span> <span class="toctext">Accedere alle condivisioni da altri ambienti grafici</span></a></li>
<li class="toclevel-2 tocsection-11">
<a href="#Accedere_ad_una_condivisione_Samba_tramite_shell"><span class="tocnumber">3.3</span> <span class="toctext">Accedere ad una condivisione Samba tramite shell</span></a>
<ul>
<li class="toclevel-3 tocsection-12">
<a href="#Mount_automatico"><span class="tocnumber">3.3.1</span> <span class="toctext">Mount automatico</span></a>
<ul>
<li class="toclevel-4 tocsection-13"><a href="#smbnetfs"><span class="tocnumber">3.3.1.1</span> <span class="toctext">smbnetfs</span></a></li>
<li class="toclevel-4 tocsection-14"><a href="#fusesmb"><span class="tocnumber">3.3.1.2</span> <span class="toctext">fusesmb</span></a></li>
<li class="toclevel-4 tocsection-15"><a href="#Autofs"><span class="tocnumber">3.3.1.3</span> <span class="toctext">Autofs</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-16">
<a href="#Montare_manualmente_una_condivisione"><span class="tocnumber">3.3.2</span> <span class="toctext">Montare manualmente una condivisione</span></a>
<ul>
<li class="toclevel-4 tocsection-17"><a href="#Aggiungere_una_condivisione_in_fstab"><span class="tocnumber">3.3.2.1</span> <span class="toctext">Aggiungere una condivisione in fstab</span></a></li>
<li class="toclevel-4 tocsection-18"><a href="#Permettere_agli_utenti_di_montare_le_condivisioni"><span class="tocnumber">3.3.2.2</span> <span class="toctext">Permettere agli utenti di montare le condivisioni</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-19">
<a href="#Tips_and_tricks"><span class="tocnumber">4</span> <span class="toctext">Tips and tricks</span></a>
<ul>
<li class="toclevel-2 tocsection-20">
<a href="#Condividere_file_sulla_propria_rete_senza_la_richiesta_di_utente_e_password"><span class="tocnumber">4.1</span> <span class="toctext">Condividere file sulla propria rete senza la richiesta di utente e password</span></a>
<ul>
<li class="toclevel-3 tocsection-21"><a href="#Opzione_1_-_Forzare_le_connessioni_guest"><span class="tocnumber">4.1.1</span> <span class="toctext">Opzione 1 - Forzare le connessioni guest</span></a></li>
<li class="toclevel-3 tocsection-22"><a href="#Opzione_2_-_Permettere_le_connessioni_guest_ed_Utente"><span class="tocnumber">4.1.2</span> <span class="toctext">Opzione 2 - Permettere le connessioni guest ed Utente</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-23">
<a href="#Esempio_di_configurazione"><span class="tocnumber">4.2</span> <span class="toctext">Esempio di configurazione</span></a>
<ul>
<li class="toclevel-3 tocsection-24"><a href="#Global_Parameters"><span class="tocnumber">4.2.1</span> <span class="toctext">Global Parameters</span></a></li>
<li class="toclevel-3 tocsection-25"><a href="#Condivisioni"><span class="tocnumber">4.2.2</span> <span class="toctext">Condivisioni</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-26"><a href="#Individuare_le_condivisioni_di_rete"><span class="tocnumber">4.3</span> <span class="toctext">Individuare le condivisioni di rete</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#Controllare_da_remoto_i_computer_Windows"><span class="tocnumber">4.4</span> <span class="toctext">Controllare da remoto i computer Windows</span></a></li>
<li class="toclevel-2 tocsection-28"><a href="#Bloccare_determinate_estenzioni_di_file_extensions_sulle_condivisioni_samba"><span class="tocnumber">4.5</span> <span class="toctext">Bloccare determinate estenzioni di file extensions sulle condivisioni samba</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-29">
<a href="#Risoluzione_di_problemi"><span class="tocnumber">5</span> <span class="toctext">Risoluzione di problemi</span></a>
<ul>
<li class="toclevel-2 tocsection-30"><a href="#%22Sfogliando%22_la_rete_si_ottiene_una_finestra_vuota"><span class="tocnumber">5.1</span> <span class="toctext">"Sfogliando" la rete si ottiene una finestra vuota</span></a></li>
<li class="toclevel-2 tocsection-31"><a href="#Windows_7_problemi_di_connettivit%C3%A0_-_mount_error(12):_cannot_allocate_memory"><span class="tocnumber">5.2</span> <span class="toctext">Windows 7 problemi di connettività - mount error(12): cannot allocate memory</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#Problemi_con_gli_accessi_da_Windows_a_condivisioni_protette_da_password"><span class="tocnumber">5.3</span> <span class="toctext">Problemi con gli accessi da Windows a condivisioni protette da password</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#Lentezza_nell'apparizione_della_finestra_per_l'accesso"><span class="tocnumber">5.4</span> <span class="toctext">Lentezza nell'apparizione della finestra per l'accesso</span></a></li>
<li class="toclevel-2 tocsection-34"><a href="#Cambiamenti_in_Samba_versione_3.4.0"><span class="tocnumber">5.5</span> <span class="toctext">Cambiamenti in Samba versione 3.4.0</span></a></li>
<li class="toclevel-2 tocsection-35"><a href="#Error:_Value_too_large_for_defined_data_type"><span class="tocnumber">5.6</span> <span class="toctext">Error: Value too large for defined data type</span></a></li>
<li class="toclevel-2 tocsection-36"><a href="#Devo_riavviare_Samba_per_rendere_le_condivisioni_visibili_agli_altri_pc"><span class="tocnumber">5.7</span> <span class="toctext">Devo riavviare Samba per rendere le condivisioni visibili agli altri pc</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-37"><a href="#Risorse"><span class="tocnumber">6</span> <span class="toctext">Risorse</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Installazione">Installazione</span></h2>
<p>Installare <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=smbclient">smbclient</a></span> per l'installazione del solo <b>client</b> è sufficiente per quei computer che non dovranno condividere file, ma solo accedervi.
</p>
<p>Per poter condividere delle cartelle, installare il pacchetto <b>server</b> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=samba">samba</a></span> (che include anche <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=smbclient">smbclient</a></span> come sua dipendenza).
</p>
<h2><span class="mw-headline" id="Configurazione">Configurazione</span></h2>
<h3><span class="mw-headline" id="Configrazione_base">Configrazione base</span></h3>
<p>Il file <code>/etc/samba/smb.conf</code> deve essere creato prima di avviare il demone. Una volta creato, gli utenti possono optare per una interfaccia di configurazione avanzata come <a href="#SWAT:_Samba_web_administration_tool">SWAT</a>, invece di editare il file manualmente.
</p>
<p>Da root, copiare il file di configurazione di default in <code>/etc/samba/smb.conf</code>:
</p>
<pre># cp /etc/samba/smb.conf.default /etc/samba/smb.conf
</pre>
<p>Aprire il file <code>smb.conf</code> e modificarlo secondo le necessità. La configurazione di default prevede la condivisione della cartella <code>home</code> di ogni utente. Crea inoltre una condivisione per le stampanti.
</p>
<p>Maggiori informazioni riguardo alle opzioni disponibili possono essere trovate eseguendo il comando:
</p>
<pre>$ man smb.conf
</pre>
<p>Per avviare automaticamente <code>samba</code> all'avvio, aggiungerlo all'array <code><a href="/title/Daemon_(Italiano)" class="mw-redirect" title="Daemon (Italiano)">DAEMONS</a></code> in <code>/etc/rc.conf</code>.
</p>
<h3><span class="mw-headline" id="Opzioni_della_shell">Opzioni della shell</span></h3>
<h4><span class="mw-headline" id="Aggiungere_gli_utenti">Aggiungere gli utenti</span></h4>
<p>Per accedere ad una condivisione Samba, sarà necessario aggiungere un utente samba.
</p>
<p>Per Samba a partire dalla versione 3.4.0 e successive:
</p>
<pre># pdbedit -a -u &lt;user&gt;
</pre>
<p>Per le precedenti versioni di Samba:
</p>
<pre># smbpasswd -a &lt;user&gt;
</pre>
<p>Il database delle password smbpasswd può anche essere <a href="#Cambiamenti_in_Samba_versione_3.4.0">convertito al nuovo formato</a>.
</p>
<p>L'utente dovrà avere già un account di sistema sul server. Se l'utente non esiste si otterrà un errore:
</p>
<pre>Failed to modify password entry for user "&lt;user&gt;"
</pre>
<p>Per aggiungere un nuovo utente di sistema Linux si può usare <a href="/title/Users_and_groups_(Italiano)#Gestione_degli_utenti" title="Users and groups (Italiano)">adduser</a>. Questo articolo non spiega come aggiungere utenti su sistemi Windows.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> smbpasswd non è più il metodo di default per le autenticazioni Samba a partire da  <a href="#Cambiamenti_in_Samba_versione_3.4.0">Samba versione 3.4.0</a> </div>
<h3><span class="mw-headline" id="Opzioni_web">Opzioni web</span></h3>
<h4><span class="mw-headline" id="SWAT:_Samba_web_administration_tool">SWAT: Samba web administration tool</span></h4>
<p><a rel="nofollow" class="external text" href="http://samba.xsec.it/samba/docs/man/Samba-HOWTO-Collection/SWAT.html">SWAT</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">link interrotto</a> 2020-08-04]</sup> è una comodità per Samba. Il programma principale si chiama swat e viene avviato attraverso il demone <a href="https://en.wikipedia.org/wiki/xinetd" class="extiw" title="wikipedia:xinetd">xinetd</a> (ovvero eXtended InterNET Daemon).
</p>
<p>Ci sono diverse opinioni riguardo l'effettiva utilità di SWAT. Non importa quanto impegno si metta per produrre un tool di configurazione perfetto, rimarrà sempre una questione soggettiva ritenerlo utile. SWAT è un tool che attraverso un interfaccia Web, permette di configurare Samba. Sarà possibile effettuare una configurazione guidata per velocizzare e semplificare la configurazione, dispone dell'aiuto contestuale per ogni parametro del file <code>smb.conf</code>, permette inoltre di monitorare il corrente stato delle connessioni, ed anche di gestire le password di rete MS Windows <a rel="nofollow" class="external autonumber" href="http://samba.xsec.it/samba/docs/man/Samba-HOWTO-Collection/SWAT.html">[1]</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">link interrotto</a> 2020-08-04]</sup>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> In caso di problemi con SWAT, si può usare il più ampio tool di configurazione <a href="/title/Webmin_(Italiano)" title="Webmin (Italiano)">Webmin</a>, e semplicemente caricare il relativo modulo SWAT.</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attenzione:</strong>  Prima di usare SWAT. SWAT sostituirà se esiste il file <code>smb.conf</code> con un file più ottimizzato contenente i soli valori non di default e privo di commenti(anche di quelli inseriti dall'utente) .</div>
<p>Per usare SWAT, si dovrà prima installare il pacchetto <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xinetd">xinetd</a></span>.
</p>
<p>Modificare con un editor di testo il file <code>/etc/xinetd.d/swat</code>. Per abilitare SWAT, cambiare la linea <code>disable = yes</code> in <code>disable = no</code>.
</p>
<pre>service swat
{
        type                    = UNLISTED
        protocol                = tcp
        port                    = 901
        socket_type             = stream
        wait                    = no
        user                    = root
        server                  = /usr/sbin/swat
        log_on_success          += HOST DURATION
        log_on_failure          += HOST
        disable                 = no
}
</pre>
<p>In alternativa è possibile aggiungere il servizio swat e la relativa porta al file <code>/etc/services</code> ed omettere le prime 3 righe della configurazione.
</p>
<p>Successivamente avviare il <a href="/title/Daemon_(Italiano)" class="mw-redirect" title="Daemon (Italiano)">demone</a> xinetd.
</p>
<p>L'interfaccia web è raggiungibile dalla porta di default, 901,
</p>
<pre><a rel="nofollow" class="external free" href="http://localhost:901/">http://localhost:901/</a>
</pre>
<h2><span class="mw-headline" id="Accedere_alle_condivisioni">Accedere alle condivisioni</span></h2>
<p>Le risorse condivise dagli altri computer sulla rete sono accessibili e posso essere montate tramite interfacce grafiche(GUI) oppure attraverso la linea di comando(CLI). L’uso dell’interfaccia grafica è meno diffusa. Solo alcuni Desktop Environments dispongono di apposite utility per accedere alle risorse condivise. Comunque la maggior parte non ne dispone. Infatti, i più leggeri DE e Window Manager non dispongono di metodi grafici nativi.
</p>
<p>Ci sono due fasi nell’accesso alle condivisioni. La prima è il meccanismo di basso livello del file system, e la seconda è l’interfaccia grafica che consente all’utente di montare le risorse condivise. Alcuni Desktop Environments hanno la prima parte integrata in essi.
</p>
<p>Se si usa KDE, si ha la possibilità di vedere le condivisioni Samba. Non sarà quindi necessario installare pacchetti addizionali (comunque per avere un'interfaccia per la configurazione all'interno della schermata "Impostazioni di Sistema" sarà necessario installare il pacchetto kdenetwork-filesharing dal repository [extra]. Un'alternativa è SMB4K.). Se invece, si vuole accedere alle condivisioni da GNOME oppure dalla shell, sarà necessario installare dei pacchetti aggiuntivi.
</p>
<h3>
<span id="Accedere_alle_condivisioni_Samba_da_GNOME.2FXfce4"></span><span class="mw-headline" id="Accedere_alle_condivisioni_Samba_da_GNOME/Xfce4">Accedere alle condivisioni Samba da GNOME/Xfce4</span>
</h3>
<p>Per poter accedere alle condivisioni Samba da GNOME Files sarà necessario installare i pacchetti <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gvfs-smb">gvfs-smb</a></span> e <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gnome-vfs/">gnome-vfs</a></span><sup><small>AUR</small></sup>
</p>
<p>Per potervi accedere usando thunar in Xfce4 sarà necessario installare solamente <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gvfs-smb">gvfs-smb</a></span>
</p>
<p>Dalla finestra di Files/Thunar, premere <code>Ctrl</code>+<code>l</code> oppure andare sul menù "Vai" e selezionare "Posizione..." -- entrambe le azioni porteranno il cursore nella barra del percorso. Digitare:
</p>
<pre>smb://nome_server/condivisione
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Se non è stato inserito il nome server nel file <code>/etc/hosts</code>, si dovrà inserire l'indirizzo IP del server invece del nome.</div>
<p>Un altro programma per GNOME è Gnomba.
</p>
<p>Se si utilizza <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=iptables">iptables</a></span> sul proprio sistema, sarà necessario aver caricato il modulo <code>nf_conntrack_netbios_ns</code>
</p>
<pre>modprobe nf_conntrack_netbios_ns
</pre>
<h3><span class="mw-headline" id="Accedere_alle_condivisioni_da_altri_ambienti_grafici">Accedere alle condivisioni da altri ambienti grafici</span></h3>
<p>Ci sono diversi programmi utili, ma sarà necessario compilarsi il pacchetto per installarli. Ciò può essere fatto tramite gli strumenti di pacchettizzazione di Arch. Un vantaggio di questi programmi è che non necessitano di particolari ambienti per essere supportati, e quindi non hanno molte dipendenze.
</p>
<p>LinNeighborhood è non è legato a nessun DE o WM. Può essere visto come un semplice generico browser di rete con interfaccia grafica, che permette il mount delle condivisioni. Non molto curato graficamente, ma efficiente.
</p>
<p>Altri possibili programmi includono pyneighborhood e RUmba, inoltre anche il plugin xffm-samba per Xffm.
</p>
<h3><span class="mw-headline" id="Accedere_ad_una_condivisione_Samba_tramite_shell">Accedere ad una condivisione Samba tramite shell</span></h3>
<p>Si può accedere alle condivisioni montandole automaticamente oppure <a href="#Montare_manualmente_una_condivisione">manualmente</a>.
</p>
<h4><span class="mw-headline" id="Mount_automatico">Mount automatico</span></h4>
<p>Ci sono diverse alternative per un accesso semplice alle condivisioni.
</p>
<h5><span class="mw-headline" id="smbnetfs">smbnetfs</span></h5>
<p>1. Installare <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=smbnetfs">smbnetfs</a></span>.
</p>
<p>2. Aggiungere la seguente linea al file <code>/etc/fuse.conf</code>:
</p>
<pre>user_allow_other
</pre>
<p>3. Caricare il modulo <code>fuse</code>:
</p>
<pre># modprobe fuse
</pre>
<p>4. Avviare il <a href="/title/Daemon_(Italiano)" class="mw-redirect" title="Daemon (Italiano)">demone</a> <code>smbnetfs</code>.
</p>
<p>Tutte le condivisioni nella rete saranno montate automaticamente in <code>/mnt/smbnet</code>.
</p>
<p>Modificare il file il file <code>/etc/rc.conf</code> per montare le condivisioni durante l'avvio del sistema, aggiungendo il modulo <code>fuse</code> all'array <code>MODULES</code> ed il <a href="/title/Daemon_(Italiano)" class="mw-redirect" title="Daemon (Italiano)">demone</a> <code>smbnetfs</code> all'array <code>DAEMONS</code>.
</p>
<p>Se le condivisioni necessitano di un utente ed una password per l'accesso, sarà necessario modificare il file <code>/etc/smbnetfs/.smb/smbnetfs.conf</code> de commentando la linea che inizia con "auth", e modificandola secondo le esigenze:
</p>
<pre>auth			"WORKGROUP/username" "password"
</pre>
<p>Può essere necessario la modificare i permessi sul file <code>/etc/smbnetfs/.smb/smbnetfs.conf</code>, e di tutti i file inclusi in esso, per far sì che il sevizio funzioni correttamente:
</p>
<pre># chmod 600 /etc/smbnetfs/.smb/smbnetfs.conf
</pre>
<h5><span class="mw-headline" id="fusesmb">fusesmb</span></h5>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Dato che <code>smbclient 3.2.x</code> non funziona correttamente con <code>fusesmb</code>, è preferibile effettuare il downgrade se necessario. Consultare il <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=58434">topic sul forum</a> per maggiori informazioni.</div>
<p>1. Installare <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/fusesmb/">fusesmb</a></span><sup><small>AUR</small></sup> da <a href="/title/AUR_(Italiano)" class="mw-redirect" title="AUR (Italiano)">AUR</a>.
</p>
<p>2. Creare il punto di mount:
</p>
<pre># mkdir /mnt/fusesmb
</pre>
<p>3. Caricare il modulo <code>fuse</code>:
</p>
<pre># modprobe fuse
</pre>
<p>4. Montare la condivisione:
</p>
<pre># fusesmb -o allow_other /mnt/fusesmb
</pre>
<p>Per effettuare il mount automaticamente all'avvio, aggiungere il comando precedente nel file <code>/etc/rc.local</code> ed aggiungere il modulo <code>fuse</code> nell'array <code>MODULES</code> nel file <code>/etc/rc.conf</code>.
</p>
<h5><span class="mw-headline" id="Autofs">Autofs</span></h5>
<p>Consultare la pagina relativa ad <a href="/title/Autofs_(Italiano)" title="Autofs (Italiano)">Autofs</a> per maggiori informazioni riguardo al mount automatico implementato nel kernel Linux.
</p>
<h4><span class="mw-headline" id="Montare_manualmente_una_condivisione">Montare manualmente una condivisione</span></h4>
<p>1. Usare <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=smbclient">smbclient</a></span> per esplorare le condivisioni dalla shell. Per ottenere l'elenco delle condivisioni pubbliche da un server:
</p>
<pre>$ smbclient -L &lt;hostname&gt; -U%
</pre>
<p>2. Creare il punto di mount per la condivisione:
</p>
<pre># mkdir /mnt/PUNTODIMOUNT
</pre>
<p>3. Montare la condivisione usando <code>mount.cifs</code>. Ricordare che non tutte le opzioni sono sempre necessarie o consigliate, ad esempio l'opzione <code>password</code>:
</p>
<pre># mount -t cifs //<i>SERVER</i>/<i>CONDIVISIONE</i> <i>PUNTODIMOUNT</i> -o user=<i>NOMEUTENTE</i>,password=<i>PASSWORD</i>,workgroup=<i>WORKGROUP</i>,ip=<i>IPSERVER</i>
</pre>
<dl>
<dt><code>SERVER</code></dt>
<dd>Il nome macchina Windows</dd>
<dt><code>CONDIVISIONE</code></dt>
<dd>Nome della condivisione</dd>
<dt><code>PUNTODIMOUNT</code></dt>
<dd>La cartella locale dove sarà montata la condivisione</dd>
<dt><code>-o [options]</code></dt>
<dd>Specifica la presenza di opzioni al comando <code>mount.cifs</code>
<dl>
<dt><code>user</code></dt>
<dd>Il nome utente necessario per l'accesso alla condivisione</dd>
<dt><code>password</code></dt>
<dd>La password di accesso alla condivisione</dd>
<dt><code>workgroup</code></dt>
<dd>Serve per specificare il gruppo di lavoro Windows</dd>
<dt><code>ip</code></dt>
<dd>L'indirizzo IP del server --Se il sistema non può identificare il server tramite il nome(DNS, WINS, il file hosts, etc.)</dd>
</dl>
</dd>
</dl>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Evitare di usare i delimitatori delle cartelle (<b>/</b>) alla fine del percorso. Usando <code>//SERVER/CONDIVISIONE<b>/</b></code> non funzionerà.</div>
<p>Dato che CIFS rifiuta di effettuare il mount <a rel="nofollow" class="external text" href="http://jmatrix.net/dao/case/case.jsp?case=7F000001-1766806-11E30195CFB-2593">di condivisioni samba non protette</a>, si deve utilizzare l'opzione <code>sec=none</code>(ed il nome utente e la password dalla lista delle opzioni precedente dovranno essere rimosse).
</p>
<p>Se il comando <code>mount</code> non riesce a risolvere l'indirizzo del server, ma <code>smbclient</code> può, aggiungere la voce <code>wins</code> alla linea <code>hosts</code> nel file <code>/etc/<a href="/index.php?title=Nsswitch.conf&amp;action=edit&amp;redlink=1" class="new" title="Nsswitch.conf (page does not exist)">nsswitch.conf</a></code> può aiutare. Il corrispondente driver <code>/lib/libnss_wins.so</code> deve essere presente, esso è fornito dal pacchetto (del servizio) <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=samba">samba</a></span>.
</p>
<p>4. Per smontare la condivisione usare il comando:
</p>
<pre># umount /mnt/PUNTODIMOUNT
</pre>
<h5><span class="mw-headline" id="Aggiungere_una_condivisione_in_fstab">Aggiungere una condivisione in fstab</span></h5>
<p>Aggiungere la seguente linea al file <code>/etc/<a href="/title/Fstab_(Italiano)" title="Fstab (Italiano)">fstab</a></code> per un mount rapido:
</p>
<pre>//SERVER/CONDIVISIONE /mnt/PUNTODIMOUNT cifs noauto,noatime,username=NOMEUTENTE,password=PASSWORD,workgroup=WORKGROUP,ip=SERVERIP 0 0
</pre>
<p>L'opzione <code>noauto</code> impedisce il mount automatico all'avvio mentre <code>noatime</code> aumenta le prestazioni non aggiornando i tempi di accesso ai file.
</p>
<p>Dopo aver aggiunto la precedente linea, la sintassi del comando <code>mount</code> diventa più semplice:
</p>
<pre># mount /mnt/PUNTODIMOUNT
</pre>
<p>Un'altra opzione, per non avere le password in chiaro, è quella di usare l'opzione <code>credentials</code>:
</p>
<pre>//SERVER/CONDIVISIONE /percorso/di/MOUNT cifs noauto,noatime,credentials=/percorso/per/credenzialismb 0 0
</pre>
<p>Il file delle credenziali dovrebbe contenere il seguente testo:
</p>
<pre>username=USERNAME
password=PASSWORD
</pre>
<p>Per maggiore sicurezza è possibile assegnare i permessi tramite il comando <code>chmod 700</code> a questo file in modo da impedirne la lettura e la scrittura da parte di altri utenti.
</p>
<p>Se si aggiunge una condivisione nel file <code>fstab</code>, il demone <code>netfs</code> dovrà essere aggiunto nell'array <code>DAEMONS</code> in rc.conf, dopo <a href="/title/Configuring_Network_(Italiano)" class="mw-redirect" title="Configuring Network (Italiano)">network</a>. Il demone <code>netfs</code> si occuperà di montare le condivisioni durante la fase di avvio e, cosa più importante, di smontarle durante la fase di arresto del sistema. Anche se viene utilizzata l'opzione <code>noauto</code> in <code>fstab</code>, il demone <code>netfs</code> dovrebbe essere usato. Senza di esso se una condivisione fosse montata, durante la fase di spegnimento porterebbe il demone <code>network</code> ad attendere il time out della connessione, aumentando quindi la durata di arresto del sistema.
</p>
<h5><span class="mw-headline" id="Permettere_agli_utenti_di_montare_le_condivisioni">Permettere agli utenti di montare le condivisioni</span></h5>
<p>Prima abilitare l'accesso al comando mount, il file <code>fstab</code> dovrà essere modificato. Aggiungere l'opzione <code>users</code> nella voce in <code>/etc/fstab</code>:
</p>
<pre>//SERVER/CONDIVISIONE /percorso/del/PUNTODIMOUNT cifs <b>users</b>,noauto,noatime,username=NOMEUTENTE,password=PASSWORD,workgroup=WORKGROUP,ip=SERVERIP 0 0
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Questa è l'opzione <code>user<b>s</b></code>(al plurale). Per altri tipi di filesystem, questa opzione è <i>user</i>, senza la "<b>s</b>".</div>
<p>Questo permetterà agli utenti di montatre la condivisione se il suo punto di mount si trova in una cartella <i>controllabile</i> dall'utente; ad esempio la propria cartella home. Per montare le condivisioni Samba in punti di mount che non si posseggono, utilizzare <a href="#smbnetfs">#smbnetfs</a> oppure elevare i privilegi tramite <a href="/title/Sudo_(Italiano)" title="Sudo (Italiano)">sudo</a>.
</p>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="Condividere_file_sulla_propria_rete_senza_la_richiesta_di_utente_e_password">Condividere file sulla propria rete senza la richiesta di utente e password</span></h3>
<h4><span class="mw-headline" id="Opzione_1_-_Forzare_le_connessioni_guest">Opzione 1 - Forzare le connessioni guest</span></h4>
<p>Modificare il file <code>/etc/samba/smb.conf</code> cambiando la seguente linea:
</p>
<pre>security = user
</pre>
<p>in
</p>
<pre>security = share
</pre>
<h4><span class="mw-headline" id="Opzione_2_-_Permettere_le_connessioni_guest_ed_Utente">Opzione 2 - Permettere le connessioni guest ed Utente</span></h4>
<p>Modificare il file <code>/etc/samba/smb.conf</code> aggiungendo la seguente linea:
</p>
<pre>map to guest = Bad User
</pre>
<p>Dopo questa linea
</p>
<pre>security = user
</pre>
<p>Se si vuole restringere la condivisione ad una specifica interfaccia di rete, sostituire:
</p>
<pre>;   interfaces = 192.168.12.2/24 192.168.13.2/24
</pre>
<p>con:
</p>
<pre>interfaces = lo eth0
bind interfaces only = true
</pre>
<p>(cambiando <code>eth0</code> con il nome dell'interfaccia connessa alla rete con la quale si vuole effettuare la condivisione)
</p>
<p>Se si vuole è possibile modificare l'account che accede alle condivisioni, cambiando la seguente linea:
</p>
<pre>;   guest account = nobody
</pre>
<p>L'ultimo passo consiste nel creare le condivisioni(per garantire il permesso in scrittura usare l'opzione <code>writable = yes</code>):
</p>
<pre>[Public Share]
path = /percorso/alla/condivisione_pubblica
available = yes
browsable = yes
public = yes
writable = no
</pre>
<h3><span class="mw-headline" id="Esempio_di_configurazione">Esempio di configurazione</span></h3>
<p>Questo è un esempio di configurazione funzionante:
</p>
<pre>[global]
workgroup = WORKGROUP
server string = Samba Server
netbios name = PC_NAME
security = share
; la seguente linea è importante! In caso di problemi di permessi
; assicurarsi che l'utente di seguito sia il solito che possiede
; la cartella che si condivide
guest account = mark
username map = /etc/samba/smbusers
name resolve order = hosts wins bcast
wins support = no<br>
[public]
comment = Public Share
path = /path/to/public/share
available = yes
browsable = yes
public = yes
writable = no
</pre>
<h4><span class="mw-headline" id="Global_Parameters">Global Parameters</span></h4>
<p>La prima sezione del file <code>smb.conf</code> serve a configurare i parametri globali, la gran parte delle modifiche sarà effettuata qua.
Segue un esempio di sezione Global Parameters:
</p>
<pre>#Global Parameters
workgroup = HOME
netbios name = nome-della-macchina
encrypt passwords = yes
</pre>
<p>Il parametro <i>workgroup</i> imposta il nome del gruppo di lavoro al quale volete che la macchina appartenga. Il parametro <i>encrypt passwords</i> deve essere mantenuto a <i>yes</i> a meno che in rete non siano presenti macchine Windows 95 o Windows 98, questi due sistemi infatti non supportano le password criptate. Infine il parametro "netbios name" è il nome che desiderate assegnare alla macchina su cui state lavorando all'interno della rete.
</p>
<h4><span class="mw-headline" id="Condivisioni">Condivisioni</span></h4>
<p>A seguito si trova la configurazione delle condivisioni. La condivisione più semplice possibile sarà quella in cui un utente può accedere e scrivere nella propria home direcotry.
Per fare ciò nel file smb.conf saranno presenti le righe:
</p>
<pre>[homes]
browseable = no
read only = no
</pre>
<p>Se si vuole che tutti possano vedere i file, ma solo gli utenti appartenenti ad alcuni gruppi abbiano diritto di scrittura, allora sarà necessario cambiare le righe precedenti in:
</p>
<pre>[homes]
public = yes
writable = yes
write list = @nome-gruppo
</pre>
<p>Se vogliamo che gli utenti windows una volta loggati vedano una direcotry home "pulita" (ovvero non i file nascosti, es: <code>~/.bashrc</code>), allora la sezione homes potrebbe essere:
</p>
<pre>[homes]
path = /home/%u/smb
browseable = no
read only = no
</pre>
<p>In questo caso però assicurasi di aggiungere la cartella <code>smb</code> alle home directory degli utenti. Inoltre aggiungere <code>smb</code> alla direcotry <code>/etc/skel</code>, in modo che tutti i nuovi utenti abbiano <code>~/smb</code> aggiunto in automatico alla creazione:
</p>
<pre># mkdir /etc/skel/smb
</pre>
<p>Aggiungere altre condivisioni differenti dalle direcotry home non è più difficile, anzi. Per aggiungere un'ulteriore condivisione:
</p>
<pre>[music]
path = /mnt/windows/Music/
browseable = yes
read only = yes
valid users = Bryan, Michael, David, Jane
</pre>
<p>Il parametro <code>path</code> indica la posizione della direcotry che si vuole condividere. Il parametro <code>valid users</code> comunica a samba quali utenti hanno diritto di accedere a questa condivisione.
Una volta aggiunte tutte le condivisioni necessarie, salvare il file ed uscire dall'editor.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong>  I nomi utente inseriti nel file di configurazione <b>devono</b> coincidere con gli utenti di sistema della macchina Linux ed <b>è consigliato</b> che coincidano anche con quelli presenti sulle macchine Windows.</div>
<h3><span class="mw-headline" id="Individuare_le_condivisioni_di_rete">Individuare le condivisioni di rete</span></h3>
<p>Se non si conosce la struttura della rete locale, e gli strumenti di automazione come <a href="#smbnetfs">#smbnetfs</a> non sono disponibili, i seguenti metodi permetteranno di individuare le condivisioni Samba.
</p>
<p>1. Per prima cosa, <a href="/title/Pacman_(Italiano)" title="Pacman (Italiano)">installare</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nmap">nmap</a></span> e <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=smbclient">smbclient</a></span>.
</p>
<p>2. <code>nmap</code> controlla quali porte sono aperte:
</p>
<pre># nmap -sT 192.168.1.*
</pre>
<p>In questo esempio verrà scansionata l'intera classe di indirizzi 192.168.1.*. Ecco il risultato:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ nmap -sT 192.168.1.*</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Starting nmap 3.78 ( http://www.insecure.org/nmap/ ) at 2005-02-15 11:45 PHT
Interesting ports on 192.168.1.1:
(The 1661 ports scanned but not shown below are in state: closed)
PORT     STATE SERVICE
'''139/tcp  open  netbios-ssn'''
5000/tcp open  UPnP

Interesting ports on 192.168.1.5:
(The 1662 ports scanned but not shown below are in state: closed)
PORT     STATE SERVICE
6000/tcp open  X11

Nmap run completed -- 256 IP addresses (2 hosts up) scanned in 7.255 seconds
</pre>
<p>Il primo indirizzo(192.168.1.1) è un altro pc, mentre il secondo è il computer da cui è stata lanciata la scansione.
</p>
<p>3. Adesso verso il sistema che risulta avere la porta 139 aperta, sarà usato <code>nmblookup</code> per ottenere i nomi delle condivisioni(NetBIOS names): 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ nmblookup -A 192.168.1.1</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Looking up status of 192.168.1.1
        PUTER           &lt;00&gt; -         B &lt;ACTIVE&gt;
        HOMENET         &lt;00&gt; - &lt;GROUP&gt; B &lt;ACTIVE&gt;
        PUTER           &lt;03&gt; -         B &lt;ACTIVE&gt;
        '''PUTER           &lt;20&gt; -         B &lt;ACTIVE&gt;'''
        HOMENET         &lt;1e&gt; - &lt;GROUP&gt; B &lt;ACTIVE&gt;
        USERNAME        &lt;03&gt; -         B &lt;ACTIVE&gt;
        HOMENET         &lt;1d&gt; -         B &lt;ACTIVE&gt;
        MSBROWSE        &lt;01&gt; - &lt;GROUP&gt; B &lt;ACTIVE&gt;
</pre>
<p>Senza preoccuparsi dei vari risultati, cercare il valore <b>&lt;20&gt;</b>, che indica la macchina con la condivisione file attiva.
</p>
<p>4. Usare <code>smbclient</code> per elencare quali servizi sono condivisi da <i>PUTER</i>. Nel caso fosse richiesta una password, premendo invio verrà comunque mostrata la lista:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ smbclient -L \\PUTER</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Sharename       Type      Comment
---------       ----      -------
MY_MUSIC        Disk
SHAREDDOCS      Disk
PRINTER$        Disk
PRINTER         Printer
IPC$            IPC       Remote Inter Process Communication

Server               Comment
---------            -------
PUTER

Workgroup            Master
---------            -------
HOMENET               PUTER
</pre>
<p>Questo mostra quali cartelle sono condivise, e quindi possono essere montate localmente. Vedi  <a href="#Accedere_alle_condivisioni">#Accedere alle condivisioni</a>
</p>
<h3><span class="mw-headline" id="Controllare_da_remoto_i_computer_Windows">Controllare da remoto i computer Windows</span></h3>
<p>Samba offre una serie di strumenti per comunicare con Windows.
Questi possono essere utili nel caso no si possa prendere il controllo di questi tramite il desktop remoto, ecco alcuni esempi.
</p>
<ul><li>Inviare il segnale di shutdown con un commento:</li></ul>
<pre>$ net rpc shutdown -C "commento" -I INDIRIZZOIP -U NOMEUTENTE%PASSWORD
</pre>
<p>Se si preferisce forzare lo spegnimento, sostituire l'opzione <code>-C "commento"</code> con <code>-f</code>. In caso si voglia eseguire un riavvio aggiungere <code>-r</code>, seguito da <code>-C "commento"</code> oppure <code>-f</code>.
</p>
<ul><li>Fermare ed avviare servizi:</li></ul>
<pre>$ net rpc service stop NOMESERVIZIO -I INDIRIZZOIP -U NOMEUTENTE%PASSWORD
</pre>
<ul><li>Per vedere tutti i possibili comandi <code>net rpc</code>:</li></ul>
<pre>$ net rpc
</pre>
<h3><span class="mw-headline" id="Bloccare_determinate_estenzioni_di_file_extensions_sulle_condivisioni_samba">Bloccare determinate estenzioni di file extensions sulle condivisioni samba</span></h3>
<p>Samba permette come opzione di bloccare i file corrispondenti ad un determinato pattern, come un estensione. Questa opzione può essere usata per impedire la diffusione di virus oppure dissuadere gli utenti dallo spercare spazio con determinati file:
</p>
<pre>Veto files = /*.exe/*.com/*.dll/*.bat/*.vbs/*.tmp/*.mp3/*.avi/*.mp4/*.wmv/*.wma/
</pre>
<h2><span class="mw-headline" id="Risoluzione_di_problemi">Risoluzione di problemi</span></h2>
<h3>
<span id=".22Sfogliando.22_la_rete_si_ottiene_una_finestra_vuota"></span><span class="mw-headline" id='"Sfogliando"_la_rete_si_ottiene_una_finestra_vuota'>"Sfogliando" la rete si ottiene una finestra vuota</span>
</h3>
<p>Nonostante samba sia funzionante e ben configurato, sfogliando la rete Windows in cerca di condivisioni usando un gestore file basato su <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gvfs">gvfs</a></span> (Nautilus, PCManFM, e altri) non si ottiene altro che una finestra vuota.
Con samba 4.7 sono cambiati i protocolli predefiniti e sembra causa di problemi con i gestori di file.
Come soluzione temporanea è possibile aggiungere la seguente voce nel file di configurazione <code>smb.conf</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/samba/smb.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
[global]
  client max protocol = NT1
  ...</pre>
<h3>
<span id="Windows_7_problemi_di_connettivit.C3.A0_-_mount_error.2812.29:_cannot_allocate_memory"></span><span class="mw-headline" id="Windows_7_problemi_di_connettività_-_mount_error(12):_cannot_allocate_memory">Windows 7 problemi di connettività - mount error(12): cannot allocate memory</span>
</h3>
<p>Un noto bug di Windows 7 che causa l'errore "mount error(12): cannot allocate memory" su di una condivisione cifs perfettamente configrata dal lato Linux, può essere risolto impostando alcune chiavi di regitro sul pc Windows come di seguito:
</p>
<ul><li>HKLM\SYSTEM\CurrentControlSet\Control\Session Manager\Memory Management\LargeSystemCache (impostata a 1)</li></ul>
<ul><li>HKLM\SYSTEM\CurrentControlSet\Services\LanmanServer\Parameters\Size (impostata a 3)</li></ul>
<p>Riavviare il pc Windows per applicare le modifiche.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong>  Cercando su Google si otterranno diversi tweak сhe consigliano agli utenti di aggiungere una chiave per modificare la dimensione "IRPStackSize". Questo non è corretto per sistemare questo problema su Windows 7. Non lo fate.</div>
<p><a rel="nofollow" class="external text" href="http://alan.lamielle.net/2009/09/03/windows-7-nonpaged-pool-srv-error-2017">Collegamento</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">link interrotto</a> 2020-08-04]</sup> all'articolo originale.
</p>
<h3><span class="mw-headline" id="Problemi_con_gli_accessi_da_Windows_a_condivisioni_protette_da_password">Problemi con gli accessi da Windows a condivisioni protette da password</span></h3>
<p>In caso di problemi di accesso da Windows alle condivisioni protette da password, provare ad aggiungere queste righe al file <code>/etc/samba/smb.conf</code>:<a rel="nofollow" class="external autonumber" href="http://blogs.computerworld.com/networking_nightmare_ii_adding_linux">[2]</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">link interrotto</a> 2020-08-04]</sup>
</p>
<p>Notare che si dovrà modificare il file smb.conf <b>locale</b> non quello del server
</p>
<pre>[global]
# lanman fix
client lanman auth = yes
client ntlmv2 auth = no
</pre>
<h3>
<span id="Lentezza_nell.27apparizione_della_finestra_per_l.27accesso"></span><span class="mw-headline" id="Lentezza_nell'apparizione_della_finestra_per_l'accesso">Lentezza nell'apparizione della finestra per l'accesso</span>
</h3>
<p>Si sono verificati ritardi anche di circa 30 secondi, dalla richiesta di connessione all'apparsa della finestra di accesso, sia utilizzando Windows XP che Windows 7. E analizzando il log <code>error.log</code> compare:
</p>
<pre>[2009/11/11 06:20:12,  0] printing/print_cups.c:cups_connect(103)
Unable to connect to CUPS server localhost:631 - Interrupted system call
</pre>
<p>Dato che il problema si verificava anche se sul server non erano connesse stampanti, la soluzione consiste nell'aggiungere queste righe nella sezione global del file <code>smb.conf</code>
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/samba/smb.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
[global]
  load printers = no
  printing = bsd
  disable spoolss = yes
  printcap name = /dev/null
  ...</pre>
<p>Non c'è la certezza che tutte queste righe siano effettivamente necessarie, ma in questo modo funziona.
</p>
<h3><span class="mw-headline" id="Cambiamenti_in_Samba_versione_3.4.0">Cambiamenti in Samba versione 3.4.0</span></h3>
<p>Tra le <a rel="nofollow" class="external text" href="https://www.samba.org/samba/history/samba-3.4.0.html">maggiori innovazioni in Samba 3.4.0</a>:
</p>
<p>Il programma di gestione delle password di default è stato cambiato in favore di 'tdbsam'! Di conseguenza tutte le configurazioni esistenti, che invece utilizzano 'smbpasswd', senza una dichiarazione esplicita risultano non funzionanti.
</p>
<p>Se si vuole utilizzare 'smbpasswd' modificare il file <code>/etc/samba/smb.conf</code>:
</p>
<pre>passdb backend = smbpasswd
</pre>
<p>oppure convertire a <code>tdbsam</code> gli accessi:
</p>
<pre>sudo pdbedit -i smbpasswd -e tdbsam
</pre>
<h3><span class="mw-headline" id="Error:_Value_too_large_for_defined_data_type">Error: Value too large for defined data type</span></h3>
<p>Con alcune applicazioni si può ottenere questo errore provando ad aprire un file da una condivisione smbfs/cifs:
</p>
<pre> Value too large for defined data type
</pre>
<p>La soluzione<a rel="nofollow" class="external autonumber" href="https://bugs.launchpad.net/ubuntu/+bug/479266/comments/5">[3]</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">link interrotto</a> 2020-08-04]</sup>, è aggiungere questa opzione al mount delle condivisioni smbfs/cifs(all'interno del file <code>/etc/fstab</code> ad esempio):
</p>
<pre> ,nounix,noserverino
</pre>
<p><i>Testato su Arch Linux aggiornata al 02/12/2009</i>
</p>
<h3><span class="mw-headline" id="Devo_riavviare_Samba_per_rendere_le_condivisioni_visibili_agli_altri_pc">Devo riavviare Samba per rendere le condivisioni visibili agli altri pc</span></h3>
<p>Se dopo l'avvio del computer, le condivisioni samba configurate non sono accessibili da nessun client, controllare:
</p>
<ul>
<li>di non aver dimenticato di inserire il demone <code>samba</code> all'interno dell'array <code>DAEMONS</code> nel file <code>/etc/rc.conf</code> (dopo il demone <code>network</code> o qualsiasi sia il demone di gestione della rete es.<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/wicd-git/">wicd-git</a></span><sup><small>AUR</small></sup>,<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=networkmanager">networkmanager</a></span>)</li>
<li>che il demone <i>network</i> non sia avviato in background (quindi non deve essere preceduto dal simbolo <code>@</code> all'interno del suddetto array). Rimuovere il simbolo '<code>@</code>' può risolvere il problema. Riavviare e controllare.</li>
</ul>
<p>Si presume che: quando samba viene avviato, probabilmente il demone <code>network</code> non ha ancora finito di avviarsi correttamente, quindi il server samba non identifica l'interfaccia di rete sulla quale stare in ascolto, e quindi fallisce la sua inizializzazione.
</p>
<h2><span class="mw-headline" id="Risorse">Risorse</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://www.samba.org/">Sito ufficiale di Samba (in inglese)</a></li>
<li><a rel="nofollow" class="external text" href="https://www.samba.org/samba/docs/SambaIntro.html">Samba: Introduzione (in inglese)</a></li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="/title/Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="/title/Category:Networking_(Italiano)" title="Category:Networking (Italiano)">Networking (Italiano)</a></li></ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Samba_(Italiano)&amp;oldid=665779">https://wiki.archlinux.org/index.php?title=Samba_(Italiano)&amp;oldid=665779</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 1 May 2021, at 07:25.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="/title/ArchWiki:Privacy_policy" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="/title/ArchWiki:About" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="/title/ArchWiki:General_disclaimer" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
