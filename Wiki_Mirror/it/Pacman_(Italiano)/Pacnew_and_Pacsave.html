<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Pacman (Italiano)/Pacnew and Pacsave (Italiano) - ArchWiki</title>
<link rel="stylesheet" href="../../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Pacman_Italiano_Pacnew_and_Pacsave_Italiano rootpage-Pacman_Italiano skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Pacman (Italiano)/Pacnew and Pacsave (Italiano)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"><span class="subpages">&lt; <a href="../../it/Pacman.html" title="Pacman (Italiano)">Pacman (Italiano)</a></span></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Per_Iniziare"><span class="tocnumber">1</span> <span class="toctext">Per Iniziare</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#File_di_backup_dei_pacchetti"><span class="tocnumber">2</span> <span class="toctext">File di backup dei pacchetti</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#Spiegazione_dei_Tipi"><span class="tocnumber">3</span> <span class="toctext">Spiegazione dei Tipi</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#.pacnew"><span class="tocnumber">3.1</span> <span class="toctext">.pacnew</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#.pacsave"><span class="tocnumber">3.2</span> <span class="toctext">.pacsave</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#.pacorig"><span class="tocnumber">3.3</span> <span class="toctext">.pacorig</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Localizzare_i_file_.pac*"><span class="tocnumber">4</span> <span class="toctext">Localizzare i file .pac*</span></a></li>
<li class="toclevel-1 tocsection-8">
<a href="#Gestire_i_file_.pacnew"><span class="tocnumber">5</span> <span class="toctext">Gestire i file .pacnew</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="#Usare_Meld_per_sistemare_le_Differenze"><span class="tocnumber">5.1</span> <span class="toctext">Usare Meld per sistemare le Differenze</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10"><a href="#Risorse"><span class="tocnumber">6</span> <span class="toctext">Risorse</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Per_Iniziare">Per Iniziare</span></h2>
<p>Durante degli aggiornamenti o rimozioni di pacchetti, <a href="../../en/Pacman.html" title="Pacman">Pacman</a> vi informerà di alcuni file (solitamente dei file di configurazione in <code>/etc</code>) che sono stati installati con una estensione <code>.pacnew</code> o di cui è stata fatta una copia con una estensione <code>.pacsave</code>.
</p>
<p>Un file <code>.pacnew</code> può essere creato durante un aggiornamento con (<code>pacman -Syu</code>, <code>pacman -Su</code> o (<code>pacman -U</code>) per evitare di sovrascrivere una configurazione già esistente e precedentemente modificata dall'utente. Quando ciò accade, apparirà un messaggio nell'output di pacman simile al seguente:
</p>
<pre>warning: /etc/pam.d/usermod installed as /etc/pam.d/usermod.pacnew
</pre>
<p>Un file <code>.pacsave</code> può essere creato durante la rimozione di un pacchetto (<code>pacman -R</code>), o durante una sostituzione di pacchetto (che forza la rimozione di un pacchetto che andrà a sostituire). Quando nel database di pacman c'è una registrazione che un certo file posseduto da un pacchetto debba essere salvato, verrà creato un file <code>.pacsave</code>. Quando ciò accade, pacman avviserà con un messaggio simile al seguente:
</p>
<pre>warning: /etc/pam.d/usermod saved as /etc/pam.d/usermod.pacsave
</pre>
<p>Questi file richiedono l'intervento manuale dell'utente, ed è buona pratica sistemarli subito dopo una rimozione o aggiornamento di quei pacchetti. Se lasciati in giro, configurazioni errate possono portare a malfunzionamenti di qualche software o addirittura impedire l'avvio degli stessi.
</p>
<h2><span class="mw-headline" id="File_di_backup_dei_pacchetti">File di <code>backup</code> dei pacchetti</span></h2>
<p>Un <code>PKGBUILD</code> di un pacchetto può specificare quali particolari file debbano essere preservati o backup-pati quando il relativo pacchetto venga aggiornato o rimosso. Per esempio, il <code>PKGBUILD</code> di <code>pulseaudio</code> contiene la riga seguente:
</p>
<pre>backup=('etc/pulse/client.conf' 'etc/pulse/daemon.conf' 'etc/pulse/default.pa')
</pre>
<h2><span class="mw-headline" id="Spiegazione_dei_Tipi">Spiegazione dei Tipi</span></h2>
<p>I tipi differenti dei file *.pac* sono i seguenti:
</p>
<h3><span class="mw-headline" id=".pacnew">.pacnew</span></h3>
<p>Per ogni file <code>backup</code> di un pacchetto che sta per essere aggiornato, pacman fa una comparazione incrociata di tre <a href="https://en.wikipedia.org/wiki/Md5sum" class="extiw" title="wikipedia:Md5sum">md5sums</a> generati dal contenuti dei file stessi: uno per la versione originariamente installata dal pacchetto, una per la versione corrente, e una per la versione che sta per essere installata con l'aggiornamento. Se il file attualmente presente sul sistema è stato modificato rispetto alla versione originale, pacman non può conoscere come importare questi cambiamenti nella nuova versione dello stesso file. Dunque, invece di sovrascrivere il file vecchio con quello nuovo, pacman salverà la nuova versione del file di configurazione con l'estensione <i>.pacnew</i> e lascerà la versione già presente sul sistema intatta.
</p>
<p>Nel dettaglio, il controllo triplo delle somme MD5 possono portare ad uno dei casi seguenti:
</p>
<dl>
<dt>originale = <i>X</i>, attuale = <i>X</i>, nuovo = <i>X</i>
</dt>
<dd>tutte e tre le versioni hanno contenuti identici, quindi sovrascrivere non porta a problemi. Verrà quindi sovrascritto il file e non verranno fatte notifiche all'utente. (nonostante ciò, questa sovrascrittura porterà all'aggiornamento delle informazioni del filesystem relative alle date di installazione, modifica e accesso oltre che alla modifica dei permessi se necessarie.)</dd>
</dl>
<dl>
<dt>originale = <i>X</i>, attuale = <i>X</i>, nuovo = <i>Y</i>
</dt>
<dd>la versione corrente del file è identica alla originale, ma la nuova versione è differente. Dato che l'utente non ha dunque modificato la configurazione attuale, e che la nuova versione può contenere miglioramenti o risoluzione di qualche bug, il file corrente verrà sovrascritto con quello nuovo, ancora senza notifiche all'utente. Questa è l'unica maniera che ha pacman per aggiornare i contenuti di un file.</dd>
</dl>
<dl>
<dt>originale = <i>X</i>, attuale = <i>Y</i>, nuovo = <i>X</i>
</dt>
<dd>il pacchetto originale e quello nuovo contengono la stessa versione del file, ma quello sul sistema è stato modificato. In questo caso, verrà lasciata la versione correntemente sul sistema, senza notifiche all'utente.</dd>
</dl>
<dl>
<dt>originale = <i>X</i>, attuale = <i>Y</i>, nuovo = <i>Y</i>
</dt>
<dd>la versione nuova è identica a quella installata sul sistema. Anche qui, verrà effettuata la sovrascrittura senza notifiche all'utente. (nonostante ciò, questa sovrascrittura porterà all'aggiornamento delle informazioni del filesystem relative alle date di installazione, modifica e accesso oltre che alla modifica dei permessi se necessarie.)</dd>
</dl>
<dl>
<dt>originale = <i>X</i>, attuale = <i>Y</i>, nuovo = <i>Z</i>
</dt>
<dd>le tre versioni del file sono differenti: in questo caso, verrà conservata la versione corrente al suo posto, la nuova versione verrà installata con estensione <code>.pacnew</code> e l'utente verrà avvisato dell'esistenza della nuova versione. In questo caso, l'utente deve intervenire per fare le dovute modifiche al nuovo file e sostituirlo manualmente alla versione corrente.</dd>
</dl>
<h3><span class="mw-headline" id=".pacsave">.pacsave</span></h3>
<p>Se l'utente ha modificato uno dei file specificati nella sezione <code>backup</code> allora questo file verrà rinominato con una estensione <code>.pacsave</code> e verrà conservato nel filesystem qualora il pacchetto venga rimosso.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  L'uso dell'opzione <code>-n</code> con il comando <code>pacman -R</code> equivarrà all'ordine di rimuovere <b>qualsiasi</b> file relativo al pacchetto da rimuovere; in questo caso nessun file <code>.pacsave</code> verrà creato.</div>
<h3><span class="mw-headline" id=".pacorig">.pacorig</span></h3>
<p>Quando un file (solitamente un file di configurazione posizionato in <code>/etc</code>) che viene incontrato durante un installazione o aggiornamento non appartiene a nessun pacchetto installato ma è elencato in quelli <code>backup</code> per il pacchetto che si sta per installare, sarà salvato con estensione <code>.pacorig</code> e rimpiazzato con la versione del pacchetto. Solitamente questo accade quando un file di configurazione è stato spostato da un pacchetto all'altro. Se questi file non fossero elencati nella sezione <code>backup</code>, pacman annullerebbe l'operazione per un errore di conflitto fra pacchetti.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  Poichè i file <code>.pacorig</code> tendono ad essere creati per circostanze speciali, non esiste un metodo universale per gestirli. Può essere utile consultare le <a rel="nofollow" class="external text" href="https://archlinux.org/news/">Arch News</a> per delle istruzioni in caso ci si trovi davanti a qualche aggiornamento particolare.</div>
<h2>
<span id="Localizzare_i_file_.pac.2A"></span><span class="mw-headline" id="Localizzare_i_file_.pac*">Localizzare i file .pac*</span>
</h2>
<p>Arch Linux non fornisce utility ufficiali per gestire i file <code>.pacnew</code>.  L'utente dovrà dunque gestirseli a mano autonomamente. Per fare ciò, innanzitutto dovrete sapere dove sono. Quando si aggiorna o rimuove una gran quantità di pacchetti, potreste non accorgervi di qualche file *.pac* da sistemare. Per scoprire quali sono:
</p>
<p>Sarà innanzitutto necessario cercarli nel luogo dove di solito sono i file di configurazione:
</p>
<pre>find /etc -name "*.pac*"
</pre>
<p>o nel disco intero:
</p>
<pre>find / -name "*.pac*"
</pre>
<p>In alternativa sarà possibile sfruttare il file log di pacman per trovarli:
</p>
<pre>egrep "pac(new|orig|save)" /var/log/pacman.log
</pre>
<p>Notare che il log non tiene traccia di quali file attualmente sono già presenti sul sistema o di quelli che sono già stati rimossi.
</p>
<h2><span class="mw-headline" id="Gestire_i_file_.pacnew">Gestire i file .pacnew</span></h2>
<p>Una volta che tutti i file <code>.pacnew</code> esistenti sono stati localizzati, l'utente potrà gestirli manualmente tramite varie utilità di unione come <a href="../../en/Vim.html#Merging_Files_.28Vimdiff.29" title="Vim">vimdiff</a><sup>[<a href="../../en/Help:Procedures.html#Fix_broken_section_links" title="Help:Procedures">broken link</a>: invalid section]</sup>, ediff (parte di <a href="../../en/Emacs.html" title="Emacs">emacs</a>), meld (una utilità grafica per Gnome), o Kompare (una utilità grafica per KDE GUI gui), per poi eliminare il file <code>.pacnew</code> una volta fatte le modifiche.
</p>
<p>Ci sono alcune utilità di terze parti che forniscono vari livelli di automatizzazione di queste operazioni, disponibili sul <a href="../../en/Official_repositories.html#community" class="mw-redirect" title="Community repository">repository community</a> e su <a href="../../en/Arch_User_Repository.html" title="Arch User Repository">Arch User Repository</a>:
</p>
<ul>
<li>
<a href="../../en/Pacman/Pacnew_and_Pacsave.html#Managing_.pacnew_files" class="mw-redirect" title="Dotpac">Dotpac</a> - Script interattivo basilare, basato su interfaccia ncurses e che fornisce istruzioni passo-passo. Nessuna funzione di unione automatica.</li>
<li>
<a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages.php?ID=15326">pacdiff</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">link interrotto</a> 2020-08-04]</sup> - Script minimale e non documentato per terminale. Fa parte del pacchetto <code>pacman</code> nel repo <code>community</code>.</li>
<li>
<a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages.php?ID=5863">pacdiffviewer</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">link interrotto</a> 2020-08-04]</sup> - Completo Script da terminale con capacità di unione automatica. fa parte di <a href="../../en/AUR_helpers.html" class="mw-redirect" title="Yaourt (Italiano)"><code>yaourt</code></a>.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/diffpac/">diffpac</a></span><sup><small>AUR</small></sup><sup>[<a href="../../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">broken link</a>: package not found]</sup> - Versione di pacdiffviewer autonoma.</li>
</ul>
<h3><span class="mw-headline" id="Usare_Meld_per_sistemare_le_Differenze">Usare Meld per sistemare le Differenze</span></h3>
<p>È possibile usare meld in loop per effettuare tutti i cambiamenti necessari. Questo script vi permetterà di sistemare i file uno ad uno, permettendovi di osservarne le differenze:
</p>
<pre>#!/bin/bash
# pacnew-update - merge *.pacnew files with original configurations with meld

pacnew=$(find /etc -type f -name "*.pacnew")

for config in $pacnew; do
  # Merge with meld
  kdesu meld ${config%\.*} $config &amp;
  wait
done</pre>
<p>Nello script viene utilizzato <code>kdesu</code>, comando della suite KDE, per ottenere permessi di root tramite GUI grafica. Usate <code>gksudo</code> se avete un sistema Gnome/XFCE. Eventualmente potete aggiungere la riga <code>sudo rm -i $config</code> per rimuovere i file dopo averli modificati, ma ciò richiederà privilegi particolari per l'utente. Una maniera migliore per fare ciò è eseguire il comando seguente dopo che avrete effettuato tutte le modifiche, in modo da eliminare tutti i file <code>*.pacnew</code>:
</p>
<pre>find /etc -type f -name "*.pacnew" -exec rm {} \;
</pre>
<h2><span class="mw-headline" id="Risorse">Risorse</span></h2>
<ul><li>Arch Linux Forums: <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=53532">Dealing With .pacnew Files</a> (in inglese)</li></ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../../it/Category:Package_management.html" title="Category:Package management (Italiano)">Package management (Italiano)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../../en/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li>
<li><a href="../../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Pacman_(Italiano)/Pacnew_and_Pacsave_(Italiano)&amp;oldid=646994">https://wiki.archlinux.org/index.php?title=Pacman_(Italiano)/Pacnew_and_Pacsave_(Italiano)&amp;oldid=646994</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 26 December 2020, at 12:21.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
