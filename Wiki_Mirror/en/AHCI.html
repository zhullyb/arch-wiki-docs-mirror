<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>AHCI - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-AHCI rootpage-AHCI skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">AHCI</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<p><a href="https://en.wikipedia.org/wiki/AHCI" class="extiw" title="wikipedia:AHCI">AHCI</a> (Advanced Host Controller Interface) is the native work mode for SATA drives. AHCI has two main benefits: support for hot pluggable SATA drives (mimicking USB drives' behavior) and <a href="https://en.wikipedia.org/wiki/Native_Command_Queuing" class="extiw" title="wikipedia:Native Command Queuing">Native Command Queuing</a> (NCQ). It has been present in the Linux kernel since version 2.6.19 and will be loaded automatically in current Arch kernel.
</p>
<h2><span class="mw-headline" id="Configure_from_BIOS">Configure from BIOS</span></h2>
<p>If your BIOS set SATA as legacy/parallel ATA, you can access BIOS setting depends on the motherboard; usually, <code>Del</code> is used to display the menu.
</p>
<p>Once the BIOS options are available, search for parameters resembling the following:
</p>
<ul>
<li><i>Enable SATA as: IDE/AHCI</i></li>
<li><i>SATA: PATA Emulation/Native/Enhanced</i></li>
</ul>
<p>Choose <i>AHCI</i> or <i>Native</i>, save the settings and exit the BIOS. Consult the motherboard's manual if it is not clear which of the modes is AHCI, since the naming can vary.
</p>
<p>After altering and saving the BIOS settings, Linux should load the AHCI driver on the next boot. The output of <a href="/title/Dmesg" class="mw-redirect" title="Dmesg">dmesg</a> should confirm this:
</p>
<pre>SCSI subsystem initialized
libata version 3.00 loaded.
ahci 0000:00:1f.2: version 3.0
ahci 0000:00:1f.2: PCI INT B -&gt; GSI 19 (level, low) -&gt; IRQ 19
ahci 0000:00:1f.2: irq 764 for MSI/MSI-X
ahci 0000:00:1f.2: AHCI 0001.0200 32 slots 6 ports 3 Gbps 0x3f impl SATA mode
ahci 0000:00:1f.2: flags: 64bit ncq sntf stag pm led clo pmp pio slum part ems 
ahci 0000:00:1f.2: setting latency timer to 64
scsi0 : ahci
scsi1 : ahci
scsi2 : ahci
scsi3 : ahci
scsi4 : ahci
scsi5 : ahci
</pre>
<p>and for NCQ:
</p>
<pre>ata2.00: 625142448 sectors, multi 16: LBA48 NCQ (depth 31/32)
</pre>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<p>It is possible that the AHCI module is not loaded automatically if SATA configuration is switched from IDE to AHCI after installing Arch. In such case, an error message will appear at early boot indicating that the root partition was not found.
</p>
<p>If that happens, the <code>failsafe</code> boot option should still work fine. Once started in failsafe mode, you have to run <a href="/title/Mkinitcpio" title="Mkinitcpio">mkinitcpio</a> to re-generate initramfs images.
</p>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="/title/Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="/title/Category:Storage" title="Category:Storage">Storage</a></li></ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=AHCI&amp;oldid=667639">https://wiki.archlinux.org/index.php?title=AHCI&amp;oldid=667639</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 3 May 2021, at 08:06.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="/title/ArchWiki:Privacy_policy" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="/title/ArchWiki:About" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="/title/ArchWiki:General_disclaimer" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
