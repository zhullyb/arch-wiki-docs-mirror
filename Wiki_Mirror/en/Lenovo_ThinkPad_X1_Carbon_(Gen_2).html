<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Lenovo ThinkPad X1 Carbon (Gen 2) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Lenovo_ThinkPad_X1_Carbon_Gen_2 rootpage-Lenovo_ThinkPad_X1_Carbon_Gen_2 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Lenovo ThinkPad X1 Carbon (Gen 2)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="noprint archwiki-template-message">
<p><a href="/title/File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a><b>This article or section does not follow the <a href="/title/Help:Laptop_page_guidelines" title="Help:Laptop page guidelines">Laptop page guidelines</a>.</b><a href="/title/File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Stub (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/title/Talk:Lenovo_ThinkPad_X1_Carbon_(Gen_2)">Talk:Lenovo ThinkPad X1 Carbon (Gen 2)#</a>)</div>
</div>
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="/title/Lenovo_ThinkPad_X1_Carbon" title="Lenovo ThinkPad X1 Carbon">Lenovo ThinkPad X1 Carbon</a></li>
<li><a href="/title/Lenovo_ThinkPad_X1_Carbon_(Gen_3)" title="Lenovo ThinkPad X1 Carbon (Gen 3)">Lenovo ThinkPad X1 Carbon (Gen 3)</a></li>
<li><a href="/title/Lenovo_ThinkPad_X1_Carbon_(Gen_4)" title="Lenovo ThinkPad X1 Carbon (Gen 4)">Lenovo ThinkPad X1 Carbon (Gen 4)</a></li>
<li><a href="/title/Lenovo_ThinkPad_X1_Carbon_(Gen_5)" title="Lenovo ThinkPad X1 Carbon (Gen 5)">Lenovo ThinkPad X1 Carbon (Gen 5)</a></li>
<li><a href="/title/Lenovo_ThinkPad_X1_Carbon_(Gen_6)" title="Lenovo ThinkPad X1 Carbon (Gen 6)">Lenovo ThinkPad X1 Carbon (Gen 6)</a></li>
<li><a href="/title/Lenovo_ThinkPad_X1_Carbon_(Gen_7)" title="Lenovo ThinkPad X1 Carbon (Gen 7)">Lenovo ThinkPad X1 Carbon (Gen 7)</a></li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong>  A great resource for thinkpads is <a rel="nofollow" class="external free" href="https://www.thinkwiki.org/wiki/ThinkWiki">https://www.thinkwiki.org/wiki/ThinkWiki</a>
</div>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Model_description"><span class="tocnumber">1</span> <span class="toctext">Model description</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Legacy-BIOS"><span class="tocnumber">1.1</span> <span class="toctext">Legacy-BIOS</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#UEFI"><span class="tocnumber">1.2</span> <span class="toctext">UEFI</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4">
<a href="#Hardware"><span class="tocnumber">2</span> <span class="toctext">Hardware</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#Power_Management"><span class="tocnumber">2.1</span> <span class="toctext">Power Management</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Wake_From_Suspend"><span class="tocnumber">2.2</span> <span class="toctext">Wake From Suspend</span></a></li>
<li class="toclevel-2 tocsection-7">
<a href="#Keyboard"><span class="tocnumber">2.3</span> <span class="toctext">Keyboard</span></a>
<ul>
<li class="toclevel-3 tocsection-8"><a href="#Remapping_keys_using_xmodmap"><span class="tocnumber">2.3.1</span> <span class="toctext">Remapping keys using xmodmap</span></a></li>
<li class="toclevel-3 tocsection-9">
<a href="#Remapping_keys_using_xkb"><span class="tocnumber">2.3.2</span> <span class="toctext">Remapping keys using xkb</span></a>
<ul>
<li class="toclevel-4 tocsection-10"><a href="#Backtick_(%60)_and_Tilde_(~)"><span class="tocnumber">2.3.2.1</span> <span class="toctext">Backtick (`) and Tilde (~)</span></a></li>
<li class="toclevel-4 tocsection-11"><a href="#Home_and_End"><span class="tocnumber">2.3.2.2</span> <span class="toctext">Home and End</span></a></li>
<li class="toclevel-4 tocsection-12"><a href="#BackSpace_and_Delete"><span class="tocnumber">2.3.2.3</span> <span class="toctext">BackSpace and Delete</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2 tocsection-13">
<a href="#Trackpad"><span class="tocnumber">2.4</span> <span class="toctext">Trackpad</span></a>
<ul>
<li class="toclevel-3 tocsection-14"><a href="#Lock-ups_on_click"><span class="tocnumber">2.4.1</span> <span class="toctext">Lock-ups on click</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#Tweaking_trackpad_behavior"><span class="tocnumber">2.4.2</span> <span class="toctext">Tweaking trackpad behavior</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="#Touchpad_not_working_after_wake_up_from_sleep"><span class="tocnumber">2.4.3</span> <span class="toctext">Touchpad not working after wake up from sleep</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-17">
<a href="#Keyboard_backlight"><span class="tocnumber">2.5</span> <span class="toctext">Keyboard backlight</span></a>
<ul>
<li class="toclevel-3 tocsection-18"><a href="#Automatically_turn_on_backlight_when_typing"><span class="tocnumber">2.5.1</span> <span class="toctext">Automatically turn on backlight when typing</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-19"><a href="#Audio"><span class="tocnumber">2.6</span> <span class="toctext">Audio</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Processor"><span class="tocnumber">2.7</span> <span class="toctext">Processor</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#BIOS_UPDATE"><span class="tocnumber">2.8</span> <span class="toctext">BIOS UPDATE</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#Add_ALSA-Preamplifier"><span class="tocnumber">2.9</span> <span class="toctext">Add ALSA-Preamplifier</span></a></li>
<li class="toclevel-2 tocsection-23">
<a href="#Network"><span class="tocnumber">2.10</span> <span class="toctext">Network</span></a>
<ul>
<li class="toclevel-3 tocsection-24"><a href="#Wired"><span class="tocnumber">2.10.1</span> <span class="toctext">Wired</span></a></li>
<li class="toclevel-3 tocsection-25"><a href="#Wireless"><span class="tocnumber">2.10.2</span> <span class="toctext">Wireless</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-26">
<a href="#Display"><span class="tocnumber">2.11</span> <span class="toctext">Display</span></a>
<ul>
<li class="toclevel-3 tocsection-27"><a href="#Touchscreen"><span class="tocnumber">2.11.1</span> <span class="toctext">Touchscreen</span></a></li>
<li class="toclevel-3 tocsection-28"><a href="#GPU"><span class="tocnumber">2.11.2</span> <span class="toctext">GPU</span></a></li>
<li class="toclevel-3 tocsection-29"><a href="#HiDPI"><span class="tocnumber">2.11.3</span> <span class="toctext">HiDPI</span></a></li>
<li class="toclevel-3 tocsection-30"><a href="#Xbindkeys"><span class="tocnumber">2.11.4</span> <span class="toctext">Xbindkeys</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-31"><a href="#KMS"><span class="tocnumber">2.12</span> <span class="toctext">KMS</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#Webcam"><span class="tocnumber">2.13</span> <span class="toctext">Webcam</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#Fingerprint_Reader"><span class="tocnumber">2.14</span> <span class="toctext">Fingerprint Reader</span></a></li>
<li class="toclevel-2 tocsection-34"><a href="#WWAN_(Mobile_broadband)"><span class="tocnumber">2.15</span> <span class="toctext">WWAN (Mobile broadband)</span></a></li>
<li class="toclevel-2 tocsection-35"><a href="#GPS"><span class="tocnumber">2.16</span> <span class="toctext">GPS</span></a></li>
<li class="toclevel-2 tocsection-36"><a href="#Bluetooth"><span class="tocnumber">2.17</span> <span class="toctext">Bluetooth</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-37">
<a href="#Other_hardware"><span class="tocnumber">3</span> <span class="toctext">Other hardware</span></a>
<ul>
<li class="toclevel-2 tocsection-38">
<a href="#Docking"><span class="tocnumber">3.1</span> <span class="toctext">Docking</span></a>
<ul>
<li class="toclevel-3 tocsection-39"><a href="#Audio_2"><span class="tocnumber">3.1.1</span> <span class="toctext">Audio</span></a></li>
<li class="toclevel-3 tocsection-40"><a href="#Video"><span class="tocnumber">3.1.2</span> <span class="toctext">Video</span></a></li>
<li class="toclevel-3 tocsection-41"><a href="#Other_ports"><span class="tocnumber">3.1.3</span> <span class="toctext">Other ports</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Model_description">Model description</span></h2>
<p>Lenovo ThinkPad X1 Carbon, Gen 2 (X1C).
Comes without optical drive. There is also a touch version.
Has UEFI BIOS with BIOS-legacy fallback mode.
</p>
<p>To ensure you have this version, try running <i>dmidecode</i>:
</p>
<pre># dmidecode -t system | grep Version
Version: ThinkPad X1 Carbon 2nd
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong>  A great resource for thinkpads is <a rel="nofollow" class="external free" href="https://www.thinkwiki.org/wiki/ThinkWiki">https://www.thinkwiki.org/wiki/ThinkWiki</a>
</div>
<h3><span class="mw-headline" id="Legacy-BIOS">Legacy-BIOS</span></h3>
<div class="noprint archwiki-template-message">
<p><a href="/title/File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a><b>This article or section needs expansion.</b><a href="/title/File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> TODO (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/title/Talk:Lenovo_ThinkPad_X1_Carbon_(Gen_2)">Talk:Lenovo ThinkPad X1 Carbon (Gen 2)#</a>)</div>
</div>
<h3><span class="mw-headline" id="UEFI">UEFI</span></h3>
<p>To manually install using <code>efibootmgr</code> (see <a href="/title/Unified_Extensible_Firmware_Interface#efibootmgr" title="Unified Extensible Firmware Interface">Unified Extensible Firmware Interface#efibootmgr</a>), you can run this:
</p>
<pre># efibootmgr -c -d /dev/sda -p 1 -l /EFI/arch_grub/grubx64.efi -L "Arch"
</pre>
<p>This assumes that you are using <a href="/title/GRUB" title="GRUB">GRUB</a> with /dev/sda1 as your ESP. If you are using a different partition change the arguments to <code>-d</code> and <code>-p</code> arguments. 
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<p>This may not work from the <a href="/title/Archiso" title="Archiso">Archiso</a> image, in which case you will need to use the EFI shell built into the archiso image.
</p>
<p>Reboot the computer and drop into the EFI shell at the menu, then run these commands:
</p>
<pre>&gt; bcfg boot add 0 fs0:\EFI\arch_grub\grubx64.efi "Arch"
</pre>
<p>Make sure you are using the correct disk (<code>fs0</code>) and bootloader location (<code>\EFI\arch_grub\grubx64.efi</code>).
</p>
</div>
<h2><span class="mw-headline" id="Hardware">Hardware</span></h2>
<p>Almost everything works out of the box. Most of the hardware is based on the Intel Lynx Point reference design.
</p>
<h3><span class="mw-headline" id="Power_Management">Power Management</span></h3>
<p>The <a href="/title/Kernel_module" title="Kernel module">kernel module</a> <code>thinkpad_acpi</code> picks up most of the sensors. The kernel module <code>tp_smapi</code> is not currently supported. PCIe ASPM does not currently work.
</p>
<p><a href="/title/Udev" title="Udev">Udev</a> does not not notify whenever battery discharges by 1%, but it does notify at 80%, 20%, 5%, 4% and 0%.  To take advantage of this, see (Suspend On Low Battery <a href="/title/Laptop#Hibernate_on_low_battery_level" title="Laptop">Laptop#Hibernate on low battery level</a>)
</p>
<h3><span class="mw-headline" id="Wake_From_Suspend">Wake From Suspend</span></h3>
<p>Wake from suspend can be buggy with earlier versions of the bios, see:
<a rel="nofollow" class="external autonumber" href="http://linux-thinkpad.10952.n7.nabble.com/Gen-2-Haswell-X1-Carbon-suspend-to-RAM-hang-td21039.html">[1]</a>
</p>
<p>This can be solved by flashing the bios to a version &gt;=1.13. Look here for Lenovo's bios versions:
<a rel="nofollow" class="external autonumber" href="https://support.lenovo.com/en_GB/downloads/detail.page?DocID=DS039783">[2]</a>
</p>
<p>A guide how to make a bootable BIOS key drive can be found here:
<a rel="nofollow" class="external autonumber" href="http://positon.org/lenovo-thinkpad-bios-update-with-linux-and-usb">[3]</a>
</p>
<p>And some fairly old help from Lenovo here:
<a rel="nofollow" class="external autonumber" href="https://www.thinkwiki.org/wiki/BIOS_Upgrade#Using_grub4dos_.28also_for_Linux.29">[4]</a>
</p>
<p>If the function keys fail to wake after suspend, ensure you have a kernel version &gt;=3.15.
</p>
<p>If you build your own kernels, make sure to either enable <a href="/title/TPM" class="mw-redirect" title="TPM">TPM</a> (Trusted Platform Module) drivers or disable the Security Chip in the BIOS.
</p>
<h3><span class="mw-headline" id="Keyboard">Keyboard</span></h3>
<p>On kernel 3.14 and lower the adaptive panel at the top of the keyboard is locked to function mode.
</p>
<p>From kernel 3.15, Home mode is also available which allows access to screen brightness and other controls.
</p>
<p>If you wish to remap keys to get back to a sane keyboard layout, you can use either xmodmap or xkb.  The difference is largely user preference.
</p>
<h4><span class="mw-headline" id="Remapping_keys_using_xmodmap">Remapping keys using xmodmap</span></h4>
<p>To get the tilde key back to a sane location on the keyboard you can use xmodmap <a href="/title/Xmodmap" title="Xmodmap">Xmodmap</a> to remap Shift-Esc to '~'.
Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xorg-xmodmap">xorg-xmodmap</a></span> and generate a custom key map:
</p>
<pre>$ xmodmap -pke &gt; ~/.Xmodmap
</pre>
<p>Then edit your key map:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.Xmodmap</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
keycode   9 = Escape asciitilde Escape
...
</pre>
<p>Make sure xmodmap loads your new keymap on login:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.xinitrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
if [ -s ~/.Xmodmap ]; then
       xmodmap ~/.Xmodmap
fi
...
</pre>
<h4><span class="mw-headline" id="Remapping_keys_using_xkb">Remapping keys using xkb</span></h4>
<div class="noprint archwiki-template-message">
<p><a href="/title/File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a><b>The factual accuracy of this article or section is disputed.</b><a href="/title/File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> This is not the intended usage of <a href="/title/XKB" class="mw-redirect" title="XKB">XKB</a>, these changes will be lost on every update of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xkeyboard-config">xkeyboard-config</a></span> package which owns the files. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/title/Talk:Lenovo_ThinkPad_X1_Carbon_(Gen_2)">Talk:Lenovo ThinkPad X1 Carbon (Gen 2)#</a>)</div>
</div>
<h5>
<span id="Backtick_.28.60.29_and_Tilde_.28.7E.29"></span><span class="mw-headline" id="Backtick_(`)_and_Tilde_(~)">Backtick (`) and Tilde (~)</span>
</h5>
<p>To get the backtick/tilde back to a normal location, add the following definition for the Escape button:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/share/X11/xkb/symbols/pc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">key &lt;ESC&gt;  { [ grave, asciitilde ] };
</pre>
<h5><span class="mw-headline" id="Home_and_End">Home and End</span></h5>
<p>You may also wish to remap the 'Home' and 'End' button back to Caps Lock, or Escape.  Change the lines for HOME and END as follows:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/share/X11/xkb/symbols/pc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">key &lt;HOME&gt; { [ Caps_Lock ] };
key  &lt;END&gt; { [ Caps_Lock ] };
</pre>
<p>or to make 'Home' and 'End' be Escape:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/share/X11/xkb/symbols/pc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">key &lt;HOME&gt; { [ Escape ] };
key  &lt;END&gt; { [ Escape ] };
</pre>
<h5><span class="mw-headline" id="BackSpace_and_Delete">BackSpace and Delete</span></h5>
<p>If you find yourself accidentally hitting the delete key instead of backspace, you may wish to make both backspace and delete be 'BackSpace', while functioning as 'Delete' when you hold down shift:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/share/X11/xkb/symbols/pc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">key &lt;BKSP&gt; { [ BackSpace, Delete ] };
key &lt;DELE&gt; { [ BackSpace, Delete ] };
</pre>
<h3><span class="mw-headline" id="Trackpad">Trackpad</span></h3>
<p>To enable Trackpad support you need to install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-input-synaptics">xf86-input-synaptics</a></span>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> the above did the opposite for me. When both <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-input-synaptics">xf86-input-synaptics</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-input-libinput">xf86-input-libinput</a></span> are installed, the trackpoint (red thingy) uses libinput by default, so it does not cooperate with the trackpad (which by default is driven by synaptics), and as a result you cannot scroll with middle button + trackpoint. Keeping only <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-input-libinput">xf86-input-libinput</a></span> got everything working.</div>
<h4><span class="mw-headline" id="Lock-ups_on_click">Lock-ups on click</span></h4>
<p>There are significant issues with the trackpad locking up on click. This is due to the trackpad operating in buggy PS/2 mode.
</p>
<p>One alternative is to abandon the trackpad completely and use the trackpoint.  Make sure xf86-input-synaptics is not installed - the trackpad will still register button one mouse clicks.  Using xbindkeys <a href="/title/Xbindkeys" title="Xbindkeys">Xbindkeys</a> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xdotool">xdotool</a></span>, right button clicks can be mapped to some other event.  For example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.xbindkeysrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Emit a right click on Alt + trackpad click
"xdotool click 3"
  Mod1 + b:1 + Release
</pre>
<h4><span class="mw-headline" id="Tweaking_trackpad_behavior">Tweaking trackpad behavior</span></h4>
<p>The behavior of the trackpad by default can be contrary to your expectations, particularly if you are coming from an OS X style trackpad.  The following settings can help significantly:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/99-x1carbon.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Copy this to /etc/X11/xorg.conf.d/99-x1carbon.conf
 Section "InputClass"
     Identifier "X1 carbon stuff"
     MatchIsTouchpad "on"
     MatchDevicePath "/dev/input/event*"
     Driver "synaptics"

     # Enable two finger scrolling vertically, disable horizontally
     Option "VertTwoFingerScroll" "1"
     Option "HorizTwoFingerScroll" "0"

     # No scrolling along the edge
     Option "VertEdgeScroll" "0"
     Option "HorizEdgeScroll" "0"

     Option "LockedDrags" "0"
     Option "FingerPress" "1"

     # Turn off the blasted corners as buttons
     Option "RTCornerButton" "0"
     Option "RBCornerButton" "0"
     Option "LTCornerButton" "0"
     Option "LBCornerButton" "0"

     # Ignore "taps" and listen for "clicks"
     Option "TapButton1" "0"
     Option "TapButton2" "0"
     Option "TapButton3" "0"
     Option "ClickFinger1" "1" # Left click one finger
     Option "ClickFinger2" "3" # Right click two fingers
     Option "ClickFinger3" "0" # Three finger click disabled

     Option "TapAndDragGesture" "0"

     # No circular scrolling
     Option "CircularScrolling" "0"
 EndSection
</pre>
<p>If you are using gnome-shell, you may need to tell the settings app not to overwrite our changes:
</p>
<pre>gsettings set org.gnome.settings-daemon.plugins.mouse active false
</pre>
<h4><span class="mw-headline" id="Touchpad_not_working_after_wake_up_from_sleep">Touchpad not working after wake up from sleep</span></h4>
<p>See here:  
<a href="/title/Touchpad_Synaptics#Touchpad_does_not_work_after_resuming_from_hibernate/suspend" title="Touchpad Synaptics">Touchpad Synaptics#Touchpad does not work after resuming from hibernate/suspend</a>
</p>
<h3><span class="mw-headline" id="Keyboard_backlight">Keyboard backlight</span></h3>
<p>Works out of the box. there is a button on the soft keyboard to toggle it between off, low, and high brightness.
</p>
<h4><span class="mw-headline" id="Automatically_turn_on_backlight_when_typing">Automatically turn on backlight when typing</span></h4>
<p>Using a c program that continuously checks for keyboard input, it is possible to activate the backlight for a certain time.
The program source is as a follows
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">kbdbacklight.c</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/* Original Author: Howard Chu &lt;hyc@symas.com&gt; 2013-01-15
 *
 * compile as "gcc -O2 -o kbdbacklight kbdbacklight.c" and run it in the background, or arrange to have it run at bootup.
 *
 * adapted by gabtub@gmail.com 2017-01-22
 * using https://gist.github.com/hadess/6847281
 * based on http://askubuntu.com/questions/383501/enable-the-keyboard-backlights-on-supported-lenovo-e-g-carbon-x1-with-command
 * original code found at  http://forum.notebookreview.com/threads/asus-keyboard-backlight-controller.703985/
 * sigterm catching done as shown in https://airtower.wordpress.com/2010/06/16/catch-sigterm-exit-gracefully/
 *
 * monitor keyboard activity and toggle keyboard backlight
 */
#include &lt;sys/types.h&gt;
#include &lt;sys/stat.h&gt;
#include &lt;fcntl.h&gt;
#include &lt;poll.h&gt;
#include &lt;unistd.h&gt;
#include &lt;signal.h&gt;
#include &lt;string.h&gt;

static char dummybuf[8192];

/** @brief How many milliseconds before turning off kbd light */
#ifndef IDLE_MSEC
#define IDLE_MSEC	5000
#endif

#ifndef BRGHT_OFF
#define BRGHT_OFF	3
#endif
#ifndef BRGHT_MED
#define BRGHT_MED 67
#endif
#ifndef BRGHT_MAX
#define BRGHT_MAX 131
#endif

volatile sig_atomic_t running = 1;

void term(int signum)
{
    // sigterm == 15
    running = 0;
}

int main(int argc, char *argv[])
{
  struct sigaction action;
  struct pollfd pfd;
  int rc, blfd;
  int timeout, prev = -1;
  /* possible brightness levels for x1
   * - 3		off
   * - 67	medium
   * - 131	max
   */
  char bm[1];
  bm[0] = BRGHT_MED;

  memset(&amp;action, 0, sizeof(struct sigaction));
  action.sa_handler = term;
  sigaction(SIGTERM, &amp;action, NULL);

  // potentially needs
  // sudo modprobe -r ec_sys
  // sudo modprobe ec_sys write_support=1
  blfd = open("/sys/kernel/debug/ec/ec0/io", O_WRONLY);
  // needs the event bound to the keyboard
  // for Xorg ie find using
  //  cat /var/log/Xorg.0.log | grep "keyboard.*event"
  pfd.fd = open("/dev/input/event4", O_RDONLY);
  pfd.events = POLLIN;
  timeout = IDLE_MSEC;

  while (running) {
    rc = poll(&amp;pfd, 1, timeout);
    if (rc) {
      /* got keyboard input, flush it all and
       * wait for the next event.
       */
      read(pfd.fd, dummybuf, sizeof(dummybuf));
      timeout = IDLE_MSEC;
      bm[0] = BRGHT_MED;
    } else {
      /* once we've gotten a timeout, turn off
       * kbd backlight and wait forever for
       * the next keypress
       */
      timeout = -1;
      bm[0] = BRGHT_OFF;
    }
    if (bm[0] == prev)
      continue;
    lseek(blfd, 13, SEEK_SET);
    write(blfd, bm, 1);
    prev = bm[0];
  }
  // clean up after sigterm
  bm[0] = BRGHT_OFF;
  lseek(blfd, 13, SEEK_SET);
  write(blfd, bm, 1);
}
</pre>
<p>This file can be compiled with:
</p>
<pre> gcc -O2 -o kbdbacklight kbdbacklight.c
</pre>
<p>and must be executed as root. Furthermore, following kernel modules must be loaded for this to work:
</p>
<pre> modprobe -r ec_sys
 modprobe ec_sys write_support=1
</pre>
<p>It would be possible to autostart this by creating a systemd service as follows:
</p>
<ul>
<li>Create a folder /usr/local/customscripts/kbdbacklight/</li>
<li>Save the compiled c program to /usr/local/customscripts/kbdbacklight/kbdbacklight</li>
<li>Create the following bash script in the same folder:</li>
</ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/local/customscripts/kbdbacklight/kbdbacklight.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/bash
# must be executed as root
modprobe -r ec_sys
modprobe ec_sys write_support=1
./kbdbacklight &amp;
RETVAL=$?
PID=$!
[ $RETVAL -eq 0 ] &amp;&amp; echo $PID &gt; /usr/local/customscripts/kbdbacklight/pid
</pre>
<ul><li>Create the following systemd service and place it in /etc/systemd/system/kbdbacklight.service</li></ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/kbdbacklight.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/bash
[Unit]
Description=starts a daemon monitoring keyboard usage. will turn on keyboard backlight until no key is pressed for a TIMEOUT period
Requires=
After=

[Service]
Type=forking
User=root
WorkingDirectory=/usr/local/customscripts/kbdbacklight/
ExecStart=/usr/local/customscripts/kbdbacklight/kbdbacklight.sh &amp;
PIDFile=/usr/local/customscripts/kbdbacklight/pid

[Install]
WantedBy=multi-user.target
</pre>
<ul><li>activate the service with</li></ul>
<pre> systemctl enable kbdbacklight
 systemctl start kbdbacklight
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<p>Specifiy the amount timeout for turning the backlight off again by adjusting the constant IDLE_MSEC in the c program. (and recompiling it again)
</p>
</div>
<h3><span class="mw-headline" id="Audio">Audio</span></h3>
<p>Sound works out of the box. Uses the snd_hda_intel kernel module.
You may need to add default sound card options to the module.
</p>
<p>In /etc/modprobe.d/alsa-base.conf include the following line:
</p>
<p>options snd_hda_intel index=1
</p>
<h3><span class="mw-headline" id="Processor">Processor</span></h3>
<p>See <a href="/title/Microcode" title="Microcode">Microcode</a> how to update to processor's microcode.
</p>
<h3><span class="mw-headline" id="BIOS_UPDATE">BIOS UPDATE</span></h3>
<p>To install a BIOS update from linux, download the bootable iso from here:
</p>
<pre><a rel="nofollow" class="external free" href="https://pcsupport.lenovo.com/fi/en/products/LAPTOPS-AND-NETBOOKS/THINKPAD-X-SERIES-LAPTOPS/THINKPAD-X1-CARBON-TYPE-20A7-20A8/downloads/DS039783">https://pcsupport.lenovo.com/fi/en/products/LAPTOPS-AND-NETBOOKS/THINKPAD-X-SERIES-LAPTOPS/THINKPAD-X1-CARBON-TYPE-20A7-20A8/downloads/DS039783</a>
</pre>
<p>Since there is no CD drive, this method can be used (German):
</p>
<pre><a rel="nofollow" class="external free" href="https://thinkwiki.de/BIOS-Update_ohne_optisches_Laufwerk_unter_Linux#El_Torito_Image_auf_USB-Stick_.28nur_UEFI.29">https://thinkwiki.de/BIOS-Update_ohne_optisches_Laufwerk_unter_Linux#El_Torito_Image_auf_USB-Stick_.28nur_UEFI.29</a>
</pre>
<h3><span class="mw-headline" id="Add_ALSA-Preamplifier">Add ALSA-Preamplifier</span></h3>
<p>It is a common problem on laptops running linux that the sound, even on maximum, is not loud enough. This can be fixed by adding an ALSA preamplifier.
</p>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=alsa-utils">alsa-utils</a></span>.
</p>
<p>Change the config in /etc/asound.conf to the following ( you might have to adjust the cardnumber):
</p>
<pre># Set your DEFAULT device to the softvol plug-in
# NOT to a hardware card device
#
# The "!" means completely override the previous default
# Not just changing/adding to it.
pcm.!default {
  type plug
  slave.pcm "softvol"
}

# Configure softvol
pcm.softvol {
  type softvol

  # Send softvol's output to dmix
  slave {
    pcm "dmix"
    # If you wanted to you could send the output to a card directly
    # But in most cases it's better to send it to dmix and let
    # dmix handle where to send it. You can add a whole extra section
    # to configure dmix and where it sends output, but I'm
    # not covering that here.

    ## Use Card 0 Device 0 instead of dmix
    # pcm "hw:0,0"
    ## Use Card 2 Device 0 instead of dmix
    # pcm "hw:2,0"
  }

  # Add a control slider in your mixer interfaces
  # i.e. KMix and alsamixer
  control {
    name "Pre-Amp"
    card 0 #&lt;CardNumberYouWantControlToShowOn&gt; i.e. card 0 or card 2
  }

  # Minimum dB when slider is at 0%
  min_dB -5.0

  # Maximum DB when slider is at 100%
  max_dB 40.0

  # How many levels the slider should go through
  # i.e. how granular do you want your control to be
  resolution 12
}

</pre>
<p>Taken from <a rel="nofollow" class="external text" href="https://web.archive.org/web/20160316004932/http://blog.tpa.me.uk/2013/10/23/alsa-pre-amp-volume-boost-the-simple-explanation/">here</a>.
<b>WARNING:</b> It is possible to permanently damage your loudspeakers if you turn it up too much!
</p>
<h3><span class="mw-headline" id="Network">Network</span></h3>
<h4><span class="mw-headline" id="Wired">Wired</span></h4>
<p>There is a small port on the right side for Ethernet. An adaptor is required. In case of loss of the adaptor, the part number is for ordering is 04X6435.
</p>
<h4><span class="mw-headline" id="Wireless">Wireless</span></h4>
<p>Works out of the box. The module <code>iwlwifi</code> should be automatically loaded by <a href="/title/Udev" title="Udev">udev</a>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ lspci</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Network controller: Intel Corporation Wireless 7260 (rev 83)
</pre>
<h3><span class="mw-headline" id="Display">Display</span></h3>
<h4><span class="mw-headline" id="Touchscreen">Touchscreen</span></h4>
<p>Works out of the box as single touch. The hardware is multitouch, but current stable drivers only support left-click mouse emulation. Seems to work with <a href="/title/Touchegg" title="Touchegg">Touchegg</a>.
</p>
<h4><span class="mw-headline" id="GPU">GPU</span></h4>
<p>The video card installed is an integrated Intel Haswell GPU. See <a href="/title/Intel" class="mw-redirect" title="Intel">intel</a> for more info.
</p>
<h4><span class="mw-headline" id="HiDPI">HiDPI</span></h4>
<p>Since the display has such a high pixel density, you might encounter problems. See here: <a href="/title/HiDPI" title="HiDPI">HiDPI</a>
</p>
<h4><span class="mw-headline" id="Xbindkeys">Xbindkeys</span></h4>
<p>For alternative window managers (Fluxbox, etc..), try installing <a href="/title/Xbindkeys" title="Xbindkeys">xbindkeys</a> and adding the following to <code>~/.xbindkeysrc</code>
</p>
<pre>"xbacklight -dec 5"
  XF86MonBrightnessDown
"xbacklight -inc 5"
  XF86MonBrightnessUp
</pre>
<h3><span class="mw-headline" id="KMS">KMS</span></h3>
<p>Get <a href="/title/KMS" class="mw-redirect" title="KMS">KMS</a> working by adding i915 to the modules line
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/mkinitcpio.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">MODULES="i915"</pre>
<p>Then regenerate your <a href="/title/Initramfs" class="mw-redirect" title="Initramfs">initramfs</a>:
</p>
<pre># mkinitcpio -p linux
</pre>
<h3><span class="mw-headline" id="Webcam">Webcam</span></h3>
<p>Works out of the box.
</p>
<h3><span class="mw-headline" id="Fingerprint_Reader">Fingerprint Reader</span></h3>
<p>The fingerprint reader is a Validity Sensors model (138a:0017) also used on the Thinkpad X240 and T440.  ThinkFinger does NOT support this reader.
</p>
<p>This fingerprint reader works with the current release of <a href="/title/Fprint" title="Fprint">fprint</a>.
</p>
<h3>
<span id="WWAN_.28Mobile_broadband.29"></span><span class="mw-headline" id="WWAN_(Mobile_broadband)">WWAN (Mobile broadband)</span>
</h3>
<p>The SIM-card must be inserted in the back of the laptop.
</p>
<p>This is usually a Sierra Wireless EM7345. It uses the cdc_mbim kernel module from kernel 3.14 forward. Since Gnome 3.14.1 it works with NetworkManager after installing modemmanager (after a reboot to catch the udev event).
</p>
<h3><span class="mw-headline" id="GPS">GPS</span></h3>
<p>This is provided by the Sierra Wireless EM7345. mbim_gpsd is required as well as a udev rule.
</p>
<p>Untested
</p>
<h3><span class="mw-headline" id="Bluetooth">Bluetooth</span></h3>
<p>Works out of the box after enabling bluetooth.service.
</p>
<h2><span class="mw-headline" id="Other_hardware">Other hardware</span></h2>
<h3><span class="mw-headline" id="Docking">Docking</span></h3>
<p>This model comes with a OneLink dock port, next to the power adaptor. Out of the box, it is covered with a rubber cap that can be removed easily. Tested with OneLink Pro dock.
</p>
<p>Since Kernel 4.12 the touchpad and mousenipple stops working when the notebook is disconnected from the Dockingstation. A temporary solution is to reload the mouse kernel module:
</p>
<pre>$ rmmod psmouse &amp;&amp; modprobe psmouse
</pre>
<h4><span class="mw-headline" id="Audio_2">Audio</span></h4>
<p>Audio works out of the box, but presents as a separate sound card.
</p>
<h4><span class="mw-headline" id="Video">Video</span></h4>
<p>The dock has DisplayPort and DVI on the back, and either work, but only one at a time. Second external monitor can still be connected to the mini-DisplayPort directly on the laptop.
</p>
<h4><span class="mw-headline" id="Other_ports">Other ports</span></h4>
<p>All other ports on the dock work as expected.
</p>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="/title/Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="/title/Category:Lenovo" title="Category:Lenovo">Lenovo</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="/title/Category:Pages_or_sections_flagged_with_Template:Laptop_style" title="Category:Pages or sections flagged with Template:Laptop style">Pages or sections flagged with Template:Laptop style</a></li>
<li><a href="/title/Category:Pages_or_sections_flagged_with_Template:Expansion" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li>
<li><a href="/title/Category:Pages_or_sections_flagged_with_Template:Accuracy" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Lenovo_ThinkPad_X1_Carbon_(Gen_2)&amp;oldid=668968">https://wiki.archlinux.org/index.php?title=Lenovo_ThinkPad_X1_Carbon_(Gen_2)&amp;oldid=668968</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 8 May 2021, at 10:58.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="/title/ArchWiki:Privacy_policy" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="/title/ArchWiki:About" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="/title/ArchWiki:General_disclaimer" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
