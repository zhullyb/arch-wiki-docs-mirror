<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Dell XPS 13 (9310) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Dell_XPS_13_9310 rootpage-Dell_XPS_13_9310 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Dell XPS 13 (9310)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a><b>This article or section does not follow the <a href="../en/Help:Laptop_page_guidelines.html" title="Help:Laptop page guidelines">Laptop page guidelines</a>.</b><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Misses some sections, hardware table needs adjustments (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Dell_XPS_13_(9310)">Talk:Dell XPS 13 (9310)#</a>)</div>
</div>
<table class="wikitable" style="float: right;">
<tbody>
<tr>
<td><b>Device</b></td>
<td><b>Status</b></td>
<td>
<b>Modules</b>
</td>
</tr>
<tr>
<td>Video</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>i915
</td>
</tr>
<tr>
<td>Wireless (AX500)</td>
<td data-sort-value="2" style="background: #fda; color: inherit; vertical-align: middle; text-align: center;">Unstable</td>
<td>ath11k
</td>
</tr>
<tr>
<td>Wireless (AX201)</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>iwlwifi
</td>
</tr>
<tr>
<td>Bluetooth</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>btusb
</td>
</tr>
<tr>
<td>Audio</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>snd_hda_intel
</td>
</tr>
<tr>
<td>Touchpad</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>hid_multitouch
</td>
</tr>
<tr>
<td>Webcam</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>uvcvideo
</td>
</tr>
<tr>
<td>Infrared Webcam</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>uvcvideo
</td>
</tr>
<tr>
<td>Infrared Camera Authentication</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>?
</td>
</tr>
<tr>
<td>USB-C / Thunderbolt 4</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>intel_wmi_thunderbolt
</td>
</tr>
<tr>
<td>Wireless switch</td>
<td>?</td>
<td>intel_hid
</td>
</tr>
<tr>
<td>Function/Multimedia Keys</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>?
</td>
</tr>
<tr>
<td>Fingerprint sensor</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>?
</td>
</tr>
<tr>
<td>Ambient light sensor</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>iio
</td>
</tr>
</tbody>
</table>
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../en/Dell_XPS_13_(9300).html" title="Dell XPS 13 (9300)">Dell XPS 13 (9300)</a></li>
<li><a href="../en/Dell_XPS_13_(9333).html" title="Dell XPS 13 (9333)">Dell XPS 13 (9333)</a></li>
<li><a href="../en/Dell_XPS_13_(9343).html" title="Dell XPS 13 (9343)">Dell XPS 13 (9343)</a></li>
<li><a href="../en/Dell_XPS_13_(9350).html" title="Dell XPS 13 (9350)">Dell XPS 13 (9350)</a></li>
<li><a href="../en/Dell_XPS_13_(9360).html" title="Dell XPS 13 (9360)">Dell XPS 13 (9360)</a></li>
<li><a href="../en/Dell_XPS_13_(9370).html" title="Dell XPS 13 (9370)">Dell XPS 13 (9370)</a></li>
<li><a href="../en/Dell_XPS_13_2-in-1_(9365).html" title="Dell XPS 13 2-in-1 (9365)">Dell XPS 13 2-in-1 (9365)</a></li>
</ul>
</div>
<p>Dell XPS late 2020 edition.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Audio"><span class="tocnumber">1</span> <span class="toctext">Audio</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Wifi"><span class="tocnumber">2</span> <span class="toctext">Wifi</span></a>
<ul>
<li class="toclevel-2 tocsection-3">
<a href="#AX500"><span class="tocnumber">2.1</span> <span class="toctext">AX500</span></a>
<ul>
<li class="toclevel-3 tocsection-4"><a href="#mm/page_alloc_error"><span class="tocnumber">2.1.1</span> <span class="toctext">mm/page_alloc error</span></a></li>
<li class="toclevel-3 tocsection-5"><a href="#Kernel_versions_before_5.10.9"><span class="tocnumber">2.1.2</span> <span class="toctext">Kernel versions before 5.10.9</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#Kernel_5.12.0"><span class="tocnumber">2.1.3</span> <span class="toctext">Kernel 5.12.0</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Fingerprint_sensor"><span class="tocnumber">3</span> <span class="toctext">Fingerprint sensor</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Infrared_camera"><span class="tocnumber">4</span> <span class="toctext">Infrared camera</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Ambient_light_sensor"><span class="tocnumber">5</span> <span class="toctext">Ambient light sensor</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Audio">Audio</span></h2>
<p>Works correctly, requires <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=sof-firmware">sof-firmware</a></span>.
</p>
<h2><span class="mw-headline" id="Wifi">Wifi</span></h2>
<p>There are two possible devices the laptop may ship with, AX201 or AX500. AX201 support is already in the mainline kernel
</p>
<h3><span class="mw-headline" id="AX500">AX500</span></h3>
<p>Since Kernel version 5.10.9, users have reported some success with the Arch stock Kernel (a recent Dell firmware is also required: at least version 1.2.5). Please note, the driver is still experimental. While it's reported to working fine with a 2.4 GHz WPA Personal WiFi network, there might be problems after disconnecting the WiFi or with different setups (WPA3, 5 GHz WiFi).  Your mileage may vary. However, recovery from suspend and hibernate appears to be broken, though it can usually be manually fixed by reloading the <code>ath11k_pci</code> module. For example:
</p>
<pre>$ sudo rmmod ath11k_pci
# wait a couple minutes (yes really) for the operation to complete
$ sudo modprobe ath11k_pci
</pre>
<p>This can be automated via sleep hooks - if the module is unloaded before hibernating or suspending it unloads immediately with no delay, and the resume kernel bug doesn't happen:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/ath11k-suspend.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Suspend: rmmod ath11k_pci
Before=sleep.target

[Service]
Type=simple
ExecStart=/usr/bin/rmmod ath11k_pci

[Install]
WantedBy=sleep.target</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/ath11k-resume.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Resume: modprobe ath11k_pci
After=suspend.target

[Service]
Type=simple
ExecStart=/usr/bin/modprobe ath11k_pci

[Install]
WantedBy=suspend.target</pre>
<p>You need to enable the hooks with <code>systemctl enable /etc/systemd/system/ath11k-suspend.service</code> and <code>systemctl enable /etc/systemd/system/ath11k-resume.service</code>.
</p>
<p>There is also work in progress in the form of qca6390 (the SoC of Killer AX500) driver development in the <a rel="nofollow" class="external text" href="https://git.kernel.org/pub/scm/linux/kernel/git/kvalo/ath.git">kernel.org kvalo/ath repository</a>. Patches based on the <a rel="nofollow" class="external text" href="https://git.kernel.org/pub/scm/linux/kernel/git/kvalo/ath.git/log/?h=ath11k-qca6390-bringup">ath11k-qca6390-bringup branch</a> have been working (with an "experimental" caveat) for a while.
</p>
<h4>
<span id="mm.2Fpage_alloc_error"></span><span class="mw-headline" id="mm/page_alloc_error">mm/page_alloc error</span>
</h4>
<p>You might see the following error in your <code>dmesg</code> log if your WiFi is not working:
</p>
<pre>mm/page_alloc: place pages to tail in __free_pages_core()
</pre>
<p>You can to reserve the memory starting from 20M to fix this error by adding the following parameter to your <a href="../en/Kernel_parameters.html" title="Kernel parameters">Linux kernel cmdline</a>: 
</p>
<pre>memmap=12M$20M</pre>
<p>Details about this problem can be found in the Linux kernel mailing list: <a rel="nofollow" class="external free" href="https://lkml.org/lkml/2020/11/13/397">https://lkml.org/lkml/2020/11/13/397</a>
</p>
<h4><span class="mw-headline" id="Kernel_versions_before_5.10.9">Kernel versions before 5.10.9</span></h4>
<p>Here are the earlier notes on compiling that Kernel:
</p>
<p>You can <a href="../en/Kernel.html#Compilation" title="Kernel">compile the kernel</a> with the <a rel="nofollow" class="external text" href="https://git.kernel.org/pub/scm/linux/kernel/git/kvalo/ath.git/log/?h=ath11k-qca6390-bringup">ath11k-qca6390-bringup branch</a>. The latest change of this branch is based on Linux v5.10 release, it has a work around that disables MHI M2 state and makes QCA6390 usable on 9310.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong>  the driver is still experimental and might cause instability to your system.</div>
<p>Before compiling, make sure to enable ath11k driver from kernel config:
</p>
<pre>make menuconfig
--&gt; Select Device drivers
	--&gt; Network device support
		--&gt; Wireless LAN
			--&gt; Enable as below
				&lt;M&gt; Qualcomm Technologies 11ax chipset support
				&lt;M&gt;       Atheros ath11k PCI support
				[*]       QCA ath11k debugging
				[*]       QCA ath11k debugfs support
				[*]       ath11k tracing support
				[*]     QCA ath11k spectral scan support</pre>
<p><br>
qca6390 also require ath11k firmware, which is available on <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-firmware">linux-firmware</a></span>.
</p>
<p><br>
</p>
<h4><span class="mw-headline" id="Kernel_5.12.0">Kernel 5.12.0</span></h4>
<p>The suspend problem appears to be fixed in 5.12.0, as tested under Fedora rawhide as of 24 February 2021.  Wireless comes up on booting and after resume from suspend out of the box.
</p>
<h2><span class="mw-headline" id="Fingerprint_sensor">Fingerprint sensor</span></h2>
<p>The fingerprint sensor can be used by installing the proprietary Ubuntu driver released by Dell and Goodix. This requires a different fork of libfprint <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/libfprint-tod-git/">libfprint-tod-git</a></span><sup><small>AUR</small></sup> - available on the AUR and built from source <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/3v1n0/libfprint/-/tree/tod">from the upstream repo</a>. This is a newer version intended for use only with touch-based sensors such as the one on the XPS.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> This driver is proprietary, closed source and only distributed in binary form</div>
<p>The proprietary driver can be obtained from the AUR: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/libfprint-2-tod1-xps9300-bin/">libfprint-2-tod1-xps9300-bin</a></span><sup><small>AUR</small></sup>. Alternatively, it can also be manually installed from the <a rel="nofollow" class="external text" href="https://git.launchpad.net/~oem-solutions-engineers/libfprint-2-tod1-goodix/+git/libfprint-2-tod1-goodix/?h=devel">Dell repository</a> by extracting the Debian file and copying its contents.
</p>
<p>The rest of the process is identical to that described on <a href="../en/Fprint.html" title="Fprint">Fprint</a> - just make sure not to install the version of libfprint on the main repo as it conflicts with libfprint-tod
</p>
<h2><span class="mw-headline" id="Infrared_camera">Infrared camera</span></h2>
<p>When the IR camera(/dev/video2) is on, it will not automatically turn on the IR emitter. You can follow the instructions from <a rel="nofollow" class="external text" href="https://github.com/EmixamPP/linux-enable-ir-emitter">linux-enable-ir-emitter</a> to enable the IR emitter.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> You can skip from step 2 to 9 as I have gathered the setup data from those steps, so you don't have to: 
<pre>   Bus 003 Device 003: ID 0c45:672a Microdia Integrated_Webcam_HD
   Setup Data
   bmRequestType: 0x21
   bRequest: 1
   wValue: 0x0600
   wIndex: 1026 (0x0402)
   wLength: 9
   Data Fragment: 010302000000000000
</pre>
<p>You can continue to step 10 with the above data.
</p>
</div>
<p>The infrared camera can be used as an authentication method with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/howdy/">howdy</a></span><sup><small>AUR</small></sup>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> As mentioned in the Howdy documentation, "DO NOT USE HOWDY AS THE SOLE AUTHENTICATION METHOD FOR YOUR SYSTEM."<a rel="nofollow" class="external autonumber" href="https://github.com/boltgolt/howdy#a-note-on-security">[1]</a>
</div>
<p>The configuration file is located at <code>/lib/security/howdy/config.ini</code>. The device should be configured like this: <code>device_path = /dev/video2 </code>.
</p>
<p><br>
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> After installing howdy, you should tweak the configuration file to find the settings that work best for you.
I personally found much better results by increasing <code>dark_threshold</code> all the way to 80 or 90. Please read the config file carefully.</div>
<h2><span class="mw-headline" id="Ambient_light_sensor">Ambient light sensor</span></h2>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=iio-sensor-proxy">iio-sensor-proxy</a></span> to enable automatic brightness in Gnome.
</p>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Dell.html" title="Category:Dell">Dell</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Laptop_style.html" title="Category:Pages or sections flagged with Template:Laptop style">Pages or sections flagged with Template:Laptop style</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Dell_XPS_13_(9310)&amp;oldid=654361">https://wiki.archlinux.org/index.php?title=Dell_XPS_13_(9310)&amp;oldid=654361</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 10 March 2021, at 02:40.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
