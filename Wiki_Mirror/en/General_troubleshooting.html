<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>General troubleshooting - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-General_troubleshooting rootpage-General_troubleshooting skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">General troubleshooting</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="/title/Reporting_bug_guidelines" class="mw-redirect" title="Reporting bug guidelines">Reporting bug guidelines</a></li>
<li><a href="/title/Step-by-step_debugging_guide" class="mw-redirect" title="Step-by-step debugging guide">Step-by-step debugging guide</a></li>
<li><a href="/title/Debug_-_Getting_Traces" title="Debug - Getting Traces">Debug - Getting Traces</a></li>
</ul>
</div>
<p>This article explains some methods for general troubleshooting. For application specific issues, please reference the particular wiki page for that program.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#General_procedures"><span class="tocnumber">1</span> <span class="toctext">General procedures</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Additional_support"><span class="tocnumber">1.1</span> <span class="toctext">Additional support</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-3">
<a href="#Boot_problems"><span class="tocnumber">2</span> <span class="toctext">Boot problems</span></a>
<ul>
<li class="toclevel-2 tocsection-4">
<a href="#Console_messages"><span class="tocnumber">2.1</span> <span class="toctext">Console messages</span></a>
<ul>
<li class="toclevel-3 tocsection-5"><a href="#Flow_control"><span class="tocnumber">2.1.1</span> <span class="toctext">Flow control</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#Debug_output"><span class="tocnumber">2.1.2</span> <span class="toctext">Debug output</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="#netconsole"><span class="tocnumber">2.1.3</span> <span class="toctext">netconsole</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-8"><a href="#Recovery_shells"><span class="tocnumber">2.2</span> <span class="toctext">Recovery shells</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Debugging_kernel_modules"><span class="tocnumber">2.3</span> <span class="toctext">Debugging kernel modules</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Debugging_hardware"><span class="tocnumber">2.4</span> <span class="toctext">Debugging hardware</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11">
<a href="#Kernel_panics"><span class="tocnumber">3</span> <span class="toctext">Kernel panics</span></a>
<ul>
<li class="toclevel-2 tocsection-12">
<a href="#Examine_panic_message"><span class="tocnumber">3.1</span> <span class="toctext">Examine panic message</span></a>
<ul>
<li class="toclevel-3 tocsection-13"><a href="#Example_scenario:_bad_module"><span class="tocnumber">3.1.1</span> <span class="toctext">Example scenario: bad module</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-14"><a href="#Reboot_into_root_shell_and_fix_problem"><span class="tocnumber">3.2</span> <span class="toctext">Reboot into root shell and fix problem</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-15">
<a href="#Package_management"><span class="tocnumber">4</span> <span class="toctext">Package management</span></a>
<ul>
<li class="toclevel-2 tocsection-16"><a href="#Fixing_a_broken_system"><span class="tocnumber">4.1</span> <span class="toctext">Fixing a broken system</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-17">
<a href="#IRC_collaborative_debugging"><span class="tocnumber">5</span> <span class="toctext">IRC collaborative debugging</span></a>
<ul>
<li class="toclevel-2 tocsection-18"><a href="#IRC_usage"><span class="tocnumber">5.1</span> <span class="toctext">IRC usage</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#Output_errors/messages_to_a_file"><span class="tocnumber">5.2</span> <span class="toctext">Output errors/messages to a file</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-20"><a href="#fuser"><span class="tocnumber">6</span> <span class="toctext">fuser</span></a></li>
<li class="toclevel-1 tocsection-21"><a href="#Session_permissions"><span class="tocnumber">7</span> <span class="toctext">Session permissions</span></a></li>
<li class="toclevel-1 tocsection-22"><a href="#Message:_%22error_while_loading_shared_libraries%22"><span class="tocnumber">8</span> <span class="toctext">Message: "error while loading shared libraries"</span></a></li>
<li class="toclevel-1 tocsection-23"><a href="#See_also"><span class="tocnumber">9</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="General_procedures">General procedures</span></h2>
<p>It is crucial to <i>always</i> read any error messages that appear. Sometimes it may be hard, e.g with graphical applications, to get a proper error message.
</p>
<ol>
<li>Run the application in a terminal so it is possible to inspect the output.
<ol>
<li>Increase the verbosity (usually <code>--verbose</code>/<code>-v</code>/<code>-V</code> or <code>--debug</code>/<code>-d</code>) if there is still not enough information to debug.</li>
<li>Sometimes there is no such parameter and it needs to be specified as a directive in the applications' configuration file.</li>
<li>An application may also use log files, which are usually located in <code>/var/log</code>, <code>$HOME/.cache</code> or <code>$HOME/.local</code>
</li>
<li>If there is no way to increase the verbosity, it is always possible to run <a href="/title/Strace" class="mw-redirect" title="Strace">strace</a> and similar.</li>
</ol>
</li>
<li>Check the <a href="/title/Journal" class="mw-redirect" title="Journal">journal</a>. It is possible that an error may also leave traces in the journal, especially if it depends on other applications.
<ol>
<li>
<code>dmesg</code> reads from the kernel ring buffer. This is useful if the disk is for some reason inaccessible but this may also result in incomplete logs because the kernel ring buffer is not infinite in size. Use <code>journalctl</code> if possible.</li>
<li>
<code>journalctl</code> has more filtering options than <code>dmesg</code> and uses human-readable timestamps by default.</li>
</ol>
</li>
<li>It is always recommended to check the relevant issue trackers to see if there are known issues with already existing solutions.
<ol>
<li>Depending on upstreams' choices, there is usually an issue tracker and sometimes also a forum or even e.g an IRC channel.</li>
<li>There is the <a rel="nofollow" class="external text" href="https://bugs.archlinux.org">Arch Linux bugtracker</a>, which should be primarily used for packaging bugs.</li>
</ol>
</li>
</ol>
<h3><span class="mw-headline" id="Additional_support">Additional support</span></h3>
<p>If you require any additional support, you may ask on <a rel="nofollow" class="external text" href="https://bbs.archlinux.org">the forums</a> or on <a href="/title/IRC" class="mw-redirect" title="IRC">IRC</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> <a href="/title/Code_of_conduct#arch-linux-distribution-support-only" class="mw-redirect" title="Code of conduct">Support is provided for Arch Linux ONLY</a> and not <a href="/title/Arch-based_distributions" title="Arch-based distributions">Arch-based distributions</a>.</div>
<p>When asking for support post the <b>complete</b> output/logs, not just what you think are the significant sections. Sources of information include:
</p>
<ul>
<li>Full output of any command involved - do not just select what you think is relevant.</li>
<li>systemd's <a href="/title/Journal" class="mw-redirect" title="Journal">journal</a>.
<ul>
<li>For more extensive output, use the <code>systemd.log_level=debug</code> boot parameter. This will produce a tremendous amount of output, so only enable it if it really needed.</li>
<li>Do not use the <code>-x</code> parameter because this needlessly clutters the output and makes it harder to read.</li>
<li>Use <code>-b</code> unless you need logs from a previous boot. Not specifying this may lead to extremely large pastes and may even be to big for any pastebins.</li>
</ul>
</li>
<li>Relevant configuration files</li>
<li>Drivers involved</li>
<li>Versions of packages involved</li>
<li>Kernel: <code>journalctl -k</code> or <code>dmesg</code> (both with root privileges).</li>
<li>
<a href="/title/Xorg" title="Xorg">Xorg</a>: depending on the setup the <a href="/title/Display_manager" title="Display manager">display manager</a> in use is relevant here, too.
<ul>
<li>
<code>Xorg.log</code> may be located in one of several places: the system journal, <code>/var/log/</code> or <code>$HOME/.local/share/xorg/</code>.</li>
<li>Some display managers like <a href="/title/LightDM" title="LightDM">LightDM</a> may also place the <code>Xorg.log</code> in its own log directory.</li>
</ul>
</li>
<li>
<a href="/title/Pacman" title="Pacman">Pacman</a>: If a recent upgrade broke something, look in <code>/var/log/pacman.log</code>.
<ul><li>It may be useful to use pacmans <code>--debug</code> parameter.</li></ul>
</li>
</ul>
<p>One of the better ways to post this information is to use a <a href="#IRC_collaborative_debugging">pastebin</a>.
</p>
<p>A link will then be output that you can paste to the forum or IRC.
</p>
<p>Additionally, you may wish to review <a rel="nofollow" class="external text" href="https://www.co.kerr.tx.us/it/howtoreport.html">how to properly report issues</a> before asking.
</p>
<h2><span class="mw-headline" id="Boot_problems">Boot problems</span></h2>
<p>When diagnosing boot problems, it is very important to know in which stage the boot fails.
</p>
<ol>
<li>BIOS/Firmware
<ol>
<li>Usually only has very basic tools for debugging.</li>
<li>Make sure <a href="/title/Secure_Boot" class="mw-redirect" title="Secure Boot">Secure Boot</a> is disabled.</li>
</ol>
</li>
<li>
<a href="/title/Bootloader" class="mw-redirect" title="Bootloader">Bootloader</a>
<ol><li>One of the most common thing done here is the changing of kernel parameters.</li></ol>
</li>
<li>
<a href="/title/Initramfs" class="mw-redirect" title="Initramfs">Initramfs</a>
<ol>
<li>Usually provides an emergency shell.</li>
<li>Depending on the hooks chosen, either the dmesg or the journal is available within it.</li>
</ol>
</li>
<li>The actual system
<ol><li>Depending on how badly it is broken, a simple invocation of the <a href="#Recovery_shells">debug shell</a> may suffice here.</li></ol>
</li>
</ol>
<p>Unfortunately, the debugging tools provided by any stage may not be enough to fix the broken component. The <a href="/title/Archiso" title="Archiso">archiso</a> may be used to recover in this case.
</p>
<h3><span class="mw-headline" id="Console_messages">Console messages</span></h3>
<p>After the boot process, the screen is cleared and the login prompt appears, leaving users unable to read init output and error messages. This default behavior may be modified using methods outlined in the sections below.
</p>
<p>Note that regardless of the chosen option, kernel messages can be displayed for inspection after booting by using <code>journalctl -k</code> or <code>dmesg</code>. To display all logs from the current boot use <code>journalctl -b</code>.
</p>
<h4><span class="mw-headline" id="Flow_control">Flow control</span></h4>
<p>This is basic management that applies to most terminal emulators, including virtual consoles (vc):
</p>
<ul>
<li>Press <code>Ctrl+s</code> to pause the output</li>
<li>And <code>Ctrl+q</code> to resume it</li>
</ul>
<p>This pauses not only the output, but also programs which try to print to the terminal, as they will block on the <code>write()</code> calls for as long as the output is paused. If your <i>init</i> appears frozen, make sure the system console is not paused.
</p>
<p>To see error messages which are already displayed, see <a href="/title/Getty#Have_boot_messages_stay_on_tty1" title="Getty">Getty#Have boot messages stay on tty1</a>.
</p>
<h4><span class="mw-headline" id="Debug_output">Debug output</span></h4>
<p>Most kernel messages are hidden during boot. You can see more of these messages by adding different kernel parameters. The simplest ones are:
</p>
<ul>
<li>
<code>debug</code> enables debug messages for both the kernel and <a href="/title/Systemd" title="Systemd">systemd</a>
</li>
<li>
<code>ignore_loglevel</code> forces <i>all</i> kernel messages to be printed</li>
</ul>
<p>Other parameters you can add that might be useful in certain situations are:
</p>
<ul>
<li>
<code>earlyprintk=vga,keep</code> prints kernel messages very early in the boot process, in case the kernel would crash before output is shown. You must change <code>vga</code> to <code>efi</code> for <a href="/title/EFI" class="mw-redirect" title="EFI">EFI</a> systems</li>
<li>
<code>log_buf_len=16M</code> allocates a larger (16 MiB) kernel message buffer, to ensure that debug output is not overwritten</li>
</ul>
<p>There are also a number of separate debug parameters for enabling debugging in specific subsystems e.g. <code>bootmem_debug</code>, <code>sched_debug</code>. Also, <code>initcall_debug</code> can be useful to investigate boot freezes. (Look for calls that did not return.) Check the <a rel="nofollow" class="external text" href="https://www.kernel.org/doc/html/latest/admin-guide/kernel-parameters.html">kernel parameter documentation</a> for specific information.
</p>
<h4><span class="mw-headline" id="netconsole">netconsole</span></h4>
<p><a rel="nofollow" class="external text" href="https://www.kernel.org/doc/html/latest/networking/netconsole.html">netconsole</a> is a kernel module that sends all kernel log messages (i.e. dmesg) over the network to another computer, without involving user space (e.g. syslogd). Name "netconsole" is a misnomer because it is not really a "console", more like a remote logging service.
</p>
<p>It can be used either built-in or as a module. Built-in <i>netconsole</i> initializes immediately after NIC cards and will bring up the specified interface as soon as possible. The module is mainly used for capturing kernel panic output from a headless machine, or in other situations where the user space is no more functional.
</p>
<h3><span class="mw-headline" id="Recovery_shells">Recovery shells</span></h3>
<p>Getting an interactive shell at some stage in the boot process can help you pinpoint exactly where and why something is failing. There are several kernel parameters for doing so, but they all launch a normal shell which you can <code>exit</code> to let the kernel resume what it was doing:
</p>
<ul>
<li>
<code>rescue</code> launches a shell shortly after the root filesystem is remounted read/write</li>
<li>
<code>emergency</code> launches a shell even earlier, before most filesystems are mounted</li>
<li>
<code>init=/bin/sh</code> (as a last resort) changes the init program to a root shell. <code>rescue</code> and <code>emergency</code> both rely on <a href="/title/Systemd" title="Systemd">systemd</a>, but this should work even if <i>systemd</i> is broken</li>
</ul>
<p>Another option is systemd's debug-shell which adds a root shell on <code>tty9</code> (accessible with <code>Ctrl+Alt+F9</code>). It can be enabled by either adding <code>systemd.debug_shell</code> to the <a href="/title/Kernel_parameters" title="Kernel parameters">kernel parameters</a>, or by <a href="/title/Enabling" class="mw-redirect" title="Enabling">enabling</a> <code>debug-shell.service</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Remember to disable the service when done to avoid the security risk of leaving a root shell open on every boot.</div>
<h3><span class="mw-headline" id="Debugging_kernel_modules">Debugging kernel modules</span></h3>
<p>See <a href="/title/Kernel_modules#Obtaining_information" class="mw-redirect" title="Kernel modules">Kernel modules#Obtaining information</a>.
</p>
<h3><span class="mw-headline" id="Debugging_hardware">Debugging hardware</span></h3>
<ul>
<li>You can display extra debugging information about your hardware by following <a href="/title/Udev#Debug_output" title="Udev">udev#Debug output</a>.</li>
<li>Ensure that <a href="/title/Microcode" title="Microcode">Microcode</a> updates are applied on your system.</li>
<li>To test the RAM, see <a href="/title/Stress_testing#Stressing_memory" title="Stress testing">Stress testing#Stressing memory</a>.</li>
</ul>
<h2><span class="mw-headline" id="Kernel_panics">Kernel panics</span></h2>
<p>A <i>kernel panic</i> occurs when the Linux kernel enters an unrecoverable failure state. The state typically originates from buggy hardware drivers resulting in the machine being deadlocked, non-responsive, and requiring a reboot. Just prior to deadlock, a diagnostic message is generated, consisting of: the <i>machine state</i> when the failure occurred, a <i>call trace</i> leading to the kernel function that recognized the failure, and a listing of currently loaded modules. Thankfully, kernel panics do not happen very often using <i>mainline</i> versions of the kernel--such as those supplied by the official repositories--but when they do happen, you need to know how to deal with them.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Kernel panics are sometimes referred to as <i>oops</i> or <i>kernel oops</i>.  While both panics and oops occur as the result of a failure state, an <i>oops</i> is more general in that it does not <i>necessarily</i> result in a deadlocked machine--sometimes the kernel can recover from an oops by killing the offending task and carrying on.</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Pass the kernel parameter <code>oops=panic</code> at boot or write <code>1</code> to <code>/proc/sys/kernel/panic_on_oops</code> to force a recoverable oops to issue a panic instead.  This is advisable if you are concerned about the small chance of system instability resulting from an oops recovery which may make future errors difficult to diagnose.</div>
<h3><span class="mw-headline" id="Examine_panic_message">Examine panic message</span></h3>
<p>If a kernel panic occurs very early in the boot process, you may see a message on the console containing "Kernel panic - not syncing:", but once <a href="/title/Systemd" title="Systemd">Systemd</a> is running, kernel messages will typically be captured and written to the system log. However, when a panic occurs, the diagnostic message output by the kernel is <i>almost never</i> written to the log file on disk because the machine deadlocks before <code>system-journald</code> gets the chance. Therefore, the only way to examine the panic message is to view it on the console as it happens (without resorting to setting up a <i>kdump crashkernel</i>). You can do this by booting with the following kernel parameters and attempting to reproduce the panic on tty1:
</p>
<pre>systemd.journald.forward_to_console=1 console=tty1</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> In the event that the panic message scrolls away too quickly to examine, try passing the kernel parameter <code>pause_on_oops=<i>seconds</i></code> at boot.</div>
<h4><span class="mw-headline" id="Example_scenario:_bad_module">Example scenario: bad module</span></h4>
<p>It is possible to make a best guess as to what subsystem or module is causing the panic using the information in the diagnostic message. In this scenario, we have a panic on some imaginary machine during boot. Pay attention to the lines highlighted in <b>bold</b>:
</p>
<pre><b>kernel: BUG: unable to handle kernel NULL pointer dereference at (null)</b> [1]
<b>kernel: IP: fw_core_init+0x18/0x1000 [firewire_core]</b> [2]
kernel: PGD 718d00067
kernel: P4D 718d00067
kernel: PUD 7b3611067
kernel: PMD 0
kernel:
kernel: Oops: 0002 [#1] PREEMPT SMP
<b>kernel: Modules linked in: firewire_core(+) crc_itu_t cfg80211 rfkill ipt_REJECT nf_reject_ipv4 nf_log_ipv4 nf_log_common xt_LOG nf_conntrack_ipv4 ...</b> [3]
kernel: CPU: 6 PID: 1438 Comm: modprobe Tainted: P           O    4.13.3-1-ARCH #1
kernel: Hardware name: Gigabyte Technology Co., Ltd. H97-D3H/H97-D3H-CF, BIOS F5 06/26/2014
kernel: task: ffff9c667abd9e00 task.stack: ffffb53b8db34000
kernel: RIP: 0010:fw_core_init+0x18/0x1000 [firewire_core]
kernel: RSP: 0018:ffffb53b8db37c68 EFLAGS: 00010246
kernel: RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000000000
kernel: RDX: 0000000000000000 RSI: 0000000000000008 RDI: ffffffffc16d3af4
kernel: RBP: ffffb53b8db37c70 R08: 0000000000000000 R09: ffffffffae113e95
kernel: R10: ffffe93edfdb9680 R11: 0000000000000000 R12: ffffffffc16d9000
kernel: R13: ffff9c6729bf8f60 R14: ffffffffc16d5710 R15: ffff9c6736e55840
kernel: FS:  00007f301fc80b80(0000) GS:ffff9c675dd80000(0000) knlGS:0000000000000000
kernel: CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
kernel: CR2: 0000000000000000 CR3: 00000007c6456000 CR4: 00000000001406e0
kernel: Call Trace:
<b>kernel:  do_one_initcall+0x50/0x190</b> [4]
kernel:  ? do_init_module+0x27/0x1f2
kernel:  do_init_module+0x5f/0x1f2
kernel:  load_module+0x23f3/0x2be0
kernel:  SYSC_init_module+0x16b/0x1a0
kernel:  ? SYSC_init_module+0x16b/0x1a0
kernel:  SyS_init_module+0xe/0x10
kernel:  entry_SYSCALL_64_fastpath+0x1a/0xa5
kernel: RIP: 0033:0x7f301f3a2a0a
kernel: RSP: 002b:00007ffcabbd1998 EFLAGS: 00000246 ORIG_RAX: 00000000000000af
kernel: RAX: ffffffffffffffda RBX: 0000000000c85a48 RCX: 00007f301f3a2a0a
kernel: RDX: 000000000041aada RSI: 000000000001a738 RDI: 00007f301e7eb010
kernel: RBP: 0000000000c8a520 R08: 0000000000000001 R09: 0000000000000085
kernel: R10: 0000000000000000 R11: 0000000000000246 R12: 0000000000c79208
kernel: R13: 0000000000c8b4d8 R14: 00007f301e7fffff R15: 0000000000000030
kernel: Code: &lt;c7&gt; 04 25 00 00 00 00 01 00 00 00 bb f4 ff ff ff e8 73 43 9c ec 48
kernel: RIP: fw_core_init+0x18/0x1000 [firewire_core] RSP: ffffb53b8db37c68
kernel: CR2: 0000000000000000
kernel: ---[ end trace 71f4306ea1238f17 ]---
<b>kernel: Kernel panic - not syncing: Fatal exception</b> [5]
kernel: Kernel Offset: 0x80000000 from 0xffffffff810000000 (relocation range: 0xffffffff800000000-0xfffffffffbffffffff
kernel: ---[ end Kernel panic - not syncing: Fatal exception</pre>
<ul>
<li>[1] Indicates the type of error that caused the panic. In this case it was a programmer bug.</li>
<li>[2] Indicates that the panic happened in a function called <i>fw_core_init</i> in module <i>firewire_core</i>.</li>
<li>[3] Indicates that <i>firewire_core</i> was the latest module to be loaded.</li>
<li>[4] Indicates that the function that called function <i>fw_core_init</i> was <i>do_one_initcall</i>.</li>
<li>[5] Indicates that this <i>oops</i> message is, in fact, a kernel panic and the system is now deadlocked.</li>
</ul>
<p>We can surmise then, that the panic occurred during the initialization routine of module <i>firewire_core</i> as it was loaded.  (We might assume then, that the machine's firewire hardware is incompatible with this version of the firewire driver module due to a programmer error, and will have to wait for a new release.) In the meantime, the easiest way to get the machine running again is to prevent the module from being loaded.  We can do this in one of two ways:
</p>
<ul>
<li>If the module is being loaded during the execution of the <i>initramfs</i>, reboot with the kernel parameter <code>rd.blacklist=firewire_core</code>.</li>
<li>Otherwise reboot with the kernel parameter <code>module_blacklist=firewire_core</code>.</li>
</ul>
<h3><span class="mw-headline" id="Reboot_into_root_shell_and_fix_problem">Reboot into root shell and fix problem</span></h3>
<div class="noprint archwiki-template-message">
<p><a href="/title/File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a><b>This article or section is out of date.</b><a href="/title/File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> <code>rd.rescue</code> and <code>rd.emergency</code> will not work since <a rel="nofollow" class="external text" href="https://github.com/archlinux/svntogit-packages/commit/776743d220cbb56e9abca2cc8bcef3a0ab7c8d0a">the root account in the initrmafs is locked</a>. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/title/Talk:General_troubleshooting">Talk:General troubleshooting#</a>)</div>
</div>
<div class="noprint archwiki-template-message">
<p><a href="/title/File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a><b>The factual accuracy of this article or section is disputed.</b><a href="/title/File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> The keyboard does not work in <code>rd.emergency</code> so it cannot be used. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/title/Talk:General_troubleshooting">Talk:General troubleshooting#</a>)</div>
</div>
<p>You will need a root shell to make changes to the system so the panic no longer occurs. If the panic occurs on boot, there are several strategies to obtain a root shell before the machine deadlocks:
</p>
<ul><li>Reboot with the kernel parameter <code>emergency</code>, <code>rd.emergency</code>, or <code>-b</code> to receive a prompt to login just after the root filesystem is mounted and <code>systemd</code> is started.</li></ul>
<dl><dd><div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> At this point, the root filesystem will be mounted <b>read-only</b>. Execute <code>mount -o remount,rw /</code> as the root user to make changes.</div></dd></dl>
<ul>
<li>Reboot with the kernel parameter <code>rescue</code>, <code>rd.rescue</code>, <code>single</code>, <code>s</code>, <code>S</code>, or <code>1</code> to receive a prompt to login just after local filesystems are mounted.</li>
<li>Reboot with the kernel parameter <code>systemd.debug_shell</code> to obtain a very early root shell on tty9.  Switch to it with by pressing <code>Ctrl+Alt+F9</code>.</li>
<li>Experiment by rebooting with different sets of kernel parameters to possibly disable the kernel feature that is causing the panic.  Try the "old standbys" <code>acpi=off</code> and <code>nolapic</code>.</li>
</ul>
<dl><dd><div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> See <a rel="nofollow" class="external text" href="https://www.kernel.org/doc/html/latest/admin-guide/kernel-parameters.html">kernel-parameters.html</a> for all kernel parameters.</div></dd></dl>
<ul>
<li>As a last resort, boot with the <b>Arch Linux Installation CD</b> and mount the root filesystem on <code>/mnt</code> then execute <code>arch-chroot /mnt</code> as the root user.</li>
<li>Disable the service or program that is causing the panic, roll-back a faulty update, or fix a configuration problem.</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> It may be necessary to generate a new <a href="https://en.wikipedia.org/wiki/Initial_ramdisk" class="extiw" title="wikipedia:Initial ramdisk">initial ramdisk</a> image if the original became corrupted. This can occur when a kernel update is interrupted. For creating a new one, see <a href="/title/Mkinitcpio#Image_creation_and_activation" title="Mkinitcpio">mkinitcpio</a>.</div>
<h2><span class="mw-headline" id="Package_management">Package management</span></h2>
<p>See <a href="/title/Pacman#Troubleshooting" title="Pacman">Pacman#Troubleshooting</a> for general topics, and <a href="/title/Pacman/Package_signing#Troubleshooting" title="Pacman/Package signing">pacman/Package signing#Troubleshooting</a> for issues with PGP keys.
</p>
<h3><span class="mw-headline" id="Fixing_a_broken_system">Fixing a broken system</span></h3>
<p>If you performed a <a href="/title/Partial_upgrade" class="mw-redirect" title="Partial upgrade">partial upgrade</a> that broke things, try updating all packages, and if successful, possibly reboot:
</p>
<pre># pacman -Syu
</pre>
<p>If you usually boot into a GUI and that's failing, perhaps you can press <code>Ctrl+Alt+F1</code> through <code>Ctrl+Alt+F6</code> and get to a working tty to run <i>pacman</i> through.
</p>
<p>If the system is broken enough that you are unable to run <i>pacman</i>,
<a href="/title/Installation_guide#Pre-installation" title="Installation guide">boot using a monthly Arch ISO from a USB flash drive, an optical disc or a network with PXE</a>.  (Don't follow any of the rest of the installation guide.)
</p>
<p>Mount your root filesystem:
</p>
<pre>[ISO] # mount /dev/<i>rootFilesystemDevice</i> /mnt
</pre>
<p>Mount any other partitions that you created separately, adding the prefix <code>/mnt</code> to all of them, i.e.:
</p>
<pre>[ISO] # mount /dev/<i>bootDevice</i> /mnt/boot
</pre>
<p>Try using your system's <i>pacman</i>:
</p>
<pre>[ISO] # arch-chroot /mnt
[chroot] # pacman -Syu
</pre>
<p>If that fails, exit the <i>chroot</i>, and try:
</p>
<pre>[ISO] # pacman -Syu --sysroot /mnt
</pre>
<p>If that fails, try:
</p>
<pre>[ISO] # pacman -Syu --root /mnt --cachedir /mnt/var/cache/pacman/pkg
</pre>
<h2><span class="mw-headline" id="IRC_collaborative_debugging">IRC collaborative debugging</span></h2>
<div class="noprint archwiki-template-message">
<p><a href="/title/File:Tango-go-next.png" class="image"><img alt="Tango-go-next.png" src="../File:Tango-go-next.png" decoding="async" width="48" height="48"></a><b>This article or section is a candidate for moving to <a href="/title/IRC" class="mw-redirect" title="IRC">IRC</a>.</b><a href="/title/File:Tango-go-next.png" class="image"><img alt="Tango-go-next.png" src="../File:Tango-go-next.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Notes:</b> More appropriate in the other article (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/title/Talk:General_troubleshooting#Moving_the_IRC_collaborative_debugging_section">Talk:General troubleshooting#Moving the IRC collaborative debugging section</a>)</div>
</div>
<p>When requesting help from an IRC help channel (like <a href="/title/Irc" class="mw-redirect" title="Irc">#archlinux</a>), it is inappropriate to paste logs into the channel and this may even get you kicked. Use a pastebin instead, you can use <a href="/title/Phrik" title="Phrik">phriks</a> factoid <code>!paste</code> to see which pastebins are acceptable.
Acceptable pastebins usually work without enabling Javascript. Some require enabling Javascript for posting from a web browser, which is still acceptable because it does not affect the viewer. They should not display advertising or other disrupting content and should also not require a login. Excellent pastebins usually provide a way to paste output via piping.
</p>
<p>An example list of acceptable pastebins:
</p>
<ul>
<li>
<a rel="nofollow" class="external free" href="https://0x0.st">https://0x0.st</a> - supports pasting of almost any filetype. May have slightly broken MIME type detection.</li>
<li>
<a rel="nofollow" class="external free" href="https://paste.rs">https://paste.rs</a> - supports pasting of images, but MIME type will be off.</li>
<li>
<a rel="nofollow" class="external free" href="https://bpa.st">https://bpa.st</a> - good for people who want something graphical.</li>
<li>
<a rel="nofollow" class="external free" href="http://ix.io">http://ix.io</a> - http-only. Popular, but it is useful when debugging an SSL issue which means that https-only pastebins can not be used.</li>
</ul>
<h3><span class="mw-headline" id="IRC_usage">IRC usage</span></h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Keep in mind that all people you encounter in the <a href="/title/Arch_IRC_channels" title="Arch IRC channels">Arch IRC channels</a> are volunteers. Be nice to them if you want to receive any help.</div>
<p>When first entering the channel, <a rel="nofollow" class="external text" href="https://www.nohello.com/">there is no need to say hello</a>. State the problem you are experiencing and make sure to be verbose and to provide logfiles. It also helps to search for any error messages you are getting first to not waste anybodys time. It is also worth it to search for issues on any of the bugtrackers of the relevant software.
The more helpful and verbose you are, the quicker you are going to receive help.
</p>
<p>If this is a problem or question which is very specific to a specific software, consider visiting the dedicated IRC channel for it if there is one. It is more likely to receive a good answer there.
</p>
<h3>
<span id="Output_errors.2Fmessages_to_a_file"></span><span class="mw-headline" id="Output_errors/messages_to_a_file">Output errors/messages to a file</span>
</h3>
<p>Sometimes it is not possible to pipe the output to a pastebin directly and it should be written into a file before.
</p>
<pre>$ <i>application</i> &amp;&gt; <i>application</i>-output.txt
</pre>
<p>This is useful if pasting logs that contain sensitive data, e.g serial numbers in <a href="/title/Smartctl" class="mw-redirect" title="Smartctl">smartctl</a> output, which have to be manually edited out.
</p>
<h2><span class="mw-headline" id="fuser">fuser</span></h2>
<div class="noprint archwiki-template-message">
<p><a href="/title/File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a><b>This article or section needs expansion.</b><a href="/title/File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Needs more information about its usage (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/title/Talk:General_troubleshooting">Talk:General troubleshooting#</a>)</div>
</div>
<p><i>fuser</i> is a command-line utility for identifying processes using resources such as files, filesystems and TCP/UDP ports.
</p>
<p><i>fuser</i> is provided by the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=psmisc">psmisc</a></span> package, which should be already installed as a dependency of the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=base">base</a></span> <a href="/title/Meta_package" class="mw-redirect" title="Meta package">meta package</a>. See <span class="plainlinks archwiki-template-man" title="$ man 1 fuser"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/fuser.1">fuser(1)</a></span> for details.
</p>
<h2><span class="mw-headline" id="Session_permissions">Session permissions</span></h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> You must be using <a href="/title/Systemd" title="Systemd">systemd</a> as your init system for local sessions to work.<a rel="nofollow" class="external autonumber" href="https://archlinux.org/news/d-bus-now-launches-user-buses/">[1]</a> It is required for polkit permissions and ACLs for various devices (see <code>/usr/lib/udev/rules.d/70-uaccess.rules</code> and  <a rel="nofollow" class="external autonumber" href="https://enotty.pipebreaker.pl/2012/05/23/linux-automatic-user-acl-management/">[2]</a>)</div>
<p>First, make sure you have a valid local session within X:
</p>
<pre>$ loginctl show-session $XDG_SESSION_ID
</pre>
<p>This should contain <code>Remote=no</code> and <code>Active=yes</code> in the output. If it does not, make sure that X runs on the same tty where the login occurred. This is required in order to preserve the logind session.
</p>
<p>Basic <a href="/title/Polkit" title="Polkit">polkit</a> actions do not require further set-up. Some polkit actions require further authentication, even with a local session. A polkit authentication agent needs to be running for this to work. See <a href="/title/Polkit#Authentication_agents" title="Polkit">polkit#Authentication agents</a> for more information on this.
</p>
<h2>
<span id="Message:_.22error_while_loading_shared_libraries.22"></span><span class="mw-headline" id='Message:_"error_while_loading_shared_libraries"'>Message: "error while loading shared libraries"</span>
</h2>
<div class="noprint archwiki-template-message">
<p><a href="/title/File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a><b>The factual accuracy of this article or section is disputed.</b><a href="/title/File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Or the program needs to be rebuilt after a <a href="/title/System_maintenance#Partial_upgrades_are_unsupported" title="System maintenance">soname bump</a>. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/title/Talk:General_troubleshooting">Talk:General troubleshooting#</a>)</div>
</div>
<p>If, while using a program, you get an error similar to:
</p>
<pre>error while loading shared libraries: libusb-0.1.so.4: cannot open shared object file: No such file or directory
</pre>
<p>Use <a href="/title/Pacman" title="Pacman">pacman</a> or <a href="/title/Pkgfile" title="Pkgfile">pkgfile</a> to search for the package that owns the missing library:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ pacman -F libusb-0.1.so.4</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">extra/libusb-compat 0.1.5-1
    usr/lib/libusb-0.1.so.4
</pre>
<p>In this case, the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libusb-compat">libusb-compat</a></span> package needs to be <a href="/title/Install" class="mw-redirect" title="Install">installed</a>.
</p>
<p>The error could also mean that the package that you used to install your program does not list the library as a dependency in its <a href="/title/PKGBUILD" title="PKGBUILD">PKGBUILD</a>: if it is an official package, <a href="/title/Report_a_bug" class="mw-redirect" title="Report a bug">report a bug</a>; if it is an <a href="/title/AUR" class="mw-redirect" title="AUR">AUR</a> package, report it to the maintainer using its page in the AUR website.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://www.reddit.com/r/archlinux/comments/tjjwr/archlinux_a_howto_in_troubleshooting_for_newcomers/">A how-to in troubleshooting for newcomers</a></li>
<li>
<a rel="nofollow" class="external text" href="https://wiki.ultimatebootcd.com/index.php?title=Tools">List of Tools for UBCD</a> - Memtest-like tools to add to grub.cfg on UltimateBootCD.com</li>
<li><a href="https://en.wikipedia.org/wiki/BIOS_Boot_partition" class="extiw" title="wikipedia:BIOS Boot partition">Wikipedia:BIOS Boot partition</a></li>
<li><a href="/title/REISUB" class="mw-redirect" title="REISUB">REISUB</a></li>
<li>
<a rel="nofollow" class="external text" href="https://freedesktop.org/wiki/Software/systemd/Debugging/#Debug_Logging_to_a_Serial_Console">Debug Logging to a Serial Console</a> on Freedesktop.org</li>
<li>
<a rel="nofollow" class="external text" href="https://web.archive.org/web/20120217124742/http://www.lesswatts.org/projects/acpi/debug.php">How to Isolate Linux ACPI Issues</a> on Archive.org</li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="/title/Special:Categories" title="Special:Categories">Categories</a>: <ul>
<li><a href="/title/Category:System_administration" title="Category:System administration">System administration</a></li>
<li><a href="/title/Category:System_recovery" title="Category:System recovery">System recovery</a></li>
<li><a href="/title/Category:Installation_process" title="Category:Installation process">Installation process</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="/title/Category:Pages_or_sections_flagged_with_Template:Out_of_date" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li>
<li><a href="/title/Category:Pages_or_sections_flagged_with_Template:Accuracy" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li>
<li><a href="/title/Category:Pages_or_sections_flagged_with_Template:Move" title="Category:Pages or sections flagged with Template:Move">Pages or sections flagged with Template:Move</a></li>
<li><a href="/title/Category:Pages_or_sections_flagged_with_Template:Expansion" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=General_troubleshooting&amp;oldid=669840">https://wiki.archlinux.org/index.php?title=General_troubleshooting&amp;oldid=669840</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 9 May 2021, at 01:13.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="/title/ArchWiki:Privacy_policy" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="/title/ArchWiki:About" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="/title/ArchWiki:General_disclaimer" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
