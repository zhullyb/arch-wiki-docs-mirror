<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>IBus - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-IBus rootpage-IBus skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">IBus</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../en/Localization.html" title="Localization">Localization</a></li>
<li><a href="../en/Input_method.html" title="Input method">Input method</a></li>
<li><a href="../en/Fcitx.html" title="Fcitx">Fcitx</a></li>
<li><a href="../en/Fcitx5.html" title="Fcitx5">Fcitx5</a></li>
</ul>
</div>
<p><a href="https://en.wikipedia.org/wiki/Intelligent_Input_Bus" class="extiw" title="wikipedia:Intelligent Input Bus">IBus</a> (<i>Intelligent Input Bus</i>) is an <a href="../en/Input_method.html#Input_method_framework" title="Input method">input method framework</a>, a type of application that allows for easily switching between different keyboard layouts. When combined with an <a href="../en/Input_method.html" title="Input method">input method editor</a>, it also allows for typing non-Latin characters using a keyboard that does not natively support them.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Installation"><span class="tocnumber">1</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Integration"><span class="tocnumber">2</span> <span class="toctext">Integration</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#Configuration"><span class="tocnumber">3</span> <span class="toctext">Configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#GNOME"><span class="tocnumber">3.1</span> <span class="toctext">GNOME</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Other_desktop_environments"><span class="tocnumber">3.2</span> <span class="toctext">Other desktop environments</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6">
<a href="#Tips_and_tricks"><span class="tocnumber">4</span> <span class="toctext">Tips and tricks</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#Emoji_input"><span class="tocnumber">4.1</span> <span class="toctext">Emoji input</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Unicode_input"><span class="tocnumber">4.2</span> <span class="toctext">Unicode input</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Tray_icon_color"><span class="tocnumber">4.3</span> <span class="toctext">Tray icon color</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Layout_switcher_display_delay"><span class="tocnumber">4.4</span> <span class="toctext">Layout switcher display delay</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Using_modifier_key_combinations_to_switch_layouts"><span class="tocnumber">4.5</span> <span class="toctext">Using modifier key combinations to switch layouts</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Firejail"><span class="tocnumber">4.6</span> <span class="toctext">Firejail</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#rxvt-unicode"><span class="tocnumber">4.7</span> <span class="toctext">rxvt-unicode</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-14"><a href="#See_also"><span class="tocnumber">5</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>Install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ibus">ibus</a></span> package.
</p>
<p>Additionally, see <a href="../en/Input_method.html#List_of_available_input_method_editors" title="Input method">Input method#List of available input method editors</a> for a comprehensive list of available input method editors.
</p>
<h2><span class="mw-headline" id="Integration">Integration</span></h2>
<p>Edit <code>/etc/environment</code> and add the following lines:
</p>
<pre>GTK_IM_MODULE=ibus
QT_IM_MODULE=ibus
XMODIFIERS=@im=ibus
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> See <a href="../en/Environment_variables.html" title="Environment variables">Environment variables</a> for other possible ways to set these variables.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> <a href="../en/GNOME.html" title="GNOME">GNOME</a> has integrated IBus since version 3.6<a rel="nofollow" class="external autonumber" href="https://help.gnome.org/misc/release-notes/3.6/i18n-ibus.html.en">[1]</a> and makes use of it by default, so if you use it as your <a href="../en/Desktop_environment.html" title="Desktop environment">desktop environment</a> you may skip the next part.</div>
<p>You now need to configure IBus to autostart on user login. To do so, create <code>~/.config/autostart/ibus-daemon.desktop</code> with at least the following contents:
</p>
<pre>[Desktop Entry]
Name=IBus Daemon
Exec=ibus-daemon -drx
</pre>
<p>With that done, the next time you login IBus will start along with your user session.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> See <a href="../en/Autostarting.html" title="Autostarting">Autostarting</a> for other possible ways to do this.</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> <a href="../en/KDE.html" title="KDE">KDE</a> comes with a plasmoid called Input Method Panel that can act as an IBus frontend and can possibly provide a better integrated experience. To launch IBus with Input Method Panel, replace the <b>Exec</b> field with the following command:
<p><code>ibus-daemon -drx --panel=/usr/lib/kimpanel-ibus-panel</code>
</p>
<p>Make sure you have enabled the Input Method Panel widget. If you don't know how, you can find instructions at <a href="../en/KDE.html#Widgets" title="KDE">KDE#Widgets</a>.
</p>
Also, additional functionality can be provided by <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=kimtoy">kimtoy</a></span>.</div>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a><b>The factual accuracy of this article or section is disputed.</b><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Some things have been removed that may turn out they shouldn't have been removed. See the Talk page for a more detailed explanation. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:IBus">Talk:IBus#</a>)</div>
</div>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>See <a href="../en/Locale.html" title="Locale">Locale</a> for help with adding non-Latin language support to your system. 
</p>
<p>See <a href="../en/Fonts.html#Non-latin_scripts" title="Fonts">Fonts#Non-latin scripts</a> for a non-exhaustive list of available non-Latin fonts. 
</p>
<h3><span class="mw-headline" id="GNOME">GNOME</span></h3>
<p><a href="../en/GNOME.html" title="GNOME">GNOME</a> uses IBus by default, so you can simply go to <b>System Settings â†’ Region &amp; Language</b> and add a keyboard layout for the language of your choice.
</p>
<h3><span class="mw-headline" id="Other_desktop_environments">Other desktop environments</span></h3>
<p>To launch the IBus preferences window, you can:
</p>
<ul>
<li>Right-click on its tray icon and select <b>Preferences</b>, or</li>
<li>Find and launch the GUI application <b>IBus Preferences</b>, or</li>
<li>Run the command <code>ibus-setup</code> in a terminal</li>
</ul>
<p>The points of interest here are the keyboard shortcut for <b>Next input method</b> (which is the one you will want to use instead of the default shortcut provided by your desktop environment) and the <b>Input Method</b> tab where you can add or remove the different keyboard layouts (which is where you will want to do this instead of your desktop environment's default layout manager).
</p>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="Emoji_input">Emoji input</span></h3>
<p>IBus supports the input of emoji icons. Type <code>&lt;Ctrl&gt;+&lt;Shift&gt;+e</code> and you will see the input prompt change to an underlined <u><b>e</b></u> character. You can then type the symbol or name of the emoji you want (e.g. <b>:)</b> or <b>face</b>) and press <code>&lt;Space&gt;</code> to render it. If you are satisfied with the result press <code>&lt;Enter&gt;</code> to submit it and exit emoji input mode, or press <code>&lt;Space&gt;</code> for a second time to open a dialog where you can further customize your desired emoji.
</p>
<h3><span class="mw-headline" id="Unicode_input">Unicode input</span></h3>
<p>IBus supports the input of complex Unicode characters. Type <code>&lt;Ctrl&gt;+&lt;Shift&gt;+u</code> and you will see the input prompt change to an underlined <u><b>u</b></u> character. You can then type the code of the Unicode character you want and press <code>&lt;Space&gt;</code> or <code>&lt;Enter&gt;</code> to render and submit it.
</p>
<h3><span class="mw-headline" id="Tray_icon_color">Tray icon color</span></h3>
<p>By default, IBus uses a dark blue color to display the language symbol of the currently active layout (e.g. <b>EN</b>). The color value is stored in a <a href="../en/GNOME.html#Configuration" title="GNOME">gsettings schema</a>, so if you wish to change it you can run the following command:
</p>
<pre>gsettings set org.freedesktop.ibus.panel xkb-icon-rgba 'COLOR'
</pre>
<p>The string 'COLOR' should conform to the following guidelines:
</p>
<pre>The RGBA value can be 1. a color name from X11, 2. a hex value in form '#rrggbb' where 'r', 'g' and 'b' are hex digits of the red, green, and blue, 3. a RGB color in form 'rgb(r,g,b)' or 4. a RGBA color in form 'rgba(r,g,b,a)' where 'r', 'g', and 'b' are either integers in the range 0 to 255 or percentage values in the range 0% to 100%, and 'a' is a floating point value in the range 0 to 1 of the alpha.
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> You can also use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dconf-editor">dconf-editor</a></span> to edit the gsettings schema in a more user-friendly way.</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> This doesnâ€™t apply to either <a href="../en/GNOME.html" title="GNOME">GNOME</a> or <a href="../en/KDE.html" title="KDE">KDE</a> with Kimpanel, because they both provide their own icons for IBus.</div>
<h3><span class="mw-headline" id="Layout_switcher_display_delay">Layout switcher display delay</span></h3>
<p>When pressing the <b>Next input method</b> hotkey, IBus displays a small dialog to signify the layout switch.  By default this dialog is displayed 400ms after pressing the key, but this value can be changed by the user, with some interesting choices being '0' to display the dialog immediately without any delay, or a negative value (e.g. '-1') to switch the layouts without showing the window at all (which may be useful if you only use two layouts and simply switch from one to the other).
</p>
<p>The value is stored in a <a href="../en/GNOME.html#Configuration" title="GNOME">gsettings schema</a>, so if you wish to change it you can run the following command:
</p>
<pre>gsettings set org.freedesktop.ibus.general switcher-delay-time 'VALUE'
</pre>
<p>To show the currently stored value, run the following command:
</p>
<pre>gsettings get org.freedesktop.ibus.general switcher-delay-time
</pre>
<p>The string 'VALUE' should conform to the following guidelines:
</p>
<pre>Set popup delay milliseconds to show IME switcher window. The default is 400. 0 = Show the window immediately. 0 &lt; Delay milliseconds. 0 &gt; Do not show the window and switch prev/next engines.
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> You can also use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dconf-editor">dconf-editor</a></span> to edit the gsettings schema in a more user-friendly way.</div>
<h3><span class="mw-headline" id="Using_modifier_key_combinations_to_switch_layouts">Using modifier key combinations to switch layouts</span></h3>
<p>While it is possible to set the layout switching hotkey to a combination of only modifier keys (e.g. <code>&lt;Ctrl&gt;+&lt;Space&gt;</code>, for some reason the IBus preferences GUI will not let you use a subset of modifier key combinations (e.g. <code>&lt;Alt&gt;+&lt;Shift_R&gt;</code>). However, IBus stores the hotkey as a string in a <a href="../en/GNOME.html#Configuration" title="GNOME">gsettings schema</a>, so you can still use such combinations by directly editing that string. To do so you can run the following command:
</p>
<pre>gsettings set org.freedesktop.ibus.general.hotkey triggers ['VALUE']
</pre>
<p>The string 'VALUE' should be any valid modifier key combination written in a format that IBus recognizes, e.g. <code>&lt;Alt&gt;Shift_R&gt;</code>
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> You can also use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dconf-editor">dconf-editor</a></span> to edit the gsettings schema in a more user-friendly way.</div>
<h3><span class="mw-headline" id="Firejail">Firejail</span></h3>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-edit-cut.png" class="image"><img alt="Tango-edit-cut.png" src="../File:Tango-edit-cut.png" decoding="async" width="48" height="48"></a><b>This section is being considered for removal.</b><a href="../File:Tango-edit-cut.png" class="image"><img alt="Tango-edit-cut.png" src="../File:Tango-edit-cut.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Is this still valid? Reading the Note makes it seem like the workaround is no longer needed and IBus works natively with sandboxed applications, without needing to use Xim. May I ask whoever wrote this additional Note to share their thoughts on this in the Talk page? (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:IBus">Talk:IBus#</a>)</div>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> As of Jul 2020, Firejail introduced DBus filtering. It is now possible to use the --dbus-user.own=org.freedesktop.IBus parameter to let Firefox access IBus.</div>
<p>Sandboxed programs may not work with some IBus input methods due to the input socket being invisible to the sandbox<a rel="nofollow" class="external autonumber" href="https://github.com/netblue30/firejail/issues/116">[2]</a><a rel="nofollow" class="external autonumber" href="https://github.com/ibus/ibus/issues/2020">[3]</a><a rel="nofollow" class="external autonumber" href="https://github.com/netblue30/firejail/issues/1302">[4]</a>. For example, Firefox sandboxed with Firejail may not register inputs given by IBus Anthy. 
</p>
<p>A workaround is to make IBus use <a href="https://en.wikipedia.org/wiki/X_Input_Method" class="extiw" title="wikipedia:X Input Method">XIM</a> by changing the exported environment variables (see <a href="#Integration">Integration</a>) like so:
</p>
<pre>export GTK_IM_MODULE=xim
export XMODIFIERS=@im=ibus
export QT_IM_MODULE=xim
</pre>
<h3><span class="mw-headline" id="rxvt-unicode">rxvt-unicode</span></h3>
<p>For <i>rxvt-unicode</i> to work correctly with IBus, you may need to add the following lines to <code>~/.Xresources</code>:
</p>
<pre>URxvt.inputMethod: ibus
URxvt.preeditType: OverTheSpot
</pre>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul><li><a rel="nofollow" class="external text" href="https://github.com/ibus/ibus">GitHub repository</a></li></ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Input_methods.html" title="Category:Input methods">Input methods</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li>
<li><a href="../en/Category:Sections_flagged_with_Template:Remove.html" title="Category:Sections flagged with Template:Remove">Sections flagged with Template:Remove</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=IBus&amp;oldid=649308">https://wiki.archlinux.org/index.php?title=IBus&amp;oldid=649308</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 20 January 2021, at 06:22.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
