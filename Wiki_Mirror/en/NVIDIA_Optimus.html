<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>NVIDIA Optimus - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-NVIDIA_Optimus rootpage-NVIDIA_Optimus skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">NVIDIA Optimus</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../en/Bumblebee.html" title="Bumblebee">Bumblebee</a></li>
<li><a href="../en/Nouveau.html" title="Nouveau">Nouveau</a></li>
<li><a href="../en/NVIDIA.html" title="NVIDIA">NVIDIA</a></li>
<li><a href="../en/Nvidia-xrun.html" title="Nvidia-xrun">nvidia-xrun</a></li>
</ul>
</div>
<p><a href="https://en.wikipedia.org/wiki/NVIDIA_Optimus" class="extiw" title="wikipedia:NVIDIA Optimus">NVIDIA Optimus</a> is a technology that allows an Intel integrated GPU and discrete NVIDIA GPU to be built into and accessed by a laptop.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Available_methods"><span class="tocnumber">1</span> <span class="toctext">Available methods</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Use_Intel_graphics_only"><span class="tocnumber">2</span> <span class="toctext">Use Intel graphics only</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Use_CUDA_without_switching_the_rendering_provider"><span class="tocnumber">2.1</span> <span class="toctext">Use CUDA without switching the rendering provider</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4">
<a href="#Use_NVIDIA_graphics_only"><span class="tocnumber">3</span> <span class="toctext">Use NVIDIA graphics only</span></a>
<ul>
<li class="toclevel-2 tocsection-5">
<a href="#Display_managers"><span class="tocnumber">3.1</span> <span class="toctext">Display managers</span></a>
<ul>
<li class="toclevel-3 tocsection-6"><a href="#LightDM"><span class="tocnumber">3.1.1</span> <span class="toctext">LightDM</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="#SDDM"><span class="tocnumber">3.1.2</span> <span class="toctext">SDDM</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="#GDM"><span class="tocnumber">3.1.3</span> <span class="toctext">GDM</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-9"><a href="#Checking_3D"><span class="tocnumber">3.2</span> <span class="toctext">Checking 3D</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Further_Information"><span class="tocnumber">3.3</span> <span class="toctext">Further Information</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11">
<a href="#Troubleshooting"><span class="tocnumber">4</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#Tearing/Broken_VSync"><span class="tocnumber">4.1</span> <span class="toctext">Tearing/Broken VSync</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Failed_to_initialize_the_NVIDIA_GPU_at_PCI:1:0:0_(GPU_fallen_off_the_bus_/_RmInitAdapter_failed!)"><span class="tocnumber">4.2</span> <span class="toctext">Failed to initialize the NVIDIA GPU at PCI:1:0:0 (GPU fallen off the bus / RmInitAdapter failed!)</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Resolution,_screen_scan_wrong._EDID_errors_in_Xorg.log"><span class="tocnumber">4.3</span> <span class="toctext">Resolution, screen scan wrong. EDID errors in Xorg.log</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Wrong_resolution_without_EDID_errors"><span class="tocnumber">4.4</span> <span class="toctext">Wrong resolution without EDID errors</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Lockup_issue_(lspci_hangs)"><span class="tocnumber">4.5</span> <span class="toctext">Lockup issue (lspci hangs)</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#No_screens_found_on_a_laptop/NVIDIA_Optimus"><span class="tocnumber">4.6</span> <span class="toctext">No screens found on a laptop/NVIDIA Optimus</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-18">
<a href="#Use_switchable_graphics"><span class="tocnumber">5</span> <span class="toctext">Use switchable graphics</span></a>
<ul>
<li class="toclevel-2 tocsection-19"><a href="#Using_PRIME_render_offload"><span class="tocnumber">5.1</span> <span class="toctext">Using PRIME render offload</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Using_nouveau"><span class="tocnumber">5.2</span> <span class="toctext">Using nouveau</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#Using_Bumblebee"><span class="tocnumber">5.3</span> <span class="toctext">Using Bumblebee</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#Using_nvidia-xrun"><span class="tocnumber">5.4</span> <span class="toctext">Using nvidia-xrun</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#Using_optimus-manager"><span class="tocnumber">5.5</span> <span class="toctext">Using optimus-manager</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Available_methods">Available methods</span></h2>
<p>There are several methods available:
</p>
<ul>
<li>
<a href="#Use_Intel_graphics_only">#Use Intel graphics only</a> - saves power, because NVIDIA GPU will be completely powered off.</li>
<li>
<a href="#Use_NVIDIA_graphics_only">#Use NVIDIA graphics only</a> - gives more performance than Intel graphics, but drains more battery (which is not welcome for mobile devices). This utilizes the same underlying process as the <a href="#Using_optimus-manager">optimus-manager</a> and <a href="#Using_nvidia-xrun">nvidia-xrun</a> options, it should be utilized for troubleshooting and verifying general functionality, before opting for one of the more automated approaches.</li>
<li>Using both (use NVIDIA GPU when needed and keep it powered off to save power):
<ul>
<li>
<a href="#Using_PRIME_render_offload">#Using PRIME render offload</a> - official method supported by NVIDIA.</li>
<li>
<a href="#Using_optimus-manager">#Using optimus-manager</a> - switches graphics with a single command (logout and login required to take effect). It achieves maximum performance out of NVIDIA GPU and switches it off if not in use. Since the 1.4 release AMD+NVIDIA combination is also supported.</li>
<li>
<a href="#Using_nvidia-xrun">#Using nvidia-xrun</a> - run separate X session on different TTY with NVIDIA graphics. It achieves maximum performance out of NVIDIA GPU and switches it off if not in use.</li>
<li>
<a href="#Using_Bumblebee">#Using Bumblebee</a> - provides Windows-like functionality by allowing to run selected applications with NVIDIA graphics while using Intel graphics for everything else. Has significant performance issues.</li>
<li>
<a href="#Using_nouveau">#Using nouveau</a> - offers poorer performance (compared to the proprietary NVIDIA driver) and may cause issues with sleep and hibernate. Does not work with latest NVIDIA GPUs.</li>
</ul>
</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> All of these options are mutually exclusive, if you test one approach and decide for another, you must ensure to revert any configuration changes done by following one approach before attempting another method, otherwise file conflicts and undefined behaviours may arise.</div>
<h2><span class="mw-headline" id="Use_Intel_graphics_only">Use Intel graphics only</span></h2>
<p>If you only care to use a certain GPU without switching, check the options in your system's BIOS. There should be an option to disable one of the cards. Some laptops only allow disabling of the discrete card, or vice-versa, but it is worth checking if you only plan to use just one of the cards.
</p>
<p>If your BIOS does not allow to disable Nvidia graphics, you can disable it from the Linux kernel itself. See <a href="../en/Hybrid_graphics.html#Fully_Power_Down_Discrete_GPU" title="Hybrid graphics">Hybrid graphics#Fully Power Down Discrete GPU</a>.
</p>
<h3><span class="mw-headline" id="Use_CUDA_without_switching_the_rendering_provider">Use CUDA without switching the rendering provider</span></h3>
<p>You can use CUDA without switching rendering to the Nvidia graphics. All you need to do is ensure that the Nvidia card is powered on before starting a CUDA application, see <a href="../en/Hybrid_graphics.html#Fully_Power_Down_Discrete_GPU" title="Hybrid graphics">Hybrid graphics#Fully Power Down Discrete GPU</a> for details.
</p>
<p>Now when you start a CUDA application, it will automatically load all necessary kernel modules. Before turning off the Nvidia card after using CUDA, the <code>nvidia</code> kernel modules have to be unloaded first:
</p>
<pre># rmmod nvidia_uvm
# rmmod nvidia
</pre>
<h2><span class="mw-headline" id="Use_NVIDIA_graphics_only">Use NVIDIA graphics only</span></h2>
<p>The proprietary NVIDIA driver can be configured to be the primary rendering provider. It also has notable screen-tearing issues unless you enable prime sync by enabling <a href="../en/NVIDIA.html#DRM_kernel_mode_setting" title="NVIDIA">NVIDIA#DRM kernel mode setting</a>, see <a rel="nofollow" class="external autonumber" href="https://devtalk.nvidia.com/default/topic/957814/linux/prime-and-prime-synchronization/">[1]</a> for further information. It does allow use of the discrete GPU and has (as of <a rel="nofollow" class="external text" href="https://www.phoronix.com/scan.php?page=article&amp;item=nouveau-410-blob&amp;num=1">January 2017</a>) a marked edge in performance over the nouveau driver.
</p>
<p>First, <a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">install</a> the <a href="../en/NVIDIA.html" title="NVIDIA">NVIDIA</a> driver and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xorg-xrandr">xorg-xrandr</a></span>. Then, configure <code>/etc/X11/xorg.conf.d/10-nvidia-drm-outputclass.conf</code> the options of which will be combined with the package provided <code>/usr/share/X11/xorg.conf.d/10-nvidia-drm-outputclass.conf</code> to provide compatibility with this setup. 
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> On some setups this setup breaks automatic detection of the values of the display by the nvidia driver through the EDID file. As a work-around see <a href="#Resolution,_screen_scan_wrong._EDID_errors_in_Xorg.log">#Resolution, screen scan wrong. EDID errors in Xorg.log</a>. </div>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/10-nvidia-drm-outputclass.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "OutputClass"
    Identifier "intel"
    MatchDriver "i915"
    Driver "modesetting"
EndSection

Section "OutputClass"
    Identifier "nvidia"
    MatchDriver "nvidia-drm"
    Driver "nvidia"
    Option "AllowEmptyInitialConfiguration"
    Option "PrimaryGPU" "yes"
    ModulePath "/usr/lib/nvidia/xorg"
    ModulePath "/usr/lib/xorg/modules"
EndSection

</pre>
<p>Next, add the following two lines to the beginning of your <code>~/.xinitrc</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.xinitrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">xrandr --setprovideroutputsource modesetting NVIDIA-0
xrandr --auto
</pre>
<p>Now reboot to load the drivers, and X should start.
</p>
<p>If your display dpi is not correct add the following line:
</p>
<pre>xrandr --dpi 96
</pre>
<p>If you get a black screen when starting X, make sure that there are no ampersands after the two <code>xrandr</code> commands in <code>~/.xinitrc</code>. If there are ampersands, it seems that the window manager can run before the <code>xrandr</code> commands finish executing, leading to a black screen. 
</p>
<h3><span class="mw-headline" id="Display_managers">Display managers</span></h3>
<p>If you are using a display manager then you will need to create or edit a display setup script for your display manager instead of using <code>~/.xinitrc</code>.
</p>
<h4><span class="mw-headline" id="LightDM">LightDM</span></h4>
<p>For the <a href="../en/LightDM.html" title="LightDM">LightDM</a> display manager:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/lightdm/display_setup.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh
xrandr --setprovideroutputsource modesetting NVIDIA-0
xrandr --auto
</pre>
<p>Make the script executable:
</p>
<pre># chmod +x /etc/lightdm/display_setup.sh
</pre>
<p>Now configure lightdm to run the script by editing the <code>[Seat:*]</code> section in <code>/etc/lightdm/lightdm.conf</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/lightdm/lightdm.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Seat:*]
display-setup-script=/etc/lightdm/display_setup.sh</pre>
<p>Now reboot and your display manager should start.
</p>
<h4><span class="mw-headline" id="SDDM">SDDM</span></h4>
<p>For the <a href="../en/SDDM.html" title="SDDM">SDDM</a> display manager (SDDM is the default DM for <a href="../en/KDE.html" title="KDE">KDE</a>):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/share/sddm/scripts/Xsetup</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">xrandr --setprovideroutputsource modesetting NVIDIA-0
xrandr --auto
</pre>
<h4><span class="mw-headline" id="GDM">GDM</span></h4>
<p>For the <a href="../en/GDM.html" title="GDM">GDM</a> display manager create two new .desktop files:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/share/gdm/greeter/autostart/optimus.desktop
/etc/xdg/autostart/optimus.desktop</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Desktop Entry]
Type=Application
Name=Optimus
Exec=sh -c "xrandr --setprovideroutputsource modesetting NVIDIA-0; xrandr --auto"
NoDisplay=true
X-GNOME-Autostart-Phase=DisplayServer
</pre>
<p>Make sure that GDM use <a href="../en/GDM.html#Use_Xorg_backend" title="GDM">X as default backend</a>.
</p>
<h3><span class="mw-headline" id="Checking_3D">Checking 3D</span></h3>
<p>You can check if the NVIDIA graphics are being used by installing <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mesa-demos">mesa-demos</a></span> and running
</p>
<pre>$ glxinfo | grep NVIDIA
</pre>
<h3><span class="mw-headline" id="Further_Information">Further Information</span></h3>
<p>For more information, look at NVIDIA's official page on the topic <a rel="nofollow" class="external autonumber" href="http://us.download.nvidia.com/XFree86/Linux-x86/370.28/README/randr14.html">[2]</a>.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a><b>This article or section needs language, wiki syntax or style improvements. See <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a> for reference.</b><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> If this is relevant only for <a href="#Use_NVIDIA_graphics_only">#Use NVIDIA graphics only</a>, it should be a subsection. Otherwise it should be the last section on the page. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:NVIDIA_Optimus">Talk:NVIDIA Optimus#</a>)</div>
</div>
<h3>
<span id="Tearing.2FBroken_VSync"></span><span class="mw-headline" id="Tearing/Broken_VSync">Tearing/Broken VSync</span>
</h3>
<p>This requires <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xorg-server">xorg-server</a></span> 1.19 or higher, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span> kernel 4.5 or higher, and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nvidia">nvidia</a></span> 370.23 or higher. Then enable <a href="../en/NVIDIA.html#DRM_kernel_mode_setting" title="NVIDIA">DRM kernel mode setting</a>, which will in turn enable the PRIME synchronization and fix the tearing.
</p>
<p>You can read the official <a rel="nofollow" class="external text" href="https://devtalk.nvidia.com/default/topic/957814/linux/prime-and-prime-synchronization/">forum thread</a> for details.
</p>
<p>It has been <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=251032">reported</a> that <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span> kernel 5.4 breaks PRIME synchronization but this has since been fixed.
</p>
<h3>
<span id="Failed_to_initialize_the_NVIDIA_GPU_at_PCI:1:0:0_.28GPU_fallen_off_the_bus_.2F_RmInitAdapter_failed.21.29"></span><span class="mw-headline" id="Failed_to_initialize_the_NVIDIA_GPU_at_PCI:1:0:0_(GPU_fallen_off_the_bus_/_RmInitAdapter_failed!)">Failed to initialize the NVIDIA GPU at PCI:1:0:0 (GPU fallen off the bus / RmInitAdapter failed!)</span>
</h3>
<p>Add <code>rcutree.rcu_idle_gp_delay=1</code> to the kernel parameters. Original topic can be found in <a rel="nofollow" class="external autonumber" href="https://github.com/Bumblebee-Project/Bumblebee/issues/455#issuecomment-22497464">[3]</a> and <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=169742">[4]</a>.
</p>
<h3>
<span id="Resolution.2C_screen_scan_wrong._EDID_errors_in_Xorg.log"></span><span class="mw-headline" id="Resolution,_screen_scan_wrong._EDID_errors_in_Xorg.log">Resolution, screen scan wrong. EDID errors in Xorg.log</span>
</h3>
<p>This is due to the NVIDIA driver not detecting the EDID for the display. You need to manually specify the path to an EDID file or provide the same information in a similar way.
</p>
<p>To provide the path to the EDID file edit the Device Section for the NVIDIA card in Xorg.conf, adding these lines and changing parts to reflect your own system:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "Device"
       	Option		"ConnectedMonitor" "CRT-0"
       	Option		"CustomEDID" "CRT-0:/sys/class/drm/card0-LVDS-1/edid"
	Option		"IgnoreEDID" "false"
	Option		"UseEDID" "true"
EndSection
</pre>
<p>If Xorg wont start try swapping out all references of CRT to DFB.
card0 is the identifier for the intel card to which the display is connected via LVDS. The edid binary is in this directory. If the hardware arrangement is different, the value for CustomEDID might vary but yet this has to be confirmed. The path will start in any case with /sys/class/drm.
</p>
<p>Alternatively you can generate your edid with tools like <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=read-edid">read-edid</a></span> and point the driver to this file. Even modelines can be used, but then be sure to change "UseEDID" and "IgnoreEDID".
</p>
<h3><span class="mw-headline" id="Wrong_resolution_without_EDID_errors">Wrong resolution without EDID errors</span></h3>
<p>Using <i>nvidia-xconfig</i>, incorrect information might be generated in Xorg.conf and in particular wrong monitor refresh rates that restruct the possible resolutions. Try commenting out the <code>HorizSync</code>/<code>VertRefresh</code> lines. If this helps, you can probably also remove everything else not mentioned in this article.
</p>
<h3>
<span id="Lockup_issue_.28lspci_hangs.29"></span><span class="mw-headline" id="Lockup_issue_(lspci_hangs)">Lockup issue (lspci hangs)</span>
</h3>
<p>Symptoms: lspci hangs, system suspend fails, shutdown hangs, optirun hangs.
</p>
<p>Applies to: newer laptops with GTX 965M or alike when bbswitch (e.g. via Bumblebee) or nouveau is in use.
</p>
<p>When the dGPU power resource is turned on, it may fail to do so and hang in ACPI code (<a rel="nofollow" class="external text" href="https://bugzilla.kernel.org/show_bug.cgi?id=156341">kernel bug 156341</a>).
</p>
<p>When using nouveau, disabling runtime power-management stops it from changing the power state, thus avoiding this issue.
To disable runtime power-management, add <code>nouveau.runpm=0</code> to the kernel parameters.
</p>
<p>For known model-specific workarounds, see <a rel="nofollow" class="external text" href="https://github.com/Bumblebee-Project/Bumblebee/issues/764#issuecomment-234494238">this issue</a>.
In other cases you can try to boot with <code>acpi_osi="!Windows 2015"</code> or <code>acpi_osi=! acpi_osi="Windows 2009"</code> added to your <a href="../en/Kernel_parameters.html" title="Kernel parameters">Kernel parameters</a>. (Consider reporting your laptop to that issue.)
</p>
<h3>
<span id="No_screens_found_on_a_laptop.2FNVIDIA_Optimus"></span><span class="mw-headline" id="No_screens_found_on_a_laptop/NVIDIA_Optimus">No screens found on a laptop/NVIDIA Optimus</span>
</h3>
<p>Check if <code>$ lspci | grep VGA</code>
outputs something similar to:
</p>
<pre>00:02.0 VGA compatible controller: Intel Corporation Core Processor Integrated Graphics Controller (rev 02)
01:00.0 VGA compatible controller: nVidia Corporation Device 0df4 (rev a1)
</pre>
<p>NVIDIA drivers now offer Optimus support since 319.12 Beta <a rel="nofollow" class="external autonumber" href="http://www.nvidia.com/object/linux-display-amd64-319.12-driver.html">[5]</a> with kernels above and including 3.9.
</p>
<p>Another solution is to install the <a href="../en/Intel_graphics.html" class="mw-redirect" title="Intel">Intel</a> driver to handle the screens, then if you want 3D software you should run them through <a href="../en/Bumblebee.html" title="Bumblebee">Bumblebee</a> to tell them to use the NVIDIA card.
</p>
<h2><span class="mw-headline" id="Use_switchable_graphics">Use switchable graphics</span></h2>
<h3><span class="mw-headline" id="Using_PRIME_render_offload">Using PRIME render offload</span></h3>
<p>This is the official NVIDIA method to support switchable graphics.
</p>
<p>See <a href="../en/PRIME.html#PRIME_render_offload" title="PRIME">PRIME#PRIME render offload</a> for details.
</p>
<h3><span class="mw-headline" id="Using_nouveau">Using nouveau</span></h3>
<p>See <a href="../en/PRIME.html" title="PRIME">PRIME</a> for graphics switching and <a href="../en/Nouveau.html" title="Nouveau">nouveau</a> for open-source NVIDIA driver.
</p>
<h3><span class="mw-headline" id="Using_Bumblebee">Using Bumblebee</span></h3>
<p>See <a href="../en/Bumblebee.html" title="Bumblebee">Bumblebee</a>.
</p>
<h3><span class="mw-headline" id="Using_nvidia-xrun">Using nvidia-xrun</span></h3>
<p>See <a href="../en/Nvidia-xrun.html" title="Nvidia-xrun">nvidia-xrun</a>.
</p>
<h3><span class="mw-headline" id="Using_optimus-manager">Using optimus-manager</span></h3>
<p>See <a rel="nofollow" class="external text" href="https://github.com/Askannz/optimus-manager">Optimus-manager</a> upstream documentation. It covers both installation and configuration in Arch Linux systems.
</p>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Graphics.html" title="Category:Graphics">Graphics</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=NVIDIA_Optimus&amp;oldid=655526">https://wiki.archlinux.org/index.php?title=NVIDIA_Optimus&amp;oldid=655526</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 20 March 2021, at 21:15.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
