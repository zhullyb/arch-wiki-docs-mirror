<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Archboot - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Archboot rootpage-Archboot skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Archboot</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../en/Archiso.html" title="Archiso">Archiso</a></li>
</ul>
</div>
<p><b>Archboot</b> is an unofficial set of scripts to generate bootable media for CD/USB/PXE, designed for installation or rescue operation.
</p>
<p>It only runs in RAM, without any special filesystems like squashfs, thus it is limited to the RAM which is installed in your system.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Installation"><span class="tocnumber">1</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#The_difference_to_the_archiso_install_media"><span class="tocnumber">2</span> <span class="toctext">The difference to the archiso install media</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#Archboot_ISO_Releases"><span class="tocnumber">3</span> <span class="toctext">Archboot ISO Releases</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Burning_Release"><span class="tocnumber">3.1</span> <span class="toctext">Burning Release</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#PXE_booting_/_Rescue_system"><span class="tocnumber">3.2</span> <span class="toctext">PXE booting / Rescue system</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Supported_boot_modes_of_Archboot_media"><span class="tocnumber">3.3</span> <span class="toctext">Supported boot modes of Archboot media</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#How_to_do_a_remote_installation_with_ssh?"><span class="tocnumber">3.4</span> <span class="toctext">How to do a remote installation with ssh?</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Interactive_setup_features"><span class="tocnumber">3.5</span> <span class="toctext">Interactive setup features</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#FAQ,_Known_Issues_and_limitations"><span class="tocnumber">3.6</span> <span class="toctext">FAQ, Known Issues and limitations</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#History"><span class="tocnumber">3.7</span> <span class="toctext">History</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Bugs"><span class="tocnumber">3.8</span> <span class="toctext">Bugs</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="#Archboot_BETA_ISO_Release"><span class="tocnumber">4</span> <span class="toctext">Archboot BETA ISO Release</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="#Links"><span class="tocnumber">5</span> <span class="toctext">Links</span></a></li>
<li class="toclevel-1 tocsection-14">
<a href="#Howto:_Create_image_files"><span class="tocnumber">6</span> <span class="toctext">Howto: Create image files</span></a>
<ul>
<li class="toclevel-2 tocsection-15"><a href="#Requirements"><span class="tocnumber">6.1</span> <span class="toctext">Requirements</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Create_archboot_chroot"><span class="tocnumber">6.2</span> <span class="toctext">Create archboot chroot</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Update_to_latest_packages"><span class="tocnumber">6.3</span> <span class="toctext">Update to latest packages</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Generate_images"><span class="tocnumber">6.4</span> <span class="toctext">Generate images</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=archboot">archboot</a></span> package.
</p>
<h2><span class="mw-headline" id="The_difference_to_the_archiso_install_media">The difference to the archiso install media</span></h2>
<ul>
<li>It provides an additional interactive setup and quickinst script.</li>
<li>It contains [core] repository on media.</li>
<li>It runs a modified Arch Linux system in initramfs.</li>
<li>It is restricted to RAM usage, everything which is not necessary like</li>
</ul>
<dl><dd>man or info pages etc. is not provided.</dd></dl>
<ul>
<li>It does not mount anything during boot process.</li>
<li>It supports remote installation through ssh.</li>
<li>It uses netctl for network setup.</li>
</ul>
<h2><span class="mw-headline" id="Archboot_ISO_Releases">Archboot ISO Releases</span></h2>
<ul><li>Hybrid image files and torrents are provided, which include x86_64 and [core] repository,</li></ul>
<dl><dd>network labeled images do not include [core] repository.</dd></dl>
<ul>
<li>Please check sha256sum before using it.</li>
<li>
<a rel="nofollow" class="external text" href="https://mirror.rackspace.com/archlinux/iso/archboot/2020.07">Download 2020.07 „2k20-R1“</a> / <a rel="nofollow" class="external text" href="https://mirror.rackspace.com/archlinux/iso/archboot/Changelog-2020.07-1.txt">Changelog</a> / <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=182439">Forum thread</a>
</li>
</ul>
<dl>
<dd>kernel: 5.7.9.arch1-1</dd>
<dd>pacman: 5.2.2-1</dd>
<dd>systemd: 245.6-8</dd>
<dd>RAM recommendations: 2048 MB</dd>
</dl>
<h3><span class="mw-headline" id="Burning_Release">Burning Release</span></h3>
<p>Hybrid image file is a standard CD-burnable image and also a raw disk image. 
</p>
<ul>
<li>Can be burned to CD(RW) media using most CD-burning utilities.</li>
<li>Can be raw-written to a drive using 'dd' or similar utilities. This method is intended for use with USB thumb drives.</li>
</ul>
<pre>'dd if=&lt;imagefile&gt; of=/dev/&lt;yourdevice&gt; bs=1M'</pre>
<h3>
<span id="PXE_booting_.2F_Rescue_system"></span><span class="mw-headline" id="PXE_booting_/_Rescue_system">PXE booting / Rescue system</span>
</h3>
<p><a rel="nofollow" class="external text" href="https://mirror.rackspace.com/archlinux/iso/archboot/2020.07/boot">Download 2020.07 „2k20-R1“</a> needed files from the directory.
</p>
<ul>
<li>vmlinuz_x86_64 +  initramfs_x86_64.img(x86_64)</li>
<li>intel-ucode.img (x86_64)</li>
<li>For PXE booting add the kernel and initrd to your tftp setup and you will get a running installation/rescue system.</li>
<li>For Rescue booting add an entry to your bootloader pointing to the kernel and initrd.</li>
</ul>
<h3><span class="mw-headline" id="Supported_boot_modes_of_Archboot_media">Supported boot modes of Archboot media</span></h3>
<ul>
<li>It supports BIOS booting with syslinux.</li>
<li>It supports UEFI/UEFI_CD booting with <a href="../en/Systemd-boot.html" title="Systemd-boot">systemd-boot</a> and <a href="../en/EFISTUB.html" title="EFISTUB">EFISTUB</a>.</li>
<li>It support UEFI_MIX_MODE booting with grub.</li>
<li>It supports Secure Boot with prebootloader.</li>
<li>It supports grub(2)'s iso loopback support.</li>
</ul>
<dl>
<dd>variables used (below for example):</dd>
<dd>iso_loop_dev=PARTUUID=XXXX</dd>
<dd>iso_loop_path=/blah/archboot.iso</dd>
</dl>
<pre>menuentry "Archboot" --class iso {
loopback loop (hdX,X)/&lt;archboot.iso&gt;
linux (loop)/boot/vmlinuz_x86_64 iso_loop_dev=/dev/sdXX iso_loop_path=/&lt;archboot.iso&gt;
initrd (loop)/boot/initramfs_x86_64.img
}</pre>
<ul><li>It supports booting using syslinux's memdisk (only in BIOS mode).</li></ul>
<pre>menuentry "Archboot Memdisk" {
   linux16 /memdisk iso
   initrd16 hd(X,X)/&lt;archboot.iso&gt;
}</pre>
<h3>
<span id="How_to_do_a_remote_installation_with_ssh.3F"></span><span class="mw-headline" id="How_to_do_a_remote_installation_with_ssh?">How to do a remote installation with ssh?</span>
</h3>
<ul>
<li>During boot all network interfaces will try to obtain an IP address through dhcp.</li>
<li>root password is not set by default! If you need privacy during installation set a password.</li>
</ul>
<pre>'ssh root@&lt;yourip&gt;'</pre>
<h3><span class="mw-headline" id="Interactive_setup_features">Interactive setup features</span></h3>
<ul>
<li>Media and Network installation mode</li>
<li>Changing keymap and consolefont</li>
<li>Changing time and date</li>
<li>Setup network with netctl</li>
<li>Preparing storage disk, like auto-prepare, partitioning, GUID (gpt) support, 4k sector drive support etc.</li>
<li>Creation of software raid/raid partitions, lvm2 devices and luks encrypted devices</li>
<li>Supports standard linux,raid/raid_partitions,dmraid/fakeraid,lvm2 and encrypted devices</li>
<li>Filesystem support: ext2/3/4, btrfs, f2fs, nilfs2, reiserfs,xfs,jfs,ntfs-3g,vfat</li>
<li>Name scheme support: PARTUUID, PARTLABEL, FSUUID, FSLABEL and KERNEL</li>
<li>Mount support of grub(2) loopback and memdisk installation media</li>
<li>Package selection support</li>
<li>hwdetect script is used for preconfiguration</li>
<li>Auto/Preconfiguration of fstab, kms mode, ssd, mkinitcpio.conf, systemd, crypttab and mdadm.conf</li>
<li>Configuration of basic system files</li>
<li>Setting root password</li>
<li>grub(2) (BIOS and UEFI), refind-efi, systemd-boot, syslinux (BIOS and UEFI) bootloader support</li>
</ul>
<h3>
<span id="FAQ.2C_Known_Issues_and_limitations"></span><span class="mw-headline" id="FAQ,_Known_Issues_and_limitations">FAQ, Known Issues and limitations</span>
</h3>
<ul>
<li>Release specific known issues and workarounds are posted in changelog files.</li>
<li>Check also the forum threads for posted fixes and workarounds.</li>
<li>Why screen stays blank or other weird screen issues happen?</li>
</ul>
<dl><dd><dl><dd>Some hardware does not like the KMS activation, use radeon.modeset=0, i915.modeset=0 or nouveau.modeset=0 on boot prompt.</dd></dl></dd></dl>
<ul><li>dmraid/fakeraid might be broken on some boards, support is not perfect here.</li></ul>
<dl><dd><dl>
<dd>The reason is there are so many different hardware components out there. At the moment 1.0.0rc16 is included, with latest fedora patchset, development has been stopped.</dd>
<dd>mdadm supports some isw and ddf fakeraid chipsets, but assembling during boot is deactivated in /etc/mdadm.conf!</dd>
</dl></dd></dl>
<ul><li>grub2 cannot detect correct bios boot order:</li></ul>
<dl><dd><dl>
<dd>It may happen that hd(x,x) entries are not correct, thus first reboot may not work.</dd>
<dd>Reason: grub cannot detect bios boot order.</dd>
<dd>Fix: Either change bios boot order or change menu.lst to correct entries after successful boot. This cannot be fixed it is a restriction in grub2!</dd>
</dl></dd></dl>
<h3><span class="mw-headline" id="History">History</span></h3>
<p>History of old releases can be found <a rel="nofollow" class="external text" href="http://mirror.rackspace.com/archlinux/iso/archboot/history">here</a>.
</p>
<h3><span class="mw-headline" id="Bugs">Bugs</span></h3>
<p><a rel="nofollow" class="external text" href="https://bugs.archlinux.org">Arch Linux Bugtracker</a>
</p>
<h2><span class="mw-headline" id="Archboot_BETA_ISO_Release">Archboot BETA ISO Release</span></h2>
<ul>
<li>Hybrid image file is provided, which only supports network installation.</li>
<li>Please read the according Changelog files for RAM limitations.</li>
<li>Please check md5sum before using it.</li>
<li>No beta ISO available at the moment.</li>
</ul>
<h2><span class="mw-headline" id="Links">Links</span></h2>
<ul><li><a rel="nofollow" class="external text" href="https://projects.archlinux.org/archboot.git/">GIT repository</a></li></ul>
<h2><span class="mw-headline" id="Howto:_Create_image_files">Howto: Create image files</span></h2>
<p>(Quick regeneration of installation media with latest available core packages)
</p>
<h3><span class="mw-headline" id="Requirements">Requirements</span></h3>
<ul><li>~ 7GB free space on disk</li></ul>
<h3><span class="mw-headline" id="Create_archboot_chroot">Create archboot chroot</span></h3>
<ul><li>Install archboot:</li></ul>
<p>run as root:
</p>
<pre>mkdir -p <i>x86_64_chroot</i>/var/lib/pacman
pacman --root "<i>x86_64_chroot</i>" -Sy base archboot --noconfirm --noprogressbar
</pre>
<ul><li>Enter archboot first usage x86_64 container:</li></ul>
<p>Start container, run as root:
</p>
<pre>systemd-nspawn --capability=CAP_MKNOD --register=no -M archboot -D <i>x86_64_chroot</i>
</pre>
<p>Generate localisation:
</p>
<pre>echo "en_US ISO-8859-1" &gt;&gt; /etc/locale.gen
echo "en_US.UTF-8 UTF-8" &gt;&gt; /etc/locale.gen
locale-gen
</pre>
<p>Configure pacman:
</p>
<pre>vim /etc/pacman.d/mirrorlist
pacman-key --init
pacman-key --populate archlinux
</pre>
<p>reinstall linux to get images in /boot:
</p>
<pre>pacman -S linux
</pre>
<h3><span class="mw-headline" id="Update_to_latest_packages">Update to latest packages</span></h3>
<p><a href="../en/Pacman.html#Upgrading_packages" title="Pacman">update</a> to latest available packages.
</p>
<h3><span class="mw-headline" id="Generate_images">Generate images</span></h3>
<ul><li>Startup container, run as root:</li></ul>
<pre>systemd-nspawn --capability=CAP_MKNOD --register=no -M archboot -D <i>x86_64_chroot</i></pre>
<ul><li>Allow loop devices, run in main system as root:</li></ul>
<pre>echo 'b 7:* rwm' &gt; /sys/fs/cgroup/devices/machine.slice/archboot.scope/devices.allow
echo 'c 10:237 rwm' &gt; /sys/fs/cgroup/devices/machine.slice/archboot.scope/devices.allow
</pre>
<ul><li>Create images, run in container (needs quite some time ...)</li></ul>
<pre>archboot-x86_64.sh -t
archboot-x86_64.sh -g
</pre>
<ul><li>Finished you get a bunch of images.</li></ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:System_recovery.html" title="Category:System recovery">System recovery</a></li>
<li><a href="../en/Category:Installation_process.html" title="Category:Installation process">Installation process</a></li>
<li><a href="../en/Category:Live_Arch_systems.html" title="Category:Live Arch systems">Live Arch systems</a></li>
<li><a href="../en/Category:Arch_projects.html" title="Category:Arch projects">Arch projects</a></li>
</ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Archboot&amp;oldid=626661">https://wiki.archlinux.org/index.php?title=Archboot&amp;oldid=626661</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 24 July 2020, at 16:15.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
