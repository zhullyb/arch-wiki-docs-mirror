<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>ASUS x205ta - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-ASUS_x205ta rootpage-ASUS_x205ta skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">ASUS x205ta</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Booting_Arch_install_media"><span class="tocnumber">1</span> <span class="toctext">Booting Arch install media</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#OS_Independent_Method"><span class="tocnumber">1.1</span> <span class="toctext">OS Independent Method</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Booting_the_x205ta_from_USB"><span class="tocnumber">1.2</span> <span class="toctext">Booting the x205ta from USB</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4">
<a href="#Install_Arch"><span class="tocnumber">2</span> <span class="toctext">Install Arch</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#Enable_wifi"><span class="tocnumber">2.1</span> <span class="toctext">Enable wifi</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Install_Arch_2"><span class="tocnumber">2.2</span> <span class="toctext">Install Arch</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7">
<a href="#Getting_hardware_working_on_up-to-date_kernels"><span class="tocnumber">3</span> <span class="toctext">Getting hardware working on up-to-date kernels</span></a>
<ul>
<li class="toclevel-2 tocsection-8">
<a href="#Kernel_patches"><span class="tocnumber">3.1</span> <span class="toctext">Kernel patches</span></a>
<ul>
<li class="toclevel-3 tocsection-9"><a href="#Patch_history"><span class="tocnumber">3.1.1</span> <span class="toctext">Patch history</span></a></li>
<li class="toclevel-3 tocsection-10"><a href="#AUR_package_with_patched_kernel"><span class="tocnumber">3.1.2</span> <span class="toctext">AUR package with patched kernel</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-11">
<a href="#Additional_config"><span class="tocnumber">3.2</span> <span class="toctext">Additional config</span></a>
<ul>
<li class="toclevel-3 tocsection-12"><a href="#Freezing"><span class="tocnumber">3.2.1</span> <span class="toctext">Freezing</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#Sound"><span class="tocnumber">3.2.2</span> <span class="toctext">Sound</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#Bluetooth"><span class="tocnumber">3.2.3</span> <span class="toctext">Bluetooth</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#WIFI_Breaks_after_resume_from_hibernating"><span class="tocnumber">3.2.4</span> <span class="toctext">WIFI Breaks after resume from hibernating</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-16">
<a href="#On_older_kernels"><span class="tocnumber">4</span> <span class="toctext">On older kernels</span></a>
<ul>
<li class="toclevel-2 tocsection-17"><a href="#Sound_2"><span class="tocnumber">4.1</span> <span class="toctext">Sound</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Power_level_information_(ACPI)"><span class="tocnumber">4.2</span> <span class="toctext">Power level information (ACPI)</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#Touchpad"><span class="tocnumber">4.3</span> <span class="toctext">Touchpad</span></a></li>
<li class="toclevel-2 tocsection-20">
<a href="#SD_card_reader"><span class="tocnumber">4.4</span> <span class="toctext">SD card reader</span></a>
<ul>
<li class="toclevel-3 tocsection-21"><a href="#Device_support"><span class="tocnumber">4.4.1</span> <span class="toctext">Device support</span></a></li>
<li class="toclevel-3 tocsection-22"><a href="#RPMB_Partition"><span class="tocnumber">4.4.2</span> <span class="toctext">RPMB Partition</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-23"><a href="#Special_keys"><span class="tocnumber">4.5</span> <span class="toctext">Special keys</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-24"><a href="#See_also"><span class="tocnumber">5</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Booting_Arch_install_media">Booting Arch install media</span></h2>
<p>The Asus x205TA and x206HA have an exclusively 32-bit EFI bootloader. Since Arch does not include a 32-bit EFI loader in the standard install image, we need to add one. This procedure may work for other exclusively 32-bit EFI machines.
</p>
<p>The current image (ARCH_201801) does include the drivers for the x205TA's broadcom wireless modem, so we need to copy efivars during boot as explained below. Adding drivers to the image is not required anymore.
Booting archlinux on the x205TA can be achieved in 2 (possibly more) ways: by creating a bootia32.efi loader and modifying an existing iso, or by adding a precompiled bootia32.efi and manually starting archlinux iso from there.
</p>
<h3><span class="mw-headline" id="OS_Independent_Method">OS Independent Method</span></h3>
<p>This method is not canonical and should not be used unless you are having trouble with the proper method. 
On the other had this procedure can be followed without compiling bootia32.efi and it might be useful to be used under Windows or any other operating system when no linux systems are around.
Create a bootable usb using standard methods (es.Rufus on windows).
Download a prebuilt bootia32.efi from any source you trust (es <a rel="nofollow" class="external free" href="https://github.com/jfwells/linux-asus-t100ta/blob/master/boot/bootia32.efi">https://github.com/jfwells/linux-asus-t100ta/blob/master/boot/bootia32.efi</a>) and copy it to /EFI/boot folder on the usb.
Create a custom grub.cfg file, replacing &lt;FS-LABEL&gt; with the correct label for your iso as mentioned above.
Copy the custom grub.cfg file to the root folder of the usb.
Once booted the x205TA from the (as mentioned above) type the following command in the grub console 
</p>
<pre>$ configfile /grub.cfg
</pre>
<p>Proceed to arch installation as usual.
</p>
<h3><span class="mw-headline" id="Booting_the_x205ta_from_USB">Booting the x205ta from USB</span></h3>
<p>Insert your new install medium into your x205ta.
</p>
<p>Enter the bios by holding <i>F2</i> while pressing the power button to turn the x205ta on. Hammering on F2 while the boot process is starting may help too. There is an alternative method to enter the bios by booting into windows and selecting the appropriate menu options (<a rel="nofollow" class="external text" href="https://www.asus.com/support/FAQ/1008329/">tutorial</a>), but the F2 method allows you to avoid windows entirely.
</p>
<p>Turn off secure boot. This procedure varies between different BIOS versions. Mine was achieved by going to 'Security', and switching 'Secure Boot Control' to 'Disabled'.
</p>
<p>Select your USB medium from the 'Boot Override' section of the 'Save &amp; Exit' menu.
</p>
<h2><span class="mw-headline" id="Install_Arch">Install Arch</span></h2>
<h3><span class="mw-headline" id="Enable_wifi">Enable wifi</span></h3>
<p>The firmware for your wifi modem will not load by default. In addition to the driver we copied over, we will need to copy over our local EFI variables:
</p>
<pre>$ cp /sys/firmware/efi/efivars/nvram-74b00bd9-805a-4d61-b51f-43268123d113 /lib/firmware/brcm/brcmfmac43340-sdio.txt
</pre>
<p>Now we can probe the wifi kernel module again to bring it up:
</p>
<pre>$ rmmod brcmfmac
$ modprobe brcmfmac
</pre>
<p>If you want to run 4.4 kernel, you must revert <a rel="nofollow" class="external text" href="https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=9faac7b95ea4f9e83b7a914084cc81ef1632fd91">this commit</a> to get wifi working (regression in the MMC-layer)
</p>
<h3><span class="mw-headline" id="Install_Arch_2">Install Arch</span></h3>
<p>Proceed as usual.
</p>
<h2><span class="mw-headline" id="Getting_hardware_working_on_up-to-date_kernels">Getting hardware working on up-to-date kernels</span></h2>
<p>With some kernel patches on newer kernels the x205ta works. The Intel Baytrail CPU should be able to consume less power than it does. There are still occasional freezes possible due to the CPU power states not being properly supported. (Refer to "Freezes".)
</p>
<h3><span class="mw-headline" id="Kernel_patches">Kernel patches</span></h3>
<h4><span class="mw-headline" id="Patch_history">Patch history</span></h4>
<p>Three very elaborate threads contain the history of patches for the kernel for the x205ta: <a rel="nofollow" class="external text" href="https://bugzilla.kernel.org/show_bug.cgi?id=109051">kernel bug for baytrail power states</a>, <a rel="nofollow" class="external text" href="https://bugzilla.kernel.org/show_bug.cgi?id=95681">kernel bug for chtrt5645</a> and most important <a rel="nofollow" class="external text" href="https://ubuntuforums.org/showthread.php?t=2254322">a Ubuntu forum thread</a> with <a rel="nofollow" class="external text" href="https://ubuntuforums.org/showthread.php?t=2254322&amp;page=158&amp;p=13625163#post13625163">a patched kernel provided by harryharryharry</a>.
</p>
<h4><span class="mw-headline" id="AUR_package_with_patched_kernel">AUR package with patched kernel</span></h4>
<p>AUR package <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/linux-x205ta/">linux-x205ta</a></span><sup><small>AUR</small></sup> applies the patches proposed in the threads above to the standard arch kernel. Sources and references for each patch are in the PKGBUILD file. The package also downloads efivars for the wifi firmware which enables 5 GHz wifi.
</p>
<p>Compiling the kernel with the provided config takes about one hour.
</p>
<p>The x205ta has a limited amount of RAM, so do not extract and build the kernel in tmpfs.
</p>
<p>Manual interventions and patches are needed on older kernels as a lot of patches came in over time. Refer to "On older kernels" below for instructions for older kernels.
</p>
<h3><span class="mw-headline" id="Additional_config">Additional config</span></h3>
<h4><span class="mw-headline" id="Freezing">Freezing</span></h4>
<p>Depending on kernel versions, on an unpatched kernel, the x205ta regularly freezes, where the x205ta can only be restarted by holding down the power button for several seconds. Freezes are due to poor support for the baytrail power functions. Refer to the <a rel="nofollow" class="external text" href="https://bugzilla.kernel.org/show_bug.cgi?id=109051">kernel bug</a> for more info. AUR package <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/linux-x205ta/">linux-x205ta</a></span><sup><small>AUR</small></sup> applies what seems to be the most effective patch.
</p>
<p>Setting kernel argument <code>intel_idle.max_cstate=1</code> solves the problem on a patched kernel without affecting performance. Power saving functionalities should in theory be impeded using this patch and kernel parameter, but the laptop's battery life remains impressive and freezes are not frequent. The <a href="../en/Kernel_parameters.html" title="Kernel parameters">Kernel parameters</a> page may help with adding to the kernel parameters.
</p>
<h4><span class="mw-headline" id="Sound">Sound</span></h4>
<p>There has recently been some success in getting the x205ta's Realtek RT5648 sound card working, including microphone support. The relevant patches are in Linux release 4.11 and later. Updated Alsa-lib's UCM files are available in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/alsa-lib-x205ta/">alsa-lib-x205ta</a></span><sup><small>AUR</small></sup>.
</p>
<p>In order to have working headphone jack (as of kernel 4.14) is it required to add an "options" line in any modprobe file 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/50-x205ta.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options snd_soc_rt5645 quirk=0x31
</pre>
<p>To select headphones over speakers (which cannot be done automatically as of kernel 4.14) consider using <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pavucontrol">pavucontrol</a></span>.
</p>
<h4><span class="mw-headline" id="Bluetooth">Bluetooth</span></h4>
<p>Install a correct firmware file (e.g. <code>BCM43341B0_002.001.014.0122.0176.hcd</code> from Windows 10 driver) as <code>/lib/firmware/brcm/BCM43341B0.hcd</code>.
See <a rel="nofollow" class="external text" href="https://ubuntuforums.org/showthread.php?t=2254322&amp;page=97">this page</a> for more information on the hcd file.
</p>
<p>In order to get bluetooth working create a systemd unit
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/btattach.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Btattach

[Service]
Type=simple
ExecStart=/usr/bin/btattach --bredr /dev/ttyS1 -P bcm
ExecStop=/usr/bin/killall btattach

[Install]
WantedBy=multi-user.target
</pre>
<p>and <a href="../en/Systemd.html#Using_units" class="mw-redirect" title="Enable">enable</a> the service.
</p>
<p>Next, follow the normal steps to activate <a href="../en/Bluetooth.html" title="Bluetooth">bluetooth</a>.
</p>
<h4><span class="mw-headline" id="WIFI_Breaks_after_resume_from_hibernating">WIFI Breaks after resume from hibernating</span></h4>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/lib/systemd/system-sleep/hibernate.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/usr/bin/env bash

case $1 in
    pre)
        rmmod brcmfmac
        ;;
    post)
        modprobe brcmfmac
        ;;
esac

exit 0
</pre>
<p>and make the script executable.
</p>
<h2><span class="mw-headline" id="On_older_kernels">On older kernels</span></h2>
<p>Patches came in over time. Try to use a new kernel!
</p>
<h3><span class="mw-headline" id="Sound_2">Sound</span></h3>
<p>See <a rel="nofollow" class="external text" href="https://ubuntuforums.org/showthread.php?t=2254322&amp;page=126&amp;p=13592053#post13592053">for a step-by-step description of how to compile Pierre Bossart's patches</a> for sound card support. Not needed as of v4.11.
</p>
<h3>
<span id="Power_level_information_.28ACPI.29"></span><span class="mw-headline" id="Power_level_information_(ACPI)">Power level information (ACPI)</span>
</h3>
<p>Before 4.2.0-1 kernel version, you must compile your own kernel with the appropriate flag ACPI_I2C_OPREGION=y (cf. <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/44582)">FS#44582)</a>
</p>
<p>You should have no problem with the power level information now if you obtain the latest kernel version &gt;= 4.2.*. See <a rel="nofollow" class="external text" href="https://ifranali.blogspot.com/2015/04/installing-arch-linux-on-asus-x205ta.html">this page.</a><sup title="Last check status: 404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2020-12-19 ⓘ]</sup>
</p>
<h3><span class="mw-headline" id="Touchpad">Touchpad</span></h3>
<p>With kernel version &lt; 4.3.* the x205ta touchpad is recognised as a mouse and so gestures (e.g., two-finger scrolling) are not recognised.
</p>
<p>Since kernel 4.3.* a <a rel="nofollow" class="external text" href="https://lkml.org/lkml/2015/8/24/647">simpler patch</a> was merged and provides all touch/clickpad functionality out of the box. 
</p>
<p>Explicitly assigning the 'synaptics' driver to 'Elan Touchpad' in xorg.conf provides even more functionality (e.g., two-finger tap to right click, etc.)
</p>
<p>Example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/elan_synaptics.conf </pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "InputClass"
    Identifier "Elan Touchpad"
    MatchIsTouchpad "on"
    Driver "synaptics"
    Option "TapButton1" "1"
    Option "TapButton2" "3"
    Option "TapButton3" "2"
    Option "VertTwoFingerScroll" "on"
    Option "HorizTwoFingerScroll" "on"
EndSection
</pre>
<h3><span class="mw-headline" id="SD_card_reader">SD card reader</span></h3>
<h4><span class="mw-headline" id="Device_support">Device support</span></h4>
<p>For older kernel versions &lt; v4.4-rc1 the micro SD card reader will probably not work out of the box. <a rel="nofollow" class="external text" href="https://wiki.debian.org/InstallingDebianOn/Asus/X205TA">This page</a> contains a simple fix. First, create the file as follows:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/sdhci.conf </pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Adjustment to make micro SD card reader work
options sdhci debug_quirks=0x8000
</pre>
<p>Then you will have to run <a href="../en/Mkinitcpio.html" title="Mkinitcpio">mkinitcpio</a>. Make sure you have root privileges:
</p>
<pre>$ mkinitcpio -v -g /boot/initramfs-linux.img
</pre>
<p>This will update your initramfs file and load the new configuration you made in "sdhci.conf". You should be able to view your Micro SD card after a reboot.
</p>
<p>With <a rel="nofollow" class="external text" href="https://lkml.org/lkml/2015/9/15/394">this patch</a> the card reader should work out of the box.
</p>
<h4><span class="mw-headline" id="RPMB_Partition">RPMB Partition</span></h4>
<p>For kernel versions &lt; v4.15-rc1 there can be timeouts when probing the Replay Protected Memory Block partition. Refer to this page for more info and a kernel patch disabling the RPMB partition should you never need the RPMB partition. This is <a rel="nofollow" class="external text" href="https://github.com/torvalds/linux/commit/97548575bef38abd06690a5a6f6816200c7e77f7">fixed in a patch</a> as of v4.15-rc1.
</p>
<h3><span class="mw-headline" id="Special_keys">Special keys</span></h3>
<p>On older kernel versions, out of the box, the only keysyms correctly sent are the audio volume keys (F10-F12). Ironic, since the sound card does not work. Can be conveniently remapped to control screen brightness (e.g., by calling xbacklight). On current kernel versions the sleep button, brightness buttons, display button and volume buttons all work in XFCE.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<p><a rel="nofollow" class="external text" href="http://ubuntuforums.org/showthread.php?t=2254322&amp;p=13414345#post13414345">Distro-Agnostic Installation Guide for the X205TA</a>
</p>
<p><a rel="nofollow" class="external text" href="https://ifranali.blogspot.com/2015/04/installing-arch-linux-on-asus-x205ta.html">Ifran's ASUS x205ta Installation Guide</a><sup title="Last check status: 404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2020-12-19 ⓘ]</sup>
</p>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:ASUS.html" title="Category:ASUS">ASUS</a></li>
<li><a href="../en/Category:Mobile_devices.html" title="Category:Mobile devices">Mobile devices</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=ASUS_x205ta&amp;oldid=645978">https://wiki.archlinux.org/index.php?title=ASUS_x205ta&amp;oldid=645978</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 19 December 2020, at 22:09.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
