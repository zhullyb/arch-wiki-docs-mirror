<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>AMDGPU PRO - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-AMDGPU_PRO rootpage-AMDGPU_PRO skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">AMDGPU PRO</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<p><br>
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  For Users of a hybrid setup with both an Intel GPU and an AMD GPU, usage of the proprietary AMDGPU Pro Workstation Driver might not work as expected due to different MESA implementations (see <a href="#Intel_+_AMD_hybrid_graphics">#Intel + AMD hybrid graphics</a> and <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/drm/amd/-/issues/985#note_359417">this</a> developer response) </div>
<p>The amdgpu-pro-installer contains proprietary components for AMDGPU (a.k.a. Radeon Software for Linux).
</p>
<p>For proprietary OpenGL implementation, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/amdgpu-pro-libgl/">amdgpu-pro-libgl</a></span><sup><small>AUR</small></sup>. See <a href="../en/AMDGPU.html#AMDGPU_PRO" title="AMDGPU">AMDGPU#AMDGPU PRO</a> for more details.
</p>
<p>For proprietary OpenCL implementation, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/opencl-amd/">opencl-amd</a></span><sup><small>AUR</small></sup>. See <a href="../en/GPGPU.html#AMD/ATI" title="GPGPU">GPGPU#AMD/ATI</a> for more details.
</p>
<p>For proprietary Vulkan implementation, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/vulkan-amdgpu-pro/">vulkan-amdgpu-pro</a></span><sup><small>AUR</small></sup>. See <a href="../en/Vulkan.html" title="Vulkan">Vulkan</a> for more details.
</p>
<p>For Advanced Media Framework implementation, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/amf-amdgpu-pro/">amf-amdgpu-pro</a></span><sup><small>AUR</small></sup>. See <a href="../en/FFmpeg.html#AMD_AMF" title="FFmpeg">FFmpeg#AMD AMF</a> for more details.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Troubleshooting"><span class="tocnumber">1</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Intel_+_AMD_hybrid_graphics"><span class="tocnumber">1.1</span> <span class="toctext">Intel + AMD hybrid graphics</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Uninstalling_packages"><span class="tocnumber">1.2</span> <span class="toctext">Uninstalling packages</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Southern_Islands_(SI)_or_Sea_Islands_(CIK)_GPUs"><span class="tocnumber">1.3</span> <span class="toctext">Southern Islands (SI) or Sea Islands (CIK) GPUs</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#How_to_ensure_you_are_using_AMDGPU-PRO_driver"><span class="tocnumber">1.4</span> <span class="toctext">How to ensure you are using AMDGPU-PRO driver</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Workaround_for_using_proprietary_OpenGL"><span class="tocnumber">1.5</span> <span class="toctext">Workaround for using proprietary OpenGL</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3>
<span id="Intel_.2B_AMD_hybrid_graphics"></span><span class="mw-headline" id="Intel_+_AMD_hybrid_graphics">Intel + AMD hybrid graphics</span>
</h3>
<p>Currently (as of version 19.30) there is a problem when using the AMDGPU Pro OpenGL driver alongside with an Intel GPU. It is a common configuration for laptops, but also applies to desktop users in case you set your Intel GPU as primary. When you boot your machine, you will get a black screen, but with your mouse cursor moving normally. If you have a suggestion, please edit this Wiki page. Reverse PRIME could probably be a solution, but <a href="../en/PRIME.html#Reverse_PRIME" title="PRIME">PRIME#Reverse PRIME</a> lacks this information.
</p>
<p>If you are affected, please upvote <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/drm/amd/issues/985">this</a> bug report.
</p>
<h3><span class="mw-headline" id="Uninstalling_packages">Uninstalling packages</span></h3>
<p>If you are in trouble, for example, you cannot login to your system due to black screen, you can revert all back by uninstalling all packages related to amdgpu pro. Switch to the tty2 (ctrl+alt+f2), login to the system and run <code>pacman -R $(pacman -Qg Radeon_Software_for_Linux | cut -f2 -d" ")</code> and reboot.
</p>
<h3>
<span id="Southern_Islands_.28SI.29_or_Sea_Islands_.28CIK.29_GPUs"></span><span class="mw-headline" id="Southern_Islands_(SI)_or_Sea_Islands_(CIK)_GPUs">Southern Islands (SI) or Sea Islands (CIK) GPUs</span>
</h3>
<p>If using Southern Islands (SI) or Sea Islands (CIK) GPU, when running <code>clinfo</code>, you get:
</p>
<pre>amdgpu_device_initialize: DRM version is 2.50.0 but this driver is only compatible with 3.x.x.
</pre>
<p>then ensure you are using amdgpu driver, but not radeon. Check which driver is currently in use with <code>lspci -k</code>:
</p>
<pre>03:00.0 Display controller: Advanced Micro Devices, Inc. [AMD/ATI] Opal XT [Radeon R7 M265/M365X/M465]
        Subsystem: Acer Incorporated [ALI] Aspire V5 Radeon R7 M265
        <b>Kernel driver in use: radeon</b>
        Kernel modules: radeon, amdgpu
</pre>
<p>See <a href="../en/AMDGPU.html#Enable_Southern_Islands_(SI)_and_Sea_Islands_(CIK)_support" title="AMDGPU">AMDGPU#Enable Southern Islands (SI) and Sea Islands (CIK) support</a> for more information.
</p>
<h3><span class="mw-headline" id="How_to_ensure_you_are_using_AMDGPU-PRO_driver">How to ensure you are using AMDGPU-PRO driver</span></h3>
<p>Run the following command:
</p>
<pre>$ glxinfo | grep "OpenGL vendor string" | cut -f2 -d":" | xargs
</pre>
<p>If it returns <code>AMD</code>, then you are running open source driver. If it returns <code>Advanced Micro Devices, Inc.</code>, then you are running proprietary driver.
</p>
<p>Alternatively, run <a href="../en/Benchmarking.html#glmark2" title="Benchmarking">glmark2</a>. When using open driver, in OpenGL Information you will see:
</p>
<pre>   GL_VENDOR:     AMD
   GL_RENDERER:   Radeon RX 580 Series (POLARIS10, DRM 3.40.0, 5.10.7-arch1-1, LLVM 11.0.1)
   GL_VERSION:    4.6 (Compatibility Profile) Mesa 20.3.3
</pre>
<p>But when using closed driver, you will see:
</p>
<pre>   GL_VENDOR:     ATI Technologies Inc.
   GL_RENDERER:   Radeon RX 580 Series
   GL_VERSION:    4.6.14756 Compatibility Profile Context
</pre>
<h3><span class="mw-headline" id="Workaround_for_using_proprietary_OpenGL">Workaround for using proprietary OpenGL</span></h3>
<p>As of version 20.20_1098277-1 you can use proprietary OpenGL with workaround. You need to install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/amdgpu-pro-libgl/">amdgpu-pro-libgl</a></span><sup><small>AUR</small></sup> only before launching application that requires it (<a href="../en/DaVinci_Resolve.html" title="DaVinci Resolve">DaVinci Resolve</a> in most cases). Remove it, after your are done. Otherwise, your Display Manager (sddm, for example) could not be loaded at next system boot. In case you are already in such situation, just switch to the tty2 (Crtl+Alt+F2), login to the system and remove <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/amdgpu-pro-libgl/">amdgpu-pro-libgl</a></span><sup><small>AUR</small></sup>. Then run <code>systemctl restart sddm.service</code>, then switch to tty1.
</p>
<p>Alternatively, you can extract the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/amdgpu-pro-libgl/">amdgpu-pro-libgl</a></span><sup><small>AUR</small></sup> package to a non-root location, then launch the program that requires the drivers with the following environment variables:
</p>
<pre>$ LD_LIBRARY_PATH="$PACKAGEPATH/opt/amdgpu-pro/lib/x86_64-linux-gnu:${LD_LIBRARY_PATH}" LIBGL_DRIVERS_PATH="$PACKAGEPATH/usr/lib/x86_64-linux-gnu/dri/" dri_driver="amdgpu" command
</pre>
<p>As of 20.45_1188099-5, you do not need to use workaround. Just launch your application with progl prefix, for example:
</p>
<pre>$ progl glmark2
</pre>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Graphics.html" title="Category:Graphics">Graphics</a></li>
<li><a href="../en/Category:X_server.html" title="Category:X server">X server</a></li>
</ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=AMDGPU_PRO&amp;oldid=663714">https://wiki.archlinux.org/index.php?title=AMDGPU_PRO&amp;oldid=663714</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 22 April 2021, at 23:06.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
