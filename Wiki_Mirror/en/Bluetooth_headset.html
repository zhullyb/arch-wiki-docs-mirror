<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Bluetooth headset - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Bluetooth_headset rootpage-Bluetooth_headset skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Bluetooth headset</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../en/Bluetooth.html" title="Bluetooth">Bluetooth</a></li>
</ul>
</div>
<p>Currently, Arch Linux supports the A2DP profile (Audio Sink) for remote audio playback with the default installation.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Headset_via_Bluez5/PulseAudio"><span class="tocnumber">1</span> <span class="toctext">Headset via Bluez5/PulseAudio</span></a>
<ul>
<li class="toclevel-2 tocsection-2">
<a href="#Configuration_via_CLI"><span class="tocnumber">1.1</span> <span class="toctext">Configuration via CLI</span></a>
<ul>
<li class="toclevel-3 tocsection-3"><a href="#Setting_up_auto_connection"><span class="tocnumber">1.1.1</span> <span class="toctext">Setting up auto connection</span></a></li>
<li class="toclevel-3 tocsection-4"><a href="#Media_controls"><span class="tocnumber">1.1.2</span> <span class="toctext">Media controls</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-5"><a href="#Configuration_via_GNOME_Bluetooth"><span class="tocnumber">1.2</span> <span class="toctext">Configuration via GNOME Bluetooth</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#LDAC/aptX"><span class="tocnumber">1.3</span> <span class="toctext">LDAC/aptX</span></a></li>
<li class="toclevel-2 tocsection-7">
<a href="#Troubleshooting"><span class="tocnumber">1.4</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-3 tocsection-8"><a href="#Bad_sound_/_Static_noise_/_%22Muddy%22_sound"><span class="tocnumber">1.4.1</span> <span class="toctext">Bad sound / Static noise / "Muddy" sound</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="#Selected_audio_profile,_but_headset_inactive_and_audio_cannot_be_redirected"><span class="tocnumber">1.4.2</span> <span class="toctext">Selected audio profile, but headset inactive and audio cannot be redirected</span></a></li>
<li class="toclevel-3 tocsection-10"><a href="#Pairing_fails_with_AuthenticationFailed"><span class="tocnumber">1.4.3</span> <span class="toctext">Pairing fails with AuthenticationFailed</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#Pairing_works,_but_connecting_does_not"><span class="tocnumber">1.4.4</span> <span class="toctext">Pairing works, but connecting does not</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="#Connecting_works,_but_there_are_sound_glitches_all_the_time"><span class="tocnumber">1.4.5</span> <span class="toctext">Connecting works, but there are sound glitches all the time</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#Connecting_works,_but_I_cannot_play_sound"><span class="tocnumber">1.4.6</span> <span class="toctext">Connecting works, but I cannot play sound</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#Connecting_works,_sound_plays_fine_until_headphones_become_idle,_then_stutters"><span class="tocnumber">1.4.7</span> <span class="toctext">Connecting works, sound plays fine until headphones become idle, then stutters</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#UUIDs_has_unsupported_type"><span class="tocnumber">1.4.8</span> <span class="toctext">UUIDs has unsupported type</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="#PC_shows_device_as_paired,_but_is_not_recognized_by_device"><span class="tocnumber">1.4.9</span> <span class="toctext">PC shows device as paired, but is not recognized by device</span></a></li>
<li class="toclevel-3 tocsection-17"><a href="#Device_connects,_then_disconnects_after_a_few_moments"><span class="tocnumber">1.4.10</span> <span class="toctext">Device connects, then disconnects after a few moments</span></a></li>
<li class="toclevel-3 tocsection-18"><a href="#Apple_AirPods_have_low_volume"><span class="tocnumber">1.4.11</span> <span class="toctext">Apple AirPods have low volume</span></a></li>
<li class="toclevel-3 tocsection-19"><a href="#HSP_problem:_the_bluetooth_sink_and_source_are_created,_but_no_audio_is_being_transmitted"><span class="tocnumber">1.4.12</span> <span class="toctext">HSP problem: the bluetooth sink and source are created, but no audio is being transmitted</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-20"><a href="#Headset_via_Bluez5/bluez-alsa"><span class="tocnumber">2</span> <span class="toctext">Headset via Bluez5/bluez-alsa</span></a></li>
<li class="toclevel-1 tocsection-21">
<a href="#Legacy_documentation:_ALSA,_bluez5_and_PulseAudio_method"><span class="tocnumber">3</span> <span class="toctext">Legacy documentation: ALSA, bluez5 and PulseAudio method</span></a>
<ul>
<li class="toclevel-2 tocsection-22">
<a href="#Install_Software_Packages"><span class="tocnumber">3.1</span> <span class="toctext">Install Software Packages</span></a>
<ul>
<li class="toclevel-3 tocsection-23"><a href="#Install_ALSA_and_associated_libraries"><span class="tocnumber">3.1.1</span> <span class="toctext">Install ALSA and associated libraries</span></a></li>
<li class="toclevel-3 tocsection-24"><a href="#Install_Bluez5"><span class="tocnumber">3.1.2</span> <span class="toctext">Install Bluez5</span></a></li>
<li class="toclevel-3 tocsection-25"><a href="#Install_Audacious"><span class="tocnumber">3.1.3</span> <span class="toctext">Install Audacious</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-26">
<a href="#Procedure"><span class="tocnumber">3.2</span> <span class="toctext">Procedure</span></a>
<ul>
<li class="toclevel-3 tocsection-27">
<a href="#Miscellaneous_configuration_files"><span class="tocnumber">3.2.1</span> <span class="toctext">Miscellaneous configuration files</span></a>
<ul>
<li class="toclevel-4 tocsection-28"><a href="#ALSA_/etc/asound.conf"><span class="tocnumber">3.2.1.1</span> <span class="toctext">ALSA /etc/asound.conf</span></a></li>
<li class="toclevel-4 tocsection-29"><a href="#/etc/dbus-1/system.d/bluetooth.conf"><span class="tocnumber">3.2.1.2</span> <span class="toctext">/etc/dbus-1/system.d/bluetooth.conf</span></a></li>
<li class="toclevel-4 tocsection-30"><a href="#Tested_applications"><span class="tocnumber">3.2.1.3</span> <span class="toctext">Tested applications</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-31">
<a href="#Switch_between_HSP/HFP_and_A2DP_setting"><span class="tocnumber">4</span> <span class="toctext">Switch between HSP/HFP and A2DP setting</span></a>
<ul>
<li class="toclevel-2 tocsection-32">
<a href="#A2DP_not_working_with_PulseAudio"><span class="tocnumber">4.1</span> <span class="toctext">A2DP not working with PulseAudio</span></a>
<ul>
<li class="toclevel-3 tocsection-33"><a href="#Socket_interface_problem"><span class="tocnumber">4.1.1</span> <span class="toctext">Socket interface problem</span></a></li>
<li class="toclevel-3 tocsection-34"><a href="#A2DP_sink_profile_is_unavailable"><span class="tocnumber">4.1.2</span> <span class="toctext">A2DP sink profile is unavailable</span></a></li>
<li class="toclevel-3 tocsection-35"><a href="#Gnome_with_GDM"><span class="tocnumber">4.1.3</span> <span class="toctext">Gnome with GDM</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-36"><a href="#HFP_not_working_with_PulseAudio"><span class="tocnumber">4.2</span> <span class="toctext">HFP not working with PulseAudio</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-37"><a href="#See_also"><span class="tocnumber">5</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2>
<span id="Headset_via_Bluez5.2FPulseAudio"></span><span class="mw-headline" id="Headset_via_Bluez5/PulseAudio">Headset via Bluez5/PulseAudio</span>
</h2>
<div class="noprint archwiki-template-message">
<p><a href="../File:Merge-arrows-2.png" class="image"><img alt="Merge-arrows-2.png" src="../File:Merge-arrows-2.png" decoding="async" width="48" height="48"></a><b>This article or section is a candidate for merging with <a href="../en/Bluetooth.html" title="Bluetooth">Bluetooth</a>.</b><a href="../File:Merge-arrows-2.png" class="image"><img alt="Merge-arrows-2.png" src="../File:Merge-arrows-2.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Notes:</b> Significant redundancy with general setup on Bluetooth page. Should be merged there. Headset-specific info would stay on this page. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Bluetooth#Merging_general_setup_from_Keyboard,_Mouse,_Headset_pages">Talk:Bluetooth#Merging general setup from Keyboard, Mouse, Headset pages</a>)</div>
</div>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pulseaudio-alsa">pulseaudio-alsa</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pulseaudio-bluetooth">pulseaudio-bluetooth</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-utils">bluez-utils</a></span> providing the <code>bluetoothctl</code> utility.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Before continuing, ensure that the bluetooth device is not blocked by <a href="../en/Network_configuration/Wireless.html#Rfkill_caveat" class="mw-redirect" title="Rfkill">rfkill</a>.</div>
<h3><span class="mw-headline" id="Configuration_via_CLI">Configuration via CLI</span></h3>
<p><a href="../en/Systemd.html#Using_units" class="mw-redirect" title="Start">Start</a> the <code>bluetooth.service</code> systemd unit.
</p>
<p>Now we can use the <i>bluetoothctl</i> command line utility to pair and connect. For troubleshooting and more detailed explanations of <i>bluetoothctl</i> see the <a href="../en/Bluetooth.html" title="Bluetooth">Bluetooth</a> article. Run
</p>
<pre>$ bluetoothctl
</pre>
<p>to be greeted by its internal command prompt. Then enter:
</p>
<pre>[bluetooth]# power on
[bluetooth]# agent on
[bluetooth]# default-agent
[bluetooth]# scan on
</pre>
<p>Now make sure that your headset is in pairing mode. It should be discovered shortly. For example,
</p>
<pre>[NEW] Device 00:1D:43:6D:03:26 Lasmex LBT10
</pre>
<p>shows a device that calls itself <i>"Lasmex LBT10"</i> and has MAC address <i>"00:1D:43:6D:03:26"</i>. We will now use that MAC address to initiate the pairing:
</p>
<pre>[bluetooth]# pair 00:1D:43:6D:03:26
</pre>
<p>After pairing, you also need to explicitly connect the device (if this does not work, try the <code>trust</code> command below <i>before</i> attempting to connect):
</p>
<pre>[bluetooth]# connect 00:1D:43:6D:03:26
</pre>
<p>If you are getting a connection error <code>org.bluez.Error.Failed</code> retry by killing existing PulseAudio daemon first:
</p>
<pre>$ pulseaudio -k
[bluetooth]# connect 00:1D:43:6D:03:26
</pre>
<p>Finally, if you want to automatically connect to this device in the future:
</p>
<pre>[bluetooth]# trust 00:1D:43:6D:03:26
</pre>
<p>If everything works correctly, you now have a separate output device in <a href="../en/PulseAudio.html" title="PulseAudio">PulseAudio</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The device may be off by default. Select its audio profile (<code>OFF</code>, <code>A2DP</code>, <code>HFP</code>) in the "Configuration" tab of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pavucontrol">pavucontrol</a></span>.</div>
<p>You can now redirect any audio through that device using the "Playback" and "Recording" tabs of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pavucontrol">pavucontrol</a></span>.
</p>
<p>You can now disable scanning again and exit the program:
</p>
<pre>[bluetooth]# scan off
[bluetooth]# exit
</pre>
<h4><span class="mw-headline" id="Setting_up_auto_connection">Setting up auto connection</span></h4>
<p>To make your headset auto connect you need to enable PulseAudio's switch-on-connect module. Do this by adding the following lines to <code>/etc/pulse/default.pa</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">### Automatically switch to newly-connected devices
load-module module-switch-on-connect
</pre>
<p>Now make <i>bluetoothctl</i> trust your Bluetooth headset by running <i>trust 00:1D:43:6D:03:26</i> inside the <i>bluetoothctl</i> console to prevent errors similar to:
</p>
<pre>bluetoothd[487]: Authentication attempt without agent
bluetoothd[487]: Access denied: org.bluez.Error.Rejected
</pre>
<pre>[bluetooth]# trust 00:1D:43:6D:03:26
</pre>
<p>By default, your Bluetooth adapter will not power on after a reboot. The former method by using <code>hciconfig hci0 up</code> is deprecated, see the <a rel="nofollow" class="external text" href="http://www.bluez.org/release-of-bluez-5-35/">release note</a>. Now you just need to add the line <code>AutoEnable=true</code> in <code>/etc/bluetooth/main.conf</code> at the bottom in the <code>[Policy]</code> section:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/bluetooth/main.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Policy]
AutoEnable=true</pre>
<h4><span class="mw-headline" id="Media_controls">Media controls</span></h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Some headphones like the Sony WH-1000XM3 provide an AVRCP interface. For these types <i>mpris-proxy</i> is not required. Just make sure you have <a href="../en/Keyboard_shortcuts.html#Customization" class="mw-redirect" title="Key binding">key bindings</a> set up for media keys.</div>
<p>To use the media controls they may be forwarded to <a rel="nofollow" class="external text" href="https://specifications.freedesktop.org/mpris-spec/latest/">MPRIS2</a>, where they can be picked up by media players that support mpris for external control. Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-utils">bluez-utils</a></span> and run.
</p>
<pre>$ mpris-proxy
</pre>
<p>In order to start up mpris-proxy in the background and/or when your system starts, you may create a systemd user script
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/systemd/user/mpris-proxy.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Forward bluetooth midi controls via mpris2 so they are picked up by supporting media players

[Service]
Type=simple
ExecStart=/usr/bin/mpris-proxy

[Install]
WantedBy=default.target
</pre>
<p>Then start it
</p>
<pre>$ systemctl --user start mpris-proxy
</pre>
<p>and enable it to start at login
</p>
<pre>$ systemctl --user enable mpris-proxy
</pre>
<h3><span class="mw-headline" id="Configuration_via_GNOME_Bluetooth">Configuration via GNOME Bluetooth</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  The A2DP profile will not activate using this method with pulseaudio 9/10 due to an ongoing bug, leading to possible low quality mono sound. See <a href="#A2DP_not_working_with_PulseAudio">#A2DP not working with PulseAudio</a> for a possible solution.</div>
<p>You can use <a href="../en/Bluetooth.html#Graphical" title="Bluetooth">GNOME Bluetooth</a> graphical front-end to easily configure your bluetooth headset. 
</p>
<p>First, you need to be sure that <code>bluetooth.service</code> systemd unit is running. 
</p>
<p>Open GNOME Bluetooth and activate the bluetooth. After scanning for devices, you can connect to your headset selecting it on the device list. You can directly access to sound configuration panel from the device menu. On the sound panel, a new sink should appear when your device is connected.
</p>
<h3>
<span id="LDAC.2FaptX"></span><span class="mw-headline" id="LDAC/aptX">LDAC/aptX</span>
</h3>
<p><a href="https://en.wikipedia.org/wiki/LDAC_(codec)" class="extiw" title="wikipedia:LDAC (codec)">LDAC</a>/<a href="https://en.wikipedia.org/wiki/aptX" class="extiw" title="wikipedia:aptX">aptX</a> codec support can be enabled by installing <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pulseaudio-modules-bt/">pulseaudio-modules-bt</a></span><sup><small>AUR</small></sup> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libldac">libldac</a></span>, and restarting PulseAudio. See its <a rel="nofollow" class="external text" href="https://github.com/EHfive/pulseaudio-modules-bt">project page</a> for configuration tips.
You can verify the codec you are using for connection by executing: 
</p>
<pre>pactl list | grep a2dp_codec
</pre>
<h3><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Many users report frustration with getting A2DP/Bluetooth Headsets to work. see <a href="#Switch_between_HSP/HFP_and_A2DP_setting">#Switch between HSP/HFP and A2DP setting</a> for additional information.</div>
<h4>
<span id="Bad_sound_.2F_Static_noise_.2F_.22Muddy.22_sound"></span><span class="mw-headline" id='Bad_sound_/_Static_noise_/_"Muddy"_sound'>Bad sound / Static noise / "Muddy" sound</span>
</h4>
<p>If you experience bad sound quality with your headset, it could in all likelihood be because your headset is not set to the correct profile.
See <a href="#Switch_between_HSP/HFP_and_A2DP_setting">#Switch between HSP/HFP and A2DP setting</a> to solve the problem.
</p>
<h4>
<span id="Selected_audio_profile.2C_but_headset_inactive_and_audio_cannot_be_redirected"></span><span class="mw-headline" id="Selected_audio_profile,_but_headset_inactive_and_audio_cannot_be_redirected">Selected audio profile, but headset inactive and audio cannot be redirected</span>
</h4>
<p>Deceptively, this menu is available before the device has been connected; annoyingly it will have no effect. The menu seems to be created as soon as the receiver recognizes the device.
</p>
<p>Make sure to run bluetoothctl (with sudo/as root) and connect the device manually. There may be configuration options to remove the need to do this each time, but neither pairing nor trusting induce automatic connecting for me.
</p>
<h4><span class="mw-headline" id="Pairing_fails_with_AuthenticationFailed">Pairing fails with AuthenticationFailed</span></h4>
<p>If pairing fails, you can try enabling or <a rel="nofollow" class="external text" href="https://stackoverflow.com/questions/12888589/linux-command-line-howto-accept-pairing-for-bluetooth-device-without-pin">disabling SSPMode</a> with:
</p>
<pre># btmgmt ssp off
</pre>
<p>or
</p>
<pre># btmgmt ssp on
</pre>
<p>You may need to turn off BlueTooth while you run this command.
</p>
<h4>
<span id="Pairing_works.2C_but_connecting_does_not"></span><span class="mw-headline" id="Pairing_works,_but_connecting_does_not">Pairing works, but connecting does not</span>
</h4>
<p>You might see the following error in <i>bluetoothctl</i>:
</p>
<pre>[bluetooth]# connect 00:1D:43:6D:03:26
Attempting to connect to 00:1D:43:6D:03:26
Failed to connect: org.bluez.Error.Failed
</pre>
<p>To further investigate, have a look at the log via one of the following commands:
</p>
<pre># systemctl status bluetooth
# journalctl -n 20
</pre>
<p>You might see a message like this:
</p>
<pre>bluetoothd[5556]: a2dp-sink profile connect failed for 00:1D:43:6D:03:26: Protocol not available
</pre>
<p>This may be due to the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pulseaudio-bluetooth">pulseaudio-bluetooth</a></span> package not being installed (or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pulseaudio-modules-bt-git/">pulseaudio-modules-bt-git</a></span><sup><small>AUR</small></sup> <a rel="nofollow" class="external text" href="https://github.com/EHfive/pulseaudio-modules-bt/issues/140">needing a clean reinstall</a>). Install it if it missing, then restart pulseaudio.
</p>
<p>It can also be due to permission, especially if starting pulseaudio as root allows you to connect. Add your user to the <i>lp</i> group, then restart pulseaudio.
See <code>/etc/dbus-1/system.d/bluetooth.conf</code> for reference.
</p>
<p>If the issue is not due to the missing package, the problem in this case is that PulseAudio is not catching up. A common solution to this problem is to restart PulseAudio. Note that it is perfectly fine to run <i>bluetoothctl</i> as root while PulseAudio runs as user. After restarting PulseAudio, retry to connect. It is not necessary to repeat the pairing.
</p>
<p>If restarting PulseAudio does not work, you need to load module-bluetooth-discover.
</p>
<pre># pactl load-module module-bluetooth-discover
</pre>
<p>The same load-module command can be added to <code>/etc/pulse/default.pa</code>.
</p>
<p>If that still does not work, or you are using PulseAudio's system-wide mode, also load the following PulseAudio modules (again these can be loaded via your <code>default.pa</code> or <code>system.pa</code>):
</p>
<pre>module-bluetooth-policy
module-bluez5-device
module-bluez5-discover
</pre>
<p>It's also possible there are no write permissions for the owner of /var/lib/bluetooth. If this is the case, you may get the device to work by removing and re-pairing it, but the issue will return after rebooting. Restoring write permissions fixes this issue:
</p>
<pre>chmod -R u+w /var/lib/bluetooth
</pre>
<h4>
<span id="Connecting_works.2C_but_there_are_sound_glitches_all_the_time"></span><span class="mw-headline" id="Connecting_works,_but_there_are_sound_glitches_all_the_time">Connecting works, but there are sound glitches all the time</span>
</h4>
<p>This is very likely to occur when the Bluetooth and the WiFi share the same chip as they share the same physical antenna and possibly band range (2.4GHz). Although this works seamlessly on Windows, this is not the case on Linux.
</p>
<p>A possible solution is to move your WiFi network to 5GHz so that there will be no interference. If your card/router does not support this, you can upgrade your WiFi drivers/firmware. This approach works on Realtek 8723BE and latest rtl drivers for this chip from AUR.
</p>
<p>If nothing of the previous is possible, a less effective mitigation is to tweak the fragment size and the latency on PulseAudio output port, trying to compensate interference. Reasonable values must be chosen, because these settings can make the audio out of sync (e.g. when playing videos). To change the latency of the bluetooth headset's port (e.g. to 125000 microseconds in the following example):
</p>
<pre>$ pactl set-port-latency-offset &lt;bluez_card&gt; headset-output <b>125000</b>
</pre>
<p>where the identifier of the card can be found with
</p>
<pre>$ pacmd list-sinks | egrep -o 'bluez_card[^&gt;]*'
</pre>
<p>The fragment size can be set in the config file <code>/etc/pulse/daemon.conf</code> and takes effect after a restart of PulseAudio (for more details please see <a href="../en/PulseAudio/Troubleshooting.html#Setting_the_default_fragment_number_and_buffer_size_in_PulseAudio" title="PulseAudio/Troubleshooting">PulseAudio/Troubleshooting#Setting the default fragment number and buffer size in PulseAudio</a>).
</p>
<p>Perhaps it will help to add "options ath9k btcoex_enable = 1" to the <code>/etc/modprobe.d/ath9k.conf</code> (with the appropriate bluetooth adapter):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/ath9k.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># possibly fix for sound glitches
options ath9k btcoex_enable = 1</pre>
<p>Then restart.
</p>
<h4>
<span id="Connecting_works.2C_but_I_cannot_play_sound"></span><span class="mw-headline" id="Connecting_works,_but_I_cannot_play_sound">Connecting works, but I cannot play sound</span>
</h4>
<p>Make sure that you see the following messages in your system log:
</p>
<pre>bluetoothd[5556]: Endpoint registered: sender=:1.83 path=/MediaEndpoint/A2DPSource
bluetoothd[5556]: Endpoint registered: sender=:1.83 path=/MediaEndpoint/A2DPSink
</pre>
<p>If you see a message similar to this, you can go on and investigate your PulseAudio configuration. Otherwise, go back and ensure the connection is successful.
</p>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-go-next.png" class="image"><img alt="Tango-go-next.png" src="../File:Tango-go-next.png" decoding="async" width="48" height="48"></a><b>This article or section is a candidate for moving to <a href="../en/PulseAudio/Troubleshooting.html" title="PulseAudio/Troubleshooting">PulseAudio/Troubleshooting</a>.</b><a href="../File:Tango-go-next.png" class="image"><img alt="Tango-go-next.png" src="../File:Tango-go-next.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Notes:</b> The following seems to be general issue: <a rel="nofollow" class="external autonumber" href="https://wiki.archlinux.org/index.php?title=PulseAudio/Troubleshooting&amp;diff=next&amp;oldid=421986">[1]</a> (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Bluetooth_headset">Talk:Bluetooth headset#</a>)</div>
</div>
<p>When using <a href="../en/GDM.html" title="GDM">GDM</a>, another instance of PulseAudio is started, which "captures" your bluetooth device connection. This can be prevented by <a href="../en/Systemd.html#Using_units" class="mw-redirect" title="Mask">masking</a> the pulseaudio socket for the GDM user by doing the following:
</p>
<pre># mkdir -p  /var/lib/gdm/.config/systemd/user
# ln -s /dev/null  /var/lib/gdm/.config/systemd/user/pulseaudio.socket
</pre>
<p>On next reboot the second instance of PulseAudio will not be started.
</p>
<p>It may happen that bluez wrongly considers an headset as not a2dp capable. In this case, search the index of the bluetooth device with
</p>
<pre>$ pacmd ls
</pre>
<p>Among the output there should be a section related to the bluetooth headset, containing something similar to
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">pacmd ls</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">index: 2
        name: &lt;bluez_card.XX_XX_XX_XX_XX_XX&gt;
        driver: &lt;module-bluez5-device.c&gt;
        owner module: 27
        properties:
                device.description = "SONY MDR-100ABN"
                device.string = "XX:XX:XX:XX:XX:XX"
                device.api = "bluez"
                device.class = "sound"
                ...</pre>
<p>To manually set the profile, run
</p>
<pre>$ pacmd set-card-profile 2 a2dp_sink
</pre>
<p>where 2 is the index of the device retrieved through <code>pacmd ls</code>.
</p>
<h4>
<span id="Connecting_works.2C_sound_plays_fine_until_headphones_become_idle.2C_then_stutters"></span><span class="mw-headline" id="Connecting_works,_sound_plays_fine_until_headphones_become_idle,_then_stutters">Connecting works, sound plays fine until headphones become idle, then stutters</span>
</h4>
<p>If the headphones play sound correctly until they become idle and then stutter on resume (e.g. because the sound is paused, or because no sound is played for a while), try disabling PulseAudio's automatic sink/source suspension on idle.
</p>
<p>See <a href="../en/PulseAudio/Troubleshooting.html#Bluetooth_headset_replay_problems" title="PulseAudio/Troubleshooting">PulseAudio/Troubleshooting#Bluetooth headset replay problems</a> for steps.
</p>
<h4><span class="mw-headline" id="UUIDs_has_unsupported_type">UUIDs has unsupported type</span></h4>
<p>During pairing you might see this output in <i>bluetoothctl</i>:
</p>
<pre>[CHG] Device 00:1D:43:6D:03:26 UUIDs has unsupported type
</pre>
<p>This message is a very common one and can be ignored.
</p>
<h4>
<span id="PC_shows_device_as_paired.2C_but_is_not_recognized_by_device"></span><span class="mw-headline" id="PC_shows_device_as_paired,_but_is_not_recognized_by_device">PC shows device as paired, but is not recognized by device</span>
</h4>
<p>This might be due to the device not supporting bluetooth LE for pairing. 
</p>
<p>Try setting <code>ControllerMode = bredr</code> in <code>/etc/bluetooth/main.conf</code>. See <a rel="nofollow" class="external autonumber" href="https://unix.stackexchange.com/questions/292189/pairing-bose-qc-35-over-bluetooth-on-fedora">[2]</a>.
</p>
<h4>
<span id="Device_connects.2C_then_disconnects_after_a_few_moments"></span><span class="mw-headline" id="Device_connects,_then_disconnects_after_a_few_moments">Device connects, then disconnects after a few moments</span>
</h4>
<p>If you see messages like the following in <code>journalctl</code> output, and your device fails to connect or disconnects shortly after connecting:
</p>
<pre>bluetoothd: Unable to get connect data for Headset Voice gateway: getpeername: Transport endpoint is not connected (107)
bluetoothd: connect error: Connection refused (111)
</pre>
<p>This may be because you have already paired the device with another operating system using the same bluetooth adapter (e.g., dual-booting).  Some devices cannot handle multiple pairings associated with the same MAC address (i.e., bluetooth adapter).  You can fix this by re-pairing the device.  Start by removing the device:
</p>
<pre>$ bluetoothctl
[bluetooth]# devices
Device XX:XX:XX:XX:XX:XX My Device
[bluetooth]# remove XX:XX:XX:XX:XX:XX
</pre>
<p>Then <a href="../en/Systemd.html#Using_units" class="mw-redirect" title="Restart">restart</a> <code>bluetooth.service</code>, turn on your bluetooth adapter, make your device discoverable, re-scan for devices, and re-pair your device.  Depending on your bluetooth manager, you may need to perform a full reboot in order to re-discover the device.
</p>
<h4><span class="mw-headline" id="Apple_AirPods_have_low_volume">Apple AirPods have low volume</span></h4>
<p>Edit <code>bluetooth.service</code> by running <code>systemctl edit --full bluetooth.service</code> and change the line:
</p>
<pre>ExecStart=/usr/lib/bluetooth/bluetoothd
</pre>
<p>to:
</p>
<pre>ExecStart=/usr/lib/bluetooth/bluetoothd --noplugin=avrcp
</pre>
<p>Finally <a href="../en/Systemd.html#Using_units" class="mw-redirect" title="Restart">restart</a> <code>bluetooth.service</code>, <a href="../en/Systemd.html#Using_units" class="mw-redirect" title="Reload">reload</a> systemd manager configuration
</p>
<p>Reconnect your headset.
</p>
<h4>
<span id="HSP_problem:_the_bluetooth_sink_and_source_are_created.2C_but_no_audio_is_being_transmitted"></span><span class="mw-headline" id="HSP_problem:_the_bluetooth_sink_and_source_are_created,_but_no_audio_is_being_transmitted">HSP problem: the bluetooth sink and source are created, but no audio is being transmitted</span>
</h4>
<p>You may be missing firmware or the SCO (audio protocol of HSP and HFP) routing might be wrong. See <a rel="nofollow" class="external autonumber" href="https://www.freedesktop.org/wiki/Software/PulseAudio/Documentation/User/Bluetooth/#index10h3">[3]</a> - the firmware for BCM20702 can be installed via <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/bcm20702a1-firmware/">bcm20702a1-firmware</a></span><sup><small>AUR</small></sup> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/bcm20702b0-firmware/">bcm20702b0-firmware</a></span><sup><small>AUR</small></sup>.
</p>
<h2>
<span id="Headset_via_Bluez5.2Fbluez-alsa"></span><span class="mw-headline" id="Headset_via_Bluez5/bluez-alsa">Headset via Bluez5/bluez-alsa</span>
</h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Bluez5 has dropped direct integration for <a href="../en/Advanced_Linux_Sound_Architecture.html" class="mw-redirect" title="ALSA">ALSA</a> and supports <a href="../en/PulseAudio.html" title="PulseAudio">PulseAudio</a> only. Follow the instructions below if you cannot or do not want to use PulseAudio.</div>
<p>First, ensure that your headset is correctly paired and connected to the system (see for example <code>bluetoothctl</code>).
</p>
<p>Then, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/bluez-alsa-git/">bluez-alsa-git</a></span><sup><small>AUR</small></sup>, start (and enable) the <code>bluealsa</code> service, and add your user to the <code>audio</code> group.
</p>
<p>Run the following command to check if everything is working as intended (replace <code>XX:XX:XX:XX:XX:XX</code> and <code>FILE</code> below):
</p>
<pre>$ aplay -D bluealsa:SRV=org.bluealsa,DEV=XX:XX:XX:XX:XX:XX,PROFILE=a2dp FILE.wav
</pre>
<p>Finally, add the following lines to your <code>~/.asoundrc</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.asoundrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">defaults.bluealsa {
    service "org.bluealsa"
    device "XX:XX:XX:XX:XX:XX"
    profile "a2dp"
}
</pre>
<p>You can now use the bluealsa device to reach your headset. Volume management is conducted normally via <code>alsamixer</code> with the option <code>-D bluealsa</code>.
</p>
<h2>
<span id="Legacy_documentation:_ALSA.2C_bluez5_and_PulseAudio_method"></span><span class="mw-headline" id="Legacy_documentation:_ALSA,_bluez5_and_PulseAudio_method">Legacy documentation: ALSA, bluez5 and PulseAudio method</span>
</h2>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a><b>The factual accuracy of this article or section is disputed.</b><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Describes two different methods, see the <a href="../en/Talk:Bluetooth_headset.html#bluez5_method:_overcomplicated_instructions" title="Talk:Bluetooth headset">talk page</a> for details. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Bluetooth_Headset#bluez5_method:_overcomplicated_instructions">Talk:Bluetooth_Headset#bluez5_method:_overcomplicated_instructions</a>)</div>
</div>
<p><a href="../en/Advanced_Linux_Sound_Architecture.html" class="mw-redirect" title="ALSA">ALSA</a>, <a href="../en/Bluetooth.html" class="mw-redirect" title="Bluez">bluez5</a>, and <a href="../en/PulseAudio.html" title="PulseAudio">PulseAudio</a> work together to allow a wireless <a href="../en/Bluetooth.html" title="Bluetooth">Bluetooth</a> headset to play audio. The following method works with a Lenovo T61p laptop and SoundBot SB220 wireless bluetooth headset. The required software stack is extensive and failure to include all components can produce errors which are difficult to understand. The following list of software packages might not be the minimum required set and needs to be examined more closely.
</p>
<p>Bluez5 has a regression causing HSP/HFP Telephone profile to not be available. This regression is documented in the <a rel="nofollow" class="external text" href="https://www.freedesktop.org/wiki/Software/PulseAudio/Notes/5.0/">draft release notes for Pulseaudio 5.0</a> which say (in "Notes for packagers"): "PulseAudio now supports BlueZ 5, but only the A2DP profile. BlueZ 4 is still the only way to make HSP/HFP work." (<a rel="nofollow" class="external text" href="https://fedoraproject.org/wiki/Common_F20_bugs#bluez5-profile">from here</a>)
</p>
<h3><span class="mw-headline" id="Install_Software_Packages">Install Software Packages</span></h3>
<p>The core software components are <a href="../en/Advanced_Linux_Sound_Architecture.html" class="mw-redirect" title="ALSA">ALSA</a>, Bluez5, <a href="../en/PulseAudio.html" title="PulseAudio">PulseAudio</a>. However there are additional libraries which are required. As well as a player which can play audio files. The following section lists the software packages installed in order to connect the headset and play audio over the headset.
</p>
<h4><span class="mw-headline" id="Install_ALSA_and_associated_libraries">Install ALSA and associated libraries</span></h4>
<p><a href="../en/Advanced_Linux_Sound_Architecture.html" class="mw-redirect" title="ALSA">ALSA</a> works with the linux kernel to provide audio services to user mode software. The following packages are used with the <a href="../en/Bluetooth.html" title="Bluetooth">Bluetooth</a> headset: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=alsa-utils">alsa-utils</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=alsa-plugins">alsa-plugins</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=alsa-tools">alsa-tools</a></span>.
</p>
<h4><span class="mw-headline" id="Install_Bluez5">Install Bluez5</span></h4>
<p>Bluez5 is the latest <a href="../en/Bluetooth.html" title="Bluetooth">Bluetooth</a> stack. It is required for <a href="../en/PulseAudio.html" title="PulseAudio">PulseAudio</a> to interface with wireless headsets. Required packages: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez">bluez</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-utils">bluez-utils</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-libs">bluez-libs</a></span>.
</p>
<h4><span class="mw-headline" id="Install_Audacious">Install Audacious</span></h4>
<p><a href="../en/Audacious.html" title="Audacious">Audacious</a> is a program which plays audio files. It can work directly with <a href="../en/Advanced_Linux_Sound_Architecture.html" class="mw-redirect" title="ALSA">ALSA</a> or with <a href="../en/PulseAudio.html" title="PulseAudio">PulseAudio</a>. Required packages: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=audacious">audacious</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=audacious-plugins">audacious-plugins</a></span>.
</p>
<h3><span class="mw-headline" id="Procedure">Procedure</span></h3>
<p>Once the required packages are installed, use this procedure to play audio with a bluetooth headset. The high level overview of the procedure is to pair the headset, connect the headset, configure the player and pulse audio controller and then play audio.
</p>
<p><a href="../en/Systemd.html#Using_units" class="mw-redirect" title="Start">Start</a> the bluetooth service as root.
</p>
<p>Verify Bluetooth is started
</p>
<pre># systemctl status bluetooth
bluetooth.service - Bluetooth service
  Loaded: loaded (/usr/lib/systemd/system/bluetooth.service; disabled)
  Active: active (running) since Sat 2013-12-07 12:31:14 PST; 12s ago
    Docs: man:bluetoothd(8)
Main PID: 3136 (bluetoothd)
  Status: "Running"
  CGroup: /system.slice/bluetooth.service
          └─3136 /usr/lib/bluetooth/bluetoothd

Dec 07 12:31:14 t61p systemd[1]: Starting Bluetooth service...
Dec 07 12:31:14 t61p bluetoothd[3136]: Bluetooth daemon 5.11
Dec 07 12:31:14 t61p systemd[1]: Started Bluetooth service.
Dec 07 12:31:14 t61p bluetoothd[3136]: Starting SDP server
Dec 07 12:31:14 t61p bluetoothd[3136]: Bluetooth management interface 1.3 i...ed
Hint: Some lines were ellipsized, use -l to show in full.
</pre>
<p>Start the PulseAudio daemon.  This must be done after X windows is started and as a normal user.
</p>
<pre>$ pulseaudio -D
</pre>
<p>Verify the PulseAudio daemon is running.
</p>
<pre>$ pulseaudio --check -v
I: [pulseaudio] main.c: Daemon running as PID 3186
</pre>
<p>Start up bluetoothctl as root and pair and connect your headset. As a regular user, bluetoothctl will pair but not connect. Perhaps this is related to the config file (shown below) which is setup for what appears to be the root user.
Note: the procedure shown below is for an initial pair and connect of the headphone. If the headset is already paired, then the procedure below can be shortened to: power on, agent on, default-agent, connect &lt;mac address&gt;. The mac address can be seen from the devices command output.
</p>
<pre> $ bluetoothctl 
 [NEW] Controller 00:1E:4C:F4:98:5B t61p-0 [default]
 [NEW] Device 00:1A:7D:12:36:B9 SoundBot SB220
 [bluetooth]# show
 Controller 00:1E:4C:F4:98:5B
       Name: t61p
       Alias: t61p-0
       Class: 0x000000
       Powered: no
       Discoverable: no
       Pairable: yes
       UUID: PnP Information           (00001200-0000-1000-8000-00805f9b34fb)
       UUID: Generic Access Profile    (00001800-0000-1000-8000-00805f9b34fb)
       UUID: Generic Attribute Profile (00001801-0000-1000-8000-00805f9b34fb)
       UUID: A/V Remote Control        (0000110e-0000-1000-8000-00805f9b34fb)
       UUID: A/V Remote Control Target (0000110c-0000-1000-8000-00805f9b34fb)
       UUID: Audio Source              (0000110a-0000-1000-8000-00805f9b34fb)
       UUID: Audio Sink                (0000110b-0000-1000-8000-00805f9b34fb)
       Modalias: usb:v1D6Bp0246d050B
       Discovering: no
 [bluetooth]# power on
 [CHG] Controller 00:1E:4C:F4:98:5B Class: 0x0c010c
 Changing power on succeeded
 [CHG] Controller 00:1E:4C:F4:98:5B Powered: yes
 [bluetooth]# agent on
 Agent registered
 [bluetooth]# default-agent
 Default agent request successful
</pre>
<p>&lt;power on your headset in pairing mode. Eventually you will see what appears to be a mac address.&gt;
</p>
<pre> [bluetooth]# scan on
 Discovery started
 [CHG] Controller 00:1E:4C:F4:98:5B Discovering: yes
 [CHG] Device 00:1A:7D:12:36:B9 RSSI: -61
 [bluetooth]# pair 00:1A:7D:12:36:B9
 Attempting to pair with 00:1A:7D:12:36:B9
 [CHG] Device 00:1A:7D:12:36:B9 Connected: yes
 [CHG] Device 00:1A:7D:12:36:B9 UUIDs has unsupported type
 [CHG] Device 00:1A:7D:12:36:B9 Paired: yes
 Pairing successful
 [bluetooth]# connect 00:1A:7D:12:36:B9
 [CHG] Device 00:1A:7D:12:36:B9 Connected: yes
 Connection successful
 [bluetooth]# info 00:1A:7D:12:36:B9
 Device 00:1A:7D:12:36:B9
       Name: SoundBot SB220
       Alias: SoundBot SB220
       Class: 0x240404
       Icon: audio-card
       Paired: yes
       Trusted: no
       Blocked: no
       Connected: yes
       LegacyPairing: yes
       UUID: Headset                   (00001108-0000-1000-8000-00805f9b34fb)
       UUID: Audio Sink                (0000110b-0000-1000-8000-00805f9b34fb)
       UUID: A/V Remote Control Target (0000110c-0000-1000-8000-00805f9b34fb)
       UUID: A/V Remote Control        (0000110e-0000-1000-8000-00805f9b34fb)
       UUID: Handsfree                 (0000111e-0000-1000-8000-00805f9b34fb)
</pre>
<p>Start up alsamixer, for simplicity un-mute all your outputs. Oddly enough some can be muted though. The ones I had muted during playback were:
</p>
<ul>
<li>Headphones</li>
<li>SPIDF</li>
</ul>
<p>Start up audacious. Use the menu to select PulseAudio as your output. Somewhere I read that bluez5 requires pulseaudio-git and this jives with my experience.
</p>
<p>Start up pavucontrol in a terminal. In the Outputs tab select the bluetooth headset.
</p>
<p><a rel="nofollow" class="external text" href="https://netskink.blogspot.com/2013/12/pulseaudio-pavucontrol-and-audacious.html">screenshot of application settings</a>
</p>
<h4><span class="mw-headline" id="Miscellaneous_configuration_files">Miscellaneous configuration files</span></h4>
<p>For reference, these settings were also done.
</p>
<h5>
<span id="ALSA_.2Fetc.2Fasound.conf"></span><span class="mw-headline" id="ALSA_/etc/asound.conf">ALSA /etc/asound.conf</span>
</h5>
<p>The settings shown at the top of this page was used, but the additional modification for Intel laptop sound cards.
</p>
<pre>pcm.btheadset {
  type plug
  slave {
    pcm {
      type bluetooth
      device 00:1A:7D:12:36:B9
      profile "auto"
    }
  }
  hint {
    show on
    description "BT Headset"
  }
}
ctl.btheadset {
  type bluetooth
}
options snd-hda-intel model=laptop
</pre>
<h5>
<span id=".2Fetc.2Fdbus-1.2Fsystem.d.2Fbluetooth.conf"></span><span class="mw-headline" id="/etc/dbus-1/system.d/bluetooth.conf">/etc/dbus-1/system.d/bluetooth.conf</span>
</h5>
<p>The settings here seem to be enabled for root only.  See the policy user="root" section.  However, if a regular user is specified here, the system fails to start.  Someone with more knowledge could explain why.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/dbus-1/system.d/bluetooth.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;!-- This configuration file specifies the required security policies for Bluetooth core daemon to work. --&gt;

&lt;!DOCTYPE busconfig PUBLIC "-//freedesktop//DTD D-BUS Bus Configuration 1.0//EN"
  "http://www.freedesktop.org/standards/dbus/1.0/busconfig.dtd"&gt;
&lt;busconfig&gt;

  &lt;!-- ../system.conf have denied everything, so we just punch some holes --&gt;

  &lt;policy user="root"&gt;
    &lt;allow own="org.bluez"/&gt;
    &lt;allow send_destination="org.bluez"/&gt;
    &lt;allow send_interface="org.bluez.Agent1"/&gt;
    &lt;allow send_interface="org.bluez.MediaEndpoint1"/&gt;
    &lt;allow send_interface="org.bluez.MediaPlayer1"/&gt;
    &lt;allow send_interface="org.bluez.ThermometerWatcher1"/&gt;
    &lt;allow send_interface="org.bluez.AlertAgent1"/&gt;
    &lt;allow send_interface="org.bluez.Profile1"/&gt;
    &lt;allow send_interface="org.bluez.HeartRateWatcher1"/&gt;
    &lt;allow send_interface="org.bluez.CyclingSpeedWatcher1"/&gt;
  &lt;/policy&gt;

  &lt;policy at_console="true"&gt;
    &lt;allow send_destination="org.bluez"/&gt;
  &lt;/policy&gt;

  &lt;!-- allow users of lp group (printing subsystem) to communicate with bluetoothd --&gt;
  &lt;policy group="lp"&gt;
    &lt;allow send_destination="org.bluez"/&gt;
  &lt;/policy&gt;

  &lt;policy context="default"&gt;
    &lt;deny send_destination="org.bluez"/&gt;
  &lt;/policy&gt;

&lt;/busconfig&gt;
</pre>
<h5><span class="mw-headline" id="Tested_applications">Tested applications</span></h5>
<p>As noted above this will work easily with audacious. YouTube videos with Chromium and Flash Player will work on some videos. If the video has ads it will not work, but if the video does not have ads it will work. Just make sure that after audacious is working with Bluetooth headset, start Chromium, and navigate to YouTube. Find a video without leading ads, and it should play the audio. If the settings icon has the a menu with two drop-down combo boxes for Speed and Quality it will play.
</p>
<h2>
<span id="Switch_between_HSP.2FHFP_and_A2DP_setting"></span><span class="mw-headline" id="Switch_between_HSP/HFP_and_A2DP_setting">Switch between HSP/HFP and A2DP setting</span>
</h2>
<p>This can easily be achieved by the following command where the <code><i>card_number</i></code> can be obtained by running <code>pacmd list-cards</code>.
</p>
<pre>$ pacmd set-card-profile <i>card_number</i> a2dp_sink
</pre>
<p>For enabling automatic profile switching from A2DP to HSP when a recording stream appears without any role set, you can append <code>auto_switch=2</code> to <code>load-module module-bluetooth-policy</code> in <code>/etc/pulse/default.pa</code>.
</p>
<p>For more information about PulseAudio profiles, see <a rel="nofollow" class="external text" href="https://freedesktop.org/wiki/Software/PulseAudio/Documentation/User/Bluetooth/#index1h2">PulseAudio Documentation</a>.
</p>
<h3><span class="mw-headline" id="A2DP_not_working_with_PulseAudio">A2DP not working with PulseAudio</span></h3>
<h4><span class="mw-headline" id="Socket_interface_problem">Socket interface problem</span></h4>
<p>If PulseAudio fails when changing the profile to A2DP with bluez 4.1+ and PulseAudio 3.0+, you can try disabling the Socket interface from <code>/etc/bluetooth/main.conf</code> by removing the line <code>Enable=Socket</code> and adding line <code>Disable=Socket</code>.
</p>
<h4><span class="mw-headline" id="A2DP_sink_profile_is_unavailable">A2DP sink profile is unavailable</span></h4>
<p>When the A2DP sink profile is unavailable it will not be possible to switch to the A2DP sink (output) with a PulseAudio front-end and the A2DP sink will not even be listed. This can be confirmed with <code>pactl</code>.
</p>
<pre> $ pactl list | grep -C2 A2DP
      Profiles:
              headset_head_unit: Headset Head Unit (HSP/HFP) (sinks: 1, sources: 1, priority: 30, available: yes)
              a2dp_sink: High Fidelity Playback (A2DP Sink) (sinks: 1, sources: 0, priority: 40, available: no)
              off: Off (sinks: 0, sources: 0, priority: 0, available: yes)
         Active Profile: headset_head_unit
</pre>
<p>Trying to manually set the card profile with <code>pacmd</code> will fail.
</p>
<pre> $ pacmd set-card-profile bluez_card.C4_45_67_09_12_00 a2dp_sink
 Failed to set card profile to 'a2dp_sink'.
</pre>
<p>This is known to happen from version 10.0 of Pulseaudio when connecting to Bluetooth headphones via Bluedevil or another BlueZ front-end. See <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/pulseaudio/pulseaudio/issues/525">related bug report.</a>
</p>
<p>This issue also appears after initial pairing of Headphones with some Bluetooth controllers (e.g. <code>0a12:0001, Cambridge Silicon Radio</code>) which might default to the <code>Handsfree</code> or <code>Headset - HS</code> service and will not allow switching to the A2DP PulseAudio sink that requires the <code>AudioSink</code> service.
</p>
<p>Possible solutions:
</p>
<ul><li>For some headsets, using the headset's volume or play/pause controls while connected can trigger the A2DP profile to become available.</li></ul>
<ul><li>It is possible that connecting to a headset via <code>bluetoothctl</code> from <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-utils">bluez-utils</a></span> will make the A2DP sink profile available. There is an automation for this every time a bluetooth device is connected: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/fix-bt-a2dp/">fix-bt-a2dp</a></span><sup><small>AUR</small></sup> (<a rel="nofollow" class="external text" href="https://github.com/pastleo/fix-bt-a2dp#usage">detailed usage</a>)</li></ul>
<pre>[bluetooth]# connect <i>[headset MAC here]</i>
</pre>
<ul><li>Manually switching to Bluetooth's <code>AudioSink</code> service which would make the A2DP profile and its A2DP PulseAudio sink available. This can be done with blueman-manager which included in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=blueman">blueman</a></span> or by registering the UUID of the AudioSink service with <code>bluetoothctl</code> .</li></ul>
<pre> $ bluetoothctl
 [bluetooth]# menu gatt
 [bluetooth]# register-service 0000110b-0000-1000-8000-00805f9b34fb
 [bluetooth]# quit
</pre>
<ul><li>Disable the headset profile</li></ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/bluetooth/main.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[General]
Disable=Headset
</pre>
<ul><li>Enable MultiProfile support. This may help with headsets that support A2DP as well as Headset audio.</li></ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/bluetooth/main.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[General]
MultiProfile=multiple
</pre>
<ul><li>Sometimes, none of the steps above will work. You may have tried rebooting and powering bluetooth off and on to no avail. In this case, try <a href="../en/Systemd.html#Using_units" class="mw-redirect" title="Restart">restarting</a> the <code>bluetooth.service</code>.</li></ul>
<ul><li>Alternatively, replacing <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pulseaudio-bluetooth">pulseaudio-bluetooth</a></span> with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pulseaudio-modules-bt/">pulseaudio-modules-bt</a></span><sup><small>AUR</small></sup> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pulseaudio-modules-bt-git/">pulseaudio-modules-bt-git</a></span><sup><small>AUR</small></sup>, which provides additional Bluetooth codecs, may resolve the issue.</li></ul>
<h4><span class="mw-headline" id="Gnome_with_GDM">Gnome with GDM</span></h4>
<div class="noprint archwiki-template-message">
<p><a href="../File:Merge-arrows-2.png" class="image"><img alt="Merge-arrows-2.png" src="../File:Merge-arrows-2.png" decoding="async" width="48" height="48"></a><b>This article or section is a candidate for merging with <a href="#Connecting_works,_but_I_cannot_play_sound">#Connecting works, but I cannot play sound</a>.</b><a href="../File:Merge-arrows-2.png" class="image"><img alt="Merge-arrows-2.png" src="../File:Merge-arrows-2.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Notes:</b> duplicate instructions (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Bluetooth_headset">Talk:Bluetooth headset#</a>)</div>
</div>
<p>The instructions below were tested on Gnome 3.24.2 and PulseAudio 10.0 however they may still be applicable and useful for other versions.
</p>
<p>If PulseAudio fails when changing the profile to A2DP while using GNOME with GDM, you need to prevent GDM from starting its own instance of PulseAudio:
</p>
<ul><li>Prevent Pulseaudio clients from automatically starting a server if one is not running by adding the following:</li></ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/var/lib/gdm/.config/pulse/client.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">autospawn = no
daemon-binary = /bin/true
</pre>
<ul><li>Prevent systemd from starting Pulseaudio anyway with socket activation:</li></ul>
<pre>$ sudo -ugdm mkdir -p /var/lib/gdm/.config/systemd/user
$ sudo -ugdm ln -s /dev/null /var/lib/gdm/.config/systemd/user/pulseaudio.socket
</pre>
<ul><li>Restart, and check that there is no PulseAudio process for the <code>gdm</code> user using:</li></ul>
<pre> $ pgrep -u gdm pulseaudio
</pre>
<p>Further discussion about this problem and alternative fixes can be found <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=194006">here</a> and <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=196689">here</a>. Alternatively, one may try and install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/fix-bt-a2dp/">fix-bt-a2dp</a></span><sup><small>AUR</small></sup>.
</p>
<h3><span class="mw-headline" id="HFP_not_working_with_PulseAudio">HFP not working with PulseAudio</span></h3>
<p>HFP-only bluetooth headsets may not be usable in the standard configuration of pulseaudio. The respective profiles occur, but they are not available:
</p>
<ul><li>
<code>bluetoothctl info</code> output shows:</li></ul>
<pre> UUID: Audio Sink                (0000110b-0000-1000-8000-00805f9b34fb)
 UUID: A/V Remote Control Target (0000110c-0000-1000-8000-00805f9b34fb)
 UUID: A/V Remote Control        (0000110e-0000-1000-8000-00805f9b34fb)
 UUID: Handsfree                 (0000111e-0000-1000-8000-00805f9b34fb)
</pre>
<ul><li>
<code>pactl list</code> of respective device shows:</li></ul>
<pre> ...
 Profiles:
       ...
       headset_head_unit: Headset Head Unit (HSP/HFP) (sinks: 1, sources: 1, priority: 30, available: no)
</pre>
<p>To solve the respective issue, update to pulseaudio (&gt;=13) and potentially <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pulseaudio-modules-bt-git/">pulseaudio-modules-bt-git</a></span><sup><small>AUR</small></sup> and bluez (&gt;=5.5) to latest versions. Then install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ofono/">ofono</a></span><sup><small>AUR</small></sup> (start and enable using systemctl) and  <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/phonesim/">phonesim</a></span><sup><small>AUR</small></sup> and create / activate a fake modem as described here <a rel="nofollow" class="external autonumber" href="https://www.freedesktop.org/wiki/Software/PulseAudio/Documentation/User/Bluetooth/#index1h3">[4]</a>:
</p>
<ul><li>Create <code>/etc/ofono/phonesim.conf</code> with:</li></ul>
<pre> [phonesim]
 Address=127.0.0.1
 Driver=phonesim
 Port=12345
</pre>
<ul><li>Start as user:</li></ul>
<pre> phonesim -p 12345 /usr/share/phonesim/default.xml &amp;
</pre>
<ul><li>
<a href="../en/Systemd.html#Using_units" class="mw-redirect" title="Enable">Enable</a> and <a href="../en/Systemd.html#Using_units" class="mw-redirect" title="Start">start</a> <code>ofono</code> service.</li></ul>
<ul><li>Power modem:</li></ul>
<pre> dbus-send --print-reply --system --dest=org.ofono /phonesim org.ofono.Modem.SetProperty string:"Powered" variant:boolean:true
</pre>
<ul><li>Activate modem:</li></ul>
<pre> dbus-send --print-reply --system --dest=org.ofono /phonesim org.ofono.Modem.SetProperty string:"Online" variant:boolean:true
</pre>
<ul><li>If you want to check the results of this, download ofono git sources (<a rel="nofollow" class="external autonumber" href="https://github.com/rilmodem/ofono.git">[5]</a>) and call <code>list-modems</code> from the <code>ofono/test</code> directory. The output of the respective modem section should read like this:</li></ul>
<pre> ...
 [ /phonesim ]
   Online = 1
   Powered = 1
   Lockdown = 0
   Emergency = 0
   Manufacturer = MeeGo
   ...
</pre>
<ul><li>Finally, restart pulseaudio and reconnect headset. Now, HFP should be available:</li></ul>
<pre>   headset_head_unit: Headset Head Unit (HSP/HFP) (sinks: 1, sources: 1, priority: 30, available: yes)
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> HFP support is not stable and may cause glitches with switching to A2DP; try reconnecting, if the needed mode is not available.</div>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<p>For using a bluetooth device in a dual boot setup:
</p>
<ul>
<li><a href="../en/Bluetooth.html#Dual_boot_pairing" title="Bluetooth">Bluetooth#Dual boot pairing</a></li>
<li><a rel="nofollow" class="external text" href="http://ubuntuforums.org/showthread.php?p=9363229#post9363229">Dual booting with a Bluetooth keyboard</a></li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Sound.html" title="Category:Sound">Sound</a></li>
<li><a href="../en/Category:Bluetooth.html" title="Category:Bluetooth">Bluetooth</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Merge.html" title="Category:Pages or sections flagged with Template:Merge">Pages or sections flagged with Template:Merge</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Move.html" title="Category:Pages or sections flagged with Template:Move">Pages or sections flagged with Template:Move</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Bluetooth_headset&amp;oldid=648732">https://wiki.archlinux.org/index.php?title=Bluetooth_headset&amp;oldid=648732</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 11 January 2021, at 21:27.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
