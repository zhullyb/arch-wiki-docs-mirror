<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Laptop Mode Tools - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Laptop_Mode_Tools rootpage-Laptop_Mode_Tools skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Laptop Mode Tools</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../en/Acpid.html" title="Acpid">acpid</a></li>
<li><a href="../en/Systemd.html" title="Systemd">systemd</a></li>
<li><a href="../en/CPU_frequency_scaling.html" class="mw-redirect" title="Cpufrequtils">cpufrequtils</a></li>
<li><a href="../en/Laptop.html" title="Laptop">Laptop</a></li>
<li><a href="../en/Powertop.html" title="Powertop">Powertop</a></li>
<li><a href="../en/TLP.html" title="TLP">TLP</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://github.com/rickysarraf/laptop-mode-tools">Laptop Mode Tools</a> is a laptop power saving package for Linux systems. It is the primary way to enable the Laptop Mode feature of the Linux kernel, which lets your hard drive spin down. In addition, it allows you to tweak a number of other power-related settings using a simple configuration file.
</p>
<p>Combined with <a href="../en/Acpid.html" title="Acpid">acpid</a> and <a href="../en/CPU_frequency_scaling.html" title="CPU frequency scaling">CPU frequency scaling</a>, LMT provides most users with a complete notebook power management suite.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Installation"><span class="tocnumber">1</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Configuration"><span class="tocnumber">2</span> <span class="toctext">Configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-3">
<a href="#Hard_disks"><span class="tocnumber">2.1</span> <span class="toctext">Hard disks</span></a>
<ul>
<li class="toclevel-3 tocsection-4"><a href="#Solid_state_drives"><span class="tocnumber">2.1.1</span> <span class="toctext">Solid state drives</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-5"><a href="#CPU_frequency"><span class="tocnumber">2.2</span> <span class="toctext">CPU frequency</span></a></li>
<li class="toclevel-2 tocsection-6">
<a href="#Device_and_bus"><span class="tocnumber">2.3</span> <span class="toctext">Device and bus</span></a>
<ul>
<li class="toclevel-3 tocsection-7"><a href="#Intel_SATA"><span class="tocnumber">2.3.1</span> <span class="toctext">Intel SATA</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="#USB_autosuspend"><span class="tocnumber">2.3.2</span> <span class="toctext">USB autosuspend</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-9">
<a href="#Display_and_graphics"><span class="tocnumber">2.4</span> <span class="toctext">Display and graphics</span></a>
<ul>
<li class="toclevel-3 tocsection-10">
<a href="#LCD_brightness"><span class="tocnumber">2.4.1</span> <span class="toctext">LCD brightness</span></a>
<ul>
<li class="toclevel-4 tocsection-11"><a href="#ThinkPad_T40/T42"><span class="tocnumber">2.4.1.1</span> <span class="toctext">ThinkPad T40/T42</span></a></li>
<li class="toclevel-4 tocsection-12"><a href="#ThinkPad_T60"><span class="tocnumber">2.4.1.2</span> <span class="toctext">ThinkPad T60</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-13"><a href="#Terminal_blanking"><span class="tocnumber">2.4.2</span> <span class="toctext">Terminal blanking</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-14">
<a href="#Networking"><span class="tocnumber">2.5</span> <span class="toctext">Networking</span></a>
<ul>
<li class="toclevel-3 tocsection-15"><a href="#Ethernet"><span class="tocnumber">2.5.1</span> <span class="toctext">Ethernet</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="#Wireless_LAN"><span class="tocnumber">2.5.2</span> <span class="toctext">Wireless LAN</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-17">
<a href="#Audio"><span class="tocnumber">2.6</span> <span class="toctext">Audio</span></a>
<ul>
<li class="toclevel-3 tocsection-18"><a href="#AC97"><span class="tocnumber">2.6.1</span> <span class="toctext">AC97</span></a></li>
<li class="toclevel-3 tocsection-19"><a href="#Intel_HDA"><span class="tocnumber">2.6.2</span> <span class="toctext">Intel HDA</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-20">
<a href="#Troubleshooting"><span class="tocnumber">3</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-21"><a href="#Laptop-mode-tools_is_not_picking_up_events"><span class="tocnumber">3.1</span> <span class="toctext">Laptop-mode-tools is not picking up events</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#USB_Mouse_sleeping_after_5_seconds_when_on_battery"><span class="tocnumber">3.2</span> <span class="toctext">USB Mouse sleeping after 5 seconds when on battery</span></a></li>
<li class="toclevel-2 tocsection-23">
<a href="#Issues_with_NVIDIA_driver"><span class="tocnumber">3.3</span> <span class="toctext">Issues with NVIDIA driver</span></a>
<ul>
<li class="toclevel-3 tocsection-24"><a href="#KDE_shows_black_screen"><span class="tocnumber">3.3.1</span> <span class="toctext">KDE shows black screen</span></a></li>
<li class="toclevel-3 tocsection-25"><a href="#Slower_Boot_after_enabling_laptop-mode.service"><span class="tocnumber">3.3.2</span> <span class="toctext">Slower Boot after enabling laptop-mode.service</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-26"><a href="#See_also"><span class="tocnumber">4</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/laptop-mode-tools/">laptop-mode-tools</a></span><sup><small>AUR</small></sup> package or the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/laptop-mode-tools-git/">laptop-mode-tools-git</a></span><sup><small>AUR</small></sup> package.
</p>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>Configuration is handled through:
</p>
<ul>
<li>
<code>/etc/laptop-mode/laptop-mode.conf</code> - primary configuration file.</li>
<li>
<code>/etc/laptop-mode/conf.d/*</code> - dozens of feature-specific "modules".</li>
</ul>
<p>Each module can be explicitly <code>enabled</code>, <code>disabled</code>, or set to <code>auto</code> by changing the <code>CONTROL_*</code> argument of any file in <code>conf.d/</code>.  LMT will attempt enable any modules where <code>CONTROL_*</code> is set to <code>auto</code> if <code>ENABLE_AUTO_MODULES</code> is set in <code>/etc/laptop-mode/laptop-mode.conf</code>.  There are two exceptions to the above rule: <code>auto-hibernate.conf</code> and <code>battery-level-polling.conf</code> use an <code>ENABLE_*</code> variable instead of <code>CONTROL_*</code>.
</p>
<p>To quickly check which modules are enabled, disabled or auto, run:
</p>
<pre>$ grep -r '^\(CONTROL\|ENABLE\)_' /etc/laptop-mode/conf.d
</pre>
<p>Finally, <a href="../en/Systemd.html#Using_units" class="mw-redirect" title="Enable">enable</a> <code>laptop-mode.service</code>.
</p>
<h3><span class="mw-headline" id="Hard_disks">Hard disks</span></h3>
<p>For this you need to have <i>hdparm</i> and/or <i>sdparm</i> installed. See <a href="../en/Hdparm.html" title="Hdparm">Hdparm</a>.
</p>
<p>Spinning down the hard drive through <code>hdparm -S</code> values saves power and makes everything a lot more quiet. By using the readahead function you can allow the drives to spin down more often even though you are using the computer. LMT can also establish <code>hdparm -B</code> values. The maximum hard drive power saving is 1 and the minimum is 254. For example, set this value to 254 when on AC and 20 when on battery. If you find that normal activity hangs often while waiting for the disk to spin up, it might be a good idea to set it to a higher value (e.g. 128) which will make it spin down less often. <code>hdparm -S</code> and <code>hdparm -B</code> values are configured in <code>/etc/laptop-mode/laptop-mode.conf</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Spinning down a hard drive too frequently can shorten its lifespan. Take care when choosing a proper value.</div>
<p>With the <code>CONTROL_MOUNT_OPTIONS</code> variable (default on), laptop-mode-tools automatically remounts your partitions, appending <code>commit=600,noatime</code> in the mount options. This keeps the journaling program jbd2 from accessing your disk every few seconds, instead the disk journal gets updated every 10 minutes.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> With this setting you could lose up to 10 minutes of work. Also be sure not to use the <code>atime</code> mount option. Use <code>noatime</code> or <code>relatime</code> instead.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> <code>CONTROL_MOUNT_OPTIONS</code> should not be turned on with nilfs2 partitions. Refer to this thread on the forum: <a rel="nofollow" class="external free" href="https://bbs.archlinux.org/viewtopic.php?id=134656">https://bbs.archlinux.org/viewtopic.php?id=134656</a>
</div>
<h4><span class="mw-headline" id="Solid_state_drives">Solid state drives</span></h4>
<p>From the <a rel="nofollow" class="external text" href="https://github.com/rickysarraf/laptop-mode-tools/wiki/FAQ#i-have-a-solid-state-disk-ssd-in-my-machine-should-i-enable-any-of-the-disk-related-parts-of-laptop-mode-tools-or-are-they-irrelevant">official, upstream FAQ</a>:
</p>
<p><b>Question:</b> I have a solid-state disk (SSD) in my machine. Should I enable any of the disk-related parts of laptop-mode-tools, or are they irrelevant?
</p>
<p><b>Answer:</b> They may be relevant, because (a) laptop mode will reduce the number of writes, which improves the lifetime of an SSD, and (b) laptop mode makes writes bursty, which enables power saving mechanisms like ALPM to kick in. However, your mileage may vary depending on the specific hardware involved. For some hardware, you will get no gain at all, for some the gain may be substantial.
</p>
<h3><span class="mw-headline" id="CPU_frequency">CPU frequency</span></h3>
<p>For this you need to have a CPU frequency driver installed. See <a href="../en/CPU_frequency_scaling.html" title="CPU frequency scaling">CPU frequency scaling</a>.
</p>
<pre># cpufreq.conf
# ThinkPad T40/T42/T60 Example
#
CONTROL_CPU_FREQUENCY=1
BATT_CPU_MAXFREQ=fastest
BATT_CPU_MINFREQ=slowest
BATT_CPU_GOVERNOR=ondemand
BATT_CPU_IGNORE_NICE_LOAD=1
LM_AC_CPU_MAXFREQ=fastest
LM_AC_CPU_MINFREQ=slowest
LM_AC_CPU_GOVERNOR=ondemand
LM_AC_CPU_IGNORE_NICE_LOAD=1
NOLM_AC_CPU_MAXFREQ=fastest
NOLM_AC_CPU_MINFREQ=slowest
NOLM_AC_CPU_GOVERNOR=ondemand
NOLM_AC_CPU_IGNORE_NICE_LOAD=0
CONTROL_CPU_THROTTLING=0
</pre>
<h3><span class="mw-headline" id="Device_and_bus">Device and bus</span></h3>
<h4><span class="mw-headline" id="Intel_SATA">Intel SATA</span></h4>
<ul><li>Enable the Intel SATA AHCI controller Aggressive Link Power Management feature to set the disk link into a very low power mode in the absence of disk IO.</li></ul>
<pre># intel-sata-powermgmt.conf
# ThinkPad T40/T42/T60 Example
#
DEBUG=0
CONTROL_INTEL_SATA_POWER=1
BATT_ACTIVATE_SATA_POWER=1
LM_AC_ACTIVATE_SATA_POWER=1
NOLM_AC_ACTIVATE_SATA_POWER=0
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Review the well-documented <code>/etc/laptop-mode/conf.d/intel-sata-powermgmt.conf</code> file for additional configuration details.</div>
<h4><span class="mw-headline" id="USB_autosuspend">USB autosuspend</span></h4>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> USB autosuspend functionality has been moved from the <i>usb-autosuspend</i> module to the <i>runtime-pm</i> module. Make sure to replace usb-autosuspend with runtime-pm on /lib/udev/rules.d/99-laptop-mode.rules.</div>
<pre># runtime-pm.conf
# ThinkPad T40/T42/T60 Example
#
DEBUG=0
CONTROL_RUNTIME_AUTOSUSPEND=1
BATT_SUSPEND_RUNTIME=1
LM_AC_SUSPEND_RUNTIME=1
NOLM_AC_SUSPEND_RUNTIME=1
AUTOSUSPEND_TIMEOUT=2
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Review the <code>/etc/laptop-mode/conf.d/runtime-pm.conf</code> file for additional configuration details. If you have an USB tool you always use (like an USB mouse), blacklisting them would stop them from suspending.</div>
<h3><span class="mw-headline" id="Display_and_graphics">Display and graphics</span></h3>
<h4><span class="mw-headline" id="LCD_brightness">LCD brightness</span></h4>
<ul><li>Available brightness values for certain laptops can be obtained by running following command:</li></ul>
<pre>$ cat /proc/acpi/video/VID/LCD/brightness
</pre>
<h5>
<span id="ThinkPad_T40.2FT42"></span><span class="mw-headline" id="ThinkPad_T40/T42">ThinkPad T40/T42</span>
</h5>
<p>For <a href="https://en.wikipedia.org/wiki/ThinkPad" class="extiw" title="wikipedia:ThinkPad">ThinkPad</a> T40/T42 notebooks, minimum and maximum brightness values can be obtained by running:
</p>
<pre>$ cat /sys/class/backlight/acpi_video0/brightness
$ cat /sys/class/backlight/acpi_video0/max_brightness
</pre>
<pre># lcd-brightness.conf
# ThinkPad T40/T42 Example
#
DEBUG=0
CONTROL_BRIGHTNESS=1
BATT_BRIGHTNESS_COMMAND="echo 0"
LM_AC_BRIGHTNESS_COMMAND="echo 7"
NOLM_AC_BRIGHTNESS_COMMAND="echo 7"
BRIGHTNESS_OUTPUT="/sys/class/backlight/thinkpad_screen/brightness"
</pre>
<h5><span class="mw-headline" id="ThinkPad_T60">ThinkPad T60</span></h5>
<ul><li>For <a href="https://en.wikipedia.org/wiki/ThinkPad" class="extiw" title="wikipedia:ThinkPad">ThinkPad</a> T60 notebooks, minimum and maximum brightness values can be obtained by running:</li></ul>
<pre>$ cat /sys/class/backlight/thinkpad_screen/max_brightness
$ cat /sys/class/backlight/thinkpad_screen/brightness
</pre>
<pre># lcd-brightness.conf
# ThinkPad T60 Example
#
DEBUG=0
CONTROL_BRIGHTNESS=1
BATT_BRIGHTNESS_COMMAND="echo 0"
LM_AC_BRIGHTNESS_COMMAND="echo 7"
NOLM_AC_BRIGHTNESS_COMMAND="echo 7"
BRIGHTNESS_OUTPUT="/sys/class/backlight/acpi_video0/brightness"
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Review the well-documented <code>/etc/laptop-mode/conf.d/lcd-brightness.conf</code> file for additional configuration details.</div>
<h4><span class="mw-headline" id="Terminal_blanking">Terminal blanking</span></h4>
<pre># terminal-blanking.conf
# ThinkPad T40/T42/T60 Example
#
DEBUG=0
CONTROL_TERMINAL=1
TERMINALS="/dev/tty1"
BATT_TERMINAL_BLANK_MINUTES=1
BATT_TERMINAL_POWERDOWN_MINUTES=2
LM_AC_TERMINAL_BLANK_MINUTES=10
LM_AC_TERMINAL_POWERDOWN_MINUTES=10
NOLM_AC_TERMINAL_BLANK_MINUTES=10
NOLM_AC_TERMINAL_POWERDOWN_MINUTES=10
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Review the well-documented <code>/etc/laptop-mode/conf.d/terminal-blanking.conf</code> file for additional configuration details.</div>
<h3><span class="mw-headline" id="Networking">Networking</span></h3>
<h4><span class="mw-headline" id="Ethernet">Ethernet</span></h4>
<pre># ethernet.conf
# ThinkPad T40/T42/T60 Example
#
DEBUG=0
CONTROL_ETHERNET=1
LM_AC_THROTTLE_ETHERNET=0
NOLM_AC_THROTTLE_ETHERNET=0
DISABLE_WAKEUP_ON_LAN=1
DISABLE_ETHERNET_ON_BATTERY=1
ETHERNET_DEVICES="eth0"
</pre>
<h4><span class="mw-headline" id="Wireless_LAN">Wireless LAN</span></h4>
<p>Wireless interface power management settings are hardware-dependent, and thus a bit trickier to configure. Depending on the wireless chipset, the settings are managed in one of the following three files:
</p>
<ol>
<li>
<code>/etc/laptop-mode/conf.d/wireless-power.conf</code> for a generic method of saving power (using "iwconfig wlan0 power on/off"). This applies to most chipsets (that is, anything but Intel chipsets listed below).</li>
<li>
<code>/etc/laptop-mode/conf.d/wireless-ipw-power.conf</code> for Intel chipsets driven by the old ipw driver. This apply to IPW3945, IPW2200 and IPW2100. It currently (as of LMT 1.55-1) uses iwpriv for IPW3945, and a combination of iwconfig and iwpriv settings for IPW2100 and IPW220. See <code>/usr/share/laptop-mode-tools/modules/wireless-ipw-power</code> for details. (note that the ipw3945 is not used anymore, see below)</li>
<li>
<code>/etc/laptop-mode/conf.d/wireless-iwl-power.conf</code> for Intel chipsets driven by modules iwl4965, iwl3945 and iwlagn (this latter supports chipsets 4965, 5100, 5300, 5350, 5150, 1000, and 6000)</li>
</ol>
<p>Note that activating the three of them should not be much of a problem, since LMT detects the module used by the interface and acts accordingly.
</p>
<p>The supported modules for each configuration file, indicated above, are taken directly from LMT. However, this seems to be a bit out-of-date, since the current 2.6.34 kernel does not provide the ipw3945 and iwl4965 modules anymore (3945 chipset uses iwl3945 instead, and 4965 uses the generic module iwlagn). This is only brought here for information, as this does not (or should not) affect the way LMT works.
</p>
<p>There is a known issue with some chipsets running with the iwlagn module (namely, the 5300 chipset, and maybe others). On those chipsets, the following settings of <code>/etc/laptop-mode/conf.d/wireless-iwl-power.conf</code>:
</p>
<pre>IWL_AC_POWER
IWL_BATT_POWER
</pre>
<p>are ignored, because the <code>/sys/class/net/wlan*/device/power_level</code> file does not exist. Instead, the standard method (with "iwconfig wlan0 power on/off") is automatically used.
</p>
<h3><span class="mw-headline" id="Audio">Audio</span></h3>
<h4><span class="mw-headline" id="AC97">AC97</span></h4>
<pre># ac97-powersave.conf
# ThinkPad T40/T42/T60 Example
#
DEBUG=0
CONTROL_AC97_POWER=1
</pre>
<h4><span class="mw-headline" id="Intel_HDA">Intel HDA</span></h4>
<pre># intel-hda-powersave.conf
# ThinkPad T40/T42/T60 Example
#
DEBUG=0
CONTROL_INTEL_HDA_POWER=1
BATT_INTEL_HDA_POWERSAVE=1
LM_AC_INTEL_HDA_POWERSAVE=1
NOLM_AC_INTEL_HDA_POWERSAVE=0
INTEL_HDA_DEVICE_TIMEOUT=10
INTEL_HDA_DEVICE_CONTROLLER=0
</pre>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Laptop-mode-tools_is_not_picking_up_events">Laptop-mode-tools is not picking up events</span></h3>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=acpid">acpid</a></span> and enable its <a href="../en/Systemd.html" title="Systemd">systemd</a> service <code>acpid.service</code>.
</p>
<p>If that does not help, go through the laptop-mode configuration files and make sure that the service you want to enable is set to 1. Many services (including cpufreq control) are by default set to "auto", which may not enable them.
</p>
<p>I have experienced issues with bluetooth not working if I boot up with battery, and I fixed it with disabling runtime-pm.
</p>
<h3><span class="mw-headline" id="USB_Mouse_sleeping_after_5_seconds_when_on_battery">USB Mouse sleeping after 5 seconds when on battery</span></h3>
<p>First find the ID of you device (it should look like <code>046d:c534</code>):
</p>
<pre>$ lsusb
</pre>
<p>Put this value into the <code>AUTOSUSPEND_DEVID_BLACKLIST</code> variable in <code>/etc/laptop-mode/conf.d/runtime-pm.conf</code>, for example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/laptop-mode/conf.d/runtime-pm.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
AUTOSUSPEND_DEVID_BLACKLIST="046d:c534"
...</pre>
<p>Multiple IDs can be seperated with spaces.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Do not forget to <a href="../en/Systemd.html#Using_units" class="mw-redirect" title="Restart">restart</a> the laptop-mode service. You might also need to reconnect the USB device.</div>
<h3><span class="mw-headline" id="Issues_with_NVIDIA_driver">Issues with NVIDIA driver</span></h3>
<h4><span class="mw-headline" id="KDE_shows_black_screen">KDE shows black screen</span></h4>
<p>When laptop mode is enabled, KDE fails to start. The reason is that the default KDE display manager (SDDM) starts before the NVIDIA driver. To prevent this from happening you need to remove the <code>nomodeset</code> <a href="../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a>.
</p>
<h4><span class="mw-headline" id="Slower_Boot_after_enabling_laptop-mode.service">Slower Boot after enabling laptop-mode.service</span></h4>
<p>As described before, laptop-mode-tools affects the NVIDIA driver. Adding the <code>nvidia-drm.modeset=1</code> <a href="../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a> reduces boot time dramatically.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://github.com/rickysarraf/laptop-mode-tools/wiki">Laptop Mode Tools wiki</a></li>
<li><a rel="nofollow" class="external text" href="https://github.com/rickysarraf/laptop-mode-tools/wiki/FAQ">FAQ</a></li>
<li><a rel="nofollow" class="external text" href="https://groups.google.com/forum/#!forum/laptop-mode-tools">Mailing List</a></li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Laptops.html" title="Category:Laptops">Laptops</a></li>
<li><a href="../en/Category:Power_management.html" title="Category:Power management">Power management</a></li>
</ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Laptop_Mode_Tools&amp;oldid=647489">https://wiki.archlinux.org/index.php?title=Laptop_Mode_Tools&amp;oldid=647489</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 28 December 2020, at 14:19.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
