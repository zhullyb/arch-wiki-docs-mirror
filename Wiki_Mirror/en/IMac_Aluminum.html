<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>iMac Aluminum - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-IMac_Aluminum rootpage-IMac_Aluminum skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">iMac Aluminum</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<p><span></span>
</p>
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../en/Mac.html" title="Mac">Mac</a></li>
</ul>
</div>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a><b>This article or section needs language, wiki syntax or style improvements. See <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a> for reference.</b><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Complete disregard for <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a> (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:IMac_Aluminum">Talk:IMac Aluminum#</a>)</div>
</div>
<p><b>I have written the following in the hope that it may help those investigating the installation of Arch on their  iMac.  Parts of this guide are specifically written for the Alu' 20" &amp; 24" iMac.</b>
</p>
<p>I have an aluminium 24" iMac, on which I have just (at the time of writing) installed Arch 64bit, twice!  I had a serious problem logging into Gnome &amp; anything that required the root password failed. I worked around these problems but was never happy with the setup.  I think that the iMac aluminium keyboard <i><b>may</b></i> have caused the problem, due to it not having a num-lock key, or an LED to indicate num-lock on/off; my passwords were numerical.  Of course I may be wrong.  My second install was done with an MS Digital Media keyboard &amp; I do not have the above problem, also my ctrl-alt-Fkeys work now. 
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Deleting_OS_X?"><span class="tocnumber">1</span> <span class="toctext">Deleting OS X?</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Install_additional_bootloader"><span class="tocnumber">2</span> <span class="toctext">Install additional bootloader</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#Partitioning_&amp;_Filesystems"><span class="tocnumber">3</span> <span class="toctext">Partitioning &amp; Filesystems</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Accessing_the_Ext2/3_file_system_from_OS_X"><span class="tocnumber">3.1</span> <span class="toctext">Accessing the Ext2/3 file system from OS X</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#The_GPT_partitioning_scheme_that_Apple_uses"><span class="tocnumber">3.2</span> <span class="toctext">The GPT partitioning scheme that Apple uses</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="#rEFIt_Re-sync"><span class="tocnumber">4</span> <span class="toctext">rEFIt Re-sync</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Install_Arch"><span class="tocnumber">5</span> <span class="toctext">Install Arch</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Installing_&amp;_Configuring_X"><span class="tocnumber">6</span> <span class="toctext">Installing &amp; Configuring X</span></a></li>
<li class="toclevel-1 tocsection-9">
<a href="#Controlling_the_screen_backlight_and_brightness"><span class="tocnumber">7</span> <span class="toctext">Controlling the screen backlight and brightness</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#backlight.c"><span class="tocnumber">7.1</span> <span class="toctext">backlight.c</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Brightness_control_on_a_2011_27_inch_iMac"><span class="tocnumber">7.2</span> <span class="toctext">Brightness control on a 2011 27 inch iMac</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12">
<a href="#Getting_sound_to_work_right"><span class="tocnumber">8</span> <span class="toctext">Getting sound to work right</span></a>
<ul>
<li class="toclevel-2 tocsection-13"><a href="#The_iMac_20%22_&amp;_24%22_models"><span class="tocnumber">8.1</span> <span class="toctext">The iMac 20" &amp; 24" models</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#The_imac7,1_model:"><span class="tocnumber">8.2</span> <span class="toctext">The imac7,1 model:</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#The_imac12,2_27%22_2011_model"><span class="tocnumber">8.3</span> <span class="toctext">The imac12,2 27" 2011 model</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-16"><a href="#Troubleshooting"><span class="tocnumber">9</span> <span class="toctext">Troubleshooting</span></a></li>
</ul>
</div>

<h2>
<span id="Deleting_OS_X.3F"></span><span class="mw-headline" id="Deleting_OS_X?">Deleting OS X?</span>
</h2>
<p>Some people seriously consider dropping OS X altogether.  I personally think that there is a good reason to keep a small OS X partition, as it allows you to be able to do firmware updates.  
Some people use an external USB or Firewire drive with which to boot OS X for the firmware updates, &amp; I have heard that people have been able to do it via optical drive, from experience I do not know about these other methods.
</p>
<h2><span class="mw-headline" id="Install_additional_bootloader">Install additional bootloader</span></h2>
<p>Apple computers have a built-in bootloader that can be accessed by holding down the 'ALT' key when switched on. This allows you to boot from CD, HDD and via WiFi. If your iMac has a separate EFI partition, this menu will also allow you to boot Archlinux directly (follow these instructions: <a href="../en/GRUB.html#Create_GRUB2_Standalone_UEFI_Application" title="GRUB">GRUB#Create GRUB2 Standalone UEFI Application</a><sup>[<a href="../en/Help:Procedures.html#Fix_broken_section_links" title="Help:Procedures">broken link</a>: invalid section]</sup>). This built-in bootloader sometimes has problems booting from USB, so it might be a good idea to  install <b>rEFIt</b> <a rel="nofollow" class="external autonumber" href="http://refit.sourceforge.net/">[1]</a> on your OS X partition. You will probably want to lower the timeout and make linux the default option, for that you must edit the <b>refit.conf</b> file <a rel="nofollow" class="external autonumber" href="http://refit.sourceforge.net/doc/c3s3_config.html">[2]</a>. 
</p>
<p><i>After</i> succesfully installing Arch and Grub you may remove rEFIt (first make sure your stand-alone UEFI app shows up in the Apple bootloader). To change the default boot-option to Archlinux, you need to 'bless' the earlier created stand-alone UEFI app. It is best to rename the created 'EFI/arch_grub/grubx64_standalone.efi' to 'EFI/BOOT/BOOTX64.EFI', then run the following command from MacOSx, after mounting the EFI partition: 
</p>
<pre>sudo bless --folder=/Volumes/EFI --file=/Volumes/EFI/efi/BOOT/BOOTX64.EFI --setBoot
</pre>
<p>When booting through the Apple bootloader (instead of rEFIt) you will be booting in full EFI mode, instead of BIOS compatibility. This means you will probably need to boot your <i>archlinux-fallback</i> image the first time; and update your mkinitcpio to succesfully switch from BIOS &gt; EFI.
</p>
<h2>
<span id="Partitioning_.26_Filesystems"></span><span class="mw-headline" id="Partitioning_&amp;_Filesystems">Partitioning &amp; Filesystems</span>
</h2>
<p>There are multiple ways to repartition the iMac drive, my favourite (probably because it is the easiest &amp; being graphical it is most likely the safest) is to boot the Ubuntu 7.10 (or later) LiveCD &amp; run GParted from the desktop menu.  I have shrunk the OS X, HFS+ partition, created Ext3, JFS &amp; Linux Swap partition, deleted &amp; moved partitions on the iMac using GParted &amp; the Ubuntu LiveCD.  Great stuff!
The only present limitation that GParted has with the HFS+ file system, is that it can only shrink the HFS+ file system &amp; can not enlarge it.  I'm sure it won't be too long &amp; this limitation won't exist either.
</p>
<p><i>Just a note on using GParted, or any other GUI type of partition management tool, it is generally accepted to be good safe practice to only <b>Apply ONE process at a time</b>.  What that means for those unfamiliar with GParted (&amp; the other applications of it's ilk) is you can give it multiple instructions which it stores up until you hit the "Apply" button, after which it goes through the instructions one after the other.  If this doesn't make sense now, it very quickly will on using GParted.</i> 
</p>
<p><i>My iMac partition scheme is as follows:</i>
</p>
<p><b>Partition</b>...<b>Filesystem</b>......<b>Size</b>.........<b>Mountpoint</b>
</p>
<p><b>sda1</b> ........ <b>*FAT32*</b> ....... <b>200Mb</b> .... <b>EFI system partition</b> - While the ESP looks like a FAT32 volume, it is actually an EFI file system, which you want to know how to replace before you delete it.  This means do not delete it unless you are sure that you know what you are doing, as it may become essential to Apple firmware updates in the future.  Currently the ESP is empty &amp; the firmware boots OS X directly!?  At least it is only 200Mb's wasted drive space, though more importantly it counts as one of the four partitions that can be seen by Apple's newly adopted GPT partitioning scheme.  More on GPT in the following paragraph.
</p>
<p><b>sda2</b> ......... <b>HFS+</b> ........... <b>50Gb</b> ..... <b>OS X</b> - After thinning out OS X some &amp; keeping tools I use plus iWork, CrossOver Games &amp; Guild Wars, I have about 25Gb of free space to play with here, &amp; for the odd game that may arrive in the future (Guild Wars 2). :D
</p>
<p><b>sda3</b> ......... <b>Ext3</b> ............ <b>15Gb</b> ...... <b>/</b> <i>- Arch -</i> there is currently 12Gb free, it is a new install though.
</p>
<p><b>sda4</b> ......... <b>JFS</b> .............. <b>30Gb</b> ...... <b>/home</b> - that should be more than enough space for me there, &amp; I can always resize with GParted.
</p>
<p><b>sda5</b> ......... <b>Linux Swap</b> .... <b>2Gb</b> ..... <b>swap</b> - rarely if ever used, but I have the space. It is questionable as to whether this partition needs to exist at all.
</p>
<p>Having now used Arch on the iMac with 1GB of RAM for some months I deleted the /swap partition, as for my uses it was never needed.
</p>
<p><b>sda6</b> ......... <b>Ext3</b> ............ <b>200Gb</b> ...... <b>/thevoid</b> - storage for video's music, unsafe backup, whatever...
</p>
<h4>
<span id="Accessing_the_Ext2.2F3_file_system_from_OS_X"></span><span class="mw-headline" id="Accessing_the_Ext2/3_file_system_from_OS_X">Accessing the Ext2/3 file system from OS X</span>
</h4>
<p>I have been using the <b>ExtFS for Mac</b> from Paragon-Software, it is a commercial package that is simple to install, configure &amp; auto mounts any Ext2/3 file system partitions in a read/write fashion when you boot up OS X, 10.4.11 or later on an Intel Mac.  It has been working superbly for me, to the point that I have reformatted my 200GB partition called /thevoid from JFS to Ext3 to give me access to it from OS X.  For anyone interested you can get a trial version on the Paragon-Software website. 
</p>
<p>There is also a free software application that is apparently somewhat outdated, but works with Ext2/3 &amp; is working with OS X, 10.5, its name is <b>ext2fsx</b>.  I have not used ext2fsx so I can't speak about it from experience.
</p>
<h4><span class="mw-headline" id="The_GPT_partitioning_scheme_that_Apple_uses">The GPT partitioning scheme that Apple uses</span></h4>
<p><a rel="nofollow" class="external autonumber" href="http://developer.apple.com/technotes/tn2006/tn2166.html">[3]</a><sup title="Last check status: domain name not resolved">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2020-12-27 ⓘ]</sup> used to limit OS X, to only being able to use 4 partitions from which you could boot a system. If you haven't allowed your older Mactel, Apple machines to upgrade for quite some time then their firmware is still suffering under this limitation (I'm told) &amp; you should be aware of this fact. 
</p>
<p>Therefore you need to be sure to install your boot loader i.e. GRUB/Lilo, &amp; any other partition that you may want OS X, to see (like a shared FAT32 data drive) on sda3 &amp; sda4, Windows must also be on sda3 or sda4.
</p>
<p>Partitions beyond Apple's (previously) imposed limit of 4 can still be created &amp; used, e.g. Linux Swap, &amp; other partitions, but they won't be accessible by OS X, or directly bootable, though I see no reason why a boot loader like GRUB positioned on sda3 or sda4 could not boot other OS's on partitions numbered greater than sda4.
</p>
<p>This certainly does place limitations on what we can do if we do not allow our systems to accept the appropriate Apple online upgrades.
</p>
<p>If you require more than this limited scheme will allow you, you could do away with OS X, &amp; set up the drive on MBR only, using an external drive with OS X on it to update the firmware.  
</p>
<p>For those that DO accept the online upgrades from Apple, it would seem that you can now place GRUB, Lilo or any other boot loader in partitions beyond the 4th. I say "would seem", as I have been told this (&amp; not read the technical documentation), not read it, &amp; am not prepared to test it no "my" sacrosanct Arch machine. :) 
</p>
<p>The above section will be severely modified, when I have confirmed that Apple have indeed made these changes to their firmware.
</p>
<p>So just to sum up, if you are using a machine with out of date firmware: &amp; you have need to use sda3 &amp; sda4, be sure to put any swap partitions on a partition number greater than sda4.  Also, it is worth considering not using a swap partition at all, as the only computers running Linux/BSD with 1 gigabyte of RAM that use their swap file are doing intensive specialized work such as video editing, sound recording/editing, 3D modelling...  
</p>
<h2><span class="mw-headline" id="rEFIt_Re-sync">rEFIt Re-sync</span></h2>
<p>When partitioning is finished you must restart the iMac &amp; re-sync your partitions with rEFIt, which is quick &amp; easy:  You choose to <b>start the partitioning tool</b> in the <i>rEFIt boot-menu</i> &amp; follow the very simple instructions there.  
<i>rEFIt may prefer to have partitions in numerical order on the drive, i.e. sda1, sda2, sda3, sda4, sda5, sda6 ... &amp; not shuffled.  This is unconfirmed, any feedback on the subject will be appreciated.</i>
</p>
<p>Then reboot &amp; hold down the <b>C</b> key, or wait as I do for the rEFIt boot-menu to appear &amp; choose to boot the Arch install CD.
</p>
<p>This is not necessary when booting through EFI.
</p>
<h2><span class="mw-headline" id="Install_Arch">Install Arch</span></h2>
<p><a href="../en/Installation_guide.html" title="Installation guide">Installation guide</a>.  I used the <b>Core</b> install from the CD &amp; updated later. (The FTP install is a quicker method as it installs the latest packages directly over the internet.)  
</p>
<h2>
<span id="Installing_.26_Configuring_X"></span><span class="mw-headline" id="Installing_&amp;_Configuring_X">Installing &amp; Configuring X</span>
</h2>
<p>When installing the Xserver, <a href="../en/Xorg.html" title="Xorg">Xorg</a> I installed as though I was not going to use the proprietary ATi drivers (now called <i>Catalyst</i>), this allowed me to use both the <i>vesa</i> &amp; the <i>xf86-video-ati</i> open source drivers.  I only did this out of what turned out (at that time) to be a false sense of fear of the approaching fight to get ATi's Catalyst drivers to work.  
</p>
<p>Having now had a couple of years experience with Arch since I wrote the above, I have learned that Catalyst can be a real can of worms on Arch in particular.  This is due to the way that Arch uses cutting edge versions of packages &amp; the rolling release upgrade system. Which can cause there to be occasional incompatibilities between Catalyst &amp; the version of packages that Arch uses.  
</p>
<p>This problem can be relatively easily side stepped once you know how. I recommend the "Catalyst Bar &amp; Grill" <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=57084">[4]</a> thread in the Arch forum. It is the best place to find out where things are up to currently, before you install Catalyst.
</p>
<p>Due to its being deemed too unreliable to be kept in the [extra] repo, Catalyst must now be installed via <b><a href="../en/Arch_User_Repository.html" class="mw-redirect" title="AUR">AUR</a></b> .
</p>
<p>The good news is that the open-source driver support is as I write this, improving dramatically due to AMD having opened up the tech' info' on all of the ATi GPUs, &amp; also of course because of the dedicated team that has been working so hard on implementing this new found knowledge for the open-source community. 
</p>
<p>I highly recommend using the xf86-vide-ati driver, as the 2D is the best you can get &amp; the 3D is continually improving dramatically.  From the stable repo's 3D is very useful right now.
</p>
<h2><span class="mw-headline" id="Controlling_the_screen_backlight_and_brightness">Controlling the screen backlight and brightness</span></h2>
<p>The iMac lacks physical buttons for controlling the backlight of the screen. Depending on the version/model of the computer and how Linux is booted, the brightness of the backlight may or may not be easily controllable. See <a href="../en/Backlight.html" title="Backlight">Backlight</a> for various options.
</p>
<h3><span class="mw-headline" id="backlight.c">backlight.c</span></h3>
<p>Below is the C code for a little program that adjusts the brightness on many LCD Apple screens (I have been using it now for over 3 years).  It is easy to compile &amp; setup using the following instructions.
</p>
<p><b>The instructions follow:</b>
</p>
<p>Copy &amp; paste the C code (found below these instructions) to your <code>/home</code>.  Save the code as a file, <code>backlight.c</code>.
</p>
<p>Now open a terminal in the directory where <code>backlight.c</code> is located.
</p>
<p>Type the following in the Terminal:
</p>
<pre>gcc -o backlight backlight.c
</pre>
<p>You now have a program called <code>backlight</code>. It should adjust the brightness. 
</p>
<p>To change the brightness, you have to have direct access to video memory, which means that you have to be superuser (root).
</p>
<p>Type <code>su</code>, then your root password when prompted.
</p>
<p>Now test the program by typing:
</p>
<pre>./backlight 10
</pre>
<p>in the terminal.
</p>
<p><i>You can give it values from 1 to 15</i>. Find a value you like.
</p>
<p>Now enter the following in the Terminal:
</p>
<pre>cp backlight /usr/local/bin/
</pre>
<p>Which copies the program to the standard location for user installed programs.
</p>
<p>Next, to run it at startup. Still as root, edit <code>/etc/rc.local</code>. Add a line saying <code>/usr/local/bin/backlight N</code>, where <code>N</code> is the number code you want for the brightness.
</p>
<p>That should do it.
</p>
<p>Source:
</p>
<pre>/*
* Apple Macbook Pro LCD backlight control
*
* Copyright (C) 2006 Nicolas Boichat &lt;nicolas @boichat.ch&gt;
* Copyright (C) 2006 Felipe Alfaro Solana &lt;felipe_alfaro @linuxmail.org&gt;
*
* This program is free software; you can redistribute it and/or modify
* it under the terms of the GNU General Public License as published by
* the Free Software Foundation; either version 2 of the License, or
* (at your option) any later version.
*
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
* GNU General Public License for more details.
*
* You should have received a copy of the GNU General Public License
* along with this program; if not, write to the Free Software
* Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
*
*/

#include &lt;stdio.h&gt;
#include &lt;sys/io.h&gt;
#include &lt;stdlib.h&gt;

void init()
{
    if (ioperm(0xB2, 0xB3, 1) &lt; 0)
    {
        perror("ioperm failed (you should be root).");
        exit(2);
    }
}

int get_current_value()
{
    outb(0x03, 0xB3);
    outb(0xBF, 0xB2);
    char t = inb(0xB3) &gt;&gt; 4;
    return t;
}

int calculate_new_value(const char *arg)
{
    int val, new = atoi(arg);

    if (arg[0] == '+' || arg[0] == '-')
        val = new + get_current_value();
    else
        val = new;

    if (val &gt; 15)
        val = 15;
    else if (val &lt; 1)
        val = 1;

    return val;
}

int main(int argc, char** argv)
{
    if (argc &gt; 2)
    {
        printf("Usage:\n");
        printf("%s : read current value\n", argv[0]);
        printf("%s value : write value [0-15]\n", argv[0]);
        exit(1);
    }

    init();

    if (argc &lt; 2)
    {
        printf("Current value : %d\n", get_current_value());
        exit(0);
    }

    if (argc == 2)
    {
        int value = calculate_new_value(argv[1]);
        outb(0x04 | (value &lt;&lt; 4), 0xB3);
        outb(0xBF, 0xB2);
        printf("new value: %d\n", value);
    }

    return 0;
}
</pre>
<h3><span class="mw-headline" id="Brightness_control_on_a_2011_27_inch_iMac">Brightness control on a 2011 27 inch iMac</span></h3>
<p>This program does not work on the 27" iMac released during spring 2011 (model 12,2). On this mac, the <a href="../en/Backlight.html#ACPI" title="Backlight">Backlight#ACPI</a> can be used on the CLI of the Arch Linux installation media. However, after the OS is installed and booted using either rEFIt or Grub2 with BIOS compatibility/emulation, the screen no longer responds to ACPI calls or the <code>backlight</code> program. Currently, x86_64 EFI boot sadly does not work with grub2 and the Arch kernel on the 12,2 iMac. The kernel loads but does not find the SATA disk (likely some problem with initramfs) and thus I have been unable to check the ACPI backlight method on the installed OS.
</p>
<p>An ok workaround until this is fixed is the <a href="../en/Backlight.html#redshift" title="Backlight">Backlight#redshift</a><sup>[<a href="../en/Help:Procedures.html#Fix_broken_section_links" title="Help:Procedures">broken link</a>: invalid section]</sup> method, which dims the screen well.
</p>
<p><b>Update : If you boot Legacy with Grub2 by holding down "option" at startup and selecting the "Windows" disk, your backlight control will work. Booting using EFI or rEFIt disables the backlight control.</b>
<b></b>
</p>
<p><br>
<b>EDIT:</b> I was able to adjust the backlight on a mid 2011, 27 inch iMac by adjusting the values in "radeon_bl1" rather than "acpi_video0." 
</p>
<p>You can check the maximum value allowed with:
</p>
<pre>cat /sys/class/backlight/radeon_bl1/max_brightness </pre>
<p>And you can set the current brightness with:
</p>
<pre>tee /sys/class/backlight/radeon_bl1/brightness &lt;&lt;&lt; ''your_value''</pre>
<h2><span class="mw-headline" id="Getting_sound_to_work_right">Getting sound to work right</span></h2>
<p>Sound does not always work nice out of the box using Linux on an iMac. For instance, the sound can appear "thin" or tinny with too much treble and too little base due to the built in subwoofer being muted by default or the OS may not detect that the headphones have been plugged in. The fixes are generally to load sound drivers with extra model flags specifying relevent iMac model by manipulating <i>/etc/modprobe.d/sound.conf</i> or <i>/etc/modprobe.d/modprobe.conf</i>, restart the computer or the sound system and use alsamixer to make sure all desired channels are not muted.
</p>
<h3>
<span id="The_iMac_20.22_.26_24.22_models"></span><span class="mw-headline" id='The_iMac_20"_&amp;_24"_models'>The iMac 20" &amp; 24" models</span>
</h3>
<p>Add the following to <i>/etc/modprobe.d/sound.conf</i>
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/sound.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options snd-hda-intel model=imac24</pre>
<h3>
<span id="The_imac7.2C1_model:"></span><span class="mw-headline" id="The_imac7,1_model:">The imac7,1 model:</span>
</h3>
<p>The option above may produces tiny sound on imac7,1. To have OSX like rich sound on imac 7,1, add following to <i>/etc/modprobe.d/modprobe.conf</i>
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/sound.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options snd-hda-intel model=mb31</pre>
<p>Using the above gives a workable alsamixer.  I've found that using VLC &amp; its mixer is very helpful when watching DVD's. I have not tested the line out or mic, though I believe that they are working properly with this configuration.
</p>
<h3>
<span id="The_imac12.2C2_27.22_2011_model"></span><span class="mw-headline" id='The_imac12,2_27"_2011_model'>The imac12,2 27" 2011 model</span>
</h3>
<p>Starting with the Linux kernel version 3.3 (at its release candidates) the following setting should be used in <i>/etc/modprobe.d/sound.conf</i> to handle headphone detection correcly:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/sound.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options snd-hda-intel model=imac27</pre>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<p>If you eperience weird boot freeze just after bootloader (basically after Grub loaded linux, which you can verify by appending <code>ignore_loglevel</code> to the linux command line), then you may fix the problem by resetting the PRAM (press Cmd + Alt + Shift + P + R just after boot), and resetting the power management system (by unplugging your iMac for 15 seconds, then plugging it back, waiting 5 seconds, and then powering it up).
</p>
<hr>
<p>A forum thread regarding installation of Arch Linux on the iMac can be found here:
</p>
<p><a rel="nofollow" class="external free" href="https://bbs.archlinux.org/viewtopic.php?id=35355">https://bbs.archlinux.org/viewtopic.php?id=35355</a>
</p>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Apple.html" title="Category:Apple">Apple</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li>
<li><a href="../en/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=IMac_Aluminum&amp;oldid=647305">https://wiki.archlinux.org/index.php?title=IMac_Aluminum&amp;oldid=647305</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 27 December 2020, at 12:14.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
