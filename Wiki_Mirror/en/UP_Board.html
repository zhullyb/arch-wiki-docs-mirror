<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>UP Board - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-UP_Board rootpage-UP_Board skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">UP Board</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<p>The <a rel="nofollow" class="external text" href="http://up-board.org">UP Board</a> is a Intel based SOC device by Aaeon.  There is a companion device, the UP Core, that uses the same chipset and devices.  Installation of Arch is no different, except that you do not have the GPIO bus to enable.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Installation"><span class="tocnumber">1</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#GPIO"><span class="tocnumber">2</span> <span class="toctext">GPIO</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#Sound"><span class="tocnumber">3</span> <span class="toctext">Sound</span></a>
<ul>
<li class="toclevel-2 tocsection-4">
<a href="#Compilation"><span class="tocnumber">3.1</span> <span class="toctext">Compilation</span></a>
<ul>
<li class="toclevel-3 tocsection-5"><a href="#Manual"><span class="tocnumber">3.1.1</span> <span class="toctext">Manual</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#Arch_Build_System"><span class="tocnumber">3.1.2</span> <span class="toctext">Arch Build System</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-7">
<a href="#Troubleshooting"><span class="tocnumber">4</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#Reboot_causing_kernel_panic"><span class="tocnumber">4.1</span> <span class="toctext">Reboot causing kernel panic</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#See_also"><span class="tocnumber">5</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>The UP Board features a <a href="../en/Unified_Extensible_Firmware_Interface.html" class="mw-redirect" title="UEFI">UEFI</a> only setup (no BIOS emulation). The standard UEFI installation process may be followed. <a href="../en/Systemd-boot.html" title="Systemd-boot">systemd-boot</a> works well as a simple bootloader.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The installation disk for the UP Board is <code>/dev/mmcblk0</code>. <a href="../en/Partitioning.html#GUID_Partition_Table" class="mw-redirect" title="GPT">GPT</a> is the recommended partition type.</div>
<h2><span class="mw-headline" id="GPIO">GPIO</span></h2>
<p>The <a href="https://en.wikipedia.org/wiki/GPIO" class="extiw" title="wikipedia:GPIO">GPIO</a> pins on the UP board are routed through a <a href="https://en.wikipedia.org/wiki/CPLD" class="extiw" title="wikipedia:CPLD">CPLD</a> that requires a custom driver. This driver has not yet been added to the mainline kernel, so it is required to build a custom kernel or patch it in order to add the functionality. See <a rel="nofollow" class="external text" href="https://wiki.up-community.org/Software#Linux_Kernel">UP's official wiki page</a> for more information.
</p>
<h2><span class="mw-headline" id="Sound">Sound</span></h2>
<p>As of August 2016, the mainline kernel does not support sound through HDMI for cherry trail based devices like the UP Board. There are plans on adding support to the mainline kernel as noted <a rel="nofollow" class="external text" href="https://bugzilla.kernel.org/show_bug.cgi?id=113971#c6">here</a>, but in the mean time if you wish to have sound you will need to manually patch your kernel. There is currently no <a href="../en/Arch_User_Repository.html" class="mw-redirect" title="AUR">AUR</a> package including these patches.
</p>
<h3><span class="mw-headline" id="Compilation">Compilation</span></h3>
<p>Without any optimizations, compilation on the UP Board takes around 5-6 hours. Setting your <code>MAKEFLAGS</code> beforehand will drastically improve the compilation time. If you're using the ABS the <a href="../en/Makepkg.html" title="Makepkg">makepkg</a> page has information on how to set the variable in there.
</p>
<h4><span class="mw-headline" id="Manual">Manual</span></h4>
<ul><li>Download a copy of the patched kernel from <a rel="nofollow" class="external text" href="https://github.com/plbossart/sound/archive/byt-cht-hdmi-v4.7.tar.gz">here</a> and the latest kernel sources from <a rel="nofollow" class="external free" href="https://www.kernel.org">https://www.kernel.org</a>.</li></ul>
<ul><li>Once you've extracted the archive, you will need to remove the inline reference in one of the header files. You can do this with sed like so:</li></ul>
<pre>$ sed -i 's/inline//g' sound-byt-cht-hdmi-v4.7/sound/hdmi_audio/intel_mid_hdmi_audio.h
</pre>
<ul><li>Next you'll need to create a patch for the 2 folders that have been changed, <code>sound/</code> and <code>drivers/gpu/drm/i915</code>:</li></ul>
<pre>$ diff -ENwbur {linux-4.7.2,sound-byt-cht-hdmi-v4.7}/drivers/gpu/drm/i915 &gt;&gt; cherry.patch
$ diff -ENwbur {linux-4.7.2,sound-byt-cht-hdmi-v4.7}/sound &gt;&gt; cherry.patch
</pre>
<ul><li>Once the patch has been created you can move it into the kernel sources directory and run:</li></ul>
<pre>$ patch -p1 &lt; cherry.patch
</pre>
<ul><li>Lastly, you'll need to make sure that <code>CONFIG_SUPPORT_HDMI=y</code> option is in the <code>.config</code>.</li></ul>
<h4><span class="mw-headline" id="Arch_Build_System">Arch Build System</span></h4>
<p>If you wish to build the kernel using the ABS, follow the steps provided in <a href="../en/Kernel/Arch_Build_System.html" class="mw-redirect" title="Kernels/Arch Build System">Kernels/Arch Build System</a>. Remember to add the patch to the prepare function and run <i>updpkgsums</i> to update the checksum for the changed config file.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Reboot_causing_kernel_panic">Reboot causing kernel panic</span></h3>
<p>Rebooting the board multiple times without disconnecting power, as what could happen if using as a server, could fail with a kernel panic. This is possibly due to a bug, as discussed at <a rel="nofollow" class="external text" href="https://forum.up-community.org/discussion/comment/8980#Comment_8980">"UPboard Ubilinux Freezing"</a> forum topic and <a rel="nofollow" class="external text" href="https://bugs.freedesktop.org/show_bug.cgi?id=106721">Bug 106721</a> in Freedesktop.org bug tracker.
</p>
<p>To make rebooting the board more reliable, try adding the following to your <code>/etc/default/grub</code> configuration.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/default/grub</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">GRUB_CMDLINE_LINUX_DEFAULT="reboot=efi,cold fsck.mode=force fsck.repair=yes"</pre>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a href="../en/UP_Squared.html" title="UP Squared">UP Squared</a></li>
<li><a rel="nofollow" class="external text" href="https://www.up-board.org">Homepage</a></li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Hardware.html" title="Category:Hardware">Hardware</a></li></ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=UP_Board&amp;oldid=631549">https://wiki.archlinux.org/index.php?title=UP_Board&amp;oldid=631549</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 12 August 2020, at 08:43.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
