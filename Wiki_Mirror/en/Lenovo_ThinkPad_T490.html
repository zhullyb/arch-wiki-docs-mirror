<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Lenovo ThinkPad T490 - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Lenovo_ThinkPad_T490 rootpage-Lenovo_ThinkPad_T490 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Lenovo ThinkPad T490</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="noprint archwiki-template-message">
<p><a href="/title/File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a><b>This article or section does not follow the <a href="/title/Help:Laptop_page_guidelines" title="Help:Laptop page guidelines">Laptop page guidelines</a>.</b><a href="/title/File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Hardware table needs IDs and a function keys table should be added (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/title/Talk:Lenovo_ThinkPad_T490">Talk:Lenovo ThinkPad T490#</a>)</div>
</div>
<table class="wikitable" style="float: right;">

<tbody>
<tr>
<th>Hardware</th>
<th>PCI/USB ID</th>
<th>Working?
</th>
</tr>
<tr>
<td>GPU</td>
<td></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>Wireless</td>
<td></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>Audio</td>
<td></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>TrackPoint</td>
<td></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>Touchpad</td>
<td></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>Webcam</td>
<td><code>04f2:b681</code></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>Bluetooth</td>
<td></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>Mobile broadband</td>
<td></td>
<td data-sort-value="3" style="background: #ffa; color: inherit; vertical-align: middle; text-align: center;">Untested
</td>
</tr>
<tr>
<td>Fingerprint reader</td>
<td><code>06cb:00bd</code></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>MicroSD reader</td>
<td></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
</tbody>
</table>
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="/title/Lenovo_ThinkPad_T490s" title="Lenovo ThinkPad T490s">Lenovo ThinkPad T490s</a></li>
<li><a href="/title/Lenovo_ThinkPad_T480" title="Lenovo ThinkPad T480">Lenovo ThinkPad T480</a></li>
<li><a href="/title/Lenovo_ThinkPad_T480s" title="Lenovo ThinkPad T480s">Lenovo ThinkPad T480s</a></li>
<li><a href="/title/Lenovo_ThinkPad_T470" title="Lenovo ThinkPad T470">Lenovo ThinkPad T470</a></li>
</ul>
</div>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#FN_Keys"><span class="tocnumber">1</span> <span class="toctext">FN Keys</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Touchpad"><span class="tocnumber">2</span> <span class="toctext">Touchpad</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Fingerprint_Sensor"><span class="tocnumber">3</span> <span class="toctext">Fingerprint Sensor</span></a></li>
<li class="toclevel-1 tocsection-4">
<a href="#Known_Issues"><span class="tocnumber">4</span> <span class="toctext">Known Issues</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#Extremely_high_battery_usage_because_of_dedicated_GPU"><span class="tocnumber">4.1</span> <span class="toctext">Extremely high battery usage because of dedicated GPU</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#CPU_throttling_issue"><span class="tocnumber">4.2</span> <span class="toctext">CPU throttling issue</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Speaker_noise_issue"><span class="tocnumber">4.3</span> <span class="toctext">Speaker noise issue</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Slow_wakeup_after_suspend"><span class="tocnumber">4.4</span> <span class="toctext">Slow wakeup after suspend</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#ACPI"><span class="tocnumber">5</span> <span class="toctext">ACPI</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#Also_See"><span class="tocnumber">6</span> <span class="toctext">Also See</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="FN_Keys">FN Keys</span></h2>
<p>Most FN keys should work out of the box, but if it does not, bind mentioned keys to below commands:
</p>
<ul>
<li>
<b>F1</b> button: <code>amixer set Master toggle</code>.</li>
<li>
<b>F2</b> button: <code>amixer set Master 5%-</code>.</li>
<li>
<b>F3</b> button: <code>amixer set Master 5%+</code>.</li>
<li>
<b>F4</b> button: <code>amixer set Capture toggle</code>.</li>
</ul>
<h2><span class="mw-headline" id="Touchpad">Touchpad</span></h2>
<p>Touchpad is problematic. By default, if you hold the thumb over the button area, the pointer will not move. Once the system is installed, the problem disappears when using KDE, while GNOME still exhibits the issue. In GNOME, use the following to fix the problem:
</p>
<pre>xinput set-prop 'SynPS/2 Synaptics TouchPad' 'libinput Click Method Enabled' 1 0
</pre>
<p>Even after doing this, the mouse pointer still jumps around when clicking the button sometimes.
</p>
<p>Current systemd v245 contains <a rel="nofollow" class="external text" href="https://github.com/systemd/systemd/issues/15694">broken hwdb entry</a> that sets invalid aspect ratio for the touchpad making it behave strangely.
</p>
<h2><span class="mw-headline" id="Fingerprint_Sensor">Fingerprint Sensor</span></h2>
<p>The fingerprint sensor works with some recent firmware and software updates (2019-12-15). Driver development info: <a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/libfprint/libfprint/issues/181">[1]</a>. 
</p>
<ol>
<li>Use <a href="/title/Fwupd" title="Fwupd">fwupd</a> to install the latest firmware for "Synaptics Prometheus Fingerprint Reader". The update might have to be done manually as the released firmware is in testing; or you could <a rel="nofollow" class="external text" href="https://github.com/fwupd/fwupd/wiki/LVFS-Testing-remote">enable the testing remote in fwupd</a> to allow automated upgrade. The relevant firmwares are <a rel="nofollow" class="external text" href="https://fwupd.org/lvfs/devices/com.synaptics.prometheus.firmware">Prometheus Fingerprint Reader</a> and <a rel="nofollow" class="external text" href="https://fwupd.org/lvfs/devices/com.synaptics.prometheus.config">Prometheus Fingerprint Reader Configuration</a>.</li>
<li>Latest <a rel="nofollow" class="external text" href="https://fprint.freedesktop.org/">fprintd and libfprint</a> are required. <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/fprintd-libfprint2/">fprintd-libfprint2</a></span><sup><small>AUR</small></sup> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/libfprint-git/">libfprint-git</a></span><sup><small>AUR</small></sup> can be useful here.</li>
<li>
<a href="/title/Fprint" title="Fprint">fprint</a> has more details on how to setup the fingerprint for <a href="/title/PAM" title="PAM">PAM</a> authentication for example.</li>
</ol>
<h2><span class="mw-headline" id="Known_Issues">Known Issues</span></h2>
<h3><span class="mw-headline" id="Extremely_high_battery_usage_because_of_dedicated_GPU">Extremely high battery usage because of dedicated GPU</span></h3>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> In short, because of a device-specific quirk in how Lenovo handles ACPI calls, you need the following kernel cmdline parameter to successfully power off your dedicated GPU: <code>acpi_osi='!Linux-Lenovo-NV-HDMI-Audio'</code>.</div>
<p>If your laptop is equipped with a Nvidia dedicated GPU (such as the GeForce MX250), you will likely encounter very high battery usage because the GPU will not turn off. 
</p>
<p>You can check the "power state" of the dedicated gpu with the following, where you need to change "3c:00.0" with the PCI BusID of your GPU you get from <code>lspci | grep -i nvidia</code>:
</p>
<pre>cat /sys/bus/pci/devices/0000:3c:00.0/firmware_node/power_state
</pre>
<p>Power state 'D0' means your GPU is consuming a lot of power <b>right now</b> Power states 'D3hot' and 'D3cold' are the low-power modes where the GPU is basically turned off.
</p>
<p>The following steps are required to fix this issue:
</p>
<ul><li>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nvidia">nvidia</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-video-intel">xf86-video-intel</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bbswitch">bbswitch</a></span> (optionally, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bumblebee">bumblebee</a></span> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/nvidia-xrun/">nvidia-xrun</a></span><sup><small>AUR</small></sup> to enable the card on-demand).</li></ul>
<ul><li>Make sure to have the following inside file <code>/etc/X11/nvidia-xorg.conf</code>, where the ID after "PCI:" (60 in the example above) will be the output you get from <code>lspci | grep -i nvidia</code>, converted from hex to decimal (e.g., from <code>3c</code> to <code>60</code>):</li></ul>
<pre>Section "Device"
  Identifier "nvidia"
  Driver "nvidia"
  BusID "PCI:60:0:0"
EndSection
</pre>
<ul><li>Load the bbswitch module at boot by running <code>echo bbswitch | sudo tee /etc/modules-load.d/bbswitch.conf</code>
</li></ul>
<ul><li>
<b>Important</b>: Edit <code>/etc/default/grub</code> and add <code>acpi_osi='!Linux-Lenovo-NV-HDMI-Audio'</code> to the kernel command line parameters. <a rel="nofollow" class="external text" href="https://forums.lenovo.com/t5/ThinkPad-P-and-W-Series-Mobile/Disable-NVIDIA-P520-on-the-P43s-ACPI-Calls/m-p/4545175">This article has a short explaination why</a>. Remember to regenerate grub.cfg by running <code>sudo grub-mkconfig -o /boot/grub/grub.cfg</code> (change the path depending on where your boot partition is), and reboot. This step is required because of a Lenovo bug in how they handle ACPI calls, which bbswitch relies on to power on/off your GPU.</li></ul>
<ul><li>You can now turn on/off the dedicated GPU by running the following as root</li></ul>
<pre>tee /proc/acpi/bbswitch &lt;&lt;&lt;OFF
tee /proc/acpi/bbswitch &lt;&lt;&lt;ON
</pre>
<p>Check the power status of the GPU by running <code>cat /proc/acpi/bbswitch</code>. 
</p>
<p>Remember: bbswitch will not work if there is another driver using the GPU. If there is another driver using the GPU, you will get a warning inside <a href="/title/Journal" class="mw-redirect" title="Journal">journal</a>. Simply remove the offending module by <code>sudo rmmod nvidia</code> or <code>sudo rmmod nouveau</code>. 
</p>
<ul><li>If you want to boot with your GPU disabled, run:</li></ul>
<pre>echo options bbswitch load_state=0 unload_state=1 | sudo tee /etc/modprobe.d/bbswitch.conf
</pre>
<p>And blacklist any nvidia/nouveau driver that tries to load at boot, by editing <code>/etc/modprobe.d/blacklist.conf</code>:
</p>
<pre>blacklist nouveau
blacklist nvidia-drm
blacklist nvidia-modeset
blacklist nvidia-uvm
blacklist nvidia
</pre>
<ul><li>If you did everything correctly, you should experience a significant drop in battery usage on idle (e.g., from 7W to 3.5W on idle), almost doubling your battery life.</li></ul>
<h3><span class="mw-headline" id="CPU_throttling_issue">CPU throttling issue</span></h3>
<p>With the BIOS Version 1.52 (this problem is known to occur on 1.52, it might still happen on other versions too), the CPU tends to throttle down to 400 MHz earlier than it should. In particular, this can be seen when using <a href="/title/Bumblebee" title="Bumblebee">Bumblebee</a>.
</p>
<p>After installing BIOS Version 1.54, this problem is fixed.
</p>
<h3><span class="mw-headline" id="Speaker_noise_issue">Speaker noise issue</span></h3>
<p>The speaker on the Lenovo Thinkpad T490 may have a high static hissing noise, which does not change if you lower the volume, but stops if you mute the speaker or use the headphone jack.
This problem cannot be fixed completely as of now. Updating to the most current BIOS version will make the speaker silent while it's not playing anything without you having to mute it all the time. But as soon as the user is playing sound, the noise will be back, clearly audible in the background.
</p>
<p>Check the <a rel="nofollow" class="external text" href="https://support.lenovo.com/">Lenovo Support Website</a> for the newest BIOS Version.
</p>
<h3><span class="mw-headline" id="Slow_wakeup_after_suspend">Slow wakeup after suspend</span></h3>
<p>After suspend the laptop takes a few second until it becomes responsive. Disallowing the access to the <a href="/title/ThinkPad_mobile_Internet" title="ThinkPad mobile Internet">WWAN</a> device in the BIOS solves this issue.
</p>
<h2><span class="mw-headline" id="ACPI">ACPI</span></h2>
<p>The default <code>/etc/acpi/handler.sh</code> script has a check for the device that looks like this:
</p>
<pre>ac_adapter)
        case "$2" in
            AC|ACAD|ADP0)
</pre>
<p>This will not work, since the T490 device is called <code>ACPI0003</code> which is not matched by the above check. The instructions in <a href="/title/Acpid" title="Acpid">Acpid</a> does mention a pattern that does work and it is recommended to use this instead.
</p>
<h2><span class="mw-headline" id="Also_See">Also See</span></h2>
<ul><li>
<a rel="nofollow" class="external text" href="https://web.archive.org/web/20191114160928/https://forums.lenovo.com/t5/Other-Linux-Discussions/X1C6-T480s-low-cTDP-and-trip-temperature-in-Linux/m-p/4535310/highlight/true#M13653">Lenovo Forums: A throttling fix is being investigated by Lenovo</a>.</li></ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="/title/Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="/title/Category:Lenovo" title="Category:Lenovo">Lenovo</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="/title/Category:Pages_or_sections_flagged_with_Template:Laptop_style" title="Category:Pages or sections flagged with Template:Laptop style">Pages or sections flagged with Template:Laptop style</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Lenovo_ThinkPad_T490&amp;oldid=669690">https://wiki.archlinux.org/index.php?title=Lenovo_ThinkPad_T490&amp;oldid=669690</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 8 May 2021, at 13:53.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="/title/ArchWiki:Privacy_policy" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="/title/ArchWiki:About" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="/title/ArchWiki:General_disclaimer" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
