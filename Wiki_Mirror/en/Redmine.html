<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Redmine - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Redmine rootpage-Redmine skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Redmine</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../en/Ruby_on_Rails.html" title="Ruby on Rails">Ruby on Rails</a></li>
<li><a href="../en/RVM.html" title="RVM">RVM</a></li>
<li><a href="../en/MariaDB.html" title="MariaDB">MariaDB</a></li>
<li><a href="../en/Apache_HTTP_Server.html" title="Apache HTTP Server">Apache HTTP Server</a></li>
<li><a href="../en/Nginx.html" title="Nginx">Nginx</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://www.redmine.org/">Redmine</a> is a <a href="https://en.wikipedia.org/wiki/free_and_open_source_software" class="extiw" title="wikipedia:free and open source software">free and open source</a>, web-based <a href="https://en.wikipedia.org/wiki/project_management" class="extiw" title="wikipedia:project management">project management</a> and <a href="https://en.wikipedia.org/wiki/Issue_tracking_system" class="extiw" title="wikipedia:Issue tracking system">issue tracking</a> tool. It handles multiple projects and subprojects.  It <a rel="nofollow" class="external text" href="https://www.redmine.org/projects/redmine/wiki/Features">features</a> per project wikis and forums, time tracking, and flexible role based access control. It includes a <a href="https://en.wikipedia.org/wiki/calendar" class="extiw" title="wikipedia:calendar">calendar</a> and <a href="https://en.wikipedia.org/wiki/Gantt_chart" class="extiw" title="wikipedia:Gantt chart">Gantt charts</a> to aid visual representation of projects and their <a href="https://en.wikipedia.org/wiki/time_limit" class="extiw" title="wikipedia:time limit">deadlines</a>. Redmine integrates with various <a href="https://en.wikipedia.org/wiki/version_control" class="extiw" title="wikipedia:version control">version control</a> systems and includes a repository browser and diff viewer.
</p>
<p>Redmine is written using the <a href="../en/Ruby_on_Rails.html" title="Ruby on Rails">Ruby on Rails</a> framework. It is cross-platform and cross-<a href="https://en.wikipedia.org/wiki/database" class="extiw" title="wikipedia:database">database</a> and supports 34 languages.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Installation"><span class="tocnumber">1</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Installation_2"><span class="tocnumber">2</span> <span class="toctext">Installation</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Build_and_Installation"><span class="tocnumber">2.1</span> <span class="toctext">Build and Installation</span></a></li>
<li class="toclevel-2 tocsection-4">
<a href="#Database_Configuration"><span class="tocnumber">2.2</span> <span class="toctext">Database Configuration</span></a>
<ul>
<li class="toclevel-3 tocsection-5"><a href="#Database_Creation"><span class="tocnumber">2.2.1</span> <span class="toctext">Database Creation</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#Database_Access_Configuration"><span class="tocnumber">2.2.2</span> <span class="toctext">Database Access Configuration</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-7"><a href="#Ruby_gems"><span class="tocnumber">2.3</span> <span class="toctext">Ruby gems</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Session_Store_Secret_Generation"><span class="tocnumber">2.4</span> <span class="toctext">Session Store Secret Generation</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Database_Structure_Creation"><span class="tocnumber">2.5</span> <span class="toctext">Database Structure Creation</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Database_Population_with_Default_Data"><span class="tocnumber">2.6</span> <span class="toctext">Database Population with Default Data</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#File_System_Permissions"><span class="tocnumber">2.7</span> <span class="toctext">File System Permissions</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Test_the_installation"><span class="tocnumber">2.8</span> <span class="toctext">Test the installation</span></a></li>
<li class="toclevel-2 tocsection-13">
<a href="#Configure_the_production_server"><span class="tocnumber">2.9</span> <span class="toctext">Configure the production server</span></a>
<ul>
<li class="toclevel-3 tocsection-14"><a href="#Puma_/_Unicorn"><span class="tocnumber">2.9.1</span> <span class="toctext">Puma / Unicorn</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#Phusion_Passenger"><span class="tocnumber">2.9.2</span> <span class="toctext">Phusion Passenger</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-16"><a href="#Updating"><span class="tocnumber">3</span> <span class="toctext">Updating</span></a></li>
<li class="toclevel-1 tocsection-17">
<a href="#Troubleshooting"><span class="tocnumber">4</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-18"><a href="#Runtime_error_complaining_that_RMagick_was_configured_with_older_version"><span class="tocnumber">4.1</span> <span class="toctext">Runtime error complaining that RMagick was configured with older version</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#Error_when_installing_gems:_Cannot_load_such_file_--_mysql2/mysql2"><span class="tocnumber">4.2</span> <span class="toctext">Error when installing gems: Cannot load such file -- mysql2/mysql2</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Checkout_SVN_Source"><span class="tocnumber">4.3</span> <span class="toctext">Checkout SVN Source</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#Automating_The_Update_Process"><span class="tocnumber">4.4</span> <span class="toctext">Automating The Update Process</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#Creating_a_Systemd_Unit"><span class="tocnumber">4.5</span> <span class="toctext">Creating a Systemd Unit</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-23"><a href="#See_also"><span class="tocnumber">5</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>This document will guide you through the suggested installation process of Redmine.
</p>
<p>If for some reason you want to setup redmine manually, it is recommended to follow the official <a rel="nofollow" class="external text" href="https://redmine.org/projects/redmine/wiki/RedmineInstall">Installation Guide</a>.
</p>
<p>Although it is possible to run Redmine on its own for testing purposes, for production use it requires an SQL database as well as a web server.
As database it is recommended to use <a href="../en/MariaDB.html" title="MariaDB">MariaDB</a> or <a href="../en/PostgreSQL.html" title="PostgreSQL">PostgreSQL</a>.
The supported web servers are
</p>
<ul>
<li>
<a href="../en/Category:Apache.html" class="mw-redirect" title="Apache">Apache</a> or <a href="../en/Nginx.html" title="Nginx">nginx</a> via <a rel="nofollow" class="external text" href="https://www.phusionpassenger.com/">Phusion Passenger</a>
</li>
<li><a href="../en/Ruby_on_Rails.html#Puma_(with_Nginx_as_reverse_proxy_server)" title="Ruby on Rails">Ruby on Rails#Puma (with Nginx as reverse proxy server)</a></li>
<li><a href="../en/Ruby_on_Rails.html#Unicorn" title="Ruby on Rails">Ruby on Rails#Unicorn</a></li>
</ul>
<h2><span class="mw-headline" id="Installation_2">Installation</span></h2>
<h3><span class="mw-headline" id="Build_and_Installation">Build and Installation</span></h3>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=redmine">redmine</a></span> package.
</p>
<p>As redmine still requires Ruby 2.6, while the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ruby">ruby</a></span> package in the repositories is 2.7, it installs the legacy package <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ruby-2.6">ruby-2.6</a></span><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">broken link</a>: package not found]</sup> into `/opt/ruby-2.6`.
To use the correct executables in all commands below we set up some temporary aliases. Of course, you can also specify the full paths in all commands below.
</p>
<pre># alias ruby=/opt/ruby2.6/bin/ruby-2.6
# alias bundle=/opt/ruby2.6/bin/bundle-2.6
# alias gem=/opt/ruby2.6/bin/gem-2.6
</pre>
<p>In the following we assume user under which the redmine will be running is <code>http</code>. The ruby commands are thus explicitly executed under this specifiy user's control.
</p>
<h3><span class="mw-headline" id="Database_Configuration">Database Configuration</span></h3>
<p>Now, we will need to create the database that the Redmine will use to store your data. For now on, the database and its user will be named <code>redmine</code>. But this names can be changed to anything else.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The configuration for <a href="../en/MariaDB.html" title="MariaDB">MariaDB</a> and <a href="../en/MySQL.html" title="MySQL">MySQL</a> will be the same since both are binary compatible.</div>
<h4><span class="mw-headline" id="Database_Creation">Database Creation</span></h4>
<p>To create the database, the user and set privileges:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># mysql -u root -p</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">CREATE DATABASE redmine CHARACTER SET UTF8;
CREATE USER 'redmine'@'localhost' IDENTIFIED BY 'my_password';
GRANT ALL PRIVILEGES ON redmine.* TO 'redmine'@'localhost';</pre>
<p>For PostgreSQL:
</p>
<pre>CREATE ROLE redmine LOGIN ENCRYPTED PASSWORD 'my_password' NOINHERIT VALID UNTIL 'infinity';
CREATE DATABASE redmine WITH ENCODING='UTF8' OWNER=redmine;</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you want to use additional environments, you must create separate databases for each one (for example: <i>development</i> and <i>test</i>).</div>
<h4><span class="mw-headline" id="Database_Access_Configuration">Database Access Configuration</span></h4>
<p>Now you need to configure Redmine to access the database we just created. To do that you have to copy <code>/usr/share/webapps/redmine/config/database.yml.example</code> to <code>database.yml</code>:
</p>
<pre># cd /usr/share/webapps/redmine/config
# cp database.yml.example database.yml
</pre>
<p>And then edit this file in order to configure your database settings for "production" environment (you can configure for the "development" and "test" environments too, just change the appropriate sections).
</p>
<p>Example for MariaDB and MySQL database:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">nano database.yml</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">production:
  adapter: mysql2
  database: redmine
  host: localhost
  port: 3307   <b>#If your server is not running on the standard port (3306), set it here, otherwise this line is unnecessary.</b>
  username: redmine
  password: my_password</pre>
<p>Example for PostgreSQL database:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">nano database.yml</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">production:
  adapter: postgresql
  database: redmine
  host: localhost
  username: redmine
  password: my_password
  encoding: utf8
  schema_search_path: &lt;database_schema&gt; (default - public)</pre>
<p>Example for a SQL Server database:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">nano database.yml</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">production:
  adapter: sqlserver
  database: redmine
  host: localhost <b>#Set not default host (localhost) here, otherwise this line is unnecessary.</b>
  port: 1433 <b>#Set not standard port (1433) here, otherwise this line is unnecessary.</b>
  username: redmine
  password: my_password
</pre>
<h3><span class="mw-headline" id="Ruby_gems">Ruby gems</span></h3>
<p>Redmine requires some <a href="../en/Ruby.html#RubyGems" class="mw-redirect" title="RubyGems">RubyGems</a>, however <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=redmine">redmine</a></span> comes prepackaged with all requirements.
</p>
<h3><span class="mw-headline" id="Session_Store_Secret_Generation">Session Store Secret Generation</span></h3>
<p>Now you must generate a random key that will be used by Rails to encode cookies that stores session data thus preventing their tampering:
</p>
<pre># bundle exec rake generate_secret_token
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Generating a new secret token invalidates all existing sessions after restart.</div>
<h3><span class="mw-headline" id="Database_Structure_Creation">Database Structure Creation</span></h3>
<p>With the database created and the access configured for Redmine, now it is time to create the database structure. This is done by running the following command under the application root directory:
</p>
<pre># cd /usr/share/webapps/redmine
# chown http:http db # migration requires write access to db/schema.rb
# sudo -u http -g http RAILS_ENV=production bundle exec rake db:migrate
</pre>
<p>These command will create tables by running all migrations one by one then create the set of the permissions and the application administrator account, named admin.
</p>
<h3><span class="mw-headline" id="Database_Population_with_Default_Data">Database Population with Default Data</span></h3>
<p>Now you may want to insert the default configuration data in database, like basic types of  task, task states, groups, etc. To do so execute the following:
</p>
<pre># sudo -u http -g http RAILS_ENV=production bundle exec rake redmine:load_default_data
</pre>
<p>Redmine will prompt for the data set language that should be loaded; you can also define the REDMINE_LANG environment variable before running the command to a value which will be automatically and silently picked up by the task:
</p>
<pre># sudo -u http -g http RAILS_ENV=production REDMINE_LANG=de bundle exec rake redmine:load_default_data
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This step is not mandatory, but it certainly will save you a lot of work to start using Redmine. And for a first time it can be very instructive.</div>
<h3><span class="mw-headline" id="File_System_Permissions">File System Permissions</span></h3>
<p>The user account running the application <b>must</b> have write permission on the following subdirectories:
</p>
<ul>
<li>
<b>files</b>: storage of attachments.</li>
<li>
<b>log</b>: application log file production.log.</li>
<li>
<b>tmp</b> and <b>tmp/pdf</b>: used to generate PDF documents among other things (create these ones if not present).</li>
</ul>
<p>The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=redmine">redmine</a></span> comes preconfigured with permissions for user <code>http</code>. In case you like to use a different user you need to change the ownership, e.g.
</p>
<pre># chown -R redmine:redmine files/ log/ tmp/
</pre>
<h3><span class="mw-headline" id="Test_the_installation">Test the installation</span></h3>
<p>To test your new installation using WEBrick web server run the following in the Redmine folder:
</p>
<pre># sudo -u http -g http ruby bin/rails server webrick -e production
</pre>
<p>Once WEBrick has started, point your browser to <b><a rel="nofollow" class="external free" href="http://localhost:3000/">http://localhost:3000/</a></b>. You should now see the application welcome page. Use default administrator account to log in: <i><b>admin</b></i>/<i><b>admin</b></i>. You can go to Administration menu and choose Settings to modify most of the application settings.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Webrick is not suitable for production use, please only use webrick for testing that the installation up to this point is functional. Use one of the many other guides in this wiki to setup redmine to use either Passenger (aka mod_rails), FCGI or a Rack server (Unicorn, Thin, Puma or hellip) to serve up your redmine.</div>
<h3><span class="mw-headline" id="Configure_the_production_server">Configure the production server</span></h3>
<h4>
<span id="Puma_.2F_Unicorn"></span><span class="mw-headline" id="Puma_/_Unicorn">Puma / Unicorn</span>
</h4>
<p>Puma and Unicorn are web servers based on Mongrel. For its increased speed and smaller memory footprint <a rel="nofollow" class="external text" href="https://puma.io/">Puma</a> is recommended. Both are very simple to setup, but for production use should be used in combination with a reverse proxy (Apache, Nginx, lighttpd, etc.).
</p>
<pre># gem install puma
# sudo -u http -g http /opt/ruby2.6/bin/puma
</pre>
<p>For production, puma can be started as a systemd service:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/redmine.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Redmine
After=network.target

[Service]
User=http
Group=http
RestartSec=1
Restart=always
StartLimitInterval=10
StartLimitBurst=10
WorkingDirectory=/usr/share/webapps/redmine/
ExecStart=/opt/ruby2.6/bin/puma -e production -p 9292

[Install]
WantedBy=multi-user.target</pre>
<pre># systemctl daemon-reload
# systemctl enable redmine
# systemctl start redmine
</pre>
<h4><span class="mw-headline" id="Phusion_Passenger">Phusion Passenger</span></h4>
<p>For Apache and Nginx, it is recommended to use <a rel="nofollow" class="external text" href="https://www.phusionpassenger.com/">Phusion Passenger</a>. Passenger is a module available for <a href="../en/Nginx.html" title="Nginx">Nginx</a> and <a href="../en/Apache_HTTP_Server.html" title="Apache HTTP Server">Apache HTTP Server</a>.
</p>
<p>Start by installing the 'passenger' gem:
</p>
<pre># gem install passenger
</pre>
<p>Now you have to look at your passenger gem installation directory to continue. If you do not known where it is, type:
</p>
<pre># gem env
</pre>
<p>And look at the <code>GEM PATHS</code> to find where the gems are installed. If you followed this guide and installed <a href="../en/RVM.html" title="RVM">RVM</a>, you can have more than one path, look at the one you are using.
</p>
<p>For this guide so far, the gem path is <code>/usr/local/rvm/gems/ruby-2.0.0-p247@global</code>.
</p>
<pre># cd /usr/local/rvm/gems/ruby-2.0.0-p247@global/gems/passenger-4.0.23
</pre>
<p>If you are aiming to use <a href="../en/Apache_HTTP_Server.html" title="Apache HTTP Server">Apache HTTP Server</a>, run:
</p>
<pre># passenger-install-apache2-module
</pre>
<p>In case a rails application is deployed with a sub-URI, like <a rel="nofollow" class="external free" href="http://example.com/yourapplication">http://example.com/yourapplication</a>, some additional configuration is required, see <a rel="nofollow" class="external text" href="https://www.phusionpassenger.com/library/deploy/apache/deploy/ruby/#deploying-an-app-to-a-sub-uri-or-subdirectory">the Passenger documentation</a>
</p>
<p>For <a href="../en/Nginx.html" title="Nginx">Nginx</a>:
</p>
<pre># passenger-install-nginx-module
</pre>
<p>And finally, the installer will provide you with further information regarding the installation (such as installing additional libraries). So, to setup your server, simply follow the output from the passenger installer.
</p>
<h2><span class="mw-headline" id="Updating">Updating</span></h2>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a><b>This article or section is out of date.</b><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Redmine package is now in community and has its own dependencies. The update process is a little different. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Redmine">Talk:Redmine#</a>)</div>
</div>
<p>Backup the files used in Redmine:
</p>
<pre># tar czvf ~/redmine_files.tar.gz -C /usr/share/webapps/redmine/ files
</pre>
<p>Backup the plugins installed in Redmine:
</p>
<pre># tar czvf ~/redmine_plugins.tar.gz -C /usr/share/webapps/redmine/ plugins
</pre>
<p>Backup the database:
</p>
<pre># mysqldump -u root -p &lt;redmine_database&gt; | gzip &gt; ~/redmine_db.sql.gz
</pre>
<p>Update the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=redmine">redmine</a></span> package as normal.
</p>
<p>Update the gems requirements:
</p>
<pre>#  bundle update
</pre>
<p>For a clean gems environment, you may want to remove all the gems and reinstall them. To go through this, do:
</p>
<pre># for x in `gem list --no-versions`; do gem uninstall $x -a -x -I; done
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> The command above will delete ALL the gems in your system or user, depending of what type of Ruby installation you did in the prerequisites step. You must take care or you can stop working another applications that rely on Ruby gems.</div>
<p>If you did the last step and removed all the gems, now you will need to reinstall them all:
</p>
<pre># gem install bundler
# bundle install --without development test
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you removed ALL the gems as above, and used a server that uses a gem, remember to reinstall the server gem: passenger (for Apache and Nginx), Mongrel or Unicorn. To do this, just follow the steps in the installation tutorial above.</div>
<p>Copy the saved files:
</p>
<pre># tar xzvf ~/redmine_files.tar.gz -C /usr/share/webapps/redmine/
</pre>
<p>Copy the installed plugins:
</p>
<pre># tar xzvf ~/redmine_plugins.tar.gz -C /usr/share/webapps/redmine/
</pre>
<p>Regenerate the secret token:
</p>
<pre># cd /usr/share/webapps/redmine
# bundle exec rake generate_secret_token
</pre>
<p>Check for any themes that you may have installed in the <code>public/themes</code> directory. You can copy them over but checking for updated version is ideal.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Do NOT overwrite config/settings.yml with the old one.</div>
<p>Update the database. This step is the one that could change the contents of your database. Go to your new redmine directory, then migrate your database:
</p>
<pre># RAILS_ENV=production REDMINE_LANG=pt-BR bundle exec rake db:migrate
</pre>
<p>If you have installed any plugins, you should also run their database migrations:
</p>
<pre># RAILS_ENV=production REDMINE_LANG=pt-BR bundle exec rake redmine:plugins:migrate
</pre>
<p>Now, it is time to clean the cache and the existing sessions:
</p>
<pre># RAILS_ENV=production bundle exec rake tmp:cache:clear tmp:sessions:clear
</pre>
<p>Restart the application server (e.g. puma, thin, passenger, etc). And finally go to "Admin -&gt; Roles &amp; permissions" to check/set permissions for the new features, if any.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Runtime_error_complaining_that_RMagick_was_configured_with_older_version">Runtime error complaining that RMagick was configured with older version</span></h3>
<p>If you get the following runtime error after upgrading ImageMagick <code>This installation of RMagick was configured with ImageMagick 6.8.7 but ImageMagick 6.8.8-1 is in use.</code> then you only need to reinstall (or rebuild as shown above if is the case).
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This is due to that when you install the RMagick gem it compiles some native extensions and they may need to be rebuilt after some ImageMagick upgrades.</div>
<h3>
<span id="Error_when_installing_gems:_Cannot_load_such_file_--_mysql2.2Fmysql2"></span><span class="mw-headline" id="Error_when_installing_gems:_Cannot_load_such_file_--_mysql2/mysql2">Error when installing gems: Cannot load such file -- mysql2/mysql2</span>
</h3>
<p>If you see an error like <code> cannot load such file -- mysql2/mysql2</code>, you are having a problem with the installation of the database gem. Probably a misconfiguration in the <a href="#Database_Access_Configuration">Database Access Configuration</a> step.
In this case you should verify the <code>database.yml</code> file.
</p>
<p>If no success, you can manually install the database gem by:
</p>
<pre># gem install mysql2
</pre>
<p>In last case, as suggested by <a href="/index.php?title=User:Bobdog&amp;action=edit&amp;redlink=1" class="new" title="User:Bobdog (page does not exist)">Bobdog</a>, you can try to comment the line of the database gem and add a new one as bellow:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">&lt;path-to-mysql2-gem-directory&gt;/lib/mysql2/mysql2.rb</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">

 # require 'mysql2/mysql2'
 require '&lt;path-to-mysql2-gem-directory&gt;/lib/mysql2/mysql2.so'</pre>
<h3><span class="mw-headline" id="Checkout_SVN_Source">Checkout SVN Source</span></h3>
<p>Get the Redmine source (<a rel="nofollow" class="external text" href="https://www.redmine.org/projects/redmine/wiki/Download">Download instructions</a>). Here is method of installing Redmine directly from subversion in /srv/http/redmine/
</p>
<pre># useradd -d /srv/http/redmine -s /bin/false redmine
# mkdir -p /srv/http/redmine
# svn checkout <a rel="nofollow" class="external free" href="https://svn.redmine.org/redmine/branches/2.1-stable">https://svn.redmine.org/redmine/branches/2.1-stable</a> /srv/http/redmine
# chown -R redmine: /srv/http/redmine
</pre>
<h3><span class="mw-headline" id="Automating_The_Update_Process">Automating The Update Process</span></h3>
<p>Example of an after-update script:
</p>
<pre>#!/usr/bin/bash
export RAILS_ENV=production
grep -E "^gem 'thin'" Gemfile || echo "gem 'thin'" &gt;&gt; Gemfile
bundle update &amp;&amp; bundle exec rake generate_secret_token db:migrate redmine:plugins:migrate tmp:cache:clear tmp:sessions:clear
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  Note that this script uses Thin as application server, so you must change it to your needs.</div>
<h3><span class="mw-headline" id="Creating_a_Systemd_Unit">Creating a Systemd Unit</span></h3>
<p>If you want to automatic run you application server when system starts, you need to create a systemd unit file.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  This is not needed if you use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=apache">apache</a></span> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nginx">nginx</a></span> with Passenger gem. Those servers already have their own unit file, so you have only to enable it.</div>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/redmine.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Redmine server
After=syslog.target
After=network.target

[Service]
Type=simple
User=redmine2
Group=redmine2
Environment=GEM_HOME=/home/redmine2/.gem/
ExecStart=/usr/bin/ruby /usr/share/webapps/redmine/bin/rails server webrick -e production

# Give a reasonable amount of time for the server to start up/shut down
TimeoutSec=300

[Install]
WantedBy=multi-user.target

</pre>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://www.redmine.org/">Redmine Official Site</a></li>
<li><a rel="nofollow" class="external text" href="https://www.redmine.org/projects/redmine/wiki/Features">Redmine Features</a></li>
<li><a rel="nofollow" class="external text" href="https://www.redmine.org/projects/redmine/wiki/RedmineInstall">Official install guide from Redmine Wiki</a></li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Issue_tracking_systems.html" title="Category:Issue tracking systems">Issue tracking systems</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Redmine&amp;oldid=662286">https://wiki.archlinux.org/index.php?title=Redmine&amp;oldid=662286</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 18 April 2021, at 20:44.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
