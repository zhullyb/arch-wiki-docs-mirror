<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Lenovo Yoga c940 - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Lenovo_Yoga_c940 rootpage-Lenovo_Yoga_c940 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Lenovo Yoga c940</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a><b>This article or section does not follow the <a href="../en/Help:Laptop_page_guidelines.html" title="Help:Laptop page guidelines">Laptop page guidelines</a>.</b><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Needs IDs in the hardware table and needs a function keys section (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Lenovo_Yoga_c940">Talk:Lenovo Yoga c940#</a>)</div>
</div>
<table class="wikitable" style="float: right;">

<tbody>
<tr>
<th>Hardware</th>
<th>PCI/USB ID</th>
<th>Working?
</th>
</tr>
<tr>
<td>Touchpad</td>
<td></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>Keyboard</td>
<td></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>Touchscreen</td>
<td></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>Stylus</td>
<td></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>Video</td>
<td></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>Webcam</td>
<td><code>13d3:56b2</code></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>Bluetooth</td>
<td></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>Audio</td>
<td></td>
<td data-sort-value="3" style="background: #ffa; color: inherit; vertical-align: middle; text-align: center;">Partial
</td>
</tr>
<tr>
<td>Wireless</td>
<td></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>Accelerometer</td>
<td></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>Fingerprint Reader</td>
<td></td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">No
</td>
</tr>
</tbody>
</table>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Installation"><span class="tocnumber">1</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Video"><span class="tocnumber">2</span> <span class="toctext">Video</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Audio"><span class="tocnumber">3</span> <span class="toctext">Audio</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Thermals"><span class="tocnumber">4</span> <span class="toctext">Thermals</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Power_management"><span class="tocnumber">5</span> <span class="toctext">Power management</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>To access the boot menu and BIOS, use <code>F1</code>. Disable secure boot from the BIOS.  UEFI boot mode works fine.
</p>
<h2><span class="mw-headline" id="Video">Video</span></h2>
<p>The kernel supports Iris Plus Gen11 from version 5.3. With default configuration, tearing is apparent when playing videos. To fix tearing, create the file <code>/etc/X11/xorg.conf.d/20-intel.conf</code> with the following content:
</p>
<pre>Section "Device"
   Identifier  "Intel Graphics"
   Driver      "intel"
   Option      "TearFree"    "true"
EndSection
</pre>
<p>That said there seems to be issues with Chromium based GPU acceleration, so either disabling that via Chromium flags, removing <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-video-intel">xf86-video-intel</a></span>, or adding the following options to <code>/etc/X11/xorg.conf.d/20-intel.conf</code>:
</p>
<pre>   Option      "NoAccel"     "true"
   Option      "DRI"         "false"
</pre>
<h2><span class="mw-headline" id="Audio">Audio</span></h2>
<p>Audio (not including bottom facing speakers) and microphone works with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=sof-firmware">sof-firmware</a></span>, just add the following to <code>/etc/modprobe.d/blacklist.conf</code>
</p>
<pre>blacklist snd_hda_intel
blacklist snd_soc_skl
</pre>
<p>Configure PulseAudio's to load Alsa modules with the correct <code>device</code> and <code>channnel</code> settings, by adding these two lines to <code>/etc/pulse/default.pa</code>:
</p>
<pre>load-module module-alsa-sink device=hw:0,0 channels=4
load-module module-alsa-source device=hw:0,6 channels=4
</pre>
<p>Unmute the Master channel:
</p>
<pre>$ alsamixer -c 0
</pre>
<p>Then press <code>m</code> on your keyboard.
</p>
<p>The amplifiers for the extra speakers are turned off by default and there is no available documentation on how to turn them on; more details on <a rel="nofollow" class="external text" href="https://bugzilla.kernel.org/show_bug.cgi?id=205755#c4">bugzilla.kernel.org#205755</a>.  There is a non-official (but from Lenovo) patched BIOS that turns the speakers on.   See <a rel="nofollow" class="external text" href="https://bugzilla.kernel.org/show_bug.cgi?id=205755#c59">comment 59</a> for instructions on how to flash this BIOS.  Use at your own risk!  You probably need a modern kernel (5.10 or later maybe) as there is also a kernel mod that may be involved.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you already have BIOS version AUCN57WW the update will fail, saying that it is the same version. To allow sidegrading the BIOS to the fixed version, enter your BIOS settings and enable downgrading to a previous BIOS version.</div>
<p>If the speakers are detected, unmuted, and the volume is turned up yet the audio does not seem to play through the speakers, try adding <code>options snd-hda-intel dmic_detect=0</code> to <code>/etc/modprobe.d/alsa-base.conf</code> . Then, reboot.
</p>
<h2><span class="mw-headline" id="Thermals">Thermals</span></h2>
<p>Thermal shutdowns are a problem unless you install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=thermald">thermald</a></span> and make a few changes:
</p>
<p>
1. Add the following thermald config </p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/thermald/thermal-conf.xml</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;?xml version="1.0"?&gt; 
 &lt;!-- BEGIN --&gt; 
 &lt;ThermalConfiguration&gt; 
 &lt;Platform&gt;
	&lt;Name&gt; Auto generated &lt;/Name&gt;
	&lt;ProductName&gt;81Q9&lt;/ProductName&gt;
	&lt;Preference&gt;QUIET&lt;/Preference&gt;
	&lt;ThermalZones&gt;
		&lt;ThermalZone&gt;
			&lt;Type&gt;auto_zone_0&lt;/Type&gt;
			&lt;TripPoints&gt;
				&lt;TripPoint&gt;
					&lt;SensorType&gt;SEN2&lt;/SensorType&gt;
					&lt;Temperature&gt;80000&lt;/Temperature&gt;
					&lt;Type&gt;Passive&lt;/Type&gt;
					&lt;CoolingDevice&gt;
						&lt;Type&gt;B0D4&lt;/Type&gt;
						&lt;SamplingPeriod&gt;8&lt;/SamplingPeriod&gt;
						&lt;TargetState&gt;2147483647&lt;/TargetState&gt;
					&lt;/CoolingDevice&gt;
				&lt;/TripPoint&gt;
				&lt;TripPoint&gt;
					&lt;SensorType&gt;x86_pkg_temp&lt;/SensorType&gt;
					&lt;Temperature&gt;80000&lt;/Temperature&gt;
					&lt;Type&gt;Passive&lt;/Type&gt;
					&lt;CoolingDevice&gt;
						&lt;Type&gt;Processor&lt;/Type&gt;
						&lt;SamplingPeriod&gt;1&lt;/SamplingPeriod&gt;
					&lt;/CoolingDevice&gt;
				&lt;/TripPoint&gt;
			&lt;/TripPoints&gt;
		&lt;/ThermalZone&gt;
	&lt;/ThermalZones&gt;
&lt;/Platform&gt;
&lt;/ThermalConfiguration&gt;
&lt;!-- END --&gt;
</pre>
<p>You might wish to tweak the target temperature (i.e. 64000) if you are OK with your machine running a bit hotter.
</p>
<p>2. Edit <code>/usr/lib/systemd/system/thermald.service</code> and remove <code>--adaptive</code> and add <code>--ignore-default-control</code> to the <code>ExecStart</code> line:
</p>
<pre>ExecStart=/usr/bin/thermald --systemd --dbus-enable --ignore-default-control
</pre>
<p>3. Ignore the thermald package in <code>/etc/pacman.conf</code> so that the config does not get overwritten:
</p>
<pre>[options]
IgnorePkg=thermald
</pre>
<p>Manual fan control does not work at all.
</p>
<h2><span class="mw-headline" id="Power_management">Power management</span></h2>
<p>Battery Conservation Mode (charge to max 50%) can be set with a 0/1 in "/sys/bus/platform/drivers/ideapad_acpi/VPC2004\:00/conservation_mode" where VPC2004\:00 could vary depending on the computer.
</p>
<p>If shutdown is not working and the system hangs on "reboot: Shutting down", try adding <code>intel_iommu=off</code> to your <a href="../en/Kernel_parameters.html" title="Kernel parameters">Kernel parameters</a>.
</p>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Lenovo.html" title="Category:Lenovo">Lenovo</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Laptop_style.html" title="Category:Pages or sections flagged with Template:Laptop style">Pages or sections flagged with Template:Laptop style</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Lenovo_Yoga_c940&amp;oldid=658562">https://wiki.archlinux.org/index.php?title=Lenovo_Yoga_c940&amp;oldid=658562</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 9 April 2021, at 12:35.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
