<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Dell XPS 15 9570 - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Dell_XPS_15_9570 rootpage-Dell_XPS_15_9570 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Dell XPS 15 9570</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a><b>This article or section needs expansion.</b><a href="../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> This page is far from completed. Some not mentioned items could be the same as <a href="../en/Dell_XPS_15_9560.html" class="mw-redirect" title="XPS 15 9560">XPS 15 9560</a>. Most of it also applies to the Precision 5530 (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Dell_XPS_15_9570">Talk:Dell XPS 15 9570#</a>)</div>
</div>
<table class="wikitable" style="float: right;">
<tbody>
<tr>
<td><b>Device/Functionality</b></td>
<td>
<b>Status</b>
</td>
</tr>
<tr>
<td><a href="#Suspend">Suspend</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td><a href="#Hibernate">Hibernate</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td><a href="#Graphics">Integrated Graphics</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td><a href="#Graphics">Discrete Nvidia Graphics</a></td>
<td data-sort-value="3" style="background: #ffa; color: inherit; vertical-align: middle; text-align: center;">Modify
</td>
</tr>
<tr>
<td><a href="#Wifi_and_Bluetooth">Wifi</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td><a href="#Wifi_and_Bluetooth">Bluetooth</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td><a href="#Wifi_and_Bluetooth">rfkill</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td>Audio</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td><a href="#Touchpad_and_Touchscreen">Touchpad</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td><a href="#Touchpad_and_Touchscreen">Touchscreen</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td>Webcam</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td>Card Reader</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td>Function/Multimedia Keys</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td><a href="#Power_Management">Power Management</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td><a href="#EFI_firmware_updates">EFI firmware updates</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td><a href="#Fingerprint_reader">Fingerprint reader</a></td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">Not working
</td>
</tr>
</tbody>
</table>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#UEFI"><span class="tocnumber">1</span> <span class="toctext">UEFI</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Power_Management"><span class="tocnumber">2</span> <span class="toctext">Power Management</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Suspend"><span class="tocnumber">2.1</span> <span class="toctext">Suspend</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Hibernate"><span class="tocnumber">2.2</span> <span class="toctext">Hibernate</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Powertop"><span class="tocnumber">2.3</span> <span class="toctext">Powertop</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6">
<a href="#Graphics"><span class="tocnumber">3</span> <span class="toctext">Graphics</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#kernel_modules"><span class="tocnumber">3.1</span> <span class="toctext">kernel modules</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#NVIDIA_Optimus"><span class="tocnumber">3.2</span> <span class="toctext">NVIDIA Optimus</span></a></li>
<li class="toclevel-2 tocsection-9">
<a href="#Troubleshooting"><span class="tocnumber">3.3</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-3 tocsection-10"><a href="#xbacklight"><span class="tocnumber">3.3.1</span> <span class="toctext">xbacklight</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#NVRM:_Failed_to_enable_MSI;_falling_back_to_PCIe_virtual-wire_interrupts"><span class="tocnumber">3.3.2</span> <span class="toctext">NVRM: Failed to enable MSI; falling back to PCIe virtual-wire interrupts</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="#Lock-ups_when_resuming_from_suspend_with_nvidia_module"><span class="tocnumber">3.3.3</span> <span class="toctext">Lock-ups when resuming from suspend with nvidia module</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-13">
<a href="#Wifi_and_Bluetooth"><span class="tocnumber">4</span> <span class="toctext">Wifi and Bluetooth</span></a>
<ul>
<li class="toclevel-2 tocsection-14">
<a href="#Troubleshooting_2"><span class="tocnumber">4.1</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-3 tocsection-15"><a href="#ath10k_module_crashes_after_suspend"><span class="tocnumber">4.1.1</span> <span class="toctext">ath10k module crashes after suspend</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="#WiFi_partially_looses_network_connectivity_every_1-2_hours"><span class="tocnumber">4.1.2</span> <span class="toctext">WiFi partially looses network connectivity every 1-2 hours</span></a></li>
<li class="toclevel-3 tocsection-17"><a href="#Bluetooth_disappears_(after_suspend?)"><span class="tocnumber">4.1.3</span> <span class="toctext">Bluetooth disappears (after suspend?)</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-18"><a href="#Touchpad_and_Touchscreen"><span class="tocnumber">5</span> <span class="toctext">Touchpad and Touchscreen</span></a></li>
<li class="toclevel-1 tocsection-19">
<a href="#Thunderbolt_docks"><span class="tocnumber">6</span> <span class="toctext">Thunderbolt docks</span></a>
<ul>
<li class="toclevel-2 tocsection-20"><a href="#TB16"><span class="tocnumber">6.1</span> <span class="toctext">TB16</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#Caldigit_TS3_Plus"><span class="tocnumber">6.2</span> <span class="toctext">Caldigit TS3 Plus</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-22">
<a href="#EFI_firmware_updates"><span class="tocnumber">7</span> <span class="toctext">EFI firmware updates</span></a>
<ul>
<li class="toclevel-2 tocsection-23"><a href="#UEFI_2"><span class="tocnumber">7.1</span> <span class="toctext">UEFI</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-24">
<a href="#Thermal_management"><span class="tocnumber">8</span> <span class="toctext">Thermal management</span></a>
<ul>
<li class="toclevel-2 tocsection-25"><a href="#Diagnosis"><span class="tocnumber">8.1</span> <span class="toctext">Diagnosis</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="#Undervolting"><span class="tocnumber">8.2</span> <span class="toctext">Undervolting</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#Repasting_&amp;_padding"><span class="tocnumber">8.3</span> <span class="toctext">Repasting &amp; padding</span></a></li>
<li class="toclevel-2 tocsection-28"><a href="#Results"><span class="tocnumber">8.4</span> <span class="toctext">Results</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-29"><a href="#Fingerprint_reader"><span class="tocnumber">9</span> <span class="toctext">Fingerprint reader</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="UEFI">UEFI</span></h2>
<p>Before installing it is necessary to modify some UEFI Settings. They can be accessed by pressing the F2 key repeatedly when booting.
</p>
<ul>
<li>Change the SATA Mode from the default "RAID" to "AHCI". This will allow Linux to detect the NVME SSD. If dual booting with an existing Windows installation, Windows will not boot after the change but <a rel="nofollow" class="external text" href="https://triplescomputers.com/blog/uncategorized/solution-switch-windows-10-from-raidide-to-ahci-operation/">this can be fixed without a reinstallation</a>.</li>
<li>Change Fastboot to "Thorough" in "POST Behaviour". This prevents intermittent boot failures.</li>
<li>Disable secure boot to allow Linux to boot. Alternatively, you can choose to <a href="../en/Unified_Extensible_Firmware_Interface/Secure_Boot.html" class="mw-redirect" title="Secure Boot">set up Secure Boot</a> so that it works with Linux and you can take advantage of its potential security benefits.</li>
</ul>
<p>Installation of Arch Linux can proceed normally. Refer to the <a href="../en/Installation_guide.html" title="Installation guide">Installation guide</a> for more information.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Many Dell XPS UEFI do not support passing kernel line options directly to the kernel and will result in a frozen boot. Use a bootloader or Arch-EFIBoot<a rel="nofollow" class="external autonumber" href="https://github.com/xdever/arch-efiboot">[1]</a> instead.</div>
<h2><span class="mw-headline" id="Power_Management">Power Management</span></h2>
<h3><span class="mw-headline" id="Suspend">Suspend</span></h3>
<p>By default, the very inefficient s2idle suspend variant is selected, which consumes a large amount of power. The much more efficient deep variant can be selected instead:
</p>
<pre> $ cat /sys/power/mem_sleep 
 [s2idle] deep
 # echo deep | tee /sys/power/mem_sleep
 $ cat /sys/power/mem_sleep 
 s2idle [deep]
</pre>
<p>To make the change permanent add <code>mem_sleep_default=deep</code> to your <a href="../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a>.
</p>
<p>An easy way would be to add <code>mem_sleep_default=deep</code> to the <code>GRUB_CMDLINE_LINUX_DEFAULT</code> entry in /etc/default/grub:
</p>
<pre> GRUB_CMDLINE_LINUX_DEFAULT="mem_sleep_default=deep"
</pre>
<p>Read more regarding the sleep variants on the kernel documentation <a rel="nofollow" class="external autonumber" href="https://www.kernel.org/doc/html/latest/admin-guide/pm/sleep-states.html">[2]</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Some users have reported a problem where the CPUs get stuck in a high power state after resuming from S3 (deep) suspension <a rel="nofollow" class="external autonumber" href="https://www.reddit.com/r/Dell/comments/91313h/xps_15_9570_c_state_bug_after_s3_sleep_and_modern/">[3]</a>. Workaround is to touch the touchpad <a rel="nofollow" class="external autonumber" href="https://www.dell.com/community/Precision-Mobile-Workstations/High-load-heating-up-fan-noise-after-S3-suspend-and-resume-on/td-p/7441933">[4]</a>. The underlying cause is spurious interrupts generated by the Synaptics SYNA2393 touchpad, and has been fixed as of Linux 5.7-rc5 <a rel="nofollow" class="external autonumber" href="https://lwn.net/Articles/820119/">[5]</a>
</div>
<h3><span class="mw-headline" id="Hibernate">Hibernate</span></h3>
<p>Works out of the Box see <a href="../en/Power_management/Suspend_and_hibernate.html" title="Power management/Suspend and hibernate">Power management/Suspend and hibernate</a>
</p>
<h3><span class="mw-headline" id="Powertop">Powertop</span></h3>
<p><code>powertop</code> is very efficient to manage power consumption.
Run <code>powertop --auto-tune</code>
and compare the Watt consumption variation (laptop must be unplugged and running on battery). <code>powertop --auto-tune</code> can be run at every boot.
</p>
<p>See <a href="../en/Powertop.html#Apply_settings" title="Powertop">Powertop#Apply_settings</a>.
</p>
<h2><span class="mw-headline" id="Graphics">Graphics</span></h2>
<h3><span class="mw-headline" id="kernel_modules">kernel modules</span></h3>
<p>The nouveau module is known to cause kernel panics and freezes on Dell XPS 15 9570.
</p>
<p>One way to mitigate this would be by adding <code>nomodeset</code> to the kernel options. However it's better to completely disable it with the blacklist method (recommended):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/blacklist.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">blacklist nouveau
blacklist rivafb
blacklist nvidiafb
blacklist rivatv
blacklist nv</pre>
<h3><span class="mw-headline" id="NVIDIA_Optimus">NVIDIA Optimus</span></h3>
<p>See <a href="../en/NVIDIA_Optimus.html#Available_methods" title="NVIDIA Optimus">NVIDIA Optimus#Available methods</a>.
</p>
<h3><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h3>
<h4><span class="mw-headline" id="xbacklight">xbacklight</span></h4>
<p>To get xbacklight working and not conflicting with NVIDIA optimus:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/20-intel.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "Device"
	Identifier  "Intel Graphics"
        Driver      "intel"
        Option      "Backlight"  "intel_backlight"
EndSection
</pre>
<h4>
<span id="NVRM:_Failed_to_enable_MSI.3B_falling_back_to_PCIe_virtual-wire_interrupts"></span><span class="mw-headline" id="NVRM:_Failed_to_enable_MSI;_falling_back_to_PCIe_virtual-wire_interrupts">NVRM: Failed to enable MSI; falling back to PCIe virtual-wire interrupts</span>
</h4>
<p>Sometimes it happens after suspend/resume. GPU could work fine without MSI. <a rel="nofollow" class="external autonumber" href="http://us.download.nvidia.com/XFree86/Linux-x86/325.15/README/knownissues.html#msi_interrupts">[6]</a>. You could disable MSI by adding the following in <b>/etc/modprobe.d/nvidia.conf</b>:
</p>
<pre> options nvidia NVreg_EnableMSI=0
</pre>
<h4><span class="mw-headline" id="Lock-ups_when_resuming_from_suspend_with_nvidia_module">Lock-ups when resuming from suspend with nvidia module</span></h4>
<p>If your system locks up every time you resume from suspend with the following two lines in dmesg:
</p>
<pre>   [   42.447364] pci 0000:01:00.0: Refused to change power state, currently in D3
   [   46.896493] pci 0000:01:00.0: Refused to change power state, currently in D3
</pre>
<p>you need to do the following:
</p>
<p>Into /etc/default/grub
</p>
<pre>   GRUB_CMDLINE_LINUX="nouveau.blacklist=0 acpi_osi=! acpi_osi=\"Windows 2015\" acpi_backlight=vendor mem_sleep_default=deep"
   
</pre>
<p>This solved the lock-ups for me. (internal nvidia bug number: 2589324, <a rel="nofollow" class="external text" href="https://www.dell.com/community/XPS/XPS-15-9570-with-Ubuntu-18-04-1-not-resuming-after-suspend/m-p/7305094#M28897">dell resolution</a>)
</p>
<h2><span class="mw-headline" id="Wifi_and_Bluetooth">Wifi and Bluetooth</span></h2>
<p>These work well out of the box but you might need to update the firmware for better stability.  For bluetooth, make sure you have everything installed as per the <a href="../en/Bluetooth.html" title="Bluetooth">Bluetooth</a> wiki page.
</p>
<pre> $ lspci | grep Network
 3b:00.0 Network controller: Qualcomm Atheros QCA6174 802.11ac Wireless Network Adapter (rev 32)
</pre>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a><b>This article or section needs expansion.</b><a href="../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Please add a line here if you detect something different. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Dell_XPS_15_9570">Talk:Dell XPS 15 9570#</a>)</div>
</div>
<h3><span class="mw-headline" id="Troubleshooting_2">Troubleshooting</span></h3>
<h4><span class="mw-headline" id="ath10k_module_crashes_after_suspend">ath10k module crashes after suspend</span></h4>
<p>You may notice driver crashes after suspend/resume, which for the most part does not seem to impact the running system, with coredumps similar to:
</p>
<pre>kernel: WARNING: CPU: 6 PID: 27936 at drivers/net/wireless/ath/ath10k/mac.c:5746 ath10k_bss_info_changed+0xf96/0x1120 [ath10k_core]
kernel: Modules linked in: uhid algif_hash cmac rfcomm fuse ccm ipt_MASQUERADE nf_conntrack_netlink nfnetlink xfrm_user xfrm_algo iptable_nat nf_nat_ipv4&gt;
kernel:  snd_hda_intel dcdbas x86_pkg_temp_thermal dell_smm_hwmon snd_hda_codec intel_powerclamp cfg80211 kvm_intel snd_hda_core input_leds snd_hwdep snd&gt;
kernel:  vfio_mdev mdev vfio_iommu_type1 vfio kvm irqbypass intel_gtt i2c_algo_bit drm_kms_helper syscopyarea sysfillrect sysimgblt fb_sys_fops drm agpga&gt;
kernel: CPU: 6 PID: 27936 Comm: kworker/u24:42 Tainted: G     U  W  OE     5.0.4-arch1-1-ARCH #1
kernel: Hardware name: Dell Inc. XPS 15 9570/0HWTMH, BIOS 1.8.1 02/01/2019
kernel: Workqueue: events_unbound async_run_entry_fn
kernel: RIP: 0010:ath10k_bss_info_changed+0xf96/0x1120 [ath10k_core]
kernel: Code: 24 8b 95 78 01 00 00 85 c0 0f 85 a7 00 00 00 89 d1 be 10 00 00 00 48 c7 c2 c0 b2 fa c0 4c 89 c7 e8 bf 68 00 00 e9 a5 f1 ff ff &lt;0f&gt; 0b 4c 89&gt;
kernel: RSP: 0000:ffffb7a45422fcd0 EFLAGS: 00010282
kernel: RAX: 00000000fffffffe RBX: ffff98f6d44815a0 RCX: 0000000000000000
kernel: RDX: ffff98f6d4481938 RSI: ffffb7a45422fcf0 RDI: ffff98f6d81df418
kernel: RBP: ffff98f6d81df418 R08: 0000000000000001 R09: 0000000000000000
kernel: R10: 000000000000001f R11: 0000000000000000 R12: 0000000000000020
kernel: R13: ffff98f6d81df420 R14: ffff98f6d4482598 R15: ffff98f6d44815a0
kernel: FS:  0000000000000000(0000) GS:ffff98f6dc380000(0000) knlGS:0000000000000000
179 94%
kernel:  process_one_work+0x1eb/0x410
kernel:  worker_thread+0x2d/0x3d0
kernel:  ? process_one_work+0x410/0x410
kernel:  kthread+0x112/0x130
kernel:  ? kthread_park+0x80/0x80
kernel:  ret_from_fork+0x35/0x40
kernel: ---[ end trace 09ae3e174c178f98 ]---
</pre>
<p>Patched in some kernels and not others (which?), relevant links:
</p>
<ul>
<li>
<a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1824143">BBS: Suspend issue with Dell XPS 9570</a> (related)</li>
<li><a rel="nofollow" class="external text" href="https://bugzilla.kernel.org/show_bug.cgi?id=201499">buzbilla#201499: ath10k BUG on resume</a></li>
<li class="mw-empty-elt">
</ul>
<h4><span class="mw-headline" id="WiFi_partially_looses_network_connectivity_every_1-2_hours">WiFi partially looses network connectivity every 1-2 hours</span></h4>
<p>With some WiFi routers, the network connection might get partially lost without any noticeable change in the network status. Existing connections (e.g. ssh sessions, Zoom videocalls) keep working, but loading new web pages or even pinging the gateway do not work anymore. Restarting the network fixes the problem, which however reappears after 1-2 ours.
</p>
<p>The issue can be fixed definitively by downgrading the WiFi card firmware as explained <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=254362">in post #17 of this forum thread</a>. The downgrade must be repeated every time the linux-firmware package is upgraded.
</p>
<h4>
<span id="Bluetooth_disappears_.28after_suspend.3F.29"></span><span class="mw-headline" id="Bluetooth_disappears_(after_suspend?)">Bluetooth disappears (after suspend?)</span>
</h4>
<p>Possibly related to the previous instability issue, sometimes the adapter seems to completely disappear.  As reported <a rel="nofollow" class="external text" href="https://www.dell.com/community/XPS/XPS-15-9570-Bluetooth-disappearing/td-p/6192457">here</a> (thanks <a rel="nofollow" class="external text" href="https://www.dell.com/community/user/viewprofilepage/user-id/3517956">w.v.w.</a>, you can likely fix this by manually upgrading the firmware (to something newer than what's in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-firmware">linux-firmware</a></span>:
</p>
<p>1. Double check adapter (e.g. QCA6174, below)
</p>
<pre> $ lspci | grep Network
 3b:00.0 Network controller: Qualcomm Atheros QCA6174 802.11ac Wireless Network Adapter (rev 32)
</pre>
<p>2. Confirm hardware and current firmware version (e.g. hw3.2, firmware RM.4.4.1.c3-00013-QCARMSWPZ-1, below)
</p>
<pre> $ journalctl -b | grep ath10k | egrep 'firmware|qca'
 kernel: ath10k_pci 0000:3b:00.0: qca6174 hw3.2 target 0x05030000 chip_id 0x00340aff sub 1a56:1535
 kernel: ath10k_pci 0000:3b:00.0: firmware ver RM.4.4.1.c3-00013-QCARMSWPZ-1 api 6 features wowlan,ignore-otp,no-4addr-pad,raw-mode,mfp crc32 fc0096a8
</pre>
<p>3. Follow the instructions at <a rel="nofollow" class="external free" href="https://wireless.wiki.kernel.org/en/users/Drivers/ath10k/firmware">https://wireless.wiki.kernel.org/en/users/Drivers/ath10k/firmware</a>
</p>
<p>e.g. for the above adapter, download the latest firmware from <a rel="nofollow" class="external free" href="https://github.com/kvalo/ath10k-firmware/tree/master/QCA6174/hw3.0">https://github.com/kvalo/ath10k-firmware/tree/master/QCA6174/hw3.0</a> and
</p>
<pre> $ cd /lib/firmware/ath10k/QCA6174/hw3.0
 # cp firmware-6.bin firmware-6.bin.bak
 # cp ~/Downloads/firmware-6.bin_RM.4.4.1.c3-00013-QCARMSWPZ-1 firmware-6.bin
</pre>
<p>Either <code>rmmod ath10k_core ath10k_pci &amp;&amp; modprobe ath10k_pci</code> (as the root user) (may not work, check dmesg) or reboot.
</p>
<h2><span class="mw-headline" id="Touchpad_and_Touchscreen">Touchpad and Touchscreen</span></h2>
<p>Wacom touchscreen and Synaptics touchpad:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ xinput</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">⎡ Virtual core pointer                          id=2    [master pointer  (3)]
⎜   ↳ Virtual core XTEST pointer                id=4    [slave  pointer  (2)]
⎜   ↳ SYNA2393:00 06CB:7A13 Touchpad            id=16   [slave  pointer  (2)]
⎜   ↳ Wacom HID 488F Finger                     id=15   [slave  pointer  (2)]
⎣ Virtual core keyboard                         id=3    [master keyboard (2)]
[truncated]</pre>
<p>Both are i2c devices:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ udevadm info /dev/input/mouse3 # touchscreen</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">P: /devices/pci0000:00/0000:00:15.0/i2c_designware.0/i2c-10/i2c-WCOM488F:00/0018:056A:488F.0006/input/input47/mouse3
N: input/mouse3
L: 0
E: DEVPATH=/devices/pci0000:00/0000:00:15.0/i2c_designware.0/i2c-10/i2c-WCOM488F:00/0018:056A:488F.0006/input/input47/mouse3
E: DEVNAME=/dev/input/mouse3
E: MAJOR=13
E: MINOR=35
E: SUBSYSTEM=input
E: USEC_INITIALIZED=5501073
E: ID_INPUT=1
E: ID_INPUT_TOUCHSCREEN=1
E: ID_PATH=pci-0000:00:15.0-platform-i2c_designware.0
E: ID_PATH_TAG=pci-0000_00_15_0-platform-i2c_designware_0</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ udevadm info /dev/input/mouse6 # touchpad</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">P: /devices/pci0000:00/0000:00:15.1/i2c_designware.1/i2c-11/i2c-SYNA2393:00/0018:06CB:7A13.0007/input/input38/mouse6
N: input/mouse6
L: 0
S: input/by-path/pci-0000:00:15.1-platform-i2c_designware.1-mouse
E: DEVPATH=/devices/pci0000:00/0000:00:15.1/i2c_designware.1/i2c-11/i2c-SYNA2393:00/0018:06CB:7A13.0007/input/input38/mouse6
E: DEVNAME=/dev/input/mouse6
E: MAJOR=13
E: MINOR=38
E: SUBSYSTEM=input
E: USEC_INITIALIZED=4683741
E: ID_INPUT=1
E: ID_INPUT_TOUCHPAD=1
E: ID_SERIAL=noserial
E: ID_PATH=pci-0000:00:15.1-platform-i2c_designware.1
E: ID_PATH_TAG=pci-0000_00_15_1-platform-i2c_designware_1
E: DEVLINKS=/dev/input/by-path/pci-0000:00:15.1-platform-i2c_designware.1-mouse</pre>
<p>If you experience problems with the touch pad it might be worth disabling psmouse
</p>
<h2><span class="mw-headline" id="Thunderbolt_docks">Thunderbolt docks</span></h2>
<h3><span class="mw-headline" id="TB16">TB16</span></h3>
<p>TB16 works fine if either Thunderbolt security is disabled in the BIOS or using <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bolt">bolt</a></span> to temporarily authorize or permanently enroll Thunderbolt devices with Thunderbolt security activated.  Various quirks are detailed on the <a href="../en/Dell_TB16.html" title="Dell TB16">Dell TB16</a> page.
</p>
<h3><span class="mw-headline" id="Caldigit_TS3_Plus">Caldigit TS3 Plus</span></h3>
<p>The TS3 Plus works fine if either Thunderbolt security is disabled in the BIOS or using <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bolt">bolt</a></span> to temporarily authorize or permanently enroll Thunderbolt devices with Thunderbolt security activated. There is an issue where the USB ports will not work if unplugged and then plugged in again. This can be fixed by rebooting into the UEFI and using BIOS assisted enumeration (NOT native nor auto-switch), you may need to disable auto-switch, apply, then choose BIOS assisted, then apply again.
</p>
<h2><span class="mw-headline" id="EFI_firmware_updates">EFI firmware updates</span></h2>
<p>They are 2 main ways to update efi firmware:
</p>
<ul>
<li>through running linux session with <a href="../en/Fwupd.html" title="Fwupd">Fwupd</a>
</li>
<li>through UEFI</li>
</ul>
<h3><span class="mw-headline" id="UEFI_2">UEFI</span></h3>
<p>Firmware images can be found at <a rel="nofollow" class="external text" href="https://www.dell.com/support/home/us/en/04/product-support/product/xps-15-9570-laptop/drivers">Dell support page</a> as <code>XPS_15_9570_X.Y.Z.exe</code> files.
In order to install:
</p>
<ul>
<li>Download the desired firmware from section "Dell XPS 15 9570 System BIOS"</li>
<li>Save it in <code>/boot/EFI/Dell/Bios/</code> (this path may vary, depending on your installation)</li>
<li>Reboot the system, and enter the boot menu by pressing repeatedly <code>F12</code> on Dell logo</li>
<li>Choose "Bios Flash Update"</li>
<li>Select the file previously saved, and start the process</li>
</ul>
<p>The process will take about five minutes, during which the system will have some reboots and push fans at maximum speed. Finally the system will reboot normally.
</p>
<h2><span class="mw-headline" id="Thermal_management">Thermal management</span></h2>
<p>Thermal design is poor in the 9570, primarily due to higher-end chips being used inside the original system design without compensating for extra heat.  This impacts numerous areas:
</p>
<ol>
<li>
<b>Performance</b>: at higher temperatures, CPU cores are throttled down to avoid damage.  At best your system will not run as fast as it can, and at worst (and quite commonly), slower than cheaper chips and with sluggish performance.</li>
<li>
<b>Battery life</b> is unnecessarily decreased.</li>
<li>
<b>System longevity</b>: running at constantly high temperatures will negatively impact equipment lifetime.</li>
<li>
<b>User discomfort</b>: uncomfortable heat and uncomfortable fan noise.</li>
</ol>
<p>Fortunately these can all be improved significantly to get your system running powerfully and quietly.
</p>
<h3><span class="mw-headline" id="Diagnosis">Diagnosis</span></h3>
<p>You probably have a lot of dmesg output like this (for all CPUs), even with fairly light usage:
</p>
<pre> kernel: CPU8: Package temperature above threshold, cpu clock throttled (total events = 8451)
 kernel: CPU8: Package temperature/speed normal
</pre>
<p>Use <a href="../en/Lm_sensors.html" title="Lm sensors">lm_sensors</a> and do some <a href="../en/Stress_testing.html" title="Stress testing">stress testing</a> (with <code>stress</code> and <code>mprime</code>) to see what's happening with CPU core temperatures and fanspeed under different loads.
</p>
<h3><span class="mw-headline" id="Undervolting">Undervolting</span></h3>
<p>See <a href="../en/Undervolting_CPU.html" title="Undervolting CPU">Undervolting CPU</a> on the wiki.  Reduces heat and extends battery life.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Versions 1.16.0 and newer of the BIOS interfere with undervolting. See <a rel="nofollow" class="external text" href="https://github.com/kitsunyan/intel-undervolt/issues/43">this issue</a> for more information and potential workarounds.</div>
<p>Possible configurations for <code>/etc/intel-undervolt.conf</code>:
</p>
<ol><li>i9-8950HK* (last updated 2019-03-30)</li></ol>
<pre> undervolt 0 'CPU' -140
 undervolt 1 'GPU' -75
</pre>
<pre> * Tested extensively for moderate use.  Was not stress tested for &gt; 24 hours.  Anecdotal reports of up to -200.
</pre>
<p>This has a more minor impact than repasting but is significantly easier to do.
</p>
<h3>
<span id="Repasting_.26_padding"></span><span class="mw-headline" id="Repasting_&amp;_padding">Repasting &amp; padding</span>
</h3>
<p>Significant improvements are possible by replacing the thermal grease used by Dell with better options available from Amazon, and adding some extra thermal padding.  This might sound overwhelming but is well worth the effort, especially for newer CPUs. If you cannot do this yourself consider finding a shop / technician who can do this for you.  See the following article as the user comments below it for more info:
</p>
<ul>
<li><a rel="nofollow" class="external text" href="https://www.ultrabookreview.com/14875-fix-throttling-xps-15/">UltraBookReview: How to Fix Throttling on the Dell XPS 15 9570 / 9560</a></li>
<li>
<a rel="nofollow" class="external text" href="https://photos.google.com/share/AF1QipMv5n4GppVgSUNEuU-Ie9VOHd0sAFAe5U57l7vsOKuAiPZpLeZn1tSBYpmrNzpFpw/photo/AF1QipPi-eGtEStq0uF4Shle0FE_OgbEDeeNtuF0KqLR?key=Y0pJUEtYTmp5SUhteGEtTGlZa0p3cVFVT2dyNmtB">Picture of 9570 VRMs</a> - from comments of the above article</li>
</ul>
<h3><span class="mw-headline" id="Results">Results</span></h3>
<p>According to the author of the UltraBookReview article above:
</p>
<p><q>Undervolting seems to reduce temps at max load by 7-10C, while repasting seems to reduce temps by between 4-10C depending on your original paste job and paste used.</q>
</p>
<p>From <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1839474#p1839474">this forum post</a>, much lower/softer fan speeds were needed to maintain the same temperatures, and temperature was a few degrees lower under similar loads.  Fans were on less often and for less time when they were.  Throttling was less prevalent and less severe.
</p>
<h2><span class="mw-headline" id="Fingerprint_reader">Fingerprint reader</span></h2>
<p>The fingerprint reader lacks Linux drivers.  
</p>
<p>Goodix will not provide them directly as stated on their forum and frequently blames the responsibility on <a rel="nofollow" class="external text" href="https://developers.goodix.com/en/bbs/detail/1d331d41697e4fc6bd5beba55ecd24a6">device manufacturers</a>. 
</p>
<p>Nonetheless Goodix stated (2020-04-30) that they are collaborating with Dell to <a rel="nofollow" class="external text" href="https://developers.goodix.com/en/bbs/detail/2cc68cdf9f824e28b247f626c4a9374b">provide the support for Linux in the second half of 2020</a> for the XPS 9570.
</p>
<p>There are also some people working on <a rel="nofollow" class="external text" href="https://github.com/IDerr/Goodix92">reverse engineering the driver</a>.
</p>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Dell.html" title="Category:Dell">Dell</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Dell_XPS_15_9570&amp;oldid=645505">https://wiki.archlinux.org/index.php?title=Dell_XPS_15_9570&amp;oldid=645505</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 14 December 2020, at 00:25.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
