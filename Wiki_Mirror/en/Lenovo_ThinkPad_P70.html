<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Lenovo ThinkPad P70 - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Lenovo_ThinkPad_P70 rootpage-Lenovo_ThinkPad_P70 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Lenovo ThinkPad P70</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<p>This is a guide of steps aggregated from other sources to installation of Arch on the Lenovo ThinkPad P70. This guide was written for ARCH_201604 ISO. The laptop features a 17.3" IPS display and has connectors for up to four SSDs (two M.2 <a href="../en/Solid_state_drive/NVMe.html" class="mw-redirect" title="NVMe">NVMe</a>, two SATA).
</p>
<table class="wikitable" style="float: right;">
<tbody>
<tr>
<td><b>Device</b></td>
<td><b>Status</b></td>
<td>
<b>Modules</b>
</td>
</tr>
<tr>
<td>Intel</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>xf86-video-intel
</td>
</tr>
<tr>
<td>NVIDIA (Quadro M3000M, M4000M)</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working*</td>
<td>nvidia
</td>
</tr>
<tr>
<td>HDMI</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>
</td>
</tr>
<tr>
<td>Ethernet</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>
</td>
</tr>
<tr>
<td>Wireless</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>iwlwifi
</td>
</tr>
<tr>
<td>Audio</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>
</td>
</tr>
<tr>
<td>Trackpad</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>xf86-input-libinput
</td>
</tr>
<tr>
<td>Trackpoint</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>xf86-input-libinput
</td>
</tr>
<tr>
<td>Camera</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>
</td>
</tr>
<tr>
<td>Card Reader</td>
<td data-sort-value="3" style="background: #ffa; color: inherit; vertical-align: middle; text-align: center;">untested</td>
<td>
</td>
</tr>
<tr>
<td>Bluetooth</td>
<td data-sort-value="3" style="background: #ffa; color: inherit; vertical-align: middle; text-align: center;">untested</td>
<td>
</td>
</tr>
</tbody>
</table>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Hardware"><span class="tocnumber">1</span> <span class="toctext">Hardware</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Preliminaries"><span class="tocnumber">2</span> <span class="toctext">Preliminaries</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Installation"><span class="tocnumber">3</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-4">
<a href="#Configuration"><span class="tocnumber">4</span> <span class="toctext">Configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#Keyboard"><span class="tocnumber">4.1</span> <span class="toctext">Keyboard</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Sound"><span class="tocnumber">4.2</span> <span class="toctext">Sound</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Integrated_Graphics"><span class="tocnumber">4.3</span> <span class="toctext">Integrated Graphics</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Dedicated_Graphics"><span class="tocnumber">4.4</span> <span class="toctext">Dedicated Graphics</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#External_Displays"><span class="tocnumber">4.5</span> <span class="toctext">External Displays</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#HiDPI"><span class="tocnumber">4.6</span> <span class="toctext">HiDPI</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Hardware">Hardware</span></h2>
<p><code>lspci</code> returns something like:
</p>
<pre>00:00.0 Host bridge: Intel Corporation Skylake Host Bridge/DRAM Registers (rev 07)
00:01.0 PCI bridge: Intel Corporation Skylake PCIe Controller (x16) (rev 07)
00:02.0 VGA compatible controller: Intel Corporation Device 191d (rev 06)
00:14.0 USB controller: Intel Corporation Sunrise Point-H USB 3.0 xHCI Controller (rev 31)
00:14.2 Signal processing controller: Intel Corporation Sunrise Point-H Thermal subsystem (rev 31)
00:16.0 Communication controller: Intel Corporation Sunrise Point-H CSME HECI #1 (rev 31)
00:16.3 Serial controller: Intel Corporation Sunrise Point-H KT Redirection (rev 31)
00:17.0 SATA controller: Intel Corporation Sunrise Point-H SATA controller [AHCI mode] (rev 31)
00:1c.0 PCI bridge: Intel Corporation Sunrise Point-H PCI Express Root Port #1 (rev f1)
00:1c.2 PCI bridge: Intel Corporation Sunrise Point-H PCI Express Root Port #3 (rev f1)
00:1c.4 PCI bridge: Intel Corporation Sunrise Point-H PCI Express Root Port #5 (rev f1)
00:1d.0 PCI bridge: Intel Corporation Sunrise Point-H PCI Express Root Port #9 (rev f1)
00:1d.4 PCI bridge: Intel Corporation Sunrise Point-H PCI Express Root Port #13 (rev f1)
00:1f.0 ISA bridge: Intel Corporation Sunrise Point-H LPC Controller (rev 31)
00:1f.2 Memory controller: Intel Corporation Sunrise Point-H PMC (rev 31)
00:1f.3 Audio device: Intel Corporation Sunrise Point-H HD Audio (rev 31)
00:1f.4 SMBus: Intel Corporation Sunrise Point-H SMBus (rev 31)
00:1f.6 Ethernet controller: Intel Corporation Ethernet Connection (2) I219-LM (rev 31)
01:00.0 VGA compatible controller: NVIDIA Corporation GM204GLM [Quadro M3000M] (rev a1)
04:00.0 Network controller: Intel Corporation Wireless 8260 (rev 3a)
70:00.0 Non-Volatile memory controller: Samsung Electronics Co Ltd NVMe SSD Controller (rev 01)
71:00.0 Unassigned class [ff00]: Realtek Semiconductor Co., Ltd. RTS525A PCI Express Card Reader (rev 01)
</pre>
<p><code>lsusb</code> returns something like:
</p>
<pre>Bus 002 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub
Bus 001 Device 003: ID 138a:0090 Validity Sensors, Inc. 
Bus 001 Device 002: ID 04f2:b52c Chicony Electronics Co., Ltd 
Bus 001 Device 005: ID 0765:5010 X-Rite, Inc. 
Bus 001 Device 004: ID 058f:9540 Alcor Micro Corp. AU9540 Smartcard Reader
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
</pre>
<h2><span class="mw-headline" id="Preliminaries">Preliminaries</span></h2>
<ol>
<li>Create a recovery device in Windows 10. It required a USB-only (no SD card, no optical media?) flash drive greater than 8 GB. Formatting FAT32 works.</li>
<li>
<a rel="nofollow" class="external text" href="https://support.lenovo.com/us/en/documents/yast-3jwkjx">Update the BIOS.</a> At this time of writing, the latest BIOS is 2.15 (2017-05-30). Lenovo provides a bootable, standalone <a rel="nofollow" class="external text" href="http://support.lenovo.com/us/en/downloads/ds106086">"BIOS Update CD"</a> to perform this update outside of Windows.</li>
<li>Getting <b>into</b> the BIOS is difficult, so <a rel="nofollow" class="external text" href="https://support.lenovo.com/us/en/documents/sf13-t0025">here are some instructions</a> that seemed to work. The easiest way was through Windows 10.</li>
<li>In the BIOS, you will want to disable UEFI Secure Boot, change the boot order to look at USB devices first, allow <code>F12</code> to bypass the BIOS, and possibly enable the verbose mode because it is easier to press the appropriate buttons on time.</li>
</ol>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>This machine can boot either via EFI or grub.
</p>
<p>This section assumes that you've successfully created bootable Arch install media to a USB drive. The label of the USB installer must be correct (ARCH_201604 in this case). Restart the computer boot from the USB drive. You may need to press <code>F12</code> at some point to trigger a boot order override.
</p>
<p>You need an internet connection; this guide got both ethernet and wifi to work. Find the interfaces with <code>ip link</code>.
</p>
<p>Ethernet: turn on DHCP with
</p>
<pre># dhcpcd <i>&lt;interface&gt;</i> 
</pre>
<p>Wifi: wifi-menu worked here, the appropriate SSID was selected with the right password.
</p>
<p>The font sizes will make you feel very far away. To deal with this, fonts are in <code>/usr/share/kbd/consolefonts</code>.
</p>
<p>You can see the currently selected font with showconsolefont. The font was changed here to <code>sun12x22</code> with: <code>setfont sun12x22</code>. It is a little better.
</p>
<p>Following the <a href="../en/Installation_guide.html" class="mw-redirect" title="Beginner's guide">Beginner's guide</a> to install Arch.
</p>
<p>Shutdown, remove the USB drive, and then boot the computer, and make sure the installed drive is first in the BIOS.
</p>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<h3><span class="mw-headline" id="Keyboard">Keyboard</span></h3>
<p>To control the keyboard backlight, you change the value using:
</p>
<pre>echo 1 | sudo dd of=/sys/class/leds/tpacpi\:\:kbd_backlight/brightness
</pre>
<p>for values 0–2.
</p>
<h3><span class="mw-headline" id="Sound">Sound</span></h3>
<p>The status of audio output over HDMI, Thunderbolt, and/or Mini Displayport is unknown.
</p>
<h3><span class="mw-headline" id="Integrated_Graphics">Integrated Graphics</span></h3>
<p>The integrated Intel GPU should work (mostly) without configuration using the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-video-intel">xf86-video-intel</a></span> package. If you experience crashes or hangs, please see <a href="../en/Intel_graphics.html#Skylake_support" title="Intel graphics">Intel graphics#Skylake support</a><sup>[<a href="../en/Help:Procedures.html#Fix_broken_section_links" title="Help:Procedures">broken link</a>: invalid section]</sup> for additional configuration.
</p>
<h3><span class="mw-headline" id="Dedicated_Graphics">Dedicated Graphics</span></h3>
<p>There is a BIOS option for turning off the Intel Integrated Graphics and only running the NVIDIA discrete card. While it is possible to get the console working with this configuration, there are no confirmed reports of X.org working in this setup.
</p>
<p><a href="../en/NVIDIA_Optimus.html#Use_NVIDIA_graphics_only" title="NVIDIA Optimus">NVIDIA Optimus#Use NVIDIA graphics only</a> contains instructions on configuring Xorg to use your Nvidia Quadro GPU. Be sure to select the "Hybrid Graphics" in your BIOS. The official <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nvidia">nvidia</a></span> driver package supports hybrid GPU configuration without requiring the use of Noveau/PRIME or Bumblebee. The following example configuration enables the GPU using the proprietary driver.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xinit/xinitrc.d/99-optimus.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

xrandr --setprovideroutputsource modesetting NVIDIA-0
xrandr --auto</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/10-nvidia-drm-outputclass.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "OutputClass"
    Identifier "intel"
    MatchDriver "i915"
    Driver "modesetting"
EndSection

Section "OutputClass"
    Identifier "nvidia"
    MatchDriver "nvidia-drm"
    Driver "nvidia"
    Option "AllowEmptyInitialConfiguration"
    Option "PrimaryGPU" "yes"
    ModulePath "/usr/lib/nvidia/xorg"
    ModulePath "/usr/lib/xorg/modules"
EndSection</pre>
<h3><span class="mw-headline" id="External_Displays">External Displays</span></h3>
<p>DisplayPort over USB-C, HDMI, and Mini DisplayPort outputs all work using the above configuration with the proprietary Nvidia driver. HDMI has also been confirmed to work using Bumblebee and <code>intel-virtual-output</code>.
</p>
<p>Limited testing suggests that a maximum of 3 total displays from 2 output types may be used at one time. For example, two external DP/USB-C displays and the one internal display will achieve the maximum of three.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Hot-swapping between different external display types has been known to hardlock the Nvidia driver. Change outputs at your own risk!</div>
<h3><span class="mw-headline" id="HiDPI">HiDPI</span></h3>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Lenovo.html" title="Category:Lenovo">Lenovo</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Lenovo_ThinkPad_P70&amp;oldid=624622">https://wiki.archlinux.org/index.php?title=Lenovo_ThinkPad_P70&amp;oldid=624622</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 10 July 2020, at 16:12.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
