<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Zsh - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Zsh rootpage-Zsh skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Zsh</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<p><a rel="nofollow" class="external text" href="https://www.zsh.org/">Zsh</a> is a powerful <a href="../en/Command-line_shell.html" class="mw-redirect" title="Shell">shell</a> that operates as both an interactive shell and as a scripting language interpreter. While being compatible with the POSIX sh (not by default, only if issuing <code>emulate sh</code>), it offers advantages such as improved <a rel="nofollow" class="external text" href="http://zsh.sourceforge.net/Guide/zshguide06.html">tab completion</a> and <a rel="nofollow" class="external text" href="http://zsh.sourceforge.net/Doc/Release/Expansion.html">globbing</a>.
</p>
<p>The <a rel="nofollow" class="external text" href="http://zsh.sourceforge.net/FAQ/zshfaq01.html#l4">Zsh FAQ</a> offers more reasons to use Zsh.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Installation"><span class="tocnumber">1</span> <span class="toctext">Installation</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Initial_configuration"><span class="tocnumber">1.1</span> <span class="toctext">Initial configuration</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Making_Zsh_your_default_shell"><span class="tocnumber">1.2</span> <span class="toctext">Making Zsh your default shell</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="#Startup/Shutdown_files"><span class="tocnumber">2</span> <span class="toctext">Startup/Shutdown files</span></a></li>
<li class="toclevel-1 tocsection-5">
<a href="#Configure_Zsh"><span class="tocnumber">3</span> <span class="toctext">Configure Zsh</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Simple_.zshrc"><span class="tocnumber">3.1</span> <span class="toctext">Simple .zshrc</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Configuring_%24PATH"><span class="tocnumber">3.2</span> <span class="toctext">Configuring $PATH</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Command_completion"><span class="tocnumber">3.3</span> <span class="toctext">Command completion</span></a></li>
<li class="toclevel-2 tocsection-9">
<a href="#Key_bindings"><span class="tocnumber">3.4</span> <span class="toctext">Key bindings</span></a>
<ul>
<li class="toclevel-3 tocsection-10"><a href="#History_search"><span class="tocnumber">3.4.1</span> <span class="toctext">History search</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#Shift,_Alt,_Ctrl_and_Meta_modifiers"><span class="tocnumber">3.4.2</span> <span class="toctext">Shift, Alt, Ctrl and Meta modifiers</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-12">
<a href="#Prompts"><span class="tocnumber">3.5</span> <span class="toctext">Prompts</span></a>
<ul>
<li class="toclevel-3 tocsection-13">
<a href="#Prompt_themes"><span class="tocnumber">3.5.1</span> <span class="toctext">Prompt themes</span></a>
<ul>
<li class="toclevel-4 tocsection-14"><a href="#Manually_installing_prompt_themes"><span class="tocnumber">3.5.1.1</span> <span class="toctext">Manually installing prompt themes</span></a></li>
<li class="toclevel-4 tocsection-15"><a href="#Adding_prompt_themes_without_a_separate_file_for_each_one"><span class="tocnumber">3.5.1.2</span> <span class="toctext">Adding prompt themes without a separate file for each one</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-16">
<a href="#Customized_prompt"><span class="tocnumber">3.5.2</span> <span class="toctext">Customized prompt</span></a>
<ul>
<li class="toclevel-4 tocsection-17"><a href="#Colors"><span class="tocnumber">3.5.2.1</span> <span class="toctext">Colors</span></a></li>
<li class="toclevel-4 tocsection-18"><a href="#Example"><span class="tocnumber">3.5.2.2</span> <span class="toctext">Example</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2 tocsection-19"><a href="#Sample_.zshrc_files"><span class="tocnumber">3.6</span> <span class="toctext">Sample .zshrc files</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-20">
<a href="#Tips_and_tricks"><span class="tocnumber">4</span> <span class="toctext">Tips and tricks</span></a>
<ul>
<li class="toclevel-2 tocsection-21"><a href="#Autostart_X_at_login"><span class="tocnumber">4.1</span> <span class="toctext">Autostart X at login</span></a></li>
<li class="toclevel-2 tocsection-22">
<a href="#Restore_terminal_settings_after_a_program_exits_abnormally"><span class="tocnumber">4.2</span> <span class="toctext">Restore terminal settings after a program exits abnormally</span></a>
<ul>
<li class="toclevel-3 tocsection-23"><a href="#The_ttyctl_command"><span class="tocnumber">4.2.1</span> <span class="toctext">The ttyctl command</span></a></li>
<li class="toclevel-3 tocsection-24"><a href="#Resetting_the_terminal_with_escape_sequences"><span class="tocnumber">4.2.2</span> <span class="toctext">Resetting the terminal with escape sequences</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-25">
<a href="#Remembering_recent_directories"><span class="tocnumber">4.3</span> <span class="toctext">Remembering recent directories</span></a>
<ul>
<li class="toclevel-3 tocsection-26"><a href="#Dirstack"><span class="tocnumber">4.3.1</span> <span class="toctext">Dirstack</span></a></li>
<li class="toclevel-3 tocsection-27"><a href="#cdr"><span class="tocnumber">4.3.2</span> <span class="toctext">cdr</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-28"><a href="#Help_command"><span class="tocnumber">4.4</span> <span class="toctext">Help command</span></a></li>
<li class="toclevel-2 tocsection-29">
<a href="#Persistent_rehash"><span class="tocnumber">4.5</span> <span class="toctext">Persistent rehash</span></a>
<ul>
<li class="toclevel-3 tocsection-30"><a href="#On-demand_rehash"><span class="tocnumber">4.5.1</span> <span class="toctext">On-demand rehash</span></a></li>
<li class="toclevel-3 tocsection-31"><a href="#Alternative_on-demand_rehash_using_SIGUSR1"><span class="tocnumber">4.5.2</span> <span class="toctext">Alternative on-demand rehash using SIGUSR1</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-32"><a href="#Bind_key_to_ncurses_application"><span class="tocnumber">4.6</span> <span class="toctext">Bind key to ncurses application</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#File_manager_key_binds"><span class="tocnumber">4.7</span> <span class="toctext">File manager key binds</span></a></li>
<li class="toclevel-2 tocsection-34">
<a href="#xterm_title"><span class="tocnumber">4.8</span> <span class="toctext">xterm title</span></a>
<ul>
<li class="toclevel-3 tocsection-35"><a href="#Terminal_emulator_tab_title"><span class="tocnumber">4.8.1</span> <span class="toctext">Terminal emulator tab title</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-36"><a href="#Shell_environment_detection"><span class="tocnumber">4.9</span> <span class="toctext">Shell environment detection</span></a></li>
<li class="toclevel-2 tocsection-37"><a href="#/dev/tcp_equivalent:_ztcp"><span class="tocnumber">4.10</span> <span class="toctext">/dev/tcp equivalent: ztcp</span></a></li>
<li class="toclevel-2 tocsection-38"><a href="#Shortcut_to_exit_shell_on_partial_command_line"><span class="tocnumber">4.11</span> <span class="toctext">Shortcut to exit shell on partial command line</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-39">
<a href="#Third-party_extensions"><span class="tocnumber">5</span> <span class="toctext">Third-party extensions</span></a>
<ul>
<li class="toclevel-2 tocsection-40"><a href="#Configuration_frameworks"><span class="tocnumber">5.1</span> <span class="toctext">Configuration frameworks</span></a></li>
<li class="toclevel-2 tocsection-41"><a href="#Plugin_managers"><span class="tocnumber">5.2</span> <span class="toctext">Plugin managers</span></a></li>
<li class="toclevel-2 tocsection-42"><a href="#Fish-like_syntax_highlighting_and_autosuggestions"><span class="tocnumber">5.3</span> <span class="toctext">Fish-like syntax highlighting and autosuggestions</span></a></li>
<li class="toclevel-2 tocsection-43"><a href="#The_%22command_not_found%22_handler"><span class="tocnumber">5.4</span> <span class="toctext">The "command not found" handler</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-44"><a href="#Uninstallation"><span class="tocnumber">6</span> <span class="toctext">Uninstallation</span></a></li>
<li class="toclevel-1 tocsection-45"><a href="#See_also"><span class="tocnumber">7</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>Before starting, users may want to see what shell is currently being used:
</p>
<pre>$ echo $SHELL
</pre>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=zsh">zsh</a></span> package. For additional completion definitions, install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=zsh-completions">zsh-completions</a></span> package as well.
</p>
<h3><span class="mw-headline" id="Initial_configuration">Initial configuration</span></h3>
<p>Make sure that Zsh has been installed correctly by running the following in a terminal:
</p>
<pre>$ zsh
</pre>
<p>You should now see <i>zsh-newuser-install</i>, which will walk you through some basic configuration. If you want to skip this, press <code>q</code>. If you did not see it, you can invoke it manually with:
</p>
<pre>$ autoload -Uz zsh-newuser-install
$ zsh-newuser-install -f
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Make sure your terminal's size is at least 72×15 otherwise <i>zsh-newuser-install</i> will not run.</div>
<h3><span class="mw-headline" id="Making_Zsh_your_default_shell">Making Zsh your default shell</span></h3>
<p>Change your shell to <code>/usr/bin/zsh</code>. See <a href="../en/Command-line_shell.html#Changing_your_default_shell" title="Command-line shell">Command-line shell#Changing your default shell</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> If replacing <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bash">bash</a></span>, users may want to move some code from <code>~/.bashrc</code> to <code>~/.zshrc</code> (e.g. the prompt and the <a href="../en/Bash.html#Aliases" title="Bash">aliases</a>) and from <code>~/.bash_profile</code> to <code>~/.zprofile</code> (e.g. <a href="../en/Xinit.html#Autostart_X_at_login" title="Xinit">the code that starts the X Window System</a>).</div>
<h2>
<span id="Startup.2FShutdown_files"></span><span class="mw-headline" id="Startup/Shutdown_files">Startup/Shutdown files</span>
</h2>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> 
<ul>
<li>See <a rel="nofollow" class="external text" href="http://zsh.sourceforge.net/Guide/zshguide02.html">A User's Guide to the Z-Shell</a> for explanation on interactive and login shells, and what to put in your startup files.</li>
<li>You could consider <a href="../en/Command-line_shell.html#Standardisation" title="Command-line shell">implementing a standard path</a> for your Zsh configuration files.</li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>If <code>$ZDOTDIR</code> is not set, <code>$HOME</code> is used instead.</li>
<li>If option <code>RCS</code> is unset in any of the files, no configuration files will be read after that file.</li>
<li>If option <code>GLOBAL_RCS</code> is unset in any of the files, no global configuration files (<code>/etc/zsh/*</code>) will be read after that file.</li>
</ul>
</div>
<p>When starting, Zsh will read commands from the following files in this order by default, provided they exist. 
</p>
<ul>
<li>
<code>/etc/zsh/zshenv</code> Used for setting <a href="../en/Environment_variables.html" title="Environment variables">environment variables</a> for all users; it should not contain commands that produce output or assume the shell is attached to a TTY. When this file exists it will <i><b>always</b></i> be read, this cannot be overridden.</li>
<li>
<code>$ZDOTDIR/.zshenv</code> Used for setting user's environment variables; it should not contain commands that produce output or assume the shell is attached to a TTY. When this file exists it will <i><b>always</b></i> be read.</li>
<li>
<code>/etc/zsh/zprofile</code> Used for executing commands at start for all users, will be read when starting as a <i><b>login shell</b></i>. Please note that on Arch Linux, by default it contains <a rel="nofollow" class="external text" href="https://github.com/archlinux/svntogit-packages/blob/packages/zsh/trunk/zprofile">one line</a> which sources <code>/etc/profile</code>. See warning below before wanting to remove that!
<ul><li>
<code>/etc/profile</code> This file should be sourced by all POSIX sh-compatible shells upon login: it sets up <code>$PATH</code> and other environment variables and application-specific (<code>/etc/profile.d/*.sh</code>) settings upon login.</li></ul>
</li>
<li>
<code>$ZDOTDIR/.zprofile</code> Used for executing user's commands at start, will be read when starting as a <i><b>login shell</b></i>. Typically used to autostart graphical sessions and to set session-wide environment variables.</li>
<li>
<code>/etc/zsh/zshrc</code> Used for setting interactive shell configuration and executing commands for all users, will be read when starting as an <i><b>interactive shell</b></i>.</li>
<li>
<code>$ZDOTDIR/.zshrc</code> Used for setting user's interactive shell configuration and executing commands, will be read when starting as an <i><b>interactive shell</b></i>.</li>
<li>
<code>/etc/zsh/zlogin</code> Used for executing commands for all users at ending of initial progress, will be read when starting as a <i><b>login shell</b></i>.</li>
<li>
<code>$ZDOTDIR/.zlogin</code> Used for executing user's commands at ending of initial progress, will be read when starting as a <i><b>login shell</b></i>. Typically used to autostart command line utilities. Should not be used to autostart graphical sessions, as at this point the session might contain configuration meant only for an interactive shell.</li>
<li>
<code>$ZDOTDIR/.zlogout</code> Used for executing commands when a <i><b>login shell</b></i> <b>exits</b>.</li>
<li>
<code>/etc/zsh/zlogout</code> Used for executing commands for all users when a <i><b>login shell</b></i> <b>exits</b>.</li>
</ul>
<p>See <a rel="nofollow" class="external text" href="https://blog.flowblok.id.au/2013-02/shell-startup-scripts.html#implementation">the graphic representation</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>
<code>$HOME/.profile</code> is not a part of the Zsh startup files and <b>is not sourced</b> by Zsh unless Zsh is invoked as <code>sh</code> or <code>ksh</code> and started as a login shell. For more details about the sh and <a href="../en/KornShell.html" class="mw-redirect" title="Ksh">ksh</a> compatibility modes refer to <span class="plainlinks archwiki-template-man" title="$ man 1 zsh"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zsh.1#COMPATIBILITY">zsh(1) § COMPATIBILITY</a></span>.</li>
<li>The paths used in Arch's <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=zsh">zsh</a></span> package are different from the default ones used in the <a href="../en/Man_page.html" title="Man page">man pages</a> (<a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/48992">FS#48992</a>).</li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Do not remove the default <a rel="nofollow" class="external text" href="https://github.com/archlinux/svntogit-packages/blob/packages/zsh/trunk/zprofile">one line</a> in <code>/etc/zsh/zprofile</code>, otherwise it will break the integrity of other packages which provide some scripts in <code>/etc/profile.d/</code>.</div>
<h2><span class="mw-headline" id="Configure_Zsh">Configure Zsh</span></h2>
<p>Although Zsh is usable out of the box, it is almost certainly not set up the way most users would like to use it. But due to the sheer amount of customization available in Zsh, configuring Zsh can be a daunting and time-consuming experience.
</p>
<h3><span class="mw-headline" id="Simple_.zshrc">Simple .zshrc</span></h3>
<p>Included below is a sample configuration file. It provides a decent set of default options as well as giving examples of many ways that Zsh can be customized. In order to use this configuration save it as a file named <code>.zshrc</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Apply the changes without needing to logout and then back in by running <code>source ~/.zshrc</code>.</div>
<p>Here is a simple <code>.zshrc</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">autoload -Uz compinit promptinit
compinit
promptinit

# This will set the default prompt to the walters theme
prompt walters
</pre>
<h3>
<span id="Configuring_.24PATH"></span><span class="mw-headline" id="Configuring_$PATH">Configuring $PATH</span>
</h3>
<p>Zsh ties the <code>PATH</code> variable to a <code>path</code> array. They are automatically synchronized. This allows us to easily manipulate <code>PATH</code> by simply modifying the array. See <a rel="nofollow" class="external text" href="http://zsh.sourceforge.net/Guide/zshguide02.html#l24">A User's Guide to the Z-Shell</a> for details.
</p>
<p>The line <code>typeset -U PATH path</code>, where the <code>-U</code> stands for unique, instructs the shell to discard duplicates from both <code>$PATH</code> and <code>$path</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshenv</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">typeset -U PATH path
path=("$HOME/.local/bin" <i>/other/things/in/path</i> "$path[@]")
export PATH</pre>
<h3><span class="mw-headline" id="Command_completion">Command completion</span></h3>
<p>Perhaps the most compelling feature of Zsh is its advanced autocompletion abilities. At the very least, enable autocompletion in <code>.zshrc</code>. To enable autocompletion, add the following to your <code>~/.zshrc</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">autoload -Uz compinit
compinit
</pre>
<p>The above configuration includes ssh/scp/sftp hostnames completion but in order for this feature to work, users must not enable ssh's hostname hashing (i.e. option <code>HashKnownHosts</code> in ssh client configuration).
</p>
<p>For autocompletion with an arrow-key driven interface, add the following to:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">zstyle ':completion:*' menu select
</pre>
<p>To activate the menu, press <code>Tab</code> twice.
</p>
<p>For autocompletion of command line switches for aliases, add the following to:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">setopt COMPLETE_ALIASES
</pre>
<p>For enabling autocompletion of privileged environments in privileged commands (e.g. if you complete a command starting with <a href="../en/Sudo.html" title="Sudo">sudo</a>, completion scripts will also try to determine your completions with sudo), include:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">zstyle ':completion::complete:*' gain-privileges 1
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> This will let Zsh completion scripts run commands with sudo privileges. You should not enable this if you use untrusted autocompletion scripts.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This special kind of context-aware completion is only available for a small number of commands.</div>
<h3><span class="mw-headline" id="Key_bindings">Key bindings</span></h3>
<p>Zsh does not use <a href="../en/Readline.html" title="Readline">readline</a>, instead it uses its own and more powerful Zsh Line Editor (ZLE). It does not read <code>/etc/inputrc</code> or <code>~/.inputrc</code>. Read <a rel="nofollow" class="external text" href="https://sgeb.io/posts/2014/04/zsh-zle-custom-widgets/">A closer look at the zsh line editor and creating custom widgets</a> for an introduction to ZLE configuration.
</p>
<p>ZLE has an <a href="../en/Emacs.html" title="Emacs">Emacs</a> mode and a <a href="../en/Vi.html" title="Vi">vi</a> mode. If one of the <code>VISUAL</code> or <code>EDITOR</code> <a href="../en/Environment_variables.html" title="Environment variables">environment variables</a> contain the string <code>vi</code> then vi mode will be used; otherwise, it will default to Emacs mode. Set the mode explicitly with <code>bindkey -e</code> or <code>bindkey -v</code> respectively for Emacs mode or vi mode.
</p>
<p>Key bindings are assigned by mapping an escape sequence matching a keypress to a ZLE widget. The available widgets, with descriptions of their actions and their default keybindings, are listed in <span class="plainlinks archwiki-template-man" title="$ man 1 zshzle"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zshzle.1#STANDARD_WIDGETS">zshzle(1) § STANDARD WIDGETS</a></span> and <span class="plainlinks archwiki-template-man" title="$ man 1 zshcontrib"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zshcontrib.1#ZLE_FUNCTIONS">zshcontrib(1) § ZLE FUNCTIONS</a></span>.
</p>
<p>The recommended way to set key bindings in Zsh is by using string capabilities from <span class="plainlinks archwiki-template-man" title="$ man 5 terminfo"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/terminfo.5">terminfo(5)</a></span>. For example<a rel="nofollow" class="external autonumber" href="https://web.archive.org/web/20180704181216/http://zshwiki.org/home/zle/bindkeys">[1]</a><a rel="nofollow" class="external autonumber" href="https://www.zsh.org/mla/users/2010/msg00065.html">[2]</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># create a zkbd compatible hash;
# to add other keys to this hash, see: man 5 terminfo
typeset -g -A key

key[Home]="${terminfo[khome]}"
key[End]="${terminfo[kend]}"
key[Insert]="${terminfo[kich1]}"
key[Backspace]="${terminfo[kbs]}"
key[Delete]="${terminfo[kdch1]}"
key[Up]="${terminfo[kcuu1]}"
key[Down]="${terminfo[kcud1]}"
key[Left]="${terminfo[kcub1]}"
key[Right]="${terminfo[kcuf1]}"
key[PageUp]="${terminfo[kpp]}"
key[PageDown]="${terminfo[knp]}"
key[Shift-Tab]="${terminfo[kcbt]}"

# setup key accordingly
[[ -n "${key[Home]}"      ]] &amp;&amp; bindkey -- "${key[Home]}"       beginning-of-line
[[ -n "${key[End]}"       ]] &amp;&amp; bindkey -- "${key[End]}"        end-of-line
[[ -n "${key[Insert]}"    ]] &amp;&amp; bindkey -- "${key[Insert]}"     overwrite-mode
[[ -n "${key[Backspace]}" ]] &amp;&amp; bindkey -- "${key[Backspace]}"  backward-delete-char
[[ -n "${key[Delete]}"    ]] &amp;&amp; bindkey -- "${key[Delete]}"     delete-char
[[ -n "${key[Up]}"        ]] &amp;&amp; bindkey -- "${key[Up]}"         up-line-or-history
[[ -n "${key[Down]}"      ]] &amp;&amp; bindkey -- "${key[Down]}"       down-line-or-history
[[ -n "${key[Left]}"      ]] &amp;&amp; bindkey -- "${key[Left]}"       backward-char
[[ -n "${key[Right]}"     ]] &amp;&amp; bindkey -- "${key[Right]}"      forward-char
[[ -n "${key[PageUp]}"    ]] &amp;&amp; bindkey -- "${key[PageUp]}"     beginning-of-buffer-or-history
[[ -n "${key[PageDown]}"  ]] &amp;&amp; bindkey -- "${key[PageDown]}"   end-of-buffer-or-history
[[ -n "${key[Shift-Tab]}" ]] &amp;&amp; bindkey -- "${key[Shift-Tab]}"  reverse-menu-complete

# Finally, make sure the terminal is in application mode, when zle is
# active. Only then are the values from $terminfo valid.
if (( ${+terminfo[smkx]} &amp;&amp; ${+terminfo[rmkx]} )); then
	autoload -Uz add-zle-hook-widget
	function zle_application_mode_start { echoti smkx }
	function zle_application_mode_stop { echoti rmkx }
	add-zle-hook-widget -Uz zle-line-init zle_application_mode_start
	add-zle-hook-widget -Uz zle-line-finish zle_application_mode_stop
fi</pre>
<h4><span class="mw-headline" id="History_search">History search</span></h4>
<p>You need to set up the <code>key</code> array and make sure that ZLE enters application mode to use the following instructions; see <a href="#Key_bindings">#Key bindings</a>.
</p>
<p>To enable history search add these lines to <code>.zshrc</code> file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">autoload -Uz up-line-or-beginning-search down-line-or-beginning-search
zle -N up-line-or-beginning-search
zle -N down-line-or-beginning-search

[[ -n "${key[Up]}"   ]] &amp;&amp; bindkey -- "${key[Up]}"   up-line-or-beginning-search
[[ -n "${key[Down]}" ]] &amp;&amp; bindkey -- "${key[Down]}" down-line-or-beginning-search
</pre>
<p>By doing this, only the past commands matching the current line up to the current cursor position will be shown when <code>Up</code> or <code>Down</code> keys are pressed.
</p>
<h4>
<span id="Shift.2C_Alt.2C_Ctrl_and_Meta_modifiers"></span><span class="mw-headline" id="Shift,_Alt,_Ctrl_and_Meta_modifiers">Shift, Alt, Ctrl and Meta modifiers</span>
</h4>
<p>xterm-compatible terminals can use extended key-definitions from <span class="plainlinks archwiki-template-man" title="$ man 5 user_caps"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/user_caps.5">user_caps(5)</a></span>. Those are combinations of <code>Shift</code>, <code>Alt</code>, <code>Ctrl</code> and <code>Meta</code> together with <code>Up</code>, <code>Down</code>, <code>Left</code>, <code>Right</code>, <code>PageUp</code>, <code>PageDown</code>, <code>Home</code>, <code>End</code> or <code>Del</code>. Refer to the <a rel="nofollow" class="external text" href="https://sourceforge.net/p/zsh/code/ci/master/tree/Functions/Misc/zkbd">zkbd source</a> for a list of recommended names for the modifier keys and key combinations.
</p>
<p>For example, for <code>Ctrl+Left</code> to move to the beginning of the previous word and <code>Ctrl+Right</code> to move to the beginning of the next word:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">key[Control-Left]="${terminfo[kLFT5]}"
key[Control-Right]="${terminfo[kRIT5]}"

[[ -n "${key[Control-Left]}"  ]] &amp;&amp; bindkey -- "${key[Control-Left]}"  backward-word
[[ -n "${key[Control-Right]}" ]] &amp;&amp; bindkey -- "${key[Control-Right]}" forward-word</pre>
<h3><span class="mw-headline" id="Prompts">Prompts</span></h3>
<p>Zsh offers the options of using a prompt theme or, for users who are dissatisfied with the themes (or want to expand their usefulness), the possibility to build a custom prompt.
</p>
<h4><span class="mw-headline" id="Prompt_themes">Prompt themes</span></h4>
<p>Prompt themes are a quick and easy way to set up a colored prompt in Zsh. See <span class="plainlinks archwiki-template-man" title="$ man 1 zshcontrib"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zshcontrib.1#PROMPT_THEMES">zshcontrib(1) § PROMPT THEMES</a></span> for more information about them.
</p>
<p>To use a theme, make sure that prompt theme system is set to autoload in <code>.zshrc</code>. This can be done by adding these lines to:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">autoload -Uz promptinit
promptinit
</pre>
<p>Available prompt themes are listed by running the command:
</p>
<pre>$ prompt -l
</pre>
<p>For example, to use the <code>walters</code> theme, enter:
</p>
<pre>$ prompt walters
</pre>
<p>To preview all available themes, use this command:
</p>
<pre>$ prompt -p
</pre>
<h5><span class="mw-headline" id="Manually_installing_prompt_themes">Manually installing prompt themes</span></h5>
<p>It is possible to install themes manually, without external configuration manager tools. For a local installation, first create a folder and add it to the <code>fpath</code> array, eg:
</p>
<pre>$ mkdir ~/.zprompts
$ fpath=("$HOME/.zprompts" "$fpath[@]")
</pre>
<p>Now create a symbolic link of your theme file in this folder:
</p>
<pre>$ ln -s mytheme.zsh ~/.zprompts/prompt_mytheme_setup
</pre>
<p>If instead you wish to install a theme globally, do:
</p>
<pre># ln -s mytheme.zsh /usr/share/zsh/functions/Prompts/prompt_mytheme_setup
</pre>
<p>Now you should be able to activate it using:
</p>
<pre>$ prompt mytheme
</pre>
<p>If everything works, you can edit your <code>.zshrc</code> accordingly.
</p>
<h5><span class="mw-headline" id="Adding_prompt_themes_without_a_separate_file_for_each_one">Adding prompt themes without a separate file for each one</span></h5>
<p>In addition to adding a prompt theme through its own file, it is possible to add themes from within another file (like your <code>.zshrc</code>), eg:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Load promptinit
autoload -Uz promptinit &amp;&amp; promptinit

# Define the theme
prompt_mytheme_setup() {
  PS1="%~%# "
}

# Add the theme to promptsys
prompt_themes+=( mytheme )

# Load the theme
prompt mytheme</pre>
<h4><span class="mw-headline" id="Customized_prompt">Customized prompt</span></h4>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a><b>This article or section needs expansion.</b><a href="../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Add a simple colorless <code>PROMPT</code> example. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Zsh">Talk:Zsh#</a>)</div>
</div>
<p>Additionally to a primary left-sided prompt <code>PS1</code> (<code>PROMPT</code>, <code>prompt</code>) that is common to all shells, Zsh also supports a right-sided prompt <code>RPS1</code> (<code>RPROMPT</code>). These two variables are the ones you will want to set to a custom value.
</p>
<p>Other special purpose prompts, such as <code>PS2</code> (<code>PROMPT2</code>), <code>PS3</code> (<code>PROMPT3</code>), <code>PS4</code> (<code>PROMPT4</code>), <code>RPS1</code> (<code>RPROMPT</code>), <code>RPS2</code> (<code>RPROMPT2</code>) and <code>SPROMPT</code>, are explained in <span class="plainlinks archwiki-template-man" title="$ man 1 zshparam"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zshparam.1#PARAMETERS_USED_BY_THE_SHELL">zshparam(1) § PARAMETERS USED BY THE SHELL</a></span>.
</p>
<p>All prompts can be customized with prompt escapes. The available prompt escapes are listed in <span class="plainlinks archwiki-template-man" title="$ man 1 zshmisc"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zshmisc.1#EXPANSION_OF_PROMPT_SEQUENCES">zshmisc(1) § EXPANSION OF PROMPT SEQUENCES</a></span>.
</p>
<h5><span class="mw-headline" id="Colors">Colors</span></h5>
<p>Zsh sets colors differently than <a href="../en/Bash/Prompt_customization.html" title="Bash/Prompt customization">Bash</a>, you do not need to use convoluted ANSI escape sequences or terminal capabilities from <span class="plainlinks archwiki-template-man" title="$ man 5 terminfo"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/terminfo.5">terminfo(5)</a></span>. Zsh provides convenient prompt escapes to set the foreground color, background color and other visual effects; see <span class="plainlinks archwiki-template-man" title="$ man 1 zshmisc"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zshmisc.1#Visual_effects">zshmisc(1) § Visual effects</a></span> for a list of them and their descriptions.
</p>
<p><a rel="nofollow" class="external text" href="http://zsh.sourceforge.net/FAQ/zshfaq03.html#l42">Colors</a> can be specified using a decimal integer, the name of one of the eight most widely-supported colors or as a # followed by an RGB triplet in hexadecimal format. See the description of fg=colour in <span class="plainlinks archwiki-template-man" title="$ man 1 zshzle"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zshzle.1#CHARACTER_HIGHLIGHTING">zshzle(1) § CHARACTER HIGHLIGHTING</a></span> for more details.
</p>
<p>Most terminals support the following colors by name:
</p>
<table class="wikitable">

<tbody>
<tr>
<th>Name</th>
<th>Number
</th>
</tr>
<tr>
<td><code>black</code></td>
<td>
<code>0</code>
</td>
</tr>
<tr>
<td><code>red</code></td>
<td>
<code>1</code>
</td>
</tr>
<tr>
<td><code>green</code></td>
<td>
<code>2</code>
</td>
</tr>
<tr>
<td><code>yellow</code></td>
<td>
<code>3</code>
</td>
</tr>
<tr>
<td><code>blue</code></td>
<td>
<code>4</code>
</td>
</tr>
<tr>
<td><code>magenta</code></td>
<td>
<code>5</code>
</td>
</tr>
<tr>
<td><code>cyan</code></td>
<td>
<code>6</code>
</td>
</tr>
<tr>
<td><code>white</code></td>
<td>
<code>7</code>
</td>
</tr>
</tbody>
</table>
<p>Color numbers 0–255 for terminal emulators compatible with xterm 256 colors can be found in the <a rel="nofollow" class="external text" href="https://upload.wikimedia.org/wikipedia/commons/1/15/Xterm_256color_chart.svg">xterm-256color chart</a>.
</p>
<p>With a correctly set TERM environment variable, the terminal's supported maximum number of colors can be found from the <span class="plainlinks archwiki-template-man" title="$ man 5 terminfo"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/terminfo.5">terminfo(5)</a></span> database using <code>echoti colors</code>. In the case of <a rel="nofollow" class="external text" href="https://gist.github.com/XVilka/8346728">24-bit colors</a>, also check the COLORTERM environment variable with <code>print $COLORTERM</code>. If it returns <code>24bit</code> or <code>truecolor</code> then your terminal supports 16777216 (2<sup>24</sup>) colors even if terminfo shows a smaller number.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>The colors 0–15 may differ between terminal emulators and their used color schemes.</li>
<li>Many terminal emulators display bold with a brighter color.</li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> 
<ul>
<li>Prompt escapes can be tested with command <code>print -P <i>"prompt escapes"</i></code>, for example: <pre>$ print -P '%B%F{red}co%F{green}lo%F{blue}rs%f%b'</pre>
</li>
<li>If you use 24-bit colors, you might want to load the <code>zsh/nearcolor</code> module in terminals that do not support them. E.g.: <pre>[[ "$COLORTERM" == (24bit|truecolor) || "${terminfo[colors]}" -eq '16777216' ]] || zmodload zsh/nearcolor</pre> See <span class="plainlinks archwiki-template-man" title="$ man 1 zshmodules"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zshmodules.1#THE_ZSH/NEARCOLOR_MODULE">zshmodules(1) § THE ZSH/NEARCOLOR MODULE</a></span> for details about the <code>zsh/nearcolor</code> module.</li>
</ul>
</div>
<h5><span class="mw-headline" id="Example">Example</span></h5>
<p>This is an example of a two-sided prompt:
</p>
<pre>PROMPT='%F{green}%n%f@%F{magenta}%m%f %F{blue}%B%~%b%f %# '
RPROMPT='[%F{yellow}%?%f]'
</pre>
<p>And here is how it will be displayed:
</p>
<div style="font-family: monospace; white-space: pre; padding: 1em; background-color: #000; border: 1px solid #bcd; color: #c0c0c0; overflow: hidden;">
<span style="float:left;"><span style="color: #008000;">username</span>@<span style="color: #800080;">host</span> <span style="color: #0000ff;">~</span> % </span><span style="float:right;">[<span style="color: #808000;">0</span>]</span>
</div>
<p>To use colors from the 16-255 range and 24-bit true color, you can use the number from 0 to 255 assigned to the wanted color and its hexadecimal color code, respectively:
</p>
<pre>PROMPT='%F{2}%n%f@%F{5}%m%f %F{4}%B%~%b%f %# '
RPROMPT='[%F{3}%?%f]'
</pre>
<pre>PROMPT='%F{#c0c0c0}%n%f@%F{#008000}%m%f %F{#800080}%B%~%b%f %# '
RPROMPT='[%F{#0000ff}%?%f]'
</pre>
<h3><span class="mw-headline" id="Sample_.zshrc_files">Sample .zshrc files</span></h3>
<ul>
<li>To get the same setup as the <a rel="nofollow" class="external text" href="https://archlinux.org/download/">monthly ISO releases</a> (which use Zsh by default), install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=grml-zsh-config">grml-zsh-config</a></span>. It includes the many tweaks and advanced optimizations from <a rel="nofollow" class="external text" href="https://grml.org/zsh/">grml</a>.</li>
<li>
<a rel="nofollow" class="external free" href="https://github.com/MrElendig/dotfiles-alice/blob/master/.zshrc">https://github.com/MrElendig/dotfiles-alice/blob/master/.zshrc</a> - basic setup, with dynamic prompt and window title/hardinfo.</li>
<li>
<a rel="nofollow" class="external free" href="https://github.com/slashbeast/conf-mgmt/blob/master/roles/home_files/files/DOTzshrc">https://github.com/slashbeast/conf-mgmt/blob/master/roles/home_files/files/DOTzshrc</a> - zshrc with multiple features, be sure to check out comments into it. Notable features: confirm function to ensure that user want to run poweroff, reboot or hibernate, support for GIT in prompt (done without vcsinfo), tab completion with menu, printing current executed command into window's title bar and more.</li>
</ul>
<p>See <a href="../en/Dotfiles.html#User_repositories" title="Dotfiles">dotfiles#User repositories</a> for more.
</p>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="Autostart_X_at_login">Autostart X at login</span></h3>
<p>See <a href="../en/Xinit.html#Autostart_X_at_login" title="Xinit">xinit#Autostart X at login</a>.
</p>
<h3><span class="mw-headline" id="Restore_terminal_settings_after_a_program_exits_abnormally">Restore terminal settings after a program exits abnormally</span></h3>
<p>Many programs change the terminal state, and often do not restore terminal settings on exiting abnormally (e.g. when crashing or encountering SIGINT). 
</p>
<p>This can typically be solved by executing <span class="plainlinks archwiki-template-man" title="$ man 1 reset"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/reset.1">reset(1)</a></span>:
</p>
<pre>$ reset
</pre>
<p>The following sections describe ways to avoid the need to manually reset the terminal.
</p>
<h4><span class="mw-headline" id="The_ttyctl_command">The ttyctl command</span></h4>
<p>The <a rel="nofollow" class="external text" href="http://zsh.sourceforge.net/Doc/Release/Shell-Builtin-Commands.html#index-tty_002c-freezing">ttyctl</a> command can be used to "freeze/unfreeze" the terminal. To freeze the interactive shell on launch, use the following:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ttyctl -f
</pre>
<h4><span class="mw-headline" id="Resetting_the_terminal_with_escape_sequences">Resetting the terminal with escape sequences</span></h4>
<p><a rel="nofollow" class="external text" href="https://www.in-ulm.de/~mascheck/various/alternate_charset/">Alternate linedrawing character set</a> can screw up the terminal in a way which ttyctl cannot prevent.
</p>
<p>A simple solution is to output the escape sequences that reset the terminal from the <code>precmd</code> hook function, so that they are executed every time before the prompt is drawn. For example, using <a rel="nofollow" class="external text" href="https://www.in-ulm.de/~mascheck/various/alternate_charset/#solution">the escape sequence</a> <code>\e[0m\e(B\e)0\017\e[?5l\e7\e[0;0r\e8</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">autoload -Uz add-zsh-hook

function reset_broken_terminal () {
	printf '%b' '\e[0m\e(B\e)0\017\e[?5l\e7\e[0;0r\e8'
}

add-zsh-hook -Uz precmd reset_broken_terminal</pre>
<p>To test if it works, run: 
</p>
<pre>$ print '\e(0\e)B'
</pre>
<h3><span class="mw-headline" id="Remembering_recent_directories">Remembering recent directories</span></h3>
<h4><span class="mw-headline" id="Dirstack">Dirstack</span></h4>
<p>Zsh can be configured to remember the DIRSTACKSIZE last visited folders. This can then be used to <i>cd</i> them very quickly. You need to add some lines to your configuration file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">autoload -Uz add-zsh-hook

DIRSTACKFILE="${XDG_CACHE_HOME:-$HOME/.cache}/zsh/dirs"
if [[ -f "$DIRSTACKFILE" ]] &amp;&amp; (( ${#dirstack} == 0 )); then
	dirstack=("${(@f)"$(&lt; "$DIRSTACKFILE")"}")
	[[ -d "${dirstack[1]}" ]] &amp;&amp; cd -- "${dirstack[1]}"
fi
chpwd_dirstack() {
	print -l -- "$PWD" "${(u)dirstack[@]}" &gt; "$DIRSTACKFILE"
}
add-zsh-hook -Uz chpwd chpwd_dirstack

DIRSTACKSIZE='20'

setopt AUTO_PUSHD PUSHD_SILENT PUSHD_TO_HOME

## Remove duplicate entries
setopt PUSHD_IGNORE_DUPS

## This reverts the +/- operators.
setopt PUSHD_MINUS
</pre>
<p>Now use
</p>
<pre>$ dirs -v
</pre>
<p>to print the dirstack. Use <code>cd -&lt;NUM&gt;</code> to go back to a visited folder. Use autocompletion after the dash. This proves very handy if using the autocompletion menu.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This will not work if you have more than one <i>zsh</i> session open, and attempt to <code>cd</code>, due to a conflict in both sessions writing to the same file.</div>
<h4><span class="mw-headline" id="cdr">cdr</span></h4>
<p>cdr allows you to change the working directory to a previous working directory from a list maintained automatically. It stores all entries in files that are maintained across sessions and (by default) between terminal emulators in the current session.
</p>
<p>See <span class="plainlinks archwiki-template-man" title="$ man 1 zshcontrib"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zshcontrib.1#REMEMBERING_RECENT_DIRECTORIES">zshcontrib(1) § REMEMBERING RECENT DIRECTORIES</a></span> for setup instructions.
</p>
<h3><span class="mw-headline" id="Help_command">Help command</span></h3>
<p>Unlike <a href="../en/Bash.html" title="Bash">Bash</a>, Zsh does not enable a built in <code>help</code> command, instead it provides <code>run-help</code>. By default <code>run-help</code> is an alias to <code>man</code>, it can be either executed manually by prepending it to a command or it can be invoked for the currently typed command with the keyboard shortcuts <code>Alt+h</code> or <code>Esc</code> <code>h</code>.
</p>
<p>Since by default it is just an alias to <a href="../en/Man_page.html" class="mw-redirect" title="Man">man</a>, it will only work on external commands. To improve its functionality, so that it works on shell builtins and other shell features, you need to use the <code>run-help</code> function. See <span class="plainlinks archwiki-template-man" title="$ man 1 zshcontrib"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zshcontrib.1">zshcontrib(1)</a></span> for more information on the <code>run-help</code> and its assistant functions.
</p>
<p>First load the <code>run-help</code> function and then remove the existing <code>run-help</code> alias. For convenience <code>help</code> can be aliased to <code>run-help</code>. For example, add following to your <code>zshrc</code>:
</p>
<pre>autoload -Uz run-help
unalias run-help
alias help=run-help</pre>
<p>Assistant functions have to be enabled separately:
</p>
<pre>autoload -Uz run-help-git run-help-ip run-help-openssl run-help-p4 run-help-sudo run-help-svk run-help-svn
</pre>
<p>For example, <code>run-help git commit</code> command will now open the <a href="../en/Man_page.html" title="Man page">man page</a> <span class="plainlinks archwiki-template-man" title="$ man 1 git-commit"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/git-commit.1">git-commit(1)</a></span> instead of <span class="plainlinks archwiki-template-man" title="$ man 1 git"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/git.1">git(1)</a></span>.
</p>
<h3><span class="mw-headline" id="Persistent_rehash">Persistent rehash</span></h3>
<p>Typically, compinit will not automatically find new executables in the <code>$PATH</code>. For example, after you install a new package, the files in <code>/usr/bin/</code> would not be immediately or automatically included in the completion. Thus, to have these new executables included, one would run:
</p>
<pre>$ rehash
</pre>
<p>This 'rehash' can be set to happen automatically.<a rel="nofollow" class="external autonumber" href="https://github.com/robbyrussell/oh-my-zsh/issues/3440">[3]</a> Simply include the following in your <code>zshrc</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">zstyle ':completion:*' rehash true
</pre>
<h4><span class="mw-headline" id="On-demand_rehash">On-demand rehash</span></h4>
<p>As above, however <a href="../en/Pacman.html" title="Pacman">pacman</a> can be configured with <a href="../en/Pacman.html#Hooks" title="Pacman">hooks</a> to automatically request a <code>rehash</code>, which does not incur the performance penalty of constant rehashing as above. To enable this, create the <code>/etc/pacman.d/hooks</code> directory, and a <code>/var/cache/zsh</code> directory, then create a hook file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pacman.d/hooks/zsh.hook</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Trigger]
Operation = Install
Operation = Upgrade
Operation = Remove
Type = Path
Target = usr/bin/*
[Action]
Depends = zsh
When = PostTransaction
Exec = /usr/bin/install -Dm644 /dev/null /var/cache/zsh/pacman</pre>
<p>This keeps the modification date of the file <code>/var/cache/zsh/pacman</code> consistent with the last time a package was installed, upgraded or removed. Then, <code>zsh</code> must be coaxed into rehashing its own command cache when it goes out of date, by adding to your <code>~/.zshrc</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">zshcache_time="$(date +%s%N)"

autoload -Uz add-zsh-hook

rehash_precmd() {
  if [[ -a /var/cache/zsh/pacman ]]; then
    local paccache_time="$(date -r /var/cache/zsh/pacman +%s%N)"
    if (( zshcache_time &lt; paccache_time )); then
      rehash
      zshcache_time="$paccache_time"
    fi
  fi
}

add-zsh-hook -Uz precmd rehash_precmd
</pre>
<p>If the <code>precmd</code> hook is triggered before <code>/var/cache/zsh/pacman</code> is updated, completion may not work until a new prompt is initiated. Running an empty command, e.g. pressing <code>enter</code>, should be sufficient.
</p>
<h4><span class="mw-headline" id="Alternative_on-demand_rehash_using_SIGUSR1">Alternative on-demand rehash using SIGUSR1</span></h4>
<p>As above, however the hook file looks like this:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pacman.d/hooks/zsh-rehash.hook</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Trigger]
Operation = Install
Operation = Upgrade
Operation = Remove
Type = Path
Target = usr/bin/*

[Action]
Depends = zsh
Depends = procps-ng
When = PostTransaction
Exec = /usr/bin/pkill zsh --signal=USR1</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> This sends SIGUSR1 to all running <code>zsh</code> instances. Note that the default behavior for SIGUSR1 is terminate so when you first configure this all running <code>zsh</code> instances of all users (including login shells) will terminate if they have not sourced the trap below.</div>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">TRAPUSR1() { rehash }
</pre>
<p>The <i>function trap</i> above can be replaced with a <i>list trap</i> <code>trap 'rehash' USR1</code>. See <span class="plainlinks archwiki-template-man" title="$ man 1 zshmisc"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zshmisc.1#Trap_Functions">zshmisc(1) § Trap Functions</a></span> for differences between types of traps.
</p>
<p>This method will instantly <code>rehash</code> all <code>zsh</code> instances, removing the need to press enter to trigger <code>precmd</code>.
</p>
<h3><span class="mw-headline" id="Bind_key_to_ncurses_application">Bind key to ncurses application</span></h3>
<p>Bind a ncurses application to a keystroke, but it will not accept interaction. Use <code>BUFFER</code> variable to make it work. The following example lets users open <a href="../en/Ncmpcpp.html" title="Ncmpcpp">ncmpcpp</a> using <code>Alt+\</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ncmpcppShow() {
  BUFFER="ncmpcpp"
  zle accept-line
}
zle -N ncmpcppShow
bindkey '^[\' ncmpcppShow</pre>
<p>An alternate method, that will keep everything you entered in the line before calling application:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ncmpcppShow() {
  ncmpcpp &lt;$TTY
  zle redisplay
}
zle -N ncmpcppShow
bindkey '^[\' ncmpcppShow</pre>
<h3><span class="mw-headline" id="File_manager_key_binds">File manager key binds</span></h3>
<p>Key binds like those used in graphic file managers may come handy. The first comes back in directory history (<code>Alt+Left</code>), the second let the user go to the parent directory (<code>Alt+Up</code>). They also display the directory content.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">cdUndoKey() {
  popd
  zle       reset-prompt
  print
  ls
  zle       reset-prompt
}

cdParentKey() {
  pushd ..
  zle      reset-prompt
  print
  ls
  zle       reset-prompt
}

zle -N                 cdParentKey
zle -N                 cdUndoKey
bindkey '^[[1;3A'      cdParentKey
bindkey '^[[1;3D'      cdUndoKey
</pre>
<h3><span class="mw-headline" id="xterm_title">xterm title</span></h3>
<p>If your terminal emulator supports it, you can set its title from Zsh. This allows dynamically changing the title to display relevant information about the shell state, for example showing the user name and current directory or the currently executing command.
</p>
<p>The xterm title is set with the <a rel="nofollow" class="external text" href="https://www.tldp.org/HOWTO/Xterm-Title-3.html#ss3.1">xterm escape sequence</a> <code>\e]2;</code><code>\a</code>. For example:
</p>
<pre>$ print -n '\e]2;My xterm title\a'
</pre>
<p>will set the title to
</p>
<pre>My xterm title
</pre>
<p>A simple way to have a dynamic title is to set the title in the <code>precmd</code> and <code>preexec</code> hook functions. See <span class="plainlinks archwiki-template-man" title="$ man 1 zshmisc"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zshmisc.1#Hook_Functions">zshmisc(1) § Hook Functions</a></span> for a list of available hook functions and their descriptions.
</p>
<p>By using <code>print -P</code> you can additionally take advantage of Zsh's prompt escapes.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> 
<ul>
<li>Title printing can be split up in multiple commands as long as they are sequential.</li>
<li>
<a href="../en/GNU_Screen.html" title="GNU Screen">GNU Screen</a> sends the xterm title to the hardstatus (<code>%h</code>). If you want to use Screen's <a rel="nofollow" class="external text" href="https://www.gnu.org/software/screen/manual/html_node/String-Escapes.html">string escapes</a> (e.g. for colors) you should set the hardstatus with the <code>\e_</code><code>\e\\</code> escape sequence. Otherwise, if string escapes are used in <code>\e]2;</code><code>\a</code>, the terminal emulator will get a garbled title due to it being incapable of interpreting Screen's string escapes.</li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>Do not use the <code>-P</code> option of <code>print</code> when printing variables to prevent them from being parsed as prompt escapes.</li>
<li>Use the <code>q</code> <a rel="nofollow" class="external text" href="http://zsh.sourceforge.net/Doc/Release/Expansion.html#Parameter-Expansion-Flags">parameter expansion flag</a> when printing variables to prevent them from being parsed as escape sequences.</li>
</ul>
</div>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">autoload -Uz add-zsh-hook

function xterm_title_precmd () {
	print -Pn -- '\e]2;%n@%m %~\a'
	[[ "$TERM" == 'screen'* ]] &amp;&amp; print -Pn -- '\e_\005{g}%n\005{-}@\005{m}%m\005{-} \005{B}%~\005{-}\e\\'
}

function xterm_title_preexec () {
	print -Pn -- '\e]2;%n@%m %~ %# ' &amp;&amp; print -n -- "${(q)1}\a"
	[[ "$TERM" == 'screen'* ]] &amp;&amp; { print -Pn -- '\e_\005{g}%n\005{-}@\005{m}%m\005{-} \005{B}%~\005{-} %# ' &amp;&amp; print -n -- "${(q)1}\e\\"; }
}

if [[ "$TERM" == (alacritty*|gnome*|konsole*|putty*|rxvt*|screen*|tmux*|xterm*) ]]; then
	add-zsh-hook -Uz precmd xterm_title_precmd
	add-zsh-hook -Uz preexec xterm_title_preexec
fi
</pre>
<h4><span class="mw-headline" id="Terminal_emulator_tab_title">Terminal emulator tab title</span></h4>
<p>Some terminal emulators and multiplexers support setting the title of the tab. The escape sequences depend on the terminal:
</p>
<table class="wikitable sortable">
<tbody>
<tr>
<th>Terminal
</th>
<th>Escape sequences
</th>
<th>Description
</th>
</tr>
<tr>
<th>
<a href="../en/GNU_Screen.html" title="GNU Screen">GNU Screen</a>
</th>
<td>
<code>\ek</code><code>\e\\</code>
</td>
<td>Screen's window title (<code>%t</code>).
</td>
</tr>
<tr>
<th>Konsole
</th>
<td>
<code>\e]30;</code><code>\a</code>
</td>
<td>Konsole's tab title.
</td>
</tr>
</tbody>
</table>
<h3><span class="mw-headline" id="Shell_environment_detection">Shell environment detection</span></h3>
<p>See <a rel="nofollow" class="external text" href="https://gitlab.com/jdorel-documentation/shell-environment-detection">a repository about shell environment detection</a> for tests to detect the shell environment. This includes login/interactive shell, Xorg session, TTY and SSH session.
</p>
<h3>
<span id=".2Fdev.2Ftcp_equivalent:_ztcp"></span><span class="mw-headline" id="/dev/tcp_equivalent:_ztcp">/dev/tcp equivalent: ztcp</span>
</h3>
<p>Use the <code>zsh/net/tcp</code> module:
</p>
<pre>$ zmodload zsh/net/tcp
</pre>
<p>You can now establish TCP connections:
</p>
<pre>$ ztcp example.com 80
</pre>
<h3><span class="mw-headline" id="Shortcut_to_exit_shell_on_partial_command_line">Shortcut to exit shell on partial command line</span></h3>
<p>By default, <code>Ctrl+d</code> will not close your shell if the command line is filled, this fixes it:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">exit_zsh() { exit }
zle -N exit_zsh
bindkey '^D' exit_zsh
</pre>
<h2><span class="mw-headline" id="Third-party_extensions">Third-party extensions</span></h2>
<h3><span class="mw-headline" id="Configuration_frameworks">Configuration frameworks</span></h3>
<ul><li>
<b>oh-my-zsh</b> — A popular, community-driven framework for managing your Zsh configuration. It comes bundled with a ton of helpful functions, helpers, plugins, themes.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/ohmyzsh/ohmyzsh">https://github.com/ohmyzsh/ohmyzsh</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/oh-my-zsh-git/">oh-my-zsh-git</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>Prezto</b> — A configuration framework for Zsh. It comes with modules, enriching the command line interface environment with sane defaults, aliases, functions, auto completion, and prompt themes.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/sorin-ionescu/prezto">https://github.com/sorin-ionescu/prezto</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/prezto-git/">prezto-git</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>ZIM</b> — A configuration framework with blazing speed and modular extensions. Zim is very easy to customize, and comes with a rich set of modules and features without compromising on speed or functionality.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/zimfw/zimfw">https://github.com/zimfw/zimfw</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/zsh-zim-git/">zsh-zim-git</a></span><sup><small>AUR</small></sup>
</dd></dl>
<h3><span class="mw-headline" id="Plugin_managers">Plugin managers</span></h3>
<ul><li>
<b>Antibody</b> — A performance-focused plugin manager similar to Antigen.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/getantibody/antibody">https://github.com/getantibody/antibody</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/antibody/">antibody</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>zinit (previously "zplugin")</b> — Flexible Zsh plugin manager with clean fpath, reports, completion management, turbo mode</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/zdharma/zinit">https://github.com/zdharma/zinit</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/zsh-zplugin-git/">zsh-zplugin-git</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>Antigen</b> — A plugin manager for Zsh, inspired by oh-my-zsh and vundle. <a rel="nofollow" class="external text" href="https://github.com/zsh-users/antigen/issues/673">ABANDONED</a>
</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/zsh-users/antigen">https://github.com/zsh-users/antigen</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/antigen-git/">antigen-git</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>zgen</b> — A lightweight and simple plugin manager for Zsh. <a rel="nofollow" class="external text" href="https://github.com/tarjoilija/zgen/issues/123">ABANDONED</a>
</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/tarjoilija/zgen">https://github.com/tarjoilija/zgen</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/zgen-git/">zgen-git</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>zplug</b> — A next-generation plugin manager for Zsh. <a rel="nofollow" class="external text" href="https://github.com/zplug/zplug/issues/403#issuecomment-477520784">ABANDONED</a>
</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/zplug/zplug">https://github.com/zplug/zplug</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/zplug/">zplug</a></span><sup><small>AUR</small></sup>
</dd></dl>
<h3><span class="mw-headline" id="Fish-like_syntax_highlighting_and_autosuggestions">Fish-like syntax highlighting and autosuggestions</span></h3>
<p><a href="../en/Fish.html" title="Fish">Fish</a> provides very powerful shell syntax highlighting and autosuggestions. To use both in Zsh, you can install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=zsh-syntax-highlighting">zsh-syntax-highlighting</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=zsh-autosuggestions">zsh-autosuggestions</a></span>, and finally <a href="../en/Help:Reading.html#Source" class="mw-redirect" title="Source">source</a> one or both of the provided scripts from your zshrc:
</p>
<pre>source /usr/share/zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
source /usr/share/zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh
</pre>
<h3>
<span id="The_.22command_not_found.22_handler"></span><span class="mw-headline" id='The_"command_not_found"_handler'>The "command not found" handler</span>
</h3>
<p><a href="../en/Pacman.html" title="Pacman">pacman</a> includes functionality to search for packages containing a file. The following command-not-found handler will use pacman directly to search for matching packages when an unknown command is executed.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">command_not_found_handler() {
	local pkgs cmd="$1" files=()
	printf 'zsh: command not found: %s' "$cmd" # print command not found asap, then search for packages
	files=(${(f)"$(pacman -F --machinereadable -- "/usr/bin/${cmd}")"})
	if (( ${#files[@]} )); then
		printf '\r%s may be found in the following packages:\n' "$cmd"
		local res=() repo package version file
		for file in "$files[@]"; do
			res=("${(0)file}")
			repo="$res[1]"
			package="$res[2]"
			version="$res[3]"
			file="$res[4]"
			printf '  %s/%s %s: /%s\n' "$repo" "$package" "$version" "$file"
		done
	else
		printf '\n'
	fi
	return 127
}</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The files database of pacman is separate from the normal sync database and it needs to be fetched using <code>pacman -Fy</code>. See <a href="../en/Pacman.html#Search_for_a_package_that_contains_a_specific_file" title="Pacman">pacman#Search for a package that contains a specific file</a> for details.</div>
<p>Alternatively, <a href="../en/Pkgfile.html" title="Pkgfile">pkgfile</a> includes a Zsh script file that provides a <code>command_not_found_handler</code> function that will automatically search the pkgfile database when entering an unrecognized command.
</p>
<p>You need to <a href="../en/Help:Reading.html#Source" class="mw-redirect" title="Source">source</a> the script to enable it. For example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">source /usr/share/doc/pkgfile/command-not-found.zsh
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The pkgfile database may need to be updated before this will work. See <a href="../en/Pkgfile.html#Installation" title="Pkgfile">pkgfile#Installation</a> for details.</div>
<h2><span class="mw-headline" id="Uninstallation">Uninstallation</span></h2>
<p>Change the default shell before removing the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=zsh">zsh</a></span> package.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Failure to follow the below procedure may result in users no longer having access to a working shell.</div>
<p>Run following command:
</p>
<pre>$ chsh -s /bin/bash <i>user</i>
</pre>
<p>Use it for every user with <i>zsh</i> set as their login shell (including root if needed). When completed, the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=zsh">zsh</a></span> package can be removed.
</p>
<p>Alternatively, change the default shell back to Bash by editing <code>/etc/passwd</code> as root.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> It is strongly recommended to use <span class="plainlinks archwiki-template-man" title="$ man 8 vipw"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/vipw.8">vipw(8)</a></span> when editing <code>/etc/passwd</code> as it helps prevent invalid entries and/or syntax errors.</div>
<p>For example, change the following:
</p>
<pre><i>username</i>:x:1000:1000:<i>Full Name</i>,,,:/home/<i>username</i>:/bin/zsh
</pre>
<p>To this:
</p>
<pre><i>username</i>:x:1000:1000:<i>Full Name</i>,,,:/home/<i>username</i>:/bin/bash
</pre>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Zsh" class="extiw" title="wikipedia:Zsh">Wikipedia:Zsh</a></li>
<li><a rel="nofollow" class="external text" href="http://zsh.sourceforge.net/Intro/intro_toc.html">An Introduction to the Z Shell</a></li>
<li><a rel="nofollow" class="external text" href="http://zsh.sourceforge.net/Guide/zshguide.html">A User's Guide to ZSH</a></li>
<li>
<a rel="nofollow" class="external text" href="http://zsh.sourceforge.net/Doc/Release/index-frame.html">The Z Shell Manual</a> (different format available <a rel="nofollow" class="external text" href="http://zsh.sourceforge.net/Doc/">here</a>)</li>
<li><a rel="nofollow" class="external text" href="http://zsh.sourceforge.net/FAQ/zshfaq01.html">Zsh FAQ</a></li>
<li><a rel="nofollow" class="external text" href="http://zshwiki.org/home/">Zsh Wiki</a></li>
<li>
<span class="plainlinks archwiki-template-man" title="$ man 1 zsh-lovers"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zsh-lovers.1">zsh-lovers(1)</a></span> (available as <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=zsh-lovers">zsh-lovers</a></span> package)</li>
<li><a href="https://wiki.gentoo.org/wiki/Zsh/Guide" class="extiw" title="gentoo:Zsh/Guide">Gentoo: Zsh/Guide</a></li>
<li><a rel="nofollow" class="external text" href="http://www.bash2zsh.com/zsh_refcard/refcard.pdf">Bash2Zsh Reference Card</a></li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Command-line_shells.html" title="Category:Command-line shells">Command-line shells</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Zsh&amp;oldid=647101">https://wiki.archlinux.org/index.php?title=Zsh&amp;oldid=647101</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 26 December 2020, at 12:31.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
