<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Lenovo ThinkPad X1 Yoga (Gen 3) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Lenovo_ThinkPad_X1_Yoga_Gen_3 rootpage-Lenovo_ThinkPad_X1_Yoga_Gen_3 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Lenovo ThinkPad X1 Yoga (Gen 3)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a><b>This article or section does not follow the <a href="../en/Help:Laptop_page_guidelines.html" title="Help:Laptop page guidelines">Laptop page guidelines</a>.</b><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Needs IDs in hardware table and improved function keys table (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Lenovo_ThinkPad_X1_Yoga_(Gen_3)">Talk:Lenovo ThinkPad X1 Yoga (Gen 3)#</a>)</div>
</div>
<table class="wikitable" style="float: right;">

<tbody>
<tr>
<th>Hardware</th>
<th>PCI/USB ID</th>
<th>Working?
</th>
</tr>
<tr>
<td>Touchpad</td>
<td></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>TrackPoint</td>
<td></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>Touchscreen</td>
<td></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>Keyboard</td>
<td></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>Video</td>
<td></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>Webcam</td>
<td></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>Ethernet</td>
<td></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>Bluetooth</td>
<td></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>microSD-Card slot</td>
<td></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>Audio</td>
<td></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>Wireless</td>
<td></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>Mobile broadband</td>
<td></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>Fingerprint Reader</td>
<td></td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">No
</td>
</tr>
</tbody>
</table>
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../en/Lenovo_ThinkPad_X1_Carbon_(Gen_6).html" title="Lenovo ThinkPad X1 Carbon (Gen 6)">Lenovo ThinkPad X1 Carbon (Gen 6)</a></li>
<li><a href="../en/Lenovo_ThinkPad_X1_Yoga_(Gen_4).html" title="Lenovo ThinkPad X1 Yoga (Gen 4)">Lenovo ThinkPad X1 Yoga (Gen 4)</a></li>
<li><a href="../en/Lenovo_ThinkPad_X1_Yoga_(Gen_5).html" title="Lenovo ThinkPad X1 Yoga (Gen 5)">Lenovo ThinkPad X1 Yoga (Gen 5)</a></li>
</ul>
</div>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Firmware"><span class="tocnumber">1</span> <span class="toctext">Firmware</span></a>
<ul>
<li class="toclevel-2 tocsection-2">
<a href="#Updates"><span class="tocnumber">1.1</span> <span class="toctext">Updates</span></a>
<ul>
<li class="toclevel-3 tocsection-3"><a href="#Manual"><span class="tocnumber">1.1.1</span> <span class="toctext">Manual</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="#Mobile_broadband"><span class="tocnumber">2</span> <span class="toctext">Mobile broadband</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Fingerprint_reader"><span class="tocnumber">3</span> <span class="toctext">Fingerprint reader</span></a></li>
<li class="toclevel-1 tocsection-6">
<a href="#Power_management"><span class="tocnumber">4</span> <span class="toctext">Power management</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#Enabling_S3_(with_BIOS_version_1.33_and_after)"><span class="tocnumber">4.1</span> <span class="toctext">Enabling S3 (with BIOS version 1.33 and after)</span></a></li>
<li class="toclevel-2 tocsection-8">
<a href="#Enabling_S3_(before_BIOS_version_1.33)"><span class="tocnumber">4.2</span> <span class="toctext">Enabling S3 (before BIOS version 1.33)</span></a>
<ul>
<li class="toclevel-3 tocsection-9"><a href="#Manual_method"><span class="tocnumber">4.2.1</span> <span class="toctext">Manual method</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-10">
<a href="#Fix_touchscreen_after_resume"><span class="tocnumber">4.3</span> <span class="toctext">Fix touchscreen after resume</span></a>
<ul>
<li class="toclevel-3 tocsection-11"><a href="#Disabling_Thunderbolt"><span class="tocnumber">4.3.1</span> <span class="toctext">Disabling Thunderbolt</span></a></li>
<li class="toclevel-3 tocsection-12">
<a href="#Using_s2idle"><span class="tocnumber">4.3.2</span> <span class="toctext">Using s2idle</span></a>
<ul>
<li class="toclevel-4 tocsection-13"><a href="#Method_1"><span class="tocnumber">4.3.2.1</span> <span class="toctext">Method 1</span></a></li>
<li class="toclevel-4 tocsection-14"><a href="#Method_2"><span class="tocnumber">4.3.2.2</span> <span class="toctext">Method 2</span></a></li>
<li class="toclevel-4 tocsection-15"><a href="#Method_3"><span class="tocnumber">4.3.2.3</span> <span class="toctext">Method 3</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-16"><a href="#Other_methods"><span class="tocnumber">4.3.3</span> <span class="toctext">Other methods</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-17"><a href="#Enabling_S2idle"><span class="tocnumber">4.4</span> <span class="toctext">Enabling S2idle</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-18"><a href="#Function_keys"><span class="tocnumber">5</span> <span class="toctext">Function keys</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Firmware">Firmware</span></h2>
<p>Several linux users reported their systems were bricked after enabling "Thunderbolt BIOS assist" in the UEFI menu.  Lenovo has released BIOS version 1.27 which prevents this issue.  See this <a rel="nofollow" class="external text" href="https://forums.lenovo.com/t5/ThinkPad-X-Series-Laptops/Thinkpad-X1-Yoga-3rd-Gen-Stuck-at-Black-Screen-After-Enabling/td-p/4106952">thread</a> on the Lenovo forums for details.
</p>
<p>Under BIOS version 1.24 the embedded controller will no longer spin the fan up properly during high system load causing CPU throttling issues.  Reverting to version 1.21 will restore normal functions or you can use the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ThinkFan/">ThinkFan</a></span><sup><small>AUR</small></sup> package to control it via the OS.  See <a href="../en/Fan_speed_control.html#ThinkPad_laptops" title="Fan speed control">Fan speed control#ThinkPad laptops</a> for details.
</p>
<h3><span class="mw-headline" id="Updates">Updates</span></h3>
<p><a rel="nofollow" class="external text" href="https://blogs.gnome.org/hughsie/2018/08/06/please-welcome-lenovo-to-the-lvfs/">In August of 2018 Lenovo has joined</a> the <a rel="nofollow" class="external text" href="https://fwupd.org/">Linux Vendor Firmware Service (LVFS)</a> project, which enables firmware updates from within the OS.
BIOS updates (and possibly other firmware such as the Thunderbolt controller) can be queried for and installed through <a href="../en/Fwupd.html" title="Fwupd">fwupd</a>.
</p>
<h4><span class="mw-headline" id="Manual">Manual</span></h4>
<p>Download the latest BIOS image from the <a rel="nofollow" class="external text" href="https://pcsupport.lenovo.com/ar/en/products/laptops-and-netbooks/thinkpad-x-series-laptops/thinkpad-x1-yoga-3rd-gen-type-20ld-20le-20lf-20lg/downloads">Lenovo Thinkpad X1 Yoga 3rd Gen downloads page</a>. Obtain <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/geteltorito/">geteltorito</a></span><sup><small>AUR</small></sup> and run <code>geteltorito.pl -o bios-update.img xxxxxxxx.iso</code> on the downloaded ISO file to create a valid <a href="https://en.wikipedia.org/wiki/El_Torito_(CD-ROM_standard)" class="extiw" title="wikipedia:El Torito (CD-ROM standard)">El Torito</a> image file, then flash this file on a USB drive via <code>dd</code> like you would flash <a href="../en/USB_flash_installation_medium.html" class="mw-redirect" title="USB flash installation media">Arch installation media</a>. For further information see <a href="../en/Flashing_BIOS_from_Linux.html#Bootable_optical_disk_emulation" title="Flashing BIOS from Linux">flashing BIOS from Linux</a>.
</p>
<p>The ThinkPad X1 Yoga supports setting a custom splash image at the earliest boot stage (instead of the red "Lenovo" logo), more information can be found in the <code>README.TXT</code> located in the <code>FLASH</code> folder of the update image.
</p>
<h2><span class="mw-headline" id="Mobile_broadband">Mobile broadband</span></h2>
<p>Fibocom L850-GL works with <a rel="nofollow" class="external free" href="https://github.com/xmm7360/xmm7360-usb-modeswitch">https://github.com/xmm7360/xmm7360-usb-modeswitch</a>
</p>
<h2><span class="mw-headline" id="Fingerprint_reader">Fingerprint reader</span></h2>
<p><a rel="nofollow" class="external text" href="https://github.com/nmikhailov/Validity90">The Validity90 project</a> began reverse engineering the reader, but updates have stopped.
</p>
<h2><span class="mw-headline" id="Power_management">Power management</span></h2>
<p>To check whether S3 is recognized and usable by Linux, run:
</p>
<pre> dmesg | grep -i "acpi: (supports"
</pre>
<p>and check for <code>S3</code> in the list.
</p>
<h3>
<span id="Enabling_S3_.28with_BIOS_version_1.33_and_after.29"></span><span class="mw-headline" id="Enabling_S3_(with_BIOS_version_1.33_and_after)">Enabling S3 (with BIOS version 1.33 and after)</span>
</h3>
<p>Since of May 17, 2019, Lenovo released firmware 1.33, which let you enable legacy S3 sleep in UEFI/BIOS. You can find the option in ThinkPad Setup: Config -&gt; Power and disable the option "Optimized Sleep State for Modern Standby". 
</p>
<p>Optimized Sleep State for Modern Standby (after BIOS 1.35 the wording has changed to "Sleep State"):
</p>
<ul>
<li>Disabled: "legacy" S3 sleep (after BIOS 1.35 the wording has changed to "Linux")</li>
<li>Enabled: modern standby (after BIOS 1.35 the wording has changed to "Windows 10")</li>
</ul>
<p>By setting this option to "Disabled", a warning will appear. The warning describes that a reinstallation of your OS might be mandatory. Accept the warning and both Windows and Linux should work fine. You can do this step even if you already installed a patch to enable s3 sleep. After disabling the optimized sleep state in the bios, and if you did the method to enable s3 sleep before the 1.33 bios update, it is best to remove <code><b>GRUB_EARLY_INITRD_LINUX_CUSTOM="/acpi_override"</b></code> in your /etc/default/grub (if you placed that there before), and regenerate the grub cfg using <code>sudo update-grub</code>. Do not forget to remove the acpi_override file as well.
</p>
<p>Reboot and verify whether S3 is working by running:
</p>
<pre> dmesg | grep -i "acpi: (supports"
</pre>
<p>You should now see something like this:
</p>
<pre> [    0.230796] ACPI: (supports S0 S3 S4 S5)
</pre>
<h3>
<span id="Enabling_S3_.28before_BIOS_version_1.33.29"></span><span class="mw-headline" id="Enabling_S3_(before_BIOS_version_1.33)">Enabling S3 (before BIOS version 1.33)</span>
</h3>
<p>There is an automated script called x1carbon2018s3 by <a rel="nofollow" class="external text" href="https://github.com/fiji-flo">fiji-flo</a> that was originally intended for use for the X1 Carbon 6th Gen (<a rel="nofollow" class="external text" href="https://github.com/fiji-flo/x1carbon2018s3">source</a>). The script and documentation were updated and maintained by <a rel="nofollow" class="external text" href="https://github.com/lsmith77">lsmith77</a> to adapt it for the X1 Yoga 3rd Gen. The latest known version is in a fork by <a rel="nofollow" class="external text" href="https://github.com/ryankhart">ryankhart</a> currently awaiting a pull request. These scripts are recommended for debian-based distributions because of the script including debian-based bash commands.
</p>
<p>(Optional) To check out this script and its history, visit these GitHub repositories:
</p>
<ul><li>
<a rel="nofollow" class="external free" href="https://github.com/fiji-flo/x1carbon2018s3">https://github.com/fiji-flo/x1carbon2018s3</a>
<ul><li>
<a rel="nofollow" class="external free" href="https://github.com/lsmith77/x1carbon2018s3">https://github.com/lsmith77/x1carbon2018s3</a>
<ul><li><a rel="nofollow" class="external free" href="https://github.com/ryankhart/x1carbon2018s3">https://github.com/ryankhart/x1carbon2018s3</a></li></ul>
</li></ul>
</li></ul>
<h4><span class="mw-headline" id="Manual_method">Manual method</span></h4>
<p>The manual method can be used in any distribution of Linux. Below is a modified version of <a rel="nofollow" class="external text" href="https://gist.github.com/javanna/38d019a373085e1ba0c784597bc7ec73/">the source instructions</a> because some things are hard to understand.
</p>
<p>1. Reboot, enter BIOS/UEFI. Go to Config - Thunderbolt (TM) 3 - set Thunderbolt BIOS Assist Mode to Enabled. Set also Security - Secure Boot to Disabled.
</p>
<p>2. Install iasl (Intel's compiler/decompiler for ACPI machine language) and cpio.
iasl in Ubuntu and possibly other distributions probably do not have the latest release for it to fully work. To make sure you have the latest version, download the <a rel="nofollow" class="external text" href="https://acpica.org/downloads/">source code</a> and make install iasl. cpio can be installed normally with your distribution's package manager
</p>
<p>3. Get a dump of ACPI DSDT table:   <code>cat /sys/firmware/acpi/tables/DSDT &gt; dsdt.aml</code>
</p>
<p>4. Decompile the dump, which will generate a .dsl source based on the .aml ACPI machine language dump: <code>iasl -d dsdt.aml</code>
</p>
<p>5. Download the [patch](<a rel="nofollow" class="external free" href="http://kernel.dk/acpi.patch">http://kernel.dk/acpi.patch</a>) and apply it against dsdt.dsl: <code>patch --verbose &lt; acpi.patch</code>
</p>
<p>Hunk 2 failed for me, I manually looked for the following in dsdt.dsl:
</p>
<pre>   Name (SS1, 0x00)
   Name (SS2, 0x00)
   Name (SS3, One)
   One
   Name (SS4, One)
   One
</pre>
<p>and replaced it with the following (removing the two "One" lines):
</p>
<pre>   Name (SS1, 0x00)
   Name (SS2, 0x00)
   Name (SS3, One)
   Name (SS4, One)
</pre>
<p>6. Recompile your patched version of the .dsl source: <code>iasl -ve -tc dsdt.dsl</code>
</p>
<p>7. Create a CPIO archive with the correct structure, which GRUB can load on boot. We name the final image acpi_override and copy it into /boot/:
</p>
<pre> mkdir -p kernel/firmware/acpi
 cp dsdt.aml kernel/firmware/acpi
 find kernel | cpio -H newc --create &gt; acpi_override
 cp acpi_override /boot
</pre>
<p>8. GRUB needs to boot the kernel with a parameter setting the deep sleep state as default. Edit <code>/etc/default/grub</code> and add the following:
</p>
<pre> <code>GRUB_CMDLINE_LINUX_DEFAULT="mem_sleep_default=deep"</code>
 <code>GRUB_EARLY_INITRD_LINUX_CUSTOM="/boot/acpi_override"</code>
</pre>
<p>9. Regenerate the GRUB configuration: <code>sudo update-grub</code>
</p>
<p><b>If the second line of the previous step does not generate the grub to make the initrd lines look like "initrd /boot/acpi_override" in the beginning, then follow the next steps as normal. If it does generate those lines, skip to step 11</b>
</p>
<p><br> 
10. Tell GRUB to load the new DSDT table on boot in its configuration file usually located in <code>/boot/grub/grub.cfg</code>. Find the relevant GRUB menu entry 
and add the new image <code>/boot/acpi_override</code> to the initrd lines for the images that you want the s3 sleep to work in:
</p>
<pre> Before:
 initrd /initramfs-4.17.4-200.fc28.x86_64.img
 
 After:
 initrd <b>/boot/acpi_override</b> /initramfs-4.17.4-200.fc28.x86_64.img
</pre>
<p>11. Reboot and enjoy having a laptop running Linux again... close the lid and the battery does not get drained in a few hours, also the battery no longer stays warm in sleep mode.
To verify that things are working:
</p>
<pre> dmesg | grep ACPI | grep supports
 #[    0.195933] ACPI: (supports S0 S3 S4 S5)
 
  cat /sys/power/mem_sleep
 #s2idle [deep]
</pre>
<h3><span class="mw-headline" id="Fix_touchscreen_after_resume">Fix touchscreen after resume</span></h3>
<p>These fixes were pulled from:
<a rel="nofollow" class="external text" href="https://forums.lenovo.com/t5/Other-Linux-Discussions/X1Y3-Touchscreen-not-working-after-resume-on-Linux/td-p/4021200">Lenovo Linux Forums</a>
</p>
<h4><span class="mw-headline" id="Disabling_Thunderbolt">Disabling Thunderbolt</span></h4>
<p>Some users have reported that disabling Thunderbolt in BIOS -&gt; Security -&gt; IO ports -&gt; Thunderbolt permanently fixes the touchscreen issue. As a consequence, docking stations may have some features disabled.
</p>
<h4><span class="mw-headline" id="Using_s2idle">Using s2idle</span></h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This method requires S3 to be enabled in a very specific way:
<p>1. Select <code>Sleep State-&gt;Windows 10</code> in bios. This by default will enable s2idle.
</p>
  <pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/sys/power/mem_sleep</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[s2idle] deep</pre>
<p>2. To change default to S3 (<code>deep</code>), append <code>mem_sleep_default=deep</code> to the kernel boot line.
</p>
<p>3. Reboot and make sure <code>deep</code> is default.
</p>
  <pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/sys/power/mem_sleep</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">s2idle [deep]</pre>
</div>
<p>When S3 suspend is enabled, the touchscreen will not work upon resume from sleep. 
</p>
<p>The touchscreen functionality can be restored by freezing system (s2idle) after system comes out of suspend.
</p>
<h5><span class="mw-headline" id="Method_1">Method 1</span></h5>
<p>1. Create a script to be called by systemd-sleep
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/lib/systemd/system-sleep/wacom</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

case "$1" in
    post)
        rtcwake -m freeze -s 1
        ;;
esac</pre>
<p>2. Make sure the executable permissions are set
</p>
<pre># chmod a+x /usr/lib/systemd/system-sleep/wacom
</pre>
<h5><span class="mw-headline" id="Method_2">Method 2</span></h5>
<p>1. Create a systemd system service file to force the system to enter <code>freeze</code> momentarily
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/wake_wacom_hack.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description= s2idle for 1 second after resume
After=suspend.target

[Service]
Type=oneshot
ExecStart=/usr/sbin/rtcwake -m freeze -s 1

[Install]
WantedBy=suspend.target</pre>
<p>2. <a href="../en/Systemd.html#Using_units" class="mw-redirect" title="Enable">Enable</a> <code>wake_wacom_hack.service</code>.
</p>
<h5><span class="mw-headline" id="Method_3">Method 3</span></h5>
<p>1. Install and enable acpi_call kernel module 
</p>
<p>2. Add the following SystemD service:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/activate-touch-hack.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Touch wake Thinkpad X1 Yoga 3rd gen hack
After=suspend.target hibernate.target hybrid-sleep.target suspend-then-hibernate.target
code
[Service]
ExecStart=/bin/sh -c "echo '\\_SB.PCI0.LPCB.EC._Q2A'  &gt; /proc/acpi/call"

[Install]
WantedBy=suspend.target hibernate.target hybrid-sleep.target suspend-then-hibernate.target</pre>
<h4><span class="mw-headline" id="Other_methods">Other methods</span></h4>
<p>Some users have reported this temporary fix: quickly close and open the lid to enable sleep, and use the power button to resume from sleep.
</p>
<h3><span class="mw-headline" id="Enabling_S2idle">Enabling S2idle</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Since <a rel="nofollow" class="external text" href="https://patchwork.kernel.org/patch/10550647/">kernel version 4.18</a> acpi.ec_no_wakeup=1 is set by default</div>
<p>From <a rel="nofollow" class="external text" href="https://forums.lenovo.com/t5/Linux-Discussion/X1-Carbon-Gen-6-cannot-enter-deep-sleep-S3-state-aka-Suspend-to/m-p/4016317/highlight/true#M10682">the Lenovo forums</a><sup title="Last check status: 404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2020-12-27 ⓘ]</sup>: Add the following <a href="../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a> to enable S2idle support:
</p>
<pre> acpi.ec_no_wakeup=1
</pre>
<p>For example, for GRUB, one might edit <code>/etc/default/grub</code> and edit <code>GRUB_CMDLINE_LINUX_DEFAULT</code>:
</p>
<pre> GRUB_CMDLINE_LINUX_DEFAULT="quiet acpi.ec_no_wakeup=1"
</pre>
<p>then perform
</p>
<pre> # update-grub
</pre>
<p>and restart the system.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This supports only S2idle state, not S0i3 state as some seem to have been led to believe!</div>
<p>The power consumption might still be higher than that of the S3 state in this case.
</p>
<h2><span class="mw-headline" id="Function_keys">Function keys</span></h2>
<table class="wikitable">
<tbody>
<tr>
<th>Keybind</th>
<th>XF86 Event</th>
<th>Keycode</th>
<th>Keysym
</th>
</tr>
<tr>
<td>Fn</td>
<td>XF86WakeUp</td>
<td>151</td>
<td>0x1008ff2b
</td>
</tr>
<tr>
<td>Fn+F1</td>
<td>XF86AudioMute</td>
<td>121</td>
<td>0x1008ff12
</td>
</tr>
<tr>
<td>Fn+F2</td>
<td>XF86AudioLowerVolume</td>
<td>122</td>
<td>0x1008ff11
</td>
</tr>
<tr>
<td>Fn+F3</td>
<td>XF86AudioRaiseVolume</td>
<td>123</td>
<td>0x1008ff13
</td>
</tr>
<tr>
<td>Fn+F4</td>
<td>XF86AudioMicMute</td>
<td>198</td>
<td>0x1008ffb2
</td>
</tr>
<tr>
<td>Fn+F5</td>
<td>XF86MonBrightnessDown</td>
<td>232</td>
<td>0x1008ff03
</td>
</tr>
<tr>
<td>Fn+F6</td>
<td>XF86MonBrightnessUp</td>
<td>233</td>
<td>0x1008ff02
</td>
</tr>
<tr>
<td>Fn+F7</td>
<td>XF86Display</td>
<td>235</td>
<td>0x1008ff59
</td>
</tr>
<tr>
<td>Fn+F8</td>
<td>XF86WLAN</td>
<td>246</td>
<td>0x1008ff95
</td>
</tr>
<tr>
<td>Fn+F9</td>
<td>XF86Tools</td>
<td>179</td>
<td>0x1008ff81
</td>
</tr>
<tr>
<td>Fn+F10</td>
<td>XF86Bluetooth</td>
<td>245</td>
<td>0x1008ff94
</td>
</tr>
<tr>
<td>Fn+F11</td>
<td>??
</td>
</tr>
<tr>
<td>Fn+F12</td>
<td>XF86Favorites</td>
<td>164</td>
<td>0x1008ff30
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Lenovo.html" title="Category:Lenovo">Lenovo</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Laptop_style.html" title="Category:Pages or sections flagged with Template:Laptop style">Pages or sections flagged with Template:Laptop style</a></li>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Lenovo_ThinkPad_X1_Yoga_(Gen_3)&amp;oldid=663392">https://wiki.archlinux.org/index.php?title=Lenovo_ThinkPad_X1_Yoga_(Gen_3)&amp;oldid=663392</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 21 April 2021, at 15:28.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
