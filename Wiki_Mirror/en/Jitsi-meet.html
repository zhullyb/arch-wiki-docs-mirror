<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Jitsi-meet - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Jitsi-meet rootpage-Jitsi-meet skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Jitsi-meet</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<p><a rel="nofollow" class="external text" href="https://jitsi.org">Jitsi</a> is a set of open-source projects that allows you to easily build and deploy secure videoconferencing solutions. At the heart of Jitsi are <i>Jitsi Videobridge</i> and <i>Jitsi Meet</i>, which let you have conferences on the internet, while other projects from the community enable other features such as audio, dial-in, recording, and simulcasting.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Installation"><span class="tocnumber">1</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Configuration"><span class="tocnumber">2</span> <span class="toctext">Configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-3">
<a href="#Config_paths"><span class="tocnumber">2.1</span> <span class="toctext">Config paths</span></a>
<ul>
<li class="toclevel-3 tocsection-4"><a href="#Stable"><span class="tocnumber">2.1.1</span> <span class="toctext">Stable</span></a></li>
<li class="toclevel-3 tocsection-5"><a href="#Nightly"><span class="tocnumber">2.1.2</span> <span class="toctext">Nightly</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#Git"><span class="tocnumber">2.1.3</span> <span class="toctext">Git</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-7"><a href="#Loopback"><span class="tocnumber">2.2</span> <span class="toctext">Loopback</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Configure_prosody"><span class="tocnumber">2.3</span> <span class="toctext">Configure prosody</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Configure_jitsi-videobridge"><span class="tocnumber">2.4</span> <span class="toctext">Configure jitsi-videobridge</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Configure_jicofo"><span class="tocnumber">2.5</span> <span class="toctext">Configure jicofo</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Configure_jitsi-meet"><span class="tocnumber">2.6</span> <span class="toctext">Configure jitsi-meet</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Configure_nginx"><span class="tocnumber">2.7</span> <span class="toctext">Configure nginx</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-13">
<a href="#Tips_and_tricks"><span class="tocnumber">3</span> <span class="toctext">Tips and tricks</span></a>
<ul>
<li class="toclevel-2 tocsection-14"><a href="#Running_the_server_behind_a_NAT"><span class="tocnumber">3.1</span> <span class="toctext">Running the server behind a NAT</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Jitsi_gateway_to_SIP_(Jigasi)"><span class="tocnumber">3.2</span> <span class="toctext">Jitsi gateway to SIP (Jigasi)</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Access_restrictions_for_room_creation"><span class="tocnumber">3.3</span> <span class="toctext">Access restrictions for room creation</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Access_restrictions_with_JWT_token"><span class="tocnumber">3.4</span> <span class="toctext">Access restrictions with JWT token</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Log_evaluation"><span class="tocnumber">3.5</span> <span class="toctext">Log evaluation</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#Running_own_STUN_server"><span class="tocnumber">3.6</span> <span class="toctext">Running own STUN server</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-20">
<a href="#Troubleshooting"><span class="tocnumber">4</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-21"><a href="#Check_your_logs"><span class="tocnumber">4.1</span> <span class="toctext">Check your logs</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#Ask_help_on_Matrix_rooms"><span class="tocnumber">4.2</span> <span class="toctext">Ask help on Matrix rooms</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-23"><a href="#See_also"><span class="tocnumber">5</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><i>Jitsi-meet</i> consists of severals components:
</p>
<ul>
<li>
<code>jitsi-meet</code>: the files for the webinterface, accessed via files served by a webserver</li>
<li>
<code>jitsi-meet-prosody</code>: the prosody plugins for jitsi</li>
<li>
<code>jitsi-meet-turnserver</code>: the configs example to run a stun/turn server</li>
<li>
<code>jitsi-videobridge</code>: the video bridging service providing video streams to all participants</li>
<li>
<code>jicofo</code>: the Jitsi conference focus determining who is speaking</li>
<li>
<a href="/title/Prosody" title="Prosody">Prosody</a>: a free XMPP server serving as the base of the setup</li>
</ul>
<p>A graphical overview of the interfaces to the user and towards each other is given <a rel="nofollow" class="external text" href="https://jitsi.github.io/handbook/docs/devops-guide/devops-guide-manual">here</a>.
</p>
<p>You can either use the git versions, the nightly version or the stable versions.
</p>
<p>It is possible to install them at the same time, but you will need to use separate port and several instances of prosody (the plugins cannot be scope by virtual host).
</p>
<p>You need to choose between the normal or the bin version. The bin one conflicts with the normal version. (nightly and nightly-bin can be installed at the same time, but stable and nightly can be.)
</p>
<p>Try to stick with only one of them:
</p>
<ul>
<li><a href="#Stable">stable</a></li>
<li><a href="#Nightly">nightly</a></li>
<li><a href="#Git">git</a></li>
</ul>
<p>Some packages install configs examples in <code>/usr/share/doc</code>, ensure to comment this line in <code>/etc/pacman.conf</code>:
</p>
<pre>#NoExtract = usr/share/gtk-doc/html/* usr/share/doc/*</pre>
<p>You need those optionals packages to run a standalone server:
</p>
<ul>
<li><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nginx">nginx</a></span></li>
<li><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=coturn">coturn</a></span></li>
<li><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=prosody">prosody</a></span></li>
<li><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lua52">lua52</a></span></li>
<li><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lua52-sec">lua52-sec</a></span></li>
<li><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lua52-zlib">lua52-zlib</a></span></li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/lua52-event/">lua52-event</a></span><sup><small>AUR</small></sup>
</li>
</ul>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This configuration yields an open server for everyone to connect. Refer to the <a rel="nofollow" class="external text" href="https://jitsi.org/blog/security/">Jitsi philosophy</a> for rationale. See tips section for authentication.</div>
<p>If your server name is <code>example.com</code> then a common choice for your jitsi will be <code>meet.example.com</code>, but you can choose freely. It is however strongly encouraged from security standpoint to host webapps on their own subdomain. You will need to update DNS record for your server with an entry of your chosen subdomain, in the above example <code>meet</code>. The remainder assumes that you have done this.
</p>
<p>Also you should have SSL/TLS certificates for your <code>meet.example.com</code> domain, on how to obtain free certificates see <a href="/title/Certbot" title="Certbot">certbot</a>.
</p>
<p>In the following, the following placeholders are used:
</p>
<ul>
<li>
<code>JITSIFQDN</code>: your <code>jitsi-meet</code> domain, e.g. <code>meet.example.com</code>
</li>
<li>
<code>SECRET_JVB_USER</code>: password for the videobridge</li>
<li>
<code>SECRET_FOCUS_USER</code>: password for the authenticator</li>
</ul>
<p>Passwords should be obtained in a safe way, e.g. via <code>mktemp -u XXXXXXXX</code> or via <code>pwgen</code>. <b>Make sure to use different and safe passwords!</b>
</p>
<h3><span class="mw-headline" id="Config_paths">Config paths</span></h3>
<h4><span class="mw-headline" id="Stable">Stable</span></h4>
<ul>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jitsi-meet/">jitsi-meet</a></span><sup><small>AUR</small></sup> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jitsi-meet-bin/">jitsi-meet-bin</a></span><sup><small>AUR</small></sup>: /etc/webapps/jitsi-meet</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jitsi-meet-prosody/">jitsi-meet-prosody</a></span><sup><small>AUR</small></sup> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jitsi-meet-prosody-bin/">jitsi-meet-prosody-bin</a></span><sup><small>AUR</small></sup>: /usr/lib/jitsi-meet-prosody</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jitsi-meet-turnserver/">jitsi-meet-turnserver</a></span><sup><small>AUR</small></sup> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jitsi-meet-turnserver-bin/">jitsi-meet-turnserver-bin</a></span><sup><small>AUR</small></sup>: /usr/share/doc/jitsi-meet-turnserver</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jicofo/">jicofo</a></span><sup><small>AUR</small></sup> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jicofo-bin/">jicofo-bin</a></span><sup><small>AUR</small></sup>: /etc/jicofo</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jitsi-videobridge/">jitsi-videobridge</a></span><sup><small>AUR</small></sup> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jitsi-videobridge-bin/">jitsi-videobridge-bin</a></span><sup><small>AUR</small></sup>: /etc/jitsi-videobridge</li>
</ul>
<h4><span class="mw-headline" id="Nightly">Nightly</span></h4>
<ul>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jitsi-meet-nightly/">jitsi-meet-nightly</a></span><sup><small>AUR</small></sup> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jitsi-meet-nightly-bin/">jitsi-meet-nightly-bin</a></span><sup><small>AUR</small></sup>: /etc/webapps/jitsi-meet-nightly</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jitsi-meet-prosody-nightly/">jitsi-meet-prosody-nightly</a></span><sup><small>AUR</small></sup> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jitsi-meet-prosody-nightly-bin/">jitsi-meet-prosody-nightly-bin</a></span><sup><small>AUR</small></sup>: /usr/lib/jitsi-meet-prosody-nightly</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jitsi-meet-turnserver-nightly/">jitsi-meet-turnserver-nightly</a></span><sup><small>AUR</small></sup> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jitsi-meet-turnserver-nightly-bin/">jitsi-meet-turnserver-nightly-bin</a></span><sup><small>AUR</small></sup>: /usr/share/doc/jitsi-meet-turnserver-nightly</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jicofo-nightly/">jicofo-nightly</a></span><sup><small>AUR</small></sup> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jicofo-nightly-bin/">jicofo-nightly-bin</a></span><sup><small>AUR</small></sup>: /etc/jicofo-nightly</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jitsi-videobridge-nightly/">jitsi-videobridge-nightly</a></span><sup><small>AUR</small></sup> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jitsi-videobridge-nightly-bin/">jitsi-videobridge-nightly-bin</a></span><sup><small>AUR</small></sup>: /etc/jitsi-videobridge-nightly</li>
</ul>
<h4><span class="mw-headline" id="Git">Git</span></h4>
<ul>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jitsi-meet-git/">jitsi-meet-git</a></span><sup><small>AUR</small></sup>: /etc/webapps/jitsi-meet-git</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jitsi-meet-prosody-git/">jitsi-meet-prosody-git</a></span><sup><small>AUR</small></sup>: /usr/lib/jitsi-meet-prosody-git</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jitsi-meet-turnserver-git/">jitsi-meet-turnserver-git</a></span><sup><small>AUR</small></sup>: /usr/share/doc/jitsi-meet-turnserver-git</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jicofo-git/">jicofo-git</a></span><sup><small>AUR</small></sup>: /etc/jicofo-git</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jitsi-videobridge-git/">jitsi-videobridge-git</a></span><sup><small>AUR</small></sup>: /etc/jitsi-videobridge-git</li>
</ul>
<h3><span class="mw-headline" id="Loopback">Loopback</span></h3>
<p>Let us jitsi-meet components reach each other with local ip. It works even if your domain is behind a proxy like Cloudflare which does not return the real ip of the server.
</p>
<p>In <code>/etc/hosts</code>:
</p>
<pre>127.0.0.1 YOUR_DOMAIN auth.YOUR_DOMAIN
::1 YOUR_DOMAIN auth.YOUR_DOMAIN
</pre>
<h3><span class="mw-headline" id="Configure_prosody">Configure prosody</span></h3>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=prosody">prosody</a></span> is a prerequisite and you will need to add a configuration to it for your Jitsi services. If you do not already have a prosody server set up, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=prosody">prosody</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lua52-sec">lua52-sec</a></span> now. The rest of the prosody configuration assumes you have a local install of prosody. 
</p>
<p>The package <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jitsi-meet-prosody/">jitsi-meet-prosody</a></span><sup><small>AUR</small></sup> provides a configuration you can easily customize:
</p>
<pre>cd /etc/prosody
mkdir conf.d
cp /usr/share/doc/jitsi-meet-prosody/prosody.cfg.lua-jvb.example conf.d/jitsi.cfg.lua
</pre>
<p>Then add this at the end of:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/prosody/prosody.cfg.lua</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Include "conf.d/*.cfg.lua"</pre>
<p>Customize your configuration:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/prosody/conf.d/jitsi.cfg.lua</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># replace all occurences of <b>jitmeet.example.com</b> by <b>JITSIFQDN</b>
# replace all occurences of <b>focusUser</b> by <b>focus</b>
# then add or update those section

VirtualHost "<b>JITSIFQDN</b>"
    ssl = {
        key = "/etc/prosody/certs/<b>JITSIFQDN</b>.key";
        certificate = "/etc/prosody/certs/<b>JITSIFQDN</b>.crt";
    }

VirtualHost "auth.<b>JITSIFQDN</b>"
    ssl = {
        key = "/etc/prosody/certs/auth.<b>JITSIFQDN</b>.key";
        certificate = "/etc/prosody/certs/auth.<b>JITSIFQDN</b>.crt";
    }
    authentication = "internal_plain"</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/prosody/conf.d/jitsi.cfg.lua</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">-- Proxy to jicofo's user JID, so that it does not have to register as a component.
Component "focus.<b>JITSIFQDN</b>" "client_proxy"
    target_address = "focus@auth.<b>JITSIFQDN</b>"</pre>
<p>You need now to generate the certificate for <b>JITSIFQDN</b> and auth.<b>JITSIFQDN</b>.
</p>
<p>If you use certbot, you can import the certificate with:
</p>
<pre>prosodyctl --root cert import /etc/letsencrypt/live</pre>
<p>If you want to use self generated certs, you can use:
</p>
<pre>sudo -u prosody prosodyctl cert generate <b>JITSIFQDN</b>
sudo -u prosody prosodyctl cert generate auth.<b>JITSIFQDN</b>
mv /var/lib/prosody/*.{crt,cnf,key} /etc/prosody/certs/
trust anchor /etc/prosody/certs/<b>JITSIFQDN</b>.crt
trust anchor /etc/prosody/certs/auth.<b>JITSIFQDN</b>.crt
update-ca-trust # for java</pre>
<p>Let us register the users jvb and focus:
</p>
<pre>prosodyctl register jvb auth.<b>JITSIFQDN</b> <b>SECRET_JVB_USER</b>
prosodyctl register focus auth.<b>JITSIFQDN</b> <b>SECRET_FOCUS_USER</b>
prosodyctl mod_roster_command subscribe focus.<b>JITSIFQDN</b> focus@auth.<b>JITSIFQDN</b></pre>
<p>Then <a href="/title/Restart" class="mw-redirect" title="Restart">restart</a> <code>prosody.service</code> (or <a href="/title/Start/enable" class="mw-redirect" title="Start/enable">start/enable</a> it if it was just installed).
</p>
<h3><span class="mw-headline" id="Configure_jitsi-videobridge">Configure jitsi-videobridge</span></h3>
<p>The configuration for jitsi-videobridge. Add <b>-nightly</b> or <b>-git</b> to <b>/etc/jitsi-videobridge</b> for <b>nightly</b> and <b>git</b> version.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/jitsi-videobridge/config</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">JVB_HOSTNAME=<b>JITSIFQDN</b>
JVB_SECRET=<b>SECRET_JVB_USER</b>

# Also uncomment this, if you install java15 (check with java -v). If possible use java8.
# VIDEOBRIDGE_GC_TYPE=G1GC</pre>
<p>For MUC_NICKNAME, use <b>uuidgen</b> command:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/jitsi-videobridge/sip-communicator.properties</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">org.jitsi.videobridge.xmpp.user.shard.DOMAIN=auth.<b>JITSIFQDN</b>
org.jitsi.videobridge.xmpp.user.shard.PASSWORD=<b>SECRET_JVB_USER</b>
org.jitsi.videobridge.xmpp.user.shard.MUC_JIDS=JvbBrewery@internal.auth.<b>JITSIFQDN</b>
org.jitsi.videobridge.xmpp.user.shard.MUC_NICKNAME=<b>UUIDGEN_RESULT</b></pre>
<p>Then <a href="/title/Start/enable" class="mw-redirect" title="Start/enable">start/enable</a> <code>jitsi-videobridge.service</code>.
</p>
<h3><span class="mw-headline" id="Configure_jicofo">Configure jicofo</span></h3>
<p>The configuration for jicofo. Add -nightly or -git to /etc/jitsi-videobridge for nightly and git version.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/jicofo/config</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">JICOFO_HOSTNAME=<b>JITSIFQDN</b>
JICOFO_AUTH_DOMAIN=auth.<b>JITSIFQDN</b>
JICOFO_AUTH_PASSWORD=<b>SECRET_FOCUS_USER</b></pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/jicofo/sip-communicator.properties</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">org.jitsi.jicofo.BRIDGE_MUC=JvbBrewery@internal.auth.<b>JITSIFQDN</b></pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/jicofo/jicofo.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">{
  // Look for xmpp &gt; client
  xmpp {
    client {
      // Replace those 2 variables
      // remove the // if present to uncomment
      conference-muc-jid = conference.<b>JITSIFQDN</b>
      client-proxy = focus.<b>JITSIFQDN</b>
    }
  }
}</pre>
<p>Then <a href="/title/Start/enable" class="mw-redirect" title="Start/enable">start/enable</a> <code>jicofo.service</code>.
</p>
<h3><span class="mw-headline" id="Configure_jitsi-meet">Configure jitsi-meet</span></h3>
<p>The configuration for jitsi-meet webapps. Add <b>-nightly</b> or <b>-git</b> to <b>/etc/jitsi-videobridge</b> for <b>nightly</b> and <b>git</b> version.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/webapps/jitsi-meet/config.js</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">var config = {
  hosts: {
    domain: '<b>JITSIFQDN'</b>,
    // ...
    muc: 'conference.<b>JITSIFQDN'</b>
  },
  bosh: '//<b>JITSIFQDN</b>/http-bind',
  // ...
}</pre>
<h3><span class="mw-headline" id="Configure_nginx">Configure nginx</span></h3>
<p>Configure <a href="/title/Nginx" title="Nginx">nginx</a> with TLS as described in <a href="/title/Nginx#TLS" title="Nginx">nginx#TLS</a>.
</p>
<p>Let us copy the provided example.
</p>
<pre>cd /etc/nginx
mkdir sites
cp /usr/share/doc/jitsi-meet/jitsi-meet.example sites/jitsi.conf</pre>
<p>Then include it in your main config:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/nginx/nginx.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">http {
    // ...
    // this should be placed near to the close bracket of the http block
    include sites/*.conf;
}</pre>
<p>Then changes the jitsi config with your configuration:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/nginx/sites/jitsi.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">server {
  # ...
  server_name YOUR_DOMAIN;

  # ...
  # use prosody path directly
  ssl_certificate /etc/prosody/certs/<b>JITSIFQDN</b>.crt;
  ssl_certificate_key /etc/prosody/certs/<b>JITSIFQDN</b>.key;
  # or use letencrypt path
  ssl_certificate /etc/letsencrypt/live/<b>JITSIFQDN</b>/fullchain.pem;
  ssl_certificate_key /etc/letsencrypt/live/<b>JITSIFQDN</b>/privkey.pem;

  # set the config path
  # replace alias /etc/jitsi/meet/jitmeet.example.com-config.js by
  location = /config.js {
    alias /etc/webapps/jitsi-meet/config.js;
  }
  # ...
  location ~ ^/([^/?&amp;:'"]+)/config.js$
  {
    set $subdomain "$1.";
    set $subdir "$1/";
    alias /etc/webapps/jitsi-meet/config.js;
  }
}</pre>
<p>Then <a href="/title/Restart" class="mw-redirect" title="Restart">restart</a> <code>nginx.service</code>.
</p>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="Running_the_server_behind_a_NAT">Running the server behind a NAT</span></h3>
<p>The following ports need to be forwarded to your server:
</p>
<p>HTTPS:
</p>
<ul><li>TCP/443</li></ul>
<p>Jitsi Videobridge:
</p>
<ul><li>UDP/10000</li></ul>
<h3>
<span id="Jitsi_gateway_to_SIP_.28Jigasi.29"></span><span class="mw-headline" id="Jitsi_gateway_to_SIP_(Jigasi)">Jitsi gateway to SIP (Jigasi)</span>
</h3>
<p>To interface the Jitsi-meet meetings with traditional SIP install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jigasi/">jigasi</a></span><sup><small>AUR</small></sup> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jigasi-git/">jigasi-git</a></span><sup><small>AUR</small></sup> and edit the prosody config:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/prosody/prosody.cfg.lua</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Component "callcontrol.<b>JITSIFQDN</b>"
    component_secret = "<b>SECRET_JIGASI_USER</b>"</pre>
<p>fill the SIP access credentials (<code>SIPUSER</code> <code>SIPSERVER</code> and <code>SIPPASSWORD</code>)
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/opt/jigasi/jigasi-home/sip-communicator.properties</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">net.java.sip.communicator.impl.protocol.sip.acc1403273890647.ACCOUNT_UID=SIP\:"SIPUSER@SIPSERVER"
net.java.sip.communicator.impl.protocol.sip.acc1403273890647.PASSWORD=SIPPASSWORD
net.java.sip.communicator.impl.protocol.sip.acc1403273890647.SERVER_ADDRESS=SIPSERVER
net.java.sip.communicator.impl.protocol.sip.acc1403273890647.USER_ID=SIPUSER</pre>
<p>To change the default room name SIP is connecting to, change <code>org.jitsi.jigasi.DEFAULT_JVB_ROOM_NAME</code> in the above config.
</p>
<p>Then edit the jigasi configuration
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/jitsi/jigasi/config</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">JIGASI_HOST=callcontrol.<b>JITSIFQDN</b>
JIGASI_HOSTNAME=jitsi-videobridge.<b>JITSIFQDN</b>
JIGASI_SECRET=<b>SECRET_JIGASI_USER</b>
JIGASI_OPTS=""
LOGFILE=/var/log/jitsi/jigasi.log</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/opt/jitsi-meet/config.js</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">hosts.call_control = 'callcontrol.meet.jit.si'</pre>
<p>and then <a href="/title/Start/enable" class="mw-redirect" title="Start/enable">start/enable</a> <code>jigasi.service</code>.
</p>
<h3><span class="mw-headline" id="Access_restrictions_for_room_creation">Access restrictions for room creation</span></h3>
<p>To restrict video conference room <b>creation</b> to authenticated users, you can do the following steps. Note that participants to the meeting are still not authenticated!
</p>
<p>Add authentication to the jitsi domain in prosody and add a new virtual host for guests:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/prosody/conf.d/jitsi.cfg.lua</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">-- change authentification of your domain
VirtualHost "<b>JITSIFQDN</b>"
    authentification = "internal_plain"

-- add guest virtual host to allow anonymous user to join your room
VirtualHost "guest.<b>JITSIFQDN</b>"
    authentication = "anonymous"
    c2s_require_encryption = false
    modules_enabled = {
        -- copy the content of the modules_enabled
        -- of the VirtualHost "<b>JITSIFQDN</b>"
        -- remove only the module "muc_lobby_rooms" of the list
        -- example:
        "bosh";
        "pubsub";
        "ping"; -- Enable mod_ping
        "speakerstats";
        "external_services";
        "conference_duration";
    }</pre>
<p>Edit the config file for <code>jitsi-meet</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/webapps/jitsi-meet/config.js</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">var config = {
  host: {
    // anonymous users need to use a dedicated muc without authentication
    anonymousdomain: 'guest.<b>JITSIFQDN'</b>,
  },
}</pre>
<p>Add authentication for <code>jicofo</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/jicofo/sip-communicator.properties</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">org.jitsi.jicofo.auth.URL=XMPP:<b>JITSIFQDN</b></pre>
<p>Then create the desired users via
</p>
<pre>prosodyctl register &lt;username&gt; <b>JITSIFQDN</b> &lt;password&gt;
</pre>
<p>Only if you are using <code>jigasi</code> (if you do not know, you do not) edit the SIP interface to not allow anonymous authentication:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/jitsi/jigasi/sip-communicator.properties</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">org.jitsi.jigasi.xmpp.acc.ANONYMOUS_AUTH=false</pre>
<p>These steps are taken from <a rel="nofollow" class="external text" href="https://github.com/jitsi/jicofo#secure-domain">this guide</a>.
</p>
<h3><span class="mw-headline" id="Access_restrictions_with_JWT_token">Access restrictions with JWT token</span></h3>
<p>To restrict video conference room <b>creation</b> to users authenticate with a JWT token (external service for authentication), you can do the following steps. Note that participants to the meeting are still not authenticated!
</p>
<p>Install those dependencies:
</p>
<pre>- <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/lua52-base64/">lua52-base64</a></span><sup><small>AUR</small></sup>
- <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lua52-basexx">lua52-basexx</a></span>
- <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/lua52-cjson/">lua52-cjson</a></span><sup><small>AUR</small></sup>
- <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/lua52-jwtjitsi/">lua52-jwtjitsi</a></span><sup><small>AUR</small></sup>
- <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lua52-luaossl">lua52-luaossl</a></span>
</pre>
<p>Add authentication to the jitsi domain in prosody and add a new virtual host for guests:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/prosody/conf.d/jitsi.cfg.lua</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">-- change authentification of your domain
VirtualHost "<b>JITSIFQDN</b>"
    authentification = "token"
    app_id = "APP_ID"
    app_secret = "APP_SECRET"
    allow_empty_token = false
    modules_enabled = {
        -- keep existing modules and add
        "presence_identity";
    }
    c2s_require_encryption = false

-- add guest virtual host to allow anonymous user to join your room
VirtualHost "guest.<b>JITSIFQDN</b>"
    authentication = "anonymous"
    c2s_require_encryption = false
    modules_enabled = {
        -- copy the content of the modules_enabled
        -- of the VirtualHost "<b>JITSIFQDN</b>"
        -- remove only the module "muc_lobby_rooms" of the list
        -- example:
        "bosh";
        "pubsub";
        "ping"; -- Enable mod_ping
        "speakerstats";
        "external_services";
        "conference_duration";
        "presence_identity";
    }

Component "conference.<b>JITSIFQDN</b>" "muc"
    modules_enabled = {
        -- add this to the modules_enabled
        "token_verification";
    }</pre>
<p>Edit the config file for <code>jitsi-meet</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/webapps/jitsi-meet/config.js</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">var config = {
  host: {
    // anonymous users need to use a dedicated muc without authentication
    anonymousdomain: 'guest.<b>JITSIFQDN'</b>,
  },
}</pre>
<p>Add authentication for <code>jicofo</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/jicofo/sip-communicator.properties</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">org.jitsi.jicofo.auth.URL=EXT_JWT:<b>JITSIFQDN</b></pre>
<p>Then <a href="/title/Restart" class="mw-redirect" title="Restart">restart</a> <code>prosody.service</code> (or <a href="/title/Start/enable" class="mw-redirect" title="Start/enable">start/enable</a> it if it was just installed).
And <a href="/title/Restart" class="mw-redirect" title="Restart">restart</a> <code>jicofo.service</code> (or <a href="/title/Start/enable" class="mw-redirect" title="Start/enable">start/enable</a> it if it was just installed).
</p>
<p>Now you can use a JWT token to authenticate an user.
</p>
<p>You can read the spec here: <a rel="nofollow" class="external text" href="https://github.com/jitsi/lib-jitsi-meet/blob/master/doc/tokens.md">Jitsi Meet Tokens</a>
</p>
<p>Here an quick example in nodejs:
</p>
<pre>const jwt = require('jsonwebtoken')
const crypto = require('crypto');
const words = require('random-words')
const yourDomain = "JITSIFQDN"
const appId = "APP_ID"
const appSecret = "APP_SECRET"
const userName = "YOUR_USERNAME"
const userEmail = "YOUR_EMAIL"

function getBody(domain, appId, name, email, room) {
    const md5Email = crypto.createHash('md5').update(email).digest("hex");
    const id = crypto.createHash('sha1').update(`${name}:${email}`).digest("hex")

    return {
        context: {
            user: {
                avatar: `https:/gravatar.com/avatar/${md5Email}`,
                name,
                email,
                id,
            },
            group: 'users'
        },
        "aud": "jitsi",
        "iss": appId,
        "sub": domain,
        room,
    }
}

const room = process.argv[2] || words({exactly: 3, join: '-'})

const data = getBody(
    yourDomain,
    appId,
    userName,
    userEmail,
    room,
)

const options = {
    algorithm: 'HS256',
    expiresIn: '2h',
}

const jwtToken = jwt.sign(data, appSecret, options)

console.log(`https://${yourDomain}/${room}?jwt=${jwtToken}`)
</pre>
<h3><span class="mw-headline" id="Log_evaluation">Log evaluation</span></h3>
<p>For a publicly available IP address the above config leads to a public video conference server. To monitor server use one can use systemd logging to get an at least vague idea of the usage:
</p>
<pre># journalctl --unit=jicofo.service --grep="created new focus" | cut -d" " -f7,8,16
</pre>
<p>shows all events of new chat room creation and
</p>
<pre># journalctl --unit=jicofo.service --grep="disposed conference for room" | cut -d" " -f7,8,16
</pre>
<p>shows all events of chat room destruction.
</p>
<p>Grepping for 'member' also gives you (anonymous!) information on the participants.
</p>
<h3><span class="mw-headline" id="Running_own_STUN_server">Running own STUN server</span></h3>
<p>By default, Jitsi Meet uses STUN servers from jitsi.org. You can easily run your own STUN server using <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=coturn">coturn</a></span> and setting it in jitsi-meet's config.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Check_your_logs">Check your logs</span></h3>
<p>You can <a href="/title/Stop" class="mw-redirect" title="Stop">stop</a> all service units (i.e., <code>prosody.service</code>, <code>jitsi-videobridge.service</code>, and <code>jicofo.service</code>), <a href="/title/Start" class="mw-redirect" title="Start">start</a> them one at a time, and follow new messages in the <a href="/title/Journal" class="mw-redirect" title="Journal">journal</a> for each service unit to see if something is wrong. Most problems are due to password or configuration issues.
</p>
<p>If you have an upgrade from a very different version, or you mess up with your config, start other. It will be faster than trying to findout which part is wrong.
</p>
<h3><span class="mw-headline" id="Ask_help_on_Matrix_rooms">Ask help on Matrix rooms</span></h3>
<p>You can join matrix rooms and ask help there:
</p>
<ul>
<li><a rel="nofollow" class="external text" href="https://matrix.to/#/#jitsimeet:celogeek.com?via=celogeek.com">Jitsi Meet Help on ArchLinux</a></li>
<li><a rel="nofollow" class="external text" href="https://matrix.to/#/#jitsimeet:matrix.org?via=matrix.org">Jitsi Meet help and testing</a></li>
</ul>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://jitsi.org/">Project homepage</a></li>
<li><a rel="nofollow" class="external text" href="https://community.jitsi.org/">Help community</a></li>
<li><a rel="nofollow" class="external text" href="https://github.com/jitsi/jitsi-meet/blob/master/doc/README.md">Official documentation</a></li>
<li><a rel="nofollow" class="external text" href="https://blog.celogeek.com/posts/linux/archlinux/2020-06-jitsi-meet-on-arch-linux/">Arch Linux tutorial for stable release with more details</a></li>
<li><a rel="nofollow" class="external text" href="https://blog.celogeek.com/posts/linux/archlinux/2021-02-jitsi-meet-nighly-on-arch-linux/">Arch Linux tutorial for nightly release with more details</a></li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="/title/Special:Categories" title="Special:Categories">Categories</a>: <ul>
<li><a href="/title/Category:Telephony" title="Category:Telephony">Telephony</a></li>
<li><a href="/title/Category:Voice_over_IP" title="Category:Voice over IP">Voice over IP</a></li>
</ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Jitsi-meet&amp;oldid=670519">https://wiki.archlinux.org/index.php?title=Jitsi-meet&amp;oldid=670519</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 11 May 2021, at 18:28.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="/title/ArchWiki:Privacy_policy" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="/title/ArchWiki:About" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="/title/ArchWiki:General_disclaimer" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
