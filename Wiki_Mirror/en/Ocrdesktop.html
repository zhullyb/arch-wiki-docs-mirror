<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Ocrdesktop - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Ocrdesktop rootpage-Ocrdesktop skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Ocrdesktop</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a><b>This article or section needs expansion.</b><a href="../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> This wiki page is a work in progress by chrys. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Ocrdesktop">Talk:Ocrdesktop#</a>)</div>
</div>
<p>OCRdesktop is a useful accessibility tool to grab content from the screen as text via OCR technology. 
</p>
<p>It takes an image of the current window or workspace, prepares it for better results and uses tesseract to recognize text on it.
The result is presented in a caret enabled text area, in a detailed list with coordinates and confidence or in the clipboard.
It also can emulate clicks on the text.
It consists of two main parts.
</p>
<p>1. The main window: This is a caret browsable text area with the recognized content. There is a menubar with many options. Focus the menu with <code>F10</code>
</p>
<p>2. The Macro executor: this is a window where you can choose to <i>Run</i>, <i>Unload</i>, <i>Load</i> or <i>Save</i> the current stored macros and preclicks. You also can skip running a macro by pressing the <i>cancel</i> button. (See <a href="#Macros_and_the_preclick_concept">#Macros and the preclick concept</a>).
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Installation"><span class="tocnumber">1</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Setup"><span class="tocnumber">2</span> <span class="toctext">Setup</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#Usage"><span class="tocnumber">3</span> <span class="toctext">Usage</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#View_Modes"><span class="tocnumber">3.1</span> <span class="toctext">View Modes</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#OCR_Language"><span class="tocnumber">3.2</span> <span class="toctext">OCR Language</span></a></li>
<li class="toclevel-2 tocsection-6">
<a href="#OCR_Options"><span class="tocnumber">3.3</span> <span class="toctext">OCR Options</span></a>
<ul>
<li class="toclevel-3 tocsection-7"><a href="#Invert"><span class="tocnumber">3.3.1</span> <span class="toctext">Invert</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="#Grayscale"><span class="tocnumber">3.3.2</span> <span class="toctext">Grayscale</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="#Barrier_Black_White_method"><span class="tocnumber">3.3.3</span> <span class="toctext">Barrier Black White method</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-10"><a href="#Help"><span class="tocnumber">3.4</span> <span class="toctext">Help</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Recognize_current_workspace"><span class="tocnumber">3.5</span> <span class="toctext">Recognize current workspace</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Emulate_mouse_events"><span class="tocnumber">3.6</span> <span class="toctext">Emulate mouse events</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Macros_and_the_preclick_concept"><span class="tocnumber">3.7</span> <span class="toctext">Macros and the preclick concept</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Emulate_keyboard_events"><span class="tocnumber">3.8</span> <span class="toctext">Emulate keyboard events</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Handle_Macros"><span class="tocnumber">3.9</span> <span class="toctext">Handle Macros</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Copy_to_clipboard"><span class="tocnumber">3.10</span> <span class="toctext">Copy to clipboard</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Debug_Mode"><span class="tocnumber">3.11</span> <span class="toctext">Debug Mode</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>Just <a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the package <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ocrdesktop/">ocrdesktop</a></span><sup><small>AUR</small></sup> from the <a href="../en/Arch_User_Repository.html" class="mw-redirect" title="AUR">AUR</a>.
Make sure that you have the corresponding tesseract-data-&lt;languagecode&gt; package for your language installed.
</p>
<h2><span class="mw-headline" id="Setup">Setup</span></h2>
<p>Assign the command <code>ocrdesktop</code> to a shortcut in your desktop environment.
You also can use parameters to expand the function of OCRdesktop. 
For languages other than english, you need to set your language code <code>ocrdesktop -l &lt;languagecode&gt;</code>.
Use the tesseract language codes for &lt;languagecode&gt;
</p>
<p>Basically, this should work in any desktop environment.
</p>
<p>In Gnome you can do this via the <i>Gnome Control Center</i> in the <i>Keyboard</i> window under the <i>Shortcuts</i> tab.
</p>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<p>Just press the assigned shortcut. With no parameters, OCRdesktop will recognize just the current window and present it in a caret enabled text area.
</p>
<h3><span class="mw-headline" id="View_Modes">View Modes</span></h3>
<p>OCRdesktop provides different view modes.
You can toggle between the modes with <code>Ctrl+v</code>
</p>
<ul>
<li>Browse mode: show all the text in a caret navigatable textbox. The view presents the layout of the currently recognized content. You can move the caret with the arrow keys.</li>
<li>Detail mode: This is basically a list where you can see details for any word on the Browse mode. I.e fontsize, fontcolor, position on the screen (X, Y), confidence of the OCR process and other attributes. Things like fontsize or color are approximate values because its calculated by the ocr image. Some characters are visually smaller than others, So there is a little difference.</li>
</ul>
<h3><span class="mw-headline" id="OCR_Language">OCR Language</span></h3>
<p>OCRdesktop is able to use all available tesseract languages with <code>-l &lt;language code&gt;</code>.
If no language is set. OCRdesktop will use english.
</p>
<pre>$ <i>ocrdesktop -l deu</i></pre>
<p>You can also set more than one OCR language
</p>
<pre>$ <i>ocrdesktop -l deu+eng</i></pre>
<h3><span class="mw-headline" id="OCR_Options">OCR Options</span></h3>
<p>OCRdesktop always upscales the current screenshot 3 times for better results.
Besides this, you can use different types of transformations before OCRdesktop attempts to recognize the text.
You can start OCRdesktop with the parameter you want, or select the options in the navigation window via the <i>OCR Options</i> submenu of the <i>OCRdesktop</i> menu. After selecting the options, press <code>F5</code> to recognize the text again. This is a little trial and error for better results. Autodetection may be be implemented in a later version.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> You can also combine different options.</div>
<h4><span class="mw-headline" id="Invert">Invert</span></h4>
<p>Inversion of the colours could lead to better results if the colours in the original image cause problems with the text recognition.
</p>
<pre>$ <i>ocrdesktop -i</i></pre>
<h4><span class="mw-headline" id="Grayscale">Grayscale</span></h4>
<p>Here the colour is removed overall. We get a range of different tones of gray, which could lead to less confusion of tesseract.
</p>
<pre>$ <i>ocrdesktop -g</i></pre>
<h4><span class="mw-headline" id="Barrier_Black_White_method">Barrier Black White method</span></h4>
<p>This may be the method that most often leads to the best results. Grayscale is always active.
The different tones of gray will break on a defined value between 0 (white) and 255 (black). Everything less than the defined point will be converted to black. A gray tone equal or greater is converted into white.
This leads to a clean image for OCR. No Colours, no noise, no grayscale, just black and white. With this type of image tesseract could also read really bright colour fonts (because they are converted into black)
The parameter <code>-b</code> activates this feature.
The parameter <code>-t &lt;barriervalue&gt;</code> sets the barrier value. &lt;barriervalue&gt; is a integer between 0 and 255. If <code>-t</code> is not set, 200 is the default value.
</p>
<pre>$ <i>ocrdesktop -b -t 180</i></pre>
<h3><span class="mw-headline" id="Help">Help</span></h3>
<p>You can see a little help and the available parameters if you enter the following in a terminal.
</p>
<pre>$ <i>ocrdesktop -h</i></pre>
<pre>$ <i>man ocrdesktop</i></pre>
<p>You can always mix different parameters.
</p>
<h3><span class="mw-headline" id="Recognize_current_workspace">Recognize current workspace</span></h3>
<p>If you do not want to restrict recognition to the current window, use the -d option. 
</p>
<pre>$ <i>ocrdesktop -d</i></pre>
<h3><span class="mw-headline" id="Emulate_mouse_events">Emulate mouse events</span></h3>
<p>You can emulate clicks on the word at the current cursor position via the <i>Interact</i> menu.
</p>
<p>Shortcuts:
</p>
<ul>
<li>Single left click (<code>Ctrl+l</code>): common for selecting/activating entry's</li>
<li>Double left click (<code>Ctrl+d</code>): common for opening entry's in the same window</li>
<li>Single right click (<code>Ctrl+r</code>): open the context menu for the object under the mouse</li>
<li>Single middle click (<code>Ctrl+m</code>): Usually opens an object in a new tab</li>
<li>Route the mouse over an Object (<code>Ctrl+t</code>): used for mouse over events like tool tips</li>
</ul>
<p>for doing a mouse operation immediately: Place the mouse on the word in the text area or list entry (in the list view) and press on the corresponding shortcut.
</p>
<h3><span class="mw-headline" id="Macros_and_the_preclick_concept">Macros and the preclick concept</span></h3>
<p>The concept of preclicks is not easy to understand at first, but it solves a really easy to understand problem.
</p>
<p>In most desktop environments, global shortcuts don't work while a menu is open, (for example the <i>file</i> menu in the menu bar at the top of most programs).
</p>
<p>Preclicks are basically macros that can be run before OCRdesktop takes its screen shot. This allows you to close all menus and let OCRdesktop click on the menu before it recognizes the window. Preclicks macros are really easy to use. In the <i>Interact</i> menu is a check box <i>Preclick</i> <code>Ctrl+p</code>. Set this check box and choose a mouse click that should be performed before OCRdesktop starts the next time, much the same as doing a normal mouse click emulation ( see <a href="#Emulate_mouse_events">#Emulate mouse events</a>). After emulating a mouse click, nothing will happen. 
Next time you run OCRdesktop, it will ask you what to do. You can press <i>Run</i>, so all stored clicks will execute. After that, OCRdesktop takes its screen shot for OCR (with the opened menu). If you now check the <i>Preclick</i> option again the second click will also be stored, (e.g. for opening a sub menu). You can save as many mouse operations as you want. Choose <i>Unload</i> in the macro window to erase the macro, so its lost. If you press <i>Cancel</i>, no mouse clicks are performed, but the main window opens. The macro will not be deleted and you will be asked next time you start OCRDesktop if you want to run your stored clicks.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> The active preclick macro file is stored under <code>~/.activeOCRMacro.ocrm</code>.</div>
<p>You can execute an existing macro file stored anywhere on the hard disk by using the <code>-m &lt;/path/to/macro/macroname.ocrm&gt;</code> option.
</p>
<pre>$ <i>ocrdesktop -m &lt;/path/to/macro/macroname.ocrm&gt;</i></pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong>  You can combine it with the <code>-n</code> option. OCRdesktop will just start the click sequence for you without any GUI.</div>
<h3><span class="mw-headline" id="Emulate_keyboard_events">Emulate keyboard events</span></h3>
<p>You can also fire keyboard shortcuts into the preclick macros. To enter the shortcut recording mode, press <code>Ctrl+k</code> or select the <i>Send Key</i> menue entry in the <i>Interact</i> menu.
Now every keystroke you type is appended to the currently active preclick macro. Pressing <code>F4</code> will leve the recording mode.
Leving the shortcut recording mode may have a delay of up to 2 seconds. This is a known issue.
</p>
<h3><span class="mw-headline" id="Handle_Macros">Handle Macros</span></h3>
<p>You can Save, Load, Unload or Run the current macro from the <i>macro</i> menu.
</p>
<ul>
<li>Save (<code>Ctrl+s</code>): save a macro on the filesystem, in case you need it more often.</li>
<li>Load (<code>Ctrl+o</code>): loading meens that this macro will be started the next time OCRdesktop runs</li>
<li>Unload (<code>Ctrl+u</code>): remove the macro from the buffer and prevent it from running. If you loaded the macro from the filesystem, the original macro file won´t be used</li>
<li>Run (<code>Ctrl+n</code>): close the window an just run the macro now</li>
</ul>
<h3><span class="mw-headline" id="Copy_to_clipboard">Copy to clipboard</span></h3>
<p>OCRdesktop provides the possibility to send the currently recognized content to the clipboard.
</p>
<p>This is easily done by specifying the <code>-c</code> option.
</p>
<pre>$ <i>ocrdesktop -c</i></pre>
<p>This opens the main window and sends the content to the clipboard.
If you dont want to open the main window, you could add the "no GUI" option <code>-n</code>.
</p>
<pre>$ <i>ocrdesktop -c -n</i></pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong>  you can always use the short term.
<pre>$ <i>ocrdesktop -cn</i></pre>
</div>
<p>Now you have the recognized text in the clipboard and no window appears.
</p>
<p>You can also press <code>Ctrl+b</code> when the GUI is open.
</p>
<h3><span class="mw-headline" id="Debug_Mode">Debug Mode</span></h3>
<p>You can start the debugmode with the <code>-v</code> option.
</p>
<pre>$ <i>ocrdesktop -v &gt;&gt; /tmp/debug.out</i></pre>
<p>The debug output is send to the std output. So you have to pipe it.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong>  OCRdesktop stores a copy of all images (original, upscaled and manipulated) in /tmp/ in debug mode</div>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Accessibility.html" title="Category:Accessibility">Accessibility</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Ocrdesktop&amp;oldid=572375">https://wiki.archlinux.org/index.php?title=Ocrdesktop&amp;oldid=572375</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 3 May 2019, at 05:07.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
