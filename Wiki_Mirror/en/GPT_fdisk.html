<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>GPT fdisk - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-GPT_fdisk rootpage-GPT_fdisk skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">GPT fdisk</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../en/Partitioning.html" title="Partitioning">Partitioning</a></li>
<li><a href="../en/Fdisk.html" title="Fdisk">fdisk</a></li>
<li><a href="../en/Parted.html" class="mw-redirect" title="GNU Parted">GNU Parted</a></li>
<li><a href="../en/Dd.html" title="Dd">dd</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://www.rodsbooks.com/gdisk/">GPT fdisk</a>—consisting of the <i>gdisk</i>, <i>cgdisk</i>, <i>sgdisk</i>, and <i>fixparts</i> programs—is a set of text-mode partitioning tools made by Rod Smith. They work on Globally Unique Identifier (GUID) Partition Table (GPT) disks, rather than on the older (and once more common) Master Boot Record (MBR) partition tables.
</p>
<p><i>gdisk</i>, <i>cgdisk</i> and <i>sgdisk</i> all have the same functionality but provide different user interfaces. <i>gdisk</i> is text-mode interactive, <i>sgdisk</i> is command-line, and <i>cgdisk</i> has a <a href="https://en.wikipedia.org/wiki/curses_(programming_library)" class="extiw" title="wikipedia:curses (programming library)">curses</a>-based interface. This article covers <span class="plainlinks archwiki-template-man" title="$ man 8 gdisk"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/gdisk.8">gdisk(8)</a></span> and <span class="plainlinks archwiki-template-man" title="$ man 8 sgdisk"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sgdisk.8">sgdisk(8)</a></span> utilities.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> 
<ul>
<li>For basic partitioning functionality with a text user interface, <span class="plainlinks archwiki-template-man" title="$ man 8 cgdisk"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/cgdisk.8">cgdisk(8)</a></span> can be used.</li>
<li>GPT fdisk website has detailed walkthroughs for <a rel="nofollow" class="external text" href="https://www.rodsbooks.com/gdisk/walkthrough.html">gdisk</a>, <a rel="nofollow" class="external text" href="https://www.rodsbooks.com/gdisk/cgdisk-walkthrough.html">cgdisk</a>, <a rel="nofollow" class="external text" href="https://www.rodsbooks.com/gdisk/sgdisk-walkthrough.html">sgdisk</a> and <a rel="nofollow" class="external text" href="https://www.rodsbooks.com/fixparts/">FixParts</a>.</li>
</ul>
</div>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Installation"><span class="tocnumber">1</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#List_partitions"><span class="tocnumber">2</span> <span class="toctext">List partitions</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Backup_and_restore_partition_table"><span class="tocnumber">3</span> <span class="toctext">Backup and restore partition table</span></a></li>
<li class="toclevel-1 tocsection-4">
<a href="#Create_a_partition_table_and_partitions"><span class="tocnumber">4</span> <span class="toctext">Create a partition table and partitions</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#Create_new_table"><span class="tocnumber">4.1</span> <span class="toctext">Create new table</span></a></li>
<li class="toclevel-2 tocsection-6">
<a href="#Create_partitions"><span class="tocnumber">4.2</span> <span class="toctext">Create partitions</span></a>
<ul>
<li class="toclevel-3 tocsection-7"><a href="#Partition_number"><span class="tocnumber">4.2.1</span> <span class="toctext">Partition number</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="#First_and_last_sector"><span class="tocnumber">4.2.2</span> <span class="toctext">First and last sector</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="#Partition_type"><span class="tocnumber">4.2.3</span> <span class="toctext">Partition type</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-10"><a href="#Write_changes_to_disk"><span class="tocnumber">4.3</span> <span class="toctext">Write changes to disk</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11">
<a href="#Tips_and_tricks"><span class="tocnumber">5</span> <span class="toctext">Tips and tricks</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#Convert_between_MBR_and_GPT"><span class="tocnumber">5.1</span> <span class="toctext">Convert between MBR and GPT</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Sort_partitions"><span class="tocnumber">5.2</span> <span class="toctext">Sort partitions</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Recover_GPT_header"><span class="tocnumber">5.3</span> <span class="toctext">Recover GPT header</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Expand_a_GPT_disk"><span class="tocnumber">5.4</span> <span class="toctext">Expand a GPT disk</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Prevent_GPT_partition_automounting"><span class="tocnumber">5.5</span> <span class="toctext">Prevent GPT partition automounting</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#gdisk_EFI_application"><span class="tocnumber">5.6</span> <span class="toctext">gdisk EFI application</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-18"><a href="#See_also"><span class="tocnumber">6</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gptfdisk">gptfdisk</a></span> package.
</p>
<h2><span class="mw-headline" id="List_partitions">List partitions</span></h2>
<p>To list partition tables and partitions on a <a href="../en/Device_file.html#Block_devices" class="mw-redirect" title="Block device">block device</a>, you can run the following, where device is a name like <code>/dev/sda</code>, <code>/dev/nvme0n1</code>, <code>/dev/mmcblk0</code>, etc.:
</p>
<pre># gdisk -l /dev/sda
</pre>
<p>or alternatively the same action using <i>sgdisk</i>:
</p>
<pre># sgdisk -p /dev/sda
</pre>
<h2><span class="mw-headline" id="Backup_and_restore_partition_table">Backup and restore partition table</span></h2>
<p>Before making changes to a disk, you may want to backup the partition table and partition scheme of the drive. You can also use a backup to copy the same partition layout to numerous drives.
</p>
<p>Using <i>sgdisk</i> you can create a binary backup consisting of the protective MBR, the main GPT header, the backup GPT header, and one copy of the partition table. The example below will save the partition table of <code>/dev/sda</code> to a file <code>sgdisk-sda.bin</code>:
</p>
<pre># sgdisk -b=sgdisk-sda.bin /dev/sda
</pre>
<p>You can later restore the backup by running:
</p>
<pre># sgdisk -l=sgdisk-sda.bin /dev/sda
</pre>
<p>If you want to clone your current device's partition layout (<code>/dev/sda</code> in this case) to another drive (<code>/dev/sdc</code>) run:
</p>
<pre># sgdisk -R=/dev/sdc /dev/sda
</pre>
<p>If both drives will be in the same computer, you need to randomize the disk and partition GUIDs:
</p>
<pre># sgdisk -G /dev/sdc
</pre>
<h2><span class="mw-headline" id="Create_a_partition_table_and_partitions">Create a partition table and partitions</span></h2>
<p>The first step to <a href="../en/Partitioning.html" title="Partitioning">partitioning</a> a disk is making a partition table. After that, the actual partitions are created according to the desired <a href="../en/Partitioning.html#Partition_scheme" class="mw-redirect" title="Partition scheme">partition scheme</a>.
</p>
<p>Before beginning, you may wish to <a href="#Backup_and_restore_partition_table">backup</a> your current partition table and scheme.
</p>
<p>The following shows how to use <i>gdisk</i> to perform both the creation of a partition table and the creation of the actual partitions. Alternatively, you may use the curses-based version called <i>cgdisk</i>; however, the following instructions do not apply to it. See <span class="plainlinks archwiki-template-man" title="$ man 8 cgdisk"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/cgdisk.8">cgdisk(8)</a></span> for its usage.
</p>
<p><i>gdisk</i> performs partition alignment automatically on a 2048 512-byte sector (1 MiB) block size base which should be compatible with all <a href="../en/Advanced_Format.html" title="Advanced Format">Advanced Format</a> HDDs and the vast majority of <a href="../en/Solid_state_drive.html" class="mw-redirect" title="SSD">SSDs</a> if not all.
</p>
<p>To use <i>gdisk</i>, run the program with the name of the <a href="../en/Device_file.html#Block_devices" class="mw-redirect" title="Block device">block device</a> you want to change/edit. This example uses <code>/dev/sda</code>:
</p>
<pre># gdisk /dev/sda
</pre>
<h3><span class="mw-headline" id="Create_new_table">Create new table</span></h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> If you create a new partition table on a disk with data on it, it will erase all the data on the disk. Make sure this is what you want to do.</div>
<p>To create a new <a href="../en/Partitioning.html#GUID_Partition_Table" class="mw-redirect" title="GUID Partition Table">GUID Partition Table</a> and clear all current partition data, type <code>o</code> at the prompt. Skip this step if the table you require has already been created.
</p>
<h3><span class="mw-headline" id="Create_partitions">Create partitions</span></h3>
<p>Create a new partition with the <code>n</code> command. You must enter the partition number, first sector, last sector and the partition type.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> See <a href="../en/Partitioning.html#Partition_scheme" title="Partitioning">Partitioning#Partition scheme</a> for considerations concerning the size and location of partitions.</div>
<h4><span class="mw-headline" id="Partition_number">Partition number</span></h4>
<p>A partition number is the number assigned to a partition, e.g. a partition with number <code>1</code> on a disk <code>/dev/sda</code> would be <code>/dev/sda1</code>. Partition numbers may not always match the order of partitions on disk, in which case they can be <a href="#Sort_partitions">sorted</a>.
</p>
<p>It is advised to choose the default number suggested by <i>gdisk</i>.
</p>
<h4><span class="mw-headline" id="First_and_last_sector">First and last sector</span></h4>
<p>The first and last sectors of the partition can be specified in sector numbers or as positions measured in kibibytes (<code>K</code>), mebibytes (<code>M</code>), gibibytes (<code>G</code>), tebibytes (<code>T</code>), or pebibytes (<code>P</code>);
</p>
<p>The position can be specified in:
</p>
<ul>
<li>absolute terms from the start of the disk. E.g. <code>40M</code> as a first sector specifies a position 40 MiB from the start of the disk.</li>
<li>relative terms by preceding the size with <code><b>+</b><i>size</i></code> or <code><b>-</b><i>size</i></code>. E.g. <code>+2G</code> to specify a point 2 GiB after the default start sector, or <code>-200M</code> to specify a point 200 MiB before the last available sector.</li>
</ul>
<p>Pressing the <code>Enter</code> key with no input specifies the default value, which is the start of the largest available block for the first sector and the end of the same block for the last sector.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> 
<ul>
<li>When partitioning it is always a good idea to specify partition sizes using relative terms with the <code>+<i>size{M,G,T,P}</i></code> notation and not use sizes smaller than 1 MiB. Such partitions will always be aligned according to the device properties.</li>
<li>Leave a 1 MiB free space somewhere in the first 2 TiB of the disk (e.g. by using <code>+1M</code> as the first sector of a partition) in case you ever need to create a <a href="../en/GRUB.html#GUID_Partition_Table_(GPT)_specific_instructions" class="mw-redirect" title="BIOS boot partition">BIOS boot partition</a>.</li>
</ul>
</div>
<h4><span class="mw-headline" id="Partition_type">Partition type</span></h4>
<p>Select the partition's type by entering gdisk's internal type code or specifying the <a href="https://en.wikipedia.org/wiki/GUID_Partition_Table#Partition_type_GUIDs" class="extiw" title="wikipedia:GUID Partition Table">partition type GUID</a> manually. The default, <code>Linux filesystem</code> (GUID <code>0FC63DAF-8483-4772-8E79-3D69D8477DE4</code>, gdisk's internal code <code>8300</code>), should be fine for most use cases.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> 
<ul>
<li>Press <code>L</code> to show gdisk's internal code list.</li>
<li>It is advised to follow the <a rel="nofollow" class="external text" href="https://systemd.io/DISCOVERABLE_PARTITIONS/">Discoverable Partitions Specification</a> since <span class="plainlinks archwiki-template-man" title="$ man 8 systemd-gpt-auto-generator"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-gpt-auto-generator.8">systemd-gpt-auto-generator(8)</a></span> will automount them. See <a href="#Prevent_GPT_partition_automounting">#Prevent GPT partition automounting</a> if you want to disable automounting for a partition.</li>
</ul>
</div>
<table class="wikitable">
<caption>Common partition types
</caption>
<tbody>
<tr>
<th>Partition type
</th>
<th>Mountpoint
</th>
<th>gdisk's <br>code
</th>
<th>
<a href="https://en.wikipedia.org/wiki/GUID_Partition_Table#Partition_type_GUIDs" class="extiw" title="wikipedia:GUID Partition Table">Partition type GUID</a>
</th>
</tr>
<tr>
<td>Linux filesystem
</td>
<td>Any
</td>
<td>
<code>8300</code>
</td>
<td>
<code>0FC63DAF-8483-4772-8E79-3D69D8477DE4</code>
</td>
</tr>
<tr>
<td>
<a href="../en/EFI_system_partition.html" title="EFI system partition">EFI system partition</a>
</td>
<td>Any<sup>1</sup>
</td>
<td>
<code>ef00</code>
</td>
<td>
<code>C12A7328-F81F-11D2-BA4B-00A0C93EC93B</code>
</td>
</tr>
<tr>
<td>
<a href="../en/GRUB.html#GUID_Partition_Table_(GPT)_specific_instructions" class="mw-redirect" title="BIOS boot partition">BIOS boot partition</a>
</td>
<td>None
</td>
<td>
<code>ef02</code>
</td>
<td>
<code>21686148-6449-6E6F-744E-656564454649</code>
</td>
</tr>
<tr>
<td>
<a href="../en/Partitioning.html#/" title="Partitioning">Linux x86-64 root (/)</a>
</td>
<td>
<code>/</code>
</td>
<td>
<code>8304</code>
</td>
<td>
<code>4F68BCE3-E8CD-4DB1-96E7-FBCAF984B709</code>
</td>
</tr>
<tr>
<td>
<a href="../en/Partitioning.html#Swap" title="Partitioning">Linux swap</a>
</td>
<td>
<code>[SWAP]</code>
</td>
<td>
<code>8200</code>
</td>
<td>
<code>0657FD6D-A4AB-43C4-84E5-0933C84B4F4F</code>
</td>
</tr>
<tr>
<td>
<a href="../en/Partitioning.html#/home" title="Partitioning">Linux /home</a>
</td>
<td>
<code>/home</code>
</td>
<td>
<code>8302</code>
</td>
<td>
<code>933AC7E1-2EB4-4F13-B844-0E14E2AEF915</code>
</td>
</tr>
<tr>
<td>
<a href="../en/Partitioning.html#Discrete_partitions" title="Partitioning">Linux /srv</a>
</td>
<td>
<code>/srv</code>
</td>
<td>
<code>8306</code>
</td>
<td>
<code>3B8F8425-20E0-4F3B-907F-1A25A76F98E8</code>
</td>
</tr>
<tr>
<td>
<a href="../en/Partitioning.html#/var" title="Partitioning">Linux /var</a>
</td>
<td>
<code>/var</code><sup>1</sup>
</td>
<td>
<code>8310</code>
</td>
<td>
<code>4D21B016-B534-45C2-A9FB-5C16E091FD2D</code>
</td>
</tr>
<tr>
<td>
<a href="../en/Partitioning.html#Discrete_partitions" title="Partitioning">Linux /var/tmp</a>
</td>
<td>
<code>/var/tmp</code><sup>1</sup>
</td>
<td>
<code>8311</code>
</td>
<td>
<code>7EC6F557-3BC5-4ACA-B293-16EF5DF639D1</code>
</td>
</tr>
<tr>
<td>
<a href="../en/Install_Arch_Linux_on_LVM.html#Create_partitions" title="Install Arch Linux on LVM">Linux LVM</a>
</td>
<td>Any
</td>
<td>
<code>8e00</code>
</td>
<td>
<code>E6D6D379-F507-44C2-A23C-238F2A3DF928</code>
</td>
</tr>
<tr>
<td>
<a href="../en/RAID.html#GUID_Partition_Table" title="RAID">Linux RAID</a>
</td>
<td>Any
</td>
<td>
<code>fd00</code>
</td>
<td>
<code>A19D880F-05FC-4D3B-A006-743F0F84911E</code>
</td>
</tr>
<tr>
<td>
<a href="../en/Dm-crypt/Drive_preparation.html#Physical_partitions" title="Dm-crypt/Drive preparation">Linux LUKS</a>
</td>
<td>Any
</td>
<td>
<code>8309</code>
</td>
<td>
<code>CA7D7CCB-63ED-4C53-861C-1742536059CC</code>
</td>
</tr>
<tr>
<td>
<a href="../en/Dm-crypt/Drive_preparation.html#Physical_partitions" title="Dm-crypt/Drive preparation">Linux dm-crypt</a>
</td>
<td>Any
</td>
<td>
<code>8308</code>
</td>
<td>
<code>7FFEC5C9-2D00-49B7-8941-3EA10A5586B7</code>
</td>
</tr>
</tbody>
</table>
<ol><li>
<span class="plainlinks archwiki-template-man" title="$ man 8 systemd-gpt-auto-generator"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-gpt-auto-generator.8">systemd-gpt-auto-generator(8)</a></span> will only automount the partition if specific conditions are met. See <a href="../en/Systemd.html#GPT_partition_automounting" title="Systemd">systemd#GPT partition automounting</a> for details.</li></ol>
<p>Repeat this procedure until you have the partitions you desire.
</p>
<h3><span class="mw-headline" id="Write_changes_to_disk">Write changes to disk</span></h3>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Use the command <code>c</code> to change a partition's name (<a href="../en/Persistent_block_device_naming.html#by-partlabel" class="mw-redirect" title="PARTLABEL">PARTLABEL</a>) for easy distinguishing.</div>
<p>Write the table to disk and exit via the <code>w</code> command.
</p>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="Convert_between_MBR_and_GPT">Convert between MBR and GPT</span></h3>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Read Rod Smith's <a rel="nofollow" class="external text" href="https://www.rodsbooks.com/gdisk/mbr2gpt.html">Converting to or from GPT</a> for more detailed information and walktrough.</div>
<p><i>gdisk</i>, <i>sgdisk</i> and <i>cgdisk</i> have the ability to convert MBR and <a href="https://en.wikipedia.org/wiki/BSD_disklabel" class="extiw" title="wikipedia:BSD disklabel">BSD disklabels</a> to GPT without data loss. Upon conversion, all the MBR primary partitions and the logical partitions become GPT partitions with the correct partition type GUIDs and Unique partition GUIDs created for each partition.
</p>
<p>After conversion, the <a href="../en/Arch_boot_process.html#Boot_loader" class="mw-redirect" title="Boot loader">boot loader</a> will need to be reinstalled to configure it to boot from GPT.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> 
<ul><li>GPT stores a secondary table at the end of disk. This data structure consumes 33 512-byte sectors (16.5 KiB) by default. MBR does not have a similar data structure at its end, which means that the last partition on an MBR disk sometimes extends to the very end of the disk and prevents complete conversion. If this happens to you, you must abandon the conversion and resize the final partition.</li></ul>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a><b>This article or section needs expansion.</b><a href="../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Provide a reference to the issue. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:GPT_fdisk">Talk:GPT fdisk#</a>)</div>
</div>
<ul><li>There are known corruption issues with the backup GPT on laptops that are Intel chipset based, and run in RAID mode. The solution is to use AHCI instead of RAID, if possible.</li></ul>
</div>
<p>To convert an MBR partition table to GPT using <i>sgdisk</i>, use the <code>-g</code>/<code>--mbrtogpt</code> option:
</p>
<pre># sgdisk -g /dev/sda
</pre>
<p>To convert GPT to MBR use the <code>-m</code>/<code>--gpttombr</code> option. Note that it is not possible to convert more than four partitions from GPT to MBR.
</p>
<pre># sgdisk -m /dev/sda
</pre>
<h3><span class="mw-headline" id="Sort_partitions">Sort partitions</span></h3>
<p>This applies for when a new partition is created in the space between two partitions or a partition is deleted. <code>/dev/sda</code> is used in this example.
</p>
<pre># sgdisk -s /dev/sda
</pre>
<p>After sorting the partitions if you are not using <a href="../en/Persistent_block_device_naming.html" title="Persistent block device naming">Persistent block device naming</a>, it might be required to adjust the <code>/etc/fstab</code> and/or the <code>/etc/crypttab</code> configuration files.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The kernel must read the new partition table for the partitions (e.g. <code>/dev/sda1</code>) to be usable. Reboot the system or tell the kernel to <a rel="nofollow" class="external text" href="https://serverfault.com/questions/36038/reread-partition-table-without-rebooting">reread the partition table</a>.</div>
<h3><span class="mw-headline" id="Recover_GPT_header">Recover GPT header</span></h3>
<p>In case main GPT header or backup GPT header gets damaged, you can recover one from the other with <i>gdisk</i>. <code>/dev/sda</code> is used in this example.
</p>
<pre># gdisk /dev/sda
</pre>
<p>choose <code>r</code> for recovery and transformation options (experts only). From there choose either
</p>
<ul>
<li>
<code>b</code>: use backup GPT header (rebuilding main)</li>
<li>
<code>d</code>: use main GPT header (rebuilding backup)</li>
</ul>
<p>When done write the table to disk and exit via the <code>w</code> command.
</p>
<h3><span class="mw-headline" id="Expand_a_GPT_disk">Expand a GPT disk</span></h3>
<p>After enlarging a disk (e.g. in hardware <a href="../en/RAID.html" title="RAID">RAID</a> or a <a href="../en/Category:Virtualization.html" class="mw-redirect" title="Virtual machine">virtual machine</a> disk) the newly added free space will not be immediately usable since GPT keeps data at the end of the disk. You must relocate the backup GPT header to the new end of the disk.
</p>
<p>Run <i>sgdisk</i> with the option <code>-e</code>/<code>--move-second-header</code>, e.g.:
</p>
<pre># sgdisk -e /dev/sda
</pre>
<p>Afterwards <a href="#List_partitions">print the partition table</a>; the total free space should now be increased.
</p>
<h3><span class="mw-headline" id="Prevent_GPT_partition_automounting">Prevent GPT partition automounting</span></h3>
<p><span class="plainlinks archwiki-template-man" title="$ man 8 systemd-gpt-auto-generator"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-gpt-auto-generator.8">systemd-gpt-auto-generator(8)</a></span> will automount partitions following the <a rel="nofollow" class="external text" href="https://systemd.io/DISCOVERABLE_PARTITIONS/">Discoverable Partitions Specification</a>. Sometimes that may not be desirable.
</p>
<p>The automounting can be disabled by setting the <a href="https://en.wikipedia.org/wiki/GUID_Partition_Table#Partition_entries_.28LBA_2-33.29" class="extiw" title="wikipedia:GUID Partition Table">partition attribute</a> <code>63</code> "do not automount" on the partition.
</p>
<p>Start <i>gdisk</i>, e.g.:
</p>
<pre># gdisk /dev/sda
</pre>
<p>Press <code>p</code> to print the partition table and take note of the partition number(s) of the for which you want to disable automounting.
</p>
<p>Press <code>x</code> <i>extra functionality (experts only)</i>.
</p>
<p>Press <code>a</code> <i>set attributes</i>. Input the partition number and set the attribute <code>63</code>. Under <code>Set fields are:</code> it should now show <code>63 (do not automount)</code>. Press <code>Enter</code> to end attribute changing. Repeat this for all partitions you want to prevent from automounting.
</p>
<p>When done write the table to disk and exit via the <code>w</code> command.
</p>
<p>Alternatively using <i>sgdisk</i>, the attribute can be set using the <code>-A</code>/<code>--attributes=</code> option; see <span class="plainlinks archwiki-template-man" title="$ man 8 sgdisk"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sgdisk.8">sgdisk(8)</a></span> for usage. For example, to set partition attribute <code>63</code> "do not automount" on <code>/dev/sda2</code> run:
</p>
<pre># sgdisk -A 2:set:63 /dev/sda
</pre>
<h3><span class="mw-headline" id="gdisk_EFI_application">gdisk EFI application</span></h3>
<p>There is no package for the EFI version of gdisk, but Rod Smith provides a prebuilt gdisk EFI binary on <a rel="nofollow" class="external text" href="https://sourceforge.net/projects/gptfdisk/files/gptfdisk/">SourceForge</a>. Download <code>gdisk-efi-*.zip</code> and extract the archive. To use it, copy <code>gdisk_x64.efi</code> to the <a href="../en/EFI_system_partition.html" title="EFI system partition">EFI system partition</a> and launch it from your <a href="../en/Arch_boot_process.html#Boot_loader" class="mw-redirect" title="Boot loader">boot loader</a> or <a href="../en/Unified_Extensible_Firmware_Interface.html#UEFI_Shell" title="Unified Extensible Firmware Interface">UEFI Shell</a>.
</p>
<p><i>gdisk_x64.efi</i> allows you to edit the partition table before the operating system is even booted. It is used the same way as the <i>gdisk</i> binary on Linux.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> <i>gdisk_x64.efi</i> cannot access the file system, thus it cannot backup the partition table to a file or restore it from a backup file.</div>
<p>See <a rel="nofollow" class="external text" href="https://sourceforge.net/p/gptfdisk/code/ci/master/tree/README-efi.txt">README-efi.txt</a> for more information.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li>
<a rel="nofollow" class="external text" href="https://www.rodsbooks.com/gdisk/index.html">GPT fdisk Tutorial</a> - offical webpage of GPT fdisk with detailed walkthroughs.</li>
<li><a rel="nofollow" class="external text" href="https://sourceforge.net/projects/gptfdisk/">GPT fdisk's SourceForge page</a></li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:File_systems.html" title="Category:File systems">File systems</a></li>
<li><a href="../en/Category:System_recovery.html" title="Category:System recovery">System recovery</a></li>
<li><a href="../en/Category:Commands.html" title="Category:Commands">Commands</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=GPT_fdisk&amp;oldid=637866">https://wiki.archlinux.org/index.php?title=GPT_fdisk&amp;oldid=637866</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 13 October 2020, at 18:11.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
