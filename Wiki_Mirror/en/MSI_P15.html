<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>MSI P15 - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-MSI_P15 rootpage-MSI_P15 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">MSI P15</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a><b>This article or section does not follow the <a href="../en/Help:Laptop_page_guidelines.html" title="Help:Laptop page guidelines">Laptop page guidelines</a>.</b><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Needs a proper hardware and function keys table (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:MSI_P15">Talk:MSI P15#</a>)</div>
</div>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Configuration"><span class="tocnumber">2</span> <span class="toctext">Configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#BIOS"><span class="tocnumber">2.1</span> <span class="toctext">BIOS</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Nvidia"><span class="tocnumber">2.2</span> <span class="toctext">Nvidia</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Wi-Fi"><span class="tocnumber">2.3</span> <span class="toctext">Wi-Fi</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Webcam"><span class="tocnumber">2.4</span> <span class="toctext">Webcam</span></a></li>
<li class="toclevel-2 tocsection-7">
<a href="#Power_Management"><span class="tocnumber">2.5</span> <span class="toctext">Power Management</span></a>
<ul>
<li class="toclevel-3 tocsection-8"><a href="#Power_Saving"><span class="tocnumber">2.5.1</span> <span class="toctext">Power Saving</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="#Undervolting"><span class="tocnumber">2.5.2</span> <span class="toctext">Undervolting</span></a></li>
<li class="toclevel-3 tocsection-10"><a href="#Turbo_Boost"><span class="tocnumber">2.5.3</span> <span class="toctext">Turbo Boost</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-11"><a href="#Fan"><span class="tocnumber">2.6</span> <span class="toctext">Fan</span></a></li>
<li class="toclevel-2 tocsection-12">
<a href="#Keyboard"><span class="tocnumber">2.7</span> <span class="toctext">Keyboard</span></a>
<ul>
<li class="toclevel-3 tocsection-13"><a href="#Fn_Keys"><span class="tocnumber">2.7.1</span> <span class="toctext">Fn Keys</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#Home_and_End_buttons"><span class="tocnumber">2.7.2</span> <span class="toctext">Home and End buttons</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#Fingerprint_Sensor"><span class="tocnumber">2.7.3</span> <span class="toctext">Fingerprint Sensor</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="#Zsh"><span class="tocnumber">2.7.4</span> <span class="toctext">Zsh</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-17">
<a href="#Issues"><span class="tocnumber">3</span> <span class="toctext">Issues</span></a>
<ul>
<li class="toclevel-2 tocsection-18"><a href="#Hibernation"><span class="tocnumber">3.1</span> <span class="toctext">Hibernation</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Introduction">Introduction</span></h2>
<p>Also known as Prestige 15 or A10SC, this laptop is part of the MSI Prestige series for creators. Depending on the configuration, it can offer up to 64GB DDR4, a UHD IPS display (or FHD IPS 60hz matte display), 2 slots Nvme (one PCIe 2x, the oter can run both PCIe 2x/M2 Sata drives) and up to 16h on battery. Other notable features are the Intel Core i7 10710U, for which the TDP has been increased from 15W (as described on <a rel="nofollow" class="external text" href="https://ark.intel.com/content/www/us/en/ark/products/196448/intel-core-i7-10710u-processor-12m-cache-up-to-4-70-ghz.html">ARK</a> to 44W. Regarding the graphics, the Nvidia 1650 Max-Q does not have any active output, instead this is off-loaded to the iGPU.
</p>
<p>In general, the laptop works out of the box with Linux, but the fingerprint reader does not. Due to this, there is the <a rel="nofollow" class="external text" href="https://github.com/nmikhailov/Validity90">Validity90</a> project on GitHub to port the Synaptics 06cb:009b device to Linux.
</p>
<p>Please also note that by manufacturing this laptop tends to overheat under high load, and the installation helps to mitigate this.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  Many of the info present here have been taken from <a rel="nofollow" class="external autonumber" href="https://github.com/effeffe/effeffe.github.io/blob/master/_drafts/2020-04-19-P15.md">[1]</a>
</div>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<h3><span class="mw-headline" id="BIOS">BIOS</span></h3>
<p>It can be accessed by pressing Del button at boot. In particular, SecureBoot needs to be disabled at first startup, but it can be configured later. This laptop supports SecureBoot keys reset to factory and custom keys install.
To access advanced options in bios, press R_alt+L_ctrl+L_shift+F2 after entering bios.
</p>
<h3><span class="mw-headline" id="Nvidia">Nvidia</span></h3>
<p>The graphics card work well with <a href="../en/Bumblebee.html" title="Bumblebee">Bumblebee</a> and the <a href="../en/NVIDIA.html" title="NVIDIA">NVIDIA</a> proprietary driver.
</p>
<h3><span class="mw-headline" id="Wi-Fi">Wi-Fi</span></h3>
<p>The Wi-Fi card works out of the box. Sometimes it gets stuck on startup and needs reset, which can also be accomplished by reloading all the iwlwifi, iwlmvm and restarting wpa_supplicant.
</p>
<p>Also, the wifi card is recognised by lspci as an Intel Corporation Wireless-AC 9462 instead of an AX201. Nevertheless, the firmware loaded seems to be the right one as proved by dmesg:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ dmesg | grep iwlwifi</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[    3.997732] iwlwifi 0000:00:14.3: enabling device (0000 -&gt; 0002)
[    4.002800] iwlwifi 0000:00:14.3: Direct firmware load for iwlwifi-QuZ-a0-hr-b0-52.ucode failed with error -2
[    4.002817] iwlwifi 0000:00:14.3: Direct firmware load for iwlwifi-QuZ-a0-hr-b0-51.ucode failed with error -2
[    4.002831] iwlwifi 0000:00:14.3: Direct firmware load for iwlwifi-QuZ-a0-hr-b0-50.ucode failed with error -2
[    4.002846] iwlwifi 0000:00:14.3: Direct firmware load for iwlwifi-QuZ-a0-hr-b0-49.ucode failed with error -2
[    4.005724] iwlwifi 0000:00:14.3: TLV_FW_FSEQ_VERSION: FSEQ Version: 43.2.23.17
[    4.005727] iwlwifi 0000:00:14.3: Found debug destination: EXTERNAL_DRAM
[    4.005728] iwlwifi 0000:00:14.3: Found debug configuration: 0
[    4.005889] iwlwifi 0000:00:14.3: loaded firmware version 48.4fa0041f.0 QuZ-a0-hr-b0-48.ucode op_mode iwlmvm
[    4.155813] iwlwifi 0000:00:14.3: Detected Intel(R) Wi-Fi 6 AX201 160MHz, REV=0x354
[    4.163604] iwlwifi 0000:00:14.3: Applying debug destination EXTERNAL_DRAM
[    4.164048] iwlwifi 0000:00:14.3: Allocated 0x00400000 bytes for firmware monitor.
[    4.308333] iwlwifi 0000:00:14.3: base HW address: 0c:dd:24:09:e7:0f
[    4.531870] iwlwifi 0000:00:14.3 wlo1: renamed from wlan0
[    7.166796] iwlwifi 0000:00:14.3: Applying debug destination EXTERNAL_DRAM
[    7.311487] iwlwifi 0000:00:14.3: FW already configured (0) - re-configuring
[    7.340051] iwlwifi 0000:00:14.3: Applying debug destination EXTERNAL_DRAM
[    7.483555] iwlwifi 0000:00:14.3: FW already configured (0) - re-configuring
[ 2523.030392] iwlwifi 0000:00:14.3: Applying debug destination EXTERNAL_DRAM
[ 2523.181385] iwlwifi 0000:00:14.3: FW already configured (0) - re-configuring
[ 9593.758412] iwlwifi 0000:00:14.3: Applying debug destination EXTERNAL_DRAM
[ 9593.910136] iwlwifi 0000:00:14.3: FW already configured (0) - re-configuring
[12141.011392] iwlwifi 0000:00:14.3: Applying debug destination EXTERNAL_DRAM
[12141.164290] iwlwifi 0000:00:14.3: FW already configured (0) - re-configuring
[12182.700616] iwlwifi 0000:00:14.3: Applying debug destination EXTERNAL_DRAM
[12182.853009] iwlwifi 0000:00:14.3: FW already configured (0) - re-configuring
</pre>
<h3><span class="mw-headline" id="Webcam">Webcam</span></h3>
<p>The laptop has a keyboard switch that dis/connect the webcam from the laptop. This can be triggered by the Fn key F5.
</p>
<h3><span class="mw-headline" id="Power_Management">Power Management</span></h3>
<p>The battery indicator works, as well as the charge.
It is suggested to limit the charging power using <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/isw/">isw</a></span><sup><small>AUR</small></sup> and setting <code>ec_sys.write_support=1</code> as kernel parameter to write onto the EC.
</p>
<h4><span class="mw-headline" id="Power_Saving">Power Saving</span></h4>
<p>For power saving options, please refer to TLP. Also, analysing powersave options as given by powertop can be useful, but the Nvidia powersave option must not be enabled together with bumblebee and bbswitch. So, avoid doing this.
</p>
<h4><span class="mw-headline" id="Undervolting">Undervolting</span></h4>
<p>Undervolting is quite recommended on this laptop, and it needs to use the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=intel-undervolt">intel-undervolt</a></span> package. Depending on the processor, it can reach up to -150mV, but -100mV should work on any configuration.
Note that the laptop tends to go unstable on battery when undervolted, so enabling the undervolt only on AC can be a good solution.
</p>
<h4><span class="mw-headline" id="Turbo_Boost">Turbo Boost</span></h4>
<p>Turbo boost can be enabled and disabled by the intel PS state system class <code>/sys/devices/system/cpu/intel_pstate/no_turbo</code>. This can be achieved editing the configuration of <a href="../en/TLP.html" title="TLP">TLP</a> in <code>/etc/tlp.conf</code> by setting <code>CPU_BOOST_ON_BAT=0</code>.
</p>
<p>Please bear in mind that by doing this the CPU speed will be capped at 1100MHz, possibly getting an unresponsive device.
</p>
<h3><span class="mw-headline" id="Fan">Fan</span></h3>
<p>As written in <a href="#Power_Management">#Power Management</a>, use the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/isw/">isw</a></span><sup><small>AUR</small></sup> package to manage this. Please refer to the <a rel="nofollow" class="external text" href="https://github.com/YoyPa/isw">GitHub Page</a> and to the configuration file in <code>/etc/isw.conf</code> to manage the fan profile. This should correspond to the 16S3EMS1 profile. First you need to add your profile (16S3EMS1) to the <code>/etc/isw.conf</code> file from the github one (at this time it wasn't there). After that you need to add <code>RUB_CMDLINE_LINUX_DEFAULT="quiet ec_sys.write_support=1"</code> to the <code>/etc/default/grub</code>. Then a service can be enabled and started to automatically apply the edited fan profile using <code>systemctl enable --now isw@16S3EMS1.service</code>. Please bear in mind that reducing the fan speed can cause overheating, as well as using a too high speed for a given temperature. Also, when using bbswitch and dGPU switching methods, the dGPU fan is set to the minimum by the profile, yet this also dissipate heat from the CPU. It is then necessary not to use a too low speed for the minimum temperature profile.
Also, the Cooler boost can be enabled via <code># isw -b on</code>, which cause both the fans to ramp up to 100% speed.
</p>
<h3><span class="mw-headline" id="Keyboard">Keyboard</span></h3>
<h4><span class="mw-headline" id="Fn_Keys">Fn Keys</span></h4>
<p>All the Fn keys should work out of the box, but <code>Fn12</code>, <code>Fn4</code>, <code>Fn5</code> and <code>Fn7</code>. The latter does not send an Fn input, but rather the proper <code>F7</code> key, so this can be easily assigned.
About the other Fn keys, <code>Fn+F4</code> maps as the keycode 93, so it can be assigned to its original function (touchpad toggle) with <a href="../en/Xmodmap.html" title="Xmodmap">xmodmap</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"> ~/.Xmodmap</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">keycode  93 = XF86TouchpadToggle NoSymbol XF86TouchpadToggle</pre>
<p>About <code>Fn5</code> and <code>Fn12</code>, these send a keycode, and needs to be configured asd described in <a href="../en/Map_scancodes_to_keycodes.html" title="Map scancodes to keycodes">Map scancodes to keycodes</a> using <code>udev</code> instead of <code>setkeycodes</code>, as the latter does not seem to work properly. This is achieved modifying the file <code>/lib/udev/hwdb.d/60-keyboard.hwdb</code> or otherwise, adding at the end of the <code># Micro-Star</code> section the followings:
</p>
<pre>evdev:atkbd:dmi:bvn*:bvr*:bd*:svnMicro-Star*:pn*A10SC*:pvr*
 KEYBOARD_KEY_f1=f20
 KEYBOARD_KEY_f2=f21
</pre>
<p>The microphone mute button should now work out of the box, but the rotate screen one does need a script that toggles the rotation. This can be accomplished by this script
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">toggle_rotation.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh
# This shell script is PUBLIC DOMAIN. You may do whatever you want with it.

TOGGLE=/tmp/.toggle

if [ ! -e $TOGGLE ]; then
    touch $TOGGLE
    xrandr -o inverted
else
    rm $TOGGLE
    xrandr -o normal
fi
</pre>
<p>which will need to be saved somewhere with execution permissions, then added to the shortcut menu in the currently used Desktop Environment and lastly enabled to be triggered by <code>Fn12</code>. Afterwards, please update the hardware database by running <code>systemd-hwdb update &amp;&amp; udevadm trigger</code> as root.
</p>
<h4><span class="mw-headline" id="Home_and_End_buttons">Home and End buttons</span></h4>
<p>These buttons are mapped to <code>AltGr+PgUp</code> and <code>AltGr+PgDown</code> respectively. A helpful solution is to modify the current layout in <code>/usr/share/X11/xkb/symbols/$LAYOUT</code>, where LAYOUT is the current keyboard layout. This is accomplished by writing the following two lines in the default section of the file:
</p>
<pre>   key &lt;PGUP&gt;  { [     Prior,      Prior,         Home,    Home      ] };
   key &lt;PGDN&gt;  { [      Next,       Next,          End,    End       ] };
</pre>
<h4><span class="mw-headline" id="Fingerprint_Sensor">Fingerprint Sensor</span></h4>
<p>The fingerprint sensor implementation is not currently functioning but there are some promising projects.
</p>
<p><a rel="nofollow" class="external text" href="https://github.com/uunicorn/python-validity">python-validity</a> and <a rel="nofollow" class="external text" href="https://github.com/tester1969/pam-validity">pam-validity</a>.
</p>
<p>There is also the <a rel="nofollow" class="external text" href="https://github.com/nmikhailov/Validity90">Validity90</a> project on GitHub to port the Synaptics 06cb:009b device to Linux - but this project hasn't seen work in years.
</p>
<h4><span class="mw-headline" id="Zsh">Zsh</span></h4>
<p>The buttons home, end, page up and page down are acquired via a non-standard characters sequence. If the keyboard layout has been modified as described above, it is possible to add these lines to <code>.zshrc</code>:
</p>
<pre>bindkey  "^[[5~"    history-beginning-search-backward #PgUp
bindkey  "^[[6~"  history-beginning-search-forward #PgDown
bindkey  "^[[1;1H"   beginning-of-line #Home
bindkey  "^[[1;1F"   end-of-line #End
</pre>
<p>Otherwise the last two lines (Home and End) have to be replaced by these:
</p>
<pre>bindkey  "^[[5;1~"  beginning-of-line #Home
bindkey  "^[[6;1~"   end-of-line #End
</pre>
<h2><span class="mw-headline" id="Issues">Issues</span></h2>
<h3><span class="mw-headline" id="Hibernation">Hibernation</span></h3>
<p>If after hibernation the laptop does not power off but reboots, it is necessary to modify <code>/etc/systemd/sleep.conf</code> to the following:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/sleep.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">HibernateMode=shutdown</pre>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:MSI.html" title="Category:MSI">MSI</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Laptop_style.html" title="Category:Pages or sections flagged with Template:Laptop style">Pages or sections flagged with Template:Laptop style</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=MSI_P15&amp;oldid=654832">https://wiki.archlinux.org/index.php?title=MSI_P15&amp;oldid=654832</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 14 March 2021, at 01:25.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
