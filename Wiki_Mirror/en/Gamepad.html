<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Gamepad - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Gamepad rootpage-Gamepad skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Gamepad</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<p>Many gamepads are working out-of-the-box nowadays, but there are still many potential problems and sources for errors since gamepad support in applications varies by a lot.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Gamepad_input_systems"><span class="tocnumber">1</span> <span class="toctext">Gamepad input systems</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Determining_which_modules_you_need"><span class="tocnumber">2</span> <span class="toctext">Determining which modules you need</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Loading_the_modules_for_analogue_devices"><span class="tocnumber">2.1</span> <span class="toctext">Loading the modules for analogue devices</span></a></li>
<li class="toclevel-2 tocsection-4">
<a href="#USB_gamepads"><span class="tocnumber">2.2</span> <span class="toctext">USB gamepads</span></a>
<ul>
<li class="toclevel-3 tocsection-5"><a href="#Troubleshooting"><span class="tocnumber">2.2.1</span> <span class="toctext">Troubleshooting</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-6">
<a href="#Testing_your_configuration"><span class="tocnumber">3</span> <span class="toctext">Testing your configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#Joystick_API"><span class="tocnumber">3.1</span> <span class="toctext">Joystick API</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#evdev_API"><span class="tocnumber">3.2</span> <span class="toctext">evdev API</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#HTML5_Gamepad_API"><span class="tocnumber">3.3</span> <span class="toctext">HTML5 Gamepad API</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10">
<a href="#Setting_up_deadzones_and_calibration"><span class="tocnumber">4</span> <span class="toctext">Setting up deadzones and calibration</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#Wine_deadzones"><span class="tocnumber">4.1</span> <span class="toctext">Wine deadzones</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Xorg_deadzones"><span class="tocnumber">4.2</span> <span class="toctext">Xorg deadzones</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Joystick_API_deadzones"><span class="tocnumber">4.3</span> <span class="toctext">Joystick API deadzones</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#evdev_API_deadzones"><span class="tocnumber">4.4</span> <span class="toctext">evdev API deadzones</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Configuring_curves_and_responsiveness"><span class="tocnumber">4.5</span> <span class="toctext">Configuring curves and responsiveness</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-16"><a href="#Disable_joystick_from_controlling_mouse"><span class="tocnumber">5</span> <span class="toctext">Disable joystick from controlling mouse</span></a></li>
<li class="toclevel-1 tocsection-17">
<a href="#Using_gamepad_to_send_keystrokes"><span class="tocnumber">6</span> <span class="toctext">Using gamepad to send keystrokes</span></a>
<ul>
<li class="toclevel-2 tocsection-18"><a href="#Xorg_configuration_example"><span class="tocnumber">6.1</span> <span class="toctext">Xorg configuration example</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-19">
<a href="#Specific_devices"><span class="tocnumber">7</span> <span class="toctext">Specific devices</span></a>
<ul>
<li class="toclevel-2 tocsection-20"><a href="#Dance_pads"><span class="tocnumber">7.1</span> <span class="toctext">Dance pads</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#Logitech_Thunderpad_Digital"><span class="tocnumber">7.2</span> <span class="toctext">Logitech Thunderpad Digital</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#Nintendo_Gamecube_Controller"><span class="tocnumber">7.3</span> <span class="toctext">Nintendo Gamecube Controller</span></a></li>
<li class="toclevel-2 tocsection-23">
<a href="#Nintendo_Switch_Pro_Controller_and_Joy-Cons"><span class="tocnumber">7.4</span> <span class="toctext">Nintendo Switch Pro Controller and Joy-Cons</span></a>
<ul>
<li class="toclevel-3 tocsection-24">
<a href="#Kernel_Nintendo_HID_Driver"><span class="tocnumber">7.4.1</span> <span class="toctext">Kernel Nintendo HID Driver</span></a>
<ul>
<li class="toclevel-4 tocsection-25"><a href="#joycond_Userspace_Daemon"><span class="tocnumber">7.4.1.1</span> <span class="toctext">joycond Userspace Daemon</span></a></li>
<li class="toclevel-4 tocsection-26"><a href="#Using_hid-nintendo_with_Steam_Games"><span class="tocnumber">7.4.1.2</span> <span class="toctext">Using hid-nintendo with Steam Games</span></a></li>
<li class="toclevel-4 tocsection-27"><a href="#Using_hid-nintendo_with_SDL2_Games"><span class="tocnumber">7.4.1.3</span> <span class="toctext">Using hid-nintendo with SDL2 Games</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-28"><a href="#Dolphin_(Gamecube_Controller_Emulation)"><span class="tocnumber">7.4.2</span> <span class="toctext">Dolphin (Gamecube Controller Emulation)</span></a></li>
<li class="toclevel-3 tocsection-29"><a href="#Steam"><span class="tocnumber">7.4.3</span> <span class="toctext">Steam</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-30">
<a href="#iPEGA-9017s_and_other_Bluetooth_gamepads"><span class="tocnumber">7.5</span> <span class="toctext">iPEGA-9017s and other Bluetooth gamepads</span></a>
<ul>
<li class="toclevel-3 tocsection-31"><a href="#iPEGA-9068_and_9087"><span class="tocnumber">7.5.1</span> <span class="toctext">iPEGA-9068 and 9087</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-32">
<a href="#Steam_Controller"><span class="tocnumber">7.6</span> <span class="toctext">Steam Controller</span></a>
<ul>
<li class="toclevel-3 tocsection-33"><a href="#Wine"><span class="tocnumber">7.6.1</span> <span class="toctext">Wine</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-34">
<a href="#Xbox_360_controller"><span class="tocnumber">7.7</span> <span class="toctext">Xbox 360 controller</span></a>
<ul>
<li class="toclevel-3 tocsection-35"><a href="#SteamOS_xpad"><span class="tocnumber">7.7.1</span> <span class="toctext">SteamOS xpad</span></a></li>
<li class="toclevel-3 tocsection-36">
<a href="#xboxdrv"><span class="tocnumber">7.7.2</span> <span class="toctext">xboxdrv</span></a>
<ul>
<li class="toclevel-4 tocsection-37"><a href="#Multiple_controllers"><span class="tocnumber">7.7.2.1</span> <span class="toctext">Multiple controllers</span></a></li>
<li class="toclevel-4 tocsection-38"><a href="#Mimic_Xbox_360_controller_with_other_controllers"><span class="tocnumber">7.7.2.2</span> <span class="toctext">Mimic Xbox 360 controller with other controllers</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-39"><a href="#Using_generic/clone_controllers"><span class="tocnumber">7.7.3</span> <span class="toctext">Using generic/clone controllers</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-40">
<a href="#Xbox_Wireless_Controller_/_Xbox_One_Wireless_Controller"><span class="tocnumber">7.8</span> <span class="toctext">Xbox Wireless Controller / Xbox One Wireless Controller</span></a>
<ul>
<li class="toclevel-3 tocsection-41"><a href="#Connect_Xbox_Wireless_Controller_with_usb_cable"><span class="tocnumber">7.8.1</span> <span class="toctext">Connect Xbox Wireless Controller with usb cable</span></a></li>
<li class="toclevel-3 tocsection-42">
<a href="#Connect_Xbox_Wireless_Controller_with_Bluetooth"><span class="tocnumber">7.8.2</span> <span class="toctext">Connect Xbox Wireless Controller with Bluetooth</span></a>
<ul>
<li class="toclevel-4 tocsection-43"><a href="#xpadneo"><span class="tocnumber">7.8.2.1</span> <span class="toctext">xpadneo</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-44">
<a href="#Connect_Xbox_Wireless_Controller_with_Microsoft_Xbox_Wireless_Adapter"><span class="tocnumber">7.8.3</span> <span class="toctext">Connect Xbox Wireless Controller with Microsoft Xbox Wireless Adapter</span></a>
<ul>
<li class="toclevel-4 tocsection-45"><a href="#xow"><span class="tocnumber">7.8.3.1</span> <span class="toctext">xow</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2 tocsection-46"><a href="#Logitech_Dual_Action"><span class="tocnumber">7.9</span> <span class="toctext">Logitech Dual Action</span></a></li>
<li class="toclevel-2 tocsection-47"><a href="#PlayStation_2_controller_via_USB_adapter"><span class="tocnumber">7.10</span> <span class="toctext">PlayStation 2 controller via USB adapter</span></a></li>
<li class="toclevel-2 tocsection-48">
<a href="#PlayStation_3_controller"><span class="tocnumber">7.11</span> <span class="toctext">PlayStation 3 controller</span></a>
<ul>
<li class="toclevel-3 tocsection-49"><a href="#Pairing_via_USB"><span class="tocnumber">7.11.1</span> <span class="toctext">Pairing via USB</span></a></li>
<li class="toclevel-3 tocsection-50"><a href="#Pairing_via_Bluetooth"><span class="tocnumber">7.11.2</span> <span class="toctext">Pairing via Bluetooth</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-51">
<a href="#PlayStation_4_controller"><span class="tocnumber">7.12</span> <span class="toctext">PlayStation 4 controller</span></a>
<ul>
<li class="toclevel-3 tocsection-52"><a href="#Pairing_via_USB_2"><span class="tocnumber">7.12.1</span> <span class="toctext">Pairing via USB</span></a></li>
<li class="toclevel-3 tocsection-53"><a href="#Pairing_via_Bluetooth_2"><span class="tocnumber">7.12.2</span> <span class="toctext">Pairing via Bluetooth</span></a></li>
<li class="toclevel-3 tocsection-54"><a href="#Button_mapping"><span class="tocnumber">7.12.3</span> <span class="toctext">Button mapping</span></a></li>
<li class="toclevel-3 tocsection-55"><a href="#Fix_Motion_control_conflict_(gamepad_will_not_work_on_some_applications)"><span class="tocnumber">7.12.4</span> <span class="toctext">Fix Motion control conflict (gamepad will not work on some applications)</span></a></li>
<li class="toclevel-3 tocsection-56"><a href="#Disable_touchpad_acting_as_mouse"><span class="tocnumber">7.12.5</span> <span class="toctext">Disable touchpad acting as mouse</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-57">
<a href="#PlayStation_3/4_controller"><span class="tocnumber">7.13</span> <span class="toctext">PlayStation 3/4 controller</span></a>
<ul>
<li class="toclevel-3 tocsection-58"><a href="#Connecting_via_Bluetooth"><span class="tocnumber">7.13.1</span> <span class="toctext">Connecting via Bluetooth</span></a></li>
<li class="toclevel-3 tocsection-59"><a href="#Using_Playstation_3_controllers_with_Steam"><span class="tocnumber">7.13.2</span> <span class="toctext">Using Playstation 3 controllers with Steam</span></a></li>
<li class="toclevel-3 tocsection-60"><a href="#Using_generic/clone_controllers_2"><span class="tocnumber">7.13.3</span> <span class="toctext">Using generic/clone controllers</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-61">
<a href="#Troubleshooting_2"><span class="tocnumber">8</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-62"><a href="#Joystick_moving_mouse"><span class="tocnumber">8.1</span> <span class="toctext">Joystick moving mouse</span></a></li>
<li class="toclevel-2 tocsection-63"><a href="#Gamepad_is_not_working_in_FNA/SDL_based_games"><span class="tocnumber">8.2</span> <span class="toctext">Gamepad is not working in FNA/SDL based games</span></a></li>
<li class="toclevel-2 tocsection-64"><a href="#Gamepad_is_not_recognized_by_all_programs"><span class="tocnumber">8.3</span> <span class="toctext">Gamepad is not recognized by all programs</span></a></li>
<li class="toclevel-2 tocsection-65"><a href="#Steam_Controller_not_pairing"><span class="tocnumber">8.4</span> <span class="toctext">Steam Controller not pairing</span></a></li>
<li class="toclevel-2 tocsection-66"><a href="#Steam_Controller_makes_a_game_crash_or_not_recognized"><span class="tocnumber">8.5</span> <span class="toctext">Steam Controller makes a game crash or not recognized</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Gamepad_input_systems">Gamepad input systems</span></h2>
<div class="noprint archwiki-template-message">
<p><a href="/title/File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a><b>This article or section needs expansion.</b><a href="/title/File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Need info about differences between API, how to switch between them. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/title/Talk:Gamepad#Joystick_API_vibration_support">Talk:Gamepad#Joystick API vibration support</a>)</div>
</div>
<p>Linux has two different input systems for Gamepads – the original Joystick interface and the newer evdev-based interface.
</p>
<p><code>/dev/input/jsX</code> maps to the Joystick API interface and <code>/dev/input/event*</code> maps to the evdev ones (this also includes other input devices such as mice and keyboards). Symbolic links to those devices are also available in <code>/dev/input/by-id/</code> and <code>/dev/input/by-path/</code> where the legacy Joystick API has names ending with <code>-joystick</code> while the evdev have names ending with <code>-event-joystick</code>.
</p>
<p>Most new games will default to the evdev interface as it gives more detailed information about the buttons and axes available and also adds support for force feedback.
</p>
<p>While SDL1 defaults to evdev interface you can force it to use the old Joystick API by setting the environment variable <code>SDL_JOYSTICK_DEVICE=/dev/input/js0</code>. This can help many games such as X3. SDL2 supports only the new evdev interface.
</p>
<h2><span class="mw-headline" id="Determining_which_modules_you_need">Determining which modules you need</span></h2>
<p>Unless you are using very old joystick that uses gameport or proprietary USB protocol, you will need just the generic USB human interface device (HID) modules.
</p>
<p>For an extensive overview of all joystick related modules in Linux, you will need access to the Linux kernel sources -- specifically the Documentation section. Unfortunately, pacman kernel packages do not include what we need. If you have the kernel sources downloaded, have a look at <code>Documentation/input/joydev/</code>. You can browse the kernel source tree at <a rel="nofollow" class="external text" href="https://kernel.org/">kernel.org</a> by clicking the "browse" (cgit - the git frontend) link for the kernel that you are using, then clicking the "tree" link near the top. Here is a link to the <a rel="nofollow" class="external text" href="https://www.kernel.org/doc/html/latest/input/joydev/joystick.html">documentation from the latest kernel</a>.
</p>
<p>Some joysticks need specific modules, such as the Microsoft Sidewinder controllers (<code>sidewinder</code>), or the Logitech digital controllers (<code>adi</code>). Many older joysticks will work with the simple <code>analog</code> module. If your joystick is plugging in to a gameport provided by your soundcard, you will need your soundcard drivers loaded - however, some cards, like the Soundblaster Live, have a specific gameport driver (<code>emu10k1-gp</code>). Older ISA soundcards may need the <code>ns558</code> module, which is a standard gameport module.
</p>
<p>As you can see, there are many different modules related to getting your joystick working in Linux, so I could not possibly cover everything here. Please have a look at the documentation mentioned above for details.
</p>
<h3><span class="mw-headline" id="Loading_the_modules_for_analogue_devices">Loading the modules for analogue devices</span></h3>
<p>You need to load a module for your gameport (<code>ns558</code>, <code>emu10k1-gp</code>, <code>cs461x</code>, etc...), a module for your joystick (<code>analog</code>, <code>sidewinder</code>, <code>adi</code>, etc...), and finally the kernel joystick device driver (<code>joydev</code>). Add these to a new file in <code>/etc/modules-load.d/</code>, or simply modprobe them. The <code>gameport</code> module should load automatically, as this is a dependency of the other modules.
</p>
<h3><span class="mw-headline" id="USB_gamepads">USB gamepads</span></h3>
<p>You need to get USB working, and then modprobe your gamepad driver, which is <code>usbhid</code>, as well as <code>joydev</code>. 
If you use a usb mouse or keyboard, <code>usbhid</code> will be loaded already and you just have to load the <code>joydev</code> module.
</p>
<h4><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h4>
<p>If your Xbox 360 gamepad is connected with the Play&amp;Charge USB cable it will show up in <code>lsusb</code> but it will not show up as an input device in <code>/dev/input/js*</code>, see note below.
</p>
<h2><span class="mw-headline" id="Testing_your_configuration">Testing your configuration</span></h2>
<p>Once the modules are loaded, you should be able to find a new device: <code>/dev/input/js0</code> and a file ending with <code>-event-joystick</code> in <code>/dev/input/by-id</code> directory. You can simply <code>cat</code> those devices to see if the joystick works - move the stick around, press all the buttons - you should see mojibake printed when you move the sticks or press buttons. 
</p>
<p>Both interfaces are also supported in wine and reported as separate devices. You can test them (including vibration feedback) with <code>wine control joy.cpl</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong>  Input devices by default have <b>input</b> group; for example, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pcsx2">pcsx2</a></span> have no access to gamepad without rights. Make sure your user is in the <b>input</b> group.</div>
<h3><span class="mw-headline" id="Joystick_API">Joystick API</span></h3>
<p>There are a lot of applications that can test this old API, <code>jstest</code> from the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=joyutils">joyutils</a></span> package is the simplest one. If the output is unreadable because the line printed is too long you can also use graphical tools. KDE Plasma has a built in one in System Settings -&gt; Input Devices -&gt; Game Controller. There is <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jstest-gtk-git/">jstest-gtk-git</a></span><sup><small>AUR</small></sup> as an alternative.
</p>
<p>Use of <code>jstest</code> is fairly simple, you just run <code>jstest /dev/input/js0</code> and it will print a line with state of all the axes (normalised to {-32767,32767}) and buttons.
</p>
<p>After you start <code>jstest-gtk</code>, it will just show you a list of joysticks available, you just need to select one and press Properties.
</p>
<h3><span class="mw-headline" id="evdev_API">evdev API</span></h3>
<p>The new 'evdev' API can be tested using the SDL2 joystick test application or using <code>evtest</code> from community repository. Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/sdl2-jstest-git/">sdl2-jstest-git</a></span><sup><small>AUR</small></sup> and then run <code>sdl2-jstest --test 0</code>. Use <code>sdl2-jstest --list</code> to get IDs of other controllers if you have multiple ones connected.
</p>
<p>To test force feedback on the device, use <code>fftest</code> from <code>linuxconsole</code> package:
</p>
<pre>$ fftest /dev/input/by-id/usb-*event-joystick
</pre>
<h3><span class="mw-headline" id="HTML5_Gamepad_API">HTML5 Gamepad API</span></h3>
<p>Go to <a rel="nofollow" class="external free" href="https://gamepad-tester.com/">https://gamepad-tester.com/</a>. To test vibration, click on the word Vibration. Note, that vibration is currently supported in Chromium browser, but not in Firefox. Also, in Firefox you cannot see a gamepad image, but in Chromium you can.
</p>
<h2><span class="mw-headline" id="Setting_up_deadzones_and_calibration">Setting up deadzones and calibration</span></h2>
<p>If you want to set up the deadzones (or remove them completely) of your analog input you have to do it separately for the xorg (for mouse and keyboard emulation), Joystick API and evdev API.
</p>
<h3><span class="mw-headline" id="Wine_deadzones">Wine deadzones</span></h3>
<p>Add the following registry entry and set it to a string from 0 to 10000 (affects all axes):
</p>
<pre>HKEY_CURRENT_USER\Software\Wine\DirectInput\DefaultDeadZone
</pre>
<p>Source: <a rel="nofollow" class="external text" href="https://wiki.winehq.org/UsefulRegistryKeys">UsefulRegistryKeys</a>
</p>
<h3><span class="mw-headline" id="Xorg_deadzones">Xorg deadzones</span></h3>
<p>Add a similar line to <code>/etc/X11/xorg.conf.d/51-joystick.conf</code> (create if it does not exist):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/51-joystick.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "InputClass"
    Option "MapAxis1" "deadzone=1000"
EndSection
</pre>
<p>1000 is the default value, but you can set anything between 0 and 30 000. To get the axis number see the "Testing Your Configuration" section of this article.
If you already have an option with a specific axis just type in the <code>deadzone=value</code> at the end of the parameter separated by a space.
</p>
<h3><span class="mw-headline" id="Joystick_API_deadzones">Joystick API deadzones</span></h3>
<p>The easiest way is using <code>jstest-gtk</code> from <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jstest-gtk-git/">jstest-gtk-git</a></span><sup><small>AUR</small></sup>. Select the controller you want to edit, then click the Calibration button at the bottom of the dialog (<b>do not</b> click Start Calibration there). You can then set the CenterMin and CenterMax values (which control the center deadzone), RangeMin and RangeMax which control the end of throw deadzones. Note that the calibration settings are applied when the application opens the device, so you need to restart your game or test application to see updated calibration settings.
</p>
<p>After you set the deadzones use <code>jscal</code> to dump the new values into a shell script:
</p>
<pre>$ jscal -p /dev/input/jsX &gt; jscal.sh # replace X with your joystick's number 
$ chmod +x jscal.sh
</pre>
<p>Now you need to make a <a href="/title/Udev" title="Udev">udev</a> rule (for example <code>/etc/udev/rules.d and name it 85-jscal.rules</code>) so the script will automatically run when you connect the controller:
</p>
<pre>SUBSYSTEM=="input", ATTRS{idVendor}=="054c", ATTRS{idProduct}=="c268", ACTION=="add", RUN+="/usr/bin/bash /usr/bin/jscal.sh"
</pre>
<p>To get the idVendor and idProduct use <code>udevadm info --attribute-walk --name /dev/input/jsX</code>
</p>
<p>Use the `/dev/input/by-id/*-joystick` device names in case you use multiple controllers.
</p>
<h3><span class="mw-headline" id="evdev_API_deadzones">evdev API deadzones</span></h3>
<p>The <code>evdev-joystick</code> tool from the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linuxconsole">linuxconsole</a></span> package can be used to view and change deadzones and calibration for <code>evdev</code> API devices.
</p>
<p>To view your device configuration:
</p>
<pre>$ evdev-joystick --showcal /dev/input/by-id/usb-*-event-joystick
</pre>
<p>To change the deadzone for a particular axis, use a command like:
</p>
<pre>$ evdev-joystick --evdev /dev/input/by-id/usb-*-event-joystick --axis 0 --deadzone 0
</pre>
<p>To set the same deadzone for all axes at once, omit the "--axis 0" option.
</p>
<p>Use udev rules file to set them automatically when the controller is connected.
</p>
<p>Note that inside the kernel, the value is called <code>flatness</code> and is set using the <code>EVIOCSABS</code> <code>ioctl</code>.
</p>
<p>Default configuration will look like similar to this:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ evdev-joystick --showcal /dev/input/by-id/usb-Madcatz_Saitek_Pro_Flight_X-55_Rhino_Stick_G0000090-event-joystick</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Supported Absolute axes:
   Absolute axis 0x00 (0) (X Axis) (min: 0, max: 65535, flatness: 4095 (=6.25%), fuzz: 255)
   Absolute axis 0x01 (1) (Y Axis) (min: 0, max: 65535, flatness: 4095 (=6.25%), fuzz: 255)
   Absolute axis 0x05 (5) (Z Rate Axis) (min: 0, max: 4095, flatness: 255 (=6.23%), fuzz: 15)
   Absolute axis 0x10 (16) (Hat zero, x axis) (min: -1, max: 1, flatness: 0 (=0.00%), fuzz: 0)
   Absolute axis 0x11 (17) (Hat zero, y axis) (min: -1, max: 1, flatness: 0 (=0.00%), fuzz: 0)</pre>
<p>While a more reasonable setting would be achieved with something like this (repeat for other axes):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ evdev-joystick --evdev /dev/input/by-id/usb-Madcatz_Saitek_Pro_Flight_X-55_Rhino_Stick_G0000090-event-joystick --axis 0 --deadzone 512</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Event device file: /dev/input/by-id/usb-Madcatz_Saitek_Pro_Flight_X-55_Rhino_Stick_G0000090-event-joystick
 Axis index to deal with: 0
 New dead zone value: 512
 Trying to set axis 0 deadzone to: 512
   Absolute axis 0x00 (0) (X Axis) Setting deadzone value to : 512
 (min: 0, max: 65535, flatness: 512 (=0.78%), fuzz: 255)</pre>
<h3><span class="mw-headline" id="Configuring_curves_and_responsiveness">Configuring curves and responsiveness</span></h3>
<p>In case your game requires just limited amount of buttons or has good support for multiple controllers, you may have good results with using <code>xboxdrv</code> to change response curves of the joystick.
</p>
<p>Below are the setups I use for Saitek X-55 HOTAS:
</p>
<pre>$ xboxdrv --evdev /dev/input/by-id/usb-Madcatz_Saitek_Pro_Flight_X-55_Rhino_Throttle_G0000021-event-joystick \
  --evdev-no-grab --evdev-absmap 'ABS_#40=x1,ABS_#41=y1,ABS_X=x2,ABS_Y=y2' --device-name 'Hat and throttle' \
  --ui-axismap 'x2^cal:-32000:0:32000=,y2^cal:-32000:0:32000=' --silent
</pre>
<p>this maps the EV_ABS event with id of 40 and 41 (use xboxdrv with --evdev-debug to see the events registered), which is the normally inaccessible "mouse pointer" on the throttle, to first gamepad joystick and throttles to second joystick, it also clamps the top and lower ranges as they not always register fully.
</p>
<p>A bit more interesting is the setup for the stick:
</p>
<pre>$ xboxdrv --evdev /dev/input/by-id/usb-Madcatz_Saitek_Pro_Flight_X-55_Rhino_Stick_G0000090-event-joystick \
  --evdev-no-grab --evdev-absmap 'ABS_X=x1' --evdev-absmap 'ABS_Y=y1' --device-name 'Joystick' \
  --ui-axismap 'x1^cal:-32537:-455:32561=,x1^dead:-900:700:1=,x1^resp:-32768:-21845:-2000:0:2000:21485:32767=' \
  --ui-axismap 'y1^cal:-32539:-177:32532=,y1^dead:-700:2500:1=,y1^resp:-32768:-21845:-2000:0:2000:21485:32767=' \
  --evdev-absmap 'ABS_RZ=x2' --ui-axismap 'x2^cal:-32000:-100:32000,x2^dead:-1500:1000:1=,x2^resp:-32768:-21845:-2000:0:2000:21485:32767=' \
  --silent
</pre>
<p>this maps the 3 joystick axes to gamepad axes and changes the calibration (min value, centre value, max value), dead zones (negative side, positive side, flag to turn smoothing) and finally change of response curve to a more flat one in the middle.
</p>
<p>You can also modify the responsiveness by setting the 'sen' (sensitivity). Setting it to value of 0 will give you a linear sensitivity, value of -1 will give very insensitive axis while value of 1 will give very sensitive axis. You can use intermediate values to make it less or more sensitive. Internally xboxdrv uses a quadratic formula to calculate the resulting value, so this setting gives a more smooth result than 'resp' shown above.
</p>
<p>Nice thing about xboxdrv is that it exports resulting device as both old Joystick API and new style evdev API so it should be compatible with basically any application.
</p>
<h2><span class="mw-headline" id="Disable_joystick_from_controlling_mouse">Disable joystick from controlling mouse</span></h2>
<p>If you want to play games with your gamepad, you might want to disable its joystick control over mouse cursor. To do this, edit <code>/etc/X11/xorg.conf.d/51-joystick.conf</code> (create if it does not exists) so that it looks like this:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/51-joystick.conf </pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "InputClass"
        Identifier "joystick catchall"
        MatchIsJoystick "on"
        MatchDevicePath "/dev/input/event*"
        Driver "joystick"
        Option "StartKeysEnabled" "False"       #Disable mouse
        Option "StartMouseEnabled" "False"      #support
EndSection</pre>
<h2><span class="mw-headline" id="Using_gamepad_to_send_keystrokes">Using gamepad to send keystrokes</span></h2>
<p>A couple gamepad buttons to keystroke programs exist like <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/qjoypad/">qjoypad</a></span><sup><small>AUR</small></sup> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/antimicrox-git/">antimicrox-git</a></span><sup><small>AUR</small></sup>, all work well without the need for X.org configuration.
</p>
<h3><span class="mw-headline" id="Xorg_configuration_example">Xorg configuration example</span></h3>
<p>This is a good solution for systems where restarting Xorg is a rare event because it is a static configuration loaded only on X startup. The example runs on a <a href="/title/Kodi" title="Kodi">Kodi</a> media PC, controlled with a Logitech Cordless RumblePad 2. Due to a problem with the d-pad (a.k.a. "hat") being recognized as another axis, <a href="/title/Joy2key" class="mw-redirect" title="Joy2key">Joy2key</a> was used as a workaround. Since upgrade to Kodi version 11.0 and joy2key 1.6.3-1, this setup no longer worked and the following was created for letting Xorg handle joystick events.
</p>
<p>First, <a href="/title/Install" class="mw-redirect" title="Install">install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xf86-input-joystick/">xf86-input-joystick</a></span><sup><small>AUR</small></sup> package. Then, create <code>/etc/X11/xorg.conf.d/51-joystick.conf</code> like so:
</p>
<pre> Section "InputClass"
  Identifier "Joystick hat mapping"
  Option "StartKeysEnabled" "True"
  #MatchIsJoystick "on"
  Option "MapAxis5" "keylow=113 keyhigh=114"
  Option "MapAxis6" "keylow=111 keyhigh=116"
 EndSection
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The <code>MatchIsJoystick "on"</code> line does not seem to be required for the setup to work, but you may want to uncomment it.</div>
<h2><span class="mw-headline" id="Specific_devices">Specific devices</span></h2>
<p>While most gamepads, especially USB based ones should just work, some may require (or give better results) if you use alternative drivers. If it does not work the first time, do not give up, and read those docs thoroughly!
</p>
<h3><span class="mw-headline" id="Dance_pads">Dance pads</span></h3>
<p>Most dance pads should work. However some pads, especially those used from a video game console via an adapter, have a tendency to map the directional buttons as axis buttons. This prevents hitting left-right or up-down simultaneously. This behavior can be fixed for devices recognized by xpad via a module option:
</p>
<pre> # modprobe -r xpad
 # modprobe xpad dpad_to_buttons=1
</pre>
<p>If that did not work, you can try <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/axisfix-git/">axisfix-git</a></span><sup><small>AUR</small></sup> or patching the <code>joydev</code> kernel module (<a rel="nofollow" class="external free" href="https://github.com/adiel-mittmann/dancepad">https://github.com/adiel-mittmann/dancepad</a>).
</p>
<h3><span class="mw-headline" id="Logitech_Thunderpad_Digital">Logitech Thunderpad Digital</span></h3>
<p>Logitech Thunderpad Digital will not show all the buttons if you use the <code>analog</code> module. Use the device specific <code>adi</code> module for this controller.
</p>
<h3><span class="mw-headline" id="Nintendo_Gamecube_Controller">Nintendo Gamecube Controller</span></h3>
<p>Dolphin Emulator has a <a rel="nofollow" class="external text" href="https://wiki.dolphin-emu.org/index.php?title=How_to_use_the_Official_GameCube_Controller_Adapter_for_Wii_U_in_Dolphin">page on their wiki</a> that explains how to use the official Nintendo USB adapter with a Gamecube controller. This configuration also works with the Mayflash Controller Adapter if the switch is set to "Wii U".
</p>
<h3><span class="mw-headline" id="Nintendo_Switch_Pro_Controller_and_Joy-Cons">Nintendo Switch Pro Controller and Joy-Cons</span></h3>
<h4><span class="mw-headline" id="Kernel_Nintendo_HID_Driver">Kernel Nintendo HID Driver</span></h4>
<p>The hid-nintendo kernel HID driver is currently in review on the linux-input mailing list. The most recent version of the changeset is currently being maintained in this<a rel="nofollow" class="external autonumber" href="https://github.com/DanielOgorchock/linux">[1]</a> git repository, or its staging branch<a rel="nofollow" class="external autonumber" href="https://git.kernel.org/pub/scm/linux/kernel/git/hid/hid.git/log/?h=for-5.10/nintendo">[2]</a> for kernel 5.10. It's also available as a dkms module named <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/hid-nintendo-dkms/">hid-nintendo-dkms</a></span><sup><small>AUR</small></sup>. The driver provides support for rumble, battery level, and control of the player and home LEDs. It supports the Nintendo Switch Pro Controller over both USB and bluetooth in addition to the joy-cons.
</p>
<p>An alternate dkms module named <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/hid-nintendo-nso-dkms/">hid-nintendo-nso-dkms</a></span><sup><small>AUR</small></sup> patches in support for the Switch Online NES and SNES controllers. 
</p>
<h5><span class="mw-headline" id="joycond_Userspace_Daemon">joycond Userspace Daemon</span></h5>
<p>The hid-nintendo kernel driver does not handle the combination of two joy-cons into one virtual input device. That functionality has been left up to userspace. <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/joycond-git/">joycond-git</a></span><sup><small>AUR</small></sup> is a userspace daemon that combines two kernel joy-con evdev devices into one virtual input device using uinput. An application can use two joy-cons as if they are a single controller. When the daemon is active, switch controllers will be placed in a pseudo pairing mode, and the LEDs will start flashing. Holding the triggers can be used to pair controllers and make them usable. To pair two joy-cons together, press one trigger on each joy-con.
</p>
<h5><span class="mw-headline" id="Using_hid-nintendo_with_Steam_Games">Using hid-nintendo with Steam Games</span></h5>
<p>The hid-nintendo driver currently conflicts with steam using hidraw to implement its own pro controller driver. If you wish to use the Steam implementation, the hid-nintendo driver can be blacklisted. Alternatively if you want to use hid-nintendo with a Steam game directly, Steam can be started without access to hidraw using firejail:
</p>
<pre> $ firejail --noprofile --blacklist=/sys/class/hidraw/ steam
</pre>
<p>An <a rel="nofollow" class="external text" href="https://github.com/ValveSoftware/steam-for-linux/issues/6651">issue</a> has been opened on the steam-for-linux github repo.
</p>
<h5><span class="mw-headline" id="Using_hid-nintendo_with_SDL2_Games">Using hid-nintendo with SDL2 Games</span></h5>
<p>To add a mapping for the joy-cons or the pro controller to an SDL2 game, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/controllermap/">controllermap</a></span><sup><small>AUR</small></sup> can be run in the game's directory of games which have their own gamecontrollerdb.txt file.
</p>
<p>Alternatively, the mappings can be added to an environment variable:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.bashrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># hid-nintendo SDL2 mappings
export SDL_GAMECONTROLLERCONFIG="050000007e0500000920000001800000,Nintendo Switch Pro Controller,platform:Linux,a:b0,b:b1,x:b3,y:b2,back:b9,guide:b11,start:b10,leftstick:b12,rightstick:b13,leftshoulder:b5,rightshoulder:b6,dpup:b14,dpdown:b15,dpleft:b16,dpright:b17,leftx:a0,lefty:a1,rightx:a2,righty:a3,lefttrigger:b7,righttrigger:b8,
030000007e0500000920000011810000,Nintendo Switch Pro Controller,platform:Linux,a:b0,b:b1,x:b3,y:b2,back:b9,guide:b11,start:b10,leftstick:b12,rightstick:b13,leftshoulder:b5,rightshoulder:b6,dpup:h0.1,dpdown:h0.4,dpleft:h0.8,dpright:h0.2,leftx:a0,lefty:a1,rightx:a2,righty:a3,lefttrigger:b7,righttrigger:b8,
060000007e0500000620000000000000,Nintendo Switch Combined Joy-Cons,platform:Linux,a:b0,b:b1,x:b3,y:b2,back:b9,guide:b11,start:b10,leftstick:b12,rightstick:b13,leftshoulder:b5,rightshoulder:b6,dpup:b14,dpdown:b15,dpleft:b16,dpright:b17,leftx:a0,lefty:a1,rightx:a2,righty:a3,lefttrigger:b7,righttrigger:b8,
"</pre>
<h4>
<span id="Dolphin_.28Gamecube_Controller_Emulation.29"></span><span class="mw-headline" id="Dolphin_(Gamecube_Controller_Emulation)">Dolphin (Gamecube Controller Emulation)</span>
</h4>
<p>Shinyquagsire23 made a git repo called "HID Joy-Con Whispering"<a rel="nofollow" class="external autonumber" href="https://github.com/shinyquagsire23/HID-Joy-Con-Whispering">[3]</a>, which contains a userspace driver for the Joy Cons and the Switch Pro Controller over USB. Currently, it does not support rumble or gyroscope. For rumble support, see the hid-nintendo kernel driver section above.
</p>
<p>After running make, load the uinput module:
</p>
<pre> # modprobe uinput
</pre>
<p>Then to activate the driver:
</p>
<pre> # ./uinputdriver &gt; /dev/null
</pre>
<p>Over on Dolphin's controller configuration menu, there should be an entry for evdev/0/joycon (not Nintendo Switch Pro Controller). Select it, and you should now be able to configure the controls.
</p>
<h4><span class="mw-headline" id="Steam">Steam</span></h4>
<p>While the controller works for native Linux games, this controller is not detected by Steam. To fix this, we will need to add a line to 70-steam-controller.rules.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/lib/udev/rules.d/70-steam-controller.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># NS PRO Controller USB
KERNEL=="hidraw*", ATTRS{idVendor}=="20d6", ATTRS{idProduct}=="a711", MODE="0660", TAG+="uaccess"</pre>
<p>udev can be reloaded with the new configuration by executing
</p>
<pre> # udevadm control --reload-rules
</pre>
<h3><span class="mw-headline" id="iPEGA-9017s_and_other_Bluetooth_gamepads">iPEGA-9017s and other Bluetooth gamepads</span></h3>
<p>If you want to use one of the widely available bluetooth gamepads, such as iPEGA-9017s designed mostly for Android and iOS devices you would need <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xboxdrv/">xboxdrv</a></span><sup><small>AUR</small></sup>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez">bluez</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-plugins">bluez-plugins</a></span>, and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-utils">bluez-utils</a></span>. You should connect it in gamepad mode (if there are different modes, choose the gamepad one). Technically it's ready to be used, but in most cases games would not recognize it, and you would have to map it individually for all application. The best way to simplify it and make it work with all applications is to mimic Microsoft X360 controller with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xboxdrv/">xboxdrv</a></span><sup><small>AUR</small></sup>.
Once connected you can create a udev rule to give it a persistent name, that would come in handy when setting it up.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/99-btjoy.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#Create a symlink to appropriate /dev/input/eventX at /dev/btjoy
ACTION=="add", SUBSYSTEM=="input", ATTRS{name}=="Bluetooth Gamepad", ATTRS{uniq}=="00:17:02:01:ae:2a", SYMLINK+="btjoy"</pre>
<p>Replace "Bluetooth Gampad" with your device name and "00:17:02:01:ae:2a" with your device's address.
</p>
<p>Next, create a configuration for <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xboxdrv/">xboxdrv</a></span><sup><small>AUR</small></sup> somewhere, for example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/xboxdrv/ipega.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#iPEGA PG-9017S Config 

[xboxdrv]
evdev-debug = true
evdev-grab = true
rumble = false
mimic-xpad = true

[evdev-absmap]
ABS_HAT0X = dpad_x
ABS_HAT0Y = dpad_y

ABS_X = X1
ABS_Y = Y1

ABS_Z  = X2
ABS_RZ = Y2

[axismap]
-Y1 = Y1
-Y2 = Y2

[evdev-keymap]
BTN_EAST=a
BTN_C=b
BTN_NORTH=y
BTN_SOUTH=x
BTN_TR2=start
BTN_TL2=back
BTN_Z=rt
BTN_WEST=lt

BTN_MODE = guide</pre>
<p>Refer to the xboxdrv man to see all the options.
</p>
<p>Now when you have the config and your device is connected you can start the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xboxdrv/">xboxdrv</a></span><sup><small>AUR</small></sup> like so:
</p>
<pre># xboxdrv --evdev /dev/btjoy --config .config/xboxdrv/ipega.conf
</pre>
<p>Your games will now work with bluetooth gamepad as long as xboxdrv is running.
</p>
<h4><span class="mw-headline" id="iPEGA-9068_and_9087">iPEGA-9068 and 9087</span></h4>
<p>For this model, use the same procedures as above, but with the configs:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/xboxdrv/ipega.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#iPEGA PG-9068 and PG-9087 Config 

[xboxdrv]
evdev-debug = true
evdev-grab = true
rumble = false
mimic-xpad = true

[evdev-absmap]
ABS_HAT0X = dpad_x
ABS_HAT0Y = dpad_y

ABS_X = X1
ABS_Y = Y1

ABS_Z  = X2
ABS_RZ = Y2

[axismap]
-Y1 = Y1
-Y2 = Y2

[evdev-keymap]
BTN_A=a
BTN_B=b
BTN_Y=y
BTN_X=x
BTN_TR=rb
BTN_TL=lb
BTN_TR2=rt
BTN_TL2=lt
BTN_THUMBL=tl
BTN_THUMBR=tr
BTN_START=start
BTN_SELECT=back

BTN_MODE = guide</pre>
<h3><span class="mw-headline" id="Steam_Controller">Steam Controller</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Kernel 4.18 <a rel="nofollow" class="external text" href="https://lkml.org/lkml/2018/4/16/380">provides a kernel driver</a> for wired/wireless use of the steam controller as a controller input device without <a href="/title/Steam" title="Steam">Steam</a>.</div>
<p>The <a href="/title/Steam" title="Steam">Steam</a> client will recognize the controller and provide keyboard/mouse/gamepad emulation while Steam is running. The in-game Steam overlay needs to be enabled and working in order for gamepad emulation to work. You may need to run <code>udevadm trigger</code> with root privileges or plug the dongle out and in again, if the controller does not work immediately after installing and running Steam. If all else fails, try restarting the computer while the dongle is plugged in.
</p>
<p>For Steam client to be able to emulate other gamepads in games, you will need to follow this <a rel="nofollow" class="external text" href="https://steamcommunity.com/app/353370/discussions/2/1735465524711324558/">post</a> from Valve. Note that name of the file with udev rules may be different, for example <code>/usr/lib/udev/rules.d/70-steam-input.rules</code>. A reboot may be required after making changes.
</p>
<p>If you are using the controller connected via Bluetooth LE, make sure the user is part of the <code>input</code> group.
</p>
<p>If you cannot get the Steam Controller to work, see <a href="#Steam_Controller_not_pairing">#Steam Controller not pairing</a>.
</p>
<p>Alternatively you can install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/python-steamcontroller-git/">python-steamcontroller-git</a></span><sup><small>AUR</small></sup> to have controller and mouse emulation without Steam or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/sc-controller/">sc-controller</a></span><sup><small>AUR</small></sup> for a versatile graphical configuration tool simillar to what is provided by the Steam client.
</p>
<div class="noprint archwiki-template-message">
<p><a href="/title/File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a><b>This article or section is out of date.</b><a href="/title/File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> As of September 17, 2019 beta release, Steam has fixed the on screen keyboard from taking focus. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/title/Talk:Gamepad">Talk:Gamepad#</a>)</div>
</div>
<p>On some desktop environments the on-screen keyboard might freeze when trying to input text after one or two characters. This is a problem with window focus. Check the settings for your <a href="/title/Window_manager" title="Window manager">window manager</a> to see if it is possible to have focus follow the mouse or automatically focus new windows. Preventing the keyboard from receiving focus will fix the issue in <a href="/title/Awesome" title="Awesome">Awesome</a>, see <a href="/title/Awesome#Steam_Keyboard" title="Awesome">Awesome#Steam Keyboard</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you do not use the <a href="/title/Steam_runtime" class="mw-redirect" title="Steam runtime">Steam runtime</a>, you might actually need to disable the overlay for the controller to work in certain games (Rocket Wars, Rocket League, Binding of Isaac, etc.). Right click on a game in your library, select "Properties", and uncheck "Enable Steam Overlay".</div>
<h4><span class="mw-headline" id="Wine">Wine</span></h4>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/python-steamcontroller-git/">python-steamcontroller-git</a></span><sup><small>AUR</small></sup> can also be used to make the Steam Controller work for games running under Wine. You need to find and download the application <code>xbox360cemu.v.3.0</code> (e.g. from <a rel="nofollow" class="external text" href="https://github.com/jacobmischka/ds4-in-wine/tree/master/xbox360cemu.v.3.0">here</a>). Then copy the files <code>dinput8.dll</code>, <code>xbox360cemu.ini</code>, <code>xinput1_3.dll</code> and <code>xinput_9_1_0.dll</code> to the directory that contains your game executable. Edit <code>xbox360cemu.ini</code> and only change the following values under <code>[PAD1]</code> to remap the Steam Controller correctly to a XBox controller.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">xbox360cemu.ini</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Right Analog X=4
Right Analog Y=-5
A=1
B=2
X=3
Y=4
Back=7
Start=8
Left Thumb=10
Right Thumb=11
Left Trigger=a3
Right Trigger=a6</pre>
<p>Now start python-steamcontroller in Xbox360 mode (<code>sc-xbox.py start</code>). You might also want to copy <code>XInputTest.exe</code> from <code>xbox360cemu.v.3.0</code> to the same directory and run it with Wine in order to test if the mappings work correctly. However neither mouse nor keyboard emulation work with this method.
</p>
<p>Alternatively you can use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/sc-controller/">sc-controller</a></span><sup><small>AUR</small></sup> for a similar graphical setup as Steam's own configurator. As of writing, it's a bit buggy here and there but offers an easy click and go way of configuring the controller.
</p>
<h3><span class="mw-headline" id="Xbox_360_controller">Xbox 360 controller</span></h3>
<p>Both the wired and wireless (with the <i>Xbox 360 Wireless Receiver for Windows</i>) controllers are supported by the <code>xpad</code> kernel module and should work without additional packages. Note that using a wireless Xbox360 controller with the Play&amp;Charge USB cable will not work. The cable is for recharging only and does not transmit any input data over the wire.
</p>
<p>It has been reported that the default xpad driver has some issues with a few newer wired and wireless controllers, such as:
</p>
<ul>
<li>incorrect button mapping. (<a rel="nofollow" class="external text" href="https://github.com/ValveSoftware/steam-for-linux/issues/95#issuecomment-14009081">discussion in Steam bugtracker</a>)</li>
<li>not-working sync. All four LEDs keep blinking, but controller works. (<a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=156028">discussion in Arch Forum</a>)</li>
</ul>
<p>If you experience such issues, you can use either <a href="#SteamOS_xpad">#SteamOS xpad</a> or <a href="#xboxdrv">#xboxdrv</a> instead of the default <code>xpad</code> driver.
</p>
<p>If you wish to use the controller for controlling the mouse, or mapping buttons to keys, etc. you should use the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xf86-input-joystick/">xf86-input-joystick</a></span><sup><small>AUR</small></sup> package (configuration help can be found using <span class="plainlinks archwiki-template-man" title="$ man 4 joystick">joystick(4)</span>). If the mouse locks itself in a corner, it might help changing the <code>MatchDevicePath</code> in <code>/etc/X11/xorg.conf.d/50-joystick.conf</code> from <code>/dev/input/event*</code> to <code>/dev/input/js*</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> If you use the <a href="/title/TLP" title="TLP">TLP</a> power management tool, you may experience connection issues with your Microsoft wireless adapter (e.g. the indicator LED will go out after the adapter has been connected for a few seconds, and controller connection attempts fail). This is due to TLP's USB autosuspend functionality, and the solution is to add the Microsoft wireless adapter's device ID to this feature's blacklist (USB_BLACKLIST, check <a rel="nofollow" class="external text" href="https://linrunner.de/en/tlp/docs/tlp-configuration.html#usb">TLP configuration</a> for more details).</div>
<p>In order to connect via Bluetooth using KDE, add the following <a href="/title/Kernel_parameter" class="mw-redirect" title="Kernel parameter">kernel parameter</a> <code>bluetooth.disable_ertm=1</code>.
</p>
<h4><span class="mw-headline" id="SteamOS_xpad">SteamOS xpad</span></h4>
<p>If you have issues with the default <code>xpad</code> kernel module, you can install the SteamOS version. There is still a known issue with compatibility between wireless Xbox360 controllers and games made in GameMaker Studio. If you encounter this problem, the only known workaround is to use xboxdrv. YoYo Games has refused to acknowledge this as a bug with their product and it is unlikely to ever be fixed.
</p>
<p>First make sure you have <a href="/title/DKMS" class="mw-redirect" title="DKMS">DKMS</a> installed and running, then install the modified kernel module <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/steamos-xpad-dkms/">steamos-xpad-dkms</a></span><sup><small>AUR</small></sup><sup>[<a href="/title/Help:Procedures#Fix_broken_package_links" title="Help:Procedures">broken link</a>: package not found]</sup>. During the installation you will see that new xpad kernel module is strapped to your current kernel:
</p>
<pre>Creating symlink /var/lib/dkms/steamos-xpad-dkms/0.1/source -&gt;
                 /usr/src/steamos-xpad-dkms-0.1
 
DKMS: add completed.
 
Kernel preparation unnecessary for this kernel.  Skipping...
 
Building module:
cleaning build area....
make KERNELRELEASE=3.12.8-1-ARCH KVERSION=3.12.8-1-ARCH....
cleaning build area....
</pre>
<p>Then unload the old xpad module and load new one:
</p>
<pre># rmmod xpad
# modprobe steamos-xpad
</pre>
<p>Or just restart your computer.
</p>
<h4><span class="mw-headline" id="xboxdrv">xboxdrv</span></h4>
<p><a rel="nofollow" class="external text" href="https://gitlab.com/xboxdrv/xboxdrv">xboxdrv</a> is an alternative to <code>xpad</code> which provides more functionality and might work better with certain controllers. It works in userspace and can be launched as system service. 
</p>
<p>Install it with the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xboxdrv/">xboxdrv</a></span><sup><small>AUR</small></sup> package. Then <a href="/title/Start" class="mw-redirect" title="Start">start</a>/<a href="/title/Enable" class="mw-redirect" title="Enable">enable</a> <code>xboxdrv.service</code>.
</p>
<p>If you have issues with the controller being recognized but not working in steam games or working but with incorrect mappings, it may be required to modify you config as such:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/default/xboxdrv</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[xboxdrv]
silent = true
device-name = "Xbox 360 Wireless Receiver"
mimic-xpad = true
deadzone = 4000

[xboxdrv-daemon]
dbus = disabled</pre>
<p>Then <a href="/title/Restart" class="mw-redirect" title="Restart">restart</a> <code>xboxdrv.service</code>.
</p>
<h5><span class="mw-headline" id="Multiple_controllers">Multiple controllers</span></h5>
<p>xboxdrv supports a multitude of controllers, but they need to be set up in <code>/etc/default/xboxdrv</code>. For each extra controller, add an <code>next-controller = true</code> line. For example, when using 4 controllers, add it 3 times:
</p>
<pre> [xboxdrv]
 silent = true
 next-controller = true
 next-controller = true
 next-controller = true
 [xboxdrv-daemon]
 dbus = disabled
</pre>
<p>Then <a href="/title/Restart" class="mw-redirect" title="Restart">restart</a> <code>xboxdrv.service</code>.
</p>
<h5><span class="mw-headline" id="Mimic_Xbox_360_controller_with_other_controllers">Mimic Xbox 360 controller with other controllers</span></h5>
<p>xboxdrv can be used to make any controller register as an Xbox 360 controller with the <code>--mimic-xpad</code> switch. This may be desirable for games that support Xbox 360 controllers out of the box, but have trouble detecting or working with other gamepads.
</p>
<p>First, you need to find out what each button and axis on the controller is called. You can use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=evtest">evtest</a></span> for this. Run <code>evtest</code> and select the device event ID number (<code>/dev/input/event*</code>) that corresponds to your controller. Press the buttons on the controller and move the axes to read the names of each button and axis.
</p>
<p>Here is an example of the output:
</p>
<pre>

Event: time 1380985017.964843, type 4 (EV_MSC), code 4 (MSC_SCAN), value 90003
Event: time 1380985017.964843, type 1 (EV_KEY), code 290 (BTN_THUMB2), value 1
Event: time 1380985017.964843, -------------- SYN_REPORT ------------
Event: time 1380985018.076843, type 4 (EV_MSC), code 4 (MSC_SCAN), value 90003
Event: time 1380985018.076843, type 1 (EV_KEY), code 290 (BTN_THUMB2), value 0
Event: time 1380985018.076843, -------------- SYN_REPORT ------------
Event: time 1380985018.460841, type 4 (EV_MSC), code 4 (MSC_SCAN), value 90002
Event: time 1380985018.460841, type 1 (EV_KEY), code 289 (BTN_THUMB), value 1
Event: time 1380985018.460841, -------------- SYN_REPORT ------------
Event: time 1380985018.572835, type 4 (EV_MSC), code 4 (MSC_SCAN), value 90002
Event: time 1380985018.572835, type 1 (EV_KEY), code 289 (BTN_THUMB), value 0
Event: time 1380985018.572835, -------------- SYN_REPORT ------------
Event: time 1380985019.980824, type 4 (EV_MSC), code 4 (MSC_SCAN), value 90006
Event: time 1380985019.980824, type 1 (EV_KEY), code 293 (BTN_PINKIE), value 1
Event: time 1380985019.980824, -------------- SYN_REPORT ------------
Event: time 1380985020.092835, type 4 (EV_MSC), code 4 (MSC_SCAN), value 90006
Event: time 1380985020.092835, type 1 (EV_KEY), code 293 (BTN_PINKIE), value 0
Event: time 1380985020.092835, -------------- SYN_REPORT ------------
Event: time 1380985023.596806, type 3 (EV_ABS), code 3 (ABS_RX), value 18
Event: time 1380985023.596806, -------------- SYN_REPORT ------------
Event: time 1380985023.612811, type 3 (EV_ABS), code 3 (ABS_RX), value 0
Event: time 1380985023.612811, -------------- SYN_REPORT ------------
Event: time 1380985023.708768, type 3 (EV_ABS), code 3 (ABS_RX), value 14
Event: time 1380985023.708768, -------------- SYN_REPORT ------------
Event: time 1380985023.724772, type 3 (EV_ABS), code 3 (ABS_RX), value 128
Event: time 1380985023.724772, -------------- SYN_REPORT ------------
</pre>
<p>In this case, <code>BTN_THUMB</code>, <code>BTN_THUMB2</code> and <code>BTN_PINKIE</code> are buttons and <code>ABS_RX</code> is the X axis of the right analogue stick.
You can now mimic an Xbox 360 controller with the following command:
</p>
<pre>$ xboxdrv --evdev /dev/input/event* --evdev-absmap ABS_RX=X2 --evdev-keymap BTN_THUMB2=a,BTN_THUMB=b,BTN_PINKIE=rt --mimic-xpad
</pre>
<p>The above example is incomplete. It only maps one axis and 3 buttons for demonstration purposes. Use <code>xboxdrv --help-button</code> to see the names of the Xbox controller buttons and axes and bind them accordingly by expanding the command above. Axes mappings should go after <code>--evdev-absmap</code> and button mappings follow <code>--evdev-keymap</code> (comma separated list; no spaces).
</p>
<p>By default, xboxdrv outputs all events to the terminal. You can use this to test that the mappings are correct. Append the <code>--silent</code> option to keep it quiet.
</p>
<h4>
<span id="Using_generic.2Fclone_controllers"></span><span class="mw-headline" id="Using_generic/clone_controllers">Using generic/clone controllers</span>
</h4>
<p>Some clone gamepads might require a specific initialization sequence in order to work (<a rel="nofollow" class="external text" href="https://superuser.com/a/1380235">Super User answer</a>). For that you should run the following python script as the root user:
</p>
<pre>#!/usr/bin/env python3

import usb.core

dev = usb.core.find(idVendor=0x045e, idProduct=0x028e)

if dev is None:
    raise ValueError('Device not found')
else:
    dev.ctrl_transfer(0xc1, 0x01, 0x0100, 0x00, 0x14) 
</pre>
<h3>
<span id="Xbox_Wireless_Controller_.2F_Xbox_One_Wireless_Controller"></span><span class="mw-headline" id="Xbox_Wireless_Controller_/_Xbox_One_Wireless_Controller">Xbox Wireless Controller / Xbox One Wireless Controller</span>
</h3>
<h4><span class="mw-headline" id="Connect_Xbox_Wireless_Controller_with_usb_cable">Connect Xbox Wireless Controller with usb cable</span></h4>
<p>This is supported by the kernel and should work without additional packages.
</p>
<h4><span class="mw-headline" id="Connect_Xbox_Wireless_Controller_with_Bluetooth">Connect Xbox Wireless Controller with Bluetooth</span></h4>
<p>You will probably have to disable Enhanced Retransmission Mode (ERTM) to make it work.
</p>
<p>Use either:
</p>
<pre># echo 1 &gt; /sys/module/bluetooth/parameters/disable_ertm
</pre>
<p>Or add this file to your module configuration:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/xbox_bt.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options bluetooth disable_ertm=1</pre>
<h5><span class="mw-headline" id="xpadneo">xpadneo</span></h5>
<p>A relatively new driver which does support the Xbox One S and Xbox Series X|S controller via Bluetooth is called <a rel="nofollow" class="external text" href="https://github.com/atar-axis/xpadneo/">xpadneo</a>. At the moment it only has basic support for the Xbox Elite Series 2 Wireless controller.
In exchange for fully supporting just two controllers so far, it enables one to read out the correct battery level, supports rumble (even the one on the trigger buttons - L2/R2), corrects the (sometimes wrong) button mapping and more.
</p>
<p>Installation is done using DKMS: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xpadneo-dkms-git/">xpadneo-dkms-git</a></span><sup><small>AUR</small></sup>
</p>
<h4><span class="mw-headline" id="Connect_Xbox_Wireless_Controller_with_Microsoft_Xbox_Wireless_Adapter">Connect Xbox Wireless Controller with Microsoft Xbox Wireless Adapter</span></h4>
<h5><span class="mw-headline" id="xow">xow</span></h5>
<p><a rel="nofollow" class="external text" href="https://github.com/medusalix/xow">xow</a> is a project that allows connection with a wireless dongle. It is currently in very early stages of development. It can be installed via <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xow-git/">xow-git</a></span><sup><small>AUR</small></sup>
</p>
<h3><span class="mw-headline" id="Logitech_Dual_Action">Logitech Dual Action</span></h3>
<p>The Logitech Dual Action gamepad has a very similar mapping to the PS2 pad, but some buttons and triggers need to be swapped to mimic the Xbox controller.
</p>
<pre> # xboxdrv --evdev /dev/input/event* \
   --evdev-absmap ABS_X=x1,ABS_Y=y1,ABS_RZ=x2,ABS_Z=y2,ABS_HAT0X=dpad_x,ABS_HAT0Y=dpad_y \
   --axismap -Y1=Y1,-Y2=Y2 \
   --evdev-keymap BTN_TRIGGER=x,BTN_TOP=y,BTN_THUMB=a,BTN_THUMB2=b,BTN_BASE3=back,BTN_BASE4=start,BTN_BASE=lt,BTN_BASE2=rt,BTN_TOP2=lb,BTN_PINKIE=rb,BTN_BASE5=tl,BTN_BASE6=tr \
   --mimic-xpad --silent
</pre>
<h3><span class="mw-headline" id="PlayStation_2_controller_via_USB_adapter">PlayStation 2 controller via USB adapter</span></h3>
<p>To fix the button mapping of PS2 dual adapters and mimic the Xbox controller you can run the following command:
</p>
<pre> # xboxdrv --evdev /dev/input/event* \
   --evdev-absmap ABS_X=x1,ABS_Y=y1,ABS_RZ=x2,ABS_Z=y2,ABS_HAT0X=dpad_x,ABS_HAT0Y=dpad_y \
   --axismap -Y1=Y1,-Y2=Y2 \
   --evdev-keymap   BTN_TOP=x,BTN_TRIGGER=y,BTN_THUMB2=a,BTN_THUMB=b,BTN_BASE3=back,BTN_BASE4=start,BTN_BASE=lb,BTN_BASE2=rb,BTN_TOP2=lt,BTN_PINKIE=rt,BTN_BASE5=tl,BTN_BASE6=tr \
   --mimic-xpad --silent
</pre>
<h3><span class="mw-headline" id="PlayStation_3_controller">PlayStation 3 controller</span></h3>
<h4><span class="mw-headline" id="Pairing_via_USB">Pairing via USB</span></h4>
<p>If you own a PS3 controller and can connect with USB, plug it to your computer and press the PS button. The controller will power up and one of the four LEDs should light up indicating the controller's number.
</p>
<h4><span class="mw-headline" id="Pairing_via_Bluetooth">Pairing via Bluetooth</span></h4>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez">bluez</a></span> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-utils">bluez-utils</a></span> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-plugins">bluez-plugins</a></span>. Make sure bluetooth is working by following the first five steps of <a href="/title/Bluetooth#Pairing" title="Bluetooth">Bluetooth#Pairing</a> and leave the bluetoothctl command running, then turn on the controller by pressing the middle 'PS' button(all 4 leds should be blinking quickly ~4 hz) and connect to your computer using usb. Lastly, type yes in the bluetoothctl prompt when asked '<code>Authorize service 00001124-0000-1000-8000-00805f9b34fb (yes/no)</code>'.
</p>
<p>Alternative instructions:
To connect your PS3 controller to your computer using Bluetooth, you first need to install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez">bluez</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-plugins">bluez-plugins</a></span> then connect your controller via USB. A pop-up should appear asking for pairing. Click on Trust &amp; Authorize. You can now unplug your controller and press the PS button. The controller will connect and a LED will remain solid. You can now use it to play games. Connecting using the USB cable is only needed after the controller has been connected to another system.
</p>
<h3><span class="mw-headline" id="PlayStation_4_controller">PlayStation 4 controller</span></h3>
<h4><span class="mw-headline" id="Pairing_via_USB_2">Pairing via USB</span></h4>
<p>Connect your controller via USB and press the <code>PS</code> button.
</p>
<h4><span class="mw-headline" id="Pairing_via_Bluetooth_2">Pairing via Bluetooth</span></h4>
<p>If you want to use bluetooth mode, press <code>PS</code> button and <code>Share</code> button together, white led of gamepad should blink very quickly, then add wireless controller with your bluetooth manager (bluez, gnome-bluetooth.
</p>
<h4><span class="mw-headline" id="Button_mapping">Button mapping</span></h4>
<p>To fix the button mapping of PS4 controller you can use the following command with xboxdrv (or try with the <a rel="nofollow" class="external text" href="https://github.com/chrippa/ds4drv">ds4drv</a> program, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ds4drv/">ds4drv</a></span><sup><small>AUR</small></sup>):
</p>
<pre> # xboxdrv \
   --evdev /dev/input/by-id/usb-Sony_Computer_Entertainment_Wireless_Controller-event-joystick\
   --evdev-absmap ABS_X=x1,ABS_Y=y1                 \
   --evdev-absmap ABS_Z=x2,ABS_RZ=y2                \
   --evdev-absmap ABS_HAT0X=dpad_x,ABS_HAT0Y=dpad_y \
   --evdev-keymap BTN_A=x,BTN_B=a                   \
   --evdev-keymap BTN_C=b,BTN_X=y                   \
   --evdev-keymap BTN_Y=lb,BTN_Z=rb                 \
   --evdev-keymap BTN_TL=lt,BTN_TR=rt               \
   --evdev-keymap BTN_SELECT=tl,BTN_START=tr        \
   --evdev-keymap BTN_TL2=back,BTN_TR2=start        \
   --evdev-keymap BTN_MODE=guide                    \
   --axismap -y1=y1,-y2=y2                          \
   --mimic-xpad                                     \
   --silent
</pre>
<h4>
<span id="Fix_Motion_control_conflict_.28gamepad_will_not_work_on_some_applications.29"></span><span class="mw-headline" id="Fix_Motion_control_conflict_(gamepad_will_not_work_on_some_applications)">Fix Motion control conflict (gamepad will not work on some applications)</span>
</h4>
<p>Dualshock 4 V1 and V2 are both like 3 devices, touchpad, motion control, and joypad.
</p>
<p>With somes softwares like Parsec and Shadow cloud gaming streaming apps, motion control is in conflict with joypad, you can disable touchpad and motion control by adding the following udev rule:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/51-disable-DS3-and-DS4-motion-controls.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">SUBSYSTEM=="input", ATTRS{name}=="*Controller Motion Sensors", RUN+="/bin/rm %E{DEVNAME}", ENV{ID_INPUT_JOYSTICK}=""
SUBSYSTEM=="input", ATTRS{name}=="*Controller Touchpad", RUN+="/bin/rm %E{DEVNAME}", ENV{ID_INPUT_JOYSTICK}=""</pre>
<p>This should work in USB and Bluetooth mode.
</p>
<h4><span class="mw-headline" id="Disable_touchpad_acting_as_mouse">Disable touchpad acting as mouse</span></h4>
<p>This fixes conflicts with games that actually use touchpad as part of the gamepad, such as Rise of the Tomb Raider.
</p>
<p>Edit <code>/etc/X11/xorg.conf.d/30ds4.conf</code>.
</p>
<p>And then paste the following and restart X11:
</p>
<pre>Section "InputClass"
       Identifier   "ds4-touchpad"
       Driver       "libinput"
       MatchProduct "Sony Interactive Entertainment Wireless Controller Touchpad"
       Option       "Ignore" "True"
EndSection
</pre>
<h3>
<span id="PlayStation_3.2F4_controller"></span><span class="mw-headline" id="PlayStation_3/4_controller">PlayStation 3/4 controller</span>
</h3>
<p>The DualShock 3, DualShock 4 and Sixaxis controllers work out of the box when plugged in via USB (the PS button will need to be pushed to begin). They can also be used wirelessly via Bluetooth.
</p>
<p>Steam properly recognizes it as a PS3 pad and Big Picture can be launched with the PS button. Big Picture and some games may act as if it was a 360 controller.  Gamepad control over mouse is on by default.  You may want to turn it off before playing games, see <a href="#Joystick_moving_mouse">#Joystick moving mouse</a>.
</p>
<h4><span class="mw-headline" id="Connecting_via_Bluetooth">Connecting via Bluetooth</span></h4>
<p>Install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez">bluez</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-plugins">bluez-plugins</a></span>, and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-utils">bluez-utils</a></span> packages, which includes the <i>sixaxis</i> plugin. Then <a href="/title/Start" class="mw-redirect" title="Start">start</a> the <a href="/title/Bluetooth" title="Bluetooth">bluetooth</a> service and ensure bluetooth is powered on. If using <i>bluetoothctl</i> start it in a terminal and then plug the controller in via USB. You should be prompted to trust the controller in bluetoothctl. A graphical bluetooth front-end may program your PC's bluetooth address into the controller automatically. Hit the PlayStation button and check that the controller works while plugged in.
</p>
<p>You can now disconnect your controller. The next time you hit the PlayStation button it will connect without asking anything else.
</p>
<p>Alternatively, on a PS4 controller you can hold the share button and the PlayStation button simultaneously (for a few seconds) to put the gamepad in pairing mode, and pair as you would normally.
</p>
<p>GNOME's Settings also provides a graphical interface to pair sixaxis controllers when connected by wire.
</p>
<p>Remember to disconnect the controller when you are done as the controller will stay on when connected and drain the battery.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If the controller does not connect, make sure the bluetooth interface is turned on and the controllers have been trusted. (See <a href="/title/Bluetooth" title="Bluetooth">Bluetooth</a>)</div>
<h4><span class="mw-headline" id="Using_Playstation_3_controllers_with_Steam">Using Playstation 3 controllers with Steam</span></h4>
<div class="noprint archwiki-template-message">
<p><a href="/title/File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a><b>This article or section is out of date.</b><a href="/title/File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Tested connecting PS3 controller via bluetooth and it worked in Steam version 1575605714 and some Steam games without performing the following steps. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/title/Talk:Gamepad">Talk:Gamepad#</a>)</div>
</div>
<p>For Steam to recognize your controllers, it needs to be able to read their device file. The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=steam">steam</a></span> package sets up udev rules for lots of controllers, but not the PlayStation 3 controller (aka. DualShock 3 controller). You can add the rules yourself:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/99-dualshock-3.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># DualShock 3 controller, Bluetooth
KERNEL=="hidraw*", KERNELS=="*054C:0268*", MODE="0660", TAG+="uaccess"

# DualShock 3 controller, USB
KERNEL=="hidraw*", ATTRS{idVendor}=="054c", ATTRS{idProduct}=="0268", MODE="0660", TAG+="uaccess"</pre>
<p>Make sure your user is in the "input" group:
</p>
<p><code> usermod -aG input yourusername</code>
</p>
<p>Reboot your system. Steam should now detect your PlayStation 3 controller.
</p>
<h4>
<span id="Using_generic.2Fclone_controllers_2"></span><span class="mw-headline" id="Using_generic/clone_controllers_2">Using generic/clone controllers</span>
</h4>
<p>Using generic/clone Dualshock controllers is possible, however there is an issue that may require to install a patched package. The default Bluetooth protocol stack does not detect some of the clone controllers. The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/bluez-ps3/">bluez-ps3</a></span><sup><small>AUR</small></sup> package is a version patched to be able to detect them.
</p>
<h2><span class="mw-headline" id="Troubleshooting_2">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Joystick_moving_mouse">Joystick moving mouse</span></h3>
<p>Sometimes USB gamepad can be recognized as HID mouse (only in X, it is still being installed as <code>/dev/input/js0</code> as well). Known issue is cursor being moved by the joystick, or escaping to en edge of a screen right after plugin. If your application can detect gamepad by itself, you can remove the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xf86-input-joystick/">xf86-input-joystick</a></span><sup><small>AUR</small></sup> package.
</p>
<p>A more gentle solution is described in <a href="#Disable_joystick_from_controlling_mouse">#Disable joystick from controlling mouse</a>.
</p>
<h3>
<span id="Gamepad_is_not_working_in_FNA.2FSDL_based_games"></span><span class="mw-headline" id="Gamepad_is_not_working_in_FNA/SDL_based_games">Gamepad is not working in FNA/SDL based games</span>
</h3>
<p>If you are using a generic non-widely used gamepad you may encounter issues getting the gamepad recognized in games based on SDL. Since <a rel="nofollow" class="external text" href="https://github.com/flibitijibibo/FNA/commit/e55742cfe7e38b778a21ed8a12cb2f2081490d8d">14 May 2015</a>, FNA supports dropping a <code>gamecontrollerdb.txt</code> into the executable folder of the game, for example the <a rel="nofollow" class="external text" href="https://github.com/gabomdq/SDL_GameControllerDB">SDL_GameControllerDB</a>.
</p>
<p>As an alternative and for older versions of FNA or for SDL you can generate a mapping yourself by downloading the SDL source code via <a rel="nofollow" class="external free" href="https://libsdl.org/">https://libsdl.org/</a>, navigating to <code>/test/</code>, compile the <code>controllermap.c</code> program (alternatively install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/controllermap/">controllermap</a></span><sup><small>AUR</small></sup>) and run the test. After completing the controllermap test, a guid will be generated that you can put in the <code>SDL_GAMECONTROLLERCONFIG</code> environment variable which will then be picked up by SDL/FNA games. For example:
</p>
<pre> $ export SDL_GAMECONTROLLERCONFIG="030000008f0e00000300000010010000,GreenAsia Inc. USB Joystick ,platform:Linux,x:b3,a:b2,b:b1,y:b0,back:b8,start:b9,dpleft:h0.8,dpdown:h0.0,dpdown:h0.4,dpright:h0.0,dpright:h0.2,dpup:h0.0,dpup:h0.1,leftshoulder:h0.0,leftshoulder:b6,lefttrigger:b4,rightshoulder:b7,righttrigger:b5,leftstick:b10,rightstick:b11,leftx:a0,lefty:a1,rightx:a3,righty:a2,"
</pre>
<h3><span class="mw-headline" id="Gamepad_is_not_recognized_by_all_programs">Gamepad is not recognized by all programs</span></h3>
<p>Some software, Steam for example, will only recognize the first gamepad it encounters. Due to a bug in the driver for Microsoft wireless periphery devices this can in fact be the bluetooth dongle. If you find you have a <code>/dev/input/js*</code> and <code>/dev/input/event*</code> belonging to you keyboard's bluetooth transceiver you can get automatically get rid of it by creating according udev rules.
Create a <code>/</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/99-btcleanup.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ACTION=="add", KERNEL=="js[0-9]*", SUBSYSTEM=="input", KERNELS=="...", ATTRS{bInterfaceSubClass}=="00", ATTRS{bInterfaceProtocol}=="00", ATTRS{bInterfaceNumber}=="02", RUN+="/usr/bin/rm /dev/input/js%n"
ACTION=="add", KERNEL=="event*", SUBSYSTEM=="input", KERNELS=="...", ATTRS{bInterfaceSubClass}=="00", ATTRS{bInterfaceProtocol}=="00", ATTRS{bInterfaceNumber}=="02", RUN+="/usr/bin/rm /dev/input/event%n"
</pre>
<p>Correct the <code>KERNELS=="..."</code> to match your device. The correct value can be found by running
</p>
<pre># udevadm info -an /dev/input/js0
</pre>
<p>Assuming the device in question is <code>/dev/input/js0</code>. After you placed the rule reload the rules with
</p>
<pre># udevadm control --reload
</pre>
<p>Then replug the device making you trouble. The joystick and event devices should be gone, although their number will still be reserved. But the files are out of the way.
</p>
<h3><span class="mw-headline" id="Steam_Controller_not_pairing">Steam Controller not pairing</span></h3>
<p>There are some unknown cases where the packaged udev rule for the Steam controller does not work (<a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/47330">FS#47330</a>). The most reliable workaround is to make the controller world readable. Copy the rule <code>/usr/lib/udev/rules.d/70-steam-controller.rules</code> to <code>/etc/udev/rules.d</code> with a later prioritiy and change anything that says <code>MODE="0660"</code> to <code>MODE="066<b>6</b>"</code> e.g.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/99-steam-controller-perms.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
SUBSYSTEM=="usb", ATTRS{idVendor}=="28de", MODE="0666"
...
</pre>
<p>You may have to reboot in order for the change to take effect.
</p>
<h3><span class="mw-headline" id="Steam_Controller_makes_a_game_crash_or_not_recognized">Steam Controller makes a game crash or not recognized</span></h3>
<p>If your Steam Controller is working well in Steam Big Picture mode, but not recognized by a game or the game starts crashing when you plug in the controller, this may be because of the native driver that has been added to the Linux kernel 4.18. Try to unload it, restart Steam and replug the controller.
</p>
<p>The module name of the driver is <i>hid_steam</i>, so to unload it you may perform:
</p>
<pre># rmmod hid_steam
</pre>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="/title/Special:Categories" title="Special:Categories">Categories</a>: <ul>
<li><a href="/title/Category:Input_devices" title="Category:Input devices">Input devices</a></li>
<li><a href="/title/Category:Gaming" title="Category:Gaming">Gaming</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="/title/Category:Pages_or_sections_flagged_with_Template:Expansion" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li>
<li><a href="/title/Category:Pages_or_sections_flagged_with_Template:Out_of_date" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li>
<li><a href="/title/Category:Pages_with_broken_package_links" title="Category:Pages with broken package links">Pages with broken package links</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Gamepad&amp;oldid=668817">https://wiki.archlinux.org/index.php?title=Gamepad&amp;oldid=668817</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 8 May 2021, at 10:47.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="/title/ArchWiki:Privacy_policy" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="/title/ArchWiki:About" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="/title/ArchWiki:General_disclaimer" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
