<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Citrix - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Citrix rootpage-Citrix skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Citrix</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a><b>This article or section needs language, wiki syntax or style improvements. See <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a> for reference.</b><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> See <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a>. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Citrix">Talk:Citrix#</a>)</div>
</div>
<p><a href="https://en.wikipedia.org/wiki/Citrix_Receiver" class="extiw" title="wikipedia:Citrix Receiver">Citrix Receiver</a> is the client component of <a href="https://en.wikipedia.org/wiki/XenDesktop" class="extiw" title="wikipedia:XenDesktop">XenDesktop</a> (desktop virtualization software) and <a href="https://en.wikipedia.org/wiki/XenApp" class="extiw" title="wikipedia:XenApp">XenApp</a> (application virtualization software), developed by <a href="https://en.wikipedia.org/wiki/Citrix_Systems" class="extiw" title="wikipedia:Citrix Systems">Citrix Systems</a>. 
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Installation"><span class="tocnumber">1</span> <span class="toctext">Installation</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Google_Chromium"><span class="tocnumber">1.1</span> <span class="toctext">Google Chromium</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Manual_installation"><span class="tocnumber">1.2</span> <span class="toctext">Manual installation</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="#TLS/SSL_Certificates"><span class="tocnumber">2</span> <span class="toctext">TLS/SSL Certificates</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Audio_Support"><span class="tocnumber">3</span> <span class="toctext">Audio Support</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Endpoint_Analysis_(EPA)"><span class="tocnumber">4</span> <span class="toctext">Endpoint Analysis (EPA)</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Troubleshooting"><span class="tocnumber">5</span> <span class="toctext">Troubleshooting</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/icaclient/">icaclient</a></span><sup><small>AUR</small></sup> package.
</p>
<p>SSL connections are supported by default in this packages. Also Firefox plugin will be installed by default as well as the wfica.desktop file. That way Arch knows how to open ica files.
</p>
<h4><span class="mw-headline" id="Google_Chromium">Google Chromium</span></h4>
<p>If you have problems launching Citrix applications with Chromium, just go to <code>chrome://extensions</code> and disable "Citrix Receiver for Linux".
</p>
<p>Next, create <code>/usr/share/applications/wfica.desktop</code> (Exec path may vary based on package installed):
</p>
<pre>[Desktop Entry]
Name=Citrix ICA client
Comment="Launch Citrix applications from .ica files"
Categories=Network;
Exec=/opt/Citrix/ICAClient/wfica
Terminal=false
Type=Application
NoDisplay=true
MimeType=application/x-ica;</pre>
<p>Now <code>xdg-open</code> will handle .ica extensions using <code>/opt/Citrix/ICAClient/wfica</code>.
</p>
<p>Note: if you are running Xfce and Chromium is opening the .ica files in the wrong application (e.g. a text editor), make sure you have <code>xorg-xprop</code> installed.
</p>
<h4><span class="mw-headline" id="Manual_installation">Manual installation</span></h4>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a><b>This article or section is out of date.</b><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Firefox has removed plugin support (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Citrix">Talk:Citrix#</a>)</div>
</div>
<ul><li>
<b>Step 1.</b> Download Citrix Receiver from <a rel="nofollow" class="external text" href="https://www.citrix.com/downloads/citrix-receiver/linux/receiver-for-linux-latest.html">here</a>. Choose the latest version of the x86_64 tarball.</li></ul>
<ul><li>
<b>Step 2.</b> Unpack the archive:</li></ul>
<pre># tar zxvf en.linuxx86.tar.gz
./
./PkgId
./install.txt
./eula.txt
./readme.txt
./setupwfc
./linuxx86/
./linuxx86/hinst
./linuxx86/linuxx86.cor/
./linuxx86/linuxx86.cor/nls/
./linuxx86/linuxx86.cor/nls/en/
./linuxx86/linuxx86.cor/nls/en/UTF-8/
./linuxx86/linuxx86.cor/nls/en/UTF-8/Wfica
./linuxx86/linuxx86.cor/nls/en/UTF-8/Wfcmgr
... many more files ...
</pre>
<ul>
<li>
<b>Step 3.</b> Run setupwfc: <pre># ./setupwfc</pre> (Follow all instructions prompted by setupwfc.)</li>
<li>
<b>Step 4.</b> (Applies only for Firefox integration:)</li>
</ul>
<p>The setup program should have made appropriate links to the "Citrix Receiver for Linux" plugin.
You can check this as such:
</p>
<pre># find / -name npica.so
/opt/Citrix/ICAClient/npica.so
</pre>
<p>Or you can check if your browser loads the plugin, in Firefox this can be done by typing "about:plugins" in the address bar. If you have a 64-bit version of Firefox, the plugin will not be loaded. You can check below what to do.
</p>
<p>Create missing links as such:
</p>
<pre># ln -s /opt/Citrix/ICAClient/npica.so /usr/lib/mozilla/plugins/</pre>
<ul><li>
<b>Step 6.</b> Restart your browser</li></ul>
<p>At this point, everything should work, including wfcmgr. In the case of Opera, integration should be automatic.  The ICAClient will automatically be launched whenever you try to access a citrix-based application from either Firefox or Opera.
</p>
<p><b>Note:</b> If for some reason firefox prompts you for which application to use when opening a citrix-based application, use <code>/opt/Citrix/ICAClient/wfica</code>
</p>
<h2>
<span id="TLS.2FSSL_Certificates"></span><span class="mw-headline" id="TLS/SSL_Certificates">TLS/SSL Certificates</span>
</h2>
<p>Because ICAClient uses SSL you may need a security certificate to connect to the server, check with the server administrator. If there is a certificate download and place it in <code>/usr/lib/ICAClient/keystore/cacerts/</code>.
</p>
<p>You may then receive the error <code>You have not chosen to trust the issuer of the server's security certificate. (SSL Error 61)</code>.
</p>
<p>There may be several reasons for this:
</p>
<dl>
<dt>You do not have the root Certificate Authority (CA) certificates.</dt>
<dd>These are already installed on most systems, they are part of the core package <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ca-certificates">ca-certificates</a></span>, but they are not where ICAClient looks for them. Copy the certificates from <code>/etc/ssl/certs/</code> to <code>/usr/lib/ICAClient/keystore/cacerts/</code>. For Citrix versions before 13.1, run the following command as root:</dd>
<dd><pre># ln -sf /etc/ssl/certs/* /opt/Citrix/ICAClient/keystore/cacerts/</pre></dd>
<dd>Since versions 13.1, Citrix needs the certificates in separate files. You need to run the following commands as root:</dd>
</dl>
<pre># cd /opt/Citrix/ICAClient/keystore/cacerts/
# cp /etc/ca-certificates/extracted/tls-ca-bundle.pem .
# awk 'BEGIN {c=0;} /BEGIN CERT/{c++} { print &gt; "cert." c ".pem"}' &lt; tls-ca-bundle.pem
</pre>
<dl>
<dd>You may also need to download your CA's intermediate certificates and store them in the same directory.</dd>
<dd>Changes to your certificate directory will likely require rehashing links for openssl to find them properly. Skipping this step might result in Citrix still giving certificate errors. To do this, use this command (borrowed from <a rel="nofollow" class="external autonumber" href="https://help.ubuntu.com/community/CitrixICAClientHowTo#A5._Add_more_SSL_certificates">[1]</a>)</dd>
</dl>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a><b>This article or section is out of date.</b><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> After the last [April 2018] openssl upgrade, the <i>c_rehash</i> command is broken in Arch. [unless the command hasn't been deprecated upstream, this should be a <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/">bug report</a>] (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Citrix">Talk:Citrix#</a>)</div>
</div>
<dl><dd><pre># c_rehash /opt/Citrix/ICAClient/keystore/cacerts/</pre></dd></dl>
<p>Instead of using <code>c_rehash</code> which no longer works the <code>openssl rehash</code> command can be used instead. 
</p>
<dl><dd><pre># openssl rehash /opt/Citrix/ICAClient/keystore/cacerts/</pre></dd></dl>
<h2><span class="mw-headline" id="Audio_Support">Audio Support</span></h2>
<p>Citrix Receiver uses <a href="https://en.wikipedia.org/wiki/Advanced_Linux_Sound_Architecture" class="extiw" title="wikipedia:Advanced Linux Sound Architecture">ALSA</a>. If you use <a href="https://en.wikipedia.org/wiki/Pulse_Audio" class="extiw" title="wikipedia:Pulse Audio">Pulse Audio</a>, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pulseaudio-alsa">pulseaudio-alsa</a></span>.
</p>
<p>To get audio input into Citrix Receiver, in <code>~/.ICAClient/wfclient.ini</code>, add <code>AllowAudioInput=True</code> anywhere in the <code>[WFClient]</code> section.
</p>
<h2>
<span id="Endpoint_Analysis_.28EPA.29"></span><span class="mw-headline" id="Endpoint_Analysis_(EPA)">Endpoint Analysis (EPA)</span>
</h2>
<p>If your company has activated the optional endpoint analysis to check if your computer meets certain requirements, you will have to install another component, the EPA-Plugin. It seems like it was a browser plugin using the legacy NPAPI, but now it's just an application the browser calls with a protocol handler for "nsgcepa://". Here's what you have to do to get it running:
</p>
<ul><li>Step 1. Download the EPA plugin from your company's Citrix gateway. Opening the URL of your company's Citrix gateway will try to start the endoint check immediately, which (of course) fails, because you haven't installed the EPA plugin, yet. Under the error message you will see a button for downloading <code>nsepa.deb</code>. Download it.</li></ul>
<ul><li>Step 2. Transform the Debian package into an Arch package with debtap. You might need to install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/debtap/">debtap</a></span><sup><small>AUR</small></sup> first. <pre># debtap nsepa.deb</pre> Call the package "nsepa" and use the suggested version. Install it like so: <pre># pacman -U nsepa-1.0.0.35-1-x86_64.pkg.tar.xz</pre>
</li></ul>
<p>Recent versions of the EPA are linked to <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libcurl-gnutls">libcurl-gnutls</a></span> and you're done now. Unfortunately your company might use and old version that has the following problem:
</p>
<pre>$ ldd /opt/Citrix/Browser-EPA/nsgcepa
/opt/Citrix/Browser-EPA/nsgcepa: /usr/lib/libcurl.so.4: version `CURL_OPENSSL_3' not found (required by /opt/Citrix/Browser-EPA/nsgcepa)
	linux-vdso.so.1 (0x00007fff33f4f000)
	libX11.so.6 =&gt; /usr/lib/libX11.so.6 (0x00007fe4401d9000)
        [...]
</pre>
<p>As you can see, the nsgcepa executable (which is the main executable of nsepa) has been linked to a libcurl.so.4 that contains the "CURL_OPENSSL_3" symbol. I think this is a patched version from Ubuntu and I couldn't find an Arch package providing it, not even <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libcurl-compat">libcurl-compat</a></span>. Unfortunately you have to find an appropriate lib for yourself. I found one in the Steam runtime under <code>~/.local/share/Steam/ubuntu12_32/steam-runtime/usr/lib/x86_64-linux-gnu</code>.
</p>
<ul><li>Troubleshooting-Step 1. Create a directory for patched library files and copy libcurl.so.4 into it. Also copy dependencies.</li></ul>
<pre># mkdir /opt/Citrix/lib
$ cd ~/.local/share/Steam/ubuntu12_32/steam-runtime/usr/lib/x86_64-linux-gnu
# cp libcurl.so.4 /opt/Citrix/lib
# cp libhogweed.so.4 libnettle.so.6 librtmp.so.0 libidn.so.11 /opt/Citrix/lib
</pre>
<ul><li>Troubleshooting-Step 2. In order to use these libs instead of your system's libs, we have to fiddle with the way nsgcepa is being called. There's a .desktop file provided in the nsepa package for that: <code>/opt/Citrix/Browser-EPA/nsgcepa.desktop</code>. Change the Exec line to: <pre>Exec=env LD_LIBRARY_PATH=/opt/Citrix/lib LD_PRELOAD=/opt/Citrix/lib/libcurl.so.4 /opt/Citrix/Browser-EPA/nsgcepa</pre>
</li></ul>
<ul><li>Troubleshooting-Step 3. The .desktop file had already been copied to where the system expects it to be: <code>/usr/share/applications/</code>. Overwrite it with your new one. <pre>$ cp /opt/Citrix/Browser-EPA/nsgcepa.desktop /usr/share/applications/</pre>
</li></ul>
<p>
Now go to you company's Citrix URL again. The EPA should run. If it does not, you should check if the protocol handler for "nsgcepa://" works:</p>
<pre>$ xdg-open nsgcepa://something.com</pre>
<p> If it answers "gio: nsgcepa://something.com: The specified location is not supported" or "klauncher said: Unknown protocol 'nsgcepa'" you need to add the protocol handler manually: </p>
<pre>$ xdg-mime default nsgcepa.desktop x-scheme-handler/nsgcepa</pre>
<p>If the EPA still fails you should ask your company's Citrix Netscaler admins if they've disabled Linux logins completely. It seems like there's no corresponding error message for that case, instead the error message is the same as if you don't have installed the EPA plugin at all.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<ul><li>If you have issues opening a Citrix connection under Firefox you may need to set the Citrix Receiver plugin to 'Always Activate' under the Firefox Add-ons Manager plugin settings.</li></ul>
<ul><li>If you have cursor alignment issues under Citrix and you have multiple displays connected to your machine you may need to disable all but one when using Citrix.</li></ul>
<ul><li>If you have sticky Control Ctrl key issues after logging to session you may resolve it using this <a rel="nofollow" class="external text" href="https://looselytyped.blogspot.com/2014/08/fixing-sticky-control-key-issues-with.html">guide</a>
</li></ul>
<ul><li>On i3 window manager, Citrix might go full screen and grab all keyboard input. A workaround is to disable full screen mode in ~/.ICAClient/All_Regions.ini. See <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=242398">forum</a> for more info.</li></ul>
<pre>[Virtual Channels\Seamless Windows]
TWIMode=0

[Virtual Channels\Thinwire Graphics]
DesiredColor=8
ApproximateColors=*
DesiredHRES=1024
DesiredVRES=768
ScreenPercent=*
UseFullScreen=false
TWIFullScreenMode=false
NoWindowManager=false</pre>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Virtualization.html" title="Category:Virtualization">Virtualization</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Citrix&amp;oldid=647578">https://wiki.archlinux.org/index.php?title=Citrix&amp;oldid=647578</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 29 December 2020, at 13:44.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
