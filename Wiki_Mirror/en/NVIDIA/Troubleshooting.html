<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>NVIDIA/Troubleshooting - ArchWiki</title>
<link rel="stylesheet" href="../../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-NVIDIA_Troubleshooting rootpage-NVIDIA skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">NVIDIA/Troubleshooting</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"><span class="subpages">&lt; <a href="../../en/NVIDIA.html" title="NVIDIA">NVIDIA</a></span></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Corrupted_screen:_%22Six_screens%22_Problem"><span class="tocnumber">1</span> <span class="toctext">Corrupted screen: "Six screens" Problem</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#'/dev/nvidia0'_input/output_error"><span class="tocnumber">2</span> <span class="toctext">'/dev/nvidia0' input/output error</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Crashing_in_general"><span class="tocnumber">3</span> <span class="toctext">Crashing in general</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Bad_performance_after_installing_a_new_driver_version"><span class="tocnumber">4</span> <span class="toctext">Bad performance after installing a new driver version</span></a></li>
<li class="toclevel-1 tocsection-5">
<a href="#Avoid_screen_tearing"><span class="tocnumber">5</span> <span class="toctext">Avoid screen tearing</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Multi-monitor"><span class="tocnumber">5.1</span> <span class="toctext">Multi-monitor</span></a></li>
<li class="toclevel-2 tocsection-7">
<a href="#Avoid_screen_tearing_in_KDE_(KWin)"><span class="tocnumber">5.2</span> <span class="toctext">Avoid screen tearing in KDE (KWin)</span></a>
<ul>
<li class="toclevel-3 tocsection-8">
<a href="#Legacy_solutions"><span class="tocnumber">5.2.1</span> <span class="toctext">Legacy solutions</span></a>
<ul>
<li class="toclevel-4 tocsection-9"><a href="#1._GL_threads"><span class="tocnumber">5.2.1.1</span> <span class="toctext">1. GL threads</span></a></li>
<li class="toclevel-4 tocsection-10"><a href="#2._Use_TripleBuffering"><span class="tocnumber">5.2.1.2</span> <span class="toctext">2. Use TripleBuffering</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="#Modprobe_Error:_%22Could_not_insert_'nvidia':_No_such_device%22_on_linux_&gt;=4.8"><span class="tocnumber">6</span> <span class="toctext">Modprobe Error: "Could not insert 'nvidia': No such device" on linux &gt;=4.8</span></a></li>
<li class="toclevel-1 tocsection-12"><a href="#Poor_performance_after_resuming_from_suspend"><span class="tocnumber">7</span> <span class="toctext">Poor performance after resuming from suspend</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="#CPU_spikes_with_400_series_cards"><span class="tocnumber">8</span> <span class="toctext">CPU spikes with 400 series cards</span></a></li>
<li class="toclevel-1 tocsection-14"><a href="#Full_system_freeze_or_crashes_when_using_Flash"><span class="tocnumber">9</span> <span class="toctext">Full system freeze or crashes when using Flash</span></a></li>
<li class="toclevel-1 tocsection-15"><a href="#Laptops:_X_hangs_on_login/out,_worked_around_with_Ctrl+Alt+Backspace"><span class="tocnumber">10</span> <span class="toctext">Laptops: X hangs on login/out, worked around with Ctrl+Alt+Backspace</span></a></li>
<li class="toclevel-1 tocsection-16"><a href="#Screen(s)_found,_but_none_have_a_usable_configuration"><span class="tocnumber">11</span> <span class="toctext">Screen(s) found, but none have a usable configuration</span></a></li>
<li class="toclevel-1 tocsection-17"><a href="#Blackscreen_at_X_startup_/_Machine_poweroff_at_X_shutdown"><span class="tocnumber">12</span> <span class="toctext">Blackscreen at X startup / Machine poweroff at X shutdown</span></a></li>
<li class="toclevel-1 tocsection-18">
<a href="#Backlight_is_not_turning_off_in_some_occasions"><span class="tocnumber">13</span> <span class="toctext">Backlight is not turning off in some occasions</span></a>
<ul>
<li class="toclevel-2 tocsection-19"><a href="#Driver_415:_HardDPMS"><span class="tocnumber">13.1</span> <span class="toctext">Driver 415: HardDPMS</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-20"><a href="#Xorg_fails_to_load_or_Red_Screen_of_Death"><span class="tocnumber">14</span> <span class="toctext">Xorg fails to load or Red Screen of Death</span></a></li>
<li class="toclevel-1 tocsection-21"><a href="#Black_screen_on_systems_with_Intel_integrated_GPU"><span class="tocnumber">15</span> <span class="toctext">Black screen on systems with Intel integrated GPU</span></a></li>
<li class="toclevel-1 tocsection-22"><a href="#No_audio_over_HDMI"><span class="tocnumber">16</span> <span class="toctext">No audio over HDMI</span></a></li>
<li class="toclevel-1 tocsection-23"><a href="#Black_screen_on_systems_with_VIA_integrated_GPU"><span class="tocnumber">17</span> <span class="toctext">Black screen on systems with VIA integrated GPU</span></a></li>
<li class="toclevel-1 tocsection-24"><a href="#X_fails_with_%22no_screens_found%22_when_using_Multiple_GPUs"><span class="tocnumber">18</span> <span class="toctext">X fails with "no screens found" when using Multiple GPUs</span></a></li>
<li class="toclevel-1 tocsection-25"><a href="#Xorg_fails_during_boot,_but_otherwise_starts_fine"><span class="tocnumber">19</span> <span class="toctext">Xorg fails during boot, but otherwise starts fine</span></a></li>
<li class="toclevel-1 tocsection-26"><a href="#xrandr_BadMatch"><span class="tocnumber">20</span> <span class="toctext">xrandr BadMatch</span></a></li>
<li class="toclevel-1 tocsection-27"><a href="#Override_EDID"><span class="tocnumber">21</span> <span class="toctext">Override EDID</span></a></li>
<li class="toclevel-1 tocsection-28"><a href="#Overclocking_with_nvidia-settings_GUI_not_working"><span class="tocnumber">22</span> <span class="toctext">Overclocking with nvidia-settings GUI not working</span></a></li>
<li class="toclevel-1 tocsection-29"><a href="#Overclocking_not_working_with_Unknown_Error"><span class="tocnumber">23</span> <span class="toctext">Overclocking not working with Unknown Error</span></a></li>
<li class="toclevel-1 tocsection-30"><a href="#System_will_not_boot_after_driver_was_installed"><span class="tocnumber">24</span> <span class="toctext">System will not boot after driver was installed</span></a></li>
<li class="toclevel-1 tocsection-31"><a href="#X_fails_with_%22Failing_initialization_of_X_screen%22"><span class="tocnumber">25</span> <span class="toctext">X fails with "Failing initialization of X screen"</span></a></li>
<li class="toclevel-1 tocsection-32"><a href="#System_does_not_return_from_suspend"><span class="tocnumber">26</span> <span class="toctext">System does not return from suspend</span></a></li>
<li class="toclevel-1 tocsection-33"><a href="#Vulkan_error_on_applications_start"><span class="tocnumber">27</span> <span class="toctext">Vulkan error on applications start</span></a></li>
</ul>
</div>

<h2>
<span id="Corrupted_screen:_.22Six_screens.22_Problem"></span><span class="mw-headline" id='Corrupted_screen:_"Six_screens"_Problem'>Corrupted screen: "Six screens" Problem</span>
</h2>
<p>For some users, using GeForce GT 100M's, the screen gets corrupted after X starts, divided into 6 sections with a resolution limited to 640x480.
The same problem has been recently reported with Quadro 2000 and hi-res displays.
</p>
<p>To solve this problem, enable the Validation Mode <code>NoTotalSizeCheck</code> in section <code>Device</code>:
</p>
<pre>Section "Device"
 ...
 Option "ModeValidation" "NoTotalSizeCheck"
 ...
EndSection
</pre>
<h2>
<span id=".27.2Fdev.2Fnvidia0.27_input.2Foutput_error"></span><span class="mw-headline" id="'/dev/nvidia0'_input/output_error">'/dev/nvidia0' input/output error</span>
</h2>
<div class="noprint archwiki-template-message">
<p><a href="../../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a><b>The factual accuracy of this article or section is disputed.</b><a href="../../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Verify that the BIOS related suggestions work and are not coincidentally set while troubleshooting. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:NVIDIA/Troubleshooting#'/dev/nvidia0'_Input/Output_error..._suggested_fixes">Talk:NVIDIA/Troubleshooting#'/dev/nvidia0' Input/Output error... suggested fixes</a>)</div>
</div>
<p>This error can occur for several different reasons, and the most common solution given for this error is to check for group/file permissions, which in almost every case is <i>not</i> the problem. The NVIDIA documentation does not talk in detail on what you should
do to correct this problem but there are a few things that have worked for some people. The problem can be a IRQ conflict with another device or bad routing by either the kernel or your BIOS.
</p>
<p>First thing to try is to remove other video devices such as video capture cards and see if the problem goes away. If there are too many video processors on the same system it can lead into the kernel being unable to start them because of memory allocation problems with the video controller. In particular on systems with low video memory this can occur even if there is only one video processor. In such case you should find out the amount of your system's video memory (e.g. with <code>lspci -v</code>) and pass allocation parameters to the kernel, e.g. for a 32-bit kernel:
</p>
<pre>vmalloc=384M
</pre>
<p>If running a 64bit kernel, a driver defect can cause the NVIDIA module to fail initializing when IOMMU is on. Turning it off in the BIOS has been confirmed to work for some users. <a rel="nofollow" class="external autonumber" href="http://www.nvnews.net/vbulletin/showthread.php?s=68bb2fabadcb53b10b286aa42d13c5bc&amp;t=159335">[1]</a><a href="../../User:Clickthem.html#nvidia_module" title="User:Clickthem">User:Clickthem#nvidia module</a>
</p>
<p>Another thing to try is to change your BIOS IRQ routing from <code>Operating system controlled</code> to <code>BIOS controlled</code> or the other way around. The first one can be passed as a kernel parameter:
</p>
<pre>PCI=biosirq
</pre>
<p>The <code>noacpi</code> kernel parameter has also been suggested as a solution but since it disables ACPI completely it should be used with caution. Some hardware are easily damaged by overheating.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The kernel parameters can be passed either through the kernel command line or the bootloader configuration file. See your bootloader Wiki page for more information.</div>
<h2><span class="mw-headline" id="Crashing_in_general">Crashing in general</span></h2>
<ul>
<li>Try disabling <code>RenderAccel</code> in xorg.conf.</li>
<li>If Xorg outputs an error about <code>"conflicting memory type"</code> or <code>"failed to allocate primary buffer: out of memory"</code>, or crashes with a "Signal 11" while using nvidia-96xx drivers, add <code>nopat</code> to your <a href="../../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a>.</li>
<li>If the NVIDIA compiler complains about different versions of GCC between the current one and the one used for compiling the kernel, add in <code>/etc/profile</code>:</li>
</ul>
<pre>export IGNORE_CC_MISMATCH=1
</pre>
<ul><li>If Xorg is crashing , try disabling PAT. Pass the argument <code>nopat</code> to <a href="../../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a>.</li></ul>
<p>More information about troubleshooting the driver can be found in the <a rel="nofollow" class="external text" href="https://forums.geforce.com/">NVIDIA forums.</a>
</p>
<h2><span class="mw-headline" id="Bad_performance_after_installing_a_new_driver_version">Bad performance after installing a new driver version</span></h2>
<p>If FPS have dropped in comparison with older drivers, check if direct rendering is enabled (<code>glxinfo</code> is included in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mesa-demos">mesa-demos</a></span>):
</p>
<pre>$ glxinfo | grep direct
</pre>
<p>If the command prints:
</p>
<pre>direct rendering: No
</pre>
<p>A possible solution could be to regress to the previously installed driver version and rebooting afterwards.
</p>
<h2><span class="mw-headline" id="Avoid_screen_tearing">Avoid screen tearing</span></h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This has been reported to reduce the performance of some OpenGL applications and may produce issues in WebGL. It also drastically increases the time the driver needs to clock down after load (<a rel="nofollow" class="external text" href="https://devtalk.nvidia.com/default/topic/1048768/linux/if-you-have-gpu-clock-boost-problems-please-try-__gl_experimentalperfstrategy-1/">Nvidia-Support-Thread</a>).</div>
<p>Tearing can be avoided by forcing a full composition pipeline, regardless of the compositor you are using. To test whether this option will work, run:
</p>
<pre>$ nvidia-settings --assign CurrentMetaMode="nvidia-auto-select +0+0 { ForceFullCompositionPipeline = On }"
</pre>
<p>Or click on the <i>Advanced</i> button that is available on the <i>X Server Display Configuration</i> menu option. Select either <i>Force Composition Pipeline</i> or <i>Force Full Composition Pipeline</i> and click on <i>Apply</i>.
</p>
<p>In order to make the change permanent, it must be added to the <code>"Screen"</code> section of the <a href="../../en/Xorg.html" title="Xorg">Xorg</a> configuration file. When making this change, <code>TripleBuffering</code> should be enabled and <code>AllowIndirectGLXProtocol</code> should be disabled in the driver configuration as well. See example configuration below:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/20-nvidia.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "Device"
        Identifier "Nvidia Card"
        Driver     "nvidia"
        VendorName "NVIDIA Corporation"
        BoardName  "GeForce GTX 1050 Ti"
EndSection

Section "Screen"
    Identifier     "Screen0"
    Device         "Device0"
    Monitor        "Monitor0"
    Option         "metamodes" "nvidia-auto-select +0+0 {ForceFullCompositionPipeline=On}"
    Option         "AllowIndirectGLXProtocol" "off"
    Option         "TripleBuffer" "on"
EndSection
</pre>
<p>If you do not have an Xorg configuration file, you can create one for your present hardware using <code>nvidia-xconfig</code> (see <a href="../../en/NVIDIA.html#Automatic_configuration" title="NVIDIA">NVIDIA#Automatic configuration</a>) and move it from <code>/etc/X11/xorg.conf</code> to the preferred location <code>/etc/X11/xorg.conf.d/20-nvidia.conf</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Many of the configuration options produced in <code>20-nvidia.conf</code> by using <code>nvidia-xconfig</code> are set automatically by the driver and are not needed. To only use this file for enabling composition pipeline, only the section <code>"Screen"</code> containing lines with values for <code>Identifier</code> and <code>Option</code> are necessary. Other sections may be removed from this file.</div>
<h3><span class="mw-headline" id="Multi-monitor">Multi-monitor</span></h3>
<p>For multi-monitor setup you will need to specify <code>ForceCompositionPipeline=On</code> for each display. For example:
</p>
<pre>$ nvidia-settings --assign CurrentMetaMode="DP-2: nvidia-auto-select +0+0 {ForceCompositionPipeline=On}, DP-4: nvidia-auto-select +3840+0 {ForceCompositionPipeline=On}"
</pre>
<p>Without doing this, the <code>nvidia-settings</code> command will disable your secondary display.
</p>
<p>You can get the current screen names and offsets using <code>--query</code>:
</p>
<pre>$ nvidia-settings --query CurrentMetaMode
</pre>
<p>The above line is for two 3840x2160 monitors connected to DP-2 and DP-4. You will need to read the correct <code>CurrentMetaMode</code> by exporting <code>xorg.conf</code> and append <code>ForceCompositionPipeline</code> to each of your displays. Setting <code>ForceCompositionPipeline</code> only affects the targeted display. 
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Multi monitor setups using different model monitors may have slightly different refresh rates. If vsync is enabled by the driver it will sync to only one of these refresh rates which can cause the appearance of screen tearing on incorrectly synced monitors. Select to sync the display device which is the primarily used monitor as others will not sync properly. This is configurable in <code>~/.nvidia-settings-rc</code> as <code>0/XVideoSyncToDisplayID=</code> or by installing <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nvidia-settings">nvidia-settings</a></span> and using the graphical configuration options.</div>
<h3>
<span id="Avoid_screen_tearing_in_KDE_.28KWin.29"></span><span class="mw-headline" id="Avoid_screen_tearing_in_KDE_(KWin)">Avoid screen tearing in KDE (KWin)</span>
</h3>
<p>The problem is caused by incorrect assumption by the KDE devs about the behaviour of <code>glXSwapBuffers</code> and should be fixed in <b>Plasma 5.12</b>, <b>Plasma 5.15</b>, <b>Plasma 5.16</b> <a rel="nofollow" class="external autonumber" href="https://phabricator.kde.org/D19867">[2]</a>. Additionally, <a href="../../en/NVIDIA.html#DRM_kernel_mode_setting" title="NVIDIA">NVIDIA#DRM kernel mode setting</a> may be required. 
</p>
<h4><span class="mw-headline" id="Legacy_solutions">Legacy solutions</span></h4>
<p>For posterity, these are the legacy workarounds. Do <b>not</b> apply both workarounds because this may lead to high CPU load <a rel="nofollow" class="external autonumber" href="https://bugs.kde.org/show_bug.cgi?id=322060">[3]</a>.
</p>
<h5><span class="mw-headline" id="1._GL_threads">1. GL threads</span></h5>
<p>Set GL threads to sleep by exporting <code>__GL_YIELD="USLEEP"</code> to just <code>kwin_x11</code>. Unlike setting up a global environment variable, this affects only KWin. It should also have the advantage over other workarounds, like forcing triple buffering or forcing composition pipeline in the driver, that it doesn't introduce additional stuttering when scrolling in Firefox or moving windows.
</p>
<p>The script can be executed automatically at login with an autostart script:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/autostart-scripts/kwin.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/bash

(sleep 2s &amp;&amp; __GL_YIELD="USLEEP" kwin_x11 --replace)
</pre>
<p>Flag the script as executable.
</p>
<p>The <code>sleep</code> argument helps to prevent issues when KWin is restarted/hanging after logging in, you might need to increase this time.
</p>
<h5><span class="mw-headline" id="2._Use_TripleBuffering">2. Use TripleBuffering</span></h5>
<p>Make sure <code>TripleBuffering</code> has been enabled for the driver, see <a href="#Avoid_screen_tearing">#Avoid screen tearing</a>.
</p>
<p>Create the <code>/etc/profile.d/kwin.sh</code> file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/profile.d/kwin.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">export KWIN_TRIPLE_BUFFER=1</pre>
<p>Use <b>OpenGL 2.0 or later</b> as rendering backend under <i>System Settings &gt; Display and Monitor &gt; Compositor</i>.
</p>
<h2>
<span id="Modprobe_Error:_.22Could_not_insert_.27nvidia.27:_No_such_device.22_on_linux_.3E.3D4.8"></span><span class="mw-headline" id="Modprobe_Error:_&quot;Could_not_insert_'nvidia':_No_such_device&quot;_on_linux_&gt;=4.8">Modprobe Error: "Could not insert 'nvidia': No such device" on linux &gt;=4.8</span>
</h2>
<p>With linux 4.8, one can get the following errors when trying to use the discrete card:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ modprobe nvidia -vv</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">modprobe: INFO: custom logging function 0x409c10 registered
modprobe: INFO: Failed to insert module '/lib/modules/4.8.6-1-ARCH/extramodules/nvidia.ko.gz': No such device
modprobe: ERROR: could not insert 'nvidia': No such device
modprobe: INFO: context 0x24481e0 released
insmod /lib/modules/4.8.6-1-ARCH/extramodules/nvidia.ko.gz 
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ dmesg</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
NVRM: The NVIDIA GPU 0000:01:00.0 (PCI ID: 10de:139b)
NVRM: installed in this system is not supported by the 370.28
NVRM: NVIDIA Linux driver release.  Please see 'Appendix
NVRM: A - Supported NVIDIA GPU Products' in this release's
NVRM: README, available on the Linux driver download page
NVRM: at www.nvidia.com.
...
</pre>
<p>This problem is caused by bad commits pertaining to PCIe power management in the Linux Kernel (as documented in <a rel="nofollow" class="external text" href="https://devtalk.nvidia.com/default/topic/971733/-370-28-with-kernel-4-8-on-gt-2015-machines-driver-claims-card-not-supported-if-nvidia-is-not-primary-card/">this NVIDIA DevTalk thread</a>). 
</p>
<p>The workaround is to add <code>pcie_port_pm=off</code> to your <a href="../../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a>. Note that this disables PCIe power management for all devices.
</p>
<h2><span class="mw-headline" id="Poor_performance_after_resuming_from_suspend">Poor performance after resuming from suspend</span></h2>
<p>If you are getting poor performance after resuming from suspend, you need to register the nvidia kernel module with the ACPI subsystem. This can be done by <a href="../../en/Kernel_module.html#Setting_module_options" class="mw-redirect" title="Kernel modules">loading</a> the <code>nvidia</code> module with the <code>NVreg_RegisterForACPIEvents=1 NVreg_EnableMSI=1</code> options.
</p>
<p>This also seems to fix issues with corruption to the desktop background on resume with GNOME.
</p>
<h2><span class="mw-headline" id="CPU_spikes_with_400_series_cards">CPU spikes with 400 series cards</span></h2>
<p>If you are experiencing intermittent CPU spikes with a 400 series card, it may be caused by PowerMizer constantly changing the GPU's clock frequency. Switching PowerMizer's setting from Adaptive to Performance, add the following to the <code>Device</code> section of your Xorg configuration:
</p>
<pre> Option "RegistryDwords" "PowerMizerEnable=0x1; PerfLevelSrc=0x3322; PowerMizerDefaultAC=0x1"
</pre>
<h2><span class="mw-headline" id="Full_system_freeze_or_crashes_when_using_Flash">Full system freeze or crashes when using Flash</span></h2>
<p>If you experience occasional full system freezes using <a href="../../en/Browser_plugins.html#Flash_players" class="mw-redirect" title="Flash">Flash</a>, a possible workaround is to disable Hardware Acceleration:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/adobe/mms.cfg</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">EnableLinuxHWVideoDecode=0</pre>
<p>Or, if you want to keep Hardware acceleration enabled but allowing a higher chance of screen tearing, you may try to before starting a browser:
</p>
<pre>export VDPAU_NVIDIA_NO_OVERLAY=1
</pre>
<h2>
<span id="Laptops:_X_hangs_on_login.2Fout.2C_worked_around_with_Ctrl.2BAlt.2BBackspace"></span><span class="mw-headline" id="Laptops:_X_hangs_on_login/out,_worked_around_with_Ctrl+Alt+Backspace">Laptops: X hangs on login/out, worked around with Ctrl+Alt+Backspace</span>
</h2>
<p>If, while using the legacy NVIDIA drivers, Xorg hangs on login and logout (particularly with an odd screen split into two black and white/gray pieces), but logging in is still possible via <code>Ctrl+Alt+Backspace</code> (or whatever the new "kill X" key binding is), try adding this in <code>/etc/modprobe.d/modprobe.conf</code>:
</p>
<pre>options nvidia NVreg_Mobile=1
</pre>
<p>One user had luck with this instead, but it makes performance drop significantly for others:
</p>
<pre>options nvidia NVreg_DeviceFileUID=0 NVreg_DeviceFileGID=33 NVreg_DeviceFileMode=0660 NVreg_SoftEDIDs=0 NVreg_Mobile=1
</pre>
<p>Note that <code>NVreg_Mobile</code> needs to be changed according to the laptop:
</p>
<ul>
<li>1 for Dell laptops.</li>
<li>2 for non-Compal Toshiba laptops.</li>
<li>3 for other laptops.</li>
<li>4 for Compal Toshiba laptops.</li>
<li>5 for Gateway laptops.</li>
</ul>
<p>See <a rel="nofollow" class="external text" href="ftp://download.nvidia.com/XFree86/Linux-x86/355.11/README/README.txt">NVIDIA Driver's README: Appendix K</a> for more information.
</p>
<h2>
<span id="Screen.28s.29_found.2C_but_none_have_a_usable_configuration"></span><span class="mw-headline" id="Screen(s)_found,_but_none_have_a_usable_configuration">Screen(s) found, but none have a usable configuration</span>
</h2>
<p>Sometimes NVIDIA and X have trouble finding the active screen. If your graphics card has multiple outputs try plugging your monitor into the other ones. On a laptop it may be because your graphics card has VGA/TV out. Xorg.0.log will provide more info.
</p>
<p>Another thing to try is adding invalid <code>"ConnectedMonitor" Option</code> to <code>Section "Device"</code>
to force Xorg throws error and shows you how correct it.
<a rel="nofollow" class="external text" href="ftp://download.nvidia.com/XFree86/Linux-x86/355.11/README/xconfigoptions.html">Here</a>
more about ConnectedMonitor setting.
</p>
<p>After re-run X see Xorg.0.log to get valid CRT-x,DFP-x,TV-x values.
</p>
<p><code>nvidia-xconfig --query-gpu-info</code> could be helpful.
</p>
<h2>
<span id="Blackscreen_at_X_startup_.2F_Machine_poweroff_at_X_shutdown"></span><span class="mw-headline" id="Blackscreen_at_X_startup_/_Machine_poweroff_at_X_shutdown">Blackscreen at X startup / Machine poweroff at X shutdown</span>
</h2>
<p>If you have installed an update of Nvidia and your screen stays black after launching Xorg, or if shutting down Xorg causes a machine poweroff, try the below workarounds:
</p>
<ul><li>Prepend "xrandr --auto" to your xinitrc</li></ul>
<ul><li>Use the <code>rcutree.rcu_idle_gp_delay=1</code> <a href="../../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a>.</li></ul>
<ul><li>You can also try to add the <code>nvidia</code> module directly to your <a href="../../en/Mkinitcpio.html" title="Mkinitcpio">mkinitcpio</a> config file.</li></ul>
<ul><li>If the screen still stays black with <b>both</b> the <code>rcutree.rcu_idle_gp_delay=1</code> <a href="../../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a> and the <code>nvidia</code> module directly in the <a href="../../en/Mkinitcpio.html" title="Mkinitcpio">mkinitcpio</a> config file, try re-installing <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nvidia">nvidia</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nvidia-utils">nvidia-utils</a></span> in that order, and finally reload the driver:</li></ul>
<pre># modprobe nvidia
</pre>
<h2><span class="mw-headline" id="Backlight_is_not_turning_off_in_some_occasions">Backlight is not turning off in some occasions</span></h2>
<p>By default, DPMS should turn off backlight with the timeouts set or by running xset. However, probably due to a bug in the proprietary Nvidia drivers the result is a blank screen with no powersaving whatsoever. To workaround it, until the bug has been fixed you can use the <code>vbetool</code> as root.
</p>
<p>Install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=vbetool">vbetool</a></span> package.
</p>
<p>Turn off your screen on demand and then by pressing a random key backlight turns on again:
</p>
<pre>vbetool dpms off &amp;&amp; read -n1; vbetool dpms on
</pre>
<p>Alternatively, xrandr is able to disable and re-enable monitor outputs without requiring root.
</p>
<pre>xrandr --output DP-1 --off; read -n1; xrandr --output DP-1 --auto
</pre>
<h3><span class="mw-headline" id="Driver_415:_HardDPMS">Driver 415: HardDPMS</span></h3>
<div class="noprint archwiki-template-message">
<p><a href="../../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a><b>This article or section needs expansion.</b><a href="../../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Add references for the "user reports". (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:NVIDIA/Troubleshooting">Talk:NVIDIA/Troubleshooting#</a>)</div>
</div>
<p>Proprietary driver 415 includes a new feature called HardDPMS. This is reported by some users to solve the issues with suspending monitors connected over DisplayPort.
It is reported to become the default in a future driver version, but for now, the <code>HardDPMS</code> option can be set in the <code>Device</code> or <code>Screen</code> sections. For example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/20-nvidia.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "Device"
    ...
    Option         "HardDPMS" "true"    
    ...
EndSection

Section "Screen"
    ...
    Option         "HardDPMS" "true"
    ...
EndSection
</pre>
<p><code>HardDPMS</code> will trigger on screensaver settings like <code>BlankTime</code>. The following <code>ServerFlags</code> will set your monitor(s) to suspend after 10 minutes of inactivity:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/20-nvidia.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "ServerFlags"
    Option     "BlankTime" "10"
EndSection
</pre>
<h2><span class="mw-headline" id="Xorg_fails_to_load_or_Red_Screen_of_Death">Xorg fails to load or Red Screen of Death</span></h2>
<p>If you get a red screen and use GRUB, disable the GRUB framebuffer by editing <code>/etc/default/grub</code> and uncomment <code>GRUB_TERMINAL_OUTPUT=console</code>. For more information see <a href="../../en/GRUB/Tips_and_tricks.html#Disable_framebuffer" title="GRUB/Tips and tricks">GRUB/Tips and tricks#Disable framebuffer</a>.
</p>
<h2><span class="mw-headline" id="Black_screen_on_systems_with_Intel_integrated_GPU">Black screen on systems with Intel integrated GPU</span></h2>
<p>If you have an Intel CPU with an integrated GPU (e.g. Intel HD 4000) and have installed the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nvidia">nvidia</a></span> package, you may experience a black screen on boot, when changing virtual terminal, or when exiting an X session. This may be caused by a conflict between the graphics modules. This is solved by blacklisting the Intel GPU modules. Create the file <code>/etc/modprobe.d/blacklist.conf</code> and prevent the <i>i915</i> and <i>intel_agp</i> modules from loading on boot:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/blacklist.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">install i915 /usr/bin/false
install intel_agp /usr/bin/false
</pre>
<h2><span class="mw-headline" id="No_audio_over_HDMI">No audio over HDMI</span></h2>
<p>Sometimes nvidia HDMI audio devices are not shown when you do
</p>
<pre>aplay -l
</pre>
<p>For whatever reason on some new machines, the audio chip on the nvidia GPU is disabled at boot. Read more <a rel="nofollow" class="external text" href="https://devtalk.nvidia.com/default/topic/1024022/linux/gtx-1060-no-audio-over-hdmi-only-hda-intel-detected-azalia/?offset=4">here</a> and <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=230125">here</a>
</p>
<p>You need to reload the nvidia device with audio enabled. In order to do that make sure that your GPU is on (in case of laptops/Bumblebee) and that you are not running X on it, because it's going to reset:
</p>
<pre># setpci -s 01:00.0 0x488.l=0x2000000:0x2000000
# rmmod nvidia-drm nvidia-modeset nvidia
# echo 1 &gt; /sys/bus/pci/devices/0000:01:00.0/remove
# echo 1 &gt; /sys/bus/pci/devices/0000:00:01.0/rescan
# modprobe nvidia-drm
# xinit -- -retro
</pre>
<p>If you are running your TTY on nvidia, put the lines in a script so you don't end up with no screen.
</p>
<h2><span class="mw-headline" id="Black_screen_on_systems_with_VIA_integrated_GPU">Black screen on systems with VIA integrated GPU</span></h2>
<p>As above, blacklisting the <i>viafb</i> module may resolve conflicts with NVIDIA drivers:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/blacklist.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">install viafb /usr/bin/false
</pre>
<h2>
<span id="X_fails_with_.22no_screens_found.22_when_using_Multiple_GPUs"></span><span class="mw-headline" id='X_fails_with_"no_screens_found"_when_using_Multiple_GPUs'>X fails with "no screens found" when using Multiple GPUs</span>
</h2>
<p>In situations where you might have multiple GPUs on a system and X fails to start with:
</p>
<pre>[ 76.633] (EE) No devices detected.
[ 76.633] Fatal server error:
[ 76.633] no screens found
</pre>
<p>then you need to add your discrete card's BusID to your X configuration. This can happen on systems with an Intel CPU and an integrated GPU or if you have more than one Nvidia card connected. Find your BusID:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># lspci | grep VGA</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">00:02.0 VGA compatible controller: Intel Corporation Xeon E3-1200 v2/3rd Gen Core processor Graphics Controller (rev 09)
01:00.0 VGA compatible controller: NVIDIA Corporation GK107 [GeForce GTX 650] (rev a1)
</pre>
<p>then you fix it by adding it to the card's Device section in your X configuration. In my case:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/10-nvidia.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "Device"
    Identifier     "Device0"
    Driver         "nvidia"
    VendorName     "NVIDIA Corporation"
    BusID          "PCI:1:0:0"
EndSection
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> BusID formatting is important!</div>
<p>In the example above <code>01:00.0</code> is stripped to be written as <code>1:0:0</code>, however come conversions can be more complicated. <code>lspci</code> output is in hex format, but in config files the BusID's are in decimal format! This means that in cases where the BusID is greater than 9 you will need to convert it to decimal! 
</p>
<p>ie: <code>5e:00.0</code> from lspci becomes <code>PCI:94:0:0</code>.
</p>
<h2>
<span id="Xorg_fails_during_boot.2C_but_otherwise_starts_fine"></span><span class="mw-headline" id="Xorg_fails_during_boot,_but_otherwise_starts_fine">Xorg fails during boot, but otherwise starts fine</span>
</h2>
<p>On very fast booting systems, systemd may attempt to start the display manager before the NVIDIA driver has fully initialized. You will see a message like the following in your logs only when Xorg runs during boot.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/var/log/Xorg.0.log</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[     1.807] (EE) NVIDIA(0): Failed to initialize the NVIDIA kernel module. Please see the
[     1.807] (EE) NVIDIA(0):     system's kernel log for additional error messages and
[     1.808] (EE) NVIDIA(0):     consult the NVIDIA README for details.
[     1.808] (EE) NVIDIA(0):  *** Aborting ***</pre>
<p>In this case you will need to establish an ordering dependency from the display manager to the DRI device. First create device units for DRI devices by creating a new udev rules file.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/99-systemd-dri-devices.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ACTION=="add", KERNEL=="card*", SUBSYSTEM=="drm", TAG+="systemd"</pre>
<p>Then create dependencies from the display manager to the device(s).
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/display-manager.service.d/10-wait-for-dri-devices.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Wants=dev-dri-card0.device
After=dev-dri-card0.device</pre>
<p>If you have additional cards needed for the desktop then list them in Wants and After seperated by spaces.
</p>
<h2><span class="mw-headline" id="xrandr_BadMatch">xrandr BadMatch</span></h2>
<p>If you are trying to configure a WQHD monitor such as DELL U2515H using <a href="../../en/Xrandr.html" title="Xrandr">xrandr</a> and <code>xrandr --addmode</code> gives you the error <code>X Error of failed request: BadMatch</code>, it might be because the proprietary NVIDIA driver clips the pixel clock maximum frequency of HDMI output to 225 MHz or lower. To set the monitor to maximum resolution you have to install <a href="../../en/Nouveau.html" title="Nouveau">nouveau</a> drivers. You can force nouveau to use a specific pixel clock frequency by setting <code>nouveau.hdmimhz=297</code> (or <code>330</code>) in your <a href="../../en/Kernel_parameters.html" title="Kernel parameters">Kernel parameters</a>.
</p>
<p>Alternatively, it may be that your monitor's EDID is incorrect. See <a href="#Override_EDID">#Override EDID</a>.
</p>
<p>Another reason could be that per default current NVidia drivers will only allow modes explicitly reported by EDID; but sometimes refresh rates and/or resolutions are desired which are not reported by the monitor (although the EDID information is correct; it's just that current NVidia drivers are too restrictive).
</p>
<p>If this happens, you may want to add an option to <code>xorg.conf</code> to allow non-EDID modes:
</p>
<pre>Section "Device"
    Identifier     "Device0"
    Driver         "nvidia"
    VendorName     "NVIDIA Corporation"
...
    Option         "ModeValidation" "AllowNonEdidModes"
...
EndSection
</pre>
<p>This can be set per-output. See NVidia driver readme (Appendix B. X Config Options) for more information.
</p>
<h2><span class="mw-headline" id="Override_EDID">Override EDID</span></h2>
<p>See <a href="../../en/Kernel_mode_setting.html#Forcing_modes_and_EDID" title="Kernel mode setting">Kernel mode setting#Forcing modes and EDID</a>, <a href="../../en/Xrandr.html#Troubleshooting" title="Xrandr">Xrandr#Troubleshooting</a> and  <a href="../../en/Qnix_QX2710.html#Fixing_X11_with_Nvidia" title="Qnix QX2710">Qnix QX2710#Fixing X11 with Nvidia</a>.
</p>
<h2><span class="mw-headline" id="Overclocking_with_nvidia-settings_GUI_not_working">Overclocking with nvidia-settings GUI not working</span></h2>
<div class="noprint archwiki-template-message">
<p><a href="../../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a><b>This article or section needs language, wiki syntax or style improvements. See <a href="../../en/Help:Style.html" title="Help:Style">Help:Style</a> for reference.</b><a href="../../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Duplication, vague "not working" (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:NVIDIA/Troubleshooting">Talk:NVIDIA/Troubleshooting#</a>)</div>
</div>
<p>Workaround is to use nvidia-settings CLI to query and set certain variables after enabling overclocking (as explained in <a href="../../en/NVIDIA/Tips_and_tricks.html#Enabling_overclocking" title="NVIDIA/Tips and tricks">NVIDIA/Tips and tricks#Enabling overclocking</a>, see <span class="plainlinks archwiki-template-man" title="$ man 1 nvidia-settings"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/nvidia-settings.1">nvidia-settings(1)</a></span> for more information).
</p>
<p>Example to query all variables:
</p>
<pre> nvidia-settings -q all
</pre>
<p>Example to set PowerMizerMode to prefer performance mode:
</p>
<pre> nvidia-settings -a [gpu:0]/GPUPowerMizerMode=1
</pre>
<p>Example to set fan speed to fixed 21%:
</p>
<pre>nvidia-settings -a [gpu:0]/GPUFanControlState=1 -a [fan:0]/GPUTargetFanSpeed=21
</pre>
<p>Example to set multiple variables at once (overclock GPU by 50MHz, overclock video memory by 50MHz, increase GPU voltage by 100mV):
</p>
<pre> nvidia-settings -a GPUGraphicsClockOffsetAllPerformanceLevels=50 -a GPUMemoryTransferRateOffsetGPUGraphicsClockOffsetAllPerformanceLevels=50 -a GPUOverVoltageOffset=100
</pre>
<h2><span class="mw-headline" id="Overclocking_not_working_with_Unknown_Error">Overclocking not working with Unknown Error</span></h2>
<p>If you're running Xorg as a non-root user and trying to overclock your NVIDIA GPU, you will get an error similar to this one:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ nvidia-settings -a "[gpu:0]/GPUGraphicsClockOffset[3]=10"</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ERROR: Error assigning value 10 to attribute 'GPUGraphicsClockOffset' (trinity-zero:1[gpu:0]) as specified in assignment
        '[gpu:0]/GPUGraphicsClockOffset[3]=10' (Unknown Error).</pre>
<p>To avoid this issue, Xorg has to be run as the root user. See <a href="../../en/Xorg.html#Rootless_Xorg" title="Xorg">Xorg#Rootless Xorg</a> for details.
</p>
<h2><span class="mw-headline" id="System_will_not_boot_after_driver_was_installed">System will not boot after driver was installed</span></h2>
<p>If after installing the <a href="../../en/NVIDIA.html" title="NVIDIA">NVIDIA</a> driver your system becomes stuck before reaching the display manager, try to <a href="../../en/Kernel_mode_setting.html#Disabling_modesetting" title="Kernel mode setting">disable kernel mode setting</a>.
</p>
<h2>
<span id="X_fails_with_.22Failing_initialization_of_X_screen.22"></span><span class="mw-headline" id='X_fails_with_"Failing_initialization_of_X_screen"'>X fails with "Failing initialization of X screen"</span>
</h2>
<p>If <code>/var/log/Xorg.0.log</code> says X server fails to initialize screen
</p>
<pre>(EE) NVIDIA(G0): GPU screens are not yet supported by the NVIDIA driver
(EE) NVIDIA(G0): Failing initialization of X screen
</pre>
<p>and nvidia-smi says <code>No running processes found</code>
</p>
<p>The solution is at first reinstall latest <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nvidia-utils">nvidia-utils</a></span>, and then copy <code>/usr/share/X11/xorg.conf.d/10-nvidia-drm-outputclass.conf</code> to <code>/etc/X11/xorg.conf.d/10-nvidia-drm-outputclass.conf</code>, and then edit <code>/etc/X11/xorg.conf.d/10-nvidia-drm-outputclass.conf</code> and add the line <code>Option "PrimaryGPU" "yes"</code>. Restart the computer. The problem will be fixed.
</p>
<h2><span class="mw-headline" id="System_does_not_return_from_suspend">System does not return from suspend</span></h2>
<p>What you see in the log:
</p>
<pre>kernel: nvidia-modeset: ERROR: GPU:0: Failed detecting connected display devices
kernel: nvidia-modeset: ERROR: GPU:0: Failed detecting connected display devices
kernel: nvidia-modeset: WARNING: GPU:0: Failure processing EDID for display device DELL U2412M (DP-0).
kernel: nvidia-modeset: WARNING: GPU:0: Unable to read EDID for display device DELL U2412M (DP-0)
kernel: nvidia-modeset: ERROR: GPU:0: Failure reading maximum pixel clock value for display device DELL U2412M (DP-0).
</pre>
<p>A possible solution based on <a rel="nofollow" class="external autonumber" href="https://forums.developer.nvidia.com/t/solution-for-nvidia-sleep-wake-issue-in-linux/110911">[4]</a>:
</p>
<p>Run this command to get the <code><i>version</i></code> string:
</p>
<pre># strings /sys/firmware/acpi/tables/DSDT | grep -i 'windows ' | sort | tail -1
</pre>
<p>Add the <code>acpi_osi=! "acpi_osi=<i>version</i>"</code> <a href="../../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a> to your <a href="../../en/Arch_boot_process.html#Boot_loader" class="mw-redirect" title="Boot loader">boot loader</a> configuration.
</p>
<h2><span class="mw-headline" id="Vulkan_error_on_applications_start">Vulkan error on applications start</span></h2>
<div class="noprint archwiki-template-message">
<p><a href="../../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a><b>The factual accuracy of this article or section is disputed.</b><a href="../../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Need confirmation by other users (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:NVIDIA/Troubleshooting">Talk:NVIDIA/Troubleshooting#</a>)</div>
</div>
<p>On executing an application that require Vulkan acceleration, if you get this error
</p>
<pre>Vulkan call failed: -4
</pre>
<p>try to delete the <code>.nv</code> folder in your user's home directory.
</p>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../../en/Category:Graphics.html" title="Category:Graphics">Graphics</a></li>
<li><a href="../../en/Category:X_server.html" title="Category:X server">X server</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li>
<li><a href="../../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li>
<li><a href="../../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=NVIDIA/Troubleshooting&amp;oldid=632002">https://wiki.archlinux.org/index.php?title=NVIDIA/Troubleshooting&amp;oldid=632002</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 16 August 2020, at 07:32.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
