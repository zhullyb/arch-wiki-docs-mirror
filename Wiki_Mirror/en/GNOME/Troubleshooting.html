<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>GNOME/Troubleshooting - ArchWiki</title>
<link rel="stylesheet" href="../../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-GNOME_Troubleshooting rootpage-GNOME skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">GNOME/Troubleshooting</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"><span class="subpages">&lt; <a href="../../en/GNOME.html" title="GNOME">GNOME</a></span></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<p>See <a href="../../en/GNOME.html" title="GNOME">GNOME</a> for the main article.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Shell_freezes"><span class="tocnumber">1</span> <span class="toctext">Shell freezes</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Shell_segfaults"><span class="tocnumber">2</span> <span class="toctext">Shell segfaults</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Incorrect_application_defaults"><span class="tocnumber">3</span> <span class="toctext">Incorrect application defaults</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Tracker_&amp;_Documents_do_not_list_any_local_files"><span class="tocnumber">4</span> <span class="toctext">Tracker &amp; Documents do not list any local files</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Unable_to_add_accounts_in_Empathy_and_GNOME_Online_Accounts"><span class="tocnumber">5</span> <span class="toctext">Unable to add accounts in Empathy and GNOME Online Accounts</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Empathy_does_not_use_GNOME_Online_Accounts"><span class="tocnumber">6</span> <span class="toctext">Empathy does not use GNOME Online Accounts</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#GNOME_Online_Accounts_settings_page_does_not_show_properly"><span class="tocnumber">7</span> <span class="toctext">GNOME Online Accounts settings page does not show properly</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Cannot_change_settings_in_dconf-editor"><span class="tocnumber">8</span> <span class="toctext">Cannot change settings in dconf-editor</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#When_an_extension_breaks_the_shell"><span class="tocnumber">9</span> <span class="toctext">When an extension breaks the shell</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#Extensions_do_not_work_after_GNOME_3_update"><span class="tocnumber">10</span> <span class="toctext">Extensions do not work after GNOME 3 update</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="#Keyboard_shortcut_do_not_work_with_only_conky_running"><span class="tocnumber">11</span> <span class="toctext">Keyboard shortcut do not work with only conky running</span></a></li>
<li class="toclevel-1 tocsection-12"><a href="#Unable_to_apply_stored_configuration_for_monitors"><span class="tocnumber">12</span> <span class="toctext">Unable to apply stored configuration for monitors</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="#Consistent_cursor_theme"><span class="tocnumber">13</span> <span class="toctext">Consistent cursor theme</span></a></li>
<li class="toclevel-1 tocsection-14"><a href="#Windows_cannot_be_modified_with_Alt-Key_+_mouse-button"><span class="tocnumber">14</span> <span class="toctext">Windows cannot be modified with Alt-Key + mouse-button</span></a></li>
<li class="toclevel-1 tocsection-15"><a href="#Slow_loading_of_system_icons/slow_GDM_login"><span class="tocnumber">15</span> <span class="toctext">Slow loading of system icons/slow GDM login</span></a></li>
<li class="toclevel-1 tocsection-16"><a href="#Artifacts_when_maximizing_windows"><span class="tocnumber">16</span> <span class="toctext">Artifacts when maximizing windows</span></a></li>
<li class="toclevel-1 tocsection-17"><a href="#Tear-free_video_with_Intel_HD_Graphics"><span class="tocnumber">17</span> <span class="toctext">Tear-free video with Intel HD Graphics</span></a></li>
<li class="toclevel-1 tocsection-18"><a href="#Window_opens_behind_other_windows_when_using_multiple_monitors"><span class="tocnumber">18</span> <span class="toctext">Window opens behind other windows when using multiple monitors</span></a></li>
<li class="toclevel-1 tocsection-19"><a href="#Lock_button_fails_to_re-enable_touchpad"><span class="tocnumber">19</span> <span class="toctext">Lock button fails to re-enable touchpad</span></a></li>
<li class="toclevel-1 tocsection-20"><a href="#GNOME_Shell_keyboard_sources_menu_not_visible"><span class="tocnumber">20</span> <span class="toctext">GNOME Shell keyboard sources menu not visible</span></a></li>
<li class="toclevel-1 tocsection-21"><a href="#Mouse_cursor_missing"><span class="tocnumber">21</span> <span class="toctext">Mouse cursor missing</span></a></li>
<li class="toclevel-1 tocsection-22"><a href="#No_restart_button_in_session_menu_when_screen_is_locked"><span class="tocnumber">22</span> <span class="toctext">No restart button in session menu when screen is locked</span></a></li>
<li class="toclevel-1 tocsection-23"><a href="#PulseAudio_system-wide_causes_delay_in_GNOME_and_GDM"><span class="tocnumber">23</span> <span class="toctext">PulseAudio system-wide causes delay in GNOME and GDM</span></a></li>
<li class="toclevel-1 tocsection-24"><a href="#GNOME_crashes_when_trying_to_reorder_applications_in_the_GNOME_Shell_Dash"><span class="tocnumber">24</span> <span class="toctext">GNOME crashes when trying to reorder applications in the GNOME Shell Dash</span></a></li>
<li class="toclevel-1 tocsection-25"><a href="#Gnome_Crashes_while_installing_gnome-extra"><span class="tocnumber">25</span> <span class="toctext">Gnome Crashes while installing gnome-extra</span></a></li>
<li class="toclevel-1 tocsection-26"><a href="#No_H264_Video_in_Gnome_Video_Player_(Totem)"><span class="tocnumber">26</span> <span class="toctext">No H264 Video in Gnome Video Player (Totem)</span></a></li>
<li class="toclevel-1 tocsection-27"><a href="#No_suspend_on_LID_closure"><span class="tocnumber">27</span> <span class="toctext">No suspend on LID closure</span></a></li>
<li class="toclevel-1 tocsection-28"><a href="#gnome-shell_/_gnome-session_crashes_on_session_startup"><span class="tocnumber">28</span> <span class="toctext">gnome-shell / gnome-session crashes on session startup</span></a></li>
<li class="toclevel-1 tocsection-29"><a href="#Low_OpenGL_performance_and_stuttering"><span class="tocnumber">29</span> <span class="toctext">Low OpenGL performance and stuttering</span></a></li>
<li class="toclevel-1 tocsection-30"><a href="#GNOME_Wayland_session_not_available"><span class="tocnumber">30</span> <span class="toctext">GNOME Wayland session not available</span></a></li>
<li class="toclevel-1 tocsection-31"><a href="#gnome-control-center_is_empty_and_does_not_list_any_categories"><span class="tocnumber">31</span> <span class="toctext">gnome-control-center is empty and does not list any categories</span></a></li>
<li class="toclevel-1 tocsection-32"><a href="#Gnome_freezes_for_a_second_after_using_a_Function_(Fn)_key_shortcut"><span class="tocnumber">32</span> <span class="toctext">Gnome freezes for a second after using a Function (Fn) key shortcut</span></a></li>
<li class="toclevel-1 tocsection-33"><a href="#Zoom_in/out_keyboard_shortcuts_don't_work_on_some_apps"><span class="tocnumber">33</span> <span class="toctext">Zoom in/out keyboard shortcuts don't work on some apps</span></a></li>
<li class="toclevel-1 tocsection-34"><a href="#Printers_configuration_does_not_work_in_GNOME_settings"><span class="tocnumber">34</span> <span class="toctext">Printers configuration does not work in GNOME settings</span></a></li>
<li class="toclevel-1 tocsection-35"><a href="#Screen_reader_does_not_work"><span class="tocnumber">35</span> <span class="toctext">Screen reader does not work</span></a></li>
<li class="toclevel-1 tocsection-36"><a href="#Gnome_Software_does_not_show_archlinux_packages"><span class="tocnumber">36</span> <span class="toctext">Gnome Software does not show archlinux packages</span></a></li>
<li class="toclevel-1 tocsection-37"><a href="#Gnome_freezes_when_typing_with_multiple_devices"><span class="tocnumber">37</span> <span class="toctext">Gnome freezes when typing with multiple devices</span></a></li>
<li class="toclevel-1 tocsection-38"><a href="#Delay_when_powering_off_or_restarting"><span class="tocnumber">38</span> <span class="toctext">Delay when powering off or restarting</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Shell_freezes">Shell freezes</span></h2>
<p>In the event of a Shell freeze (which might be caused by certain appearance tweaks, malfunctioning extensions or perhaps a lack of available memory) restarting the Shell by pressing <code>Alt</code> + <code>F2</code> and then entering <b>r</b> may not be possible.
</p>
<p>In this case, try switching to another TTY (<b>Ctrl</b> + <b>Alt</b> + <b>F2</b>) and entering the following command: <code>pkill -HUP gnome-shell</code>. It may take a few seconds before the Shell successfully restarts. On X11 restarting the shell in this fashion should not log the user out but it is a good idea to try and ensure that all work is saved anyway; on Wayland (currently the default) restarting the shell kills the whole session, so everything will be lost.
</p>
<p>If this fails, the <a href="../../en/Xorg.html" title="Xorg">Xorg</a> server will need to be restarted either by: <code>pkill X</code> for console logins or: <code>systemctl restart gdm</code> for GDM logins. Bear in mind that restarting the Xorg server will log the user out so try to ensure that all work is saved before attempting this.
</p>
<h2><span class="mw-headline" id="Shell_segfaults">Shell segfaults</span></h2>
<p>If you experience gnome-shell disappearing and reappearing, it means that it has segfaulted (probably because of an extension). Gnome-shell extensions use javascript; to enable debugging of extensions, it is necessary to
</p>
<p>1) rebuild <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gjs">gjs</a></span> with the following changes to the PKGBUILD:
</p>
<pre>--- PKGBUILD (old)
+++ PKGBUILD (new)
@@ -29,10 +29,13 @@
 build() {
   cd $pkgname
+  export CXXFLAGS='-g -O0'
+  export CPPFLAGS='-D_FORITFY_SOURCE=0'
   ./configure \
+    --enable-debug-symbols=-gdwarf-2 \
     --prefix=/usr \
     --libexecdir=/usr/lib \
     --disable-static \
     --enable-compile-warnings=yes \
     --with-xvfb-tests
   sed -i -e 's/ -shared / -Wl,-O1,--as-needed\0/g' libtool
   make
 }</pre>
<p>2) rebuild <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=js52">js52</a></span><sup>[<a href="../../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">broken link</a>: package not found]</sup> with the following changes to the PKGBUILD:
</p>
<pre>--- PKGBUILD (old)
+++ PKGBUILD (new)
@@ -24,0 +25 @@
+options=(debug)
@@ -36,11 +37,9 @@
 build() {
   unset CPPFLAGS
   CFLAGS+=' -fno-delete-null-pointer-checks -fno-strict-aliasing -fno-tree-vrp -flto=3'
   CXXFLAGS+=' -fno-delete-null-pointer-checks -fno-strict-aliasing -fno-tree-vrp -flto=3'
   export CC=gcc CXX=g++ PYTHON=/usr/bin/python2
 
   cd mozilla-unified/js/src
   sh configure \
     --prefix=/usr \
-    --disable-debug \
-    --disable-debug-symbols \</pre>
<p>Once the gjs and js52 packages are installed and gnome-shell restarted (<code>Alt</code>+ <code>F2</code> + <code>r</code>), whenever gnome-shell crashes the debug symbols will be available.
</p>
<p>After the crash:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ coredumpctl -1</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">TIME                            PID   UID   GID SIG COREFILE  EXE
Mon 2017-07-17 15:34:49 CEST  27368  1000  1000  11 present   /usr/bin/gnome-shell
$ coredumpctl gdb 27368
(gdb) bt
#0  0x00007fbc7b997945 in js::GCMethods&lt;JSObject*&gt;::needsPostBarrier(JSObject*) (v=0x7fbc0a9548c0) at /usr/include/mozjs-38/js/RootingAPI.h:663
#1  0x00007fbc7b997945 in JS::Heap&lt;JSObject*&gt;::set(JSObject*) (newPtr=0x0, this=0x254c260) at /usr/include/mozjs-38/js/RootingAPI.h:296
#2  0x00007fbc7b997945 in JS::Heap&lt;JSObject*&gt;::operator=(JSObject* const&amp;) (p=&lt;optimized out&gt;, this=0x254c260) at /usr/include/mozjs-38/js/RootingAPI.h:266
#3  0x00007fbc7b997945 in GjsMaybeOwned&lt;JSObject*&gt;::reset() (this=0x254c250) at ./gjs/jsapi-util-root.h:267
#4  0x00007fbc7b997945 in closure_clear_idle(void*) (data=0x254c220) at gi/closure.cpp:133
#5  0x00007fbc79abd8c5 in g_main_context_dispatch () at /usr/lib/libglib-2.0.so.0
#6  0x00007fbc79abdc88 in  () at /usr/lib/libglib-2.0.so.0
#7  0x00007fbc79abdfa2 in g_main_loop_run () at /usr/lib/libglib-2.0.so.0
#8  0x00007fbc7b27508c in meta_run () at /usr/lib/libmutter-0.so.0
#9  0x0000000000401ff7 in main ()</pre>
<p>You can then report the bug on the <a rel="nofollow" class="external text" href="https://gitlab.gnome.org/GNOME/gnome-shell/issues">project page</a> at GNOME GitLab.
</p>
<h2><span class="mw-headline" id="Incorrect_application_defaults">Incorrect application defaults</span></h2>
<p>When installing applications for the first time you may find that GNOME has the wrong application associated to a certain protocols - for instance, <i>easytag</i> becomes the folder handler instead of <a href="../../en/GNOME/Files.html" class="mw-redirect" title="GNOME Files">GNOME Files</a>.
</p>
<p>For GNOME Files see the following page: <a href="../../en/GNOME/Files.html#Files_is_no_longer_the_default_file_manager" class="mw-redirect" title="GNOME Files">GNOME Files#Files is no longer the default file manager</a>.
</p>
<p>For Document Viewer, run the following command:
</p>
<pre>$ xdg-mime default evince.desktop application/pdf
</pre>
<p>For other applications, default handler settings are detailed on the following page: <a href="../../en/Default_applications.html" title="Default applications">Default applications</a>.
</p>
<p>Optionally, you can <a href="../../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">install</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gnome-defaults-list/">gnome-defaults-list</a></span><sup><small>AUR</small></sup>. It will place your configuration file at <code>/etc/gnome/defaults.list</code>.
</p>
<h2>
<span id="Tracker_.26_Documents_do_not_list_any_local_files"></span><span class="mw-headline" id="Tracker_&amp;_Documents_do_not_list_any_local_files">Tracker &amp; Documents do not list any local files</span>
</h2>
<p>In order for Tracker (and, therefore, Documents) to detect your local files, they must be stored in an <a rel="nofollow" class="external text" href="https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html">XDG compliant directory</a> (such as 'Documents' or 'Music'). For more information, see <a href="../../en/XDG_user_directories.html" title="XDG user directories">XDG user directories</a>.
</p>
<p>You can also configure Tracker to recursively search inside specific directories such as your home directory. These settings can be made using <code>tracker-preferences</code>.
</p>
<h2><span class="mw-headline" id="Unable_to_add_accounts_in_Empathy_and_GNOME_Online_Accounts">Unable to add accounts in Empathy and GNOME Online Accounts</span></h2>
<p>Empathy, the engine behind integrated messaging, GNOME Online Accounts, and all other system settings based on messaging accounts will not function correctly unless the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/groups/x86_64/telepathy/">telepathy</a></span> group of packages or at least one of the backends (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=telepathy-gabble">telepathy-gabble</a></span>, or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=telepathy-haze">telepathy-haze</a></span>, for example) is <a href="../../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">installed</a>. View descriptions of <i>telepathy</i> components on the <a rel="nofollow" class="external text" href="https://telepathy.freedesktop.org/wiki/Components/">freedesktop.org telepathy wiki</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> <a href="../../en/Avahi.html" title="Avahi">Avahi</a> daemon is required for connecting with the People Nearby account, and also in order for some desktop extensions to work correctly like <a rel="nofollow" class="external text" href="https://extensions.gnome.org/extension/746/chat-status/">Chat Status</a>
</div>
<h2><span class="mw-headline" id="Empathy_does_not_use_GNOME_Online_Accounts">Empathy does not use GNOME Online Accounts</span></h2>
<p>After adding a Gnome Online Account, it may be necessary to log out and log back in for it to be used by Empathy.
</p>
<h2><span class="mw-headline" id="GNOME_Online_Accounts_settings_page_does_not_show_properly">GNOME Online Accounts settings page does not show properly</span></h2>
<p>In some cases, due to interactions with Alacarte (menu editor), Gnome Online accounts settings page would not show. If that happens, "Restore System Configuration" in Alacarte can restore missing functions to gnome-control-center. (See <a rel="nofollow" class="external free" href="https://bugzilla.redhat.com/show_bug.cgi?id=1520431">https://bugzilla.redhat.com/show_bug.cgi?id=1520431</a>.)
</p>
<h2><span class="mw-headline" id="Cannot_change_settings_in_dconf-editor">Cannot change settings in dconf-editor</span></h2>
<p>When one cannot set settings in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dconf">dconf</a></span>, it is possible their dconf user settings are corrupt. In this case it is best to delete the user dconf files in <code>~/.config/dconf/user*</code> and set the settings in dconf-editor after.
</p>
<h2><span class="mw-headline" id="When_an_extension_breaks_the_shell">When an extension breaks the shell</span></h2>
<p>When enabling shell extensions causes GNOME breakage, you should first remove the <i>user-theme</i> and <i>auto-move-windows</i> extensions from their installation directory.
</p>
<p>The installation directory could be one of  <code>~/.local/share/gnome‑shell/extensions</code>, <code>/usr/share/gnome‑shell/extensions</code> or <code>/usr/local/share/gnome‑shell/extensions</code>. Removing these two extension-containing folders may fix the breakage. Otherwise, isolate the problem extension with trial‑and‑error.
</p>
<p>Removing or adding an extension-containing folder to the aforementioned directories removes or adds the corresponding extension to your system. Details on GNOME Shell extensions are available at the <a rel="nofollow" class="external text" href="https://wiki.gnome.org/Projects/GnomeShell/Extensions">GNOME web site.</a>
</p>
<p>If you have trouble with uninstalling an extension via <a rel="nofollow" class="external text" href="https://extensions.gnome.org/local/">extensions.gnome.org/local</a>, then probably they have been installed as system-wide extensions with the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnome-shell-extensions">gnome-shell-extensions</a></span> package. Removing the package again obviously affects all user accounts.
</p>
<h2><span class="mw-headline" id="Extensions_do_not_work_after_GNOME_3_update">Extensions do not work after GNOME 3 update</span></h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Please bear in mind that whilst the methods below will allow you to <b>try</b> and activate an extension with an unsupported version of GNOME Shell, it is by no means a guarantee that the extension will work successfully. The most likely outcome of trying to activate such an extension is that GNOME Shell will crash and then restart.</div>
<p>Before trying the workarounds below, check if an update is available for the extension by visiting <a rel="nofollow" class="external text" href="https://extensions.gnome.org/local">extensions.gnome.org/local</a>. 
</p>
<p>If there is no update for your current GNOME version yet, use the following command to disable version validation for extensions:
</p>
<pre>$ gsettings set org.gnome.shell disable-extension-version-validation true
</pre>
<p>Alternatively, you could modify the extension itself, changing the supported shell version to satisfy the version validation. See the method below.
</p>
<p>Locate the folder where your extensions are installed. It might be <code>~/.local/share/gnome-shell/extensions</code> or <code>/usr/share/gnome-shell/extensions</code>.
</p>
<p>Edit each occurrence of <code>metadata.json</code> which appears in each extension sub-folder.
</p>
<table border="0">
<tbody>
<tr>
<td>Insert:</td>
<td>
<code>"shell-version": ["3.x"]</code>
</td>
</tr>
<tr>
<td>Instead of (for example):</td>
<td>
<code>"shell-version": ["3.4"]</code>
</td>
</tr>
</tbody>
</table>
<p><code>"3.x"</code> indicates the extension works with every shell version. If it breaks, you will know to change it back.
</p>
<h2><span class="mw-headline" id="Keyboard_shortcut_do_not_work_with_only_conky_running">Keyboard shortcut do not work with only conky running</span></h2>
<p>The GNOME shell keyboard shortcuts like <code>Alt+F2</code>, <code>Alt+F1</code>, and the media key shortcuts do not work if conky is the only program running. However, if another application like <i>gedit</i> is running, then the keyboard shortcuts work.
</p>
<p>Solution: edit <code>.conkyrc</code>
</p>
<pre>own_window yes
own_window_transparent yes
own_window_argb_visual yes
own_window_type dock
own_window_class Conky
own_window_hints undecorated,below,sticky,skip_taskbar,skip_pager
</pre>
<h2><span class="mw-headline" id="Unable_to_apply_stored_configuration_for_monitors">Unable to apply stored configuration for monitors</span></h2>
<p>If you encounter this message try to disable the <i>xrandr</i> <code>gnome-settings-daemon plugin</code>:
</p>
<pre>$ dconf write /org/gnome/settings-daemon/plugins/xrandr/active false
</pre>
<h2><span class="mw-headline" id="Consistent_cursor_theme">Consistent cursor theme</span></h2>
<p>See <a href="../../en/Cursor_themes.html#Desktop_environments" title="Cursor themes">Cursor themes#Desktop environments</a>.
</p>
<h2>
<span id="Windows_cannot_be_modified_with_Alt-Key_.2B_mouse-button"></span><span class="mw-headline" id="Windows_cannot_be_modified_with_Alt-Key_+_mouse-button">Windows cannot be modified with Alt-Key + mouse-button</span>
</h2>
<p>In GNOME 3.6 and above, the mouse button modifier (the key that allows you to drag a window from a location other than the titlebar) is the <code>Super</code> key instead of the <code>Alt</code> key which was used in the past. The change was made in response to the following <a rel="nofollow" class="external text" href="https://bugzilla.gnome.org/show_bug.cgi?id=607797">bug report</a>. 
</p>
<p>To change the mouse button modifier back to the <code>Alt</code> key, execute the following:
</p>
<pre>$ gsettings set org.gnome.desktop.wm.preferences mouse-button-modifier '&lt;Alt&gt;'  
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> It is not possible to change this with <i>System settings</i> &gt; <i>Keyboard</i> &gt; <i>Shortcuts</i>
</div>
<h2>
<span id="Slow_loading_of_system_icons.2Fslow_GDM_login"></span><span class="mw-headline" id="Slow_loading_of_system_icons/slow_GDM_login">Slow loading of system icons/slow GDM login</span>
</h2>
<p>Problems with the loading of system icons, such the ones in the title bar of Files, might be solved by executing the following command:
</p>
<pre># gdk-pixbuf-query-loaders --update-cache
</pre>
<p>Running the aforementioned command may also fix repeated occurrences of the  "Oh no! Something has gone wrong!" error screen and/or very slow loading and login with GDM as described in the following <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1414157">forum thread</a>.
</p>
<h2><span class="mw-headline" id="Artifacts_when_maximizing_windows">Artifacts when maximizing windows</span></h2>
<p>Maximizing windows may cause artifacts as of GNOME 3.12.0 - see the following <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=183617">forum thread</a>  and <a rel="nofollow" class="external text" href="https://bugzilla.gnome.org/show_bug.cgi?id=728385">bug report</a>. A solution is detailed in the following section: <a href="#Tear-free_video_with_Intel_HD_Graphics">#Tear-free video with Intel HD Graphics</a>.
</p>
<h2><span class="mw-headline" id="Tear-free_video_with_Intel_HD_Graphics">Tear-free video with Intel HD Graphics</span></h2>
<dl><dt>DRI3</dt></dl>
<p>According to <a rel="nofollow" class="external text" href="https://bugzilla.gnome.org/show_bug.cgi?id=711028#c2">this bug report</a>, DRI3 includes the <code>buffer_age</code> extension that allows GNOME Shell's Mutter compositor to sync windows to vblank in an efficient way. Since version <code>1:2.99.917+682+g4eaab17-1</code>, DRI3 is enabled by default in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-video-intel">xf86-video-intel</a></span> <a rel="nofollow" class="external autonumber" href="https://github.com/archlinux/svntogit-packages/commit/cd3de9bb45a9ab84383541ed45ee6f0c10ea8798">[1]</a>.
</p>
<dl><dt>Intel TearFree</dt></dl>
<p>Enabling the <a href="../../en/Intel_graphics.html#Tearing" title="Intel graphics">Xorg Intel TearFree option</a> is a known workaround for tearing problems on Intel adapters. However, the way this option acts increases memory consumption and lowers performance, see <a rel="nofollow" class="external text" href="https://bugs.freedesktop.org/show_bug.cgi?id=37686#c123">the original bug report's final comment</a>.
</p>
<dl><dt>Mutter tweaks</dt></dl>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This workaround has been <a rel="nofollow" class="external text" href="https://bugzilla.gnome.org/show_bug.cgi?id=711028#c0">reported</a> to have side effects and may not fix tearing in all cases.</div>
<p>GNOME Shell's Mutter compositor has a tweak known to address tearing problems (see <a rel="nofollow" class="external text" href="https://bugzilla.gnome.org/show_bug.cgi?id=657071#c1">the original suggestion for this fix</a> and its mention in <a rel="nofollow" class="external text" href="https://bugs.freedesktop.org/show_bug.cgi?id=37686#c59">the Freedesktop bug report</a>). To enable this tweak, append the following line to <code>/etc/environment</code>: <code>CLUTTER_PAINT=disable-clipped-redraws:disable-culling</code>. Then restart the Xorg server.
</p>
<dl><dt>Disable Fullscreen Unredirect</dt></dl>
<p>Gnome Shell does by default unredirect fullscreen applications. This may result in tearing. You can disable this with the gnome shell extension <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gnome-shell-extension-disable-unredirect/">gnome-shell-extension-disable-unredirect</a></span><sup><small>AUR</small></sup>.
</p>
<h2><span class="mw-headline" id="Window_opens_behind_other_windows_when_using_multiple_monitors">Window opens behind other windows when using multiple monitors</span></h2>
<p>This is possibly a bug in GNOME Shell which causes new windows to open behind others. To fix this issue, one can run the following command:
</p>
<pre>$ gsettings set org.gnome.shell.overrides workspaces-only-on-primary false
</pre>
<h2><span class="mw-headline" id="Lock_button_fails_to_re-enable_touchpad">Lock button fails to re-enable touchpad</span></h2>
<p>Some laptops have a touchpad lock button that disables the touchpad so that users can type without worrying about touching the touchpad. Currently, it appears that although GNOME can lock the touchpad by pressing this button, it cannot unlock it. If the touchpad gets locked you can run the following to unlock it:
</p>
<pre>$ xinput set-prop "SynPS/2 Synaptics TouchPad" "Device Enabled" 1
</pre>
<h2><span class="mw-headline" id="GNOME_Shell_keyboard_sources_menu_not_visible">GNOME Shell keyboard sources menu not visible</span></h2>
<p>A menu showing the keyboard input sources (for example 'en' for an English keyboard layout) should be visible next to the status area containing icons for network, volume and power sources. If the keyboard sources menu is not visible, this is probably because you have configured your <a href="../../en/Xorg.html" title="Xorg">Xorg</a> keyboard layout in a way which GNOME does not recognise.
</p>
<p>To ensure that the menu is visible, remove any Xorg keyboard configuration you might have created and set the keyboard locale using <a href="../../en/Xorg/Keyboard_configuration.html#Using_localectl" class="mw-redirect" title="Keyboard configuration in Xorg">localectl</a>.
</p>
<p>Upon running the command and then logging out, you should find that the keyboard input sources menu is visible in GDM and in the GNOME Shell desktop. See <a rel="nofollow" class="external text" href="https://blogs.gnome.org/mclasen/2012/09/21/input-sources-in-gnome/">Input sources in GNOME</a> for more information.
</p>
<h2><span class="mw-headline" id="Mouse_cursor_missing">Mouse cursor missing</span></h2>
<p>When using a separate <a href="../../en/Window_manager.html" title="Window manager">window manager</a> with <i>gnome-settings-daemon</i>, the mouse cursor may vanish. Run:
</p>
<pre>$ gsettings set org.gnome.settings-daemon.plugins.cursor active false
</pre>
<h2><span class="mw-headline" id="No_restart_button_in_session_menu_when_screen_is_locked">No restart button in session menu when screen is locked</span></h2>
<p>If <a href="../../en/XScreenSaver.html" title="XScreenSaver">XScreenSaver</a> is installed, ensure that it is not running at startup, see <a href="../../en/GNOME.html#Autostart" title="GNOME">GNOME#Autostart</a>.
</p>
<h2><span class="mw-headline" id="PulseAudio_system-wide_causes_delay_in_GNOME_and_GDM">PulseAudio system-wide causes delay in GNOME and GDM</span></h2>
<p>If you are running <a href="../../en/PulseAudio.html" title="PulseAudio">PulseAudio</a> in system-wide mode, the PulseAudio 7.0 upgrade breaks <a href="../../en/GDM.html" title="GDM">GDM</a> and GNOME.
See <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=203051">this forum post</a> for more information.
</p>
<h2><span class="mw-headline" id="GNOME_crashes_when_trying_to_reorder_applications_in_the_GNOME_Shell_Dash">GNOME crashes when trying to reorder applications in the GNOME Shell Dash</span></h2>
<p>The dash is the "toolbar" that appears, by default, <a href="https://en.wikipedia.org/wiki/GNOME_Shell#Design_components" class="extiw" title="wikipedia:GNOME Shell">on the left</a> when you click Activities. Applications can be reordered in the dash by dragging and dropping. If this fails, and/or causes GNOME to crash, try <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=171689">changing your icon theme</a>.
</p>
<h2><span class="mw-headline" id="Gnome_Crashes_while_installing_gnome-extra">Gnome Crashes while installing gnome-extra</span></h2>
<div class="noprint archwiki-template-message">
<p><a href="../../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a><b>This article or section needs expansion.</b><a href="../../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Is there a related bug report? (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:GNOME/Troubleshooting">Talk:GNOME/Troubleshooting#</a>)</div>
</div>
<p>Attempting to install the gnome-extra group while a gnome environment is running will crash gnome while installing gnome-getting-started-docs. X will continue to run, but gnome will not work until fixed. To fix, simply install gnome-extra from a terminal rather than inside gnome. When complete, gnome should work again.
</p>
<h2>
<span id="No_H264_Video_in_Gnome_Video_Player_.28Totem.29"></span><span class="mw-headline" id="No_H264_Video_in_Gnome_Video_Player_(Totem)">No H264 Video in Gnome Video Player (Totem)</span>
</h2>
<p><a href="../../en/Codecs_and_containers.html#Tips_and_tricks" class="mw-redirect" title="Codecs">See Codecs</a>
</p>
<h2><span class="mw-headline" id="No_suspend_on_LID_closure">No suspend on LID closure</span></h2>
<p>GNOME defaults to this behaviour about suspension:
</p>
<ul>
<li>No external monitor attached, computer goes in suspension when LID closes.</li>
<li>External monitor attached, computer does not go in suspension when LID closes.</li>
</ul>
<p>Currently <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnome-tweaks">gnome-tweaks</a></span> is not able to modify the behaviour on the second case, when a monitor is connected to the computer. While it can inhibit suspension with no monitor attached.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Behaviour on LID closure is controlled also by systemd. See <a href="../../en/Power_management.html#Power_management_with_systemd" title="Power management">Power management#Power management with systemd</a>.</div>
<h2>
<span id="gnome-shell_.2F_gnome-session_crashes_on_session_startup"></span><span class="mw-headline" id="gnome-shell_/_gnome-session_crashes_on_session_startup">gnome-shell / gnome-session crashes on session startup</span>
</h2>
<p>Sometimes <code>gnome-session</code> crashes immediately after login. This might be more visible on wayland and it might seem as if every second login attempt fails. The problem can be temporarily worked around by removing the files in <code>~/.config/gnome-session/saved-session</code>. A more lasting work-around is to disable the session manager's <code>auto-save-session</code> feature:
</p>
<pre>$ gsettings set org.gnome.SessionManager auto-save-session false
</pre>
<h2><span class="mw-headline" id="Low_OpenGL_performance_and_stuttering">Low OpenGL performance and stuttering</span></h2>
<ul><li>With proprietary NVIDIA driver</li></ul>
<p><a rel="nofollow" class="external text" href="https://bugzilla.gnome.org/show_bug.cgi?id=781835">This</a> bug is much likely the cause of it. You should revert <code>383ba566bd7c2a76d0856015a66e47caedef06b6 </code> commit in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mutter">mutter</a></span>. Use <a href="../../en/Arch_Build_System.html" class="mw-redirect" title="ABS">ABS</a> for this and add <code>git revert -n 383ba566bd7c2a76d0856015a66e47caedef06b6</code> to the <code>prepare()</code> function in the <a href="../../en/PKGBUILD.html" title="PKGBUILD">PKGBUILD</a> or simply install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/mutter-performance/">mutter-performance</a></span><sup><small>AUR</small></sup> instead.
</p>
<ul><li>With free drivers</li></ul>
<p>If video playback stutters (a bit), try <i>GNOME on Xorg</i> instead of Wayland.
</p>
<h2><span class="mw-headline" id="GNOME_Wayland_session_not_available">GNOME Wayland session not available</span></h2>
<p>GNOME Wayland does not support more than one GPU for output yet, <a rel="nofollow" class="external text" href="https://bugzilla.gnome.org/show_bug.cgi?id=771442">falling back</a> on GNOME X11.
</p>
<p>If your displays are only connected to one of your video devices, add this to your <a href="../../en/Environment_variables.html#Using_pam_env" title="Environment variables">system environment variables</a>:
</p>
<pre>MUTTER_ALLOW_HYBRID_GPUS=1
</pre>
<p>To avoid <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1744592#p1744592">problems</a> with some chipsets enable <a href="../../en/Kernel_mode_setting.html#Early_KMS_start" title="Kernel mode setting">Early KMS</a>.
</p>
<p><br>
</p>
<h2><span class="mw-headline" id="gnome-control-center_is_empty_and_does_not_list_any_categories">gnome-control-center is empty and does not list any categories</span></h2>
<p>Under alternative window managers (i3 for example), <i>gnome-control-center</i> starts as an empty window.
You need to set the variable <code>XDG_CURRENT_DESKTOP</code> to <code>GNOME</code> to start it (either in a script or exporting the variable in <code>~/.profile</code>).
</p>
<pre> export XDG_CURRENT_DESKTOP=GNOME
 gnome-control-center &amp;
</pre>
<p><br>
</p>
<h2>
<span id="Gnome_freezes_for_a_second_after_using_a_Function_.28Fn.29_key_shortcut"></span><span class="mw-headline" id="Gnome_freezes_for_a_second_after_using_a_Function_(Fn)_key_shortcut">Gnome freezes for a second after using a Function (Fn) key shortcut</span>
</h2>
<p>This is a problem with the brazilian portuguese ABNT 2 keyboard. If you have the brazilian portuguese  enabled, GNOME might experience this problem. To fix this issue and keep using this keyboard layout, un-map the scroll lock button by commenting this line at <code>/usr/share/X11/xkb/symbols/br</code>:
</p>
<pre> modifier_map Mod3   { Scroll_Lock };
</pre>
<p>And restart the session (log out and in).
</p>
<h2>
<span id="Zoom_in.2Fout_keyboard_shortcuts_don.27t_work_on_some_apps"></span><span class="mw-headline" id="Zoom_in/out_keyboard_shortcuts_don't_work_on_some_apps">Zoom in/out keyboard shortcuts don't work on some apps</span>
</h2>
<p><code>Ctrl</code> + <code>+</code> and <code>Ctrl</code> + <code>-</code> keyboard shourtcuts for zoom in/out functions don't work out of the box on some Gnome apps, such as Files and Gnome-Terminal.
</p>
<p>In such cases, open up GNOME Tweaks (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnome-tweaks">gnome-tweaks</a></span>) and navigate to Keyboard &amp; Mouse &gt; Additional Layout Options button &gt; Layout of numeric keypad. Change the <code>Disabled</code> value to <code>Hexadecimal</code>.
</p>
<h2><span class="mw-headline" id="Printers_configuration_does_not_work_in_GNOME_settings">Printers configuration does not work in GNOME settings</span></h2>
<p><a href="../../en/CUPS.html" title="CUPS">CUPS</a> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=system-config-printer">system-config-printer</a></span> should be installed
</p>
<h2><span class="mw-headline" id="Screen_reader_does_not_work">Screen reader does not work</span></h2>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=espeak-ng">espeak-ng</a></span>. Alternatively, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=festival">festival</a></span> can be used
</p>
<h2><span class="mw-headline" id="Gnome_Software_does_not_show_archlinux_packages">Gnome Software does not show archlinux packages</span></h2>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnome-software-packagekit-plugin">gnome-software-packagekit-plugin</a></span>
</p>
<h2><span class="mw-headline" id="Gnome_freezes_when_typing_with_multiple_devices">Gnome freezes when typing with multiple devices</span></h2>
<p>This issue can happen when using Gnome on <a href="../../en/Xorg.html" title="Xorg">Xorg</a>, in which case switching to <a href="../../en/Wayland.html" title="Wayland">Wayland</a> should help. If this is not possible, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/mutter-performance/">mutter-performance</a></span><sup><small>AUR</small></sup> and add <code>'579'</code> to the list on <a rel="nofollow" class="external text" href="https://aur.archlinux.org/cgit/aur.git/tree/PKGBUILD?h=mutter-performance#n12">line 12</a> in the PKGBUILD:
</p>
<pre> _merge_requests_to_use=('579' '1050' '1309') # safe pick
</pre>
<h2><span class="mw-headline" id="Delay_when_powering_off_or_restarting">Delay when powering off or restarting</span></h2>
<p>As of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=systemd">systemd</a></span> v247 and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnome-session">gnome-session</a></span> v3.38.0-1, dbus fails to stop when attempting to power off or restart. This causes a 2 minute delay until systemd forcibly kills the process. As reported <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/68989">here</a> an upstream patch exists. Until it is released and packaged, you can apply the change manually by adding <code>Slice=-.slice</code> under <code>[Service]</code> to <code>gnome-session-restart-dbus.service</code>. The result should look something like this:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/lib/systemd/user/gnome-session-restart-dbus.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Restart DBus after GNOME Session shutdown

# Allow exit.target to start even if this unit is started with replace-irreversibly
# Also put it into a slice that doesn't have such implicit dependencies
DefaultDependencies=no

[Service]
Type=notify
ExecStart=/usr/lib/gnome-session-ctl --restart-dbus
Slice=-.slice</pre>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../../en/Category:GNOME.html" title="Category:GNOME">GNOME</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li>
<li><a href="../../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=GNOME/Troubleshooting&amp;oldid=646122">https://wiki.archlinux.org/index.php?title=GNOME/Troubleshooting&amp;oldid=646122</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 20 December 2020, at 20:47.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
