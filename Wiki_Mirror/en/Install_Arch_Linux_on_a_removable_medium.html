<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Install Arch Linux on a removable medium - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Install_Arch_Linux_on_a_removable_medium rootpage-Install_Arch_Linux_on_a_removable_medium skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Install Arch Linux on a removable medium</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../en/Installation_guide.html" title="Installation guide">Installation guide</a></li>
<li><a href="../en/General_recommendations.html" title="General recommendations">General recommendations</a></li>
<li><a href="../en/General_troubleshooting.html" title="General troubleshooting">General troubleshooting</a></li>
<li><a href="../en/VirtualBox.html#Install_a_native_Arch_Linux_system_from_VirtualBox" class="mw-redirect" title="Install Arch Linux from VirtualBox">Install Arch Linux from VirtualBox</a></li>
<li><a href="../en/Solid_state_drive.html" class="mw-redirect" title="Solid State Drives">Solid State Drives</a></li>
</ul>
</div>
<p>This page explains how to perform a regular Arch installation onto removable media (e.g. a USB flash drive). In contrast to having a LiveUSB as covered in <a href="../en/USB_flash_installation_medium.html" class="mw-redirect" title="USB flash installation media">USB flash installation media</a>, the result will be a persistent installation identical to normal installation to HDD.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Installation"><span class="tocnumber">1</span> <span class="toctext">Installation</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Installation_tweaks"><span class="tocnumber">1.1</span> <span class="toctext">Installation tweaks</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-3">
<a href="#Configuration"><span class="tocnumber">2</span> <span class="toctext">Configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#GRUB_legacy"><span class="tocnumber">2.1</span> <span class="toctext">GRUB legacy</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#GRUB"><span class="tocnumber">2.2</span> <span class="toctext">GRUB</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Syslinux"><span class="tocnumber">2.3</span> <span class="toctext">Syslinux</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7">
<a href="#Tips_and_tricks"><span class="tocnumber">3</span> <span class="toctext">Tips and tricks</span></a>
<ul>
<li class="toclevel-2 tocsection-8">
<a href="#Using_your_portable_install_on_multiple_machines"><span class="tocnumber">3.1</span> <span class="toctext">Using your portable install on multiple machines</span></a>
<ul>
<li class="toclevel-3 tocsection-9"><a href="#Compatibility_for_BIOS_systems"><span class="tocnumber">3.1.1</span> <span class="toctext">Compatibility for BIOS systems</span></a></li>
<li class="toclevel-3 tocsection-10"><a href="#Video_drivers"><span class="tocnumber">3.1.2</span> <span class="toctext">Video drivers</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#Persistent_block_device_naming"><span class="tocnumber">3.1.3</span> <span class="toctext">Persistent block device naming</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="#Kernel_parameters"><span class="tocnumber">3.1.4</span> <span class="toctext">Kernel parameters</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-13"><a href="#Compatibility"><span class="tocnumber">3.2</span> <span class="toctext">Compatibility</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Minimizing_disk_access"><span class="tocnumber">3.3</span> <span class="toctext">Minimizing disk access</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-15"><a href="#See_also"><span class="tocnumber">4</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> At least 2 GiB of storage space is recommended. A modest set of packages will fit, leaving a little free space for storage.</div>
<p>There are various ways of installing Arch on removable media, depending on the operating system you have available:
</p>
<ul>
<li>If you have another Linux computer available (it need not be Arch), you can follow the instructions at <a href="../en/Install_Arch_Linux_from_existing_Linux.html" class="mw-redirect" title="Install from existing Linux">Install from existing Linux</a>.</li>
<li>An Arch Linux CD/USB can be used to install Arch onto the removable medium, via booting the CD/USB and following the <a href="../en/Installation_guide.html" title="Installation guide">installation guide</a>. If booting from a Live USB, the installation cannot be made to the same removable medium you are booting from.</li>
<li>If you run Windows or macOS, download VirtualBox, install VirtualBox Extensions, attach your removable medium to a virtual machine running Linux (either already installed or via a live ISO), and point the installation into the now attached drive while using the instructions at the <a href="../en/Installation_guide.html" title="Installation guide">Installation guide</a>.</li>
</ul>
<h3><span class="mw-headline" id="Installation_tweaks">Installation tweaks</span></h3>
<ul>
<li>Before <a href="../en/Mkinitcpio.html#Image_creation_and_activation" title="Mkinitcpio">creating the initial RAM disk</a>, in <code>/etc/mkinitcpio.conf</code> move the <code>block</code> and <code>keyboard</code> hooks before the <code>autodetect</code> hook. This is necessary to allow booting on multiple systems each requiring different modules in early userspace.</li>
<li>If you have chosen to install Arch onto a USB mass storage device and want to be able to continue to use it as a cross-platform removable drive, this can be accomplished by creating a partition housing an appropriate file system (most likely NTFS or exFAT). Note that the data partition may need to be the first partition on the device, as Windows assumes that there can only be one partition on a removable device, and will happily automount an EFI system partition otherwise. Remember to install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dosfstools">dosfstools</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ntfs-3g">ntfs-3g</a></span>. Some tools are available online that may allow you to flip the Removable Medium Bit (RMB) on your USB mass storage device. This would trick operating systems into treating your USB mass storage device as an external hard disk and allow you to use whichever partitioning scheme you choose.</li>
<li>If your Arch installation is on a removable drive that needs to have microcode for both manufacturer processors, install both <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=amd-ucode">amd-ucode</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=intel-ucode">intel-ucode</a></span> packages. See <a href="../en/Microcode.html#Installation" title="Microcode">Microcode#Installation</a>.</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> It is not possible to flip the Removable Medium Bit (RMB) on every USB mass storage device and attempting to use software that is incompatible with your device may damage it. Attempting to flip the RMB is <b>not</b> recommended.</div>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<ul><li>Make sure that <code>/etc/fstab</code> includes the correct partition information for <code>/</code>, and for any other partitions on the disk. If the drive is to be booted on several machines, it is quite likely that devices and number of available hard disks vary. So it is advised to use <a href="../en/Persistent_block_device_naming.html#by-uuid" class="mw-redirect" title="UUID">UUID</a> or label.</li></ul>
<p>To get the proper UUIDs for your partitions use <i>lsblk</i> of <i>blkid</i>. See <a href="../en/Persistent_block_device_naming.html#by-uuid" title="Persistent block device naming">Persistent block device naming#by-uuid</a> for more information.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>When GRUB is installed on the disk, the disk will always be <code>hd0,0</code>.</li>
<li>It seems that current versions of GRUB will automatically default to using uuid. The following directions are for GRUB legacy.</li>
</ul>
</div>
<h3><span class="mw-headline" id="GRUB_legacy">GRUB legacy</span></h3>
<p><code>menu.lst</code>, the GRUB legacy configuration file, should be edited to (loosely) match the following.
</p>
<p>When using file system labels your <code>menu.lst</code> should look like this:
</p>
<pre>root (hd0,0)
kernel /boot/vmlinuz-linux root=/dev/disk/by-label/<b>Arch</b> rw
initrd /boot/initramfs-linux.img
</pre>
<p>And for UUID, it should be like this:
</p>
<pre>root (hd0,0)
kernel /boot/vmlinuz-linux root=/dev/disk/by-uuid/3a9f8929-627b-4667-9db4-388c4eaaf9fa rw
initrd /boot/initramfs-linux.img
</pre>
<h3><span class="mw-headline" id="GRUB">GRUB</span></h3>
<p>Follow the instructions on <a href="../en/GRUB.html#BIOS_systems" title="GRUB">GRUB#BIOS systems</a> and <a href="../en/GRUB.html#UEFI_systems" title="GRUB">GRUB#UEFI systems</a> to install GRUB for both BIOS and UEFI booting:
</p>
<pre># grub-install --target=i386-pc /dev/<i>sdX</i> --recheck
# grub-install --target=x86_64-efi --efi-directory=<i>esp</i> --removable --recheck
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Recheck the device map, even if <code>/boot/grub/device.map</code> already exists. You should use this option whenever you add/remove a disk into/from your computer. <a rel="nofollow" class="external autonumber" href="https://www.gnu.org/software/grub/manual/grub/html_node/Invoking-grub_002dinstall.html">[1]</a>
</div>
<h3><span class="mw-headline" id="Syslinux">Syslinux</span></h3>
<p>Using your UUID:
</p>
<pre>LABEL Arch
        MENU LABEL Arch Linux
        LINUX ../vmlinuz-linux
        APPEND root=UUID=3a9f8929-627b-4667-9db4-388c4eaaf9fa rw
        INITRD ../initramfs-linux.img
</pre>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="Using_your_portable_install_on_multiple_machines">Using your portable install on multiple machines</span></h3>
<h4><span class="mw-headline" id="Compatibility_for_BIOS_systems">Compatibility for BIOS systems</span></h4>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a><b>This article or section needs expansion.</b><a href="../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Plenty of systems are capable of BIOS/GPT booting without workarounds. For systems that do have issues, hybrid-MBR is not the only solution; <a href="../en/Partitioning.html#Tricking_old_BIOS_into_booting_from_GPT" title="Partitioning">Partitioning#Tricking old BIOS into booting from GPT</a> could be an alternative. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Install_Arch_Linux_on_a_removable_medium">Talk:Install Arch Linux on a removable medium#</a>)</div>
</div>
<p>Since this setup will be run on multiple machines and there are still plenty of BIOS only systems around, you might want to consider enabling compatibility for both UEFI GPT and BIOS GPT/MBR systems. See <a href="../en/Multiboot_USB_drive.html#Hybrid_UEFI_GPT_+_BIOS_GPT/MBR_boot" title="Multiboot USB drive">Multiboot USB drive#Hybrid UEFI GPT + BIOS GPT/MBR boot</a>
</p>
<h4><span class="mw-headline" id="Video_drivers">Video drivers</span></h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>The use of proprietary video drivers is <b>not</b> recommended for this type of installation.</li>
<li>See the note about <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-video-intel">xf86-video-intel</a></span> in <a href="../en/Intel_graphics.html#Installation" title="Intel graphics">Intel graphics#Installation</a>.</li>
</ul>
</div>
<p>To support most common GPUs, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-video-vesa">xf86-video-vesa</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-video-ati">xf86-video-ati</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-video-intel">xf86-video-intel</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-video-amdgpu">xf86-video-amdgpu</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-video-nouveau">xf86-video-nouveau</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-video-fbdev">xf86-video-fbdev</a></span>.
</p>
<h4><span class="mw-headline" id="Persistent_block_device_naming">Persistent block device naming</span></h4>
<p>It is recommended to use <a href="../en/Persistent_block_device_naming.html#by-uuid" class="mw-redirect" title="UUID">UUID</a> in both <a href="../en/Fstab.html" title="Fstab">fstab</a> and boot loader configuration. See <a href="../en/Persistent_block_device_naming.html" title="Persistent block device naming">Persistent block device naming</a> for details.
</p>
<p>Alternatively, you may create udev rule to create custom symlink for your disk. Then use this symlink in <a href="../en/Fstab.html" title="Fstab">fstab</a> and boot loader configuration. See <a href="../en/Udev.html#Setting_static_device_names" title="Udev">udev#Setting static device names</a> for details.
</p>
<h4><span class="mw-headline" id="Kernel_parameters">Kernel parameters</span></h4>
<p>You may want to disable KMS for various reasons, such as getting a blank screen or a "no signal" error from the display, when using some Intel video cards, etc. To disable KMS, add <code>nomodeset</code> as a kernel parameter. See <a href="../en/Kernel_parameters.html" title="Kernel parameters">Kernel parameters</a> for more info.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Some <a href="../en/Xorg.html" title="Xorg">Xorg</a> drivers will not work with KMS disabled. See the wiki page on your specific driver for details. Nouveau in particular needs KMS to determine the correct display resolution. If you add <code>nomodeset</code> as a kernel parameter as a preemptive measure you may have to adjust the display resolution manually when using machines with Nvidia video cards. See <a href="../en/Xrandr.html" title="Xrandr">Xrandr</a> for more info.</div>
<h3><span class="mw-headline" id="Compatibility">Compatibility</span></h3>
<p>The fallback image should be used for maximum compatibility.
</p>
<h3><span class="mw-headline" id="Minimizing_disk_access">Minimizing disk access</span></h3>
<p>When installing to a device that offers a limited number of writes before it wears out, such as a USB drive, SD card, or similar, reduce the number of writes to increase the device lifetime. This also reduces the performance impact of slow writes.
</p>
<ul>
<li>It is highly recommended to review the <a href="../en/Improving_performance.html#Reduce_disk_reads/writes" title="Improving performance">Improving performance#Reduce disk reads/writes</a> article prior to selecting a file system. To sum it up, for flash-based media such as USB flash drives or SD cards, <a rel="nofollow" class="external text" href="https://fenidik.blogspot.com/2010/03/ext4-disable-journal.html">ext4 without a journal</a> should be fine, which can be created with <code>mkfs.ext4 -O "^has_journal" /dev/sdXX</code>. The obvious drawback of using a file system with journaling disabled is data loss as a result of an ungraceful dismount. Recognize that flash has a limited number of writes, and a journaling file system will take some of these as the journal is updated. For this same reason, it is best to forget the swap partition. Note that this does not affect installing onto a portable hard drive.</li>
<li>You may want to configure <a href="../en/Systemd/Journal.html" class="mw-redirect" title="Systemd journal">systemd journal</a> to store its journals in RAM, e.g. by creating a custom configuration file:</li>
</ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/journald.conf.d/usbstick.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Journal]
Storage=volatile
RuntimeMaxUse=30M</pre>
<ul><li>To disable <code>fsync</code> and related system calls in web browsers and other applications that do not write essential data, use the <code>eatmydata</code> command from <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libeatmydata">libeatmydata</a></span> to avoid such system calls:</li></ul>
<pre>$ eatmydata firefox
</pre>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li>
<a rel="nofollow" class="external text" href="https://github.com/r-darwish/alma">ALMA</a> - A utility written in Rust to automatically create persistent Arch Linux Live USB installations.</li>
<li>
<a rel="nofollow" class="external text" href="https://mags.nsupdate.info/arch-usb.html">ArchLinux USB</a> - c-magyar's excellent writeup on creating a persistent Live USB installation.</li>
<li>
<a rel="nofollow" class="external text" href="https://github.com/laurent85v/archuseriso">archuseriso</a> - Profiles for building Arch Linux Live ISO images. Bootable USB drives creation tools featuring persistent storage and encryption.</li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Installation_process.html" title="Category:Installation process">Installation process</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Install_Arch_Linux_on_a_removable_medium&amp;oldid=658645">https://wiki.archlinux.org/index.php?title=Install_Arch_Linux_on_a_removable_medium&amp;oldid=658645</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 9 April 2021, at 23:42.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
