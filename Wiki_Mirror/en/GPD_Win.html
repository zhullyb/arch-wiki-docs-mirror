<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>GPD Win - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-GPD_Win rootpage-GPD_Win skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">GPD Win</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a><b>This article or section is out of date.</b><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> As of today (early 2021) everything works out of the box (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:GPD_Win#Out_of_date">Talk:GPD Win#Out of date</a>)</div>
</div>
<p><a rel="nofollow" class="external text" href="https://www.indiegogo.com/projects/gpd-win-intel-z8700-win-10-os-game-console-laptop#/">GPD Win</a> is a small (5.5 inch screen) handheld device. More information about the GPD Win can be found here: <a rel="nofollow" class="external free" href="http://hansdegoede.livejournal.com/17445.html">http://hansdegoede.livejournal.com/17445.html</a>
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Fixes"><span class="tocnumber">1</span> <span class="toctext">Fixes</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Built-in_Wi-Fi"><span class="tocnumber">1.1</span> <span class="toctext">Built-in Wi-Fi</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Battery_monitoring"><span class="tocnumber">1.2</span> <span class="toctext">Battery monitoring</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Rotating_X_Session"><span class="tocnumber">1.3</span> <span class="toctext">Rotating X Session</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Rotating_touch_screen"><span class="tocnumber">1.4</span> <span class="toctext">Rotating touch screen</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Fixing_occasional_crash_when_using_all_cores"><span class="tocnumber">1.5</span> <span class="toctext">Fixing occasional crash when using all cores</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Sound"><span class="tocnumber">1.6</span> <span class="toctext">Sound</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Memory_card_reader"><span class="tocnumber">1.7</span> <span class="toctext">Memory card reader</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Physical_power_and_volume_buttons"><span class="tocnumber">1.8</span> <span class="toctext">Physical power and volume buttons</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Adjusting_screen_brightness"><span class="tocnumber">1.9</span> <span class="toctext">Adjusting screen brightness</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Suspend/resume/waking_up_when_opening_the_lid"><span class="tocnumber">1.10</span> <span class="toctext">Suspend/resume/waking up when opening the lid</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12">
<a href="#Installation_guide"><span class="tocnumber">2</span> <span class="toctext">Installation guide</span></a>
<ul>
<li class="toclevel-2 tocsection-13"><a href="#Boot_the_installer"><span class="tocnumber">2.1</span> <span class="toctext">Boot the installer</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Formating_and_mounting_partitions_for_dual_booting_with_Windows_10"><span class="tocnumber">2.2</span> <span class="toctext">Formating and mounting partitions for dual booting with Windows 10</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Install_Arch_Linux"><span class="tocnumber">2.3</span> <span class="toctext">Install Arch Linux</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Install_bootloader"><span class="tocnumber">2.4</span> <span class="toctext">Install bootloader</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Fixes">Fixes</span></h2>
<p><b>Things not mentioned below should work out-of-the-box.</b>
</p>
<h4><span class="mw-headline" id="Built-in_Wi-Fi">Built-in Wi-Fi</span></h4>
<p>Before <a rel="nofollow" class="external text" href="https://bugzilla.kernel.org/show_bug.cgi?id=185661">Linux Bug 185661</a> is resolved, a fix is needed to get built-in Wi-Fi working. Current solution is to grab <b>brcmfmac4356-pcie.txt</b> from <a rel="nofollow" class="external text" href="https://chromium.googlesource.com/chromiumos/third_party/linux-firmware/+/f151f016b4fe656399f199e28cabf8d658bcb52b/brcm/brcmfmac4356-pcie.txt">here</a> and drop it into <b>/lib/firmware/brcm</b> and reload the <b>brcmfmac</b> module.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The "txt" button at the bottom right corner of the web page does not download the correct file. You need to manually copy and paste the content to brcmfmac4356-pcie.txt.</div>
<p>Easiest way to get built-in Wi-Fi working on the Arch Linux installer is, from Windows 10, download the file above to C:\. Then from the installer do the following:
</p>
<p>Make a directory and mount the Windows 10 partition (<b>Replace mmcblk0p2 with your Windows 10 partition found by running lsblk</b>)
</p>
<pre>mkdir windows
mount /dev/mmcblk0p2 windows
</pre>
<p>Copy the file
</p>
<pre>cp windows/brcmfmac4356-pcie.txt /lib/firmware/brcm
</pre>
<p>Reload the module
</p>
<pre>modprobe -r brcmfmac
modprobe brcmfmac
</pre>
<p>Connect to Wi-Fi
</p>
<pre>wifi-menu
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If the Wi-Fi seems to fail, there may be an extra setting required to be set in the BIOS.  Reboot, and hold the Del key while the device is starting up, and in the BIOS screen, go under the Chipset tab, and select South Bridge, then LPSS &amp; SCC Configuration, then change SCC SDIO Support to PCI Mode.   Save the BIOS changes then get back to the Copy the File step and retry.</div>
<h4><span class="mw-headline" id="Battery_monitoring">Battery monitoring</span></h4>
<p>Works out of the box since kernel 4.12.
Earlier kernels require <a rel="nofollow" class="external text" href="http://hansdegoede.livejournal.com/17445.html">Hans de Goede's patched kernel</a>.
His kernel will also fix "Not charging when the power cable gets plugged in after boot" and "Only drawing max 0.5A from the charger, charging slowly if at all".
</p>
<h4><span class="mw-headline" id="Rotating_X_Session">Rotating X Session</span></h4>
<p>Because the device uses a phone screen, the display has to be rotated to function properly.
Since kernel 4.9.2, rotating X session (manually with <a href="../en/Xrandr.html" title="Xrandr">xrandr</a> or within settings of a desktop environment) works out-of-the-box. (NB: before investing too much time (or buying the device) it is worth noting there may be idiosyncrasies in the gpdwin batches. Running 4.9.11-1 (March 7, 2017) did not fix the screen rotation issue on my gpdwin.).
</p>
<p>If you are using Gnome and finding that everything is upscaled, you can restore scaling by running:
</p>
<pre>$ gsettings set org.gnome.desktop.interface scaling-factor 1
</pre>
<h4><span class="mw-headline" id="Rotating_touch_screen">Rotating touch screen</span></h4>
<p>Since kernel 4.9.2, rotating X session will automatically rotate touch screen (so far, only tested with gnome-control-center).  
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Gnome will apply the rotation properly, even when using a third party application to change orientation of the display, such as arandr.  XFCE, as it stands on 2018-02-16, does not auto-rotate the touch coordinates.</div> 
<p>If your configuration does not auto-rotate touch, make sure you are running <a href="../en/Xorg.html" class="mw-redirect" title="Evdev">evdev</a> drivers (the default. see <a href="../en/Touchscreen.html" title="Touchscreen">Touchscreen</a> for more info). Edit <code>/usr/share/X11/xorg.conf.d/10-evdev.conf</code>, and add <code>Option TransformationMatrix "0 1 0 -1 0 1 0 0 1"</code> to the touchscreen section. Yours should look similar to this:
</p>
<p><br>
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/share/X11/xorg.conf.d/10-evdev.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">

...

Section "InputClass"
        Identifier "evdev touchscreen catchall"
        MatchIsTouchscreen "on"
        MatchDevicePath "/dev/input/event*"
        Driver "evdev"
	Option "TransformationMatrix" "0 1 0 -1 0 1 0 0 1"
	Option "GrabDevice" "True"
EndSection

...

</pre>
<p>for different rotations:
</p>
<p>90° = Option "TransformationMatrix" "0 -1 1 1 0 0 0 0 1"
</p>
<p>180° = Option "TransformationMatrix" "-1 0 1 0 -1 1 0 0 1"
</p>
<p>270° = Option "TransformationMatrix" "0 1 0 -1 0 1 0 0 1"
</p>
<h4><span class="mw-headline" id="Fixing_occasional_crash_when_using_all_cores">Fixing occasional crash when using all cores</span></h4>
<p>Turbo Boost on this CPU is software-controlled and the Linux kernel (4.4) is not throttling down the CPU enough, running at or close to 2.4Ghz the whole time even with 4 cores active which crashes the CPU eventually. Disabling the Turbo Boost feature ("Turbo Mode" in the BIOS) fixed those crashes. More info <a rel="nofollow" class="external text" href="https://www.reddit.com/r/gpdwin/comments/5o2m1v/solved_linux_44_crashing_when_using_all_4_cores/">here</a>.
</p>
<h4><span class="mw-headline" id="Sound">Sound</span></h4>
<p>Works out of the box with latest and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-lts">linux-lts</a></span> kernel.
Headphone jack works but currently requires <a rel="nofollow" class="external text" href="http://hansdegoede.livejournal.com/17445.html">Hans de Goede's patched kernel</a>.
</p>
<h4><span class="mw-headline" id="Memory_card_reader">Memory card reader</span></h4>
<p>Works out of the box with latest and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-lts">linux-lts</a></span> kernel.
</p>
<h4><span class="mw-headline" id="Physical_power_and_volume_buttons">Physical power and volume buttons</span></h4>
<p>Works but currently requires <a rel="nofollow" class="external text" href="http://hansdegoede.livejournal.com/17445.html">Hans de Goede's patched kernel</a>.
</p>
<h4><span class="mw-headline" id="Adjusting_screen_brightness">Adjusting screen brightness</span></h4>
<p>Works out of the box since kernel 4.14.
Earlier kernels require <a rel="nofollow" class="external text" href="http://hansdegoede.livejournal.com/17445.html">Hans de Goede's patched kernel</a>.
</p>
<h4>
<span id="Suspend.2Fresume.2Fwaking_up_when_opening_the_lid"></span><span class="mw-headline" id="Suspend/resume/waking_up_when_opening_the_lid">Suspend/resume/waking up when opening the lid</span>
</h4>
<p>Works out of the box since kernel 4.14.
Earlier kernels require <a rel="nofollow" class="external text" href="http://hansdegoede.livejournal.com/17445.html">Hans de Goede's patched kernel</a>.
</p>
<h2><span class="mw-headline" id="Installation_guide">Installation guide</span></h2>
<h4><span class="mw-headline" id="Boot_the_installer">Boot the installer</span></h4>
<p>Reboot holding either <b>"Del"</b> or <b>"Esc"</b> to enter BIOS. From the BIOS screen, either change the boot options to prioritize your usb drive or boot from it once.
</p>
<p>On the Arch Linux boot option screen, with the first option highlighted, click <b>"e"</b> to edit boot options and add <b>"fbcon=rotate:1"</b> for screen to be rotated correctly.
</p>
<h4><span class="mw-headline" id="Formating_and_mounting_partitions_for_dual_booting_with_Windows_10">Formating and mounting partitions for dual booting with Windows 10</span></h4>
<p>Use "Disk Management" in Windows or similar tools to shrink the Windows 10 partition and use the space to create a new partition for Arch Linux.
</p>
<p>Run lsblk to list partitions and note the numbers for the following partitions:
</p>
<ul>
<li>(<b>X</b>) Windows Boot Loader, a 100MB partition</li>
<li>(<b>Y</b>) Windows 10 partition</li>
<li>(<b>Z</b>) New Linux partition</li>
</ul>
<p>Format the new Linux partition and mount it
</p>
<pre>mkfs.ext4 /dev/mmcblk0p<b>Z</b>
mount /dev/mmcblk0p<b>Z</b> /mnt
</pre>
<p>Create boot directory and mount Windows Boot Loader
</p>
<pre>mkdir /mnt/boot
mount /dev/mmcblk0p<b>X</b> /mnt/boot
</pre>
<h4><span class="mw-headline" id="Install_Arch_Linux">Install Arch Linux</span></h4>
<p>Install base system
</p>
<pre>pacstrap -i /mnt base base-devel
</pre>
<p>Copy the file from the Wi-Fi fix to the new installation
</p>
<pre>cp /lib/firmware/brcm/brcmfmac4356-pcie.txt /mnt/lib/firmware/brcm
</pre>
<p>Continue by following <a href="../en/Installation_guide.html#Configure_the_system" title="Installation guide">the regular install guide</a> until bootloader step, then continue below.
</p>
<h4><span class="mw-headline" id="Install_bootloader">Install bootloader</span></h4>
<p>Install bootloader
</p>
<pre>bootctl install
</pre>
<p>Create and fill <b>/boot/loader/entries/arch.conf</b>
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-lts">linux-lts</a></span>, replace <b>/vmlinuz-linux</b> with <b>/vmlinuz-linux-lts</b> and <b>/initramfs-linux.img</b> with <b>/initramfs-linux-lts.img</b>
</div>
<pre>title   Arch Linux
linux   /vmlinuz-linux
initrd  /initramfs-linux.img
options fbcon=rotate:1 root=/dev/mmcblk0p<b>Z</b> rw
</pre>
<p><b>You have now installed Arch Linux on your GPD Win!</b>
</p>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:GPD.html" title="Category:GPD">GPD</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=GPD_Win&amp;oldid=649245">https://wiki.archlinux.org/index.php?title=GPD_Win&amp;oldid=649245</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 19 January 2021, at 08:15.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
