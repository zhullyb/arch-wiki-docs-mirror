<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>ASUS GA401I - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-ASUS_GA401I rootpage-ASUS_GA401I skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">ASUS GA401I</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<p>This page contains instructions and tips for configuring Arch Linux on the ASUS Zephyrus G14 and ASUS ROG Studio Pro 14 (GA401I).
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Kernel_patch"><span class="tocnumber">1</span> <span class="toctext">Kernel patch</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#CPU_frequency"><span class="tocnumber">1.1</span> <span class="toctext">CPU frequency</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Function_keys"><span class="tocnumber">1.2</span> <span class="toctext">Function keys</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4">
<a href="#ASUS_NB_Ctrl"><span class="tocnumber">2</span> <span class="toctext">ASUS NB Ctrl</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#Switching_to_the_dedicated_Nvidia_GPU"><span class="tocnumber">2.1</span> <span class="toctext">Switching to the dedicated Nvidia GPU</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#DBus_notifications"><span class="tocnumber">2.2</span> <span class="toctext">DBus notifications</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Battery_charge_limit"><span class="tocnumber">2.3</span> <span class="toctext">Battery charge limit</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Power_profile"><span class="tocnumber">2.4</span> <span class="toctext">Power profile</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9">
<a href="#High_battery_usage/low_runtime_on_battery"><span class="tocnumber">3</span> <span class="toctext">High battery usage/low runtime on battery</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#Nvidia_driver_optimization"><span class="tocnumber">3.1</span> <span class="toctext">Nvidia driver optimization</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Disabling_turbo_boost"><span class="tocnumber">3.2</span> <span class="toctext">Disabling turbo boost</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#General_Tips"><span class="tocnumber">3.3</span> <span class="toctext">General Tips</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-13">
<a href="#Troubleshooting"><span class="tocnumber">4</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-14"><a href="#Using_external_display_through_the_USB-C_port"><span class="tocnumber">4.1</span> <span class="toctext">Using external display through the USB-C port</span></a></li>
<li class="toclevel-2 tocsection-15">
<a href="#Volume_adjustment"><span class="tocnumber">4.2</span> <span class="toctext">Volume adjustment</span></a>
<ul>
<li class="toclevel-3 tocsection-16"><a href="#Pacman_hook"><span class="tocnumber">4.2.1</span> <span class="toctext">Pacman hook</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Kernel_patch">Kernel patch</span></h2>
<p>Since kernel 5.11, support for the devices running Ryzen 4000 CPUs is available without patches.
</p>
<p>Devices utilizing Ryzen 5000 series CPUs, on the other hand, currently require kernel patches for some functionality.
</p>
<p>A kernel with these patches is available in the AUR: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/linux-zen-g14/">linux-zen-g14</a></span><sup><small>AUR</small></sup>.
</p>
<h3><span class="mw-headline" id="CPU_frequency">CPU frequency</span></h3>
<p>By default, the <code>i8042</code> and <code>asus-nb-wmi</code> (depends on <code>i8042</code>) kernel modules will refuse to load, resulting in <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=248477">CPU frequency dropping to 400MHz</a>. To fix this, <a href="../en/Kernel.html#Compilation" title="Kernel">recompile the kernel</a> with the following <a rel="nofollow" class="external text" href="https://github.com/YHNdnzj/linux-zen-g14/raw/master/i8042.patch">kernel patch</a>.
</p>
<h3><span class="mw-headline" id="Function_keys">Function keys</span></h3>
<p>Most of them work out of the box, others need this <a rel="nofollow" class="external text" href="https://lab.retarded.farm/zappel/asus-rog-zephyrus-g14/-/raw/master/kernel_patches/5.8/5.8.6/0001-HID-asus-add-support-for-ASUS-N-Key-keyboard-v5.8.patch">patch</a>.
</p>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-edit-cut.png" class="image"><img alt="Tango-edit-cut.png" src="../File:Tango-edit-cut.png" decoding="async" width="48" height="48"></a><b>This section is being considered for removal.</b><a href="../File:Tango-edit-cut.png" class="image"><img alt="Tango-edit-cut.png" src="../File:Tango-edit-cut.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> This should be resolved for the Ryzen 5000 variants in kernel 5.12 and exceptions should be reported to the Asus-Linux project. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:ASUS_GA401I">Talk:ASUS GA401I#</a>)</div>
</div>
<h2><span class="mw-headline" id="ASUS_NB_Ctrl">ASUS NB Ctrl</span></h2>
<p><a rel="nofollow" class="external text" href="https://gitlab.com/asus-linux/asus-nb-ctrl">ASUS NB Ctrl</a> is a utility for Linux to control many aspects of various ASUS laptops, but can also be used with non-asus laptops with reduced features. It reimplements some Armoury Crate functionality, such as fan modes and the AniMe-Matrix display. It is available in the AUR: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/asus-nb-ctrl-git/">asus-nb-ctrl-git</a></span><sup><small>AUR</small></sup>.
</p>
<p>This package provides two programs, <code>asusctl</code> and <code>asusd</code>, that can be used to view and modify some hardware settings, such as:
</p>
<ul>
<li>the current power profile (fan speed and boost mode)</li>
<li>the graphics card (Nvidia dGPU or AMD iGPU) to use</li>
<li>the battery charge limit</li>
<li>the LED mode for the keyboard backlight and AniMe Matrix (available only on some models)</li>
</ul>
<h3><span class="mw-headline" id="Switching_to_the_dedicated_Nvidia_GPU">Switching to the dedicated Nvidia GPU</span></h3>
<p>The dedicated GPU offers better performance than the integrated one at the cost of higher power consumption. The current graphics mode can be checked using:
</p>
<pre># asusctl graphics -g
</pre>
<p>Available modes are <code>nvidia</code>, <code>hybrid</code>, <code>compute</code> and <code>integrated</code>. Switch to the dedicated graphics card with:
</p>
<pre># asusctl graphics -m nvidia
</pre>
<p>Then reboot to take the change into effect.
</p>
<h3><span class="mw-headline" id="DBus_notifications">DBus notifications</span></h3>
<p>Notifications provide feedback when a setting is changed using <code>asusctl</code> and are especially useful when a setting has been bound to a custom keyboard shortcut. They are provided by the <code>asus-notify</code> systemd service that needs to be enabled and started:
</p>
<pre>$ systemctl --user enable asus-notify.service
$ systemctl --user start asus-notify.service
</pre>
<h3><span class="mw-headline" id="Battery_charge_limit">Battery charge limit</span></h3>
<p>Setting a limit to the battery charge can be useful to preserve its longevity when the laptop is used as a static workstation for long period of times. Set your prefered limit (in percent, from 20 to 100) using:
</p>
<pre># asusctl -c 60
</pre>
<p>60% is usually considered a stable charge state for lithium-based batteries.
</p>
<h3><span class="mw-headline" id="Power_profile">Power profile</span></h3>
<p>The power profile controls three settings: CPU scaling (only on Intel CPUs), Boost mode and fans speed. By default, three profiles are provided: <code>silent</code>, <code>normal</code> and <code>boost</code>. Custom profiles can be defined.
</p>
<p>The easiest way to use this feature is to bind the Fn-F5 key to this command, which will switch to the next available profile: <code>asusctl profile -n</code>. This will imitate the way the original Asus service works on Windows. Notifications should be enabled in order to know which profile is selected each time the shortcut is pressed. A specific profile can be manually selected using:
</p>
<pre># asusctl profile -p silent
</pre>
<h2>
<span id="High_battery_usage.2Flow_runtime_on_battery"></span><span class="mw-headline" id="High_battery_usage/low_runtime_on_battery">High battery usage/low runtime on battery</span>
</h2>
<p>The G14 can be tweaked to have far better battery live and performance on windows <a rel="nofollow" class="external autonumber" href="https://www.reddit.com/r/ZephyrusG14/comments/hldxcv/how_to_get_10_hours_battery/">[1]</a>. A few optimizations can be taken to reach a similar battery live on Arch (you can monitor your current power usage using <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=powertop">powertop</a></span> - note that only the reported battery discharge seems to be fully accurate).
</p>
<h3><span class="mw-headline" id="Nvidia_driver_optimization">Nvidia driver optimization</span></h3>
<p>When using the official Nvidia driver, the power usage can be reduced by putting the following line in <code>/etc/modprobe.d/nvidia.conf</code>:
</p>
<pre>options nvidia "NVreg_DynamicPowerManagement=0x02"
</pre>
<p>This has also shown to reduce fan noise and overall heat.
</p>
<h3><span class="mw-headline" id="Disabling_turbo_boost">Disabling turbo boost</span></h3>
<p>While not necessarily saving power, some user prefer to disable turbo boost for smoother power delivery and less heat. To temporarily disable boost, execute the following:
</p>
<pre># echo 0 | tee /sys/devices/system/cpu/cpufreq/boost
</pre>
<p>Or use the power profiles from <code>asusctl</code> to handle this automatically, as explained <a href="#Power_profile">above</a>.
</p>
<h3><span class="mw-headline" id="General_Tips">General Tips</span></h3>
<p>To maximize the battery life, follow the general tips at <a href="../en/Power_management.html" title="Power management">power management</a>.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Using_external_display_through_the_USB-C_port">Using external display through the USB-C port</span></h3>
<p>While the dedicated HDMI port works out of the box, the display output through the USB-C port doesn't appear to be connected to the integrated graphics controller. Using an external display through this port requires to switch to the dedicated Nvidia graphics card. See the <a href="#Switching_to_the_dedicated_Nvidia_GPU">ASUS NB Ctrl</a> section above for more details.
</p>
<h3><span class="mw-headline" id="Volume_adjustment">Volume adjustment</span></h3>
<p>When using built-in speakers, volume adjustment will not work for <a href="../en/PulseAudio.html" title="PulseAudio">PulseAudio</a>. Download this <a rel="nofollow" class="external text" href="https://p.yhn.sh/selif/pulseaudio-volume-adj.patch">patch</a> and apply it:
</p>
<pre># patch -p1 -d /usr/share/alsa-card-profile/mixer/paths/ -i <i>/path/to/patch</i>
</pre>
<p>Then restart PulseAudio:
</p>
<pre>$ systemctl --user restart pulseaudio.service
</pre>
<h4><span class="mw-headline" id="Pacman_hook">Pacman hook</span></h4>
<p>To apply the patch automatically after a <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pulseaudio">pulseaudio</a></span> upgrade, you can use a <a href="../en/Pacman.html#Hooks" class="mw-redirect" title="Pacman hook">pacman hook</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pacman.d/hooks/pulseaudio-volume-adj.hook</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Trigger]
Type = Path
Operation = Install
Operation = Upgrade
Target = usr/share/alsa-card-profile/mixer/paths/analog-output-speaker.conf

[Action]
Description = Fixing pulseaudio volume adjustment...
When = PostTransaction
Exec = /usr/bin/patch -p1 -d /usr/share/alsa-card-profile/mixer/paths/ -i <i>/path/to/patch</i></pre>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:ASUS.html" title="Category:ASUS">ASUS</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Sections_flagged_with_Template:Remove.html" title="Category:Sections flagged with Template:Remove">Sections flagged with Template:Remove</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=ASUS_GA401I&amp;oldid=656127">https://wiki.archlinux.org/index.php?title=ASUS_GA401I&amp;oldid=656127</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 26 March 2021, at 05:10.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
