<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Network configuration - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Network_configuration rootpage-Network_configuration skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Network configuration</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../en/Network_Debugging.html" title="Network Debugging">Network Debugging</a></li>
<li><a href="../en/Category:Firewalls.html" class="mw-redirect" title="Firewalls">Firewalls</a></li>
<li><a href="../en/Jumbo_frames.html" title="Jumbo frames">Jumbo frames</a></li>
<li><a href="../en/Internet_sharing.html" title="Internet sharing">Internet sharing</a></li>
<li><a href="../en/Router.html" title="Router">Router</a></li>
</ul>
</div>
<p>This article describes how to configure network connections on <a href="https://en.wikipedia.org/wiki/OSI_layer_3" class="extiw" title="wikipedia:OSI layer 3">OSI layer 3</a> and above. Medium-specifics are handled in the <a href="../en/Network_configuration/Ethernet.html" title="Network configuration/Ethernet">/Ethernet</a> and <a href="../en/Network_configuration/Wireless.html" title="Network configuration/Wireless">/Wireless</a> subpages.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Check_the_connection"><span class="tocnumber">1</span> <span class="toctext">Check the connection</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Ping"><span class="tocnumber">1.1</span> <span class="toctext">Ping</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-3">
<a href="#Network_management"><span class="tocnumber">2</span> <span class="toctext">Network management</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#net-tools"><span class="tocnumber">2.1</span> <span class="toctext">net-tools</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#iproute2"><span class="tocnumber">2.2</span> <span class="toctext">iproute2</span></a></li>
<li class="toclevel-2 tocsection-6">
<a href="#Network_interfaces"><span class="tocnumber">2.3</span> <span class="toctext">Network interfaces</span></a>
<ul>
<li class="toclevel-3 tocsection-7"><a href="#Listing_network_interfaces"><span class="tocnumber">2.3.1</span> <span class="toctext">Listing network interfaces</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="#Enabling_and_disabling_network_interfaces"><span class="tocnumber">2.3.2</span> <span class="toctext">Enabling and disabling network interfaces</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-9"><a href="#Static_or_dynamic_IP_address?"><span class="tocnumber">2.4</span> <span class="toctext">Static or dynamic IP address?</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Static_IP_address"><span class="tocnumber">2.5</span> <span class="toctext">Static IP address</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#IP_addresses"><span class="tocnumber">2.6</span> <span class="toctext">IP addresses</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Routing_table"><span class="tocnumber">2.7</span> <span class="toctext">Routing table</span></a></li>
<li class="toclevel-2 tocsection-13">
<a href="#DHCP"><span class="tocnumber">2.8</span> <span class="toctext">DHCP</span></a>
<ul>
<li class="toclevel-3 tocsection-14"><a href="#Servers"><span class="tocnumber">2.8.1</span> <span class="toctext">Servers</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-15"><a href="#Network_managers"><span class="tocnumber">2.9</span> <span class="toctext">Network managers</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-16">
<a href="#Set_the_hostname"><span class="tocnumber">3</span> <span class="toctext">Set the hostname</span></a>
<ul>
<li class="toclevel-2 tocsection-17"><a href="#Local_hostname_resolution"><span class="tocnumber">3.1</span> <span class="toctext">Local hostname resolution</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Local_network_hostname_resolution"><span class="tocnumber">3.2</span> <span class="toctext">Local network hostname resolution</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-19">
<a href="#Tips_and_tricks"><span class="tocnumber">4</span> <span class="toctext">Tips and tricks</span></a>
<ul>
<li class="toclevel-2 tocsection-20"><a href="#Change_interface_name"><span class="tocnumber">4.1</span> <span class="toctext">Change interface name</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#Revert_to_traditional_interface_names"><span class="tocnumber">4.2</span> <span class="toctext">Revert to traditional interface names</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#Set_device_MTU_and_queue_length"><span class="tocnumber">4.3</span> <span class="toctext">Set device MTU and queue length</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#Bonding_or_LAG"><span class="tocnumber">4.4</span> <span class="toctext">Bonding or LAG</span></a></li>
<li class="toclevel-2 tocsection-24">
<a href="#IP_address_aliasing"><span class="tocnumber">4.5</span> <span class="toctext">IP address aliasing</span></a>
<ul>
<li class="toclevel-3 tocsection-25"><a href="#Example"><span class="tocnumber">4.5.1</span> <span class="toctext">Example</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-26"><a href="#Promiscuous_mode"><span class="tocnumber">4.6</span> <span class="toctext">Promiscuous mode</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#Investigate_sockets"><span class="tocnumber">4.7</span> <span class="toctext">Investigate sockets</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-28">
<a href="#Troubleshooting"><span class="tocnumber">5</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-29">
<a href="#The_TCP_window_scaling_problem"><span class="tocnumber">5.1</span> <span class="toctext">The TCP window scaling problem</span></a>
<ul>
<li class="toclevel-3 tocsection-30"><a href="#How_to_diagnose_the_problem"><span class="tocnumber">5.1.1</span> <span class="toctext">How to diagnose the problem</span></a></li>
<li class="toclevel-3 tocsection-31">
<a href="#Ways_of_fixing_it"><span class="tocnumber">5.1.2</span> <span class="toctext">Ways of fixing it</span></a>
<ul>
<li class="toclevel-4 tocsection-32"><a href="#Bad"><span class="tocnumber">5.1.2.1</span> <span class="toctext">Bad</span></a></li>
<li class="toclevel-4 tocsection-33"><a href="#Good"><span class="tocnumber">5.1.2.2</span> <span class="toctext">Good</span></a></li>
<li class="toclevel-4 tocsection-34"><a href="#Best"><span class="tocnumber">5.1.2.3</span> <span class="toctext">Best</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-35"><a href="#More_about_it"><span class="tocnumber">5.1.3</span> <span class="toctext">More about it</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-36"><a href="#Connected_second_PC_unable_to_use_bridged_LAN"><span class="tocnumber">5.2</span> <span class="toctext">Connected second PC unable to use bridged LAN</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-37"><a href="#See_also"><span class="tocnumber">6</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Check_the_connection">Check the connection</span></h2>
<p>To troubleshoot a network connection, go through the following conditions and ensure that you meet them:
</p>
<ol>
<li>Your <a href="#Network_interfaces">network interface</a> is listed and enabled. Otherwise, check the device driver â€“ see <a href="../en/Network_configuration/Ethernet.html#Device_driver" title="Network configuration/Ethernet">/Ethernet#Device driver</a> or <a href="../en/Network_configuration/Wireless.html#Device_driver" title="Network configuration/Wireless">/Wireless#Device driver</a>.</li>
<li>You are connected to the network. The cable is plugged in or you are <a href="../en/Network_configuration/Wireless.html" title="Network configuration/Wireless">connected to the wireless LAN</a>.</li>
<li>Your network interface has an <a href="#IP_addresses">IP address</a>.</li>
<li>Your <a href="#Routing_table">routing table</a> is correctly set up.</li>
<li>You can <a href="#Ping">ping</a> a local IP address (e.g. your default gateway).</li>
<li>You can <a href="#Ping">ping</a> a public IP address (e.g. <code>8.8.8.8</code>, which is a Google DNS server and is a convenient address to test with).</li>
<li>
<a href="../en/Domain_name_resolution.html#Check_if_you_can_resolve_domain_names" class="mw-redirect" title="Check if you can resolve domain names">Check if you can resolve domain names</a> (e.g. <code>archlinux.org</code>).</li>
</ol>
<h3><span class="mw-headline" id="Ping">Ping</span></h3>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a><b>This article or section needs expansion.</b><a href="../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Add or link explanation of common ping errors like Unknown hosts / Network is unreachable. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Network_configuration">Talk:Network configuration#</a>)</div>
</div>
<p><a href="https://en.wikipedia.org/wiki/Ping_(networking_utility)" class="extiw" title="wikipedia:Ping (networking utility)">ping</a> is used to test if you can reach a host.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ping www.example.com</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">PING www.example.com (93.184.216.34): 56(84) data bytes
64 bytes from 93.184.216.34: icmp_seq=0 ttl=56 time=11.632 ms
64 bytes from 93.184.216.34: icmp_seq=1 ttl=56 time=11.726 ms
64 bytes from 93.184.216.34: icmp_seq=2 ttl=56 time=10.683 ms
...</pre>
<p>For every reply you receive, the ping utility will print a line like the above. For more information see the <span class="plainlinks archwiki-template-man" title="$ man 8 ping"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/ping.8">ping(8)</a></span> manual. Note that computers can be configured not to respond to ICMP echo requests. <a rel="nofollow" class="external autonumber" href="https://unix.stackexchange.com/questions/412446/how-to-disable-ping-response-icmp-echo-in-linux-all-the-time">[1]</a>
</p>
<p>If you receive no reply, this may be related to your default gateway or your Internet Service Provider (ISP). You can run a <a href="../en/Network_tools.html#Traceroute" class="mw-redirect" title="Traceroute">traceroute</a> to further diagnose the route to the host.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you receive an error like <code>ping: icmp open socket: Operation not permitted</code> when executing <i>ping</i>, try to re-install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=iputils">iputils</a></span> package.</div>
<h2><span class="mw-headline" id="Network_management">Network management</span></h2>
<p>To set up a network connection, go through the following steps:
</p>
<ol>
<li>Ensure your <a href="#Network_interfaces">network interface</a> is listed and enabled.</li>
<li>Connect to the network. Plug in the Ethernet cable or <a href="../en/Network_configuration/Wireless.html" title="Network configuration/Wireless">connect to the wireless LAN</a>.</li>
<li>Configure your network connection:
<ul>
<li><a href="#Static_IP_address">static IP address</a></li>
<li>dynamic IP address: use <a href="#DHCP">DHCP</a>
</li>
</ul>
</li>
</ol>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The installation image uses <a href="../en/Systemd-resolved.html" title="Systemd-resolved">systemd-resolved</a> and <a href="../en/Systemd-networkd.html" title="Systemd-networkd">systemd-networkd</a>, which is configured as a DHCP client for <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/archiso/-/blob/master/configs/releng/airootfs/etc/systemd/network/20-ethernet.network">wired</a> and <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/archiso/-/blob/master/configs/releng/airootfs/etc/systemd/network/20-wireless.network">wireless</a> network interfaces.</div>
<h3><span class="mw-headline" id="net-tools">net-tools</span></h3>
<p>Arch Linux has deprecated <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=net-tools">net-tools</a></span> in favor of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=iproute2">iproute2</a></span>.<a rel="nofollow" class="external autonumber" href="https://archlinux.org/news/deprecation-of-net-tools/">[2]</a>
</p>
<table class="wikitable">
<tbody>
<tr>
<th>Deprecated command</th>
<th>Replacement commands
</th>
</tr>
<tr>
<td>arp</td>
<td>ip neighbor
</td>
</tr>
<tr>
<td><a href="https://en.wikipedia.org/wiki/ifconfig" class="extiw" title="wikipedia:ifconfig">ifconfig</a></td>
<td>ip address, ip link
</td>
</tr>
<tr>
<td>netstat</td>
<td>
<a href="#Investigate_sockets">ss</a>
</td>
</tr>
<tr>
<td>route</td>
<td>ip route
</td>
</tr>
</tbody>
</table>
<p>For a more complete rundown, see <a rel="nofollow" class="external text" href="https://dougvitale.wordpress.com/2011/12/21/deprecated-linux-networking-commands-and-their-replacements/">this blog post</a>.
</p>
<h3><span class="mw-headline" id="iproute2">iproute2</span></h3>
<p><a href="https://en.wikipedia.org/wiki/iproute2" class="extiw" title="wikipedia:iproute2">iproute2</a> is a dependency of the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=base">base</a></span> <a href="../en/Meta_package_and_package_group.html#Difference_between_meta_package_and_package_group" class="mw-redirect" title="Meta package">meta package</a> and provides the <span class="plainlinks archwiki-template-man" title="$ man 8 ip"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/ip.8">ip(8)</a></span> command-line interface, used to manage <a href="#Network_interfaces">network interfaces</a>, <a href="#IP_addresses">IP addresses</a> and the <a href="#Routing_table">routing table</a>. Be aware that configuration made using <code>ip</code> will be lost after a reboot. For persistent configuration, you can use a <a href="../en/Network_configuration.html#Network_managers" class="mw-redirect" title="Network manager">network manager</a> or automate <i>ip</i> commands using scripts and <a href="../en/Systemd.html#Writing_unit_files" title="Systemd">systemd units</a>. Also note that <code>ip</code> commands can generally be abbreviated, for clarity they are however spelled out in this article.
</p>
<h3><span class="mw-headline" id="Network_interfaces">Network interfaces</span></h3>
<p>By default <a href="../en/Udev.html" title="Udev">udev</a> assigns names to your network interfaces using <a rel="nofollow" class="external text" href="https://systemd.io/PREDICTABLE_INTERFACE_NAMES/">Predictable Network Interface Names</a>, which prefixes interfaces names with <code>en</code> (wired/<a href="https://en.wikipedia.org/wiki/Ethernet" class="extiw" title="wikipedia:Ethernet">Ethernet</a>), <code>wl</code> (wireless/WLAN), or <code>ww</code> (<a href="https://en.wikipedia.org/wiki/Wireless_WAN" class="extiw" title="wikipedia:Wireless WAN">WWAN</a>).
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> To change interface names, see <a href="#Change_interface_name">#Change interface name</a> and <a href="#Revert_to_traditional_interface_names">#Revert to traditional interface names</a>.</div>
<h4><span class="mw-headline" id="Listing_network_interfaces">Listing network interfaces</span></h4>
<p>Both wired and wireless interface names can be found via <code>ls /sys/class/net</code> or <code>ip link</code>. Note that <code>lo</code> is the <a href="https://en.wikipedia.org/wiki/loop_device" class="extiw" title="wikipedia:loop device">loop device</a> and not used in making network connections.
</p>
<p>Wireless device names can also be retrieved using <code>iw dev</code>. See also <a href="../en/Network_configuration/Wireless.html#Get_the_name_of_the_interface" title="Network configuration/Wireless">/Wireless#Get the name of the interface</a>.
</p>
<p>If your network interface is not listed, make sure your device driver was loaded successfully. See <a href="../en/Network_configuration/Ethernet.html#Device_driver" title="Network configuration/Ethernet">/Ethernet#Device driver</a> or <a href="../en/Network_configuration/Wireless.html#Device_driver" title="Network configuration/Wireless">/Wireless#Device driver</a>.
</p>
<h4><span class="mw-headline" id="Enabling_and_disabling_network_interfaces">Enabling and disabling network interfaces</span></h4>
<p>Network interfaces can be enabled or disabled using <code>ip link set <i>interface</i> up|down</code>, see <span class="plainlinks archwiki-template-man" title="$ man 8 ip-link"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/ip-link.8">ip-link(8)</a></span>.
</p>
<p>To check the status of the interface <code>eth0</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ip link show dev eth0</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast master br0 state DOWN mode DEFAULT qlen 1000
...
</pre>
<p>The <code>UP</code> in <code>&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;</code> is what indicates the interface is up, not the later <code>state DOWN</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If your default route is through interface <code>eth0</code>, taking it down will also remove the route, and bringing it back up will not automatically re-establish the default route.  See <a href="#Routing_table">#Routing table</a> for re-establishing it.</div>
<h3>
<span id="Static_or_dynamic_IP_address.3F"></span><span class="mw-headline" id="Static_or_dynamic_IP_address?">Static or dynamic IP address?</span>
</h3>
<p>If you're using a wifi or a router, for example, at home, you'll most likely be using a dynamic IP address.  The IP address is asigned by the wifi or router and it's what your computer should be configured to use.  Or, if you're at home and your computer is connected to your ISP's modem, for example, a cable modem, that will also be using a dynamic IP address.  Dynamic IP addresses can change each time you turn your computer on.  In a work environment you may have a static IP address or a dynamic IP address.  At home you can configure your router to always assign your computer the same IP address in which case you're using a static IP address.  When you're using a dynamic IP address you'll need to use dhcp so that it can set up your network interface with the correct IP address.  In addition to configuring your IP address, DHCP can also configure your routing (how to get from where you are to wherever on the network you're going) as well as your name servers, which convert the host name, for example, google.com, into its IP address, that number with dots in it.
</p>
<h3><span class="mw-headline" id="Static_IP_address">Static IP address</span></h3>
<p>A static IP address can be configured with most standard <a href="#Network_managers">network managers</a> and also <a href="../en/Dhcpcd.html" title="Dhcpcd">dhcpcd</a>.
</p>
<p>To manually configure a static IP address, add an IP address as described in <a href="#IP_addresses">#IP addresses</a>, set up your <a href="#Routing_table">routing table</a> and <a href="../en/Domain_name_resolution.html" title="Domain name resolution">configure your DNS servers</a>.
</p>
<h3><span class="mw-headline" id="IP_addresses">IP addresses</span></h3>
<p><a href="https://en.wikipedia.org/wiki/IP_address" class="extiw" title="wikipedia:IP address">IP addresses</a> are managed using <span class="plainlinks archwiki-template-man" title="$ man 8 ip-address"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/ip-address.8">ip-address(8)</a></span>.
</p>
<p>List IP addresses:
</p>
<pre>$ ip address show
</pre>
<p>Add an IP address to an interface:
</p>
<pre># ip address add <i>address/prefix_len</i> broadcast + dev <i>interface</i>
</pre>
<dl><dd>Note that:</dd></dl>
<dl><dd><ul>
<li>the address is given in <a href="https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing#CIDR_notation" class="extiw" title="wikipedia:Classless Inter-Domain Routing">CIDR notation</a> to also supply a <a href="https://en.wikipedia.org/wiki/Subnetwork" class="extiw" title="wikipedia:Subnetwork">subnet mask</a>
</li>
<li>
<code>+</code> is a special symbol that makes <code>ip</code> derive the <a href="https://en.wikipedia.org/wiki/Broadcast_address" class="extiw" title="wikipedia:Broadcast address">broadcast address</a> from the IP address and the subnet mask</li>
</ul></dd></dl>
<dl><dd><div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Make sure manually assigned IP addresses do not conflict with DHCP assigned ones.</div></dd></dl>
<p>Delete an IP address from an interface:
</p>
<pre># ip address del <i>address/prefix_len</i> dev <i>interface</i>
</pre>
<p>Delete all addresses matching a criteria, e.g. of a specific interface:
</p>
<pre># ip address flush dev <i>interface</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> IP addresses can be calculated with <a rel="nofollow" class="external text" href="http://jodies.de/ipcalc">ipcalc</a> (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ipcalc">ipcalc</a></span>).</div>
<h3><span class="mw-headline" id="Routing_table">Routing table</span></h3>
<p>The <a href="https://en.wikipedia.org/wiki/Routing_table" class="extiw" title="wikipedia:Routing table">routing table</a> is used to determine if you can reach an IP address directly or what gateway (router) you should use. If no other route matches the IP address, the <a href="https://en.wikipedia.org/wiki/Default_gateway" class="extiw" title="wikipedia:Default gateway">default gateway</a> is used.
</p>
<p>The routing table is managed using <span class="plainlinks archwiki-template-man" title="$ man 8 ip-route"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/ip-route.8">ip-route(8)</a></span>.
</p>
<p><i>PREFIX</i> is either a CIDR notation or <code>default</code> for the default gateway.
</p>
<p>List IPv4 routes:
</p>
<pre>$ ip route show
</pre>
<p>List IPv6 routes:
</p>
<pre>$ ip -6 route
</pre>
<p>Add a route:
</p>
<pre># ip route add <i>PREFIX</i> via <i>address</i> dev <i>interface</i>
</pre>
<p>Delete a route:
</p>
<pre># ip route del <i>PREFIX</i> via <i>address</i> dev <i>interface</i>
</pre>
<h3><span class="mw-headline" id="DHCP">DHCP</span></h3>
<p>A <a href="https://en.wikipedia.org/wiki/Dynamic_Host_Configuration_Protocol" class="extiw" title="wikipedia:Dynamic Host Configuration Protocol">Dynamic Host Configuration Protocol</a> (DHCP) server provides clients with a dynamic IP address, the subnet mask, the default gateway IP address and optionally also with DNS name servers.
</p>
<p>To use DHCP you need a DHCP server in your network and a DHCP client:
</p>
<table class="wikitable">
<tbody>
<tr>
<th>Client</th>
<th>Package</th>
<th><a href="../en/Archiso.html" title="Archiso">Archiso</a></th>
<th>Note</th>
<th>Systemd units
</th>
</tr>
<tr>
<td><a href="../en/Dhcpcd.html" title="Dhcpcd">dhcpcd</a></td>
<td><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dhcpcd">dhcpcd</a></span></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td>DHCP, DHCPv6, ZeroConf, static IP</td>
<td>
<code>dhcpcd.service</code>, <code>dhcpcd@<i>interface</i>.service</code>
</td>
</tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://www.isc.org/downloads/dhcp/">ISC dhclient</a></td>
<td><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dhclient">dhclient</a></span></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td>DHCP, DHCPv6, BOOTP, static IP</td>
<td>
<code>dhclient@<i>interface</i>.service</code>
</td>
</tr>
</tbody>
</table>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>You should not run two DHCP clients simultaneously.</li>
<li>Instead of directly using a standalone DHCP client you can also use a <a href="#Network_managers">network manager</a>, some of which have a built-in DHCP client.</li>
<li>Alternatively, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=iwd">iwd</a></span> has a built-in DHCP client that can be used with some configuration: <a href="../en/Iwd.html#Enable_built-in_network_configuration" title="Iwd">iwd#Enable built-in network configuration</a>.</li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> 
<ul>
<li>You can check if a DHCP server is running with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dhcping">dhcping</a></span>.</li>
<li>While waiting for an IP to be assigned you can run something like <code>watch -n 1 ping -c 1 archlinux.org</code> to confirm that the network is connected.</li>
</ul>
</div>
<h4><span class="mw-headline" id="Servers">Servers</span></h4>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a><b>This article or section needs expansion.</b><a href="../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> <a href="../en/Systemd-networkd.html" title="Systemd-networkd">systemd-networkd</a> has DHCP server support. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Network_configuration">Talk:Network configuration#</a>)</div>
</div>
<table class="wikitable">
<tbody>
<tr>
<th>Server</th>
<th>Package</th>
<th>IPv4</th>
<th>IPv6</th>
<th>GUI</th>
<th>Interfaces</th>
<th>Storage backend(s)</th>
<th>Note
</th>
</tr>
<tr>
<td><a href="../en/Dhcpd.html" title="Dhcpd">dhcpd</a></td>
<td><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dhcp">dhcp</a></span></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td><a rel="nofollow" class="external text" href="https://github.com/Akkadius/glass-isc-dhcp">Glass-ISC-DHCP</a></td>
<td>?</td>
<td>File</td>
<td>
</td>
</tr>
<tr>
<td><a href="../en/Dnsmasq.html" title="Dnsmasq">dnsmasq</a></td>
<td><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dnsmasq">dnsmasq</a></span></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">No</td>
<td>?</td>
<td>File</td>
<td>Also DNS, PXE and TFTP
</td>
</tr>
<tr>
<td><a href="../en/Kea.html" title="Kea">Kea</a></td>
<td><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=kea">kea</a></span></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td><a rel="nofollow" class="external text" href="https://github.com/isc-projects/kea-anterius">Kea-Anterius (Experimental)</a></td>
<td>REST, RADIUS and NETCONF</td>
<td>File, MySQL, PostgreSQL and Cassandra</td>
<td>Also DNS
</td>
</tr>
</tbody>
</table>
<h3><span class="mw-headline" id="Network_managers">Network managers</span></h3>
<p>A network manager lets you manage network connection settings in so called network profiles to facilitate switching networks.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> There are many solutions to choose from, but remember that all of them are mutually exclusive; you should not run two daemons simultaneously.</div>
<table class="wikitable">
<tbody>
<tr>
<th>Network manager</th>
<th>GUI</th>
<th>
<a href="../en/Archiso.html" title="Archiso">Archiso</a> <a rel="nofollow" class="external autonumber" href="https://gitlab.archlinux.org/archlinux/archiso/-/blob/master/configs/releng/packages.x86_64">[3]</a>
</th>
<th>CLI tools</th>
<th>
<a href="https://en.wikipedia.org/wiki/Point-to-Point_Protocol" class="extiw" title="wikipedia:Point-to-Point Protocol">PPP</a> support <br>(e.g. 3G modem)</th>
<th><a href="#DHCP">DHCP client</a></th>
<th>Systemd units
</th>
</tr>
<tr>
<th>
<a href="../en/ConnMan.html" title="ConnMan">ConnMan</a>
</th>
<td data-sort-value="3" style="background: #ffa; color: inherit; vertical-align: middle; text-align: center;">8 unofficial</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">No</td>
<td><span class="plainlinks archwiki-template-man" title="$ man 1 connmanctl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/connmanctl.1">connmanctl(1)</a></span></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes (with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ofono/">ofono</a></span><sup><small>AUR</small></sup>)</td>
<td>internal</td>
<td>
<code>connman.service</code>
</td>
</tr>
<tr>
<th>
<a href="../en/Netctl.html" title="Netctl">netctl</a>
</th>
<td data-sort-value="3" style="background: #ffa; color: inherit; vertical-align: middle; text-align: center;">2 unofficial</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">No</td>
<td>
<span class="plainlinks archwiki-template-man" title="$ man 1 netctl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/netctl.1">netctl(1)</a></span>, wifi-menu</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td>
<a href="../en/Dhcpcd.html" title="Dhcpcd">dhcpcd</a> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dhclient">dhclient</a></span>
</td>
<td>
<code>netctl-ifplugd@<i>interface</i>.service</code>, <code>netctl-auto@<i>interface</i>.service</code>
</td>
</tr>
<tr>
<th>
<a href="../en/NetworkManager.html" title="NetworkManager">NetworkManager</a>
</th>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">No</td>
<td>
<span class="plainlinks archwiki-template-man" title="$ man 1 nmcli"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/nmcli.1">nmcli(1)</a></span>, <span class="plainlinks archwiki-template-man" title="$ man 1 nmtui"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/nmtui.1">nmtui(1)</a></span>
</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td>internal or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dhclient">dhclient</a></span>
</td>
<td>
<code>NetworkManager.service</code>
</td>
</tr>
<tr>
<th>
<a href="../en/Systemd-networkd.html" title="Systemd-networkd">systemd-networkd</a>
</th>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">No</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=base">base</a></span>)</td>
<td><span class="plainlinks archwiki-template-man" title="$ man 1 networkctl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/networkctl.1">networkctl(1)</a></span></td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;"><a rel="nofollow" class="external text" href="https://github.com/systemd/systemd/issues/481">No</a></td>
<td>internal</td>
<td>
<code>systemd-networkd.service</code>, <code>systemd-resolved.service</code>
</td>
</tr>
<tr>
<th>
<a href="../en/Wicd.html" title="Wicd">Wicd</a>
</th>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">No</td>
<td>
<span class="plainlinks archwiki-template-man" title="$ man 8 wicd-cli"><a rel="nofollow" class="external text" href="https://manned.org/wicd-cli.8">wicd-cli(8)</a></span>, <span class="plainlinks archwiki-template-man" title="$ man 8 wicd-curses"><a rel="nofollow" class="external text" href="https://manned.org/wicd-curses.8">wicd-curses(8)</a></span>
</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">No</td>
<td>
<a href="../en/Dhcpcd.html" title="Dhcpcd">dhcpcd</a> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dhclient">dhclient</a></span>
</td>
<td>
<code>wicd.service</code>
</td>
</tr>
</tbody>
</table>
<h2><span class="mw-headline" id="Set_the_hostname">Set the hostname</span></h2>
<p>A <a href="https://en.wikipedia.org/wiki/Hostname" class="extiw" title="wikipedia:Hostname">hostname</a> is a unique name created to identify a machine on a network, configured in <code>/etc/hostname</code>â€”see <span class="plainlinks archwiki-template-man" title="$ man 5 hostname"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/hostname.5">hostname(5)</a></span> and <span class="plainlinks archwiki-template-man" title="$ man 7 hostname"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/hostname.7">hostname(7)</a></span> for details. The file can contain the system's domain name, if any. To set the hostname, <a href="../en/Help:Reading.html#Append,_add,_create,_edit" class="mw-redirect" title="Textedit">edit</a> <code>/etc/hostname</code> to include a single line with <code><i>myhostname</i></code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/hostname</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"><i>myhostname</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> For advice on choosing a hostname, see <a rel="nofollow" class="external text" href="https://tools.ietf.org/html/rfc1178">RFC 1178</a>.</div>
<p>Alternatively, using <span class="plainlinks archwiki-template-man" title="$ man 1 hostnamectl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/hostnamectl.1">hostnamectl(1)</a></span>:
</p>
<pre># hostnamectl set-hostname <i>myhostname</i>
</pre>
<p>To temporarily set the hostname (until reboot), use <span class="plainlinks archwiki-template-man" title="$ man 1 hostname"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/hostname.1">hostname(1)</a></span> from <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=inetutils">inetutils</a></span>:
</p>
<pre># hostname <i>myhostname</i>
</pre>
<p>To set the "pretty" hostname and other machine metadata, see <span class="plainlinks archwiki-template-man" title="$ man 5 machine-info"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/machine-info.5">machine-info(5)</a></span>.
</p>
<h3><span class="mw-headline" id="Local_hostname_resolution">Local hostname resolution</span></h3>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a><b>This article or section needs expansion.</b><a href="../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Explain why you want a resolvable hostname, why <code>127.0.1.1</code> is used (and why a static IP address should be preferred over it). (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Network_configuration">Talk:Network configuration#</a>)</div>
</div>
<p>The <code>myhostname</code> <a href="../en/Domain_name_resolution.html#Name_Service_Switch" class="mw-redirect" title="Name Service Switch">Name Service Switch</a> (NSS) module of <a href="../en/Systemd.html" title="Systemd">systemd</a> provides local hostname resolution without having to edit <code>/etc/hosts</code> (<span class="plainlinks archwiki-template-man" title="$ man 5 hosts"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/hosts.5">hosts(5)</a></span>). It is enabled by default.
</p>
<p>Some clients may however still rely on <code>/etc/hosts</code>, see <a rel="nofollow" class="external autonumber" href="https://lists.debian.org/debian-devel/2013/07/msg00809.html">[4]</a> <a rel="nofollow" class="external autonumber" href="https://bugzilla.mozilla.org/show_bug.cgi?id=87717#c55">[5]</a> for examples.
</p>
<p>To configure the hosts file, add the following lines to <code>/etc/hosts</code>:
</p>
<pre>127.0.0.1        localhost
::1              localhost
127.0.1.1        <i>myhostname</i>.localdomain        <i>myhostname</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The order of hostnames/aliases that follow the IP address in <code>/etc/hosts</code> is significant. The first string is considered the canonical hostname and may be appended with parent domains, where domain components are separated by a dot (ie. <code>.localdomain</code> above). All following strings on the same line are considered aliases. See <span class="plainlinks archwiki-template-man" title="$ man 5 hosts"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/hosts.5">hosts(5)</a></span> for more info.</div>
<p>As a result the system resolves to both entries: 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ getent hosts</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">127.0.0.1       localhost
127.0.0.1       localhost
127.0.1.1       <i>myhostname</i>.localdomain <i>myhostname</i>
</pre>
<p>For a system with a permanent IP address, that permanent IP address should be used instead of <code>127.0.1.1</code>.
</p>
<h3><span class="mw-headline" id="Local_network_hostname_resolution">Local network hostname resolution</span></h3>
<p>To make your machine accessible in your LAN via its hostname you can:
</p>
<ul>
<li>edit the <code>/etc/hosts</code> file for every device in your LAN, see <span class="plainlinks archwiki-template-man" title="$ man 5 hosts"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/hosts.5">hosts(5)</a></span>
</li>
<li>set up a <a href="../en/Category:Domain_Name_System.html" class="mw-redirect" title="DNS server">DNS server</a> to resolve your hostname and make the LAN devices use it (e.g. via <a href="#DHCP">#DHCP</a>)</li>
<li>or the easy way: use a <a href="https://en.wikipedia.org/wiki/Zero-configuration_networking" class="extiw" title="wikipedia:Zero-configuration networking">Zero-configuration networking</a> service:
<ul>
<li>Hostname resolution via Microsoft's <a href="https://en.wikipedia.org/wiki/NetBIOS#Name_service" class="extiw" title="wikipedia:NetBIOS">NetBIOS</a>. Provided by <a href="../en/Samba.html" title="Samba">Samba</a> on Linux. It only requires the <code>nmb.service</code>. Computers running Windows, macOS, or Linux with <code>nmb</code> running, will be able to find your machine.</li>
<li>Hostname resolution via <a href="https://en.wikipedia.org/wiki/Multicast_DNS" class="extiw" title="wikipedia:Multicast DNS">mDNS</a>. Provided by either <code>nss_mdns</code> with <a href="../en/Avahi.html" title="Avahi">Avahi</a> (see <a href="../en/Avahi.html#Hostname_resolution" title="Avahi">Avahi#Hostname resolution</a> for setup details) or <a href="../en/Systemd-resolved.html" title="Systemd-resolved">systemd-resolved</a>. Computers running macOS, or Linux with Avahi or systemd-resolved running, will be able to find your machine. The older Win32 API does not support mDNS, which may prevent some older Windows applications from accessing your device.</li>
</ul>
</li>
</ul>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="Change_interface_name">Change interface name</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> When changing the naming scheme, do not forget to update all network-related configuration files and custom systemd unit files to reflect the change.</div>
<p>You can change the device name by defining the name manually with an udev-rule. For example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/10-network.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">SUBSYSTEM=="net", ACTION=="add", ATTR{address}=="aa:bb:cc:dd:ee:ff", NAME="net1"
SUBSYSTEM=="net", ACTION=="add", ATTR{address}=="ff:ee:dd:cc:bb:aa", NAME="net0"</pre>
<p>These rules will be applied automatically at boot.
</p>
<p>A couple of things to note:
</p>
<ul>
<li>To get the MAC address of each card, use this command: <code>cat /sys/class/net/<i>device_name</i>/address</code>
</li>
<li>Make sure to use the lower-case hex values in your udev rules. It does not like upper-case.</li>
</ul>
<p>If the network card has a dynamic MAC, you can use <code>DEVPATH</code>, for example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/10-network.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">SUBSYSTEM=="net", DEVPATH=="/devices/platform/wemac.*", NAME="int"
SUBSYSTEM=="net", DEVPATH=="/devices/pci*/*1c.0/*/net/*", NAME="en"</pre>
<p>To get the <code>DEVPATH</code> of all currently-connected devices, see where the symlinks in <code>/sys/class/net/</code> lead. For example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">file /sys/class/net/*</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/sys/class/net/enp0s20f0u4u1: symbolic link to ../../devices/pci0000:00/0000:00:14.0/usb2/2-4/2-4.1/2-4.1:1.0/net/enp0s20f0u4u1
/sys/class/net/enp0s31f6:     symbolic link to ../../devices/pci0000:00/0000:00:1f.6/net/enp0s31f6
/sys/class/net/lo:            symbolic link to ../../devices/virtual/net/lo
/sys/class/net/wlp4s0:        symbolic link to ../../devices/pci0000:00/0000:00:1c.6/0000:04:00.0/net/wlp4s0
</pre>
<p>The device path should match both the new and old device name, since the rule may be executed more than once on bootup. For example, in the second rule, <code>"/devices/pci*/*1c.0/*/net/enp*"</code> would be wrong since it will stop matching once the name is changed to <code>en</code>. Only the system-default rule will fire the second time around, causing the name to be changed back to e.g. <code>enp1s0</code>.
</p>
<p>If you are using a USB network device (e.g. Android phone tethering) that has a dynamic MAC address and you want to be able to use different USB ports, you could use a rule that matched depending on vendor and product ID instead:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/10-network.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">SUBSYSTEM=="net", ACTION=="add", ATTRS{idVendor}=="12ab", ATTRS{idProduct}=="3cd4", NAME="net2"</pre>
<p>To <a href="../en/Udev.html#Testing_rules_before_loading" title="Udev">test</a> your rules, they can be triggered directly from userspace, e.g. with <code>udevadm --debug test /sys/class/net/*</code>. Remember to first take down the interface you are trying to rename (e.g. <code>ip link set enp1s0 down</code>).
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> When choosing the static names <b>it should be avoided to use names in the format of "eth<i>X</i>" and "wlan<i>X</i>"</b>, because this may lead to race conditions between the kernel and udev during boot. Instead, it is better to use interface names that are not used by the kernel as default, e.g.: <code>net0</code>, <code>net1</code>, <code>wifi0</code>, <code>wifi1</code>. For further details please see the <a rel="nofollow" class="external text" href="https://systemd.io/PREDICTABLE_INTERFACE_NAMES/">systemd</a> documentation.</div>
<h3><span class="mw-headline" id="Revert_to_traditional_interface_names">Revert to traditional interface names</span></h3>
<p>If you would prefer to retain traditional interface names such as eth0,  <a rel="nofollow" class="external text" href="https://systemd.io/PREDICTABLE_INTERFACE_NAMES/">Predictable Network Interface Names</a> can be disabled by masking the udev rule:
</p>
<pre># ln -s /dev/null /etc/udev/rules.d/80-net-setup-link.rules
</pre>
<p>Alternatively, add <code>net.ifnames=0</code> to the <a href="../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a>.
</p>
<h3><span class="mw-headline" id="Set_device_MTU_and_queue_length">Set device MTU and queue length</span></h3>
<p>You can change the device <a href="https://en.wikipedia.org/wiki/Maximum_transmission_unit" class="extiw" title="wikipedia:Maximum transmission unit">MTU</a> and queue length by defining manually with an udev-rule. For example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/10-network.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ACTION=="add", SUBSYSTEM=="net", KERNEL=="wl*", ATTR{mtu}="1500", ATTR{tx_queue_len}="2000"</pre>
<p><code>mtu</code>: Using a value larger than 1500 (so called <a href="https://en.wikipedia.org/wiki/jumbo_frame" class="extiw" title="wikipedia:jumbo frame">jumbo frames</a>) can significantly speed up your network transfers. Note that all network interfaces, including switches in the local network, must support the same MTU in order to use jumbo frames. For PPPoE, the MTU should not be larger than 1492. You can also set MTU via <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.netdev"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.netdev.5">systemd.netdev(5)</a></span>.
</p>
<p><code>tx_queue_len</code>: Small value for slower devices with a high latency like modem links and ISDN. High value is recommended for server connected over the high-speed internet connections that perform large data transfers.
</p>
<h3><span class="mw-headline" id="Bonding_or_LAG">Bonding or LAG</span></h3>
<p>See <a href="../en/Netctl.html#Bonding" title="Netctl">netctl</a> or <a href="../en/Systemd-networkd.html#Bonding_a_wired_and_wireless_interface" title="Systemd-networkd">systemd-networkd</a>, or <a href="../en/Wireless_bonding.html" title="Wireless bonding">Wireless bonding</a>.
</p>
<h3><span class="mw-headline" id="IP_address_aliasing">IP address aliasing</span></h3>
<p>IP aliasing is the process of adding more than one IP address to a network interface. With this, one node on a network can have multiple connections to a network, each serving a different purpose. Typical uses are virtual hosting of Web and FTP servers, or reorganizing servers without having to update any other machines (this is especially useful for nameservers).
</p>
<h4><span class="mw-headline" id="Example">Example</span></h4>
<p>To manually set an alias, for some NIC, use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=iproute2">iproute2</a></span> to execute
</p>
<pre># ip addr add 192.168.2.101/24 dev eth0 label eth0:1
</pre>
<p>To remove a given alias execute
</p>
<pre># ip addr del 192.168.2.101/24 dev eth0:1
</pre>
<p>Packets destined for a subnet will use the primary alias by default. If the destination IP is within a subnet of a secondary alias, then the source IP is set respectively. Consider the case where there is more than one NIC, the default routes can be listed with <code>ip route</code>.
</p>
<h3><span class="mw-headline" id="Promiscuous_mode">Promiscuous mode</span></h3>
<p>Toggling <a href="https://en.wikipedia.org/wiki/Promiscuous_mode" class="extiw" title="wikipedia:Promiscuous mode">promiscuous mode</a> will make a (wireless) NIC forward all traffic it receives to the OS for further processing. This is opposite to "normal mode" where a NIC will drop frames it is not intended to receive. It is most often used for advanced network troubleshooting and <a href="https://en.wikipedia.org/wiki/Packet_sniffing" class="extiw" title="wikipedia:Packet sniffing">packet sniffing</a>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/promiscuous@.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Set %i interface in promiscuous mode
After=network.target

[Service]
Type=oneshot
ExecStart=/usr/bin/ip link set dev %i promisc on
RemainAfterExit=yes

[Install]
WantedBy=multi-user.target
</pre>
<p>If you want to enable promiscuous mode on interface <code>eth0</code> run <a href="../en/Systemd.html#Using_units" class="mw-redirect" title="Enable">enable</a> <code>promiscuous@eth0.service</code>.
</p>
<h3><span class="mw-headline" id="Investigate_sockets">Investigate sockets</span></h3>
<p><i>ss</i> is a utility to investigate network ports and is part of the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=iproute2">iproute2</a></span> package. It has a similar functionality to the <a rel="nofollow" class="external text" href="https://archlinux.org/news/deprecation-of-net-tools/">deprecated</a> netstat utility. 
</p>
<p>Common usage includes:
</p>
<p>Display all TCP Sockets with service names:
</p>
<pre>$ ss -at
</pre>
<p>Display all TCP Sockets with port numbers:
</p>
<pre>$ ss -atn
</pre>
<p>Display all UDP Sockets:
</p>
<pre>$ ss -au
</pre>
<p>For more information see <span class="plainlinks archwiki-template-man" title="$ man 8 ss"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/ss.8">ss(8)</a></span>.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="The_TCP_window_scaling_problem">The TCP window scaling problem</span></h3>
<p>TCP packets contain a "window" value in their headers indicating how much data the other host may send in return. This value is represented with only 16 bits, hence the window size is at most 64KiB. TCP packets are cached for a while (they have to be reordered), and as memory is (or used to be) limited, one host could easily run out of it.
</p>
<p>Back in 1992, as more and more memory became available, <a rel="nofollow" class="external text" href="http://www.faqs.org/rfcs/rfc1323.html">RFC 1323</a> was written to improve the situation: Window Scaling. The "window" value, provided in all packets, will be modified by a Scale Factor defined once, at the very beginning of the connection. That 8-bit Scale Factor allows the Window to be up to 32 times higher than the initial 64KiB.
</p>
<p>It appears that some broken routers and firewalls on the Internet are rewriting the Scale Factor to 0 which causes misunderstandings between hosts. The Linux kernel 2.6.17 introduced a new calculation scheme generating higher Scale Factors, virtually making the aftermaths of the broken routers and firewalls more visible.
</p>
<p>The resulting connection is at best very slow or broken.
</p>
<h4><span class="mw-headline" id="How_to_diagnose_the_problem">How to diagnose the problem</span></h4>
<p>First of all, let us make it clear: this problem is odd. In some cases, you will not be able to use TCP connections (HTTP, FTP, ...) at all and in others, you will be able to communicate with some hosts (very few).
</p>
<p>When you have this problem, the <code>dmesg</code>'s output is OK, logs are clean and <code>ip addr</code> will report normal status... and actually everything appears normal.
</p>
<p>If you cannot browse any website, but you can ping some random hosts, chances are great that you are experiencing this problem: ping uses ICMP and is not affected by TCP problems.
</p>
<p>You can try to use <a href="../en/Wireshark.html" title="Wireshark">Wireshark</a>. You might see successful UDP and ICMP communications but unsuccessful TCP communications (only to foreign hosts).
</p>
<h4><span class="mw-headline" id="Ways_of_fixing_it">Ways of fixing it</span></h4>
<h5><span class="mw-headline" id="Bad">Bad</span></h5>
<p>To fix it the bad way, you can change the <code>tcp_rmem</code> value, on which Scale Factor calculation is based. Although it should work for most hosts, it is not guaranteed, especially for very distant ones.
</p>
<pre># echo "4096 87380 174760" &gt; /proc/sys/net/ipv4/tcp_rmem
</pre>
<h5><span class="mw-headline" id="Good">Good</span></h5>
<p>Simply disable Window Scaling. Since Window Scaling is a nice TCP feature, it may be uncomfortable to disable it, especially if you cannot fix the broken router. There are several ways to disable Window Scaling, and it seems that the most bulletproof way (which will work with most kernels) is to add the following line to <code>/etc/sysctl.d/99-disable_window_scaling.conf</code> (see also <a href="../en/Sysctl.html" title="Sysctl">sysctl</a>):
</p>
<pre>net.ipv4.tcp_window_scaling = 0
</pre>
<h5><span class="mw-headline" id="Best">Best</span></h5>
<p>This problem is caused by broken routers/firewalls, so let us change them. Some users have reported that the broken router was their very own DSL router.
</p>
<h4><span class="mw-headline" id="More_about_it">More about it</span></h4>
<p>This section is based on the LWN article <a rel="nofollow" class="external text" href="http://lwn.net/Articles/92727/">TCP window scaling and broken routers</a> and an archived Kernel Trap article: <a rel="nofollow" class="external text" href="https://web.archive.org/web/20120426135627/http://kerneltrap.org:80/node/6723">Window Scaling on the Internet</a>.
</p>
<p>There are also several relevant threads on the LKML.
</p>
<h3><span class="mw-headline" id="Connected_second_PC_unable_to_use_bridged_LAN">Connected second PC unable to use bridged LAN</span></h3>
<p>First PC have two LAN. Second PC have one LAN and connected to first PC. Lets go second PC to give all access to LAN after bridged interface:
</p>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a><b>This article or section needs expansion.</b><a href="../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Explain what the settings actually do. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Network_configuration">Talk:Network configuration#</a>)</div>
</div>
<pre># sysctl net.bridge.bridge-nf-filter-pppoe-tagged=0
# sysctl net.bridge.bridge-nf-filter-vlan-tagged=0
# sysctl net.bridge.bridge-nf-call-ip6tables=0
# sysctl net.bridge.bridge-nf-call-iptables=0
# sysctl net.bridge.bridge-nf-call-arptables=0
</pre>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://www.tldp.org/LDP/nag2/index.html">Linux Network Administrators Guide</a></li>
<li><a rel="nofollow" class="external text" href="https://www.debian.org/doc/manuals/debian-reference/ch05.en.html">Debian Reference: Network setup</a></li>
<li><a rel="nofollow" class="external text" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Networking_Guide/">RHEL7: Networking Guide</a></li>
<li><a rel="nofollow" class="external text" href="https://blog.packagecloud.io/eng/2016/06/22/monitoring-tuning-linux-networking-stack-receiving-data/">Monitoring and tuning the Linux Networking Stack: Receiving data</a></li>
<li><a rel="nofollow" class="external text" href="https://blog.packagecloud.io/eng/2017/02/06/monitoring-tuning-linux-networking-stack-sending-data/">Monitoring and tuning the Linux Networking Stack: Sending data</a></li>
<li><a rel="nofollow" class="external text" href="http://blog.yadutaf.fr/2017/07/28/tracing-a-packet-journey-using-linux-tracepoints-perf-ebpf/">Tracing a packet journey using tracepoints, perf and eBPF</a></li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Network_configuration.html" title="Category:Network configuration">Network configuration</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Network_configuration&amp;oldid=656158">https://wiki.archlinux.org/index.php?title=Network_configuration&amp;oldid=656158</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 26 March 2021, at 09:06.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
