<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Flatpak - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Flatpak rootpage-Flatpak skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Flatpak</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../en/Snap.html" class="mw-redirect" title="Snapd">Snapd</a></li>
<li><a href="../en/Bubblewrap.html" title="Bubblewrap">bubblewrap</a></li>
</ul>
</div>
<p>From the project <a rel="nofollow" class="external text" href="https://github.com/flatpak/flatpak/blob/master/README.md">README</a>: "<i><a rel="nofollow" class="external text" href="http://flatpak.org">Flatpak</a> is a system for building, distributing and running sandboxed desktop applications on Linux.</i>"
</p>
<p>From <span class="plainlinks archwiki-template-man" title="$ man 1 flatpak"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/flatpak.1">flatpak(1)</a></span>:
</p>
<dl>
<dd><i>Flatpak is a tool for managing applications and the runtimes they use. In the Flatpak model, applications can be built and distributed independently from the host system they are used on, and they are isolated from the host system ('sandboxed') to some degree, at runtime.</i></dd>
<dd><i>Flatpak uses <a rel="nofollow" class="external text" href="https://ostree.readthedocs.io/en/latest/">OSTree</a> to distribute and deploy data. The repositories it uses are OSTree repositories and can be manipulated with the ostree utility. Installed runtimes and applications are OSTree checkouts.</i></dd>
</dl>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Installation"><span class="tocnumber">1</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Managing_repositories"><span class="tocnumber">2</span> <span class="toctext">Managing repositories</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Add_a_repository"><span class="tocnumber">2.1</span> <span class="toctext">Add a repository</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Delete_a_repository"><span class="tocnumber">2.2</span> <span class="toctext">Delete a repository</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#List_repositories"><span class="tocnumber">2.3</span> <span class="toctext">List repositories</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6">
<a href="#Managing_runtimes_and_applications"><span class="tocnumber">3</span> <span class="toctext">Managing runtimes and applications</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#Search_for_a_remote_runtime_or_application"><span class="tocnumber">3.1</span> <span class="toctext">Search for a remote runtime or application</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#List_all_available_runtimes_and_applications"><span class="tocnumber">3.2</span> <span class="toctext">List all available runtimes and applications</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Install_a_runtime_or_application"><span class="tocnumber">3.3</span> <span class="toctext">Install a runtime or application</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#List_installed_runtimes_and_applications"><span class="tocnumber">3.4</span> <span class="toctext">List installed runtimes and applications</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Run_applications"><span class="tocnumber">3.5</span> <span class="toctext">Run applications</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Update_a_runtime_or_application"><span class="tocnumber">3.6</span> <span class="toctext">Update a runtime or application</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Uninstall_a_runtime_or_application"><span class="tocnumber">3.7</span> <span class="toctext">Uninstall a runtime or application</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Adding_Flatpak_.desktop_files_to_your_menu"><span class="tocnumber">3.8</span> <span class="toctext">Adding Flatpak .desktop files to your menu</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Viewing_sandbox_permissions_of_application"><span class="tocnumber">3.9</span> <span class="toctext">Viewing sandbox permissions of application</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Overriding_sandbox_permissions_of_applications"><span class="tocnumber">3.10</span> <span class="toctext">Overriding sandbox permissions of applications</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-17">
<a href="#Creating_a_custom_base_runtime"><span class="tocnumber">4</span> <span class="toctext">Creating a custom base runtime</span></a>
<ul>
<li class="toclevel-2 tocsection-18"><a href="#Creating_apps_with_pacman"><span class="tocnumber">4.1</span> <span class="toctext">Creating apps with pacman</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-19"><a href="#See_also"><span class="tocnumber">5</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=flatpak">flatpak</a></span> package.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you want to build flatpaks with <code>flatpak-builder</code> you will need to install the optional dependencies of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=elfutils">elfutils</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=patch">patch</a></span>.</div>
<h2><span class="mw-headline" id="Managing_repositories">Managing repositories</span></h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> By default, every flatpak command works system-wide, i.e. packages are installed for all users in the computer and flatpak requires the user to supply root's password. To install packages and work with repositories on a single user (with no need of superuser rights) you can add the option <code>--user</code> to each command. If you want, for example, to add a repository only visible to you, you should run <code>flatpak remote-add --user <i>name</i> <i>location</i></code>. To install a package visible only to you, run <code>flatpak install --user <i>package-name</i></code>.</div>
<h3><span class="mw-headline" id="Add_a_repository">Add a repository</span></h3>
<p>To add a remote flatpak repository do:
</p>
<pre>$ flatpak remote-add <i>name</i> <i>location</i>
</pre>
<p>where <i>name</i> is the name for the new remote, and <i>location</i> is the path or URL for the repository.
</p>
<p>For example to add the official <a rel="nofollow" class="external text" href="https://flathub.org/">Flathub repository</a>:
</p>
<pre>$ flatpak remote-add --if-not-exists flathub https://dl.flathub.org/repo/flathub.flatpakrepo
</pre>
<h3><span class="mw-headline" id="Delete_a_repository">Delete a repository</span></h3>
<p>To delete a remote flatpak repository do:
</p>
<pre>$ flatpak remote-delete <i>name</i>
</pre>
<p>where <i>name</i> is the name of the remote repository to be deleted.
</p>
<h3><span class="mw-headline" id="List_repositories">List repositories</span></h3>
<p>To list all the added repositories do:
</p>
<pre>$ flatpak remotes
</pre>
<h2><span class="mw-headline" id="Managing_runtimes_and_applications">Managing runtimes and applications</span></h2>
<h3><span class="mw-headline" id="Search_for_a_remote_runtime_or_application">Search for a remote runtime or application</span></h3>
<p>Before being able to search for a runtime or application in a newly added remote repository, we need to retrieve the appstream data for it:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ flatpak update</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Looking for updates...
Updating appstream data for remote <i>name</i>
</pre>
<p>Then we can proceed to search for a package with <code>flatpak search <i>packagename</i></code>, <i>e.g.</i> to look for the package <code>libreoffice</code> with the <code>flathub</code> remote configured:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ flatpak search libreoffice</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Application ID              Version Branch Remotes Description                       
org.libreoffice.LibreOffice         stable flathub The LibreOffice productivity suite
</pre>
<h3><span class="mw-headline" id="List_all_available_runtimes_and_applications">List all available runtimes and applications</span></h3>
<p>To list all available runtimes and applications in a remote repository named <i>remote</i> do:
</p>
<pre>$ flatpak remote-ls <i>remote</i>
</pre>
<h3><span class="mw-headline" id="Install_a_runtime_or_application">Install a runtime or application</span></h3>
<p>To install a runtime or application do:
</p>
<pre>$ flatpak install <i>remote</i> <i>name</i>
</pre>
<p>where <i>remote</i> is the name of the remote repository, and <i>name</i> is the name of the application or runtime to install.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> You can use partial identifiers <code>flatpak install <i>partial-name</i></code> (for example <code>flatpak install libreoffice</code>).</div>
<h3><span class="mw-headline" id="List_installed_runtimes_and_applications">List installed runtimes and applications</span></h3>
<p>To list installed runtimes and applications do:
</p>
<pre>$ flatpak list
</pre>
<h3><span class="mw-headline" id="Run_applications">Run applications</span></h3>
<p>Binaries are available in <code>/var/lib/flatpak/exports/bin</code>, which is automatically added to $PATH by <code>/etc/profile.d/flatpak-bindir.sh</code>. You may have to re-login to apply the change.
</p>
<p>Flatpak applications can also be run with the command line:
</p>
<pre>$ flatpak run <i>name</i>
</pre>
<h3><span class="mw-headline" id="Update_a_runtime_or_application">Update a runtime or application</span></h3>
<p>To update a runtime or application named <i>name</i> do:
</p>
<pre>$ flatpak update <i>name</i>
</pre>
<h3><span class="mw-headline" id="Uninstall_a_runtime_or_application">Uninstall a runtime or application</span></h3>
<p>To uninstall a runtime or application named <i>name</i> do:
</p>
<pre>$ flatpak uninstall <i>name</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> You can uninstall unused flatpak "refs" (aka orphans with no application/runtime) with <code>flatpak uninstall --unused</code>.</div>
<h3><span class="mw-headline" id="Adding_Flatpak_.desktop_files_to_your_menu">Adding Flatpak .desktop files to your menu</span></h3>
<p>Flatpak expects window managers to respect the XDG_DATA_DIRS environment variable to discover applications. This variable is set by the script <code>/etc/profile.d/flatpak.sh</code>. Updating the environment may require restarting the session. If the launcher does not support XDG_DATA_DIRS, you can edit the list of directories scanned and add these to it:
</p>
<pre>~/.local/share/flatpak/exports/share/applications
/var/lib/flatpak/exports/share/applications
</pre>
<p>This is known to be necessary in Awesome.
</p>
<h3><span class="mw-headline" id="Viewing_sandbox_permissions_of_application">Viewing sandbox permissions of application</span></h3>
<p>Flatpak applications come with predefined sandbox rules which defines the resources and file system paths the application is allowed to access.
To view the specific application permissions do:
</p>
<pre>$ flatpak info --show-permissions <i>name</i>
</pre>
<p>The reference of the sandbox permission names can be found on <a rel="nofollow" class="external text" href="https://docs.flatpak.org/en/latest/sandbox-permissions-reference.html">official flatpak documentation</a>.
</p>
<h3><span class="mw-headline" id="Overriding_sandbox_permissions_of_applications">Overriding sandbox permissions of applications</span></h3>
<p>If you find the predefined permissions of the application too lax or too restrictive you can change to anything you want using <code>flatpak override</code> command.
For example:
</p>
<pre>flatpak override --nofilesystem=home <i>name</i>
</pre>
<p>This will prevent the application access to your home folder.
</p>
<p>Every type of permission such as device, filesystem or socket has an command line option that allows that particular permission and a separated option that denies. For example, in case of device access <code>--device=<i>device_name</i></code> allows access, <code>--nodevice=<i>device_name</i></code> denies the permission to access device.
</p>
<p>For all permission types commands consult the manual page: <span class="plainlinks archwiki-template-man" title="$ man 1 flatpak-override"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/flatpak-override.1">flatpak-override(1)</a></span>
</p>
<p>Permission overrides can be reset to defaults with command:
</p>
<pre>$ flatpak override --reset <i>name</i>
</pre>
<p><a rel="nofollow" class="external text" href="https://flathub.org/apps/details/com.github.tchx84.Flatseal">Flatseal</a> is a GUI permissions manager which offer simple point-and-click permissions operations.
</p>
<h2><span class="mw-headline" id="Creating_a_custom_base_runtime">Creating a custom base runtime</span></h2>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a><b>This article or section needs expansion.</b><a href="../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> This can certainly be improved. It also has problems with D-Bus for GNOME apps. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Flatpak">Talk:Flatpak#</a>)</div>
</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> If you want to release your software to the public as a Flatpak, an Arch-based runtime is unsuitable. In this case, you will want to follow <a rel="nofollow" class="external text" href="http://docs.flatpak.org">official documentation</a> to integrate your software into the proper Flatpak ecosystem using the <a rel="nofollow" class="external text" href="http://flatpak.org/runtimes.html">common runtimes</a>.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>You may want to use an untrusted, unprivileged user account for bundling untrusted software because the software is not sandboxed during app and runtime creation.</li>
<li>When distributing bundles to others, you may be legally obliged to provide the source code of some of the bundled software upon request. You may want to use <a href="../en/Arch_Build_System.html" class="mw-redirect" title="ABS">ABS</a> to build these packages from source.</li>
</ul>
</div>
<p>You can create a custom Arch-based base runtime and base SDK for Flatpak using pacman. You can then use it for building and packaging applications. This is an alternative for personal use to the default <code>org.freedesktop.BasePlatform</code> and <code>org.freedesktop.BaseSdk</code> runtimes.
</p>
<p>In addition to <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=flatpak">flatpak</a></span>, you need to have installed <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=fakeroot">fakeroot</a></span> and for pacman hooks support also <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=fakechroot">fakechroot</a></span>.
</p>
<p>First, start by creating a directory for building the runtime and possibly applications.
</p>
<pre>$ mkdir <i>myflatpakbuilddir</i>
$ cd <i>myflatpakbuilddir</i>
</pre>
<p>You can then prepare a directory for building the runtime base platform. The files subdirectory will contain what will later be the <code>/usr</code> directory in the sandbox. Therefore you will need to create symbolic links so the default <code>/usr/share</code> etc. from Arch can still be accessed at the usual path.
</p>
<pre>$ mkdir -p <i>myruntime</i>/files/var/lib/pacman
$ touch <i>myruntime</i>/files/.ref
$ ln -s /usr/usr/share <i>myruntime</i>/files/share
$ ln -s /usr/usr/include <i>myruntime</i>/files/include
$ ln -s /usr/usr/local <i>myruntime</i>/files/local
</pre>
<p>Make your host OS fonts available to the Arch runtime:
</p>
<pre>$ mkdir -p <i>myruntime</i>/files/usr/share/fonts
$ ln -s /run/host/fonts <i>myruntime</i>/files/usr/share/fonts/flatpakhostfonts
</pre>
<p>You need and may want to adapt your <code>pacman.conf</code> before installing packages to the runtime. Copy <code>/etc/pacman.conf</code> to your build directory and then make the following changes:
</p>
<ul>
<li>Remove the <code>CheckSpace</code> option so pacman will not complain about errors finding the root filesystem for checking disk space.</li>
<li>Remove any undesired custom repositories and <code>IgnorePkg</code>, <code>IgnoreGroup</code>, <code>NoUpgrade</code> and <code>NoExtract</code> settings that are needed only for the host system.</li>
</ul>
<p>Now install the packages for the runtime.
</p>
<pre>$ fakechroot fakeroot pacman -Syu --root <i>myruntime</i>/files --dbpath <i>myruntime</i>/files/var/lib/pacman --config pacman.conf base
$ mv pacman.conf <i>myruntime</i>/files/etc/pacman.conf
</pre>
<p>Set up the <a href="../en/Locale.html" title="Locale">locales</a> to be used by editing <code><i>myruntime</i>/files/etc/locale.gen</code>. Then regenerate the runtime’s locales.
</p>
<pre>$ fakechroot chroot <i>myruntime</i>/files locale-gen
</pre>
<p>The base SDK can be created from the base runtime with added applications needed for building packages and running pacman.
</p>
<pre>$ cp -r <i>myruntime</i> mysdk
$ fakechroot fakeroot pacman -S --root mysdk/files --dbpath mysdk/files/var/lib/pacman --config mysdk/files/etc/pacman.conf base-devel fakeroot fakechroot --needed
</pre>
<p>Insert metadata about runtime and SDK.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>myruntime</i>/metadata</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Runtime]
name=org.mydomain.BasePlatform
runtime=org.mydomain.BasePlatform/x86_64/2016-06-26
sdk=org.mydomain.BaseSdk/x86_64/2016-06-26</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">mysdk/metadata</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Runtime]
name=org.mydomain.BaseSdk
runtime=org.mydomain.BasePlatform/x86_64/2016-06-26
sdk=org.mydomain.BaseSdk/x86_64/2016-06-26</pre>
<p>Add base runtime and SDK to a local repository in the current directory. You may want to give them appropriate commit messages such as “My Arch base runtime” and “My Arch base SDK”.
</p>
<pre>$ ostree init --mode archive-z2 --repo=.
$ EDITOR="nano -w" ostree commit -b runtime/org.mydomain.BasePlatform/x86_64/2016-06-26 --tree=dir=<i>myruntime</i>
$ EDITOR="nano -w" ostree commit -b runtime/org.mydomain.BaseSdk/x86_64/2016-06-26 --tree=dir=mysdk
$ ostree summary -u
</pre>
<p>Install the runtime and SDK.
</p>
<pre>$ flatpak remote-add --user --no-gpg-verify myarchos file://$(pwd)
$ flatpak install --user myarchos org.mydomain.BasePlatform 2016-06-26
$ flatpak install --user myarchos org.mydomain.BaseSdk 2016-06-26
</pre>
<h3><span class="mw-headline" id="Creating_apps_with_pacman">Creating apps with pacman</span></h3>
<p>As an alternative to building applications <a rel="nofollow" class="external text" href="http://flatpak.org/developer.html">the usual way</a>, we can use pacman to create a containerized version of the regular Arch packages. Note that <code>/usr</code> is read-only when creating apps, so we can not use Arch’s packages when building an app. To create a real app with pacman, we can either
</p>
<ul>
<li>use pacman to create a runtime containing all dependencies</li>
<li>and compile the app ourselves <a rel="nofollow" class="external text" href="http://flatpak.org/developer.html">as usual</a> or perhaps using pacman with a custom <a href="../en/PKGBUILD.html" title="PKGBUILD">PKGBUILD</a> tailored to Flatpak which uses <code>--prefix=/app</code> for the <code>configure</code> script,</li>
</ul>
<p>or we can
</p>
<ul>
<li>use pacman to create a runtime containing the app installed with pacman</li>
<li>and create a dummy app to launch it.</li>
</ul>
<p>For doing the latter, first create a runtime using pacman such as this one for <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gedit">gedit</a></span>. The runtime is first initialized and prepared for use with pacman.
</p>
<pre>$ flatpak build-init -w geditruntime org.mydomain.geditruntime org.mydomain.BaseSdk org.mydomain.BasePlatform 2016-06-26
$ flatpak build geditruntime sed -i "s/^#Server/Server/g" /etc/pacman.d/mirrorlist
$ flatpak build geditruntime ln -s /usr/var/lib /var/lib
$ flatpak build geditruntime fakeroot pacman-key --init
$ flatpak build geditruntime fakeroot pacman-key --populate archlinux
</pre>
<p>Then the package is installed. The host’s network connection must be made available to pacman.
</p>
<pre>$ flatpak build --share=network geditruntime fakechroot fakeroot pacman --root /usr -S gedit
</pre>
<p>You can test the installation before finishing the runtime (without proper sandboxing).
</p>
<pre>$ flatpak build --socket=x11 geditruntime gedit
</pre>
<p>Now finish building the runtime and export it to a new local repository. pacman’s GnuPG keys have permissions that may interfere and need to be removed first.
</p>
<pre>$ flatpak build geditruntime rm -r /etc/pacman.d/gnupg
$ flatpak build-finish geditruntime
$ sed -i "s/\[Application\]/\[Runtime\]/;s/runtime=org.mydomain.BasePlatform/runtime=org.mydomain.geditruntime/" geditruntime/metadata
$ flatpak build-export -r geditrepo geditruntime
</pre>
<p>Then create a dummy app.
</p>
<pre>$ flatpak build-init geditapp org.gnome.gedit org.mydomain.BaseSdk org.mydomain.geditruntime
</pre>
<p>Now finish the dummy app. You can fine-tune the app’s access permissions when sandboxed by giving additional options when finishing the build. For possible options see the <a href="#See_also">Flatpak documentation</a> and the <a rel="nofollow" class="external text" href="https://gitlab.gnome.org/GNOME/gnome-apps-nightly/tree/master">GNOME manifest files</a>. Alternatively, adapt <code>geditapp/metadata</code> to your needs after finishing the build but before exporting. When the metadata file is complete, export the app to the repository.
</p>
<pre>$ flatpak build-finish geditapp --socket=x11 <i>[possibly other options]</i> --command=gedit
$ flatpak build-export geditrepo geditapp
</pre>
<p>Install it along with the runtime.
</p>
<pre>$ flatpak --user remote-add --no-gpg-verify geditrepo geditrepo
$ flatpak install --user geditrepo org.mydomain.geditruntime
$ flatpak install --user geditrepo org.gnome.gedit
$ flatpak run org.gnome.gedit
</pre>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="http://flatpak.org">Official website</a></li>
<li><a rel="nofollow" class="external text" href="https://github.com/flatpak/flatpak/wiki">Official Github wiki</a></li>
<li><a href="https://en.wikipedia.org/wiki/Flatpak" class="extiw" title="wikipedia:Flatpak">Wikipedia page</a></li>
<li><a rel="nofollow" class="external text" href="https://wiki.gnome.org/Projects/SandboxedApps">Gnome SandboxedApps</a></li>
<li><a rel="nofollow" class="external text" href="https://community.kde.org/Guidelines_and_HOWTOs/Flatpak">KDE Testing Runtime and Applications</a></li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Development.html" title="Category:Development">Development</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Flatpak&amp;oldid=649252">https://wiki.archlinux.org/index.php?title=Flatpak&amp;oldid=649252</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 19 January 2021, at 09:36.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
