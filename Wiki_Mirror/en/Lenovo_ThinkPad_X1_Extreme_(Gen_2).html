<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Lenovo ThinkPad X1 Extreme (Gen 2) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Lenovo_ThinkPad_X1_Extreme_Gen_2 rootpage-Lenovo_ThinkPad_X1_Extreme_Gen_2 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Lenovo ThinkPad X1 Extreme (Gen 2)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../en/Laptop/Lenovo.html" title="Laptop/Lenovo">Laptop/Lenovo</a></li>
<li><a href="../en/Lenovo_ThinkPad_X1_Extreme.html" title="Lenovo ThinkPad X1 Extreme">Lenovo ThinkPad X1 Extreme</a></li>
</ul>
</div>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a><b>This article or section needs language, wiki syntax or style improvements. See <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a> for reference.</b><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Need to add permission information. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Lenovo_ThinkPad_X1_Extreme_(Gen_2)">Talk:Lenovo ThinkPad X1 Extreme (Gen 2)#</a>)</div>
</div>
<table class="wikitable" style="float: right; clear: right;">
<tbody>
<tr>
<td><b>Device</b></td>
<td><b>Status</b></td>
<td>
<b>Modules</b>
</td>
</tr>
<tr>
<td>Intel UHD 630 Graphics</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>i915
</td>
</tr>
<tr>
<td>NVIDIA GeForce GTX 1650</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>nvidia
</td>
</tr>
<tr>
<td>Intel AX200 Wifi</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>iwlwifi
</td>
</tr>
<tr>
<td>Intel HDA</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>snd_hda_intel
</td>
</tr>
<tr>
<td>Synaptics touchpad</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>libinput
</td>
</tr>
<tr>
<td>Chicony Electronics</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>uvcvideo
</td>
</tr>
<tr>
<td>Card reader</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>xhci_hcd
</td>
</tr>
<tr>
<td>Intel AX200 Bluetooth</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>btusb
</td>
</tr>
<tr>
<td>Intel Thunderbolt</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>thunderbolt
</td>
</tr>
<tr>
<td>Synaptics fingerprint reader</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>
</td>
</tr>
</tbody>
</table>
<p>The <a rel="nofollow" class="external text" href="https://www.lenovo.com/us/en/laptops/thinkpad/thinkpad-x/X1-Extreme-Gen-2/p/22TP2TXX1E2">Thinkpad X1E Gen 2</a>  is a thin-and-light 15.6" workstation/multimedia laptop from Lenovo's 2019 ThinkPad X lineup.
</p>
<p>This page specifically concerns the specifics of running Arch Linux on this laptop. See <a href="../en/Laptop.html" title="Laptop">Laptop</a> for generic laptop-related information, or <a href="../en/Laptop/Lenovo.html" class="mw-redirect" title="ThinkPad">ThinkPad</a> for other ThinkPad laptops.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Hardware"><span class="tocnumber">1</span> <span class="toctext">Hardware</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Thunderbolt_3"><span class="tocnumber">1.1</span> <span class="toctext">Thunderbolt 3</span></a></li>
<li class="toclevel-2 tocsection-3">
<a href="#Battery"><span class="tocnumber">1.2</span> <span class="toctext">Battery</span></a>
<ul>
<li class="toclevel-3 tocsection-4"><a href="#Invalid_stats_workaround"><span class="tocnumber">1.2.1</span> <span class="toctext">Invalid stats workaround</span></a></li>
<li class="toclevel-3 tocsection-5"><a href="#Battery_life_and_graphics"><span class="tocnumber">1.2.2</span> <span class="toctext">Battery life and graphics</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-6">
<a href="#Graphics"><span class="tocnumber">1.3</span> <span class="toctext">Graphics</span></a>
<ul>
<li class="toclevel-3 tocsection-7"><a href="#Nouveau"><span class="tocnumber">1.3.1</span> <span class="toctext">Nouveau</span></a></li>
<li class="toclevel-3 tocsection-8">
<a href="#NVIDIA"><span class="tocnumber">1.3.2</span> <span class="toctext">NVIDIA</span></a>
<ul>
<li class="toclevel-4 tocsection-9"><a href="#Prime_features"><span class="tocnumber">1.3.2.1</span> <span class="toctext">Prime features</span></a></li>
<li class="toclevel-4 tocsection-10"><a href="#Power_Management"><span class="tocnumber">1.3.2.2</span> <span class="toctext">Power Management</span></a></li>
<li class="toclevel-4 tocsection-11"><a href="#Optimus_manager"><span class="tocnumber">1.3.2.3</span> <span class="toctext">Optimus manager</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2 tocsection-12">
<a href="#Brightness_control"><span class="tocnumber">1.4</span> <span class="toctext">Brightness control</span></a>
<ul>
<li class="toclevel-3 tocsection-13"><a href="#OLED_Display"><span class="tocnumber">1.4.1</span> <span class="toctext">OLED Display</span></a></li>
<li class="toclevel-3 tocsection-14">
<a href="#LCD_Display"><span class="tocnumber">1.4.2</span> <span class="toctext">LCD Display</span></a>
<ul>
<li class="toclevel-4 tocsection-15"><a href="#Hybrid_Graphics"><span class="tocnumber">1.4.2.1</span> <span class="toctext">Hybrid Graphics</span></a></li>
<li class="toclevel-4 tocsection-16"><a href="#Discrete_Graphics"><span class="tocnumber">1.4.2.2</span> <span class="toctext">Discrete Graphics</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2 tocsection-17">
<a href="#Audio"><span class="tocnumber">1.5</span> <span class="toctext">Audio</span></a>
<ul>
<li class="toclevel-3 tocsection-18"><a href="#Audio_pop_on_shutdown_and_startup"><span class="tocnumber">1.5.1</span> <span class="toctext">Audio pop on shutdown and startup</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-19"><a href="#Fingerprint"><span class="tocnumber">1.6</span> <span class="toctext">Fingerprint</span></a></li>
<li class="toclevel-2 tocsection-20">
<a href="#Card_reader"><span class="tocnumber">1.7</span> <span class="toctext">Card reader</span></a>
<ul>
<li class="toclevel-3 tocsection-21"><a href="#Installation"><span class="tocnumber">1.7.1</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-3 tocsection-22"><a href="#Testing"><span class="tocnumber">1.7.2</span> <span class="toctext">Testing</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-23"><a href="#Webcam"><span class="tocnumber">1.8</span> <span class="toctext">Webcam</span></a></li>
<li class="toclevel-2 tocsection-24">
<a href="#Keyboard"><span class="tocnumber">1.9</span> <span class="toctext">Keyboard</span></a>
<ul>
<li class="toclevel-3 tocsection-25"><a href="#Backlight"><span class="tocnumber">1.9.1</span> <span class="toctext">Backlight</span></a></li>
<li class="toclevel-3 tocsection-26"><a href="#Skipping_keystrokes"><span class="tocnumber">1.9.2</span> <span class="toctext">Skipping keystrokes</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-27">
<a href="#Touchpad"><span class="tocnumber">1.10</span> <span class="toctext">Touchpad</span></a>
<ul>
<li class="toclevel-3 tocsection-28"><a href="#Acceleration"><span class="tocnumber">1.10.1</span> <span class="toctext">Acceleration</span></a></li>
<li class="toclevel-3 tocsection-29"><a href="#Two-Finger_Right_Click"><span class="tocnumber">1.10.2</span> <span class="toctext">Two-Finger Right Click</span></a></li>
<li class="toclevel-3 tocsection-30"><a href="#Tap_Clicking"><span class="tocnumber">1.10.3</span> <span class="toctext">Tap Clicking</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-31">
<a href="#WiFi"><span class="tocnumber">1.11</span> <span class="toctext">WiFi</span></a>
<ul>
<li class="toclevel-3 tocsection-32"><a href="#WiFi_card_not_detected_after_reboot"><span class="tocnumber">1.11.1</span> <span class="toctext">WiFi card not detected after reboot</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-33">
<a href="#Ethernet"><span class="tocnumber">1.12</span> <span class="toctext">Ethernet</span></a>
<ul>
<li class="toclevel-3 tocsection-34"><a href="#Not_getting_gigabit"><span class="tocnumber">1.12.1</span> <span class="toctext">Not getting gigabit</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-35">
<a href="#Firmware"><span class="tocnumber">2</span> <span class="toctext">Firmware</span></a>
<ul>
<li class="toclevel-2 tocsection-36"><a href="#Check_BIOS_version"><span class="tocnumber">2.1</span> <span class="toctext">Check BIOS version</span></a></li>
<li class="toclevel-2 tocsection-37">
<a href="#Flashing_BIOS"><span class="tocnumber">2.2</span> <span class="toctext">Flashing BIOS</span></a>
<ul>
<li class="toclevel-3 tocsection-38"><a href="#Updating"><span class="tocnumber">2.2.1</span> <span class="toctext">Updating</span></a></li>
<li class="toclevel-3 tocsection-39"><a href="#Reverting_to_previous_versions"><span class="tocnumber">2.2.2</span> <span class="toctext">Reverting to previous versions</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-40">
<a href="#Software"><span class="tocnumber">3</span> <span class="toctext">Software</span></a>
<ul>
<li class="toclevel-2 tocsection-41">
<a href="#Throttling_fix"><span class="tocnumber">3.1</span> <span class="toctext">Throttling fix</span></a>
<ul>
<li class="toclevel-3 tocsection-42"><a href="#Throttled"><span class="tocnumber">3.1.1</span> <span class="toctext">Throttled</span></a></li>
<li class="toclevel-3 tocsection-43"><a href="#CPU_undervolting"><span class="tocnumber">3.1.2</span> <span class="toctext">CPU undervolting</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Hardware">Hardware</span></h2>
<h3><span class="mw-headline" id="Thunderbolt_3">Thunderbolt 3</span></h3>
<p>To use Thunderbolt 3, ensure you are on the latest BIOS firmware (doing the following steps on older BIOSes may brick your device):
</p>
<p>1. Go into BIOS
</p>
<p>2. Enable BIOS Assist mode: (Thunderbolt 3 -&gt; Enable BIOS assist mode) *Ensure you're on the latest BIOS!*
</p>
<h3><span class="mw-headline" id="Battery">Battery</span></h3>
<h4><span class="mw-headline" id="Invalid_stats_workaround">Invalid stats workaround</span></h4>
<p>As of writing, <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1859876">a bug exists</a> where the battery data can appear corrupt, wildly incorrect, or seem to change drastically from boot to boot. To workaround this bug you should add battery to the  <code>/etc/mkinitcpio.conf</code>.
</p>
<pre>MODULES=(<b>battery</b>)
</pre>
<p>Remember to <a href="../en/Mkinitcpio.html#Image_creation_and_activation" class="mw-redirect" title="Regenerate the initramfs">regenerate the initramfs</a> for these changes to take effect.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> You can also build the battery module into your kernel.</div>
<h4><span class="mw-headline" id="Battery_life_and_graphics">Battery life and graphics</span></h4>
<p><a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=238389">bbswitch does not work</a> on this laptop to disable the NVIDIA card when not in use. To disable the NVIDIA card you can run:
</p>
<pre># tee /sys/bus/pci/devices/0000\:01\:00.1/remove &lt;&lt;&lt;1
# tee /sys/bus/pci/devices/0000\:01\:00.0/remove &lt;&lt;&lt;1
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> It may be much easier to just use optimus manager with the necessary power options described in <a href="#Graphics">#Graphics</a>
</div>
<h3><span class="mw-headline" id="Graphics">Graphics</span></h3>
<h4><span class="mw-headline" id="Nouveau">Nouveau</span></h4>
<p>Currently (5.2.9-arch1), the Nouveau driver can cause quite a lot of kernel panics when using the webcamera. You should blacklist this driver to prevent it from being loaded. 
</p>
<h4><span class="mw-headline" id="NVIDIA">NVIDIA</span></h4>
<h5><span class="mw-headline" id="Prime_features">Prime features</span></h5>
<p>The NVIDIA driver now supports PRIME Offloading. <a rel="nofollow" class="external text" href="http://download.nvidia.com/XFree86/Linux-x86_64/435.17/README/primerenderoffload.html">Following this guide</a> you can try out this new mode.
</p>
<h5><span class="mw-headline" id="Power_Management">Power Management</span></h5>
<p>To get the best power options the graphics card may be configured to use low power mode by <a rel="nofollow" class="external text" href="http://download.nvidia.com/XFree86/Linux-x86_64/435.17/README/dynamicpowermanagement.html">following the guide here</a>
</p>
<h5><span class="mw-headline" id="Optimus_manager">Optimus manager</span></h5>
<p>Currently, one of the easiest solutions for this laptop is to use <a rel="nofollow" class="external text" href="https://github.com/Askannz/optimus-manager">optimus-manager</a> with the hybrid backend. This requires the most up to date nvidia and xorg-server packages.
</p>
<p>This allows easy switching between the PRIME offloading feature above, and a mode where external display ports (HDMI and USB-C) work.
</p>
<p>Steps to setup after a fresh install:
</p>
<ul>
<li>Install nvidia proprietary driver 'prime', not bumblebee.</li>
<li>Reboot.</li>
<li>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/optimus-manager/">optimus-manager</a></span><sup><small>AUR</small></sup>.</li>
<li>Reboot.</li>
<li>`optimus-manager --switch nvidia` # this will restart your X session, but not make the change persistent.</li>
<li>`lspci -k | grep -A 2 -E "(VGA|3D)"` should say: Kernel driver in use: nvidia.</li>
<li>`xrandr` should list HDMI output - try to configure screen, should work.</li>
<li>`nvidia-settings` should work.</li>
<li>In the optimus-manager config file, located at /etc/optimus-manager/optimus-manager.conf, change the setting startup_mode to nvidia to make it persistent.</li>
<li>Check: reboot, external display should still work.</li>
</ul>
<h3><span class="mw-headline" id="Brightness_control">Brightness control</span></h3>
<h4><span class="mw-headline" id="OLED_Display">OLED Display</span></h4>
<p>OLED screens have no backlight, brightness cannot be controlled by changing backlight power in the traditional way. Instead, it can be controlled using PWM by enabling following option:
</p>
<pre>echo "options i915 enable_dpcd_backlight=1" &gt;&gt; /etc/modprobe.d/i915.conf
</pre>
<p>Alternatively, you can add a kernel parameter. For example, if you are using GRUB, edit /etc/default/grub with 
</p>
<pre>GRUB_CMDLINE_LINUX_DEFAULT="i915.enable_dpcd_backlight=1"
</pre>
<p>Don't forget to <a href="../en/GRUB.html#Generate_the_main_configuration_file" title="GRUB">update the grub configuration</a> to apply the changes.
</p>
<p>Brightness control is not yet supported by standard tools. You can try this one <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/oled-backlight/">oled-backlight</a></span><sup><small>AUR</small></sup>
</p>
<h4><span class="mw-headline" id="LCD_Display">LCD Display</span></h4>
<h5><span class="mw-headline" id="Hybrid_Graphics">Hybrid Graphics</span></h5>
<p>Hybrid Graphics (also known as <a href="../en/NVIDIA_Optimus.html" title="NVIDIA Optimus"> Nvidia Optimus</a>) Allows the system to use the integrated Intel graphics and the Nvidia GPU interchangeably without rebooting.
</p>
<p>Brightness control under Hybrid Graphics should work "out of the box" with no kernel command line options necessary. If you notice brightness controls cease working, check that your BIOS settings are still for "Hybrid Graphics" and not "Discrete Graphics".
</p>
<h5><span class="mw-headline" id="Discrete_Graphics">Discrete Graphics</span></h5>
<p>Discrete graphics means only the Nvidia GPU is available to the system.
</p>
<p>Currently brightness control does not work with "Discrete Graphics" selected in BIOS.
</p>
<h3><span class="mw-headline" id="Audio">Audio</span></h3>
<h4><span class="mw-headline" id="Audio_pop_on_shutdown_and_startup">Audio pop on shutdown and startup</span></h4>
<p>To work around the loud audio artifacts on startup/shutdown follow the guide for enabling the audio powersave: <a href="../en/Power_management.html#Audio" title="Power management">Power management#Audio</a>.
</p>
<h3><span class="mw-headline" id="Fingerprint">Fingerprint</span></h3>
<p>The 1.90.1 version of fprint supports this device after a firmware update.
</p>
<p>Setup <a href="../en/Fwupd.html" title="Fwupd">fwupd</a> then, using the latest version of the fwupd tool you should be able to run:
</p>
<pre>fwupdmgr get-devices
</pre>
<p>and see a "Prometheus" device in the list.
</p>
<p>If your fingerprint has been enrolled in Windows before, you may need to reset your fingerprint data in BIOS to see a "Prometheus" device.
</p>
<p>Install the firmware by running
</p>
<pre>fwupdmgr update
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> At this point, a reboot may be required </div>
<p>You should then be able to enroll your fingerprints with <a href="../en/Fprint.html#Configuration" title="Fprint">Fprint#Configuration</a>
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> For some reason, <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/libfprint/libfprint/issues/207">the fprint.service can take some time to start. if fprint reports no devices, wait until fprint.service has completely stopped (it should become inactive in systemctl) To fix this, reset the fingerprint data in your bios settings</a> </div>
<h3><span class="mw-headline" id="Card_reader">Card reader</span></h3>
<p>The optional card reader that the Lenovo can install in your laptop is a Alcor Micro AU9560. There are some tools you can use to test your card reader.
</p>
<h4><span class="mw-headline" id="Installation">Installation</span></h4>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ccid">ccid</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=opensc">opensc</a></span> from <a href="../en/Official_repositories.html" title="Official repositories">official repositories</a>. Then, <a href="../en/Systemd.html#Using_units" class="mw-redirect" title="Start">Start</a> and enable <code>pcscd.socket</code>.
</p>
<pre>systemctl enable pcscd
systemctl start pcscd
</pre>
<h4><span class="mw-headline" id="Testing">Testing</span></h4>
<p>First, verify that your card reader can be found by pcsc:
</p>
<pre>opensc-tool --list-readers
</pre>
<p>Now, insert a smart card and run the following to verify that pcsc is able to read your card:
</p>
<pre>pcsc_scan
</pre>
<h3><span class="mw-headline" id="Webcam">Webcam</span></h3>
<p>The webcam in this laptop is capable of "Windows Hello" which has a Linux version called <a href="../en/Howdy.html" title="Howdy">Howdy</a>. The device you should use to configure howdy on this laptop is <code>/dev/video0</code>. It is possible that <a href="../en/Howdy.html" title="Howdy">Howdy</a> will only use the RGB camera, in this case some additional configuration and software is required. Follow <a rel="nofollow" class="external text" href="https://www.reddit.com/r/thinkpad/comments/ffd82c/setup_howdy_on_thinkpad_x1_extreme_gen_2/">this</a> guide on installing <a rel="nofollow" class="external text" href="https://github.com/PetePriority/chicony-ir-toggle">chicony-ir-toggle</a> and setting it up as a service. Or you can just install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/chicony-ir-toggle-git/">chicony-ir-toggle-git</a></span><sup><small>AUR</small></sup>, which automatically helps you enable the IR camera after booting the system and waking up from sleep. Before installing <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/chicony-ir-toggle-git/">chicony-ir-toggle-git</a></span><sup><small>AUR</small></sup>, make sure you change the local variables in <code>prepare()</code> in PKGBUILD to match your own IR camera. In this case try changing the video device to <code>/dev/video2</code> in the howdy config <code>sudo howdy config</code>, if everything has worked correctly when running <code>sudo howdy test</code> the IR Camera should have a very faint red light. This will indicate that the camera is functioning and <a href="../en/Howdy.html" title="Howdy">Howdy</a> is using the IR camera correctly.
</p>
<h3><span class="mw-headline" id="Keyboard">Keyboard</span></h3>
<h4><span class="mw-headline" id="Backlight">Backlight</span></h4>
<p>If you would like to enable the keyboard backlight, run:
</p>
<pre>echo 2 | tee /sys/class/leds/tpacpi::kbd_backlight/brightness
</pre>
<p>The "2" represents the brightness and can be any value between 0 and 2 (inclusive) for the laptop. For example, to turn off the keyboard backlight, you would run:
</p>
<pre>echo 0 | tee /sys/class/leds/tpacpi::kbd_backlight/brightness
</pre>
<h4><span class="mw-headline" id="Skipping_keystrokes">Skipping keystrokes</span></h4>
<p>There is an issue with keystrokes being skipped at times (<a rel="nofollow" class="external text" href="https://forums.lenovo.com/t5/ThinkPad-X-Series-Laptops/X1-Extreme-Gen-2-missing-keystrokes/td-p/4569936?page=72">see the Lenovo forums</a>). This is resolved with system firmware version 1.30. See <a href="#Firmware">Firmware</a> to check your current version and upgrade.
</p>
<h3><span class="mw-headline" id="Touchpad">Touchpad</span></h3>
<p>The touchpad works out-of-the-box with libinput. However, it will be very insensitive.
</p>
<p>Make sure to not install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-input-synaptics">xf86-input-synaptics</a></span> - this driver is deprecated, lacks all features mentioned below, but is still installed by default with the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/groups/x86_64/xorg-drivers/">xorg-drivers</a></span> group.
</p>
<p>You can check which input driver Xorg is using for your touchpad with:
</p>
<pre>grep 'Using input driver' /var/log/Xorg.0.log | grep 'SynPS/2 Synaptics TouchPad'
# Expected output: [   248.282] (II) Using input driver 'libinput' for 'SynPS/2 Synaptics TouchPad'
</pre>
<p>You can explicitly chose an input driver by placing an Xorg configuration snippet like the following in /etc/X11/xorg.conf.d/99-synaptics.conf:
</p>
<pre>Section "InputClass"
       Identifier "touchpad catchall"
       MatchIsTouchpad "on"
       Driver "libinput"
EndSection
</pre>
<h4><span class="mw-headline" id="Acceleration">Acceleration</span></h4>
<p>You can adjust acceleration using the command:
</p>
<pre>xinput set-prop 'SynPS/2 Synaptics TouchPad' 'libinput Accel Speed' 0.5
</pre>
<h4><span class="mw-headline" id="Two-Finger_Right_Click">Two-Finger Right Click</span></h4>
<p>Additionally, if you wish to disable right-clicking so that you use two finger click as your right click, run:
</p>
<pre>xinput set-prop 'SynPS/2 Synaptics TouchPad' 'libinput Click Method Enabled' 0 1    
</pre>
<h4><span class="mw-headline" id="Tap_Clicking">Tap Clicking</span></h4>
<p>If you would like for a tap on the touchpad to be registered as a click, use:
</p>
<pre>xinput set-prop 'SynPS/2 Synaptics TouchPad' 'libinput Tapping Enabled' 1
</pre>
<h3><span class="mw-headline" id="WiFi">WiFi</span></h3>
<h4><span class="mw-headline" id="WiFi_card_not_detected_after_reboot">WiFi card not detected after reboot</span></h4>
<p>If your WiFi card is occasionally not detected after reboots, this may be related to a known bug that is related to windows fastboot. 
Workarounds are to completely shutdown the machine (no suspend or reboot), on next boot it works for me. 
Alternatives suggested are to first boot into windows, and/or disable windows fastboot in the bios. 
</p>
<p>References:
<a rel="nofollow" class="external autonumber" href="https://bugzilla.kernel.org/show_bug.cgi?id=201319">[1]</a>
<a rel="nofollow" class="external autonumber" href="https://askubuntu.com/questions/1083369/ubuntu-18-04-cannot-recognized-intel-wireless-ac-9260">[2]</a>
<a rel="nofollow" class="external autonumber" href="https://bugzilla.kernel.org/show_bug.cgi?id=205299">[3]</a>
</p>
<h3><span class="mw-headline" id="Ethernet">Ethernet</span></h3>
<h4><span class="mw-headline" id="Not_getting_gigabit">Not getting gigabit</span></h4>
<p>If you have issues with a gigabit connection being capped at 100 MB/s and you are using the <i>e1000e</i> driver, try adding <i>pcie_aspm=off</i> to the kernel boot parameters.
</p>
<p>Additionally, run the following to get a more slight network performance improvement:
</p>
<pre> ethtool -s &lt;INTERFACE&gt; autoneg on speed 1000 duplex full
</pre>
<p>References:
<a rel="nofollow" class="external autonumber" href="https://serverfault.com/a/219658">[4]</a>
</p>
<h2><span class="mw-headline" id="Firmware">Firmware</span></h2>
<p>BIOS and firmware updates are available via <a href="../en/Fwupd.html" title="Fwupd">fwupd</a>, the Lenovo Vantage application on Windows, or from <a rel="nofollow" class="external text" href="https://pcsupport.lenovo.com/us/en/products/laptops-and-netbooks/thinkpad-x-series-laptops/thinkpad-x1-extreme-gen-2/downloads">Lenovo's website</a>.
</p>
<p>The latest BIOS version is highly recommended. All information on this page should assume the latest BIOS unless explicitly stated otherwise.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> To install Arch Linux you need to disable <a href="../en/Unified_Extensible_Firmware_Interface/Secure_Boot.html" class="mw-redirect" title="Secure Boot">Secure Boot</a>. If you cannot do so (e.g. because of <code>error: failed to save storage - write protected</code>), it may help to reset the BIOS to factory defaults (F9) and/or upgrade your BIOS.</div>
<h3><span class="mw-headline" id="Check_BIOS_version">Check BIOS version</span></h3>
<p>From Lenovo's firmware readme, to check the system's installed BIOS version:
</p>
<pre>DETERMINING WHICH VERSION IS INSTALLED

 [Checking on ThinkPad Setup]

  1. Turn on the computer.
  2. While the "To interrupt normal startup, press Enter" message is displayed
     at the lower-left area or lower-center of the screen, press the F1 key.
     The ThinkPad Setup menu will be displayed. If a password prompt appears,
     type the correct password.
  3. Locate the UEFI BIOS Version line.
     "UEFI BIOS version (BIOS ID)" will be shown on the UEFI BIOS Version line.
  4. Turn off the computer.
</pre>
<p>Alternatively, use fwupdmgr from <a href="../en/Fwupd.html" title="Fwupd">fwupd</a> without rebooting:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ fwupdmgr get-devices</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
├─System Firmware:
│     Current version:     0.1.30
...</pre>
<h3><span class="mw-headline" id="Flashing_BIOS">Flashing BIOS</span></h3>
<h4><span class="mw-headline" id="Updating">Updating</span></h4>
<p>Download the zip file labelled "BIOS Update Utility (Linux)" from <a rel="nofollow" class="external text" href="https://support.lenovo.com/us/en/downloads/ds540308">Lenovo's support website</a> or <a rel="nofollow" class="external text" href="https://fwupd.org/lvfs/devices/com.lenovo.ThinkPadN2OET.firmware">fwupd.org directly</a>. Extract the zip file, then use <a href="../en/Fwupd.html" title="Fwupd">fwupd</a> to update the firmware:
</p>
<pre> $ su
 # fwupdmgr install &lt;filename&gt;.cab
</pre>
<p>Then reboot immediately to finish the upgrade.
</p>
<h4><span class="mw-headline" id="Reverting_to_previous_versions">Reverting to previous versions</span></h4>
<p>To downgrade your bios, you can use the <i>--allow-older</i> flag.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If the UEFI BIOS has been updated to version 1.34 or higher, it is no longer
  able to roll back to the version before 1.34 for boot problem prevention. The same applies for version 1.26 as well.</div>
<p>Version 1.31 introduced new thermal controls. On battery power, fans won't spin up until a higher temperature threshold is reached in an effort to increase battery life. Reverting to 1.29 restores previous thermal controls and fan operation. Be advised that there is no downgrading from 1.34.
</p>
<h2><span class="mw-headline" id="Software">Software</span></h2>
<h3><span class="mw-headline" id="Throttling_fix">Throttling fix</span></h3>
<p>You will see a dmesg error that talks about CPU throttling. 
</p>
<p>There are a few ways to fix this. You should only use one of the following as they both attempt to undervolt.
</p>
<h4><span class="mw-headline" id="Throttled">Throttled</span></h4>
<p>To fix this install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=throttled">throttled</a></span>, then run 
</p>
<pre>systemctl enable --now lenovo_fix.service
</pre>
<h4><span class="mw-headline" id="CPU_undervolting">CPU undervolting</span></h4>
<p>Undervolting the CPU/Intel GPU works well with <a href="../en/Undervolting_CPU.html#intel-undervolt" title="Undervolting CPU">intel-undervolt</a>.
</p>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Lenovo.html" title="Category:Lenovo">Lenovo</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Lenovo_ThinkPad_X1_Extreme_(Gen_2)&amp;oldid=647850">https://wiki.archlinux.org/index.php?title=Lenovo_ThinkPad_X1_Extreme_(Gen_2)&amp;oldid=647850</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 1 January 2021, at 16:33.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
