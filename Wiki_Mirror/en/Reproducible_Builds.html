<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Reproducible Builds - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Reproducible_Builds rootpage-Reproducible_Builds skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Reproducible Builds</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-go-next.png" class="image"><img alt="Tango-go-next.png" src="../File:Tango-go-next.png" decoding="async" width="48" height="48"></a><b>This article or section is a candidate for moving to <a href="/index.php?title=Reproducible_builds&amp;action=edit&amp;redlink=1" class="new" title="Reproducible builds (page does not exist)">Reproducible builds</a>.</b><a href="../File:Tango-go-next.png" class="image"><img alt="Tango-go-next.png" src="../File:Tango-go-next.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Notes:</b> See <a href="../en/Help:Style.html#Title" title="Help:Style">Help:Style#Title</a>. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Reproducible_Builds">Talk:Reproducible Builds#</a>)</div>
</div>
<p>Arch Linux is currently working on making all packages reproducible. This lets users and researchers verify the distributed packages from Arch Linux. For the exact definition of reproducible builds and its benefits take a look at the <a rel="nofollow" class="external text" href="https://reproducible-builds.org/">project website</a>.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Verification_builds"><span class="tocnumber">1</span> <span class="toctext">Verification builds</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Helping_out"><span class="tocnumber">2</span> <span class="toctext">Helping out</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Tooling"><span class="tocnumber">2.1</span> <span class="toctext">Tooling</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Running_a_Rebuilder_instance"><span class="tocnumber">2.2</span> <span class="toctext">Running a Rebuilder instance</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Verifying_packages_with_repro_and_findings_issues"><span class="tocnumber">2.3</span> <span class="toctext">Verifying packages with repro and findings issues</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Work_on_issues_in_the_tests.reproducible-builds.org_infrastructure"><span class="tocnumber">2.4</span> <span class="toctext">Work on issues in the tests.reproducible-builds.org infrastructure</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7">
<a href="#Known_issues"><span class="tocnumber">3</span> <span class="toctext">Known issues</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#GPG_verification"><span class="tocnumber">3.1</span> <span class="toctext">GPG verification</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#Contact"><span class="tocnumber">4</span> <span class="toctext">Contact</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Verification_builds">Verification builds</span></h2>
<p>An experimental <a href="../en/Rebuilderd.html" title="Rebuilderd">rebuilderd</a> instance has been setup on our own infrastructure with a <a rel="nofollow" class="external text" href="https://reproducible.archlinux.org">status page</a>. Rebuilderd rebuilds our repository packages and checks if they are bit for bit identical. If they are not reproducible there is either a bug in the tooling, the package is not reproducible or the package has not been build cleanly.
</p>
<p>A list of known issues is located on <a href="../en/Reproducible_Builds/Status.html" title="Reproducible Builds/Status">Reproducible Builds/Status</a>.
</p>
<h2><span class="mw-headline" id="Helping_out">Helping out</span></h2>
<h3><span class="mw-headline" id="Tooling">Tooling</span></h3>
<p>Help out on fixing bugs and adding features for <a rel="nofollow" class="external text" href="https://github.com/archlinux/archlinux-repro">repro</a>.
</p>
<h3><span class="mw-headline" id="Running_a_Rebuilder_instance">Running a Rebuilder instance</span></h3>
<p><a href="../en/Rebuilderd.html" title="Rebuilderd">Setting up rebuilderd</a> to build Arch Linux packages helps to independently verify repository packages.
</p>
<h3><span class="mw-headline" id="Verifying_packages_with_repro_and_findings_issues">Verifying packages with repro and findings issues</span></h3>
<p>A create way to help out is to find an unreproducible package and figuring out how it can be made reproducible.
</p>
<ul>
<li>Download an Arch Linux package or get one from the <a href="../en/Arch_Linux_Archive.html" title="Arch Linux Archive">Arch Linux Archive</a>
</li>
<li>Run repro on the downloaded package or a package from your pacman cache. Ideally with <code>repro -d</code> to get diffoscope output. For example, <code>repro -d /var/cache/pacman/pkg/curl-7.73.0-1-x86_64.pkg.tar.zst</code>
</li>
<li>Investigate if it is an issue with Arch Linux packaging or upstream, issues can be added on the <a href="../en/Reproducible_Builds/Status.html" title="Reproducible Builds/Status">status page</a>. More information can be found on the <a rel="nofollow" class="external text" href="https://reproducible-builds.org/docs/">reproducible builds website</a>.</li>
</ul>
<h3><span class="mw-headline" id="Work_on_issues_in_the_tests.reproducible-builds.org_infrastructure">Work on issues in the tests.reproducible-builds.org infrastructure</span></h3>
<p>Arch users can help contribute to Reproducible Build issues by looking at the <a rel="nofollow" class="external text" href="https://tests.reproducible-builds.org/archlinux/archlinux.html">continuous reproducing environment</a>. There are various issues which can be sorted out:
</p>
<ul>
<li>FTBS (failed to build from source): reproduce the build failure locally and create a bug report if the package cannot be <a href="../DeveloperWiki:Building_in_a_clean_chroot.html" title="DeveloperWiki:Building in a clean chroot">built from a clean chroot</a> (<code>extra-x86_64-build</code> or <code>multilib-build</code>).</li>
<li>Failed to download sources, reproduce the issue (<code>makepkg -o -d</code>) and create a bug report on the Arch bugtracker.</li>
<li>Failed to reproduce. Locally you can reproduce packages using <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=reprotest">reprotest</a></span>. Note that not all variations can be used. For simple time related testing: <pre>$ reprotest --variations '+time' 'sudo extra-x86_64-build' '*.pkg.tar.xz'</pre>
</li>
</ul>
<p>There might be various reasons for a package to not be reproducible, but before digging in take a look at the upstream repository or the reproducible status in <a rel="nofollow" class="external text" href="https://tests.reproducible-builds.org/debian/reproducible.html">Debian</a>
</p>
<ul><li>Failed to run tests, these failures are heavily on the testing environment. Most likely due to to <code>LANG=C</code> being set and Arch not supporting <code>LANG=C.UTF-8</code>.</li></ul>
<p>If you are interested in the code which runs the continuous reproducing environment, the first build code starts here on <a rel="nofollow" class="external text" href="https://salsa.debian.org/qa/jenkins.debian.net/blob/master/bin/reproducible_build_archlinux_pkg.sh#L115">salsa</a>
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The continuous reproducing environment on tests.reproducible-builds.org does NOT reproduce official arch packages. Its purpose is only to fuzz the packages and attempt to trigger as many bugs as possible, so they can be reported upstream.</div>
<h2><span class="mw-headline" id="Known_issues">Known issues</span></h2>
<h3><span class="mw-headline" id="GPG_verification">GPG verification</span></h3>
<p>There is a possible rebuild scenario where GPG keys will not verify as the packager was removed from the keyring or revoked as we use the latest keyring and a package in the archive which we need might need be signed by a revoked key we are unable to verify it and the build will fail.
</p>
<h2><span class="mw-headline" id="Contact">Contact</span></h2>
<ul><li>
<a rel="nofollow" class="external text" href="ircs://chat.freenode.net/archlinux-projects">#archlinux-reproducible</a> — Main channel for the progress of Reproducible Builds on Arch Linux</li></ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Package_management.html" title="Category:Package management">Package management</a></li>
<li><a href="../en/Category:Package_development.html" title="Category:Package development">Package development</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Move.html" title="Category:Pages or sections flagged with Template:Move">Pages or sections flagged with Template:Move</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Reproducible_Builds&amp;oldid=639119">https://wiki.archlinux.org/index.php?title=Reproducible_Builds&amp;oldid=639119</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 18 October 2020, at 18:47.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
