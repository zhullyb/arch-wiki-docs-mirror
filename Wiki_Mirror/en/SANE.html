<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>SANE - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-SANE rootpage-SANE skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">SANE</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../en/SANE/Scanner-specific_problems.html" title="SANE/Scanner-specific problems">SANE/Scanner-specific problems</a></li>
<li><a href="../en/Scanner_Button_Daemon.html" title="Scanner Button Daemon">Scanner Button Daemon</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="http://www.sane-project.org/">SANE</a> (<a href="https://en.wikipedia.org/wiki/Scanner_Access_Now_Easy" class="extiw" title="wikipedia:Scanner Access Now Easy">Scanner Access Now Easy</a>) provides a library and a command-line tool to use scanners under GNU/Linux.
</p>
<p>Check if your scanner supports <a rel="nofollow" class="external text" href="https://github.com/alexpevzner/sane-airscan#compatibility">eSCL or WSD</a> - chances are good if your device is on this <a rel="nofollow" class="external text" href="https://support.apple.com/en-us/HT201311">Internet Printing Protocoll - IPP</a> list of devices that support eSCL. If your device has eSCL/WSD support modern "driverless" scanning is recommended.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Installation"><span class="tocnumber">1</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Verification"><span class="tocnumber">2</span> <span class="toctext">Verification</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#Installing_a_scanner_driver"><span class="tocnumber">3</span> <span class="toctext">Installing a scanner driver</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Firmware"><span class="tocnumber">3.1</span> <span class="toctext">Firmware</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Fujitsu_fi_series"><span class="tocnumber">3.2</span> <span class="toctext">Fujitsu fi series</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="#Install_a_frontend"><span class="tocnumber">4</span> <span class="toctext">Install a frontend</span></a></li>
<li class="toclevel-1 tocsection-7">
<a href="#Network_scanning"><span class="tocnumber">5</span> <span class="toctext">Network scanning</span></a>
<ul>
<li class="toclevel-2 tocsection-8">
<a href="#Network_attached_scanners"><span class="tocnumber">5.1</span> <span class="toctext">Network attached scanners</span></a>
<ul>
<li class="toclevel-3 tocsection-9"><a href="#Scanning_over_the_network_with_Canon_Pixma_all-in-one_printer/scanners"><span class="tocnumber">5.1.1</span> <span class="toctext">Scanning over the network with Canon Pixma all-in-one printer/scanners</span></a></li>
<li class="toclevel-3 tocsection-10"><a href="#Scanning_over_the_network_with_EPSON_WorkForce_printer/scanners"><span class="tocnumber">5.1.2</span> <span class="toctext">Scanning over the network with EPSON WorkForce printer/scanners</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-11"><a href="#Sharing_your_scanner_over_a_network"><span class="tocnumber">5.2</span> <span class="toctext">Sharing your scanner over a network</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Accessing_your_scanner_from_a_remote_workstation"><span class="tocnumber">5.3</span> <span class="toctext">Accessing your scanner from a remote workstation</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Windows_clients"><span class="tocnumber">5.4</span> <span class="toctext">Windows clients</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-14">
<a href="#Troubleshooting"><span class="tocnumber">6</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-15">
<a href="#Invalid_argument"><span class="tocnumber">6.1</span> <span class="toctext">Invalid argument</span></a>
<ul>
<li class="toclevel-3 tocsection-16"><a href="#Missing_firmware_file"><span class="tocnumber">6.1.1</span> <span class="toctext">Missing firmware file</span></a></li>
<li class="toclevel-3 tocsection-17"><a href="#Wrong_firmware_file_permissions"><span class="tocnumber">6.1.2</span> <span class="toctext">Wrong firmware file permissions</span></a></li>
<li class="toclevel-3 tocsection-18"><a href="#Multiple_backends_claim_scanner"><span class="tocnumber">6.1.3</span> <span class="toctext">Multiple backends claim scanner</span></a></li>
<li class="toclevel-3 tocsection-19"><a href="#Communication_via_xHCI_not_working_(older_scanner_models)"><span class="tocnumber">6.1.4</span> <span class="toctext">Communication via xHCI not working (older scanner models)</span></a></li>
<li class="toclevel-3 tocsection-20"><a href="#Firewall"><span class="tocnumber">6.1.5</span> <span class="toctext">Firewall</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-21"><a href="#Slow_startup"><span class="tocnumber">6.2</span> <span class="toctext">Slow startup</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#Device_busy"><span class="tocnumber">6.3</span> <span class="toctext">Device busy</span></a></li>
<li class="toclevel-2 tocsection-23">
<a href="#Permission_problem"><span class="tocnumber">6.4</span> <span class="toctext">Permission problem</span></a>
<ul>
<li class="toclevel-3 tocsection-24"><a href="#Parallel_port_scanners"><span class="tocnumber">6.4.1</span> <span class="toctext">Parallel port scanners</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=sane-airscan">sane-airscan</a></span> package if the scanner is known to work in driverless mode. If your scanner is using USB connection, make sure to also <a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ipp-usb">ipp-usb</a></span> package and <a href="../en/Systemd.html#Using_units" class="mw-redirect" title="Start/enable">start/enable</a> <code>ipp-usb.service</code> to allow using IPP protocol over USB connection.
</p>
<p>If not, see <a rel="nofollow" class="external autonumber" href="http://www.sane-project.org/sane-supported-devices.html">[1]</a> to check if SANE supports your scanner using a classic driver.
</p>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=sane">sane</a></span> package to use old driver-based scanning.
</p>
<h2><span class="mw-headline" id="Verification">Verification</span></h2>
<p>Now you can try to see if sane recognizes your scanner.
</p>
<pre>$ scanimage -L
</pre>
<p>If that fails, run the command again as root to check for permission problems. If that fails as well, check that your scanner is plugged into the computer. You also might have to unplug/plug your scanner for <code>/usr/lib/udev/rules.d/49-sane.rules</code> to recognize your scanner.
</p>
<p>Now you can see if it actually works
</p>
<pre>$ scanimage --format=png --output-file test.png --progress
</pre>
<p>If the scanning fails with the message <code>scanimage: sane_start: Invalid argument</code> you may need to specify the device.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ scanimage -L</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">device `v4l:/dev/video0' is a Noname Video WebCam virtual device
device `pixma:04A91749_247936' is a CANON Canon PIXMA MG5200 multi-function peripheral
</pre>
<p>Then you would need to run
</p>
<pre>$ scanimage --device "pixma:04A91749_247936" --format=tiff --output-file test.tiff --progress
</pre>
<p>Sane provides many special backend options for numerous scanner types. To see what these are for your device:
</p>
<pre>$ scanimage -A
</pre>
<h2><span class="mw-headline" id="Installing_a_scanner_driver">Installing a scanner driver</span></h2>
<p>Most scanners should work out of the box. If yours does not, see <a href="../en/SANE/Scanner-specific_problems.html" title="SANE/Scanner-specific problems">SANE/Scanner-specific problems</a> for installation instructions.
</p>
<h3><span class="mw-headline" id="Firmware">Firmware</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This section is only needed if you need to upload firmware to your scanner.</div>
<p>Firmwares usually have the <b><code>.bin</code></b> extension. 
</p>
<p>Firstly you need to put the firmware someplace safe, it is recommended to put it in a subdirectory of <code>/usr/share/sane/</code>.
</p>
<p>Then you need to tell sane where the firmware is:
</p>
<ul>
<li>Find the name of the backend for your scanner from the <a rel="nofollow" class="external text" href="http://www.sane-project.org/sane-supported-devices.html">sane supported devices list</a>.</li>
<li>Open the file <code>/etc/sane.d/<i>backend-name</i>.conf</code>.</li>
<li>Make sure the firmware entry is uncommented and let the file-path point to where you put the firmware file for your scanner. Be sure that members of the group <code>scanner</code> can access the <code>/etc/sane.d/<i>backend-name</i>.conf</code> file.</li>
</ul>
<p>If the backend of your scanner is not part of the sane package (such as <code>hpaio.conf</code> which is part of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=hplip">hplip</a></span>), you need to uncomment the relevant entry in <code>/etc/sane.d/dll.d</code> or in <code>/etc/sane.d/dll.conf</code>.
</p>
<h3><span class="mw-headline" id="Fujitsu_fi_series">Fujitsu fi series</span></h3>
<p>For some of the Fujitsu fi series document scanners, the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pfufs/">pfufs</a></span><sup><small>AUR</small></sup> proprietary driver offers advanced functionality over the already mature SANE default driver, such as control of an optional imprinter for stamping scanned documents or requesting accurate status of the consumables from the host.
</p>
<h2><span class="mw-headline" id="Install_a_frontend">Install a frontend</span></h2>
<p>Many frontends exist for SANE, a non-exhaustive list of which can be found on the <a rel="nofollow" class="external text" href="http://www.sane-project.org/sane-frontends.html">sane-project website</a>.
</p>
<ul><li>
<b><a href="https://en.wikipedia.org/wiki/Scanner_Access_Now_Easy#Simple_Scan" class="extiw" title="wikipedia:Scanner Access Now Easy">Simple Scan</a></b> — Simplified GUI that is intended to be easier to use and better integrated into the <a href="../en/GNOME.html" title="GNOME">GNOME</a> desktop than XSane. It was initially written for Ubuntu and is maintained by Robert Ancell of Canonical Ltd. for GNU/Linux.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://gitlab.gnome.org/GNOME/simple-scan">https://gitlab.gnome.org/GNOME/simple-scan</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=simple-scan">simple-scan</a></span>
</dd></dl>
<ul><li>
<b><a href="https://en.wikipedia.org/wiki/Skanlite" class="extiw" title="wikipedia:Skanlite">Skanlite</a></b> — Simple image scanning application that does nothing more than scan and save images, based on the KSane backend.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://www.kde.org/applications/graphics/skanlite">https://www.kde.org/applications/graphics/skanlite</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=skanlite">skanlite</a></span>
</dd></dl>
<ul><li>
<b><a href="https://en.wikipedia.org/wiki/Scanner_Access_Now_Easy#XSane" class="extiw" title="wikipedia:Scanner Access Now Easy">XSane</a></b> — Full-featured GTK-based frontend looking a bit old but providing extended functionalities.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="http://www.xsane.org/">http://www.xsane.org/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xsane">xsane</a></span>
</dd></dl>
<p>Some <a href="../en/List_of_applications/Documents.html#OCR_software" title="List of applications/Documents">OCR software</a> are able to scan images using SANE: gImageReader, <a href="https://en.wikipedia.org/wiki/Scanner_Access_Now_Easy#gscan2pdf" class="extiw" title="wikipedia:Scanner Access Now Easy">gscan2pdf</a>, Linux-Intelligent-Ocr-Solution, <a href="https://en.wikipedia.org/wiki/OCRFeeder" class="extiw" title="wikipedia:OCRFeeder">OCRFeeder</a>, <a rel="nofollow" class="external text" href="https://openpaper.work">Paperwork</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul><li>Scanning directly to PDF using XSane in 16bit color depth mode is known to produces <a rel="nofollow" class="external text" href="https://bugs.launchpad.net/ubuntu/+source/xsane/+bug/539162">corrupted files</a> and a note in <code>pacman</code> output warns so. 8bit mode is known to work.</li></ul>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a><b>The factual accuracy of this article or section is disputed.</b><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> skanlite does not need to <i>handle</i> mDNS. As long as <a href="../en/Avahi.html#Hostname_resolution" title="Avahi">mDNS hostname resolution</a> is set up correctly and the scanner 's address is specified as <code><i>hostname</i>.local</code>, it should just work. This looks like a hplip limitation/bug. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:SANE">Talk:SANE#</a>)</div>
</div>
<ul><li>Using a frontend does not mean you do not have to apply some tricks. This is especially true with devices configured via <a href="../en/Avahi.html" class="mw-redirect" title="MDNS">mDNS</a>. For example, <code>skanlite</code> needs to have additional info specified on the command line in order to detect a network scanner properly as it cannot handle mDNS. Here is an example with an HP Officejet Pro L7590: <code>skanlite  --device "hpaio:/net/Officejet_Pro_L7500?ip=192.168.0.17"</code>.</li></ul>
</div>
<h2><span class="mw-headline" id="Network_scanning">Network scanning</span></h2>
<h3><span class="mw-headline" id="Network_attached_scanners">Network attached scanners</span></h3>
<p>Some scanners may be network attached and already provide their own server.
</p>
<h4>
<span id="Scanning_over_the_network_with_Canon_Pixma_all-in-one_printer.2Fscanners"></span><span class="mw-headline" id="Scanning_over_the_network_with_Canon_Pixma_all-in-one_printer/scanners">Scanning over the network with Canon Pixma all-in-one printer/scanners</span>
</h4>
<p>Find out your printer/scanner's IP address, and add it on a new line to <code>/etc/sane.d/pixma.conf</code> in the format <code>bjnp://10.0.0.20</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Instead of a IP address you can use the <a href="../en/Avahi.html" class="mw-redirect" title="MDNS">mDNS</a> <code>.local</code> address, e.g. <code>bjnp://<i>MyPixmaPrinter</i>.local</code>.</div>
<p>Sane should now find your device. For more details refer to <span class="plainlinks archwiki-template-man" title="$ man 5 sane-pixma"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sane-pixma.5">sane-pixma(5)</a></span>.
</p>
<p>Alternative: for some Canon Pixma all-in-one printer/scanners, which are not detected over network, can be used <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/scangearmp2/">scangearmp2</a></span><sup><small>AUR</small></sup> package from AUR.
</p>
<p>See <a href="../en/SANE/Scanner-specific_problems.html" title="SANE/Scanner-specific problems">SANE/Scanner-specific problems</a> for additional information.
</p>
<h4>
<span id="Scanning_over_the_network_with_EPSON_WorkForce_printer.2Fscanners"></span><span class="mw-headline" id="Scanning_over_the_network_with_EPSON_WorkForce_printer/scanners">Scanning over the network with EPSON WorkForce printer/scanners</span>
</h4>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=imagescan">imagescan</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/imagescan-plugin-networkscan/">imagescan-plugin-networkscan</a></span><sup><small>AUR</small></sup>.
</p>
<p>Edit the config file <code>/etc/utsushi/utsushi.conf</code>. Find the <code>[devices]</code> section and edit the template for <code>dev2</code>. Replace the IP address accordingly. You can find the IP address on your printer screen. For example,
</p>
<pre>...
dev2.udi    = esci:networkscan://192.168.1.123:1865
dev2.model  = WF-2860
dev2.vendor = EPSON
...</pre>
<p>Meanwhile, comment out <code>epson2</code> in <code>/etc/sane.d/dll.conf</code> as it <a rel="nofollow" class="external text" href="http://download.ebz.epson.net/faq/linux/faq_ls_00007.html">conflicts with ImageScan</a>. 
</p>
<p>Once this is done you can use any SANE frontend to access this scanner.
</p>
<h3><span class="mw-headline" id="Sharing_your_scanner_over_a_network">Sharing your scanner over a network</span></h3>
<p>You can share your scanner with other hosts on your network who use <i>sane</i>, <i>xsane</i> or xsane-enabled <i>GIMP</i>. To set up the server, first indicate which hosts on your network are allowed access.
</p>
<p>Change the <code>/etc/sane.d/saned.conf</code> file to your liking, for example:
</p>
<pre># required
localhost
# allow local subnet
192.168.0.0/24
</pre>
<p>If you use <a href="../en/Iptables.html" title="Iptables">iptables</a>, <a href="../en/Kernel_module.html" class="mw-redirect" title="Kernel modules">insert</a> the <code>nf_conntrack_sane</code> module to let the firewall track <code>saned</code> connections.
</p>
<p>Now <a href="../en/Systemd.html#Using_units" class="mw-redirect" title="Start/enable">start/enable</a> <code>saned.socket</code>. Your scanner is now available over the network. For more information, see <span class="plainlinks archwiki-template-man" title="$ man 8 saned"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/saned.8">saned(8)</a></span>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> saned intentionally refuses to share scanners that use the net: backend (which includes some USB scanners). There is a crude patch to allow this in <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/54786">FS#54786</a>, but note it may cause problems on some networks. Check output of <code>scanimage -L</code> on the server to see the scanner url.</div>
<h3><span class="mw-headline" id="Accessing_your_scanner_from_a_remote_workstation">Accessing your scanner from a remote workstation</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Some network scanners require a different approach. See <a href="../en/SANE/Scanner-specific_problems.html" title="SANE/Scanner-specific problems">SANE/Scanner-specific problems</a>.</div>
<p>You can access your network-enabled scanner from a remote Arch Linux workstation.
</p>
<p>First, specify the server's host name or IP address in the <code>/etc/sane.d/net.conf</code> file:
</p>
<pre># static IP address
192.168.0.1
# or host name
stratus
</pre>
<p>Now test your workstation's connection:
</p>
<pre>$ scanimage -L
</pre>
<p>The network scanner should now also show up in any <a href="#Install_a_frontend">front-end</a>.
</p>
<h3><span class="mw-headline" id="Windows_clients">Windows clients</span></h3>
<p>Since the Windows port of SANE seems to be <a rel="nofollow" class="external text" href="https://web.archive.org/web/20151207111023/http://www.xsane.org/xsane-download.html">unsupported, outdated and difficult to get</a>, you can try <a rel="nofollow" class="external text" href="https://sourceforge.net/projects/sanewinds/">SANEWinDS</a> or <a rel="nofollow" class="external text" href="http://sanetwain.ozuzo.net/">SaneTwain</a> (old).
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<dl><dd>See also: <a href="../en/SANE/Scanner-specific_problems.html" title="SANE/Scanner-specific problems">SANE/Scanner-specific problems</a>
</dd></dl>
<h3><span class="mw-headline" id="Invalid_argument">Invalid argument</span></h3>
<p>If you get an "Invalid argument" error with xsane or another sane front-end, this could be caused by one of the following reasons:
</p>
<h4><span class="mw-headline" id="Missing_firmware_file">Missing firmware file</span></h4>
<p>No firmware file was provided for the used scanner (see <a href="#Firmware">#Firmware</a> for details).
</p>
<h4><span class="mw-headline" id="Wrong_firmware_file_permissions">Wrong firmware file permissions</span></h4>
<p>The permissions for the used firmware file are wrong. Correct them using
</p>
<pre># chown root:scanner /usr/share/sane/<i>SCANNER_MODEL</i>/<i>FIRMWARE_FILE</i>
# chmod ug+r /usr/share/sane/<i>SCANNER_MODEL</i>/<i>FIRMWARE_FILE</i>
</pre>
<h4><span class="mw-headline" id="Multiple_backends_claim_scanner">Multiple backends claim scanner</span></h4>
<p>It may happen, that multiple backends support (or pretend to support) your scanner, and sane chooses one that does not do after all (the scanner will not be displayed by <code>scanimage -L</code> then). This has happened with older Epson scanners and the <code>epson2</code> resp. <code>epson</code> backends. In this case, the solution is to comment out the unwanted backend in <code>/etc/sane.d/dll.conf</code>. In the Epson case, that would be to change
</p>
<pre>epson2
#epson
</pre>
<p>to 
</p>
<pre>#epson2
epson
</pre>
<p>It may also be possible that the independent <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=iscan">iscan</a></span> <code>epkowa</code> backend interferes with your <code>snapscan</code> backend (epson scanners). You may get this error right after using the <code>scanimage -L</code> command. Starting the scanner app (like <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xsane">xsane</a></span>) twice can also solve the problem. Otherwise check your <code>/etc/sane.d/epkowa.conf</code> for wrong configurations or remove the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=iscan">iscan</a></span> package.
</p>
<h4>
<span id="Communication_via_xHCI_not_working_.28older_scanner_models.29"></span><span class="mw-headline" id="Communication_via_xHCI_not_working_(older_scanner_models)">Communication via xHCI not working (older scanner models)</span>
</h4>
<p>Some older scanner models do not work when connected via an USB3 port. If you experience this issue, try setting the <code>SANE_USB_WORKAROUND=1</code> <a href="../en/Environment_variables.html" class="mw-redirect" title="Environment variable">environment variable</a> before starting your frontend.<a rel="nofollow" class="external autonumber" href="https://lists.alioth.debian.org/pipermail/sane-announce/2017/000036.html">[2]</a><a rel="nofollow" class="external autonumber" href="https://anonscm.debian.org/cgit/sane/sane-backends.git/commit/?id=1207ce5a40664c04b934bd0a6babbc1575361356">[3]</a><sup title="Last check status: 404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2020-04-02 ⓘ]</sup>
</p>
<p>If that does not work, try one of the following workarounds:
</p>
<ul>
<li>Use an USB2 port instead of an USB3 port, if available.</li>
<li>Disable xHCI via BIOS/EFI. eHCI will consequently be used and communication with the scanner will work. On the downside, USB3 speed can not be reached on any port.</li>
<li>On (some) intel chipsets the <code>setpci</code> command can be used to route specific usb ports to either the xHCI or the eHCI controller. See <a rel="nofollow" class="external text" href="https://forums.opensuse.org/showthread.php/507627-Suse-13-2-scanner-no-longer-working-on-64-bit-version?p=2714695#post2714695">here</a> and <a rel="nofollow" class="external text" href="https://superuser.com/questions/812022/force-a-single-usb-3-0-port-to-work-as-usb-2-0">here</a> (scroll down to where it says "setpci") for further information. With this it is possible to toggle single USB ports with a simple shell script.</li>
<li>Connect the scanner over the network instead if it is supported.</li>
</ul>
<h4><span class="mw-headline" id="Firewall">Firewall</span></h4>
<p>When network scanning scanner hangs, then invalid argument error occured.
</p>
<p>saned uses data port range, so you must enable connections to 6566/tcp and data_portrange from /etc/sane.d/saned.conf or use conntrack firewall module for sane to enable data ports as described above.
</p>
<h3><span class="mw-headline" id="Slow_startup">Slow startup</span></h3>
<p>If you encounter slow startup issue (e.g. <code>xsane</code> or <code>scanimage -L</code> take a lot to find scanner) it may be that more than one driver supporting it is available. 
</p>
<p>Have a look at <code>/etc/sane.d/dll.conf</code> and try commenting out one (e.g. you may have <code>epson</code>, <code>epson2</code> and <code>epkowa</code> enabled at the same time, try leaving only <code>epson</code> or <code>epkowa</code> uncommented).
</p>
<p>You can also try to comment out <code>net</code> driver, if there are no network scanners.
</p>
<p>Your <a href="../en/Webcam_setup.html" class="mw-redirect" title="Webcam">webcam</a> might also be listed as scanning device and slow down detection at startup. To blacklist webcam, try commenting out all the lines in <code>/etc/sane.d/v4l.conf</code>.
</p>
<h3><span class="mw-headline" id="Device_busy">Device busy</span></h3>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a><b>The factual accuracy of this article or section is disputed.</b><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> The user should not need to be in the scanner group (see <a href="../en/Users_and_groups.html#Pre-systemd_groups" title="Users and groups">Users and groups#Pre-systemd groups</a>) (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:SANE">Talk:SANE#</a>)</div>
</div>
<p>If your USB device is listed with <code>scanimage -L</code> but launching the test <code>scanimage pixma:04A9173E_11DAD1 --format=tiff --output-file test.tiff</code> always return the 'Device busy' error, you might try to add your username to the scanner group <code>usermod -a -G scanner yourusername</code> then blacklist the <code>usblp</code> kernel module by writing <code>blacklist usblp</code> in <code>/etc/modprobe.d/no-usblp.conf</code> (it prevents <code>usblp</code> from loading to support scanning, not needed by xsane and related tools, might also <a href="../en/CUPS/Troubleshooting.html#Conflict_with_usblp" title="CUPS/Troubleshooting">conflict with CUPS</a>). Reboot to finish. <a rel="nofollow" class="external autonumber" href="http://cromwell-intl.com/linux/canon-pixma-printer-scanner.html">[4]</a>
</p>
<p>In addition to this, some Cannon printers return "device busy" if the scan mode is set to "Computer". Setting this to the "Remote Scanner" mode should fix the issue.<a rel="nofollow" class="external autonumber" href="https://alioth-lists.debian.net/pipermail/sane-devel/2014-March/032169.html">[5]</a>
</p>
<h3><span class="mw-headline" id="Permission_problem">Permission problem</span></h3>
<p>With systemd, the <code>scanner</code> and <code>lp</code> groups are deprecated. No need to add your user to those groups. See <a href="../en/Users_and_groups.html#Pre-systemd_groups" title="Users and groups">Users and groups#Pre-systemd groups</a> for detail.
</p>
<p>You can also try to change permissions of usb device but this is not recommended, a better solution is to fix the <a href="../en/Udev.html" class="mw-redirect" title="Udev rules">Udev rules</a> so that your scanner is recognized.
</p>
<p>First check connected usb devices with <code>lsusb</code>:
</p>
<pre>Bus 006 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 005 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 004 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 003 Device 003: ID 04d9:1603 Holtek Semiconductor, Inc.
Bus 003 Device 002: ID 04fc:0538 Sunplus Technology Co., Ltd
Bus 003 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 002 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 001 Device 006: ID 03f0:2504 Hewlett-Packard
Bus 001 Device 002: ID 046d:0802 Logitech, Inc. Webcam C200
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
</pre>
<p>In our example we see the scanner: <code>Bus 001 Device 006: ID 03f0:2504 Hewlett-Packard</code>. Here <code>03f0</code> is the <i>vendorID</i> and <code>2504</code> is the <i>productID</i>.
</p>
<p>Now open <code>/usr/lib/udev/rules.d/49-sane.rules</code> and see if there is there is a line with the <i>vendorID</i> and <i>productID</i> of your scanner. If there is not any, create the new file <code>/etc/udev/rules.d/49-sane-missing-scanner.rules</code>, with the following contents:
</p>
<pre>ATTRS{idVendor}=="<b>vendorID</b>", ATTRS{idProduct}=="<b>productID</b>", MODE="0664", GROUP="scanner", ENV{libsane_matched}="yes"
</pre>
<p>Save the file, plug out and back in your scanner and the file permissions should be now correct.
</p>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a><b>The factual accuracy of this article or section is disputed.</b><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> The scanner needs to be added to the right backend file, <code>hp4200.conf</code> will not work for any scanner. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:SANE">Talk:SANE#</a>)</div>
</div>
<p>Another tip, is that you can add your device (scanner) in backend file:
</p>
<p>Add <code>usb 0x03f0 0x2504</code> to <code>/etc/sane.d/hp4200.conf</code> so it looks like this:
</p>
<pre>#
# Configuration file for the hp4200 backend
#
#
# HP4200
#usb 0x03f0 0x0105
usb 0x03f0 0x2504
</pre>
<h4><span class="mw-headline" id="Parallel_port_scanners">Parallel port scanners</span></h4>
<p>All devices attached to a parallel port are assumed to be printers, and are given a <code>lp</code> group. Either create a <a href="../en/Udev.html" title="Udev">udev</a> rule to mark the relevant parallel port as <code>libsane_matched</code>, or add your user to the <code>lp</code> <a href="../en/Users_and_groups.html#Group_management" class="mw-redirect" title="User group">user group</a>. CUPS also uses the <code>lp</code> group for read-only access to configuration files, so there are potential security implications to adding users to the <code>lp</code> group - see <a href="../en/CUPS.html#Connection_Interfaces" title="CUPS">CUPS#Connection Interfaces</a> for more information.
</p>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Digital_imaging.html" title="Category:Digital imaging">Digital imaging</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=SANE&amp;oldid=655035">https://wiki.archlinux.org/index.php?title=SANE&amp;oldid=655035</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 15 March 2021, at 15:05.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
