<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Archiso (Español) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Archiso_Español rootpage-Archiso_Español skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Archiso (Español)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Estado de la traducción:</strong> esta traducción de <a href="../en/Archiso.html" title="Archiso">Archiso</a> fue revisada el <b>2018-12-11</b>. Si existen <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Archiso&amp;diff=0&amp;oldid=558326">cambios</a> puede <a href="../es/ArchWiki:f6ecee2fb17812f6654b3a6ff807d392.html" class="mw-redirect" title="ArchWiki:Translation Team/Contributing (Español)">actualizarla</a> o avisar al <a href="../es/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Español)">equipo de traducción</a>.</div>
<div class="archwiki-template-meta-related-articles-start">
<p>Artículos relacionados</p>
<ul>
<li><a href="../en/Archiso.html" class="mw-redirect" title="Remastering the Install ISO">Remastering the Install ISO</a></li>
<li><a href="../en/Preboot_Execution_Environment.html" class="mw-redirect" title="Archiso as pxe server">Archiso as pxe server</a></li>
<li><a href="../es/Archboot.html" title="Archboot (Español)">Archboot (Español)</a></li>
<li><a href="../en/Offline_installation.html" title="Offline installation">Offline installation</a></li>
</ul>
</div>
<p><b>Archiso</b> es un pequeño conjunto de scripts de bash capaz de compilar imagenes live en CD/DVD/USB plenamente funcionales basadas en Arch Linux. Es una herramienta muy genérica para generar imágenes oficiales, de manera que puede ser usada potencialmente para generar cualquier cosa, desde sistemas de rescate o discos de instalacion, hasta sistemas live CD/DVD/USB para intereses especiales, y quién sabe qué más. Simplemente, si involucra a Arch en una montaña brillante, puede hacerlo. El corazón y alma de Archiso es <i>mkarchiso</i>. Todas sus opciones están documentadas en la ayuda de utilización, de manera que su uso directo no será tratado aquí. En su lugar, este artículo actuará como guía para crear sus propios medios live en poco de tiempo.
</p>
<p>Si necesita únicamente un resumen técnico de los requisitos y los pasos de compilación, véase también la <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/archiso/tree/master/docs">documentación oficial del proyecto</a>.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Preparar_la_instalaci%C3%B3n"><span class="tocnumber">1</span> <span class="toctext">Preparar la instalación</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Configurar_el_soporte_live"><span class="tocnumber">2</span> <span class="toctext">Configurar el soporte live</span></a>
<ul>
<li class="toclevel-2 tocsection-3">
<a href="#Instalar_paquetes"><span class="tocnumber">2.1</span> <span class="toctext">Instalar paquetes</span></a>
<ul>
<li class="toclevel-3 tocsection-4"><a href="#Repositorio_local_personalizado"><span class="tocnumber">2.1.1</span> <span class="toctext">Repositorio local personalizado</span></a></li>
<li class="toclevel-3 tocsection-5"><a href="#Evitar_la_instalaci%C3%B3n_de_paquetes_que_pertenecen_al_grupo_base"><span class="tocnumber">2.1.2</span> <span class="toctext">Evitar la instalación de paquetes que pertenecen al grupo base</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#Instalar_paquetes_de_multilib"><span class="tocnumber">2.1.3</span> <span class="toctext">Instalar paquetes de multilib</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-7"><a href="#A%C3%B1adir_archivos_a_la_imagen"><span class="tocnumber">2.2</span> <span class="toctext">Añadir archivos a la imagen</span></a></li>
<li class="toclevel-2 tocsection-8">
<a href="#Cargador_de_arranque"><span class="tocnumber">2.3</span> <span class="toctext">Cargador de arranque</span></a>
<ul>
<li class="toclevel-3 tocsection-9"><a href="#UEFI_Secure_Boot"><span class="tocnumber">2.3.1</span> <span class="toctext">UEFI Secure Boot</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-10"><a href="#Gestor_de_inicio_de_sesi%C3%B3n"><span class="tocnumber">2.4</span> <span class="toctext">Gestor de inicio de sesión</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Cambiar_el_acceso_autom%C3%A1ticamente"><span class="tocnumber">2.5</span> <span class="toctext">Cambiar el acceso automáticamente</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12">
<a href="#Compilar_la_ISO"><span class="tocnumber">3</span> <span class="toctext">Compilar la ISO</span></a>
<ul>
<li class="toclevel-2 tocsection-13"><a href="#Reconstruir_la_ISO"><span class="tocnumber">3.1</span> <span class="toctext">Reconstruir la ISO</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-14"><a href="#Utilizar_la_ISO"><span class="tocnumber">4</span> <span class="toctext">Utilizar la ISO</span></a></li>
<li class="toclevel-1 tocsection-15"><a href="#Ejecutar_la_ISO_en_QEMU"><span class="tocnumber">5</span> <span class="toctext">Ejecutar la ISO en QEMU</span></a></li>
<li class="toclevel-1 tocsection-16">
<a href="#V%C3%A9ase_tambi%C3%A9n"><span class="tocnumber">6</span> <span class="toctext">Véase también</span></a>
<ul>
<li class="toclevel-2 tocsection-17"><a href="#Documentaci%C3%B3n_y_tutoriales"><span class="tocnumber">6.1</span> <span class="toctext">Documentación y tutoriales</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Crear_una_ISO_de_instalaci%C3%B3n_sin_conexi%C3%B3n"><span class="tocnumber">6.2</span> <span class="toctext">Crear una ISO de instalación sin conexión</span></a></li>
</ul>
</li>
</ul>
</div>

<h2>
<span id="Preparar_la_instalaci.C3.B3n"></span><span class="mw-headline" id="Preparar_la_instalación">Preparar la instalación</span>
</h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Se recomienda actuar como root en todos los pasos siguientes. Si no es así, es muy probable que tenga problemas con los permisos más adelante.</div>
<p>Antes de empezar, necesitamos hacernos con los scripts de archiso que llevan a cabo gran parte del trabajo, para ello <a href="../es/Help:Reading.html#Instalaci%C3%B3n_de_paquetes" title="Help:Reading (Español)">instalaremos</a> el paquete <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=archiso">archiso</a></span> o (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/archiso-git/">archiso-git</a></span><sup><small>AUR</small></sup>).
</p>
<p>Archiso viene con dos «perfiles»: <i>releng</i> y <i>baseline</i>.
</p>
<ul>
<li>Si desea crear una versión live totalmente personalizada de Arch Linux, con todos sus programas y configuraciones favoritas preinstalados, utilice releng.</li>
<li>Si solo desea crear el soporte live más básico, sin paquetes preinstalados y una configuración minimalista, utilice baseline.</li>
</ul>
<p>Ahora, copie el perfil de su elección en un directorio  (<i>archlive</i> en el ejemplo siguiente) donde puede realizar ajustes y compilarlo. Ejecute lo siguiente, reemplazando <code><b>perfil</b></code> con <code>releng</code> o <code>baseline</code>.
</p>
<pre># cp -r /usr/share/archiso/configs/<b>perfil</b>/ <i>~/archlive</i>
</pre>
<ul><li>Si está utilizando el perfil <code>releng</code> para hacer una imagen totalmente personalizada, puede seguir en <a href="#Configurar_el_soporte_live">#Configurar el soporte live</a>.</li></ul>
<ul><li>Si está utilizando el perfil <code>baseline</code> para crear una imagen de instalación mínima, no necesitará hacer ninguna personalización y puede ir directamente a <a href="#Compilar_la_ISO">#Compilar la ISO</a>
</li></ul>
<h2><span class="mw-headline" id="Configurar_el_soporte_live">Configurar el soporte live</span></h2>
<p>Esta sección detalla la configuración de la imagen que va a crear, premitiéndole definir los paquetes y configuraciones que quiere que contenga la imagen.
</p>
<p>Dentro del directorio <code><i>archlive</i></code> creado según se ha indicado en <a href="#Preparar_la_instalaci%C3%B3n">#Preparar la instalación</a> hay varios archivos y directorios; Solo nos interesan algunos de estos, principalmente:
</p>
<ul>
<li>el directorio <code>packages.x86_64</code>: aquí es donde se listan, línea por línea, los paquetes que desea instalar, y;</li>
<li>el directorio <code>airootfs</code>: este directorio actúa como una superposición o cubierte y es donde se realizan todas las personalizaciones.</li>
</ul>
<p>En general, todas las tareas administrativas que normalmente haría después de una instalación nueva, excepto para la instalación de paquetes, pueden incluirse en <code><i>archlive</i>/airootfs/root/customize_airootfs.sh</code>. Debe escribirse el script desde la perspectiva del nuevo entorno, por lo que  la raíz <code>/</code> en la secuencia de órdenes del script se refiere a la raíz de la iso live que se creará.
</p>
<h3><span class="mw-headline" id="Instalar_paquetes">Instalar paquetes</span></h3>
<p>Edite las listas de paquetes en <code>packages.x86_64</code> para indicar qué paquetes se instalarán en el soporte live. 
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Si desea utiliza un <a href="../es/Window_manager.html" title="Window manager (Español)">gestor de ventanas</a> en el Live CD, debe agregar los <a href="../es/Xorg.html#Instalaci%C3%B3n_del_controlador" title="Xorg (Español)">controladores de vídeo</a>,necesarios y correctos, o el gestor de ventanas puede congelarse al cargar.</div>
<h4><span class="mw-headline" id="Repositorio_local_personalizado">Repositorio local personalizado</span></h4>
<p>Con el fin de preparar paquetes personalizados o paquetes de <a href="../es/Arch_User_Repository.html" class="mw-redirect" title="AUR (Español)">AUR (Español)</a>/<a href="../es/Arch_Build_System.html" title="Arch Build System (Español)">Arch Build System (Español)</a>, también podría <a href="../es/de17b6ce88a43214b055e2fd83cd83eb.html#Repositorio_local_personalizado" class="mw-redirect" title="Pacman/Tips and tricks (Español)">crear un repositorio local personalizado</a>. Si desea admitir múltiples arquitecturas, se deben tomar precauciones para evitar que se produzcan errores. Cada arquitectura debe tener su propio árbol de directorios:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ tree ~/customrepo/ | sed "s/$(uname -m)/&lt;arch&gt;/g"</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/home/archie/customrepo/
└── &lt;arch&gt;
    ├── customrepo.db -&gt; customrepo.db.tar.xz
    ├── customrepo.db.tar.xz
    ├── customrepo.files -&gt; customrepo.files.tar.xz
    ├── customrepo.files.tar.xz
    └── personal-website-git-b99cce0-1-&lt;arch&gt;.pkg.tar.xz

1 directory, 5 files
</pre>
<p>Luego puede agregar su repositorio colocando lo siguiente en <code>~/archlive/pacman.conf</code>, encima de las otras entradas del repositorio (para darle la máxima prioridad):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/archlive/pacman.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
# custom repository
[customrepo]
SigLevel = Optional TrustAll
Server = file:///home/<b>user</b>/customrepo/$arch
...</pre>
<p>El ejecutable <i>repo-add</i> verifica si el paquete es apropiado. Si este no es el caso, se encontrará con mensajes de error similares a este:
</p>
<pre>==&gt; ERROR: '/home/archie/customrepo/&lt;arch&gt;/foo-&lt;arch&gt;.pkg.tar.xz' does not have a valid database archive extension.
</pre>
<h4>
<span id="Evitar_la_instalaci.C3.B3n_de_paquetes_que_pertenecen_al_grupo_base"></span><span class="mw-headline" id="Evitar_la_instalación_de_paquetes_que_pertenecen_al_grupo_base">Evitar la instalación de paquetes que pertenecen al grupo base</span>
</h4>
<p>De forma predeterminada, <code>/usr/bin/mkarchiso</code>, un script que utiliza <code>~/archlive/build.sh</code>, llama a uno de los <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=arch-install-scripts">arch-install-scripts</a></span> denominado <code>pacstrap</code> sin el indicador <code>-i</code>, lo que hace que <a href="../es/Pacman.html" title="Pacman (Español)">Pacman (Español)</a> no espere la confirmación del usuario para instalar los paquetes durante el proceso de instalación.
</p>
<p>Al incluir en la lista negra los paquetes del grupo base agregándolos a la línea <code>IgnorePkg</code> en el archivo <code>~/archlive/pacman.conf</code>, <a href="../es/Pacman.html" title="Pacman (Español)">Pacman (Español)</a> pregunta si aún deben instalarse, lo que significa que lo harán cuando se omita la confirmación del usuario. Para deshacerse de estos paquetes hay varias opciones:
</p>
<ul><li>
<b>Engorroso</b>: añada el indicador <code>-i</code> a cada línea que llame a <code>pacstrap</code> en <code>/usr/bin/mkarchiso</code>.</li></ul>
<ul><li>
<b>Limpio</b>: cree una copia de <code>/usr/bin/mkarchiso</code> en la que agregue el indicador y adapte <code>~/archlive/build.sh</code> para que llame a la versión modificada del script de mkarchiso.</li></ul>
<ul><li>
<b>Avanzado</b>: cree una función para <code>~/archlive/build.sh</code> que elimine explícitamente los paquetes después de la instalación base. Esto le dejaría la comodidad de no tener que pulsar tantas veces «intro» durante el proceso de instalación.</li></ul>
<h4><span class="mw-headline" id="Instalar_paquetes_de_multilib">Instalar paquetes de multilib</span></h4>
<p>Para instalar paquetes desde el repositorio <a href="../en/Official_repositories.html#multilib" class="mw-redirect" title="Multilib">multilib</a> simplemente descoméntelo del repositorio en <code>~/archlive/pacman.conf</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">pacman.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[multilib]
SigLevel = PackageRequired
Include = /etc/pacman.d/mirrorlist</pre>
<h3>
<span id="A.C3.B1adir_archivos_a_la_imagen"></span><span class="mw-headline" id="Añadir_archivos_a_la_imagen">Añadir archivos a la imagen</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Debe ser superusuario para hacer esto, no cambie el nombre del usuario titular de ninguno de los archivos que copie, <b>todo</b> dentro del directorio airootfs debe ser propiedad de root. El nombre del usuario titular correcto se resolverá automáticamente.</div>
<p>El directorio airootfs actua como una cubierta, piense en él como el directorio raíz, <code>/</code>, de su sistema anfitrión, de manera que cada archivo que ponga dentro se copiará al arranque.
</p>
<p>Así que, si tiene un conjunto de scripts de iptables en su sistema anfitrión que quiere poder usar en la posterior imagen live, cópielos así:
</p>
<pre># cp -r /etc/iptables ~/archlive/airootfs/etc
</pre>
<p>Colocar archivos del directorio home del usuario en la imagen live es un poco diferente. No los ponga en <code>airootfs/home</code>, en lugar de eso cree un directorio <code>skel</code> dentro de <code>airootfs/</code> y colóquelos ahí. Después añadiremos las órdenes relevantes al archivo <code>customize_airootfs.sh</code> que vamos a crear para copiarlos en el arranque y definir los permisos.
</p>
<p>Primero, cree el directorio skel:
</p>
<pre># mkdir ~/archlive/airootfs/etc/skel
</pre>
<p>Ahora copie los archivos de «home» al directorio skel, por ejemplo para <code>.bashrc</code>:
</p>
<pre># cp ~/.bashrc ~/archlive/airootfs/etc/skel/
</pre>
<p>Cuando se ejecuta <code>~/archlive/airootfs/root/customize_airootfs.sh</code> y se crea un nuevo usuario, los archivos del directorio skel se copiarán automáticamente a la nueva carpeta de inicio («home»), con los permisos establecidos correctamente.
</p>
<p>De manera similar, es necesario tener cuidado con los archivos de configuración especiales que residen en algún lugar descendiente de la jerarquía. Como ejemplo, el archivo de configuración <code>/etc/X11/xinit/xinitrc</code> reside en una ruta que puede sobrescribirse al instalar un paquete. Para emplazar el archivo de configuración, se debe colocar el archivo <code>xinitrc</code> personalizado en <code>~/archlive/airootfs/etc/skel/</code> y luego modificar <code>customize_airootfs.sh</code> para moverlo apropiadamente .
</p>
<h3><span class="mw-headline" id="Cargador_de_arranque">Cargador de arranque</span></h3>
<p>El archivo por defecto debería funcionar bien, de manera que no debería necesitar tocarlo.
</p>
<p>Debido a la naturaleza modular de isolinux, puedes usar un montón de añadidos, ya que todos los archivos <code>*.c32</code> se pueden copiar y están disponibles. Eche un vistazo al <a rel="nofollow" class="external text" href="http://syslinux.zytor.com/wiki/index.php/SYSLINUX">sitio oficial de syslinux</a> y al <a rel="nofollow" class="external text" href="https://projects.archlinux.org/archiso.git/tree/configs/syslinux-iso/boot-files">repositorio git de archiso</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">enlace roto</a> 2020-08-02]</sup>. Utilizando dichos añadidos, es posible hacer menús visualmente atractivos y complejos. Consulte <a rel="nofollow" class="external text" href="http://syslinux.zytor.com/wiki/index.php/Comboot/menu.c32">esto</a>.
</p>
<h4><span class="mw-headline" id="UEFI_Secure_Boot">UEFI Secure Boot</span></h4>
<p>Si desea que su Archiso pueda iniciarse en un entorno donde esté activado UEFI Secure Boot, debe usar un cargador de arranque firmado. Puede seguir las instrucciones en <a href="../en/Unified_Extensible_Firmware_Interface/Secure_Boot.html#Using_a_signed_boot_loader" class="mw-redirect" title="Secure Boot">Secure Boot#Using a signed boot loader</a>.
</p>
<h3>
<span id="Gestor_de_inicio_de_sesi.C3.B3n"></span><span class="mw-headline" id="Gestor_de_inicio_de_sesión">Gestor de inicio de sesión</span>
</h3>
<p>Iniciar X con el arranque el sistema, en un sistema basado en <a href="../es/Systemd.html" title="Systemd (Español)">systemd (Español)</a>, las cosas se manejan activando el archivo <i>.service</i> de su gestor de inicio de sesión. Si sabe qué enlace necesita para el archivo <i>.service</i> en cuestión: perfecto. Si no, puede averiguarlo fácilmente, en el caso de que esté usando el mismo gestor de pantallas en su sistema. Basta con escribir::
</p>
<pre># ls -l /etc/systemd/system/display-manager.service
</pre>
<p>Ahora cree el mismo enlace de software en <code>~/archlive/airootfs/etc/systemd/system</code>. Para LXDM:
</p>
<pre># ln -s /usr/lib/systemd/system/lxdm.service ~/archlive/airootfs/etc/systemd/system/display-manager.service
</pre>
<p>Esto activará LXDM al inicio del sistema en su sistema live.
</p>
<p>Por otro lado, puede activar el servicio en <code>airootfs/root/customize_airootfs.sh</code> junto con otros servicios que estés activados allí.
</p>
<p>Si desea que el entorno gráfico se inicie automáticamente durante el arranque, asegúrese de editar <code>airootfs/root/customize_airootfs.sh</code> y reemplace
</p>
<pre>systemctl set-default multi-user.target
</pre>
<p>con
</p>
<pre>systemctl set-default graphical.target
</pre>
<h3>
<span id="Cambiar_el_acceso_autom.C3.A1ticamente"></span><span class="mw-headline" id="Cambiar_el_acceso_automáticamente">Cambiar el acceso automáticamente</span>
</h3>
<p>La configuración para el inicio de sesión automático de getty se encuentra en <code>airootfs/etc/systemd/system/getty@tty1.service.d/autologin.conf</code>.
</p>
<p>Puede modificar este archivo para cambiar el usuario que inicie sesión automáticamente:
</p>
<pre>[Service]
ExecStart=
ExecStart=-/sbin/agetty --autologin <b>isouser</b> --noclear %I 38400 linux
</pre>
<p>O elimínelo por completo para desactivar el inicio de sesión automático.
</p>
<h2><span class="mw-headline" id="Compilar_la_ISO">Compilar la ISO</span></h2>
<p>Ya está listo para poner sus archivos en la .iso, la cual podrá grabar en un CD o USB:
</p>
<p>Primero cree el directorio <code>out/</code>(opcional, build.sh lo creará si no existe):
</p>
<pre># mkdir ~/archlive/out/
</pre>
<p>luego dentro de <code>~/archlive</code>, ejecute:
</p>
<pre># ./build.sh -v
</pre>
<p>Este script descargará e instalará los paquetes que especificó en <code>work/*/airootfs</code>, creará las imágenes del kernel y de init, aplicará las personalizaciones y finalmente compilará la iso en la carpeta <code>out/</code>.
</p>
<h3><span class="mw-headline" id="Reconstruir_la_ISO">Reconstruir la ISO</span></h3>
<p>La reconstrucción de la ISO después de las modificaciones no tiene soporte oficial. Sin embargo, es fácilmente factible aplicando dos pasos. Primero tiene que eliminar los archivos de bloqueo presentes en el directorio de trabajo:
</p>
<pre># rm -v work/build.make_*
</pre>
<p>Además, se requiere editar el script  <code>airootfs/root/customize_airootfs.sh</code>, y añadir una orden <code>id</code> al comienzo de la línea <code>useradd</code> como se muestra aquí. De lo contrario, la reconstrucción se detiene en este punto porque el usuario que se va a agregar ya existe <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/41865">FS#41865</a>.
</p>
<pre>! id arch &amp;&amp; useradd -m -p "" -g users -G "adm,audio,floppy,log,network,rfkill,scanner,storage,optical,power,wheel" -s /usr/bin/zsh arch
</pre>
<p>También elimine los datos persistentes, como los usuarios creados, o los enlaces simbólicos, como <code>/etc/sudoers</code>.
</p>
<p>Las reconstrucciones pueden acelerarse ligeramente editando el script pacstrap (ubicado en /bin/pacstrap) y cambiando lo siguiente en la línea 361:
</p>
<p>Antes:
</p>
<pre>if ! pacman -r "$newroot" -Sy "${pacman_args[@]}"; then
</pre>
<p>Después:
</p>
<pre>if ! pacman -r "$newroot" -Sy --needed "${pacman_args[@]}"; then
</pre>
<p>Esto aumenta la velocidad del arranque inicial, ya que no tiene que descargar ni instalar ninguno de los paquetes básicos que ya están instalados.
</p>
<h2><span class="mw-headline" id="Utilizar_la_ISO">Utilizar la ISO</span></h2>
<p>Véase la <a href="../es/Installation_guide.html" title="Installation guide (Español)">Guía de instalación</a> para conocer distintas opciones.
</p>
<h2><span class="mw-headline" id="Ejecutar_la_ISO_en_QEMU">Ejecutar la ISO en QEMU</span></h2>
<pre> qemu-system-x86_64 \
   -accel kvm \
   -boot order=d,menu=on,reboot-timeout=5000 \
   -m size=3072,slots=0,maxmem=$((3072*1024*1024)) \
   -k en \
   -name archiso,process=archiso_0 \
   -drive file=/path/to/archlinux-yyyy.mm.dd-x86_64.iso,media=cdrom,readonly=on \
   -display sdl \
   -vga virtio \
   -enable-kvm \
   -no-reboot \
   -no-shutdown
</pre>
<h2>
<span id="V.C3.A9ase_tambi.C3.A9n"></span><span class="mw-headline" id="Véase_también">Véase también</span>
</h2>
<h3>
<span id="Documentaci.C3.B3n_y_tutoriales"></span><span class="mw-headline" id="Documentación_y_tutoriales">Documentación y tutoriales</span>
</h3>
<ul>
<li><a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/archiso">Página del proyecto Archiso</a></li>
<li><a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/archiso/tree/master/docs">Documentación oficial</a></li>
</ul>
<h3>
<span id="Crear_una_ISO_de_instalaci.C3.B3n_sin_conexi.C3.B3n"></span><span class="mw-headline" id="Crear_una_ISO_de_instalación_sin_conexión">Crear una ISO de instalación sin conexión</span>
</h3>
<ul><li><a href="/index.php?title=Archiso_offline&amp;action=edit&amp;redlink=1" class="new" title="Archiso offline (page does not exist)">Archiso offline</a></li></ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../es/Category:Live_Arch_systems.html" title="Category:Live Arch systems (Español)">Live Arch systems (Español)</a></li>
<li><a href="../es/Category:Installation_process.html" title="Category:Installation process (Español)">Installation process (Español)</a></li>
<li><a href="../es/Category:Arch_projects.html" title="Category:Arch projects (Español)">Arch projects (Español)</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Archiso_(Espa%C3%B1ol)&amp;oldid=660018">https://wiki.archlinux.org/index.php?title=Archiso_(Español)&amp;oldid=660018</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 15 April 2021, at 15:31.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
