<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Postfix (Español) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Postfix_Español rootpage-Postfix_Español skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Postfix (Español)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Estado de la traducción:</strong> esta traducción de <a href="/title/Postfix" title="Postfix">Postfix</a> fue revisada el <b>2020-12-06</b>. Si existen <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Postfix&amp;diff=0&amp;oldid=631448">cambios</a> puede <a href="/title/ArchWiki:Translation_Team/Contributing_(Espa%C3%B1ol)" class="mw-redirect" title="ArchWiki:Translation Team/Contributing (Español)">actualizarla</a> o avisar al <a href="/title/ArchWiki:Translation_Team_(Espa%C3%B1ol)" title="ArchWiki:Translation Team (Español)">equipo de traducción</a>.</div>
<div class="archwiki-template-meta-related-articles-start">
<p>Artículos relacionados</p>
<ul>
<li><a href="/title/Postfix_with_SASL" title="Postfix with SASL">Postfix with SASL</a></li>
<li><a href="/title/Virtual_user_mail_system" class="mw-redirect" title="Virtual user mail system">Virtual user mail system</a></li>
<li><a href="/title/OpenDMARC" title="OpenDMARC">OpenDMARC</a></li>
<li><a href="/title/OpenDKIM" title="OpenDKIM">OpenDKIM</a></li>
</ul>
</div>
<p><a href="https://en.wikipedia.org/wiki/es:Postfix" class="extiw" title="wikipedia:es:Postfix">Postfix</a> es un <a href="/title/Mail_transfer_agent" class="mw-redirect" title="Mail transfer agent">agente de transferencia de correo</a> que de acuerdo con <a rel="nofollow" class="external text" href="http://www.postfix.org/">su sitio web</a>:
</p>
<dl><dd>intenta ser rápido, fácil de administrar y seguro, al mismo tiempo que es lo suficientemente compatible con sendmail para no molestar a los usuarios existentes. Por lo tanto, el exterior es parecido a sendmail, pero el interior es completamente diferente.</dd></dl>
<p>Este artículo se basa en <a href="/title/Mail_server" title="Mail server">Servidor de correo</a>. El objetivo de este artículo es configurar Postfix y explicar qué hacen los archivos de configuración básicos. Hay instrucciones para configurar la entrega solo para usuarios locales del sistema y un enlace a una guía para la entrega a usuarios virtuales.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Instalaci%C3%B3n"><span class="tocnumber">1</span> <span class="toctext">Instalación</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Configuraci%C3%B3n"><span class="tocnumber">2</span> <span class="toctext">Configuración</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Alias"><span class="tocnumber">2.1</span> <span class="toctext">Alias</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Correo_local"><span class="tocnumber">2.2</span> <span class="toctext">Correo local</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Correo_virtual"><span class="tocnumber">2.3</span> <span class="toctext">Correo virtual</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Comprobar_configuraci%C3%B3n"><span class="tocnumber">2.4</span> <span class="toctext">Comprobar configuración</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Iniciar_Postfix"><span class="tocnumber">3</span> <span class="toctext">Iniciar Postfix</span></a></li>
<li class="toclevel-1 tocsection-8">
<a href="#TLS"><span class="tocnumber">4</span> <span class="toctext">TLS</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="#SMTP_seguro_(enviando)"><span class="tocnumber">4.1</span> <span class="toctext">SMTP seguro (enviando)</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#SMTP_seguro_(recibiendo)"><span class="tocnumber">4.2</span> <span class="toctext">SMTP seguro (recibiendo)</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11">
<a href="#Consejos_y_trucos"><span class="tocnumber">5</span> <span class="toctext">Consejos y trucos</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#Lista_negra_de_correos_electr%C3%B3nicos_entrantes"><span class="tocnumber">5.1</span> <span class="toctext">Lista negra de correos electrónicos entrantes</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Ocultar_la_IP_y_el_agente_de_usuario_del_remitente_en_el_encabezado_Received"><span class="tocnumber">5.2</span> <span class="toctext">Ocultar la IP y el agente de usuario del remitente en el encabezado Received</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Postfix_en_una_jaula_chroot"><span class="tocnumber">5.3</span> <span class="toctext">Postfix en una jaula chroot</span></a></li>
<li class="toclevel-2 tocsection-15">
<a href="#DANE_(DNSSEC)"><span class="tocnumber">5.4</span> <span class="toctext">DANE (DNSSEC)</span></a>
<ul>
<li class="toclevel-3 tocsection-16"><a href="#Registro_de_recursos"><span class="tocnumber">5.4.1</span> <span class="toctext">Registro de recursos</span></a></li>
<li class="toclevel-3 tocsection-17"><a href="#Configuraci%C3%B3n_2"><span class="tocnumber">5.4.2</span> <span class="toctext">Configuración</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-18">
<a href="#Extras"><span class="tocnumber">6</span> <span class="toctext">Extras</span></a>
<ul>
<li class="toclevel-2 tocsection-19">
<a href="#Postgrey"><span class="tocnumber">6.1</span> <span class="toctext">Postgrey</span></a>
<ul>
<li class="toclevel-3 tocsection-20"><a href="#Instalaci%C3%B3n_2"><span class="tocnumber">6.1.1</span> <span class="toctext">Instalación</span></a></li>
<li class="toclevel-3 tocsection-21"><a href="#Configuraci%C3%B3n_3"><span class="tocnumber">6.1.2</span> <span class="toctext">Configuración</span></a></li>
<li class="toclevel-3 tocsection-22"><a href="#Lista_blanca"><span class="tocnumber">6.1.3</span> <span class="toctext">Lista blanca</span></a></li>
<li class="toclevel-3 tocsection-23"><a href="#Soluci%C3%B3n_de_problemas"><span class="tocnumber">6.1.4</span> <span class="toctext">Solución de problemas</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-24">
<a href="#SpamAssassin"><span class="tocnumber">6.2</span> <span class="toctext">SpamAssassin</span></a>
<ul>
<li class="toclevel-3 tocsection-25"><a href="#Configuraci%C3%B3n_gen%C3%A9rica_independiente_de_SpamAssassin"><span class="tocnumber">6.2.1</span> <span class="toctext">Configuración genérica independiente de SpamAssassin</span></a></li>
<li class="toclevel-3 tocsection-26"><a href="#SpamAssassin_combinado_con_Dovecot_LDA_/_Sieve_(Filtrado_de_correo)"><span class="tocnumber">6.2.2</span> <span class="toctext">SpamAssassin combinado con Dovecot LDA / Sieve (Filtrado de correo)</span></a></li>
<li class="toclevel-3 tocsection-27"><a href="#SpamAssassin_combinado_con_Dovecot_LMTP_/_Sieve"><span class="tocnumber">6.2.3</span> <span class="toctext">SpamAssassin combinado con Dovecot LMTP / Sieve</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-28"><a href="#Procesamiento_de_correo_basado_en_reglas"><span class="tocnumber">6.3</span> <span class="toctext">Procesamiento de correo basado en reglas</span></a></li>
<li class="toclevel-2 tocsection-29">
<a href="#Marco_de_pol%C3%ADticas_del_remitente"><span class="tocnumber">6.4</span> <span class="toctext">Marco de políticas del remitente</span></a>
<ul>
<li class="toclevel-3 tocsection-30"><a href="#Con_spf-engine_o_python-postfix-policyd-spf"><span class="tocnumber">6.4.1</span> <span class="toctext">Con spf-engine o python-postfix-policyd-spf</span></a></li>
<li class="toclevel-3 tocsection-31"><a href="#Con_postfix-policyd-spf-perl"><span class="tocnumber">6.4.2</span> <span class="toctext">Con postfix-policyd-spf-perl</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-32"><a href="#Esquema_de_reescritura_del_remitente"><span class="tocnumber">6.5</span> <span class="toctext">Esquema de reescritura del remitente</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-33">
<a href="#Soluci%C3%B3n_de_problemas_2"><span class="tocnumber">7</span> <span class="toctext">Solución de problemas</span></a>
<ul>
<li class="toclevel-2 tocsection-34"><a href="#Warning:_%22database_/etc/postfix/*.db_is_older_than_source_file_..%22"><span class="tocnumber">7.1</span> <span class="toctext">Warning: "database /etc/postfix/*.db is older than source file .."</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-35"><a href="#V%C3%A9ase_tambi%C3%A9n"><span class="tocnumber">8</span> <span class="toctext">Véase también</span></a></li>
</ul>
</div>

<h2>
<span id="Instalaci.C3.B3n"></span><span class="mw-headline" id="Instalación">Instalación</span>
</h2>
<p><a href="/title/Install_(Espa%C3%B1ol)" class="mw-redirect" title="Install (Español)">Instale</a> el paquete <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=postfix">postfix</a></span>.
</p>
<h2>
<span id="Configuraci.C3.B3n"></span><span class="mw-headline" id="Configuración">Configuración</span>
</h2>
<p>Véase <a rel="nofollow" class="external text" href="http://www.postfix.org/BASIC_CONFIGURATION_README.html">Configuración básica de Postfix</a>. Los archivos de configuración están en <code>/etc/postfix</code> por defecto. Los dos archivos más importantes son:
</p>
<ul>
<li>
<code>master.cf</code>, define qué servicios de Postfix están habilitados y cómo se conectan los clientes con ellos, véase <span class="plainlinks archwiki-template-man" title="$ man 5 master"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/master.5">master(5)</a></span>
</li>
<li>
<code>main.cf</code>, el archivo de configuración principal, véase <span class="plainlinks archwiki-template-man" title="$ man 5 postconf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/postconf.5">postconf(5)</a></span>
</li>
</ul>
<p>Los cambios de configuración necesitan un <a href="/title/Reload_(Espa%C3%B1ol)" class="mw-redirect" title="Reload (Español)">reinicio</a> de <code>postfix.service</code> para tener efecto.
</p>
<h3><span class="mw-headline" id="Alias">Alias</span></h3>
<p>Véase <span class="plainlinks archwiki-template-man" title="$ man 5 aliases"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/postfix/aliases.5">aliases(5)</a></span>.
</p>
<p>Puede especificar los alias (también conocidos como reenviadores) en <code>/etc/postfix/aliases</code>.
</p>
<p>Debe asignar todo el correo dirigido a <i>root</i> a otra cuenta, ya que no es una buena idea leer el correo como superusuario.
</p>
<p>Descomente la siguiente línea, y cambie <code>tú</code> a una cuenta real.
</p>
<pre>root: tú
</pre>
<p>Una vez que haya terminado de editar <code>/etc/postfix/aliases</code> debe ejecutar la orden postalias:
</p>
<pre>postalias /etc/postfix/aliases
</pre>
<p>Para cambios posteriores puedes utilizar:
</p>
<pre>newaliases
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Sugerencia:</strong> Alternativamente puede crear el archivo <code>~/.forward</code>, por ejemplo <code>/root/.forward</code> para el superusuario. Especifique el usuario al que se debe reenviar el correo del superusuario, por ejemplo <i>usuario@localhost</i>.
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/root/.forward</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">usuario@localhost
</pre>
</div>
<h3><span class="mw-headline" id="Correo_local">Correo local</span></h3>
<p>Para enviar correo solo a los usuarios locales del sistema (que están en <code>/etc/passwd</code>) actualice <code>/etc/postfix/main.cf</code> para reflejar la siguiente configuración. Descomente, cambie o añada las siguientes líneas:
</p>
<pre>myhostname = localhost
mydomain = localdomain
mydestination = $myhostname, localhost.$mydomain, localhost
inet_interfaces = $myhostname, localhost
mynetworks_style = host
default_transport = error: outside mail is not deliverable
</pre>
<p>Todos los demás ajustes pueden permanecer sin cambios. Después de configurar el archivo de configuración anterior, es posible que desee configurar algunos <a href="#Alias">#Alias</a> y luego <a href="#Iniciar_Postfix">#Iniciar Postfix</a>.
</p>
<h3><span class="mw-headline" id="Correo_virtual">Correo virtual</span></h3>
<p>El correo virtual es un correo que no se asigna a una cuenta de usuario (<code>/etc/passwd</code>).
</p>
<p>Véase <a href="/title/Virtual_user_mail_system_with_Postfix,_Dovecot_and_Roundcube" title="Virtual user mail system with Postfix, Dovecot and Roundcube">Virtual user mail system with Postfix, Dovecot and Roundcube</a> para una guía completa de cómo configurarlo.
</p>
<h3>
<span id="Comprobar_configuraci.C3.B3n"></span><span class="mw-headline" id="Comprobar_configuración">Comprobar configuración</span>
</h3>
<p>Ejecute la orden <code>postfix check</code>. Debería mostrar cualquier cosa que pueda haber hecho mal en un archivo de configuración. 
</p>
<p>Para ver todas sus configuraciones, escriba <code>postconf</code>. Para ver en qué se diferencian de los valores por defecto, pruebe <code>postconf -n</code>.
</p>
<h2><span class="mw-headline" id="Iniciar_Postfix">Iniciar Postfix</span></h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Debe ejecutar <code>newaliases</code> al menos una vez para que Postfix se ejecute, incluso si no configuró ningún <a href="#Alias">#Alias</a>.</div>
<p><a href="/title/Start/enable_(Espa%C3%B1ol)" class="mw-redirect" title="Start/enable (Español)">Inicie/active</a> <code>postfix.service</code>.
</p>
<h2><span class="mw-headline" id="TLS">TLS</span></h2>
<p>Para más información, véase <a rel="nofollow" class="external text" href="http://www.postfix.org/TLS_README.html">Soporte TLS en Postfix</a>.
</p>
<h3>
<span id="SMTP_seguro_.28enviando.29"></span><span class="mw-headline" id="SMTP_seguro_(enviando)">SMTP seguro (enviando)</span>
</h3>
<p>Por defecto, Postfix/sendmailno enviará correo electrónico cifrado a otros servidores SMTP. Para utilizar TLS cuando esté disponible, añada la siguiente línea a <code>main.cf</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/postfix/main.cf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">smtp_tls_security_level = may</pre>
<p>Para <i>forzar</i> TLS (y fallar cuando el servidor remoto no lo soporte), cambie <code>may</code> a <code>encrypt</code>.  Note, sin embargo, que esto viola el <a href="https://tools.ietf.org/html/rfc2487" class="extiw" title="rfc:2487">RFC:2487</a> si el servidor SMTP es referenciado públicamente.
</p>
<h3>
<span id="SMTP_seguro_.28recibiendo.29"></span><span class="mw-headline" id="SMTP_seguro_(recibiendo)">SMTP seguro (recibiendo)</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Advertencia:</strong> Si implementa <a href="https://en.wikipedia.org/wiki/es:Transport_Layer_Security" class="extiw" title="wikipedia:es:Transport Layer Security">TLS</a>, asegúrese de seguir la <a rel="nofollow" class="external text" href="https://weakdh.org/sysadmin.html">guía de weakdh.org</a> para prevenir FREAK/Logjam. Desde mediados de 2015, la configuración predeterminada ha sido segura contra <a href="https://en.wikipedia.org/wiki/es:Ataque_POODLE" class="extiw" title="wikipedia:es:Ataque POODLE">POODLE</a>. Para más información véase <a href="/title/Server-side_TLS" class="mw-redirect" title="Server-side TLS">Server-side TLS</a>.</div>
<p>Por defecto, Postfix no aceptará el correo seguro.
</p>
<p>Necesita <a href="/title/Obtain_a_certificate" class="mw-redirect" title="Obtain a certificate">obtener un certificado</a>. Apunte Postfix a sus certificados TLS añadiendo las líneas siguientes a <code>main.cf</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/postfix/main.cf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">smtpd_tls_security_level = may
smtpd_use_tls = yes
smtpd_tls_cert_file = <b>/ruta/al/cert.pem</b>
smtpd_tls_key_file = <b>/ruta/al/key.pem</b></pre>
<p>Hay dos formas de aceptar el correo seguro. STARTTLS sobre SMTP (puerto 587) y SMTPS (puerto 465). Este último fue previamente desaprobado pero fue reintegrado por el <a href="https://tools.ietf.org/html/rfc8314" class="extiw" title="rfc:8314">RFC:8314</a>.
</p>
<p>Para activar STARTTLS sobre SMTP (puerto 587), descomente las siguientes líneas en <code>master.cf</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/postfix/master.cf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">submission inet n       -       n       -       -       smtpd
  -o syslog_name=postfix/submission
  -o smtpd_tls_security_level=encrypt
  -o smtpd_sasl_auth_enable=yes
  -o smtpd_tls_auth_only=yes
  -o smtpd_reject_unlisted_recipient=no
#  -o smtpd_client_restrictions=$mua_client_restrictions
#  -o smtpd_helo_restrictions=$mua_helo_restrictions
#  -o smtpd_sender_restrictions=$mua_sender_restrictions
  -o smtpd_recipient_restrictions=
  -o smtpd_relay_restrictions=permit_sasl_authenticated,reject
  -o milter_macro_daemon_name=ORIGINATING</pre>
<p>Las opciones <code>smtpd_*_restrictions</code> permanecen comentadas porque <code>$mua_*_restrictions</code> no están definidas en main.cf por defecto. Si defide configurar alguna <code>$mua_*_restrictions</code>, descomente esas líneas también.
</p>
<p>Para activar SMTPS (puerto 465), descomente las líneas siguientes en <code>master.cf</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/postfix/master.cf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"><b>smtps</b>     inet  n       -       n       -       -       smtpd
  -o syslog_name=postfix/smtps
  -o smtpd_tls_wrappermode=yes
  -o smtpd_sasl_auth_enable=yes
  -o smtpd_reject_unlisted_recipient=no
#  -o smtpd_client_restrictions=$mua_client_restrictions
#  -o smtpd_helo_restrictions=$mua_helo_restrictions
#  -o smtpd_sender_restrictions=$mua_sender_restrictions
  -o smtpd_recipient_restrictions=
  -o smtpd_relay_restrictions=permit_sasl_authenticated,reject
  -o milter_macro_daemon_name=ORIGINATING
</pre>
<p>Y en primera línea, reemplace <code><b>smtps</b></code> con <code>submissions</code>. (este es el nombre oficial del servicio según <a rel="nofollow" class="external text" href="https://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.txt">IANA</a>; Postfix todavía hace referencia al nombre antiguo)
</p>
<p>El razonamiento que rodea a las líneas <code>$smtpd_*_restrictions</code> es el mismo que arriba.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Si obtiene un mensaje de error como <code>postfix/master[5309]: fatal: 0.0.0.0:smtps: Servname not supported for ai_socktype</code>, asegúrese de tener la siguiente línea en <code>postfix/master.cf</code>:
<pre>submissions inet n       -       n       -       -       smtpd
</pre>
<p>También asegúrese de que <code>/etc/services</code> está actualizado e incluye la siguiente línea:
</p>
<pre>submissions 465/tcp
</pre>
</div>
<h2><span class="mw-headline" id="Consejos_y_trucos">Consejos y trucos</span></h2>
<h3>
<span id="Lista_negra_de_correos_electr.C3.B3nicos_entrantes"></span><span class="mw-headline" id="Lista_negra_de_correos_electrónicos_entrantes">Lista negra de correos electrónicos entrantes</span>
</h3>
<p>La lista negra de correos electrónicos entrantes por dirección del remitente se puede hacer fácilmente con Postfix. 
</p>
<p>Cree y abra el fichero <code>/etc/postfix/blacklist_incoming</code> y añada la dirección de correo electrónico del remitente:
</p>
<pre>usuario@ejemplo.com REJECT
</pre>
<p>Luego use la orden <code>postmap</code> para crear una base de datos:
</p>
<pre># postmap hash:blacklist_incoming
</pre>
<p>Añada el siguiente código antes de la primera regla permisiva en <code>main.cf</code>:
</p>
<pre>smtpd_recipient_restrictions = check_sender_access hash:/etc/postfix/blacklist_incoming
</pre>
<p>Finalmente <a href="/title/Restart_(Espa%C3%B1ol)" class="mw-redirect" title="Restart (Español)">reinicie</a> <code>postfix.service</code>.
</p>
<h3><span class="mw-headline" id="Ocultar_la_IP_y_el_agente_de_usuario_del_remitente_en_el_encabezado_Received">Ocultar la IP y el agente de usuario del remitente en el encabezado Received</span></h3>
<p>Este es un problema de privacidad principalmente, si utiliza Thunderbird y envía un correo electrónico. El encabezado Received contendrá su IP LAN y WAN e información sobre el cliente de correo electrónico que utilizó.
(Fuente original: <a rel="nofollow" class="external text" href="https://askubuntu.com/questions/78163/when-sending-email-with-postfix-how-can-i-hide-the-senders-ip-and-username-in">AskUbuntu</a>)
Lo que queremos hacer es eliminar el encabezado Received de los correos electrónicos salientes.
</p>
<p>Para hacer esto, primero añada la siguiente línea a <code>main.cf</code>:
</p>
<pre>smtp_header_checks = regexp:/etc/postfix/smtp_header_checks
</pre>
<p>Cree <code>/etc/postfix/smtp_header_checks</code> con este contenido:
</p>
<pre>/^Received: .*/     IGNORE
/^User-Agent: .*/   IGNORE
</pre>
<p>Finalmente, <a href="/title/Restart_(Espa%C3%B1ol)" class="mw-redirect" title="Restart (Español)">reinicie</a> <code>postfix.service</code>.
</p>
<h3><span class="mw-headline" id="Postfix_en_una_jaula_chroot">Postfix en una jaula chroot</span></h3>
<p>Postfix no se pone en una jaula chroot por defecto. La documentación de Postfix <a rel="nofollow" class="external autonumber" href="http://www.postfix.org/BASIC_CONFIGURATION_README.html#chroot_setup">[1]</a> proporciona detalles sobre cómo llevar a cabo tal enjaulado. Los pasos se describen a continuación y se basan en el script de configuración de chroot que se proporciona en el código fuente de Postfix.
</p>
<p>Primero, entre en el archivo <code>master.cf</code> en el directorio <code>/etc/postfix</code> y cambie todas las entradas chroot a 'yes' (y) excepto para los servicios <code>qmgr</code>, <code>proxymap</code>, <code>proxywrite</code>, <code>local</code>, y <code>virtual</code>
</p>
<p>Segundo, cree dos funciones que nos ayudarán más adelante con la copia de archivos en la jaula chroot (véase el último paso)
</p>
<pre>CP="cp -p"
</pre>
<pre>cond_copy() {
  # find files as per pattern in $1
  # if any, copy to directory $2
  dir=`dirname "$1"`
  pat=`basename "$1"`
  lr=`find "$dir" -maxdepth 1 -name "$pat"`
  if test ! -d "$2" ; then exit 1 ; fi
  if test "x$lr" != "x" ; then $CP $1 "$2" ; fi
}
</pre>
<p>A continuación, haga los nuevos directorios para la jaula:
</p>
<pre>set -e
umask 022
</pre>
<pre>POSTFIX_DIR=${POSTFIX_DIR-/var/spool/postfix}
cd ${POSTFIX_DIR}
</pre>
<pre>mkdir -p etc lib usr/lib/zoneinfo
test -d /lib64 &amp;&amp; mkdir -p lib64
</pre>
<p>Encuentra el archivo localtime:
</p>
<pre>lt=/etc/localtime
if test ! -f $lt ; then lt=/usr/lib/zoneinfo/localtime ; fi
if test ! -f $lt ; then lt=/usr/share/zoneinfo/localtime ; fi
if test ! -f $lt ; then echo "cannot find localtime" ; exit 1 ; fi
rm -f etc/localtime
</pre>
<p>Copie localtime y algunos archivos de sistema en el directorio etc del chroot:
</p>
<pre>$CP -f $lt /etc/services /etc/resolv.conf /etc/nsswitch.conf etc
$CP -f /etc/host.conf /etc/hosts /etc/passwd etc
ln -s -f /etc/localtime usr/lib/zoneinfo
</pre>
<p>Copie las bibliotecas requeridas en el chroot utilizando la función creada previamente <code>cond_copy</code>
</p>
<pre>cond_copy '/usr/lib/libnss_*.so*' lib
cond_copy '/usr/lib/libresolv.so*' lib
cond_copy '/usr/lib/libdb.so*' lib
</pre>
<p>Y no olvide <a href="/title/Reload_(Espa%C3%B1ol)" class="mw-redirect" title="Reload (Español)">recargar</a> Postfix.
</p>
<h3>
<span id="DANE_.28DNSSEC.29"></span><span class="mw-headline" id="DANE_(DNSSEC)">DANE (DNSSEC)</span>
</h3>
<h4><span class="mw-headline" id="Registro_de_recursos">Registro de recursos</span></h4>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Advertencia:</strong> Esta no es una sección trivial. Tenga en cuenta que debe estar seguro de lo que está haciendo. Mejor lea antes <a rel="nofollow" class="external text" href="https://dane.sys4.de/common_mistakes">Errores comunes</a>.</div>
<p><a href="/title/DANE" title="DANE">DANE</a> admite varios tipos de registros, sin embargo, no todos ellos son adecuados en Postfix.
</p>
<p>El uso del certificado 0 no es compatible, el 1 se asigna al 3 y 2 es opcional, por lo tanto es recomendable publicar un registro "3".
Más en <a href="/title/DANE#Resource_Record" title="DANE">Registros de recursos</a>.
</p>
<h4>
<span id="Configuraci.C3.B3n_2"></span><span class="mw-headline" id="Configuración_2">Configuración</span>
</h4>
<p>DANE oportunista <i>(opportunistic)</i> se configura de esta manera:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/postfix/main.cf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">smtpd_use_tls = yes
smtp_dns_support_level = dnssec
smtp_tls_security_level = dane
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/postfix/master.cf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">dane       unix  -       -       n       -       -       smtp
  -o smtp_dns_support_level=dnssec
  -o smtp_tls_security_level=dane
</pre>
<p>Para utilizar políticas por dominio, por ejemplo DANE oportunista para ejemplo.org y DANE obligatorio <i>(mandatory)</i> para ejemplo.com, utilice algo como esto:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/postfix/main.cf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">indexed = ${default_database_type}:${config_directory}/

# Per-destination TLS policy
#
smtp_tls_policy_maps = ${indexed}tls_policy

# default_transport = smtp, but some destinations are special:
#
transport_maps = ${indexed}transport
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">transport</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ejemplo.com dane
ejemplo.org dane
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">tls_policy</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ejemplo.com dane-only
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Para DANE obligatorio global, cambie <code>smtp_tls_security_level</code> a <code>dane-only</code>. Tenga en cuenta que esto provoca un error tempfail en Postfix (responder con un código de error <code>4.X.X</code>) en todos los envíos que no utilicen DANE.</div>
<p>La documentación completa se encuentra <a rel="nofollow" class="external text" href="http://www.postfix.org/TLS_README.html#client_tls_dane">aquí</a>.
</p>
<h2><span class="mw-headline" id="Extras">Extras</span></h2>
<ul><li>
<b><a href="/title/PostfixAdmin" title="PostfixAdmin">PostfixAdmin</a></b> — Una interfaz administrativa basada en web para Postfix.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="http://postfixadmin.sourceforge.net/">http://postfixadmin.sourceforge.net/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=postfixadmin">postfixadmin</a></span>
</dd></dl>
<h3><span class="mw-headline" id="Postgrey">Postgrey</span></h3>
<p><a rel="nofollow" class="external text" href="https://postgrey.schweikert.ch/">Postgrey</a> se puede utilizar para activar <a href="https://en.wikipedia.org/wiki/es:Lista_gris" class="extiw" title="wikipedia:es:Lista gris">listas grises</a> en un servidor de correo Postfix.
</p>
<h4>
<span id="Instalaci.C3.B3n_2"></span><span class="mw-headline" id="Instalación_2">Instalación</span>
</h4>
<p><a href="/title/Install_(Espa%C3%B1ol)" class="mw-redirect" title="Install (Español)">Instale</a> el paquete <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=postgrey">postgrey</a></span>. Para tenerlo funcionando rápidamente, edite el archivo de configuración de Postfix y añada estas líneas:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/postfix/main.cf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">smtpd_recipient_restrictions =
  check_policy_service inet:127.0.0.1:10030
</pre>
<p>Luego <a href="/title/Start/enable_(Espa%C3%B1ol)" class="mw-redirect" title="Start/enable (Español)">inicie/active</a> el servicio <code>postgrey</code>. Después, recargue el servicio <code>postfix</code>. Ahora la lista gris debería estar activada.
</p>
<h4>
<span id="Configuraci.C3.B3n_3"></span><span class="mw-headline" id="Configuración_3">Configuración</span>
</h4>
<p>La configuración se realiza mediante la edición del archivo <code>postgrey.service</code>. Primero cópielo para editarlo.
</p>
<pre># cp /usr/lib/systemd/system/postgrey.service /etc/systemd/system/
</pre>
<h4><span class="mw-headline" id="Lista_blanca">Lista blanca</span></h4>
<p>Para añadir listas blancas automáticas (los envíos exitosos entran en la lista blanca y no tienen que esperar nunca más), puede añadir la opción <code>--auto-whitelist-clients=N</code> y reemplazar <code>N</code> por un número adecuadamente pequeño (o dejarlo en su valor por defecto de 5).
</p>
<p>...en realidad, el método preferido debería ser la anulación <i>(override)</i>:
</p>
<pre>cat /etc/systemd/system/postgrey.service.d/override.conf
</pre>
<pre>[Service]
ExecStart=
ExecStart=/usr/bin/postgrey --inet=127.0.0.1:10030 \
       --pidfile=/run/postgrey/postgrey.pid \
       --group=postgrey --user=postgrey \
       --daemonize \
       --greylist-text="Greylisted for %%s seconds" \
       --auto-whitelist-clients
</pre>
<p>Para añadir su propia lista de clientes en la lista blanca además de los predeterminados, cree el archivo <code>/etc/postfix/whitelist_clients.local</code> e introduzca un dominio por línea, luego <a href="/title/Restart_(Espa%C3%B1ol)" class="mw-redirect" title="Restart (Español)">reinicie</a> <code>postgrey.service </code> para que los cambios surtan efecto.
</p>
<h4>
<span id="Soluci.C3.B3n_de_problemas"></span><span class="mw-headline" id="Solución_de_problemas">Solución de problemas</span>
</h4>
<p>Si especifica <code>--unix=/path/to/socket</code> y el archivo de socket no se crea, asegúrese de haber eliminado el valor predeterminado <code>--inet=127.0.0.1:10030</code> del archivo de servicio. 
</p>
<p>Para una documentación completa de las posibles opciones véase <code>perldoc postgrey</code>.
</p>
<h3><span class="mw-headline" id="SpamAssassin">SpamAssassin</span></h3>
<p>Esta sección describe cómo integrar <a href="/title/SpamAssassin" title="SpamAssassin">SpamAssassin</a>.
</p>
<h4>
<span id="Configuraci.C3.B3n_gen.C3.A9rica_independiente_de_SpamAssassin"></span><span class="mw-headline" id="Configuración_genérica_independiente_de_SpamAssassin">Configuración genérica independiente de SpamAssassin</span>
</h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Si desea combinar SpamAssassin y Dovecot Mail Filtering, ignore las siguientes dos líneas y continúe después.</div>
<p>Edite <code>/etc/postfix/master.cf</code> y añada el filtro de contenido bajo smtp.
</p>
<pre>smtp      inet  n       -       n       -       -       smtpd
  -o content_filter=spamassassin</pre>
<p>También añada la siguiente entrada de servicio para SpamAssassin.
</p>
<pre>spamassassin unix -     n       n       -       -       pipe
  flags=R user=spamd argv=/usr/bin/vendor_perl/spamc -e /usr/bin/sendmail -oi -f ${sender} ${recipient}</pre>
<p>Ahora puede <a href="/title/Start_(Espa%C3%B1ol)" class="mw-redirect" title="Start (Español)">iniciar</a> y <a href="/title/Enable_(Espa%C3%B1ol)" class="mw-redirect" title="Enable (Español)">activar</a> <code>spamassassin.service</code>.
</p>
<h4>
<span id="SpamAssassin_combinado_con_Dovecot_LDA_.2F_Sieve_.28Filtrado_de_correo.29"></span><span class="mw-headline" id="SpamAssassin_combinado_con_Dovecot_LDA_/_Sieve_(Filtrado_de_correo)">SpamAssassin combinado con Dovecot LDA / Sieve (Filtrado de correo)</span>
</h4>
<p>Configure LDA y Sieve-Plugin como se describe en <a href="/title/Dovecot#Sieve" title="Dovecot">Dovecot#Sieve</a>. Pero ignore la última línea <code>mailbox_command... </code>.
</p>
<p>En su lugar, añada una tubería <i>(pipe)</i> en <code>/etc/postfix/master.cf</code>:
</p>
<pre> dovecot   unix  -       n       n       -       -       pipe
       flags=DRhu user=vmail:vmail argv=/usr/bin/vendor_perl/spamc -u spamd -e /usr/lib/dovecot/dovecot-lda -f ${sender} -d ${recipient}
</pre>
<p>Y actívelo en <code>/etc/postfix/main.cf</code>:
</p>
<pre> virtual_transport = dovecot
</pre>
<h4>
<span id="SpamAssassin_combinado_con_Dovecot_LMTP_.2F_Sieve"></span><span class="mw-headline" id="SpamAssassin_combinado_con_Dovecot_LMTP_/_Sieve">SpamAssassin combinado con Dovecot LMTP / Sieve</span>
</h4>
<p>Configure LMTP y Sieve como se describe en <a href="/title/Dovecot#Sieve" title="Dovecot">Dovecot#Sieve</a>.
</p>
<p>Edite <code>/etc/dovecot/conf.d/90-plugins.conf</code> y añada:
</p>
<pre> sieve_before = /etc/dovecot/sieve.before.d/
 sieve_extensions = +vnd.dovecot.filter
 sieve_plugins = sieve_extprograms
 sieve_filter_bin_dir = /etc/dovecot/sieve-filter
 sieve_filter_exec_timeout = 120s #this is often needed for the long running spamassassin scans, default is otherwise 10s
</pre>
<p>Cree el directorio y coloque spamassassin como un binario que pueda ser ejecutado por dovecot:
</p>
<pre> # mkdir /etc/dovecot/sieve-filter
 # ln -s /usr/bin/vendor_perl/spamc /etc/dovecot/sieve-filter/spamc
</pre>
<p>Cree un nuevo archivo, <code>/etc/dovecot/sieve.before.d/spamassassin.sieve</code> que contenga:
</p>
<pre> require [ "vnd.dovecot.filter" ];
 filter "spamc" [ "-d", "127.0.0.1", "--no-safe-fallback" ];
</pre>
<p>Compile las reglas sieve <code>spamassassin.svbin</code>:
</p>
<pre> # cd /etc/dovecot/sieve.before.d
 # sievec spamassassin.sieve
</pre>
<p>Finalmente, <a href="/title/Restart_(Espa%C3%B1ol)" class="mw-redirect" title="Restart (Español)">reinicie</a> <code>dovecot.service</code>.
</p>
<h3><span class="mw-headline" id="Procesamiento_de_correo_basado_en_reglas">Procesamiento de correo basado en reglas</span></h3>
<p>Con los servicios de políticas se puede ajustar fácilmente el comportamiento de Postfix en la entrega de correos.
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=postfwd">postfwd</a></span> y policyd (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/policyd-mysql/">policyd-mysql</a></span><sup><small>AUR</small></sup>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/policyd-pgsql/">policyd-pgsql</a></span><sup><small>AUR</small></sup> o <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/policyd-sqlite/">policyd-sqlite</a></span><sup><small>AUR</small></sup>) proporcionan servicios para hacerlo.
Esto le permite, por ejemplo, implementar listas grises y negras de remitentes y receptores, así como el control de políticas <a href="/title/SPF" class="mw-redirect" title="SPF">SPF</a>.
</p>
<p>Los servicios de políticas son servicios independientes y están conectados a Postfix tal que así:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/postfix/main.cf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">smtpd_recipient_restrictions =
  ...
  check_policy_service unix:/run/policyd.sock
  check_policy_service inet:127.0.0.1:10040
</pre>
<p>La colocación de los servicios de políticas al final de la cola reduce la carga, ya que solo se procesan los correos legítimos. Asegúrese de colocarlo antes de la primera declaración permisiva para capturar todos los mensajes entrantes.
</p>
<h3>
<span id="Marco_de_pol.C3.ADticas_del_remitente"></span><span class="mw-headline" id="Marco_de_políticas_del_remitente">Marco de políticas del remitente</span>
</h3>
<p>Para utilizar el <a href="/title/Sender_Policy_Framework" class="mw-redirect" title="Sender Policy Framework">marco de políticas del remitente</a> con Postfix, puede <a href="/title/Install_(Espa%C3%B1ol)" class="mw-redirect" title="Install (Español)">instale</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/python-spf-engine/">python-spf-engine</a></span><sup><small>AUR</small></sup>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/python-postfix-policyd-spf/">python-postfix-policyd-spf</a></span><sup><small>AUR</small></sup> o <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/postfix-policyd-spf-perl/">postfix-policyd-spf-perl</a></span><sup><small>AUR</small></sup>.
</p>
<h4><span class="mw-headline" id="Con_spf-engine_o_python-postfix-policyd-spf">Con spf-engine o python-postfix-policyd-spf</span></h4>
<p>Edite <code>/etc/python-policyd-spf/policyd-spf.conf</code> a sus necesidades. Una versión ampliamente comentada se puede encontrar en <code>/etc/python-policyd-spf/policyd-spf.conf.commented</code>.
Preste especial atención a la política de verificación HELO, ya que la configuración estándar rechaza estrictamente los fallos HELO.
</p>
<p>En el archivo <code>main.cf</code>, añada un tiempo de espera para policyd:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/postfix/main.cf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">policy-spf_time_limit = 3600s</pre>
<p>A continuación, añada un transporte:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/postfix/master.cf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">policy-spf  unix  -       n       n       -       0       spawn
     user=nobody argv=/usr/bin/policyd-spf</pre>
<p>Por último, debe añadir policyd a <code>smtpd_recipient_restrictions</code>. Para minimizar la carga, sitúela al final de las restricciones pero por encima de cualquier línea <code>reject_rbl_client</code> DNSBL:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/postfix/main.cf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">smtpd_recipient_restrictions=
     ...
     permit_sasl_authenticated
     permit_mynetworks
     reject_unauth_destination
     check_policy_service unix:private/policy-spf</pre>
<p>Ahora recargue el servicio <code>postfix</code>.
</p>
<p>Puede comprobar su configuración con lo siguiente:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/python-policyd-spf/policyd-spf.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">defaultSeedOnly = 0</pre>
<h4><span class="mw-headline" id="Con_postfix-policyd-spf-perl">Con postfix-policyd-spf-perl</span></h4>
<p>Realice el mismo proceso con postfix como <a href="#Con_spf-engine_o_python-postfix-policyd-spf">con python-postfix-policyd-spf</a>, pero con las siguientes diferencias:
</p>
<p>Tiempo de espera para policyd en el archivo <code>main.cf</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/postfix/main.cf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">policy_time_limit = 3600</pre>
<p>Transporte:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/postfix/master.cf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">policy  unix  -       n       n       -       0       spawn
     user=nobody argv=/usr/lib/postfix/postfix-policyd-spf-perl</pre>
<p>Añada el policyd a <code>smtpd_recipient_restrictions</code>:
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Advertencia:</strong> Especifique <code>check_policy_service</code> después de <code>jected_unauth_destination</code> o su sistema puede convertirse en un relay abierto.</div>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/postfix/main.cf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">smtpd_recipient_restrictions=
     ...
     reject_unauth_destination
     check_policy_service unix:private/policy
     ...</pre>
<h3><span class="mw-headline" id="Esquema_de_reescritura_del_remitente">Esquema de reescritura del remitente</span></h3>
<p>Para utilizar el <a href="/title/Sender_Rewriting_Scheme" class="mw-redirect" title="Sender Rewriting Scheme">esquema de reescritura del remitente</a> con Postfix, <a href="/title/Install_(Espa%C3%B1ol)" class="mw-redirect" title="Install (Español)">instale</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/postsrsd/">postsrsd</a></span><sup><small>AUR</small></sup> y ajuste la configuración:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/postsrsd/postsrsd</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">SRS_DOMAIN=yourdomain.tld
SRS_EXCLUDE_DOMAINS=yourotherdomain.tld,yet.anotherdomain.tld
SRS_SEPARATOR==
SRS_SECRET=/etc/postsrsd/postsrsd.secret
SRS_FORWARD_PORT=10001
SRS_REVERSE_PORT=10002
RUN_AS=postsrsd
CHROOT=/usr/lib/postsrsd</pre>
<p>Active e inicie el demonio, asegurándose de que se ejecute también después de reiniciar.
A continuación, configure Postfix en consecuencia ajustando las siguientes líneas:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/postfix/main.cf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">sender_canonical_maps = tcp:localhost:10001
sender_canonical_classes = envelope_sender
recipient_canonical_maps = tcp:localhost:10002
recipient_canonical_classes= envelope_recipient,header_recipient</pre>
<p>Reinicie Postfix y comience a reenviar correo.
</p>
<h2>
<span id="Soluci.C3.B3n_de_problemas_2"></span><span class="mw-headline" id="Solución_de_problemas_2">Solución de problemas</span>
</h2>
<h3>
<span id="Warning:_.22database_.2Fetc.2Fpostfix.2F.2A.db_is_older_than_source_file_...22"></span><span class="mw-headline" id='Warning:_"database_/etc/postfix/*.db_is_older_than_source_file_.."'>Warning: "database /etc/postfix/*.db is older than source file .."</span>
</h3>
<p>Si recibe alguna o ambas advertencias con <code>journalctl</code>:
</p>
<pre>warning: database /etc/postfix/virtual.db is older than source file /etc/postfix/virtual
warning: database /etc/postfix/transport.db is older than source file /etc/postfix/transport
</pre>
<p>Entonces puede solucionarlo utilizando estas órdenes dependiendo de los mensajes que reciba:
</p>
<pre>postmap /etc/postfix/transport
postmap /etc/postfix/virtual
</pre>
<p>Y <a href="/title/Restart_(Espa%C3%B1ol)" class="mw-redirect" title="Restart (Español)">reiniciar</a> <code>postfix.service</code>.
</p>
<h2>
<span id="V.C3.A9ase_tambi.C3.A9n"></span><span class="mw-headline" id="Véase_también">Véase también</span>
</h2>
<ul>
<li><a rel="nofollow" class="external text" href="http://www.postfix.org/documentation.html">Documentación oficial</a></li>
<li><a rel="nofollow" class="external text" href="https://help.ubuntu.com/community/Postfix">Documentación de Ubuntu sobre Postfix</a></li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="/title/Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="/title/Category:Mail_server_(Espa%C3%B1ol)" title="Category:Mail server (Español)">Mail server (Español)</a></li></ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Postfix_(Espa%C3%B1ol)&amp;oldid=665327">https://wiki.archlinux.org/index.php?title=Postfix_(Español)&amp;oldid=665327</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 29 April 2021, at 17:50.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="/title/ArchWiki:Privacy_policy" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="/title/ArchWiki:About" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="/title/ArchWiki:General_disclaimer" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
