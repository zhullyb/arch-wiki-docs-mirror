<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>LVM (Español) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-LVM_Español rootpage-LVM_Español skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">LVM (Español)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Estado de la traducción:</strong> esta traducción de <a href="/title/LVM" title="LVM">LVM</a> fue revisada el <b>2019-09-20</b>. Si existen <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=LVM&amp;diff=0&amp;oldid=581279">cambios</a> puede <a href="/title/ArchWiki:Translation_Team/Contributing_(Espa%C3%B1ol)" class="mw-redirect" title="ArchWiki:Translation Team/Contributing (Español)">actualizarla</a> o avisar al <a href="/title/ArchWiki:Translation_Team_(Espa%C3%B1ol)" title="ArchWiki:Translation Team (Español)">equipo de traducción</a>.</div>
<div class="archwiki-template-meta-related-articles-start">
<p>Artículos relacionados</p>
<ul>
<li><a href="/title/Software_RAID_and_LVM" class="mw-redirect" title="Software RAID and LVM">Software RAID and LVM</a></li>
<li><a href="/title/Dm-crypt_(Espa%C3%B1ol)/Encrypting_an_entire_system_(Espa%C3%B1ol)#LVM_sobre_LUKS" title="Dm-crypt (Español)/Encrypting an entire system (Español)">dm-crypt (Español)/Encrypting an entire system (Español)#LVM sobre LUKS</a></li>
<li><a href="/title/Dm-crypt_(Espa%C3%B1ol)/Encrypting_an_entire_system_(Espa%C3%B1ol)#LUKS_sobre_LVM" title="Dm-crypt (Español)/Encrypting an entire system (Español)">dm-crypt (Español)/Encrypting an entire system (Español)#LUKS sobre LVM</a></li>
<li><a href="/title/Resizing_LVM-on-LUKS" title="Resizing LVM-on-LUKS">Resizing LVM-on-LUKS</a></li>
<li><a href="/title/Create_root_filesystem_snapshots_with_LVM" title="Create root filesystem snapshots with LVM">Create root filesystem snapshots with LVM</a></li>
</ul>
</div>
<p>De <a href="https://en.wikipedia.org/wiki/Logical_Volume_Manager_(Linux)" class="extiw" title="wikipedia:Logical Volume Manager (Linux)">Wikipedia:Logical Volume Manager (Linux)</a>:
</p>
<dl><dd>LVM es un <a href="https://en.wikipedia.org/wiki/logical_volume_management" class="extiw" title="wikipedia:logical volume management">gestor de volúmenes lógicos</a> para el <a href="https://en.wikipedia.org/wiki/N%C3%BAcleo_Linux" class="extiw" title="wikipedia:Núcleo Linux">kernel de Linux</a>, que gestiona unidades de disco y dispositivos similares de almacenamiento masivo.</dd></dl>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Bloques_para_construir_LVM"><span class="tocnumber">1</span> <span class="toctext">Bloques para construir LVM</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Ventajas"><span class="tocnumber">2</span> <span class="toctext">Ventajas</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Desventajas"><span class="tocnumber">3</span> <span class="toctext">Desventajas</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Primeros_pasos"><span class="tocnumber">4</span> <span class="toctext">Primeros pasos</span></a></li>
<li class="toclevel-1 tocsection-5">
<a href="#Instalar_Arch_Linux_sobre_LVM"><span class="tocnumber">5</span> <span class="toctext">Instalar Arch Linux sobre LVM</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Crear_particiones"><span class="tocnumber">5.1</span> <span class="toctext">Crear particiones</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Crear_vol%C3%BAmenes_f%C3%ADsicos"><span class="tocnumber">5.2</span> <span class="toctext">Crear volúmenes físicos</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Crear_grupo_de_vol%C3%BAmenes"><span class="tocnumber">5.3</span> <span class="toctext">Crear grupo de volúmenes</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Crear_en_un_solo_paso"><span class="tocnumber">5.4</span> <span class="toctext">Crear en un solo paso</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Crear_vol%C3%BAmenes_l%C3%B3gicos"><span class="tocnumber">5.5</span> <span class="toctext">Crear volúmenes lógicos</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Crear_sistemas_de_archivos_y_montar_los_vol%C3%BAmenes_l%C3%B3gicos"><span class="tocnumber">5.6</span> <span class="toctext">Crear sistemas de archivos y montar los volúmenes lógicos</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Configurar_mkinitcpio"><span class="tocnumber">5.7</span> <span class="toctext">Configurar mkinitcpio</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Opciones_del_kernel"><span class="tocnumber">5.8</span> <span class="toctext">Opciones del kernel</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-14">
<a href="#Operaciones_sobre_los_vol%C3%BAmenes"><span class="tocnumber">6</span> <span class="toctext">Operaciones sobre los volúmenes</span></a>
<ul>
<li class="toclevel-2 tocsection-15"><a href="#Opciones_avanzadas"><span class="tocnumber">6.1</span> <span class="toctext">Opciones avanzadas</span></a></li>
<li class="toclevel-2 tocsection-16">
<a href="#Redimensionar_vol%C3%BAmenes"><span class="tocnumber">6.2</span> <span class="toctext">Redimensionar volúmenes</span></a>
<ul>
<li class="toclevel-3 tocsection-17">
<a href="#Vol%C3%BAmenes_f%C3%ADsicos"><span class="tocnumber">6.2.1</span> <span class="toctext">Volúmenes físicos</span></a>
<ul>
<li class="toclevel-4 tocsection-18"><a href="#Agrandar"><span class="tocnumber">6.2.1.1</span> <span class="toctext">Agrandar</span></a></li>
<li class="toclevel-4 tocsection-19">
<a href="#Encoger"><span class="tocnumber">6.2.1.2</span> <span class="toctext">Encoger</span></a>
<ul>
<li class="toclevel-5 tocsection-20"><a href="#Mover_extensiones_f%C3%ADsicas"><span class="tocnumber">6.2.1.2.1</span> <span class="toctext">Mover extensiones físicas</span></a></li>
<li class="toclevel-5 tocsection-21"><a href="#Redimensionar_volumen_f%C3%ADsico"><span class="tocnumber">6.2.1.2.2</span> <span class="toctext">Redimensionar volumen físico</span></a></li>
<li class="toclevel-5 tocsection-22"><a href="#Redimensionar_partici%C3%B3n"><span class="tocnumber">6.2.1.2.3</span> <span class="toctext">Redimensionar partición</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-3 tocsection-23">
<a href="#Vol%C3%BAmenes_l%C3%B3gicos"><span class="tocnumber">6.2.2</span> <span class="toctext">Volúmenes lógicos</span></a>
<ul>
<li class="toclevel-4 tocsection-24"><a href="#Cambiar_el_tama%C3%B1o_del_volumen_l%C3%B3gico_y_del_sistema_de_archivos_a_la_vez"><span class="tocnumber">6.2.2.1</span> <span class="toctext">Cambiar el tamaño del volumen lógico y del sistema de archivos a la vez</span></a></li>
<li class="toclevel-4 tocsection-25"><a href="#Cambiar_el_tama%C3%B1o_del_volumen_l%C3%B3gico_y_del_sistema_de_archivos_separadamente"><span class="tocnumber">6.2.2.2</span> <span class="toctext">Cambiar el tamaño del volumen lógico y del sistema de archivos separadamente</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2 tocsection-26">
<a href="#Renombrar_vol%C3%BAmenes"><span class="tocnumber">6.3</span> <span class="toctext">Renombrar volúmenes</span></a>
<ul>
<li class="toclevel-3 tocsection-27"><a href="#Renombrar_un_grupo_de_vol%C3%BAmenes"><span class="tocnumber">6.3.1</span> <span class="toctext">Renombrar un grupo de volúmenes</span></a></li>
<li class="toclevel-3 tocsection-28"><a href="#Renombrar_vol%C3%BAmenes_l%C3%B3gicos"><span class="tocnumber">6.3.2</span> <span class="toctext">Renombrar volúmenes lógicos</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-29"><a href="#Eliminar_vol%C3%BAmenes_l%C3%B3gicos"><span class="tocnumber">6.4</span> <span class="toctext">Eliminar volúmenes lógicos</span></a></li>
<li class="toclevel-2 tocsection-30"><a href="#Agregar_un_volumen_f%C3%ADsico_a_un_grupo_de_vol%C3%BAmenes"><span class="tocnumber">6.5</span> <span class="toctext">Agregar un volumen físico a un grupo de volúmenes</span></a></li>
<li class="toclevel-2 tocsection-31"><a href="#Eliminar_una_partici%C3%B3n_de_un_grupo_de_vol%C3%BAmenes"><span class="tocnumber">6.6</span> <span class="toctext">Eliminar una partición de un grupo de volúmenes</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#Desactivar_un_grupo_de_vol%C3%BAmenes"><span class="tocnumber">6.7</span> <span class="toctext">Desactivar un grupo de volúmenes</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#Activar_grupo_de_vol%C3%BAmenes"><span class="tocnumber">6.8</span> <span class="toctext">Activar grupo de volúmenes</span></a></li>
<li class="toclevel-2 tocsection-34"><a href="#Reparar_un_grupo_de_vol%C3%BAmenes_l%C3%B3gicos"><span class="tocnumber">6.9</span> <span class="toctext">Reparar un grupo de volúmenes lógicos</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-35">
<a href="#Tipos_de_vol%C3%BAmenes_l%C3%B3gicos"><span class="tocnumber">7</span> <span class="toctext">Tipos de volúmenes lógicos</span></a>
<ul>
<li class="toclevel-2 tocsection-36">
<a href="#Instant%C3%A1neas/Snapshots"><span class="tocnumber">7.1</span> <span class="toctext">Instantáneas/Snapshots</span></a>
<ul>
<li class="toclevel-3 tocsection-37"><a href="#Configuraci%C3%B3n"><span class="tocnumber">7.1.1</span> <span class="toctext">Configuración</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-38">
<a href="#La_memoria_cach%C3%A9_de_LVM"><span class="tocnumber">7.2</span> <span class="toctext">La memoria caché de LVM</span></a>
<ul>
<li class="toclevel-3 tocsection-39"><a href="#Crear_la_memoria_cach%C3%A9"><span class="tocnumber">7.2.1</span> <span class="toctext">Crear la memoria caché</span></a></li>
<li class="toclevel-3 tocsection-40"><a href="#Eliminar_la_memoria_cach%C3%A9"><span class="tocnumber">7.2.2</span> <span class="toctext">Eliminar la memoria caché</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-41">
<a href="#RAID"><span class="tocnumber">7.3</span> <span class="toctext">RAID</span></a>
<ul>
<li class="toclevel-3 tocsection-42"><a href="#Configurar_RAID"><span class="tocnumber">7.3.1</span> <span class="toctext">Configurar RAID</span></a></li>
<li class="toclevel-3 tocsection-43"><a href="#Configurar_mkinitcpio_para_RAID"><span class="tocnumber">7.3.2</span> <span class="toctext">Configurar mkinitcpio para RAID</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-44"><a href="#Configuraci%C3%B3n_gr%C3%A1fica"><span class="tocnumber">8</span> <span class="toctext">Configuración gráfica</span></a></li>
<li class="toclevel-1 tocsection-45">
<a href="#Soluci%C3%B3n_de_problemas"><span class="tocnumber">9</span> <span class="toctext">Solución de problemas</span></a>
<ul>
<li class="toclevel-2 tocsection-46"><a href="#Problemas_de_arranque/apagado_debido_a_lvmetad_desactivado"><span class="tocnumber">9.1</span> <span class="toctext">Problemas de arranque/apagado debido a lvmetad desactivado</span></a></li>
<li class="toclevel-2 tocsection-47"><a href="#Las_%C3%B3rdenes_LVM_no_funcionan"><span class="tocnumber">9.2</span> <span class="toctext">Las órdenes LVM no funcionan</span></a></li>
<li class="toclevel-2 tocsection-48"><a href="#No_se_muestran_los_vol%C3%BAmenes_l%C3%B3gicos"><span class="tocnumber">9.3</span> <span class="toctext">No se muestran los volúmenes lógicos</span></a></li>
<li class="toclevel-2 tocsection-49"><a href="#LVM_sobre_un_medio_extra%C3%ADble"><span class="tocnumber">9.4</span> <span class="toctext">LVM sobre un medio extraíble</span></a></li>
<li class="toclevel-2 tocsection-50"><a href="#Al_redimensionar_un_volumen_l%C3%B3gico_contiguo_falla"><span class="tocnumber">9.5</span> <span class="toctext">Al redimensionar un volumen lógico contiguo falla</span></a></li>
<li class="toclevel-2 tocsection-51"><a href="#La_orden_%C2%ABgrub-mkconfig%C2%BB_informa_del_error_%C2%ABunknown_filesystem%C2%BB"><span class="tocnumber">9.6</span> <span class="toctext">La orden «grub-mkconfig» informa del error «unknown filesystem»</span></a></li>
<li class="toclevel-2 tocsection-52"><a href="#Dispositivo_de_volumen_ra%C3%ADz_aprovisionado_para_agotar_tiempo_de_espera"><span class="tocnumber">9.7</span> <span class="toctext">Dispositivo de volumen raíz aprovisionado para agotar tiempo de espera</span></a></li>
<li class="toclevel-2 tocsection-53"><a href="#Demora_al_apagar"><span class="tocnumber">9.8</span> <span class="toctext">Demora al apagar</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-54"><a href="#V%C3%A9ase_tambi%C3%A9n"><span class="tocnumber">10</span> <span class="toctext">Véase también</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Bloques_para_construir_LVM">Bloques para construir LVM</span></h2>
<p><i>Logical Volume Management</i> (en adelante LVM, siglas en inglés) hace uso de la función <a rel="nofollow" class="external text" href="http://sources.redhat.com/dm/">device-mapper</a> del kernel de Linux para proporcionar un sistema de particiones independientes de la estructura subyacente del disco. Con LVM es posible crear un espacio de almacenamiento abstracto así como distintas «particiones virtuales», por lo que es más fácil de <a href="#Redimensionar_vol%C3%BAmenes">agrandar/encoger</a> particiones (siempre sujeto a posibles limitaciones de su sistema de archivos).
</p>
<p>Las particiones virtuales permiten añadir/eliminar particiones sin tener que preocuparse acerca de si se tiene suficiente espacio contiguo en un disco concreto, ni quedar atrapado en el fdisking de un disco en uso (y preguntándose si el kernel está utilizando una tabla de particiones vieja o nueva), ni tener que mover otras particiones en el camino. Esto es un asunto que afecta estrictamente a la facilidad de gestión: LVM no proporciona ninguna seguridad.
</p>
<p>Los bloques básicos que construyen LVM son:
</p>
<dl>
<dt>Physical volume —<i>volúmenes físicos</i>— (en adelante PV)</dt>
<dd>Nodo de dispositivo de bloque de Unix, utilizable para almacenamiento por LVM. Ejemplos: un disco duro, una <a href="/title/Partitioning_(Espa%C3%B1ol)" title="Partitioning (Español)">partición</a> MBR o GPT, un archivo loopback, un dispositivo mapeador de dispositivos (por ejemplo, <a href="/title/Dm-crypt_(Espa%C3%B1ol)" title="Dm-crypt (Español)">dm-crypt (Español)</a>). Alberga un encabezado LVM.</dd>
</dl>
<dl>
<dt>Volume group —<i>grupo de volúmenes</i>— (en adelante VG)</dt>
<dd>Grupo de volúmenes físicos que sirve de contenedor para volúmenes lógicos. Las extensiones físicas se asignan desde un grupo de volúmenes para un volumen lógico.</dd>
</dl>
<dl>
<dt>Logical volume —<i>volúmenes lógicos</i>— (en adelante LV)</dt>
<dd>«Partición virtual/lógica» que reside en un grupo de volúmenes y está compuesta de extensiones físicas. Los volúmenes lógicos son dispositivos de bloque de Unix análogos a las particiones físicas, por ejemplo, se pueden formatear directamente con un <a href="/title/File_systems_(Espa%C3%B1ol)" title="File systems (Español)">sistema de archivos</a>.</dd>
</dl>
<dl>
<dt>Physical extent —<i>extensiones físicas</i>— (en adelante PE)</dt>
<dd>La extensión contigua más pequeña (por defecto 4 MiB) en el volumen físico que se puede asignar a un volumen lógico. Piense en las extensiones físicas como partes de los volúmenes físicos que pueden asignarse a cualquier volúmen lógico.</dd>
</dl>
<p>Ejemplo:
</p>
<pre><b> Discos físicos</b>

  Disco1 (/dev/sda):
     _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
    |Partición1 50 GiB (Volumen físico) |Partición2 80 GiB (Volumen físico)   |
    |/dev/sda1                          |/dev/sda2                            |
    |_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _|_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _  _ _ |
                                    
  Disco2 (/dev/sdb):
     _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
    |Partición1 120 GiB (Volumen físico)                |
    |/dev/sdb1                                          |
    | _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ __ _ _|
</pre>
<pre><b>Volúmenes lógicos LVM</b>

  Grupo de volumen1 (/dev/MyStorage/ = /dev/sda1 + /dev/sda2 + /dev/sdb1):
     _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
    |Volumen lógico1 15 GiB  |Volumen lógico2 35 GiB      |Volumen lógico3 200 GiB              |
    |/dev/MyVolGroup/rootvol |/dev/MyVolGroup/homevol     |/dev/MyVolGroup/mediavol             |
    |_ _ _ _ _ _ _ _ _ _ _ _ |_ _ _ _ _ _ _ _ _ _ _ _ _ _ |_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _|
</pre>
<h2><span class="mw-headline" id="Ventajas">Ventajas</span></h2>
<p>LVM le da más flexibilidad que la simple partición de un disco duro para:
</p>
<ul>
<li>Poder utilizar cualquier número de discos como un gran disco.</li>
<li>Tener volúmenes lógicos estirados sobre varios discos.</li>
<li>Crear pequeños volúmenes lógicos y cambiar su tamaño «dinámicamente», cuando se llenen.</li>
<li>Cambiar el tamaño de los volúmenes lógicos sin importar su orden en el disco. No depende de la posición del volumen lógico dentro del grupo de volúmenes, ni hay necesidad de asegurar el espacio disponible circundante.</li>
<li>Redimensionar/crear/borrar el tamaño de los volúmenes lógicos y físicos en línea. Los sistemas de archivos en ellos todavía tendrán que ser redimensionados, pero algunos (como ext4) apoyan el cambio de tamaño en línea.</li>
<li>Migración en línea/vivo de volumenes lógicos, siendo utilizado por los servicios para diferentes discos sin tener que reiniciar los servicios.</li>
<li>Realizar instantáneas que permiten hacer copias de respaldo del sistema de archivos, mientras se mantiene el tiempo de inactividad del servicio a un mínimo.</li>
<li>Soporte para albergar distintos mapeadores de dispositivos, incluido el cifrado del sistema de archivos transparente y almacenamiento en caché de los datos de uso frecuente. Esto permite crear un sistema con (uno o más) discos físicos (cifrados con LUKS) y <a href="/title/Dm-crypt_(Espa%C3%B1ol)/Encrypting_an_entire_system_(Espa%C3%B1ol)#LVM_sobre_LUKS" title="Dm-crypt (Español)/Encrypting an entire system (Español)">LVM en la parte superior</a> para permitir el cambio de tamaño y la administración de volúmenes separados (por ejemplo,  para <code>/</code>, <code>/home</code>, <code>/backup</code>, etc.) sin la molestia de introducir una clave varias veces al arrancar.</li>
</ul>
<h2><span class="mw-headline" id="Desventajas">Desventajas</span></h2>
<ul>
<li>Los pasos adicionales en la configuración del sistema, que lo hace más complicado.</li>
<li>Si tiene un arranque dual, tenga en cuenta que Windows no es compatible con LVM; no podrá acceder a ninguna partición LVM desde Windows.</li>
</ul>
<h2><span class="mw-headline" id="Primeros_pasos">Primeros pasos</span></h2>
<p>Asegúrese de tener <a href="/title/Help:Reading_(Espa%C3%B1ol)#Instalaci%C3%B3n_de_paquetes" title="Help:Reading (Español)">instalado</a> el paquete <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lvm2">lvm2</a></span>.
</p>
<h2><span class="mw-headline" id="Instalar_Arch_Linux_sobre_LVM">Instalar Arch Linux sobre LVM</span></h2>
<p>Se deben crear los volúmenes LVM entre el <a href="/title/Partitioning_(Espa%C3%B1ol)" title="Partitioning (Español)">particionado</a> y el <a href="/title/File_systems_(Espa%C3%B1ol)#Crear_un_sistema_de_archivos" title="File systems (Español)">formateado</a> durante el  <a href="/title/Installation_guide_(Espa%C3%B1ol)" title="Installation guide (Español)">procedimiento de instalación</a>. En lugar de dar formato directamente a una partición para que sea su sistema de archivos root, esta operación se hará dentro de un volumen lógico (LV). 
</p>
<p>Remítase primero a «Primeros pasos».
</p>
<p>He aquí un breve resumen:
</p>
<ul>
<li>Cree la <a href="/title/Partitioning_(Espa%C3%B1ol)" title="Partitioning (Español)">partición(s)</a> donde residirá su volumen físico (PV).</li>
<li>Cree los volúmenes físicos (PV). Si se tiene un disco lo mejor es simplemente crear un volumen físico en una partición grande. Si tiene varios discos se pueden crear particiones en cada uno de ellos y crear un volumen físico en cada partición.</li>
<li>Cree el grupo de volúmenes (VG) y asocie todos los volúmenes físicos (PV) al mismo.</li>
<li>Cree volúmenes lógicos (LV) dentro de su grupo de volúmenes (VG).</li>
<li>Continúe con el paso «Formatear las particiones» de <a href="/title/Installation_guide_(Espa%C3%B1ol)#Formatear_las_particiones" title="Installation guide (Español)">Installation guide (Español)#Formatear las particiones</a>.</li>
<li>Cuando llegue al paso «Crear entorno inicial ramdisk» en la guía de instalación, agregue el hook <code>lvm2</code> a <code>/etc/mkinitcpio.conf</code> (vea detalles más abajo ).</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Advertencia:</strong> <code>/boot</code> no puede residir en LVM cuando se utiliza un gestor de arranque que no soporta LVM. Puede crear una partición <code>/boot</code> separada y formatearla directamente. Que se conozca, solo <a href="/title/GRUB_(Espa%C3%B1ol)" title="GRUB (Español)">GRUB (Español)</a> soporta LVM.</div>
<h3><span class="mw-headline" id="Crear_particiones">Crear particiones</span></h3>
<p>Es necesario <a href="/title/Partitioning_(Espa%C3%B1ol)" title="Partitioning (Español)">particionar</a> el dispositivo  antes de configurar LVM.
</p>
<p>Cree las particiones:
</p>
<ul>
<li>Si utiliza la tabla de particionado Master Boot Record, ajuste el <a href="https://en.wikipedia.org/wiki/Partition_type" class="extiw" title="wikipedia:Partition type">ID del tipo de partición</a> a <code>8e</code> (tipo de partición <code>Linux LVM</code> en <i>fdisk</i>).</li>
<li>Si utiliza la tabla de particionado GUID, ajuste el <a href="https://en.wikipedia.org/wiki/GUID_Partition_Table#Partition_type_GUIDs" class="extiw" title="wikipedia:GUID Partition Table">ID del tipo de partición</a> a <code>E6D6D379-F507-44C2-A23C-238F2A3DF928</code> (tipo de partición <code>Linux LVM</code> en <i>fdisk</i> y <code>8e00</code> en <i>gdisk</i>).</li>
</ul>
<h3>
<span id="Crear_vol.C3.BAmenes_f.C3.ADsicos"></span><span class="mw-headline" id="Crear_volúmenes_físicos">Crear volúmenes físicos</span>
</h3>
<p>Para listar todos los dispositivos capaces de ser utilizados como un volumen físico, lance:
</p>
<pre># lvmdiskscan
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Advertencia:</strong> asegúrese de indicar bien el dispositivo correcto, o de lo contrario la ejecución de las órdenes de abajo se traducirán en la perdidad de sus datos.</div>
<p>Cree un volumen físico en ellos:
</p>
<pre># pvcreate <i>DISPOSITIVO</i>
</pre>
<p>Esta orden crea una cabecera en cada dispositivo para que se pueda utilizar para LVM. Tal como se define en <a href="#Bloques_para_construir_LVM">#Bloques para construir LVM</a>, el <i>DISPOSITIVO</i> puede ser cualquier <a href="/title/Block_device_(Espa%C3%B1ol)" class="mw-redirect" title="Block device (Español)">dispositivo de bloque</a>, por ejemplo, un disco <code>/dev/sda</code>), una partición <code>/dev/sda2</code> o un dispositivo Loopback.
</p>
<p>Por ejemplo:
</p>
<pre># pvcreate /dev/sda2
</pre>
<p>Puede hacer un seguimiento de los volúmenes físicos creados con:
</p>
<pre># pvdisplay
</pre>
<p>También puede obtener información resumida sobre volúmenes físicos con:
</p>
<pre># pvscan
	
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Sugerencia:</strong> si tiene problemas con una firma de disco preexistente, puede eliminarla utilizando <a href="/title/Wipefs" class="mw-redirect" title="Wipefs">wipefs</a>.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> si se utiliza un disco SSD sin particionarlo primero, utilice <code>pvcreate --dataalignment 1m /dev/sda</code> (para el tamaño de bloque de borrado de &lt; 1MiB), véase por ejemplo  <a rel="nofollow" class="external text" href="https://serverfault.com/questions/356534/ssd-erase-block-size-lvm-pv-on-raw-device-alignment">esto</a>.</div>
<h3>
<span id="Crear_grupo_de_vol.C3.BAmenes"></span><span class="mw-headline" id="Crear_grupo_de_volúmenes">Crear grupo de volúmenes</span>
</h3>
<p>El siguiente paso será crear un grupo de volúmenes sobre el volumen físico:
</p>
<p>Lo primero que se necesita es crear un grupo de volúmenes sobre uno de los volúmenes físicos:
</p>
<pre># vgcreate &lt;<i>grupo_de_volúmenes</i>&gt; &lt;<i>volumen_físico</i>&gt;
</pre>
<p>Por ejemplo:
</p>
<pre># vgcreate VolGroup00 /dev/sda2
</pre>
<p>A continuación, puede añadir a dicho grupo de volúmenes tantos volúmenes físicos como desee tener en el mismo (a modo de una sola unidad):
</p>
<pre># vgextend &lt;<i>grupo_de_volúmenes</i>&gt; &lt;<i>volumen_físico</i>&gt;
# vgextend &lt;<i>grupo_de_volúmenes</i>&gt; &lt;<i>otro_volumen_físico</i>&gt;
# ...
</pre>
<p>Por ejemplo:
</p>
<pre># vgextend VolGroup00 /dev/sdb1
# vgextend VolGroup00 /dev/sdc
</pre>
<p>Puede hacer un seguimiento de cómo su grupo de volúmenes ha crecido con:
</p>
<pre># vgdisplay
</pre>
<p>Esto también es lo que haría si quisiera agregar un disco a un RAID o grupo de réplica con discos fallidos.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> se pueden crear más de un grupo de volúmenes si es necesario, pero entonces no tendrá todo su almacenamiento presente como si fuera un disco.</div>
<h3><span class="mw-headline" id="Crear_en_un_solo_paso">Crear en un solo paso</span></h3>
<p>LVM le permite la creación de un grupo de volúmenes sobre varios volúmenes físicos en un solo paso. Por ejemplo, para crear el grupo VolGroup00 con los tres dispositivos mencionados anteriormente, puede ejecutar:
</p>
<pre># vgcreate VolGroup00 /dev/sda2 /dev/sdb1 /dev/sdc
</pre>
<p>Esta orden configurará primero las tres particiones como volúmenes físicos (si es necesario) y luego creará el grupo de volúmenes con los tres volúmenes físicos. La orden le advertirá si detecta un sistema de archivos existente en cualquiera de los dispositivos.
</p>
<h3>
<span id="Crear_vol.C3.BAmenes_l.C3.B3gicos"></span><span class="mw-headline" id="Crear_volúmenes_lógicos">Crear volúmenes lógicos</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Sugerencia:</strong> si desea utilizar instantáneas, volúmenes lógicos para almacenamiento caché, volúmenes lógicos de aprovisionamiento ligero o RAID, consulte <a href="#Tipos_de_vol%C3%BAmenes_l%C3%B3gicos">#Tipos de volúmenes lógicos</a>.</div>
<p>Ahora necesitaremos crear volúmenes lógicos en el mencionado grupo de volúmenes. Para ello debe utilizar la siguiente orden, proporcionándole como parámetros, su tamaño (-L), el grupo de volúmenes al que pertenecerá, y el nombre (-n) que queremos darle al nuevo volumen lógico: 
</p>
<pre># lvcreate -L &lt;<i>tamaño</i>&gt; &lt;<i>grupo_de_volúmenes</i>&gt; -n &lt;<i>volumen_lógico</i>&gt;
</pre>
<p>Por ejemplo:
</p>
<pre># lvcreate -L 10G VolGroup00 -n lvolhome
</pre>
<p>Luego, podrá acceder al nuevo volumen lógico creado con <code>/dev/VolGroup00/lvolhome</code>. Igual que sucede con los grupos de volúmenes, puede ponerle el nombre que desee al volumen lógico cuando lo crea, salvo algunas excepciones enumeradas en <span class="plainlinks archwiki-template-man" title="$ man 8 lvm"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lvm.8#VALID_NAMES">lvm(8) § VALID_NAMES</a></span>.
</p>
<p>También puede especificar uno o más volúmenes físicos para limitar donde quiere que LVM asigne los datos. Por ejemplo, es posible que desee crear un volumen lógico para el sistema de archivos raíz en SSD (si es pequeño), y el volumen de su home en una unidad mecánica más grande y lenta. Tan solo tiene que añadir el dispositivo del volumen físico a la línea de órdenes, por ejemplo:
</p>
<pre># lvcreate -L 10G VolGroup00 -n lvolhome /dev/sdc1
</pre>
<p>Si desea ocupar todo el espacio libre que queda del grupo de volúmenes, utilice la siguiente orden:
</p>
<pre># lvcreate -l +100%FREE  &lt;<i>grupo_de_volúmenes</i>&gt; -n &lt;<i>volumen_lógico</i>&gt;
</pre>
<p>Puede hacer un seguimiento de los volúmenes lógicos creados con:
</p>
<pre># lvdisplay
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> es posible que deba cargar el módulo del kernel <i>device-mapper</i> (<code>modprobe dm_mod</code>) para que las órdenes anteriores puedan tener éxito.</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Sugerencia:</strong> se puede comenzar creando volúmenes lógicos relativamente pequeños y ampliarlos más adelante si fuera necesario. Para simplificar, deje un poco de espacio libre en el grupo de volúmenes para tener margen para su expansión.</div>
<h3>
<span id="Crear_sistemas_de_archivos_y_montar_los_vol.C3.BAmenes_l.C3.B3gicos"></span><span class="mw-headline" id="Crear_sistemas_de_archivos_y_montar_los_volúmenes_lógicos">Crear sistemas de archivos y montar los volúmenes lógicos</span>
</h3>
<p>Sus volúmenes lógicos deberian encontrarse en  <code>/dev/NombredelGrupodedeVolúmenes/</code>. De no encontrarse, utilice la siguiente orden para cargar el modulo que crea nodos de dispositivos y hacer que los grupos de volúmenes estén disponibles:
</p>
<pre># modprobe dm-mod
# vgscan
# vgchange -ay
</pre>
<p>Ahora puede crear el sistema de archivos en los volúmenes lógicos, y montarlos como particiones normales (si está instalando Arch, remítase a <a href="/title/File_systems_(Espa%C3%B1ol)#Montar_un_sistema_de_archivos" title="File systems (Español)">montar las particiones</a> para obtener información adicional):
</p>
<pre># mkfs.&lt;<i>tipo_sistema_archivos</i>&gt; /dev/&lt;<i>grupo_de_volúmenes</i>&gt;/&lt;<i>volumen_lógico</i>&gt;
# mount /dev/&lt;<i>grupo_de_volúmenes</i>&gt;/&lt;<i>volumen_lógico</i>&gt; /&lt;<i>punto_de_montaje</i>&gt;
</pre>
<p>Por ejemplo:
</p>
<pre># mkfs.ext4 /dev/VolGroup00/lvolhome
# mount /dev/VolGroup00/lvolhome /home
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Advertencia:</strong> al elegir los puntos de montaje, solo tiene que seleccionar los volúmenes lógicos recién creados (utilice: <code>/dev/Volgroup00/lvolhome</code>). <b>No</b> seleccione las particiones reales sobre las que se crearon los volúmenes lógicos (por tanto, no utilice: <code>/dev/sda2</code>).</div>
<h3><span class="mw-headline" id="Configurar_mkinitcpio">Configurar mkinitcpio</span></h3>
<p>En caso de que su sistema de archivos raíz esté sobre LVM, tendrá que activar los hooks de <a href="/title/Mkinitcpio_(Espa%C3%B1ol)" title="Mkinitcpio (Español)">mkinitcpio (Español)</a> apropiados, de lo contrario su sistema podría no arrancar. Active:
</p>
<ul>
<li>
<code>udev</code> y <code>lvm2</code> predeterminados para initramfs basado en busybox.</li>
<li>
<code>systemd</code> y <code>sd-lvm2</code> para initramfs basado en systemd.</li>
</ul>
<p><code>udev</code> está presente de forma predeterminada. Edite el archivo e inserte <code>lvm2</code> entre <code>block</code> y <code>filesystems</code> como sigue:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/mkinitcpio.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">HOOKS=(base <b>udev</b> ... block <b>lvm2</b> filesystems)</pre>
<p>Para initramfs basado en systemd :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/mkinitcpio.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">HOOKS=(base <b>systemd</b> ... block <b>sd-lvm2</b> filesystems)</pre>
<p>Después, puede continuar con las instrucciones de instalación normales en el paso <a href="/title/Mkinitcpio_(Espa%C3%B1ol)#Creaci%C3%B3n_de_la_imagen_y_activaci%C3%B3n" title="Mkinitcpio (Español)">crear una imagen ramdisk inicial</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Sugerencia:</strong> 
<ul>
<li>Los hooks <code>lvm2</code> y <code>sd-lvm2</code> serán instalados por el paquete <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lvm2">lvm2</a></span>, no por <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mkinitcpio">mkinitcpio</a></span>. Si está ejecutando <i>mkinitcpio</i> en un entrono <i>arch-chroot</i> para una nueva instalación, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lvm2">lvm2</a></span> debe estar instalado dentro del entorno <i>arch-chroot</i> para <i>mkinitcpio</i> con el fin de encontrar el hook <code>lvm2</code> o <code>sd-lvm2</code>. Si <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lvm2">lvm2</a></span> se instala fuera del entorno <i>arch-chroot</i>, <i>mkinitcpio</i> generará la salida <code>Error: Hook 'lvm2' cannot be found</code>.</li>
<li>Si su sistema de archivos raíz está en LVM sobre RAID, consulte <a href="#Configurar_mkinitcpio_para_RAID">#Configurar mkinitcpio para RAID</a>.</li>
</ul>
</div>
<h3><span class="mw-headline" id="Opciones_del_kernel">Opciones del kernel</span></h3>
<p>Si el sistema de archivos raíz reside en un volumen lógico, el <a href="/title/Kernel_parameters_(Espa%C3%B1ol)" title="Kernel parameters (Español)">Kernel parameters (Español)</a> <code>root=</code> debe apuntar al dispositivo mapeado, por ejemplo <code>/dev/<i>&lt;nombre_grupodevolúmenes&gt;</i>/<i>&lt;nombre_volumenlógico&gt;</i></code>.
</p>
<p>También podría ser necesario <code>dolvm</code>.
</p>
<h2>
<span id="Operaciones_sobre_los_vol.C3.BAmenes"></span><span class="mw-headline" id="Operaciones_sobre_los_volúmenes">Operaciones sobre los volúmenes</span>
</h2>
<h3><span class="mw-headline" id="Opciones_avanzadas">Opciones avanzadas</span></h3>
<p>Puede restringir los volúmenes que se activan de forma automática mediante el establecimiento de la variable <code>auto_activation_volume_list</code> en el archivo <code>/etc/lvm/lvm.conf</code>. En caso de duda, deje esta opción comentada.
</p>
<h3>
<span id="Redimensionar_vol.C3.BAmenes"></span><span class="mw-headline" id="Redimensionar_volúmenes">Redimensionar volúmenes</span>
</h3>
<h4>
<span id="Vol.C3.BAmenes_f.C3.ADsicos"></span><span class="mw-headline" id="Volúmenes_físicos">Volúmenes físicos</span>
</h4>
<p>Después de aumentar o antes de reducir el tamaño de un dispositivo que tiene sobre él un volumen físico, necesita aumentar o reducir el tamaño del volumen físico mediante <code>pvresize</code>.
</p>
<h5><span class="mw-headline" id="Agrandar">Agrandar</span></h5>
<p>Para ampliar el volumen físico existente sobre el dispositivo <code>/dev/sda1</code>, después de aumentar dicha <a href="/title/Partitioning_(Espa%C3%B1ol)" title="Partitioning (Español)">partición</a>, ejecute:
</p>
<pre># pvresize /dev/sda1
</pre>
<p>Esto detectará automáticamente el nuevo tamaño del dispositivo y extenderá el volumen físico a su máximo.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> esta orden se puede ejecutar mientras el volumen está en línea.</div>
<h5><span class="mw-headline" id="Encoger">Encoger</span></h5>
<p>Para reducir un volumen físico antes de reducir el dispositivo subyacente, agregue el parámetro <code>--setphysicalvolumesize <i>&lt;tamaño&gt;</i></code> a la orden, <i>por ejemplo</i>:
</p>
<pre># pvresize --setphysicalvolumesize 40G /dev/sda1
</pre>
<p>La orden anterior puede arrojar el siguiente error:
</p>
<pre> /dev/sda1: cannot resize to 25599 extents as later ones are allocated.
 0 physical volume(s) resized / 1 physical volume(s) not resized
</pre>
<p>De hecho <code>pvresize</code> se negará a reducir un volumen físico si tiene asignadas extensiones adyacentes a lo que sería su nuevo final. Se tiene que ejecutar <a href="#Mover_extensiones_f%C3%ADsicas">pvmove</a> de antemano para reubicar estas extensiones en el grupo de volúmenes a otro lugar, si no hay suficiente espacio libre.
</p>
<h6>
<span id="Mover_extensiones_f.C3.ADsicas"></span><span class="mw-headline" id="Mover_extensiones_físicas">Mover extensiones físicas</span>
</h6>
<p>Antes de mover extensiones libres al final del volumen, se debe ejecutar <code># pvdisplay -v -m</code> para ver los segmentos físicos. En el siguiente ejemplo, hay un volumen físico sobre <code>/dev/sdd1</code>, un grupo de volumen <code>vg1</code> y un volumen lógico <code>backup</code>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># pvdisplay -v -m</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">    Finding all volume groups.
    Using physical volume(s) on command line.
  --- Physical volume ---
  PV Name               /dev/sdd1
  VG Name               vg1
  PV Size               1.52 TiB / not usable 1.97 MiB
  Allocatable           yes 
  PE Size               4.00 MiB
  Total PE              399669
  Free PE               153600
  Allocated PE          246069
  PV UUID               MR9J0X-zQB4-wi3k-EnaV-5ksf-hN1P-Jkm5mW
   
  --- Physical Segments ---
  Physical extent 0 to 153600:
    FREE
  Physical extent 153601 to 307199:
    Logical volume	/dev/vg1/backup
    Logical extents	1 to 153599
  Physical extent 307200 to 307200:
    FREE
  Physical extent 307201 to 399668:
    Logical volume	/dev/vg1/backup
    Logical extents	153601 to 246068
</pre>
<p>Se puede observar que el espacio FREE (LIBRE) se intercala por todo el volumen. Para reducir el tamaño del volumen físico, primero tenemos que mover todos los segmentos utilizados al comienzo.
</p>
<p>Aquí, el primer segmento libre es desde 0 a 153.600, lo cual nos deja con 153.601 extensiones libres. Ahora podemos mover este número de segmentos desde la última extensión física de la primera. La orden sería así:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># pvmove --alloc anywhere /dev/sdd1:307201-399668 /dev/sdd1:0-92467</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/dev/sdd1: Moved: 0.1 %
/dev/sdd1: Moved: 0.2 %
...
/dev/sdd1: Moved: 99.9 %
/dev/sdd1: Moved: 100,0%
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> 
<ul>
<li>Esta orden indica que se muevan 399.668 - 307.201 + 1 = 92.468 extensiones físicas <b>desde</b> el último segmento <b>al</b> primer segmento. Esto es posible ya que el primer segmento cerrado LIBRE es de 153.600 extensiones físicas, que puede contener las 92.467 - 0 + 1 = 92.468 extensiones físicas trasladadas.</li>
<li>La opción <code>--alloc anywhere</code> se utiliza cuando movemos extensiones físicas dentro de la misma partición. En caso de particiones diferentes, la orden sería algo como esto:<pre># pvmove /dev/sdb1:1000-1999 /dev/sdc1:0-999</pre>
</li>
<li>El traslado toma su tiempo (una/dos horas) en el caso de gran tamaño. Puede ser una buena idea ejecutar esta orden en una sesión <a href="/title/Tmux" title="Tmux">Tmux</a> o <a href="/title/GNU_Screen" title="GNU Screen">GNU Screen</a>. Cualquier parada no deseada del proceso puede ser fatal.</li>
<li>Una vez finalizada la operación, ejecute <a href="/title/Fsck" title="Fsck">fsck</a> para asegurarse de que su sistema de archivos es válido.</li>
</ul>
</div>
<h6>
<span id="Redimensionar_volumen_f.C3.ADsico"></span><span class="mw-headline" id="Redimensionar_volumen_físico">Redimensionar volumen físico</span>
</h6>
<p>Una vez que todos sus segmentos físicos libres estén en las últimas extensiones físicas, ejecute <code>vgdisplay</code> y vea su extensión física libre.
</p>
<p>Entonces, podrá ejecutar de nuevo la orden:
</p>
<pre># pvresize --setphysicalvolumesize <i>tamaño</i> <i>VolumenFísico</i>
</pre>
<p>Vea el resultado:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># pvs</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">  PV         VG   Fmt  Attr PSize    PFree 
  /dev/sdd1  vg1  lvm2 a--     1t     500g
</pre>
<h6>
<span id="Redimensionar_partici.C3.B3n"></span><span class="mw-headline" id="Redimensionar_partición">Redimensionar partición</span>
</h6>
<h4>
<span id="Vol.C3.BAmenes_l.C3.B3gicos"></span><span class="mw-headline" id="Volúmenes_lógicos">Volúmenes lógicos</span>
</h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> <span class="plainlinks archwiki-template-man" title="$ man 8 lvresize"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lvresize.8">lvresize(8)</a></span> proporciona, más o menos, las mismas opciones que las órdenes especializadas de <span class="plainlinks archwiki-template-man" title="$ man 8 lvextend"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lvextend.8">lvextend(8)</a></span> y <span class="plainlinks archwiki-template-man" title="$ man 8 lvreduce"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lvreduce.8">lvreduce(8)</a></span>, al tiempo que permite hacer ambos tipos de operaciones. A pesar de esto, todos las utilidades ofrecen una opción <code>-r, --resizefs</code> que permite cambiar el tamaño del sistema de archivos junto con el volumen lógico, mediante <code>fsadm(8)</code> (que soporta <i>ext2</i>, <a href="/title/Ext3" title="Ext3">ext3</a>, <a href="/title/Ext4" title="Ext4">ext4</a>, <i>ReiserFS</i> y <a href="/title/XFS" title="XFS">XFS</a>). Por lo tanto, puede ser más fácil simplemente utilizar <code>lvresize</code> para ambas operaciones y utilizar <code>--resizefs</code> para simplificar un poco las cosas, excepto si tiene necesidades específicas o desea tener un control total sobre el proceso.</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Advertencia:</strong> si bien la ampliación de un sistema de archivos, a menudo, puede hacerse en línea (<i>es decir</i> mientras está montado), incluso para la partición raíz, la reducción, casi siempre, requerirá primero desmontar el sistema de archivos para evitar pérdida de datos. Asegúrese de que su sistema de archivos sea compatible con lo que está tratando de hacer.</div>
<h5>
<span id="Cambiar_el_tama.C3.B1o_del_volumen_l.C3.B3gico_y_del_sistema_de_archivos_a_la_vez"></span><span class="mw-headline" id="Cambiar_el_tamaño_del_volumen_lógico_y_del_sistema_de_archivos_a_la_vez">Cambiar el tamaño del volumen lógico y del sistema de archivos a la vez</span>
</h5>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> solo los <a href="/title/File_systems" title="File systems">sistemas de archivos</a> <i>ext2</i>, <a href="/title/Ext3" title="Ext3">ext3</a>, <a href="/title/Ext4" title="Ext4">ext4</a>, <i>ReiserFS</i> y <a href="/title/XFS" title="XFS">XFS</a> son ​​compatibles. Para un tipo diferente de sistema de archivos, consulte <a href="#Cambiar_el_tama%C3%B1o_del_volumen_l%C3%B3gico_y_del_sistema_de_archivos_separadamente">#Cambiar el tamaño del volumen lógico y del sistema de archivos separadamente</a>.</div>
<p>Extienda el volumen lógico <code>mediavol</code> del grupo de volúmenes <code>MyVolGroup</code> en 10 GiB  y redimensione <i>a la vez</i> su sistema de archivos :
</p>
<pre># lvresize -L +10G --resizefs MyVolGroup/mediavol
</pre>
<p>Establezca el tamaño del volumen lógico <code>mediavol</code> presente en <code>MyVolGroup</code> a 15 GiB y redimensione <i>a la vez</i> su sistema de archivos:
</p>
<pre># lvresize -L 15G --resizefs MyVolGroup/mediavol
</pre>
<p>Si desea ocupar todo el espacio libre con un grupo de volúmenes, utilice la siguiente orden:
</p>
<pre># lvresize -l +100%FREE --resizefs MyVolGroup/mediavol
</pre>
<p>Consulte <span class="plainlinks archwiki-template-man" title="$ man 8 lvresize"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lvresize.8">lvresize(8)</a></span> para obtener más opciones detalladas.
</p>
<h5>
<span id="Cambiar_el_tama.C3.B1o_del_volumen_l.C3.B3gico_y_del_sistema_de_archivos_separadamente"></span><span class="mw-headline" id="Cambiar_el_tamaño_del_volumen_lógico_y_del_sistema_de_archivos_separadamente">Cambiar el tamaño del volumen lógico y del sistema de archivos separadamente</span>
</h5>
<p>Para los sistemas de archivos no admitidos por <span class="plainlinks archwiki-template-man" title="$ man 8 fsadm"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/fsadm.8">fsadm(8)</a></span> necesitará utilizar la <a href="/title/File_systems_(Espa%C3%B1ol)#Tipos_de_sistemas_de_archivos" title="File systems (Español)">utilidad apropiada</a> para cambiar el tamaño del sistema de archivos antes de reducir el volumen lógico o después de expandirlo.
</p>
<p>Para extender el volumen lógico <code>mediavol</code> dentro del grupo de volúmenes <code>MyVolGroup</code> en 2 GiB <i>sin</i> tocar su sistema de archivos:
</p>
<pre># lvresize -L +2G MyVolGroup/mediavol
</pre>
<p>Ahora expanda el sistema de archivos (<a href="/title/Ext4" title="Ext4">ext4</a> en este ejemplo) al tamaño máximo del volumen lógico subyacente:
</p>
<pre># resize2fs /dev/MyVolGroup/mediavol
</pre>
<p>Para reducir el tamaño del volumen lógico <code>mediavol</code> en <code>MyVolGroup</code> en 500 MiB, primero calcule el tamaño del sistema de archivos resultante y reduzca el tamaño del sistema de archivos (<a href="/title/Ext4" title="Ext4">ext4</a> en este ejemplo) al nuevo tamaño:
</p>
<pre># resize2fs /dev/MyVolGroup/mediavol <i>NewSize</i>
</pre>
<p>Una vez encogido el sistema de archivos, reduzca el tamaño del volumen lógico:
</p>
<pre># lvresize -L -500M MyVolGroup/mediavol
</pre>
<p>Consulte <span class="plainlinks archwiki-template-man" title="$ man 8 lvresize"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lvresize.8">lvresize(8)</a></span> para obtener más opciones detalladas.
</p>
<h3>
<span id="Renombrar_vol.C3.BAmenes"></span><span class="mw-headline" id="Renombrar_volúmenes">Renombrar volúmenes</span>
</h3>
<h4>
<span id="Renombrar_un_grupo_de_vol.C3.BAmenes"></span><span class="mw-headline" id="Renombrar_un_grupo_de_volúmenes">Renombrar un grupo de volúmenes</span>
</h4>
<p>Utilice la orden <span class="plainlinks archwiki-template-man" title="$ man 8 vgrename"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/vgrename.8">vgrename(8)</a></span> para cambiar el nombre de un grupo de volúmenes existente.
</p>
<p>Cualquiera de las siguientes órdenes cambia el nombre del grupo de volúmenes existente <code>vg02</code> a <code>my_volume_group</code>
</p>
<pre># vgrename /dev/vg02 /dev/my_volume_group
</pre>
<pre># vgrename vg02 my_volume_group
</pre>
<h4>
<span id="Renombrar_vol.C3.BAmenes_l.C3.B3gicos"></span><span class="mw-headline" id="Renombrar_volúmenes_lógicos">Renombrar volúmenes lógicos</span>
</h4>
<p>Para cambiar el nombre de un volumen lógico existente, utilice la orden <span class="plainlinks archwiki-template-man" title="$ man 8 lvrename"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lvrename.8">lvrename(8)</a></span>.
</p>
<p>Cualquiera de las siguientes órdenes cambia el nombre del volumen lógico <code>lvold</code> presente en el grupo de volúmenes <code>vg02</code> a <code>lvnew</code>.
</p>
<pre># lvrename /dev/vg02/lvold /dev/vg02/lvnew
</pre>
<pre># lvrename vg02 lvold lvnew
</pre>
<h3>
<span id="Eliminar_vol.C3.BAmenes_l.C3.B3gicos"></span><span class="mw-headline" id="Eliminar_volúmenes_lógicos">Eliminar volúmenes lógicos</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Advertencia:</strong> antes de quitar un volumen lógico, asegúrese de mover todos los datos que desee conservar a otro lugar; ¡de lo contrario, se perderán!</div>
<p>En primer lugar, averigüe el nombre del volumen lógico que desea eliminar. Se puede obtener una lista de todos los volúmenes lógicos instalados en el sistema con: 
</p>
<pre># lvs
</pre>
<p>A continuación, busque el punto de montaje del volumen lógico elegido, con:
</p>
<pre>$ lsblk
</pre>
<p>Ahora, desmonte el sistema de archivos del volumen lógico:
</p>
<pre># umount /&lt;<i>punto_montaje</i>&gt;
</pre>
<p>Por último, elimine el volumen lógico: 
</p>
<pre># lvremove &lt;<i>grupo_volúmenes</i>&gt;/&lt;<i>volumen_lógico</i>&gt;
</pre>
<p>Por ejemplo:
</p>
<pre># lvremove VolGroup00/lvolhome
</pre>
<p>Confirme la operación escribiendo <code>y</code>.
</p>
<p>No se olvide actualizar el archivo <code>/etc/fstab</code>.
</p>
<p>Se puede verificar la eliminación del volumen lógico escribiendo <code>lvs</code> con privilegios de root de nuevo (vea el primer paso de esta sección).
</p>
<h3>
<span id="Agregar_un_volumen_f.C3.ADsico_a_un_grupo_de_vol.C3.BAmenes"></span><span class="mw-headline" id="Agregar_un_volumen_físico_a_un_grupo_de_volúmenes">Agregar un volumen físico a un grupo de volúmenes</span>
</h3>
<p>En primer lugar, cree un nuevo volumen físico en el dispositivo de bloque que desea usar, y luego intégrelo en su grupo de volúmenes:
</p>
<pre># pvcreate /dev/sdb1
# vgextend VolGroup00 /dev/sdb1
</pre>
<p>Por supuesto, esto aumentará el número total de extensiones físicas en el grupo de volúmenes, que podrá asignar a los volúmenes lógicos como mejor le parezca.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> se considera una buena práctica tener una <a href="/title/Partitioning_(Espa%C3%B1ol)" title="Partitioning (Español)">tabla de particiones</a> en el soporte de almacenamiento que aloja LVM. Utilice el tipo de código apropiado para su partición: <code>8e</code> para MBR, y <code>8e00</code> para.</div>
<h3>
<span id="Eliminar_una_partici.C3.B3n_de_un_grupo_de_vol.C3.BAmenes"></span><span class="mw-headline" id="Eliminar_una_partición_de_un_grupo_de_volúmenes">Eliminar una partición de un grupo de volúmenes</span>
</h3>
<p>Si ha creado un volumen lógico en la partición, <a href="#Eliminar_vol%C3%BAmenes_l%C3%B3gicos">elimínelo</a> primero.
</p>
<p>Todos los datos de la partición deben ser movidos a otra partición. Afortunadamente, LVM lo hace sencillo:
</p>
<pre># pvmove /dev/sdb1
</pre>
<p>Si quiere tener los datos en un volumen fisico específico, agréguelo como segundo argumento a <code>pvmove</code>:
</p>
<pre># pvmove /dev/sdb1 /dev/sdf1
</pre>
<p>Luego, eliminamos los volúmenes físicos del grupo de volúmenes:
</p>
<pre># vgreduce myVg /dev/sdb1
</pre>
<p>O, eliminamos todos los volúmenes vacíos:
</p>
<pre># vgreduce --all vg0
</pre>
<p>Por ejemplo: si tiene un disco dañado en un grupo que no se puede encontrar porque se eliminó o falló:
</p>
<pre># vgreduce --removemissing --force vg0
</pre>
<p>Por último, si quiere usar la partición para algo más, y quiere evitar a LVM, piense que esa partición es un volumen fisico más:
</p>
<pre># pvremove /dev/sdb1
</pre>
<h3>
<span id="Desactivar_un_grupo_de_vol.C3.BAmenes"></span><span class="mw-headline" id="Desactivar_un_grupo_de_volúmenes">Desactivar un grupo de volúmenes</span>
</h3>
<p>Basta con invocar la orden:
</p>
<pre># vgchange -a n &lt;<i>grupo_de_volúmenes</i>&gt;
</pre>
<p>Esto desactivará el grupo de volúmenes y le permitirá desmontar el contenedor donde está almacenado.
</p>
<h3>
<span id="Activar_grupo_de_vol.C3.BAmenes"></span><span class="mw-headline" id="Activar_grupo_de_volúmenes">Activar grupo de volúmenes</span>
</h3>
<pre># vgchange -a y vg0
</pre>
<p>Esto reactivará el grupo de volúmenes si, por ejemplo, tuvo un fallo de unidad en una réplica y cambió la unidad, al ejecutar <code>pvcreate</code>, <code>vgextend</code> y <code>vgreduce --removemissing --force</code>.
</p>
<h3>
<span id="Reparar_un_grupo_de_vol.C3.BAmenes_l.C3.B3gicos"></span><span class="mw-headline" id="Reparar_un_grupo_de_volúmenes_lógicos">Reparar un grupo de volúmenes lógicos</span>
</h3>
<p>Para iniciar el proceso de reconstrucción de la matriz de réplica degradada en este ejemplo, debe ejecutar:
</p>
<pre># lvconvert --repair /dev/vg0/mirror
</pre>
<p>Puede supervisar el proceso de reconstrucción (Cpy%Sync Column output) con:
</p>
<pre># lvs -a -o +devices
</pre>
<h2>
<span id="Tipos_de_vol.C3.BAmenes_l.C3.B3gicos"></span><span class="mw-headline" id="Tipos_de_volúmenes_lógicos">Tipos de volúmenes lógicos</span>
</h2>
<p>Además de volúmenes lógicos simples, LVM admite instantáneas, volúmenes lógicos para almacenamiento caché, volúmenes lógicos de aprovisionamiento ligero y RAID.
</p>
<h3>
<span id="Instant.C3.A1neas.2FSnapshots"></span><span class="mw-headline" id="Instantáneas/Snapshots">Instantáneas/Snapshots</span>
</h3>
<p>LVM permite tomar instantáneas («<i>snapshots</i>») de su sitema, lo que es mucho más eficiente que las tradicionales copias de respaldo («<i>backup</i>»). Podemos hacer esto usando una politica COW (copy-on-write/<i>copia-cuando-escribe</i>). La instantánea inicial simplemente contiene enlaces fuertes a los inodos de sus datos actuales. Mientras los datos estén descargados, la instantánea simplemente contará con punteros a sus respectivos inodos y no a los datos en sí mismos. Cada vez que se modifica un archivo o un directorio a la que apunte la isntantanea, LVM automaticamente clonará los datos. Por lo tanto, puede tener instantáneas de un sistema de 35 GiB de datos usando solo 2 GiB de espacio libre, mientras sean modificados menos de 2GiB de datos (en el original y en la instantánea). Para poder crear instantáneas necesita tener espacio no asignado en su grupo de volúmenes. La instantánea, como cualquier otro volumen, ocupará espacio en el grupo de volúmenes. Por lo tanto, si planea usar instantáneas para hacer una copia de seguridad de su partición raíz, no asigne el 100% de su grupo de volúmenes para el volumen lógico raíz.
</p>
<h4>
<span id="Configuraci.C3.B3n"></span><span class="mw-headline" id="Configuración">Configuración</span>
</h4>
<p>Los volúmenes lógicos para las instantáneas se crean igual que los normales:
</p>
<pre># lvcreate --size 100M --snapshot --name snap01 /dev/mapper/vg0-pv
</pre>
<p>Con dicho volumen, podrá modificar hasta de 100 MiB de datos, antes de que el volumen para las instantáneas se llene.
</p>
<p>Para revertir el volumen lógico del «volumen físico» modificado al estado en que se tomó la instantánea «snap01», ejecute:
</p>
<pre># lvconvert --merge /dev/vg0/snap01
</pre>
<p>En caso de que el volumen lógico de origen esté activo, la fusión se producirá en el siguiente reinicio (la fusión se puede hacer, incluso, desde un CD Live)
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> la instantánea dejará de existir después de la fusión.</div>
<p>Se pueden tomar también varias instantáneas y cada una se puede combinar con el volumen lógico de origen a voluntad.
</p>
<p>La instantánea se puede montar y respaldar con <b>dd</b> o <b>tar</b>. El tamaño del archivo de respaldo hecho con <b>dd</b> será equivalente al tamaño de los archivos que residen en el volumen de instantánea.
Para restaurar basta con crear una instantánea, montarla y escribir o extraerla de la copia de seguridad. Y luego fusionarla con la de origen.
</p>
<p>Las instantáneas se utilizan principalmente para proporcionar una copia congelada de un sistema de archivos para respaldarlo; una copia de seguridad que tome dos horas ofrece una imagen más coherente del sistema de archivos que una copia de respaldo directamente de la partición.
</p>
<p>Vea <a href="/title/Create_root_filesystem_snapshots_with_LVM" title="Create root filesystem snapshots with LVM">Create root filesystem snapshots with LVM</a> para automatizar la creación de instantáneas límpias del sistema de archivos raíz durante el inicio del sistema para respaldar y restaurar.
</p>
<p><a href="/title/Dm-crypt_(Espa%C3%B1ol)/Encrypting_an_entire_system_(Espa%C3%B1ol)#LVM_sobre_LUKS" title="Dm-crypt (Español)/Encrypting an entire system (Español)">dm-crypt (Español)/Encrypting an entire system (Español)#LVM sobre LUKS</a> y <a href="/title/Dm-crypt_(Espa%C3%B1ol)/Encrypting_an_entire_system_(Espa%C3%B1ol)#LUKS_sobre_LVM" title="Dm-crypt (Español)/Encrypting an entire system (Español)">dm-crypt (Español)/Encrypting an entire system (Español)#LUKS sobre LVM</a>.
</p>
<p>Si tiene volúmenes LVM no activados a través de <a href="/title/Initramfs_(Espa%C3%B1ol)" class="mw-redirect" title="Initramfs (Español)">initramfs (Español)</a>, <a href="/title/Enable_(Espa%C3%B1ol)" class="mw-redirect" title="Enable (Español)">active</a> el servicio <code>lvm-monitoring.service</code>, proporcionado por el paquete <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lvm2">lvm2</a></span>.
</p>
<h3>
<span id="La_memoria_cach.C3.A9_de_LVM"></span><span class="mw-headline" id="La_memoria_caché_de_LVM">La memoria caché de LVM</span>
</h3>
<p>De <span class="plainlinks archwiki-template-man" title="$ man 7 lvmcache"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lvmcache.7">lvmcache(7)</a></span>:
</p>
<dl><dd>El tipo de volumen lógico de caché utiliza un volumen lógico pequeño y rápido para mejorar el rendimiento de un volumen lógico grande y lento. Lo hace almacenando en el volumen lógico más rápido los bloques utilizados con más frecuencia (del volumen lógico grande). LVM se refiere al volumen lógico pequeño y rápido como un volumen lógico que actúa como un contenedor de memoria caché. El volumen lógico lento se llama volumen lógico de origen. Debido a los requisitos de dm-cache (el controlador del kernel), LVM divide aún más el volumen lógico que sirve de contenedor de la memoria caché en dos dispositivos: el volumen lógico para la caché de datos y el volumen lógico para la caché de metadatos. El volumen lógico para la caché de datos es donde se guardan copias de bloques de datos del volumen lógico de origen para aumentar la velocidad. El volumen lógico para la memoria caché de los metadatos contiene la información de recuento que especifica dónde se almacenan los bloques de datos (por ejemplo, en el volumen lógico de origen o en el volumen lógico para la caché de los datos). Los usuarios deben estar familiarizados con estos volúmenes lógicos si desean crear los mejores y más robustos volúmenes lógicos como almacenamientos de caché. Todos estos volúmenes lógicos asociados deben estar en el mismo grupo de volúmenes.</dd></dl>
<h4>
<span id="Crear_la_memoria_cach.C3.A9"></span><span class="mw-headline" id="Crear_la_memoria_caché">Crear la memoria caché</span>
</h4>
<p>El método rápido es crear un volumen físico (si es necesario) en el disco y agregarlo al grupo de volúmenes existente:
</p>
<pre># vgextend dataVG /dev/sdx
</pre>
<p>Cree un contenedor de caché con metadatos automáticos en sdb y convierta el volumen lógico existente (dataLV) a un volumen de almacenamiento caché, todo en un solo paso:
</p>
<pre># lvcreate --type cache --cachemode writethrough -L 20G -n dataLV_cachepool dataVG/dataLV /dev/sdx
</pre>
<p>Obviamente, si desea que su caché sea más grande, puede cambiar el parámetro <code>-L</code> a un tamaño diferente.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Cachemode tiene dos opciones posibles:
<ul>
<li>
<code>writethrough</code> asegura que todos los datos escritos se almacenarán tanto en el volúmen lógico que actúa como contenedor para la memoria caché como en el volúmen lógico de origen. La pérdida de un dispositivo asociado con el volúmen lógico de la memoria caché, en este caso, no significaría la pérdida de ningún dato;</li>
<li>
<code>writeback</code> garantiza un mejor rendimiento, pero a costa de un mayor riesgo de pérdida de datos en caso de que la unidad utilizada para la caché falle.</li>
</ul>
<p>Si no se indica un valor <code>--cachemode</code> específico, el sistema asumirá el parámetro <code>writethrough</code> como predeterminado.
</p>
</div>
<h4>
<span id="Eliminar_la_memoria_cach.C3.A9"></span><span class="mw-headline" id="Eliminar_la_memoria_caché">Eliminar la memoria caché</span>
</h4>
<p>Si alguna vez necesita deshacer la operación anterior en un solo paso :
</p>
<pre># lvconvert --uncache dataVG/dataLV
</pre>
<p>Esto confirma las escrituras pendientes que aún están en la memoria caché para que vuelvan al volumen lógico de origen, luego elimina la caché. Otras opciones están disponibles y se describen en <span class="plainlinks archwiki-template-man" title="$ man 7 lvmcache"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lvmcache.7">lvmcache(7)</a></span>.
</p>
<h3><span class="mw-headline" id="RAID">RAID</span></h3>
<p>De <span class="plainlinks archwiki-template-man" title="$ man 7 lvmraid"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lvmraid.7">lvmraid(7)</a></span>:
</p>
<dl><dd>
<span class="plainlinks archwiki-template-man" title="$ man 8 lvm"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lvm.8">lvm(8)</a></span> RAID es una forma de crear un volumen lógico (LV) que utiliza varios dispositivos físicos para mejorar el rendimiento o tolerar los posibles fallos de alguno de los dispositivos. En LVM, los dispositivos físicos son volúmenes físicos (PV) integrados un solo grupo de volúmenes (VG).</dd></dl>
<p>RAID sobre LVM admite RAID 0, RAID 1, RAID 4, RAID 5, RAID 6 y RAID 10. Consulte <a href="https://en.wikipedia.org/wiki/Standard_RAID_levels" class="extiw" title="wikipedia:Standard RAID levels">Wikipedia:Standard RAID levels</a> para obtener detalles sobre cada nivel.
</p>
<h4><span class="mw-headline" id="Configurar_RAID">Configurar RAID</span></h4>
<p>Cree los volúmenes físicos:
</p>
<pre># pvcreate /dev/sda2 /dev/sdb2
</pre>
<p>Cree un grupo de volúmenes con los volúmenes físicos:
</p>
<pre># vgcreate VolGroup00 /dev/sda2 /dev/sdb2
</pre>
<p>Cree volúmenes lógicos con <code>lvcreate --type <i>raidlevel</i></code>, consulte <span class="plainlinks archwiki-template-man" title="$ man 7 lvmraid"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lvmraid.7">lvmraid(7)</a></span> y <span class="plainlinks archwiki-template-man" title="$ man 8 lvcreate"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lvcreate.8">lvcreate(8)</a></span> para obtener más opciones.
</p>
<pre># lvcreate --type RaidLevel [OPTIONS] -n Name -L Size VG [PVs]
</pre>
<p>Por ejemplo:
</p>
<pre># lvcreate --type raid1 --mirrors 1 -L 20G -n myraid1vol VolGroup00 /dev/sda2 /dev/sdb2
</pre>
<p>creará un volumen lógico replicado de 20 GiB llamado «myraid1vol» en VolGroup00 sobre <code>/dev/sda2</code> y <code>/dev/sdb2</code>.
</p>
<h4><span class="mw-headline" id="Configurar_mkinitcpio_para_RAID">Configurar mkinitcpio para RAID</span></h4>
<p>Si su sistema de archivos raíz está en LVM sobre RAID además de los hooks <code>lvm2</code> o <code>sd-lvm2</code>, debe agregar <code>dm-raid</code> y los módulos RAID apropiados (por ejemplo, <code>raid0</code>, <code>raid1</code>, <code>raid10</code> y/o <code>raid456</code>) a la matriz MODULES en <code>mkinitcpio.conf</code>.
</p>
<p>Para initramfs basado en busybox:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/mkinitcpio.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">MODULES=(<b>dm-raid raid0 raid1 raid10 raid456</b>)
HOOKS=(base <b>udev</b> ... block <b>lvm2</b> filesystems)</pre>
<p>Para initramfs basado en systemd:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/mkinitcpio.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">MODULES=(<b>dm-raid raid0 raid1 raid10 raid456</b>)
HOOKS=(base <b>systemd</b> ... block <b>sd-lvm2</b> filesystems)</pre>
<h2>
<span id="Configuraci.C3.B3n_gr.C3.A1fica"></span><span class="mw-headline" id="Configuración_gráfica">Configuración gráfica</span>
</h2>
<p>No existe una interfaz gráfica «oficial» para administrar volúmenes LVM, pero <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/system-config-lvm/">system-config-lvm</a></span><sup><small>AUR</small></sup><sup>[<a href="/title/Help:Procedures#Fix_broken_package_links" title="Help:Procedures">enlace roto</a>: package not found]</sup> cubre la mayoría de las operaciones comunes y proporciona visualizaciones simples del estado del volumen. Puede cambiar automáticamente el tamaño de muchos sistemas de archivos cuando redimensiona los volúmenes lógicos.
</p>
<h2>
<span id="Soluci.C3.B3n_de_problemas"></span><span class="mw-headline" id="Solución_de_problemas">Solución de problemas</span>
</h2>
<h3>
<span id="Problemas_de_arranque.2Fapagado_debido_a_lvmetad_desactivado"></span><span class="mw-headline" id="Problemas_de_arranque/apagado_debido_a_lvmetad_desactivado">Problemas de arranque/apagado debido a lvmetad desactivado</span>
</h3>
<p>El parámetro <code>use_lvmetad = 1</code> <b>debe</b> ajustarse en <code>/etc/lvm/lvm.conf</code>. Este es el valor predeterminado ahora: si tiene un archivo <code>lvm.conf.pacnew</code>, debe fusionarlos.
</p>
<h3>
<span id="Las_.C3.B3rdenes_LVM_no_funcionan"></span><span class="mw-headline" id="Las_órdenes_LVM_no_funcionan">Las órdenes LVM no funcionan</span>
</h3>
<ul><li>Cargue los modulos apropiados:</li></ul>
<pre># modprobe dm-mod
</pre>
<p>El módulo <code>dm_mod</code> debería cargarse automáticamente. En caso contrario, pruebe con:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/mkinitcpio.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">MODULES=(dm_mod ...)</pre>
<p>Tendrá que <a href="/title/Mkinitcpio_(Espa%C3%B1ol)#Creaci%C3%B3n_de_la_imagen_y_activaci%C3%B3n" title="Mkinitcpio (Español)">volver a crear</a> la imagen initramfs para que surtan efectos los cambios realizados.
</p>
<ul><li>Anteponga <i>lvm</i> a la orden:</li></ul>
<pre># lvm pvdisplay
</pre>
<h3>
<span id="No_se_muestran_los_vol.C3.BAmenes_l.C3.B3gicos"></span><span class="mw-headline" id="No_se_muestran_los_volúmenes_lógicos">No se muestran los volúmenes lógicos</span>
</h3>
<p>Si se está tratando de montar volúmenes lógicos existentes, pero no se muestran con <code>lvscan</code>, puede utilizar las siguientes órdenes para activarlos: 
</p>
<pre># vgscan
# vgchange -ay
</pre>
<h3>
<span id="LVM_sobre_un_medio_extra.C3.ADble"></span><span class="mw-headline" id="LVM_sobre_un_medio_extraíble">LVM sobre un medio extraíble</span>
</h3>
<p>Síntomas:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># vgscan</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">  Reading all physical volumes.  This may take a while...
  /dev/backupdrive1/backup: read failed after 0 of 4096 at 319836585984: Input/output error
  /dev/backupdrive1/backup: read failed after 0 of 4096 at 319836643328: Input/output error
  /dev/backupdrive1/backup: read failed after 0 of 4096 at 0: Input/output error
  /dev/backupdrive1/backup: read failed after 0 of 4096 at 4096: Input/output error
  Found volume group "backupdrive1" using metadata type lvm2
  Found volume group "networkdrive" using metadata type lvm2
</pre>
<p>Causa:
</p>
<dl><dd>Extraer una unidad externa con LVM sin ​​desactivar el grupo(s) de volúmenes primero. Antes de desconectar el medio, asegúrese de ejecutar:</dd></dl>
<pre># vgchange -an <i>nombre_del_grupo_de_volumen</i>
</pre>
<p>Arreglo:
</p>
<dl><dd>Asumiendo que ya ha intentado activar el grupo de volúmenes con <code># vgchange -ay <i>vg</i></code>, y se siguen recibiendo los errores de entrada/salida, ejecute:</dd></dl>
<pre># vgchange -an <i>nombre_del_grupo_de_volumen</i>
</pre>
<dl><dd>Desconecte la unidad externa y espere unos minutos:</dd></dl>
<pre># vgscan
# vgchange -ay <i>nombre_del_grupo_de_volumen</i>
</pre>
<h3>
<span id="Al_redimensionar_un_volumen_l.C3.B3gico_contiguo_falla"></span><span class="mw-headline" id="Al_redimensionar_un_volumen_lógico_contiguo_falla">Al redimensionar un volumen lógico contiguo falla</span>
</h3>
<p>Si al intentar extender un volumen lógico produce errores con:
</p>
<pre>" Insufficient suitable contiguous allocatable extents for logical volume "
</pre>
<p>La razón es que el volumen lógico se creó con una explícita política de asignación contigua (con las opciones <code>-C y</code> o <code>--alloc contiguous</code>) y no hay extensiones contiguas adyacentes adicionales disponibles (vea también <a rel="nofollow" class="external text" href="http://www.hostatic.ro/2010/02/15/lvm-inherit-and-contiguous-policies/">reference</a>).
</p>
<p>Para solucionar este problema, antes de extender el volumen lógico, cambie su política de asignación con <code>lvchange --alloc inherit &lt;volumen_lógico&gt;</code>. Si necesita mantener la política de asignación contigua, un método alternativo consistiría en mover el volumen a un área del disco con suficientes extensiones libres (vea <a rel="nofollow" class="external autonumber" href="https://superuser.com/questions/435075/how-to-align-logical-volumes-on-contiguous-physical-extents">[1]</a>).
</p>
<h3>
<span id="La_orden_.C2.ABgrub-mkconfig.C2.BB_informa_del_error_.C2.ABunknown_filesystem.C2.BB"></span><span class="mw-headline" id="La_orden_«grub-mkconfig»_informa_del_error_«unknown_filesystem»">La orden «grub-mkconfig» informa del error «unknown filesystem»</span>
</h3>
<p>Asegúrese de retirar los volúmenes de instantáneas antes de <a href="/title/GRUB_(Espa%C3%B1ol)#Generar_el_archivo_de_configuraci%C3%B3n_principal" title="GRUB (Español)">generar grub.cfg</a>.
</p>
<h3>
<span id="Dispositivo_de_volumen_ra.C3.ADz_aprovisionado_para_agotar_tiempo_de_espera"></span><span class="mw-headline" id="Dispositivo_de_volumen_raíz_aprovisionado_para_agotar_tiempo_de_espera">Dispositivo de volumen raíz aprovisionado para agotar tiempo de espera</span>
</h3>
<p>Con una gran cantidad de instantáneas, <code>thin_check</code> se ejecuta durante un tiempo suficientemente prolongado para que se agote el tiempo de espera del dispositivo raíz. Para compensar, agregue el parámetro de arranque del kernel <code>rootdelay=60</code> a la configuración de su gestor de arranque. O haga que <code>thin_check</code> omita la comprobación de asignaciones de bloques (consulte  <a rel="nofollow" class="external autonumber" href="https://www.redhat.com/archives/linux-lvm/2016-January/msg00010.html">[2]</a>) y <a href="/title/Mkinitcpio_(Espa%C3%B1ol)" title="Mkinitcpio (Español)">regenere initramfs</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/lvm/lvm.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">thin_check_options = [ "-q", "--clear-needs-check-flag", "--skip-mappings" ]</pre>
<h3><span class="mw-headline" id="Demora_al_apagar">Demora al apagar</span></h3>
<p>Si utiliza RAID, instantáneas o aprovisionamiento, y experimenta un retraso en el apagado, asegúrese de que <code>lvm2-monitor.service</code> está <a href="/title/Systemd_(Espa%C3%B1ol)#Utilizar_las_unidades" title="Systemd (Español)">iniciado</a>. Consulte <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/50420">FS#50420</a>.
</p>
<h2>
<span id="V.C3.A9ase_tambi.C3.A9n"></span><span class="mw-headline" id="Véase_también">Véase también</span>
</h2>
<ul>
<li>
<a rel="nofollow" class="external text" href="https://sourceware.org/lvm2/">Página de recursos de LVM2</a> en SourceWare.org</li>
<li>
<a rel="nofollow" class="external text" href="https://wiki.gentoo.org/wiki/LVM">LVM</a> artículo en Gentoo wiki</li>
<li>
<a rel="nofollow" class="external text" href="https://www.tutonics.com/2012/11/ubuntu-lvm-guide-part-1.html">Guía de Ubuntu LVM, parte 1</a><a rel="nofollow" class="external text" href="https://www.tutonics.com/2012/12/lvm-guide-part-2-snapshots.html">Parte 2 detalles de instantáneas</a>
</li>
<li><a rel="nofollow" class="external text" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Logical_Volume_Manager_Administration/index.html">Red Hat: Logical Volume Manager Administration</a></li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="/title/Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="/title/Category:Storage_virtualization_(Espa%C3%B1ol)" title="Category:Storage virtualization (Español)">Storage virtualization (Español)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="/title/Category:Pages_with_broken_package_links" title="Category:Pages with broken package links">Pages with broken package links</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=LVM_(Espa%C3%B1ol)&amp;oldid=668941">https://wiki.archlinux.org/index.php?title=LVM_(Español)&amp;oldid=668941</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 8 May 2021, at 10:56.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="/title/ArchWiki:Privacy_policy" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="/title/ArchWiki:About" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="/title/ArchWiki:General_disclaimer" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
