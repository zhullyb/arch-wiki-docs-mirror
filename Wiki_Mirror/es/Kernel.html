<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Kernel (Español) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Kernel_Español rootpage-Kernel_Español skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Kernel (Español)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Artículos relacionados</p>
<ul>
<li><a href="../es/Kernel_module.html" class="mw-redirect" title="Kernel modules (Español)">Kernel modules (Español)</a></li>
<li><a href="../es/Kernel_parameters.html" title="Kernel parameters (Español)">Kernel parameters (Español)</a></li>
</ul>
</div>
<p>Arch Linux provee varios métodos para compilar el kernel. Usar <a href="#Usando_Arch_Build_System">Arch Build System</a> es el recomendado.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Oficialmente_compatibles"><span class="tocnumber">1</span> <span class="toctext">Oficialmente compatibles</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Usando_Arch_Build_System"><span class="tocnumber">2</span> <span class="toctext">Usando Arch Build System</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Consiguiendo_los_ingredientes"><span class="tocnumber">2.1</span> <span class="toctext">Consiguiendo los ingredientes</span></a></li>
<li class="toclevel-2 tocsection-4">
<a href="#Modificando_el_PKGBUILD"><span class="tocnumber">2.2</span> <span class="toctext">Modificando el PKGBUILD</span></a>
<ul>
<li class="toclevel-3 tocsection-5"><a href="#Cambiando_pkgname"><span class="tocnumber">2.2.1</span> <span class="toctext">Cambiando pkgname</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#Modificando_build()"><span class="tocnumber">2.2.2</span> <span class="toctext">Modificando build()</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="#Cambiando_la_funci%C3%B3n_package_kernel26()"><span class="tocnumber">2.2.3</span> <span class="toctext">Cambiando la función package_kernel26()</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-8"><a href="#Compilaci%C3%B3n"><span class="tocnumber">2.3</span> <span class="toctext">Compilación</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Instalaci%C3%B3n"><span class="tocnumber">2.4</span> <span class="toctext">Instalación</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Boot_Loader"><span class="tocnumber">2.5</span> <span class="toctext">Boot Loader</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Drivers_propietarios_de_Nvidia"><span class="tocnumber">2.6</span> <span class="toctext">Drivers propietarios de Nvidia</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="#Usando_AUR"><span class="tocnumber">3</span> <span class="toctext">Usando AUR</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="#Tradicional"><span class="tocnumber">4</span> <span class="toctext">Tradicional</span></a></li>
<li class="toclevel-1 tocsection-14"><a href="#Revisa_tambi%C3%A9n"><span class="tocnumber">5</span> <span class="toctext">Revisa también</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Oficialmente_compatibles">Oficialmente compatibles</span></h2>
<ul><li>
<b><a rel="nofollow" class="external text" href="https://www.kernel.org/category/releases.html">Estable</a></b> — La versión <i>vanilla</i> del kernel  y los módulos, con pocas modificaciones aplicadas.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://www.kernel.org/">https://www.kernel.org/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span>
</dd></dl>
<ul><li>
<b><a rel="nofollow" class="external text" href="https://kernsec.org/wiki/index.php/Kernel_Self_Protection_Project">Hardened</a></b> — Un kernel de Linux enfocado en seguridad, aplica parches para mitigar la explotación en el kernel o en el espacio del usuario. También activa mas características de seguridad  en comparación con <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span>, entre otros: <i>namespaces</i>, <i>audit</i> y <a href="../en/SELinux.html" title="SELinux">SELinux</a>.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/copperhead/linux-hardened">https://github.com/copperhead/linux-hardened</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-hardened">linux-hardened</a></span>
</dd></dl>
<ul><li>
<b><a rel="nofollow" class="external text" href="https://www.kernel.org/category/releases.html">Larga duración</a></b> — Kernel de Linux y módulos con soporte de larga duración (LTS).</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://www.kernel.org/">https://www.kernel.org/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-lts">linux-lts</a></span>
</dd></dl>
<ul><li>
<b><a rel="nofollow" class="external text" href="https://liquorix.net/">Kernel ZEN</a></b> — Es el resultado de un esfuerzo colaborativo de varios hackers para hacer el mejor kernel para el uso en sistemas de uso diario.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/zen-kernel/zen-kernel">https://github.com/zen-kernel/zen-kernel</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-zen">linux-zen</a></span>
</dd></dl>
<h2><span class="mw-headline" id="Usando_Arch_Build_System">Usando Arch Build System</span></h2>
<p>Siempre, se han propuesto varios métodos para construir fácilmente un kernel personalizado partiendo del de Arch. En la wiki se pueden encontrar varios ejemplos. Todos ellos son bastante buenos, pero sufren <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/12384">algunos inconvenientes</a> que hacen que no estén oficialmente respaldados por los desarrolladores.
</p>
<p>Contrariamente, el método descrito en este articulo es mas sólido y seguro, y se construye usando el paquete oficial del <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span>.
</p>
<h3><span class="mw-headline" id="Consiguiendo_los_ingredientes">Consiguiendo los ingredientes</span></h3>
<p>Se va a usar <a href="../es/Makepkg.html" title="Makepkg (Español)">makepkg</a>, siga las recomendaciones allí descritas en primer lugar. Por ejemplo, no se puede ejecutar <i>makepkg</i> como root/sudo. Cree un directorio <code>build</code> el directorio raiz de su usuario. 
</p>
<pre> $ cd ~/
 $ mkdir build
 $ cd build/
</pre>
<p><a href="../es/Help:Reading.html#Instalaci%C3%B3n_de_paquetes" title="Help:Reading (Español)">Instale</a> el paquete <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=asp">asp</a></span> y el grupo de paquetes <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/groups/x86_64/base-devel/">base-devel</a></span>.
</p>
<p>Se necesita un kernel limpio para poder hacer la personalización. Descargue los archivos del kernel desde ABS en su directorio <i>build</i>, ejecute:
</p>
<pre>$ asp checkout linux
</pre>
<p>Después obtenga cualquier otro archivo que considere necesario (v.g. archivos personalizados, parches, configuraciones, etc.) desde sus respectivas fuentes.
</p>
<h3><span class="mw-headline" id="Modificando_el_PKGBUILD">Modificando el PKGBUILD</span></h3>
<p>Modifica el <a href="../es/PKGBUILD.html" title="PKGBUILD (Español)">PKGBUILD</a> del paquete oficial del <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span>.
</p>
<p><br>
</p>
<h4><span class="mw-headline" id="Cambiando_pkgname">Cambiando pkgname</span></h4>
<p>Las primeras lineas se pareceran a estas:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">PKGBUILD</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># $Id: PKGBUILD 130991 2011-07-09 12:23:51Z thomas $
# Maintainer: Tobias Powalowski &lt;tpowa@archlinux.org&gt;
# Maintainer: Thomas Baechler &lt;thomas@archlinux.org&gt;

pkgbase=linux
pkgname=('linux' 'linux-headers' 'linux-docs') # Build stock -ARCH kernel
# pkgname=linux-custom       # Build kernel with a different name
_kernelname=${pkgname#linux}
...
</pre>
<p>Como ves, hay un comentario para construir un kernel con diferente nombre (# Build kernel with a different name), todo lo que debemos hacer es descomentar esa linea, cambie el sufijo '-custom' por el nombre que quieras, y comentar la linea anterior ( osea el primer pkgname):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">PKGBUILD build()</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
#pkgname=('linux' 'linux-headers' 'linux-docs') # Build stock -ARCH kernel
pkgname=linux-test       # Build kernel with a different name
...
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Esto asume que no vas a recompilar los <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-headers">linux-headers</a></span>, -manpages or -docs. Si los queres recompilar, agregalos.</div>
<p>Ahora, todas las variables de tu paquete serán cambiadas de acuerdo al nuevo nombre. Por ejemplo, luego de instalar el paquete, los módulos seran alojados en <code>/lib/modules/&lt;kernel_release&gt;-test/</code>.
</p>
<h4>
<span id="Modificando_build.28.29"></span><span class="mw-headline" id="Modificando_build()">Modificando build()</span>
</h4>
<p>Probablemente necesites un archivo ".config" personalizado para tu kernel. Podes descomentar una de las posibilidades mostradas en la función <code>build()</code> del <a href="../es/PKGBUILD.html" title="PKGBUILD (Español)">PKGBUILD</a>, por ejemplo:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">PKGBUILD</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
# load configuration
# Configure the kernel. Replace the line below with one of your choice.
#make menuconfig # CLI menu for configuration
make nconfig # new CLI menu for configuration
#make xconfig # X-based configuration
#make oldconfig # using old config from previous kernel version
# ... or manually edit .config
...
</pre>
<p>Si ya tenias un archivo de configuración para el kernel. Te sugiero descomentar una de las herramientas de configuración interactiva, como nconfig, y cargar tu configuración desde allí. Eso evitará problemas con el nombre del kernel.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Si descomenta <i>return 1</i>, puede cambiar el directorio principal del kernel luego de que makepkg termine las extracciones y luego hacer la configuración con nconfig. Esto te permitirá configurar tu kernel en varias sesiones. Cuando estés listo para compilar, copia el archivo .config sobre el .config que se haya generado automáticamente, o sobre el config.x86_64 (esto dependerá de la arquitectura del procesador), comenta <i>return 1</i> y usa <b>makepkg -i</b>.</div>
<h4>
<span id="Cambiando_la_funci.C3.B3n_package_kernel26.28.29"></span><span class="mw-headline" id="Cambiando_la_función_package_kernel26()">Cambiando la función package_kernel26()</span>
</h4>
<p>Debemos escribir una función personalizada para decirle al sistema como instalar el paquete. Esto es muy simple de hacer, solo debemos cambiarle el nombre a la función package_kernel26() por el de package_kernel26-test(),(test, recordemos es el nombre del kernel personalizado) y adaptar las instrucciones a tus necesidades. Si no quieres cambiar nada, la función debería quedar así:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">PKGBUILD package_kernel26-test()</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
package_linux-test() {
 pkgdesc="The Linux Kernel and modules"
...
}
</pre>
<h3>
<span id="Compilaci.C3.B3n"></span><span class="mw-headline" id="Compilación">Compilación</span>
</h3>
<p>Ahora se puede compilar el kernel, con el comando usual <code>makepkg</code>
</p>
<p>Si usaste un programa interactivo para configurar los parámetros del kernel (como menuconfig), deberás estar allí durante la compilación.
</p>
<pre> $ makepkg -s
</pre>
<p>El parámetro <code>-s</code> descargara cualquier dependencia adicional que no se encuentre en su sistema.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> 
<ul>
<li>La fuente del kernel contiene <a rel="nofollow" class="external text" href="https://www.kernel.org/signature.html#kernel-org-web-of-trust">firmas PGP</a>, y makepkg intentara verificarlas. Vea <a href="../es/Makepkg.html#Verificaci%C3%B3n_de_firmas" title="Makepkg (Español)">verificación de firmas</a> para mas información.</li>
<li>El kernel necesita un tiempo para compilar, una hora no es inusual.</li>
<li>
<a href="../es/Makepkg.html#Recomendaciones" title="Makepkg (Español)">Compilar simultáneamente</a> puede reducir los tiempos de compilación significativamente en sistemas con múltiples núcleos.</li>
</ul>
</div>
<h3>
<span id="Instalaci.C3.B3n"></span><span class="mw-headline" id="Instalación">Instalación</span>
</h3>
<p>Luego de <code>makepkg</code>, podes revisar el archivo <code>linux.install</code>. Veras que algunas variables han cambiado. Ahora, solo debemos instalar con <a href="../es/Pacman.html" title="Pacman (Español)">pacman</a>:
</p>
<pre>#pacman -U &lt;paquete_del_kernel&gt;
</pre>
<h3><span class="mw-headline" id="Boot_Loader">Boot Loader</span></h3>
<p>Las carpetas y archivos de nuestro kernel personalizado han sido creadas, ej. <code>/boot/kernel26-test-img</code>. Para testear el kernel, debemos actualizar el bootloader (<code>/boot/grub/menu.lst</code> para <a href="../es/GRUB.html" title="GRUB (Español)">GRUB (Español)</a>) y agregar las nuevas entradas ('default' y 'fallback') para nuestro kernel. De esta manera, podes tener ambos kernels el ya instalado y el de personalizado en paralelo.
</p>
<h3><span class="mw-headline" id="Drivers_propietarios_de_Nvidia">Drivers propietarios de Nvidia</span></h3>
<p>Revisar <a href="../en/NVIDIA.html" title="NVIDIA">Instalacion alternativa: kernel personalizado</a>.
</p>
<h2><span class="mw-headline" id="Usando_AUR">Usando AUR</span></h2>
<p>En el <a href="../es/Arch_User_Repository.html" title="Arch User Repository (Español)">AUR</a> hay algunos paquetes de los kernels mas conocidos. Podes instalarlos como están, o usarlos como base para tu kernel personalizado.
</p>
<p><a href="../en/Kernel.html" class="mw-redirect" title="Kernels">Kernels en el AUR</a>
</p>
<h2><span class="mw-headline" id="Tradicional">Tradicional</span></h2>
<p>Este método requiere la descargar manual del tarball y construir el kernel en el directorio home como usuario normal. Una vez configurado, se explican dos métodos de compilación/instalación, el método manual o mediante <a href="../es/Makepkg.html" title="Makepkg (Español)">makepkg (Español)</a>/<a href="../es/Pacman.html" title="Pacman (Español)">pacman</a>.
</p>
<p>Más información en <a href="../en/Kernel/Traditional_compilation.html" class="mw-redirect" title="Kernels/Traditional compilation">Compilación tradicional</a>.
</p>
<h2>
<span id="Revisa_tambi.C3.A9n"></span><span class="mw-headline" id="Revisa_también">Revisa también</span>
</h2>
<ul>
<li><a href="../en/Kernel.html" class="mw-redirect" title="Kernels">Kernels</a></li>
<li>
<a rel="nofollow" class="external text" href="http://www.kroah.com/lkn/">O'Reilly - El kernel de linux en una cascara de nuez</a> (ebook gratuito)</li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../es/Category:Kernel.html" title="Category:Kernel (Español)">Kernel (Español)</a></li></ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Kernel_(Espa%C3%B1ol)&amp;oldid=604904">https://wiki.archlinux.org/index.php?title=Kernel_(Español)&amp;oldid=604904</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 8 April 2020, at 11:42.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
