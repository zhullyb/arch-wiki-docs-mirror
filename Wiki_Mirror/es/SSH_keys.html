<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>SSH keys (Español) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-SSH_keys_Español rootpage-SSH_keys_Español skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">SSH keys (Español)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="noprint archwiki-template-message">
<p><a href="/title/File:Tango-preferences-desktop-locale.png" class="image"><img alt="Tango-preferences-desktop-locale.png" src="../File:Tango-preferences-desktop-locale.png" decoding="async" width="48" height="48"></a><b>Este artículo o sección necesita ser <a href="/title/ArchWiki:Contributing_(Espa%C3%B1ol)#Traducir_contenido" title="ArchWiki:Contributing (Español)">traducido</a>.</b><a href="/title/File:Tango-preferences-desktop-locale.png" class="image"><img alt="Tango-preferences-desktop-locale.png" src="../File:Tango-preferences-desktop-locale.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Notas:</b> En  proceso de traducción (Discusión en <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/title/Talk:SSH_keys_(Espa%C3%B1ol)">Talk:SSH keys (Español)#</a>)</div>
</div>
<p>Al usar una llave SSH ( una publica y una privada para ser precisos), se puede conectarse fácilmente a un servidor, o a múltiples servidores, sin tener que ingresar una contraseña cada vez <a href="https://en.wikipedia.org/wiki/es:Criptograf%C3%ADa_asim%C3%A9trica" class="extiw" title="wikipedia:es:Criptografía asimétrica">Criptografía_asimétrica</a> y <a href="https://en.wikipedia.org/wiki/es:Protocolos_desaf%C3%ADo-respuesta" class="extiw" title="wikipedia:es:Protocolos desafío-respuesta">Protocolos_desafío-respuesta</a>. 
Una ventaja inmediata de este método sobre el clásico método de autenticación con contraseña, es que es posible autenticarse sin necesidad de enviar la contraseña por la red, así que alguien espiando la red no podrá interceptar e intentar descifrar la contraseña ya que esta nunca sera enviada. Adicionalmente, el uso de llaves de SSH virtualmente elimina el riesgo de ataques de fuerza bruta al reducir la probabilidad de que un atacante adivine las credenciales correctamente.
</p>
<p>Ademas de ofrecer seguridad adicional, autenticación con llaves SSH puede ser mas conveniente que el método tradicional de autenticación con contraseña. Cuando se usa con un programa conocido como Agente SSH, las llaves SSH le permiten conectarse con uno o múltiples servidores sin necesidad de tener que recordar la contraseña de cada sistema.
</p>
<p>Llaves SSH también tienen algunas desventajas y puede que no funcionen en todos los ambientes, pero en muchas circunstancias pueden ofrecer bastantes ventajas. Un entendimiento general de como funcionan las llaves SSH le ayudaran a decidir como y cuando usarlas para satisfacer su caso especifico.
</p>
<p>Este articulo asume que el lector tiene un conocimiento básico del protocolo de <a href="/title/Secure_Shell_(Espa%C3%B1ol)" class="mw-redirect" title="Secure Shell (Español)">Shell Segura</a> y que el paquete <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=openssh">openssh</a></span> ha sido <a href="/title/Help:Reading_(Espa%C3%B1ol)#Instalaci.C3.B3n_de_paquetes" title="Help:Reading (Español)">instalado</a>.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Informacion_preliminar"><span class="tocnumber">1</span> <span class="toctext">Informacion preliminar</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Generando_las_llaves_SSH"><span class="tocnumber">2</span> <span class="toctext">Generando las llaves SSH</span></a>
<ul>
<li class="toclevel-2 tocsection-3">
<a href="#Seleccionar_el_tipo_autenticaci%C3%B3n_de_la_llave"><span class="tocnumber">2.1</span> <span class="toctext">Seleccionar el tipo autenticación de la llave</span></a>
<ul>
<li class="toclevel-3 tocsection-4"><a href="#RSA"><span class="tocnumber">2.1.1</span> <span class="toctext">RSA</span></a></li>
<li class="toclevel-3 tocsection-5"><a href="#ECDSA"><span class="tocnumber">2.1.2</span> <span class="toctext">ECDSA</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#Ed25519"><span class="tocnumber">2.1.3</span> <span class="toctext">Ed25519</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-7">
<a href="#Selecci%C3%B3n_de_ubicaci%C3%B3n_y_contrase%C3%B1a"><span class="tocnumber">2.2</span> <span class="toctext">Selección de ubicación y contraseña</span></a>
<ul>
<li class="toclevel-3 tocsection-8"><a href="#Cambiar_la_contrase%C3%B1a_de_la_llave_privada_sin_cambiar_la_llave"><span class="tocnumber">2.2.1</span> <span class="toctext">Cambiar la contraseña de la llave privada sin cambiar la llave</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="#Manejo_de_llaves_m%C3%BAltiples"><span class="tocnumber">2.2.2</span> <span class="toctext">Manejo de llaves múltiples</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-10">
<a href="#Copiar_llaves_a_un_servidor_remoto"><span class="tocnumber">3</span> <span class="toctext">Copiar llaves a un servidor remoto</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#M%C3%A9todo_simple"><span class="tocnumber">3.1</span> <span class="toctext">Método simple</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#M%C3%A9todo_manual"><span class="tocnumber">3.2</span> <span class="toctext">Método manual</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-13">
<a href="#Agentes_de_SSH"><span class="tocnumber">4</span> <span class="toctext">Agentes de SSH</span></a>
<ul>
<li class="toclevel-2 tocsection-14">
<a href="#ssh-agent"><span class="tocnumber">4.1</span> <span class="toctext">ssh-agent</span></a>
<ul>
<li class="toclevel-3 tocsection-15"><a href="#Iniciar_ssh-agent_con_systemd/user"><span class="tocnumber">4.1.1</span> <span class="toctext">Iniciar ssh-agent con systemd/user</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-16"><a href="#Agente_GnuPG"><span class="tocnumber">4.2</span> <span class="toctext">Agente GnuPG</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Keychain"><span class="tocnumber">4.3</span> <span class="toctext">Keychain</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#x11-show-askpass"><span class="tocnumber">4.4</span> <span class="toctext">x11-show-askpass</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#GNOME_Keyring_(llavero)"><span class="tocnumber">4.5</span> <span class="toctext">GNOME Keyring (llavero)</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-20"><a href="#Resoluci%C3%B3n_de_problemas"><span class="tocnumber">5</span> <span class="toctext">Resolución de problemas</span></a></li>
<li class="toclevel-1 tocsection-21"><a href="#Links_Utiles_/_Informacion_(en_ingles)"><span class="tocnumber">6</span> <span class="toctext">Links Utiles / Informacion (en ingles)</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Informacion_preliminar">Informacion preliminar</span></h2>
<p>Las llaves de SSH siempre son generadas en pares con una llamada <i>llave privada</i> y otra llamada <i>llave pública</i>. La llave privada solo es conocida por el usuario y debe ser guardada con cuidado. En contraste, la llave pública puede ser compartida libremente con cualquier servidor SSH con el que se quiere conectar.
</p>
<p>Si un servidor SSH tiene su llave pública y nota que hay un intento de conexión, usa su llave pública para construir y enviar un desafío. Este desafío es un mensaje encriptado y debe ser respondido apropiadamente antes de que el servidor le dé acceso. Lo que hace este mensaje particularmente seguro es que solo se puede descifrar con la llave privada. Mientras que la llave pública puede ser usada para encriptar el mensaje, no puede ser usada para descifrarlo. Solo el usuario, que tiene la llave privada puede ser capaz de descifrar correctamente el desafío y producir la respuesta adecuada.
</p>
<p>Este intercambio de desafío-respuesta ocurre como una tarea de fondo y es invisible para el usuario. Mientras se tenga la llave privada, la cual es guardada normalmente en la carpeta <code>~/.ssh/</code>, su cliente SSH debería ser capaz de responder apropiadamente al servidor.
</p>
<p>Una llave privada es un secreto a guardar, por ende se aconseja que cuando se guarde se haga de manera encriptada. Cuando la llave encriptada es requerida, una contraseña debe ser ingresada para descifrarla. Aunque superficialmente esto parece como si se estuviera poniendo una contraseña para ingresar al servidor de SSH, esta contraseña solo se usa para descifrar la llave privada en el sistema local. Esta contraseña no se transmite sobre la red.
</p>
<h2><span class="mw-headline" id="Generando_las_llaves_SSH">Generando las llaves SSH</span></h2>
<p>Un par de llaves SSH puede ser generado ejecutando el comando <code>ssh-keygen</code>, por defecto usando seguridad 2048-bit RSA (y SHA256) la cual de acuerdo a <span class="plainlinks archwiki-template-man" title="$ man 1 ssh-keygen"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/ssh-keygen.1">ssh-keygen(1)</a></span> es "<i>considerada generalmente suficiente</i>" y debe ser compatible con virtualmente todos los servidores y clientes:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ssh-keygen
</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Generating public/private rsa key pair.
Enter file in which to save the key (/home/&lt;username&gt;/.ssh/id_rsa):   ### Ubicación de las llaves
Enter passphrase (empty for no passphrase):                           ### Contraseña de la llave
Enter same passphrase again:                                          ### Repetir la contraseña
Your identification has been saved in /home/&lt;username&gt;/.ssh/id_rsa.   ### Nombre llave privada
Your public key has been saved in /home/&lt;username&gt;/.ssh/id_rsa.pub.   ### Nombre llave publica
The key fingerprint is:
SHA256:gGJtSsV8BM+7w018d39Ji57F8iO6c0N2GZq3/RY2NhI username@hostname
The key's randomart image is:
+---[RSA 2048]----+
|   ooo.          |
|   oo+.          |
|  + +.+          |
| o +   +     E . |
|  .   . S . . =.o|
|     . + . . B+@o|
|      + .   oo*=O|
|       .   ..+=o+|
|           o=ooo+|
+----[SHA256]-----+</pre>
<p>La <a rel="nofollow" class="external text" href="https://www.cs.berkeley.edu/~dawnsong/papers/randomart.pdf">imagen de arte aleatorio</a> fue <a rel="nofollow" class="external text" href="https://www.openssh.com/txt/release-5.1">introducida en OpenSSH 5.1</a> como una forma más simple de identificar la huella de la llave.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Si utiliza una contraseña para su llave, es <i>muy recomendado</i> usar la opción <code>-o</code> en el comando <code>ssh-keygen</code>. Así, su llave privada se guardara en el nuevo formato de OpenSSH, el cual ha mejorado bastante contra ataques de fuerza bruta, pero no es soportado por versiones de OpenSSH inferiores a 6.5. De acuerdo a <span class="plainlinks archwiki-template-man" title="$ man 1 ssh-keygen"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/ssh-keygen.1">ssh-keygen(1)</a></span>, llaves de Ed25519 siempre usan el nuevo formato. También use la opción <code>-a</code> para especificar el numero de rondas de KDF en el cifrado de la contraseña.</div>
<p>También es posible agregar un comentario opcional a la llave publica con el parámetro <code>-C</code>, para identificar la llave más fácilmente en lugares como <code>~/.ssh/known_hosts</code>, <code>~/.ssh/authorized_keys</code> y <code>ssh-add -L</code>. Por ejemplo:
</p>
<pre>$ ssh-keygen -C "$(whoami)@$(hostname)-$(date -I)"    ### usuario@nombredemaquina-fecha
</pre>
<p>Creara un comentario diciendo el usuario que creo la llave, en que maquina y la fecha.
</p>
<p>El parámetro <code>-o</code>, puede ser usado para guardar la llave privada en el nuevo formato de OpenSSH, el cual ha incrementado la resistencia a ataques de fuerza bruta, pero no es soportado por versiones de OpenSSH anteriores a 6.5 <a rel="nofollow" class="external text" href="https://lwn.net/Articles/583485/">lanzamiento 2014-01-29</a>. Use el parámetro <code>-a</code> para especificar el numero de rondas de KDF. De acuerdo a <span class="plainlinks archwiki-template-man" title="$ man 1 ssh-keygen"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/ssh-keygen.1">ssh-keygen(1)</a></span>, llaves de Ed25519 siempre usan el nuevo formato de llave privada.
</p>
<h3>
<span id="Seleccionar_el_tipo_autenticaci.C3.B3n_de_la_llave"></span><span class="mw-headline" id="Seleccionar_el_tipo_autenticación_de_la_llave">Seleccionar el tipo autenticación de la llave</span>
</h3>
<p>OpenSSH soporta varios algoritmos (para llaves de autenticacion), los cuales se pueden dividir en dos grupos dependiendo en las propiedades matemáticas que se usan:
</p>
<ol>
<li>
<a href="https://en.wikipedia.org/wiki/es:DSA" class="extiw" title="wikipedia:es:DSA">DSA</a> y <a href="https://en.wikipedia.org/wiki/es:RSA" class="extiw" title="wikipedia:es:RSA">RSA</a>, que dependen en la <a href="https://en.wikipedia.org/wiki/es:Factorizaci%C3%B3n_de_enteros#Dificultad_y_complejidad" class="extiw" title="wikipedia:es:Factorización de enteros">dificultad práctica</a> de factorizar el producto de dos números primos largos.</li>
<li>
<a href="https://en.wikipedia.org/wiki/es:ECDSA" class="extiw" title="wikipedia:es:ECDSA">ECDSA</a> y <a href="https://en.wikipedia.org/wiki/Curve25519" class="extiw" title="wikipedia:Curve25519">Ed25519</a>, que dependen del problema de curva eliptica del <a href="https://en.wikipedia.org/wiki/es:Logaritmo_discreto" class="extiw" title="wikipedia:es:Logaritmo discreto">logaritmo discreto</a>.</li>
</ol>
<p><a href="https://en.wikipedia.org/wiki/es:Criptograf%C3%ADa_de_curva_el%C3%ADptica" class="extiw" title="wikipedia:es:Criptografía de curva elíptica">Criptografía de curva elíptica</a> (ECC) es una adición relativamente reciente al ecosistema de llaves publicas criptográficas. Una de sus ventajas más importantes es la habilidad de proveer el mismo nivel de seguridad con llaves más cortas, lo cual se transforma en menos recursos usados al crear, cifrar o descifrar mensajes y reduce los costos de transmisión y guardado.
</p>
<p>OpenSSH 7.0 hizo llaves de tipo <a rel="nofollow" class="external text" href="https://archlinux.org/news/openssh-70p1-deprecates-ssh-dss-keys/">DSA obsoletas</a> debido a vulnerabilidades descubiertas, así que las únicas opciones en el sistema criptográfico son RSA  o alguno de los dos tipos de ECC.
</p>
<p>Llaves de <a href="#RSA">#RSA</a> proveerán mayor portabilidad, mientras que <a href="#Ed25519">#Ed25519</a> le proveeran la mejor seguridad requiriendo versiones recientes de servidor y cliente. <a href="#Ed25519">#Ed25519</a> es probablemente más compatible que Ed25519 (aunque menos que RSA), pero sospechas sobre su seguridad existen (ver abajo).
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Estas llaves son usadas al autenticar un usuario, seleccionar una llave más segura no quiere decir que más recursos de CPU se usaran cuando se transfieren datos por SSH.</div>
<h4><span class="mw-headline" id="RSA">RSA</span></h4>
<p><code>ssh-keygen</code> usa por defecto RSA, así que no hay necesidad de especificarlo con el parámetro <code>-t</code>. Este provee la  mejor compatibilidad de todos los algoritmos, pero requiere que la llave sea más larga para proveer suficiente seguridad.
</p>
<p>El tamaño mínimo de la llave es 1024 bits,por defecto es 2048 (vea <span class="plainlinks archwiki-template-man" title="$ man 1 ssh-keygen"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/ssh-keygen.1">ssh-keygen(1)</a></span>), el máximo es 16384.
</p>
<p>Si se desea generar un par de llaves RSA más seguro, simplemente use el parámetro <code>-b</code> con el valor bit deseado:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ssh-keygen -b 4096
</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Generating public/private rsa key pair.
Enter file in which to save the key (/home/&lt;username&gt;/.ssh/id_rsa):
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in /home/&lt;username&gt;/.ssh/id_rsa.
Your public key has been saved in /home/&lt;username&gt;/.ssh/id_rsa.pub.
The key fingerprint is:
SHA256:+Pqo84NC+vAQQ9lUV0z+/zPHsyCe8oZpy6hLkIa7qfk &lt;username&gt;@&lt;hostname&gt;
The key's randomart image is:
+---[RSA 4096]----+
|   ... .+o       |
|  +   . ..       |
| o .     .       |
|. . .  .  .      |
|o. +  . S  .     |
| o+ .  .    .    |
|o+   o  . o. o . |
|.=+ + .oo=..o o+o|
|+=E..**+oo=+   o*|
+----[SHA256]-----+</pre>
<p>Es importante tener en cuenta que existen desventajas en llaves más largas.<a rel="nofollow" class="external autonumber" href="https://security.stackexchange.com/a/25377">[1]</a><a rel="nofollow" class="external autonumber" href="https://www.gnupg.org/faq/gnupg-faq.html#no_default_of_rsa4096">[2]</a> Las preguntas frecuentes del proyecto GnuPG dice: "<i>Si se desea más seguridad que RSA-2048, la mejor opción es usar curvas elípticas en lugar de seguir usando RSA</i>".<a rel="nofollow" class="external autonumber" href="https://www.gnupg.org/faq/gnupg-faq.html#please_use_ecc">[3]</a>
</p>
<p>En contraste, en un reporte de <a rel="nofollow" class="external text" href="https://web.archive.org/web/20160420221628/https://www.nsa.gov/ia/programs/suiteb_cryptography/index.shtml">sistema Criptográfico de la NSA</a> se sugiere una llave mínima de 3072-bit para RSA mientras "<i>[se prepara] la transición al algoritmo resistente a computadores cuanticos</i>".<a rel="nofollow" class="external autonumber" href="https://www.keylength.com/en/6/">[4]</a>
</p>
<h4><span class="mw-headline" id="ECDSA">ECDSA</span></h4>
<p>El algoritmo de firmado de curva elíptica (ECDSA, siglas en ingles), fue introducido como el algoritmo recomendado de autenticación <a rel="nofollow" class="external text" href="https://www.openssh.com/txt/release-5.7">en OpenSSH 5.7</a>. Algunos vendedores deshabilitaron la implementación requerida debido a potenciales brechas de patentes.
</p>
<p>Hay dos fuentes de preocupación con este algoritmo:
</p>
<ol>
<li>
<i>Preocupación política</i>, la confianza de productos producidos por NIST <a rel="nofollow" class="external text" href="https://crypto.stackexchange.com/questions/10263/should-we-trust-the-nist-recommended-ecc-parameters">es cuestionada</a> después de revelaciones que la NSA insertan backdoors en software, hardware y estándares publicados. Criptografos conocidos <a rel="nofollow" class="external text" href="https://www.schneier.com/blog/archives/2013/09/the_nsa_is_brea.html#c1675929">expresaron</a> <a rel="nofollow" class="external text" href="https://safecurves.cr.yp.to/rigid.html">dudas</a>
</li>
<li>
<a rel="nofollow" class="external text" href="https://www.hyperelliptic.org/tanja/vortraege/20130531.pdf">sobre</a> las curvas fabricadas por NIST, y como voluntariamente en el pasado las ha hecho <a rel="nofollow" class="external text" href="https://www.schneier.com/blog/archives/2007/11/the_strange_sto.html">más</a> <a rel="nofollow" class="external text" href="https://www.scientificamerican.com/article/nsa-nist-encryption-scandal/">susceptibles</a>.</li>
<li>
<i>Preocupación técnica</i>, sobre la dificultad de <a rel="nofollow" class="external text" href="https://blog.cr.yp.to/20140323-ecdsa.html">implementar el estándar adecuadamente</a> y la <a rel="nofollow" class="external text" href="https://www.gossamer-threads.com/lists/openssh/dev/57162#57162">lentitud y fallas de diseño</a> que reducen la seguridad en implementaciones insuficientemente precavidas.</li>
</ol>
<p>Estas preocupaciones están mejor resumidas en <a rel="nofollow" class="external text" href="https://git.libssh.org/projects/libssh.git/tree/doc/curve25519-sha256@libssh.org.txt#n4">libssh curve25519 introduction</a> (en ingles). Aunque las preocupaciones políticas todavía son debatidas, hay un <a rel="nofollow" class="external text" href="https://news.ycombinator.com/item?id=7597653">consenso</a> que <a href="#Ed25519">#Ed25519</a> es técnicamente superior y debería ser preferida.
</p>
<h4><span class="mw-headline" id="Ed25519">Ed25519</span></h4>
<p><a rel="nofollow" class="external text" href="https://ed25519.cr.yp.to/">Ed25519</a> fue introducida en <a rel="nofollow" class="external text" href="https://www.openssh.com/txt/release-6.5">OpenSSH 6.5</a>  en Enero de 2014: "<i>Ed25519 es un esquema de firmado con curva elíptica que ofrece mejor seguridad que ECDSA y rendimiento como DSA</i>". Sus mejores ventajas son su velocidad, resistencia a ataques de canal de lado y la ausencia de constantes embebidas en el codigo.<a rel="nofollow" class="external autonumber" href="https://git.libssh.org/projects/libssh.git/tree/doc/curve25519-sha256@libssh.org.txt">[5]</a> Vea también <a rel="nofollow" class="external text" href="https://blog.mozilla.org/warner/2011/11/29/ed25519-keys/">este blog</a> por un desarrollador de Mozilla explicando como funciona.
</p>
<p>Esta implementado en varias <a href="https://en.wikipedia.org/wiki/Curve25519#Popularity" class="extiw" title="wikipedia:Curve25519">aplicaciones y librerías</a> y es el  <a rel="nofollow" class="external text" href="https://www.libssh.org/2013/11/03/openssh-introduces-curve25519-sha256libssh-org-key-exchange/">algoritmo por defecto</a> (lo cual diferente a <i>firmado</i> de llaves) en OpenSSH.
</p>
<p>Un par de llaves SSH de tipo Ed25519 se pueden generar ejecutando:
</p>
<pre>$ ssh-keygen -t ed25519
</pre>
<p>No hay necesidad de elegir el tamaño de la llave, ya que todas las llaves Ed25519 tienen 256 bits. Estas también dependen del <a rel="nofollow" class="external text" href="https://www.gossamer-threads.com/lists/openssh/dev/57162#57162">nuevo formato de llaves</a> el cual "<i>usa derivation de llaves basada en la función de bcrypt, lo cual hace que ataques de fuerza bruta en contra de llaves robadas sean mucho más lentos</i>".
</p>
<p>Por esas razones, compatibilidad con versiones antiguas de OpenSSH o con <a href="/title/Secure_Shell_(Espa%C3%B1ol)#Otros_servidores_y_clientes_SSH" class="mw-redirect" title="Secure Shell (Español)">otros servidores y clientes SSH</a> puede ser complicada.
</p>
<h3>
<span id="Selecci.C3.B3n_de_ubicaci.C3.B3n_y_contrase.C3.B1a"></span><span class="mw-headline" id="Selección_de_ubicación_y_contraseña">Selección de ubicación y contraseña</span>
</h3>
<p>Al ejecutar el comando <code>ssh-keygen</code>, se le preguntara por la ubicación deseada de su llave privada. Por defecto, las llaves son guardadas en la carpeta <code>~/.ssh/</code> y se les nombra de acuerdo y tipo de encriptado usado. Se recomienda que acepte el nombre y la ubicación predeterminados para que los ejemplos de códigos posteriores en este artículo funcionen correctamente.
</p>
<p>Cuando se le pregunte por una contraseña, seleccione algo que no sea fácil de adivinar. Una contraseña aleatoria y larga es generalmente mucho más difícil de descifrar si cae en manos equivocadas.
</p>
<p>También es posible crear su llave privada sin contraseña. Mientras que esto es conveniente, es necesario que entienda los riesgos asociados. Sin una contraseña, su llave privada va a ser guardada en el disco de manera no encriptada. Todos aquellos que ganen acceso al archivo de su llave privada podrán asumir su identidad en un servidor SSH. Además, sin contraseña, también debe confiar en el usuario root, que puede pasar permisos de archivos y puede acceder a su llave en cualquier momento.
</p>
<h4>
<span id="Cambiar_la_contrase.C3.B1a_de_la_llave_privada_sin_cambiar_la_llave"></span><span class="mw-headline" id="Cambiar_la_contraseña_de_la_llave_privada_sin_cambiar_la_llave">Cambiar la contraseña de la llave privada sin cambiar la llave</span>
</h4>
<p>Si la contraseña seleccionada originalmente ya no se desea o debe ser cambiada, se puede ejecutar el comando <code>ssh-keygen</code> para cambiar la contraseña sin cambiar el contenido de la llave.
</p>
<p>Para cambiar la contraseña de una llave privada RSA, ejecute:
</p>
<pre>$ ssh-keygen -f ~/.ssh/id_rsa -p
</pre>
<h4>
<span id="Manejo_de_llaves_m.C3.BAltiples"></span><span class="mw-headline" id="Manejo_de_llaves_múltiples">Manejo de llaves múltiples</span>
</h4>
<p>Es posible —aunque <a rel="nofollow" class="external text" href="https://security.stackexchange.com/questions/10963/whats-the-common-pragmatic-strategy-for-managing-key-pairs">no se considera buena práctica</a>— usar la misma llave de SSH para múltiples servidores.
</p>
<p>Claro que es relativamente fácil mantener diferentes llaves para diferente servidores usando la directiva <code>IdentityFile</code> en su archivo de configuración de OpenSSH:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.ssh/config</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Host SERVIDOR1
   IdentitiesOnly yes
   IdentityFile ~/.ssh/id_rsa_SERVIDOR1

Host SERVIDOR2
   IdentitiesOnly yes
   IdentityFile ~/.ssh/id_ed25519_SERVIDOR2
</pre>
<p>Vea <span class="plainlinks archwiki-template-man" title="$ man 5 ssh_config"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/ssh_config.5">ssh_config(5)</a></span> para una descripción completa de estas opciones.
</p>
<h2><span class="mw-headline" id="Copiar_llaves_a_un_servidor_remoto">Copiar llaves a un servidor remoto</span></h2>
<p>Una vez se generen un  par de llaves, es necesario copiar la llave pública al servidor remoto para que se pueda usar autenticación vía SSH. La llave publica lleva el mismo nombre que la llave privada excepto que tiene una extensión <code>.pub</code>. Nótese que la llave privada no se comparte y permanece en la maquina local.
</p>
<h3>
<span id="M.C3.A9todo_simple"></span><span class="mw-headline" id="Método_simple">Método simple</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Este método puede que falle si el servidor usa una shell diferente a <code>sh</code>, por ejemplo <code>tcsh</code> y usa OpenSSH mas antiguo que 6.6.1p1. Vea <a rel="nofollow" class="external text" href="https://bugzilla.redhat.com/show_bug.cgi?id=1045191">este reporte de bug</a>.</div>
<p>Si la llave publica esta en <code>~/.ssh/id_rsa.pub</code>, simplemente ejecute el siguiente comando:
</p>
<pre>$ ssh-copy-id servidor-remoto.org
</pre>
<p>Si el usuario difiere en la maquina remota, asegúrese de prefijar el usuario seguido  por <code>@</code> al nombre del servidor.
</p>
<pre>$ ssh-copy-id nombreusuarion@servidor-remoto.org
</pre>
<p>Si el nombre del archivo de la llave publica es diferente  a <code>~/.ssh/id_rsa.pub</code>, obtendrá un error diciendo <code>/usr/bin/ssh-copy-id: ERROR: No identities found</code> (Identidad no encontrada). En este caso, se debe proveer la ubicación del archivo de la llave publica explícitamente.
</p>
<pre>$ ssh-copy-id -i ~/.ssh/id_ed25519.pub nombreusuarion@servidor-remoto.org
</pre>
<p>Si el servidor esta esperando una conexión en un puerto diferente al 22 (por defecto), necesita incluirlo en el comando.
</p>
<pre>$ ssh-copy-id -i ~/.ssh/id_ed25519.pub -p 221 nombreusuarion@servidor-remoto.org
</pre>
<h3>
<span id="M.C3.A9todo_manual"></span><span class="mw-headline" id="Método_manual">Método manual</span>
</h3>
<p>Por defecto, para OpenSSH, la llave publica necesita ser agregada en el archivo <code>~/.ssh/authorized_keys</code>. Se inicia copiando la llave publica al servidor remoto.
</p>
<pre>$ scp ~/.ssh/id_ed25519.pub nombreusuarion@servidor-remoto.org:
</pre>
<p>Esto copiara la llave publica (<code>id_ed25519.pub</code>) en el directorio raíz del usuario en el servidor remoto vía <code>scp</code> (nótese los <code>:</code> al final de la dirección del servidor).
</p>
<p>En el servidor remoto, sera necesario crear el directorio <code>~/.ssh</code> en caso de no existir, y agregar la llave al archivo <code>authorized_keys</code>:
</p>
<pre>$ ssh nombreusuarion@servidor-remoto.org
nombreusuarion@servidor-remoto.org's password:
$ mkdir ~/.ssh
$ chmod 700 ~/.ssh
$ cat ~/id_ed25519.pub &gt;&gt; ~/.ssh/authorized_keys
$ rm ~/id_ed25519.pub
$ chmod 600 ~/.ssh/authorized_keys
</pre>
<p>Los últimos dos comando eliminan la llave publica del servidor ( la cual ya no se necesita), y otorgan los permisos correctos al archivo <code>authorized_keys</code>.
</p>
<h2><span class="mw-headline" id="Agentes_de_SSH">Agentes de SSH</span></h2>
<p>Si la llave privada esta encriptada con una contraseña, esta debe ser introducida cada vez que se intente conectar a un servidor. Cada ejecución individual de programas como <code>ssh</code> o <code>scp</code> necesitaran la contraseña para descifrar la llave privada antes de autentificar y proceder.
</p>
<p>Un Agente de SSH es un programa el cual guarda su llave descifrada y la provee a los diferentes clientes de SSH en su nombre. En este caso, la contraseña solo es proporcionada una vez, al agregar la llave al cache del Agente de SSH. Esto es muy conveniente al hacer conexiones de SSH frecuentes.
</p>
<p>Un Agente esta típicamente configurado a ejecutarse automáticamente cuando se inicie la sesión y persistirá hasta el cierre de la misma. Una variedad de Agentes, GUIs y configuraciones están disponibles para lograr este objetivo. Esta sección proveerá una reseña de un numero de diferentes soluciones que se pueden adaptar a las necesidades especificas.
</p>
<h3><span class="mw-headline" id="ssh-agent">ssh-agent</span></h3>
<p><code>ssh-agent</code> es el agente por defecto incluido en OpenSSH. Puede ser usado directamente o puede ser usado como back-end de algún otro programa, algunos ejemplos serán discutidos en la parte inferior.
</p>
<p>Cuando se ejecuta <code>ssh-agent</code>, se mostrará en pantalla las variables de entorno que serán usadas, y una tarea de fondo sera creada.
</p>
<pre>$ ssh-agent
SSH_AUTH_SOCK=/tmp/ssh-vEGjCM2147/agent.2147; export SSH_AUTH_SOCK;
SSH_AGENT_PID=2148; export SSH_AGENT_PID;
echo Agent pid 2148;
</pre>
<p>Para hacer uso de estas variables, ejecute <code>eval</code>.
</p>
<pre>$ eval `ssh-agent`
Agent pid 2157
</pre>
<p>Ahora que <code>ssh-agent</code> se esta ejecutando, es necesario agregar la llave privada.
</p>
<pre>$ ssh-add ~/.ssh/id_ed25519
Enter passphrase for /home/user/.ssh/id_ed25519:
Identity added: /home/user/.ssh/id_ed25519 (/home/user/.ssh/id_ed25519)
</pre>
<p>Si la llave esta encriptada, <code>ssh-add</code> preguntara por la contraseña. Una vez que la llave  privada ha sido añadida satisfactoriamente al agente, sera posible hacer conexiones de SSH sin necesidad de ingresar la contraseña.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Sugerencia:</strong> Para hacer que todos los clientes de <code>ssh</code>, incluyendo <code>git</code> guarden la llave en el agente en el primer uso, agregue la configuración <code>AddKeysToAgent yes</code> al archivo <code>~/.ssh/config</code>. Otros valores posibles son <code>confirm</code>, <code>ask</code> y <code>no</code> (por defecto).</div>
<p>Para iniciar el agente automáticamente y asegurarse que solamente un proceso de <code>ssh-agent</code> se esta ejecutando, agregue lo siguiente al archivo <code>~/.bashrc</code>:
</p>
<pre>if ! pgrep -u "$USER" ssh-agent &gt; /dev/null; then
    ssh-agent &gt; ~/.ssh-agent-thing
fi
if [[ "$SSH_AGENT_PID" == "" ]]; then
    eval "$(&lt;~/.ssh-agent-thing)"
fi
</pre>
<p>Esto ejecutara un proceso de <code>ssh-agent</code> si no existe alguno. Si hay un proceso ejecutándose, se tomara el resultado de <code>ssh-agent</code> y se evaluara para configurar las variables de entorno necesarias.
</p>
<p>También existen GUIs para <code>ssh-agent</code> y agentes alternativos descritos posteriormente que evitan este problema.
</p>
<h4>
<span id="Iniciar_ssh-agent_con_systemd.2Fuser"></span><span class="mw-headline" id="Iniciar_ssh-agent_con_systemd/user">Iniciar ssh-agent con systemd/user</span>
</h4>
<p>Es posible usar <a href="/title/Systemd/User_(Espa%C3%B1ol)" class="mw-redirect" title="Systemd/User (Español)">systemd/user</a> lo cual facilita el inicio del agente.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/systemd/user/ssh-agent.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=SSH key agent

[Service]
Type=simple
Environment=SSH_AUTH_SOCK=%t/ssh-agent.socket
ExecStart=/usr/bin/ssh-agent -D -a $SSH_AUTH_SOCK

[Install]
WantedBy=<i>default</i>.target
</pre>
<p>Agregue <code>SSH_AUTH_SOCK   DEFAULT="${XDG_RUNTIME_DIR}/ssh-agent.socket"</code> al archivo <code>~/.pam_environment</code>. Después <a href="/title/Systemd_(Espa%C3%B1ol)#Utilizar_las_unidades" title="Systemd (Español)">active</a> o <a href="/title/Systemd_(Espa%C3%B1ol)#Utilizar_las_unidades" title="Systemd (Español)">active inicio automatico</a> de la unidad.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> SI esta usando GNOME, esta variable de entorno es sobre escrita por defecto. Véase <a href="/title/GNOME/Keyring_(Espa%C3%B1ol)#Desactivar_los_componentes_del_demonio_del_llavero" class="mw-redirect" title="GNOME/Keyring (Español)">GNOME/Keyring (Español)#Desactivar los componentes del demonio del llavero</a>.</div>
<h3><span class="mw-headline" id="Agente_GnuPG">Agente GnuPG</span></h3>
<p>El <a href="/title/GnuPG_(Espa%C3%B1ol)#gpg-agent" title="GnuPG (Español)">gpg-agent</a> tiene emulación de OpenSSH. Vea <a href="/title/GnuPG#SSH_agent" title="GnuPG">GnuPG#SSH agent</a> para la configuracion necesaria.
</p>
<h3><span class="mw-headline" id="Keychain">Keychain</span></h3>
<p><a rel="nofollow" class="external text" href="https://www.funtoo.org/en/security/keychain/intro/">Keychain</a> administra una o mas llaves privadas, que se le hayan especificado. Cuando se inicializa, preguntara por la frase-de-paso para la clave privada, y la guardara. De esta manera sus llaves privadas estarán protegidas por password, pero no deberá ingresar su password una y otra vez.
</p>
<p><a href="/title/Help:Reading_(Espa%C3%B1ol)#Instalaci.C3.B3n_de_paquetes" title="Help:Reading (Español)">Instale</a> el paquete <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=keychain">keychain</a></span>, disponible en los <a href="/title/Official_repositories_(Espa%C3%B1ol)" title="Official repositories (Español)">repositorios oficiales</a> 
</p>
<p>Cree el siguiente archivo y hágalo ejecutable:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/profile.d/keychain.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">eval `keychain --eval --nogui -Q -q id_rsa`
</pre>
<p>o
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/profile.d/keychain.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/usr/bin/keychain -Q -q --nogui ~/.ssh/id_dsa
[[ -f $HOME/.keychain/$HOSTNAME-sh ]] &amp;&amp; source $HOME/.keychain/$HOSTNAME-sh
</pre>
<p>o
</p>
<p>anexe
</p>
<pre>eval `keychain --eval --agents ssh id_dsa`
</pre>
<p>a su <code>.bashrc</code> o <code>.bash_profile</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Sugerencia:</strong> Si quiere mayor seguridad reemplace -Q con --clear pero es menos conveniente.</div>
<p>Si es necesario, reemplace <code>~/.ssh/id_dsa</code> con <code>~/.ssh/id_rsa</code>. Para aquellos que usan una shell que no es Bash, vean<code>keychain --help</code> o <span class="plainlinks archwiki-template-man" title="$ man 1 keychain"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/keychain.1">keychain(1)</a></span> para detalles en otras Shells.
</p>
<p>Cierre su shell y vuélvala a abrir, Keychain deberá aparecer y si es la primera vez que corre, le preguntara por la frase-de-paso de la llave privada especificada.
</p>
<h3><span class="mw-headline" id="x11-show-askpass">x11-show-askpass</span></h3>
<p>Necesita iniciar ssh-agent cada vez que inicia una nueva sesión de X. El ssh-agent se cerrara cuando al sesión de X termine
</p>
<p>Se puede instalar una variante de x11-ssh-askpass la cual le pedirá su frase-de-paso cada vez que abra una nueva sesión de X. También puede usar el x11-ssh-askpass original de <a href="/title/AUR" class="mw-redirect" title="AUR">AUR</a> o ksshkpass (usa kdelibs):
</p>
<pre># pacman -S ksshaskpass
</pre>
<p>o openssh-askpass (usa qt):
</p>
<pre># pacman -S openssh-askpass
</pre>
<p>Luego de instalarlo, cierre su sesión de X y recarguela a partir de ahora se le preguntara su frase-de-paso en el inicio de la sesión X.
</p>
<h3>
<span id="GNOME_Keyring_.28llavero.29"></span><span class="mw-headline" id="GNOME_Keyring_(llavero)">GNOME Keyring (llavero)</span>
</h3>
<p>Si usa el escritorio <a href="/title/GNOME_(Espa%C3%B1ol)" title="GNOME (Español)">GNOME</a>, la herramienta <a href="/title/GNOME/Keyring_(Espa%C3%B1ol)" class="mw-redirect" title="GNOME/Keyring (Español)">GNOME Keyring</a> puede ser usada como un agente de SSH. Véase <a href="/title/GNOME/Keyring_(Espa%C3%B1ol)" class="mw-redirect" title="GNOME/Keyring (Español)">GNOME Keyring</a>.
</p>
<h2>
<span id="Resoluci.C3.B3n_de_problemas"></span><span class="mw-headline" id="Resolución_de_problemas">Resolución de problemas</span>
</h2>
<p>Si cree que el servidor SSH esta ignorando sus claves, asegúrese de que tiene los permisos adecuados sobre los archivos relevantes.
</p>
<p>Para la maquina local:
</p>
<pre>$ chmod 700 ~/
$ chmod 700 ~/.ssh
$ chmod 600 ~/.ssh/id_rsa
</pre>
<p>Para la maquina remota:
</p>
<pre>$ chmod 700 ~/
$ chmod 700 ~/.ssh
$ chmod 600 ~/.ssh/authorized_keys
</pre>
<p>Si no fuera eso, ejecute el servidor ssh en modo de depuración y monitoree la salida mientras se hace la conexión:
</p>
<pre># /usr/sbin/sshd -d
</pre>
<h2>
<span id="Links_Utiles_.2F_Informacion_.28en_ingles.29"></span><span class="mw-headline" id="Links_Utiles_/_Informacion_(en_ingles)">Links Utiles / Informacion (en ingles)</span>
</h2>
<ul>
<li><a rel="nofollow" class="external text" href="http://www.arches.uga.edu/~pkeck/ssh/">Como: Configurar las llaves SSH</a></li>
<li><a rel="nofollow" class="external text" href="https://www-106.ibm.com/developerworks/linux/library/l-keyc.html">Manejo de llaves en OpenSSH , Parte 1</a></li>
<li><a rel="nofollow" class="external text" href="https://www-106.ibm.com/developerworks/linux/library/l-keyc2/">Manejo de llaves en OpenSSH , Parte 2</a></li>
<li><a rel="nofollow" class="external text" href="https://www-106.ibm.com/developerworks/library/l-keyc3/">Manejo de llaves en OpenSSH , Parte 3</a></li>
<li><a rel="nofollow" class="external text" href="https://kimmo.suominen.com/docs/ssh/">Comenzado con  SSH</a></li>
<li>Manual: <a rel="nofollow" class="external text" href="https://www.openbsd.org/cgi-bin/man.cgi?query=ssh-keygen&amp;apropos=0&amp;sektion=0&amp;manpath=OpenBSD+Current&amp;arch=i386&amp;format=html">ssh-keygen(1)</a>
</li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="/title/Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="/title/Category:Secure_Shell_(Espa%C3%B1ol)" title="Category:Secure Shell (Español)">Secure Shell (Español)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="/title/Category:Pages_or_sections_flagged_with_Template:Translateme_(Espa%C3%B1ol)" title="Category:Pages or sections flagged with Template:Translateme (Español)">Pages or sections flagged with Template:Translateme (Español)</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=SSH_keys_(Espa%C3%B1ol)&amp;oldid=669921">https://wiki.archlinux.org/index.php?title=SSH_keys_(Español)&amp;oldid=669921</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 9 May 2021, at 10:15.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="/title/ArchWiki:Privacy_policy" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="/title/ArchWiki:About" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="/title/ArchWiki:General_disclaimer" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
