<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>ipset (Español) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Ipset_Español rootpage-Ipset_Español skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">ipset (Español)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<p><span></span>
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Estado de la traducción:</strong> este artículo es una traducción de <a href="../en/Ipset.html" title="Ipset">Ipset</a> revisada por última vez el <b>2020-08-07</b>. Si advierte que la versión inglesa <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Ipset&amp;diff=0&amp;oldid=630338">ha cambiado</a> puede actualizar la traducción <a href="../es/ArchWiki:f6ecee2fb17812f6654b3a6ff807d392.html" class="mw-redirect" title="ArchWiki:Translation Team/Contributing (Español)">usted mismo</a> o avisar al <a href="../es/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Español)">equipo de traducción</a>.</div>
<div class="archwiki-template-meta-related-articles-start">
<p>Artículos relacionados</p>
<ul>
<li><a href="../es/Category:Firewalls.html" class="mw-redirect" title="Firewalls (Español)">Firewalls (Español)</a></li>
<li><a href="../es/Iptables.html" title="Iptables (Español)">Iptables (Español)</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="http://ipset.netfilter.org/">ipset</a> es una aplicación complementaria para el <a href="../es/Category:Firewalls.html" class="mw-redirect" title="Firewalls (Español)">cortafuegos</a> de Linux <a href="../es/Iptables.html" title="Iptables (Español)">iptables</a>. Le permite configurar reglas para bloquear rápida y fácilmente un conjunto de direcciones IP, entre otras cosas.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Instalaci%C3%B3n"><span class="tocnumber">1</span> <span class="toctext">Instalación</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Configuraci%C3%B3n"><span class="tocnumber">2</span> <span class="toctext">Configuración</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Bloquear_una_lista_de_conexiones_de_red"><span class="tocnumber">2.1</span> <span class="toctext">Bloquear una lista de conexiones de red</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Bloquear_una_lista_de_direcciones_IP"><span class="tocnumber">2.2</span> <span class="toctext">Bloquear una lista de direcciones IP</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Hacer_que_ipset_sea_persistente"><span class="tocnumber">2.3</span> <span class="toctext">Hacer que ipset sea persistente</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Bloquear_con_PeerGuardian_y_otras_listas_de_bloqueo"><span class="tocnumber">2.4</span> <span class="toctext">Bloquear con PeerGuardian y otras listas de bloqueo</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Otras_%C3%B3rdenes"><span class="tocnumber">3</span> <span class="toctext">Otras órdenes</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Optimizaci%C3%B3n"><span class="tocnumber">4</span> <span class="toctext">Optimización</span></a></li>
</ul>
</div>

<h2>
<span id="Instalaci.C3.B3n"></span><span class="mw-headline" id="Instalación">Instalación</span>
</h2>
<p><a href="../es/Help:Reading.html#Instalaci%C3%B3n_de_paquetes" class="mw-redirect" title="Install (Español)">Instale</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ipset">ipset</a></span> de los <a href="../es/Official_repositories.html" title="Official repositories (Español)">repositorios oficiales</a>.
</p>
<h2>
<span id="Configuraci.C3.B3n"></span><span class="mw-headline" id="Configuración">Configuración</span>
</h2>
<h3><span class="mw-headline" id="Bloquear_una_lista_de_conexiones_de_red">Bloquear una lista de conexiones de red</span></h3>
<p>Comience creando un nuevo «set« (<i>conjunto</i>) de direcciones de conexiones de red. Esto crea un nuevo conjunto de «hash» de direcciones de red «net» llamado «myset»:
</p>
<pre># ipset create myset hash:net
</pre>
<p>o
</p>
<pre># ipset -N myset nethash
</pre>
<p>Añada al conjunto cualquier dirección IP que desee bloquear:
</p>
<pre># ipset add myset 14.144.0.0/12
# ipset add myset 27.8.0.0/13
# ipset add myset 58.16.0.0/15
# ipset add myset 1.1.1.0/24
</pre>
<p>Finalmente, configure <a href="../es/Iptables.html" title="Iptables (Español)">iptables</a> para bloquear cualquier dirección de ese conjunto. Esta orden añadirá una regla en la parte superior de la cadena «INPUT» para que «-m» coincida con el conjunto llamado «myset» de ipset (--match-set) cuando es un paquete «src» y «DROP», descartándolo:
</p>
<pre># iptables -I INPUT -m set --match-set myset src -j DROP
</pre>
<h3><span class="mw-headline" id="Bloquear_una_lista_de_direcciones_IP">Bloquear una lista de direcciones IP</span></h3>
<p>Comience creando un nuevo «conjunto» de direcciones IP. Esto crea un nuevo conjunto «hash» de direcciones «ip» llamado «myset-ip»:
</p>
<pre># ipset create myset-ip hash:ip
</pre>
<p>o
</p>
<pre># ipset -N myset-ip iphash
</pre>
<p>Añada cualquier dirección IP que desee bloquear al conjunto:
</p>
<pre># ipset add myset-ip 1.1.1.1
# ipset add myset-ip 2.2.2.2
</pre>
<p>Finalmente, configure <a href="../es/Iptables.html" title="Iptables (Español)">iptables</a> para bloquear cualquier dirección de ese conjunto:
</p>
<pre># iptables -I INPUT -m set --match-set myset-ip src -j DROP
</pre>
<h3><span class="mw-headline" id="Hacer_que_ipset_sea_persistente">Hacer que ipset sea persistente</span></h3>
<p>El ipset que ha creado se almacena en la memoria y desaparecerá después del reinicio. Para que el ipset creado sea persistente, debe hacer lo que sigue.
</p>
<p>Primero, guarde el ipset en /etc/ipset.conf:
</p>
<pre># ipset save &gt; /etc/ipset.conf
</pre>
<p>Luego <a href="../en/Systemd.html#Using_units" class="mw-redirect" title="Enable">active</a> <code>ipset.service</code>, que funciona de manera similar a <code>iptables.service</code> para restaurar las <a href="../en/Iptables.html#Configuration_and_usage" title="Iptables">reglas iptables</a>.
</p>
<h3><span class="mw-headline" id="Bloquear_con_PeerGuardian_y_otras_listas_de_bloqueo">Bloquear con PeerGuardian y otras listas de bloqueo</span></h3>
<p>La herramienta <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pg2ipset-git/">pg2ipset-git</a></span><sup><small>AUR</small></sup> del autor de Maeyanie.com, junto con el script <a rel="nofollow" class="external text" href="https://github.com/ilikenwf/pg2ipset/blob/master/ipset-update.sh">ipset-update.sh</a> se pueden usar con cron para actualizar automáticamente varias listas de bloqueo. Actualmente, de manera predeterminada, se implementa el bloqueo de: país, nodo de salida tor y lista pg2 de Bluetrack.
</p>
<h2>
<span id="Otras_.C3.B3rdenes"></span><span class="mw-headline" id="Otras_órdenes">Otras órdenes</span>
</h2>
<p>Para ver los conjuntos:
</p>
<pre># ipset list
</pre>
<p>o
</p>
<pre># ipset -L
</pre>
<p>Para eliminar un conjunto llamado «myset»:
</p>
<pre># ipset destroy myset
</pre>
<p>o
</p>
<pre># ipset -X myset
</pre>
<p>Para eliminar todos los conjuntos:
</p>
<pre># ipset destroy
</pre>
<p>Consulte la página de manual de ipset para obtener más información.
</p>
<h2>
<span id="Optimizaci.C3.B3n"></span><span class="mw-headline" id="Optimización">Optimización</span>
</h2>
<p>La herramienta <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/iprange/">iprange</a></span><sup><small>AUR</small></sup> puede ayudar a reducir las entradas en ipset.conf fusionando rangos adyacentes o eliminando rangos superpuestos. Esto puede mejorar el rendimiento del enrutador/cortafuegos si el tamaño de la tabla es enorme. Esta herramienta también puede convertir una lista de nombres de servidores a IP.
</p>
<p>Aunque ipset está diseñado para poder escalar bien, eso no significa que lo haga infinitamente. En particular, algunas paises tienen espacios de direcciones IP muy grandes, lo que hará que el bloqueo geográfico sea ineficiente.
</p>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../es/Category:Firewalls.html" title="Category:Firewalls (Español)">Firewalls (Español)</a></li></ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Ipset_(Espa%C3%B1ol)&amp;oldid=630339">https://wiki.archlinux.org/index.php?title=Ipset_(Español)&amp;oldid=630339</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 7 August 2020, at 16:07.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
