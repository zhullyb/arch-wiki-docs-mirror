<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Security (Español) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Security_Español rootpage-Security_Español skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Security (Español)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Estado de la traducción:</strong> esta traducción de <a href="/title/Security" title="Security">Security</a> fue revisada el <b>2020-02-21</b>. Si existen <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Security&amp;diff=0&amp;oldid=598274">cambios</a> puede <a href="/title/ArchWiki:Translation_Team/Contributing_(Espa%C3%B1ol)" class="mw-redirect" title="ArchWiki:Translation Team/Contributing (Español)">actualizarla</a> o avisar al <a href="/title/ArchWiki:Translation_Team_(Espa%C3%B1ol)" title="ArchWiki:Translation Team (Español)">equipo de traducción</a>.</div>
<div class="archwiki-template-meta-related-articles-start">
<p>Artículos relacionados</p>
<ul>
<li><a href="/title/Arch_Security_Team" title="Arch Security Team">Arch Security Team</a></li>
<li><a href="/title/General_recommendations_(Espa%C3%B1ol)" title="General recommendations (Español)">General recommendations (Español)</a></li>
<li><a href="/title/PAM_(Espa%C3%B1ol)" title="PAM (Español)">PAM (Español)</a></li>
<li><a href="/title/Capabilities" title="Capabilities">Capabilities</a></li>
<li><a href="/title/List_of_applications_(Espa%C3%B1ol)/Security_(Espa%C3%B1ol)" title="List of applications (Español)/Security (Español)">List of applications (Español)/Security (Español)</a></li>
<li><a href="/title/Security_package_guidelines" class="mw-redirect" title="Security package guidelines">Security package guidelines</a></li>
</ul>
</div>
<p>Este artículo contiene recomendaciones y buenas prácticas para <a href="https://en.wikipedia.org/wiki/es:Endurecimiento_(inform%C3%A1tica)" class="extiw" title="wikipedia:es:Endurecimiento (informática)">fortalecer la seguridad</a> de un sistema Arch Linux.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Conceptos"><span class="tocnumber">1</span> <span class="toctext">Conceptos</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Contrase%C3%B1as"><span class="tocnumber">2</span> <span class="toctext">Contraseñas</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Utilizaci%C3%B3n_de_contrase%C3%B1as_seguras"><span class="tocnumber">2.1</span> <span class="toctext">Utilización de contraseñas seguras</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Gesti%C3%B3n_de_contrase%C3%B1as"><span class="tocnumber">2.2</span> <span class="toctext">Gestión de contraseñas</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Cifrado_de_contrase%C3%B1as"><span class="tocnumber">2.3</span> <span class="toctext">Cifrado de contraseñas</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Pol%C3%ADtica_de_contrase%C3%B1as_seguras_con_pam_cracklib"><span class="tocnumber">2.4</span> <span class="toctext">Política de contraseñas seguras con pam_cracklib</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7">
<a href="#CPU"><span class="tocnumber">3</span> <span class="toctext">CPU</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#Microc%C3%B3digo"><span class="tocnumber">3.1</span> <span class="toctext">Microcódigo</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Desactivaci%C3%B3n_de_Hyper-Threading"><span class="tocnumber">3.2</span> <span class="toctext">Desactivación de Hyper-Threading</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Vulnerabilidades_de_la_CPU"><span class="tocnumber">3.3</span> <span class="toctext">Vulnerabilidades de la CPU</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11">
<a href="#Memoria"><span class="tocnumber">4</span> <span class="toctext">Memoria</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#Versi%C3%B3n_segura_de_malloc"><span class="tocnumber">4.1</span> <span class="toctext">Versión segura de malloc</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-13">
<a href="#Almacenamiento"><span class="tocnumber">5</span> <span class="toctext">Almacenamiento</span></a>
<ul>
<li class="toclevel-2 tocsection-14"><a href="#Cifrado_de_discos"><span class="tocnumber">5.1</span> <span class="toctext">Cifrado de discos</span></a></li>
<li class="toclevel-2 tocsection-15">
<a href="#Sistema_de_archivos"><span class="tocnumber">5.2</span> <span class="toctext">Sistema de archivos</span></a>
<ul>
<li class="toclevel-3 tocsection-16"><a href="#Opciones_de_montaje"><span class="tocnumber">5.2.1</span> <span class="toctext">Opciones de montaje</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-17"><a href="#Permisos_de_archivos"><span class="tocnumber">5.3</span> <span class="toctext">Permisos de archivos</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-18">
<a href="#Configuraci%C3%B3n_de_usuarios"><span class="tocnumber">6</span> <span class="toctext">Configuración de usuarios</span></a>
<ul>
<li class="toclevel-2 tocsection-19"><a href="#Retraso_despu%C3%A9s_de_un_intento_fallido_de_inicio_de_sesi%C3%B3n"><span class="tocnumber">6.1</span> <span class="toctext">Retraso después de un intento fallido de inicio de sesión</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Bloqueo_de_un_usuario_despu%C3%A9s_de_tres_intentos_fallidos_de_inicio_de_sesi%C3%B3n"><span class="tocnumber">6.2</span> <span class="toctext">Bloqueo de un usuario después de tres intentos fallidos de inicio de sesión</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#N%C3%BAmero_m%C3%A1ximo_de_procesos"><span class="tocnumber">6.3</span> <span class="toctext">Número máximo de procesos</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#Iniciar_Xorg_sin_la_cuenta_de_root"><span class="tocnumber">6.4</span> <span class="toctext">Iniciar Xorg sin la cuenta de root</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-23">
<a href="#Restringir_el_uso_de_la_cuenta_root"><span class="tocnumber">7</span> <span class="toctext">Restringir el uso de la cuenta root</span></a>
<ul>
<li class="toclevel-2 tocsection-24">
<a href="#Utilizar_sudo_en_lugar_de_su"><span class="tocnumber">7.1</span> <span class="toctext">Utilizar sudo en lugar de su</span></a>
<ul>
<li class="toclevel-3 tocsection-25"><a href="#Editar_archivos_utilizando_sudo"><span class="tocnumber">7.1.1</span> <span class="toctext">Editar archivos utilizando sudo</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-26">
<a href="#Limitar_el_inicio_de_sesi%C3%B3n_de_root"><span class="tocnumber">7.2</span> <span class="toctext">Limitar el inicio de sesión de root</span></a>
<ul>
<li class="toclevel-3 tocsection-27"><a href="#Permitir_el_uso_de_su_a_ciertos_usuarios"><span class="tocnumber">7.2.1</span> <span class="toctext">Permitir el uso de su a ciertos usuarios</span></a></li>
<li class="toclevel-3 tocsection-28"><a href="#Denegar_el_inicio_de_sesi%C3%B3n_en_SSH"><span class="tocnumber">7.2.2</span> <span class="toctext">Denegar el inicio de sesión en SSH</span></a></li>
<li class="toclevel-3 tocsection-29"><a href="#Restringir_el_inicio_de_sesi%C3%B3n_con_access.conf"><span class="tocnumber">7.2.3</span> <span class="toctext">Restringir el inicio de sesión con access.conf</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-30">
<a href="#Control_de_Acceso_Obligatorio_(MAC)"><span class="tocnumber">8</span> <span class="toctext">Control de Acceso Obligatorio (MAC)</span></a>
<ul>
<li class="toclevel-2 tocsection-31"><a href="#MAC_basado_en_nombre_de_ruta"><span class="tocnumber">8.1</span> <span class="toctext">MAC basado en nombre de ruta</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#Etiquetas_MAC"><span class="tocnumber">8.2</span> <span class="toctext">Etiquetas MAC</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#Listas_de_Control_de_Acceso"><span class="tocnumber">8.3</span> <span class="toctext">Listas de Control de Acceso</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-34">
<a href="#Mejoras_en_la_seguridad_del_Kernel"><span class="tocnumber">9</span> <span class="toctext">Mejoras en la seguridad del Kernel</span></a>
<ul>
<li class="toclevel-2 tocsection-35">
<a href="#Autoprotecci%C3%B3n_del_Kernel_/_reducci%C3%B3n_de_vulnerabilidades"><span class="tocnumber">9.1</span> <span class="toctext">Autoprotección del Kernel / reducción de vulnerabilidades</span></a>
<ul>
<li class="toclevel-3 tocsection-36">
<a href="#ASLR_en_procesos_de_usuario"><span class="tocnumber">9.1.1</span> <span class="toctext">ASLR en procesos de usuario</span></a>
<ul>
<li class="toclevel-4 tocsection-37"><a href="#Procesos_de_64-bit"><span class="tocnumber">9.1.1.1</span> <span class="toctext">Procesos de 64-bit</span></a></li>
<li class="toclevel-4 tocsection-38"><a href="#Procesos_de_32-bit_(en_un_kernel_x86_64)"><span class="tocnumber">9.1.1.2</span> <span class="toctext">Procesos de 32-bit (en un kernel x86_64)</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2 tocsection-39"><a href="#Restricci%C3%B3n_de_acceso_a_los_logs_del_kernel"><span class="tocnumber">9.2</span> <span class="toctext">Restricción de acceso a los logs del kernel</span></a></li>
<li class="toclevel-2 tocsection-40"><a href="#Ocultaci%C3%B3n_de_punteros_del_kernel_en_/proc/kallsyms"><span class="tocnumber">9.3</span> <span class="toctext">Ocultación de punteros del kernel en /proc/kallsyms</span></a></li>
<li class="toclevel-2 tocsection-41"><a href="#Mejoras_en_la_seguridad_de_BPF"><span class="tocnumber">9.4</span> <span class="toctext">Mejoras en la seguridad de BPF</span></a></li>
<li class="toclevel-2 tocsection-42">
<a href="#El_alcance_de_ptrace"><span class="tocnumber">9.5</span> <span class="toctext">El alcance de ptrace</span></a>
<ul>
<li class="toclevel-3 tocsection-43"><a href="#Ejemplos_de_depuradores_que_funcionan"><span class="tocnumber">9.5.1</span> <span class="toctext">Ejemplos de depuradores que funcionan</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-44"><a href="#hidepid"><span class="tocnumber">9.6</span> <span class="toctext">hidepid</span></a></li>
<li class="toclevel-2 tocsection-45"><a href="#Restricci%C3%B3n_de_la_carga_de_m%C3%B3dulos"><span class="tocnumber">9.7</span> <span class="toctext">Restricción de la carga de módulos</span></a></li>
<li class="toclevel-2 tocsection-46"><a href="#Desactivaci%C3%B3n_de_kexec"><span class="tocnumber">9.8</span> <span class="toctext">Desactivación de kexec</span></a></li>
<li class="toclevel-2 tocsection-47"><a href="#Restricci%C3%B3n_de_acceso_al_kernel_(kernel_lockdown)"><span class="tocnumber">9.9</span> <span class="toctext">Restricción de acceso al kernel (kernel lockdown)</span></a></li>
<li class="toclevel-2 tocsection-48"><a href="#Desactivaci%C3%B3n_de_hyper-threading_2"><span class="tocnumber">9.10</span> <span class="toctext">Desactivación de hyper-threading</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-49">
<a href="#Aislamiento_de_aplicaciones"><span class="tocnumber">10</span> <span class="toctext">Aislamiento de aplicaciones</span></a>
<ul>
<li class="toclevel-2 tocsection-50"><a href="#Firejail"><span class="tocnumber">10.1</span> <span class="toctext">Firejail</span></a></li>
<li class="toclevel-2 tocsection-51"><a href="#bubblewrap"><span class="tocnumber">10.2</span> <span class="toctext">bubblewrap</span></a></li>
<li class="toclevel-2 tocsection-52"><a href="#Jaulas_root_(chroots)"><span class="tocnumber">10.3</span> <span class="toctext">Jaulas root (chroots)</span></a></li>
<li class="toclevel-2 tocsection-53"><a href="#Contenedores_linux_(LXC)"><span class="tocnumber">10.4</span> <span class="toctext">Contenedores linux (LXC)</span></a></li>
<li class="toclevel-2 tocsection-54"><a href="#Otras_opciones_de_virtualizaci%C3%B3n"><span class="tocnumber">10.5</span> <span class="toctext">Otras opciones de virtualización</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-55">
<a href="#Servicios_de_red_y_cortafuegos"><span class="tocnumber">11</span> <span class="toctext">Servicios de red y cortafuegos</span></a>
<ul>
<li class="toclevel-2 tocsection-56"><a href="#Cortafuegos"><span class="tocnumber">11.1</span> <span class="toctext">Cortafuegos</span></a></li>
<li class="toclevel-2 tocsection-57"><a href="#Par%C3%A1metros_del_kernel"><span class="tocnumber">11.2</span> <span class="toctext">Parámetros del kernel</span></a></li>
<li class="toclevel-2 tocsection-58"><a href="#SSH"><span class="tocnumber">11.3</span> <span class="toctext">SSH</span></a></li>
<li class="toclevel-2 tocsection-59"><a href="#DNS"><span class="tocnumber">11.4</span> <span class="toctext">DNS</span></a></li>
<li class="toclevel-2 tocsection-60"><a href="#Proxies_(intermediarios)"><span class="tocnumber">11.5</span> <span class="toctext">Proxies (intermediarios)</span></a></li>
<li class="toclevel-2 tocsection-61"><a href="#Gesti%C3%B3n_de_certificados_SSL"><span class="tocnumber">11.6</span> <span class="toctext">Gestión de certificados SSL</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-62"><a href="#Autenticaci%C3%B3n_de_paquetes"><span class="tocnumber">12</span> <span class="toctext">Autenticación de paquetes</span></a></li>
<li class="toclevel-1 tocsection-63">
<a href="#Actualizaciones"><span class="tocnumber">13</span> <span class="toctext">Actualizaciones</span></a>
<ul>
<li class="toclevel-2 tocsection-64"><a href="#Reiniciar_despu%C3%A9s_de_actualizar"><span class="tocnumber">13.1</span> <span class="toctext">Reiniciar después de actualizar</span></a></li>
<li class="toclevel-2 tocsection-65"><a href="#Seguimiento_de_alertas_de_vulnerabilidades"><span class="tocnumber">13.2</span> <span class="toctext">Seguimiento de alertas de vulnerabilidades</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-66">
<a href="#Seguridad_perimetral"><span class="tocnumber">14</span> <span class="toctext">Seguridad perimetral</span></a>
<ul>
<li class="toclevel-2 tocsection-67"><a href="#Protecci%C3%B3n_mediante_la_BIOS"><span class="tocnumber">14.1</span> <span class="toctext">Protección mediante la BIOS</span></a></li>
<li class="toclevel-2 tocsection-68">
<a href="#Gestores_de_arranque"><span class="tocnumber">14.2</span> <span class="toctext">Gestores de arranque</span></a>
<ul>
<li class="toclevel-3 tocsection-69"><a href="#Syslinux"><span class="tocnumber">14.2.1</span> <span class="toctext">Syslinux</span></a></li>
<li class="toclevel-3 tocsection-70"><a href="#GRUB"><span class="tocnumber">14.2.2</span> <span class="toctext">GRUB</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-71"><a href="#Utilizar_un_pendrive_como_partici%C3%B3n_de_arranque"><span class="tocnumber">14.3</span> <span class="toctext">Utilizar un pendrive como partición de arranque</span></a></li>
<li class="toclevel-2 tocsection-72"><a href="#Cierre_de_sesi%C3%B3n_autom%C3%A1tico"><span class="tocnumber">14.4</span> <span class="toctext">Cierre de sesión automático</span></a></li>
<li class="toclevel-2 tocsection-73"><a href="#Protecci%C3%B3n_contra_dispositivos_USB_da%C3%B1inos"><span class="tocnumber">14.5</span> <span class="toctext">Protección contra dispositivos USB dañinos</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-74"><a href="#Recompilaci%C3%B3n_de_paquetes"><span class="tocnumber">15</span> <span class="toctext">Recompilación de paquetes</span></a></li>
<li class="toclevel-1 tocsection-75"><a href="#V%C3%A9ase_tambi%C3%A9n"><span class="tocnumber">16</span> <span class="toctext">Véase también</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Conceptos">Conceptos</span></h2>
<ul><li>Es posible inutilizar un sistema si se le aplica demasiada seguridad, por lo que conviene aplicar ésta de forma adecuada.</li></ul>
<ul><li>Aunque hay muchas formas de aplicar y mejorar la seguridad, los usuarios son y serán la mayor amenaza. La seguridad se distribuye en capas, y cuando un ataque rompe una capa, otra capa debería detenerlo. Un sistema no es 100% seguro a menos que lo desconectes de cualquier red, lo aisles dentro de una caja fuerte cerrada y no lo utilices.</li></ul>
<ul><li>Ser un poco paranoico ayuda, y sospechar de todo también. Si algo parece demasiado bueno para ser cierto, ¡lo mismo lo es!</li></ul>
<ul><li>El <a href="https://en.wikipedia.org/wiki/Principio_de_m%C3%ADnimo_privilegio" class="extiw" title="wikipedia:Principio de mínimo privilegio">principio de mínimo privilegio</a>: cualquier usuario, proceso, programa o servicio de un sistema solo puede tener acceso a la información y recursos para los que tiene autorización, y a nada más.</li></ul>
<h2>
<span id="Contrase.C3.B1as"></span><span class="mw-headline" id="Contraseñas">Contraseñas</span>
</h2>
<p>Las contraseñas son fundamentales para garantizar la seguridad de un sistema Linux. Garantizan la seguridad de las <a href="/title/Users_and_groups_(Espa%C3%B1ol)" title="Users and groups (Español)">cuentas de usuario</a>, <a href="/title/Disk_encryption_(Espa%C3%B1ol)" class="mw-redirect" title="Disk encryption (Español)">sistemas de archivos cifrados</a>, y claves <a href="/title/SSH_keys_(Espa%C3%B1ol)" title="SSH keys (Español)">SSH</a>/<a href="/title/GnuPG_(Espa%C3%B1ol)" title="GnuPG (Español)">GPG</a>. Todo lo anterior es importante para que un ordenador identifique a la persona que lo usa y confíe en él, por lo que buena parte de la seguridad consiste en utilizar contraseñas seguras y mantenerlas protegidas.
</p>
<h3>
<span id="Utilizaci.C3.B3n_de_contrase.C3.B1as_seguras"></span><span class="mw-headline" id="Utilización_de_contraseñas_seguras">Utilización de contraseñas seguras</span>
</h3>
<p>Una contraseña fiable es lo suficientemente compleja como para no dar con ella fácilmente a partir, por ejemplo, de infomación personal o mediante el uso de <a href="https://en.wikipedia.org/wiki/es:Password_cracking" class="extiw" title="wikipedia:es:Password cracking">técnicas de descrifrado</a> como la ingeniería social o los ataques de fuerza bruta. La <i>longitud</i> y la <i>aleatoriedad</i> son características fundamentales de las contraseñas fiables. En criptografía, la calidad de una contraseña se refiere a su <a href="https://en.wikipedia.org/wiki/Entropic_security" class="extiw" title="wikipedia:Entropic security">seguridad entrópica</a>.
</p>
<p>Las contraseñas inseguras son las que contienen:
</p>
<ul>
<li>Información personal que pueda identificar al usuario, como por ejemplo el nombre del perro, la fecha de nacimiento, el código postal, su videojuego favorito, etc.</li>
<li>Sustituciones sencillas de letras, por ejemplo: <code>M4r1aM0ren0</code>, pues los ataques de diccionario modernos lo tienen en cuenta.</li>
<li>Palabras o textos sencillos con números, símbolos o caracteres delante o detrás, como por ejemplo: <code>$casaroja7</code>.</li>
<li>Frases cortas con sentido, por ejemplo: <code>todas las luces amarillas</code> aunque incluyan sustituciones de caracteres.</li>
<li>Cualquiera de las indicadas en la  <a href="https://en.wikipedia.org/wiki/List_of_the_most_common_passwords" class="extiw" title="wikipedia:List of the most common passwords">lista de contraseñas más utilizadas</a>.</li>
</ul>
<p>La mejor contraseña es la que tiene entre 8 y 64 caracteres (si son más mejor todavía) y generados por una fuente aleatoria.
</p>
<p>Aplicaciones como <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pwgen">pwgen</a></span> y <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/apg/">apg</a></span><sup><small>AUR</small></sup> pueden generar contraseñas aleatorias pero pueden ser difíciles de memorizar. Una forma de memorizar contraseñas (para los que les gusta escribir) es generar una contraseña muy larga, memorizar los primeros caracteres (al menos 8) para poder utilizarla y escribir la contraseña completa en un papel; después ir incorporando en la memoria el resto de caracteres de uno en uno y poco a poco hasta memorizar la contraseña completa. Si bien esta técnica es más complicada, es una de las más seguras, a prueba de ataques de fuerza bruta.
</p>
<p>También hay distintas técnicas para generar contraseñas seguras y fáciles de memorizar.
</p>
<p>Una técnica adecuada para crear una buena contraseña es utilizar los caracteres de cada palabra de una frase incluyendo alguna sustitución, por ejemplo, si se toma como base la frase «la chica camina por la calle mientras llueve», puede deducirse la siguiente contraseña: <code>1cCp!mL1</code>. Con esta técnica puede recordarse fácilmente una contraseña pero hay que tener en cuenta que hay letras que tienen más probabilidades que otras de estar al principio de una palabra. Si se utiliza una letra con altas probabilidades de que se encuentre al principio de una palabra, la contraseña resultante no sería lo suficientemente robusta. Hay más información en la Wikipedia: <a href="https://en.wikipedia.org/wiki/es:Frecuencia_de_aparici%C3%B3n_de_letras" class="extiw" title="wikipedia:es:Frecuencia de aparición de letras">Frecuencia de aparición de letras</a>.
</p>
<p>Otra técnica es recordar muchas palabras que no tengan relación entre sí, unirlas en una frase y utilizarla como contraseña. Si la frase es suficientemente larga, tendrá entropía suficiente como para compensar la pérdida de entropía por utilizar palabras del diccionario; en el <a rel="nofollow" class="external text" href="https://xkcd.com/936/">XKCD comic</a> lo demuestra muy bien. El método <a rel="nofollow" class="external text" href="http://world.std.com/~reinhold/diceware.html">Diceware Passphrase</a> genera este tipo de contraseñas largas mediante un generador de números aleatorios (game dice).
</p>
<p>Otra técnica muy efectiva es escribir contraseñas generadas de forma aleatoria en un papelito y guardarlo en un lugar <i>seguro</i>, como un monedero, una cartera o una caja fuerte. La mayoría de las personas normalmente saben cómo proteger sus cosas tangibles o físicas de valor de un posible ataque y lo entienden mejor en comparación con la seguridad digital. En  <a rel="nofollow" class="external text" href="https://www.schneier.com/news/archives/2010/11/bruce_schneier_write.html">este artículo</a> Bruce Schneier muestra la efectividad de esta técnica.
</p>
<p>También es muy efectivo combinar las técnicas de memorización y aleatoriedad para alojar contraseñas largas y aleatorias en un <a href="/title/Password_manager" class="mw-redirect" title="Password manager">gestor de contraseñas</a>, accediendo a él mediante una "contraseña maestra" que debería memorizarse y no guardarse en ningún otro lugar. El gestor de contraseñas debería instalarse en un sistema que proporcione las contraseñas de una forma sencilla, y dependiendo de la situación esto puede ser un inconveniente o un aspecto de la seguridad. Algunos gestores de contraseñas son aplicaciones que se pueden instalar en smartphones, de forma que las contraseñas quedan disponibles para verlas e introducirlas de forma manual en sistemas donde el gestor de contraseñas no está instalado. Es importante saber que un gestor de contraseñas tiene un punto único de fallo, esto es: si se olvida la contraseña maestra no habrá forma de acceder a las contraseñas.
</p>
<p>Hay más información en el artículo de Bruce Schneier <a rel="nofollow" class="external text" href="https://www.schneier.com/blog/archives/2014/03/choosing_secure_1.html">Choosing Secure Passwords</a>, <a rel="nofollow" class="external text" href="https://www.iusmentis.com/security/passphrasefaq/">The passphrase FAQ</a> o <a href="https://en.wikipedia.org/wiki/Password_strength" class="extiw" title="wikipedia:Password strength">Wikipedia:Password strength</a>.
</p>
<h3>
<span id="Gesti.C3.B3n_de_contrase.C3.B1as"></span><span class="mw-headline" id="Gestión_de_contraseñas">Gestión de contraseñas</span>
</h3>
<p>Las buenas contraseñas hay que guardarlas bien. Hay que tener cuidado con los <a href="https://en.wikipedia.org/wiki/es:Keylogger" class="extiw" title="wikipedia:es:Keylogger">keyloggers</a> (tanto de software como de hardware), los screen loggers (virus que capturan la pantalla), la <a href="https://en.wikipedia.org/wiki/es:Ingenier%C3%ADa_social_(seguridad_inform%C3%A1tica)" class="extiw" title="wikipedia:es:Ingeniería social (seguridad informática)">ingeniería social</a>, el <a href="https://en.wikipedia.org/wiki/es:Mirar_por_encima_del_hombro" class="extiw" title="wikipedia:es:Mirar por encima del hombro">mirar por encima del hombro</a> y no utilizar la misma contraseña en varios servidores, de forma que si un atacante compromete uno, no pueda saltar a otro. Los <a href="/title/List_of_applications/Security#Password_managers" title="List of applications/Security">gestores de contraseñas</a> están bien para disponer de muchas contraseñas complejas, pero al copiar la contraseña desde el gestor de contraseñas para pegarla en la aplicación que la necesita, después hay que asegurarse de eliminar esa contraseña de la memoria. También es necesario asegurarse de que una contraseña no quede registrada en un log; esto ocurre por ejemplo al incluir una contraseña como parámetro de una orden en la línea de comandos, de forma que quede registrada en el historial, concretamente en archivos como <code>.bash_history</code>.
</p>
<p>Hay que tener en cuenta la siguiente regla: aunque las contraseñas seguras sean difíciles de recordar, no hay que utilizar contraseñas débiles. Es mejor tener contraseñas seguras (largas y complejas) guardadas en una base de datos cifrada con una contraseña maestra también segura, que recordar contraseñas débiles. Otra forma que quizá puede ser igual de efectiva es apuntar las contraseñas seguras en un papel<a rel="nofollow" class="external autonumber" href="https://www.schneier.com/blog/archives/2005/06/write_down_your.html">[1]</a> y guardarlo con las medidas físicas de protección adecuadas.
</p>
<p>Otro aspecto importante es saber si hay contraseñas en otras partes del sistema de archivos donde fácilmente pueda tenerse acceso. Si se utiliza la misma contraseña para cifrar un disco que para iniciar sesión (esto tiene sentido por comodidad, al montar de forma automática un directorio o una partición cifrada al iniciar sesión), hay que asegurarse de que el fichero <code>/etc/shadow</code> esté ubicado en la partición cifrada o contenga las contraseñas cifradas con un algoritmo fuerte de cifrado, como por ejemplo sha512/bcrypt y no MD5. Hay más información en <a href="/title/SHA_password_hashes" title="SHA password hashes">contraseñas cifradas con SHA</a>.
</p>
<p>Si una copia de seguridad de la base de datos de contraseñas se guarda en una unidad cifrada con contraseña o en un servicio de almacenamiento remoto protegido con contraseña, hay que asegurarse de que esta última contraseña no esté registrada única y exclusivamente en la base de datos cifrada, pues de ser así en un caso donde no se disponga de esta contraseña puede perderse el acceso a la copia de seguridad. En estos casos es muy útil crear un hash sencillo de la contraseña maestra de la base de datos y utilizarlo como contraseña de acceso a los lugares donde se guardan las copias de seguridad. Si hay sospecha de que la contraseña maestra ha sido comprometida, esta hay que cambiarla inmediatamente en la base de datos de contraseñas y en los lugares donde se alojen las copias de seguridad. Garantizar la seguridad de varias versiones de la copia de seguridad puede ser muy complicado pues implica proteger cada versión con una contraseña maestra distinta. Como no es sencillo averiguar en qué momento se ha podido filtrar o comprometer la contraseña maestra, lo mejor es ir cambiando esta contraseña maestra con cierta frecuencia. Si hay sospecha de que al menos una copia de seguridad ha sido comprometida, lo mejor es cambiar todas las contraseñas que contiene la base de datos antes de que alguien pueda averiguarlas mediante fuerza bruta.
</p>
<h3>
<span id="Cifrado_de_contrase.C3.B1as"></span><span class="mw-headline" id="Cifrado_de_contraseñas">Cifrado de contraseñas</span>
</h3>
<p>Arch guarda en <code>/etc/shadow</code> las contraseñas cifradas de los usuarios y solo lo puede leer el usuario root, y en <code>/etc/passwd</code> guarda el resto de información de cada usuario y lo puede leer cualquier usuario. Hay más información en <a href="/title/Users_and_groups_(Espa%C3%B1ol)#Base_de_datos_del_usuario" title="Users and groups (Español)">Users and groups (Español)#Base de datos del usuario</a> y también en <a href="#Limitando_el_usuario_root">#Limitando el usuario root</a><sup>[<a href="/title/Help:Procedures#Fix_broken_section_links" title="Help:Procedures">broken link</a>: invalid section]</sup>.
</p>
<p>Las contraseñas se crean con el comando <b>passwd</b> y se guardan en <code>/etc/shadow</code> cifradas con la función <a href="https://en.wikipedia.org/wiki/Crypt_(C)" class="extiw" title="wikipedia:Crypt (C)">crypt</a> mediante técnicas <a href="https://en.wikipedia.org/wiki/Key_stretching" class="extiw" title="wikipedia:Key stretching">Key stretching</a>. Hay más información en <a href="/title/SHA_password_hashes" title="SHA password hashes">SHA password hashes</a>. A las contraseñas también se les aplica [[Wikipedia:es:Sal (criptografía)|sal criptográfica] para evitar ataques de tipo <a href="https://en.wikipedia.org/wiki/es:Tabla_arco%C3%ADris" class="extiw" title="wikipedia:es:Tabla arcoíris">tabla arcoíris</a>.
</p>
<p>Hay más información en <a rel="nofollow" class="external text" href="https://www.slashroot.in/how-are-passwords-stored-linux-understanding-hashing-shadow-utils">Cómo guarda Linux las contraseñas (Entendiendo el cifrado con las utilidades shadow)</a>.
</p>
<h3>
<span id="Pol.C3.ADtica_de_contrase.C3.B1as_seguras_con_pam_cracklib"></span><span class="mw-headline" id="Política_de_contraseñas_seguras_con_pam_cracklib">Política de contraseñas seguras con pam_cracklib</span>
</h3>
<p><i>pam_cracklib</i> es una librería que ofrece protección contra <a href="https://en.wikipedia.org/wiki/es:Ataque_de_diccionario" class="extiw" title="wikipedia:es:Ataque de diccionario">ataques de diccionario</a> y facilita la implementación de una política de contraseñas seguras en todo el sistema.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Advertencia:</strong> Esta política no afecta a la cuenta <i>root</i>.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Si es necesario realizar una excepción y no aplicar la política de contraseñas sobre la contraseña de un usuario, esta contraseña debe crearla la cuenta <i>root</i>.</div>
<p>Por ejemplo, para aplicar la siguiente política de contraseñas:
</p>
<ul>
<li>en caso de error, introducir 2 veces la contraseña</li>
<li>mínimo 10 caracteres (opción minlen)</li>
<li>al menos 6 caracteres distintos de la contraseña anterior (opción difok)</li>
<li>al menos un dígito (opción dcredit)</li>
<li>al menos una letra mayúscula (opción ucredit)</li>
<li>al menos una letra minúscula (opción lcredit)</li>
<li>al menos un caracter distinto de los anteriores indicados (ocredit option)</li>
</ul>
<p>se edita el fichero <code>/etc/pam.d/passwd</code> para dejarlo con el siguiente contenido:
</p>
<pre>#%PAM-1.0
password required pam_cracklib.so retry=2 minlen=10 difok=6 dcredit=-1 ucredit=-1 ocredit=-1 lcredit=-1
password required pam_unix.so use_authtok sha512 shadow</pre>
<p>La opción <code>password required pam_unix.so use_authtok</code> indica al módulo <i>pam_unix</i> que utilice la política de contraseñas de <i>pam_cracklib</i>.
</p>
<p>En <span class="plainlinks archwiki-template-man" title="$ man 8 pam_cracklib"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pam_cracklib.8">pam_cracklib(8)</a></span><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">enlace roto</a> 2020-09-13]</sup> y <span class="plainlinks archwiki-template-man" title="$ man 8 pam_unix"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pam_unix.8">pam_unix(8)</a></span> hay más información.
</p>
<h2><span class="mw-headline" id="CPU">CPU</span></h2>
<h3>
<span id="Microc.C3.B3digo"></span><span class="mw-headline" id="Microcódigo">Microcódigo</span>
</h3>
<p>Consultar <a href="/title/Microcode_(Espa%C3%B1ol)" title="Microcode (Español)">microcode (Español)</a> para ver cómo instalar actualizaciones de seguridad importantes para el microcódigo de la CPU.
</p>
<h3>
<span id="Desactivaci.C3.B3n_de_Hyper-Threading"></span><span class="mw-headline" id="Desactivación_de_Hyper-Threading">Desactivación de Hyper-Threading</span>
</h3>
<p>El desarrollador del kernel Greg Kroah-Hartman demuestra en <a rel="nofollow" class="external text" href="https://www.youtube.com/watch?v=jI3YE3Jlgw8">este video</a> que desactivar el Hyper-Threading mejora la seguridad de un sistema que ejecuta código no confiable. Un ejemplo de código no confiable es un navegador web con Javascript activado. Esta solución puede implicar pérdida de rendimiento.
</p>
<p>El Hyper-Threading se puede desactivar en el kernel (consultar <a href="#Desactivaci%C3%B3n_de_hyper-threading_2">#Desactivación de hyper-threading 2</a>) y probablemente también se pueda desactivar desde el firmware del sistema. Es recomendable consultar la documentación de la placa base para ver cómo hacerlo.
</p>
<h3><span class="mw-headline" id="Vulnerabilidades_de_la_CPU">Vulnerabilidades de la CPU</span></h3>
<p>A raíz de las vulnerabilidades Spectre/Meltdown de las CPUs más populares, el kernel tiene una serie de configuraciones para reducir los riesgos relacionados. Hay más detalles en la <a rel="nofollow" class="external text" href="https://www.kernel.org/doc/html/latest/admin-guide/hw-vuln/">documentación del kernel</a>.
</p>
<h2><span class="mw-headline" id="Memoria">Memoria</span></h2>
<h3>
<span id="Versi.C3.B3n_segura_de_malloc"></span><span class="mw-headline" id="Versión_segura_de_malloc">Versión segura de malloc</span>
</h3>
<p>malloc() es una función de la librería glibc y <a rel="nofollow" class="external text" href="https://github.com/GrapheneOS/hardened_malloc">hardened_malloc</a> (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/hardened_malloc/">hardened_malloc</a></span><sup><small>AUR</small></sup>) es su versión segura. hardened_malloc lo empezó a desarrollar Daniel Micay (desarrollador de GrapheneOS) en las librerías Bionic y musl formando parte también en las distribuciones Linux estandar de la arquitectura x86_64.
</p>
<p>Aunque hardened_malloc no viene en la librería glibc (se agradece colaboración para conseguirlo), es sencillo utilizarlo mediante el uso de LD_PRELOAD como puede verse más adelante. En las pruebas realizadas activando hardened_malloc de forma global en /etc/ld.so.preload solo falla con algunas aplicaciones, como por ejemplo con <code>man</code>. Como hardened_malloc penaliza el rendimiento es conveniente su uso en las aplicaciones que lo requieran y mantengan un equilibrio adecuado con la seguridad.
</p>
<p>Para probarlo puedes utilizar el script hardened-malloc-preload o iniciar directamente una aplicación con LD_PRELOAD:
</p>
<pre>LD_PRELOAD="/usr/lib/libhardened_malloc.so" /usr/bin/firefox
</pre>
<p>Para utilizar hardened_malloc con <a href="/title/Firejail" title="Firejail">Firejail</a> hay información en su página wiki y en el repositorio de github de hardened_malloc hay más información para desarrolladores.
</p>
<h2><span class="mw-headline" id="Almacenamiento">Almacenamiento</span></h2>
<h3><span class="mw-headline" id="Cifrado_de_discos">Cifrado de discos</span></h3>
<p>La única manera de evitar el robo de información de un disco cuando el ordenador está apagado o el disco en cuestión no está montado es el <a href="/title/Disk_encryption_(Espa%C3%B1ol)" class="mw-redirect" title="Disk encryption (Español)">cifrado de discos</a> de forma completa y con una <a href="#Contrase%C3%B1as">contraseña fuerte</a>.
</p>
<p>Un disco cifrado deja accesible su información cuando el ordenador está encendido y el disco está montado, por lo que es recomendable montar las particiones que se vayan a utilizar y desmontarlas en el momento que dejen de utilizarse.
</p>
<p>Algunos programas como <a href="/title/Dm-crypt_(Espa%C3%B1ol)" title="Dm-crypt (Español)">dm-crypt (Español)</a> pueden cifrar un fichero de imagen de disco y utilizarlo como un volumen virtual, de forma que es una alternativa al cifrado completo del disco en el caso de proteger ciertas partes del sistema.
</p>
<h3><span class="mw-headline" id="Sistema_de_archivos">Sistema de archivos</span></h3>
<p>Como el kernel protege los enlaces duros y los simbólicos mediante la activación de <code>fs.protected_hardlinks</code> y <code>fs.protected_symlinks</code> respectivamente con sysctl, ya no hace falta mantener separados en puntos de montaje distintos los directorios donde todos los usuarios tienen permiso de escritura.
</p>
<p>Aunque es poco elegante mantener esta separación de directorios, sirve para limitar el daño producido en el caso de falta de espacio en disco, por lo que mantener en puntos de montaje distintos los directorios <code>/var</code> y <code>/tmp</code> previene la parada de servicios producida por este motivo. Las cuotas de disco es uno de los mecanismos más flexibles para evitar estos problemas, además del uso de algunos <a href="/title/File_systems_(Espa%C3%B1ol)" title="File systems (Español)">sistemas de archivos</a> como Btrfs que proporciona <a href="/title/Disk_quota" title="Disk quota">cuotas</a> en subvolúmenes.
</p>
<h4><span class="mw-headline" id="Opciones_de_montaje">Opciones de montaje</span></h4>
<p>Siguiendo el principio del mínimo privilegio, los sistemas de archivos deben montarse con las restricciones máximas posibles sin perder funcionalidad.
</p>
<p>Las opciones más relevantes son:
</p>
<ul>
<li>
<code>nodev</code>: No tiene en cuenta a los dispositivos especiales o de bloques del sistema de archivos.</li>
<li>
<code>nosuid</code>: Bloquea el funcionamiento de los bits suid y sgid de un archivo.</li>
<li>
<code>noexec</code>: No permite la ejecución directa de ningún archivo binario.
<ul>
<li>Establecer <code>noexec</code> en <code>/home</code> impide la ejecución de scripts dejando de funcionar, por ejemplo <a href="/title/Wine" title="Wine">Wine</a>* y <a href="/title/Steam" title="Steam">Steam</a>.</li>
<li>Algunos paquetes como las fuentes de <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nvidia-dkms">nvidia-dkms</a></span> pueden necesitar <code>exec</code> en <code>/var</code>.</li>
</ul>
</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Wine necesita tener activado <code>exec</code> si está instalado en <code>/home</code>, no para ejecutar los binarios de Windows.</div>
<p>Los sistemas de archivos destinados a alojar datos solo deberían montarse con <code>nodev</code>, <code>nosuid</code> y <code>noexec</code>.
</p>
<p>Los directorios a tener en cuenta en estos casos son:
</p>
<ul>
<li><code>/var</code></li>
<li><code>/home</code></li>
<li><code>/dev/shm</code></li>
<li><code>/tmp</code></li>
<li><code>/boot</code></li>
</ul>
<h3><span class="mw-headline" id="Permisos_de_archivos">Permisos de archivos</span></h3>
<p>Si un atacante toma el control de cuentas de usuario normales como <code>http</code> o <code>nobody</code> (distintas a root) tendrá acceso de lectura a muchos archivos proporcionándole mucha información valiosa sobre el sistema. Esto es debido a que la configuración por defecto de los <a href="/title/File_permissions" class="mw-redirect" title="File permissions">permisos de los archivos</a> hace que todos los usuarios tengan permiso de lectura sobre cada nuevo archivo que se va creando en el sistema. Para evitar esta situación es conveniente cambiar los permisos sobre los archivos correspondientes de forma que solo su propietario tenga permiso de lectura y nadie más.
</p>
<p>Por ejemplo:
</p>
<pre># chmod 700 /boot /etc/{iptables,arptables}
</pre>
<p>La configuración por defecto que hace que cada archivo nuevo pueda leerlo cualquiera viene de configurar <a href="/title/Umask" title="Umask">Umask</a> a <code>0022</code> y para mejorar la seguridad es conveniente cambiarlo. La guía de seguridad <a rel="nofollow" class="external text" href="https://apps.nsa.gov/iaarchive/library/ia-guidance/security-configuration/operating-systems/guide-to-the-secure-configuration-of-red-hat-enterprise.cfm">NSA RHEL5 Security Guide</a> aconseja configurar umask a <code>0077</code> en casos de máxima seguridad, de forma que los archivos nuevos solo puedan leerlos su propietario y ningún usuario más. Consultar <a href="/title/Umask_(Espa%C3%B1ol)" title="Umask (Español)">Umask (Español)</a> para más información.
</p>
<h2>
<span id="Configuraci.C3.B3n_de_usuarios"></span><span class="mw-headline" id="Configuración_de_usuarios">Configuración de usuarios</span>
</h2>
<p>Después de la instalación del sistema no utilices la cuenta root para el día a día, utiliza una cuenta normal de usuario.
</p>
<h3>
<span id="Retraso_despu.C3.A9s_de_un_intento_fallido_de_inicio_de_sesi.C3.B3n"></span><span class="mw-headline" id="Retraso_después_de_un_intento_fallido_de_inicio_de_sesión">Retraso después de un intento fallido de inicio de sesión</span>
</h3>
<p>Para retrasar el próximo inicio de sesión durante 4 segundos cuando se produce un intento fallido añadir la siguiente línea a <code>/etc/pam.d/system-login</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pam.d/system-login</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">auth optional pam_faildelay.so delay=4000000</pre>
<p><code>4000000</code> es el número de microsegundos de retraso.
</p>
<h3>
<span id="Bloqueo_de_un_usuario_despu.C3.A9s_de_tres_intentos_fallidos_de_inicio_de_sesi.C3.B3n"></span><span class="mw-headline" id="Bloqueo_de_un_usuario_después_de_tres_intentos_fallidos_de_inicio_de_sesión">Bloqueo de un usuario después de tres intentos fallidos de inicio de sesión</span>
</h3>
<p>Para mejorar la seguridad se puede bloquear o impedir el inicio de sesión de un usuario después de un número determinado de intentos fallidos. El usuario root puede desbloquear estas cuentas y también se pueden desbloquear automáticamente pasado un tiempo determinado.
</p>
<p>Para bloquear a un usuario durante 10 minutos <code>unlock_time=600</code> después de tres intentos fallidos de inicio de sesión <code>deny=3</code>, añadir los siguientes parámetros a la configuración de PAM:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pam.d/system-login</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">auth required pam_tally2.so deny=3 unlock_time=600 onerr=succeed file=/var/log/tallylog</pre>
<p>Eso es todo, pruébalo para ver como funciona. Para desbloquear a un usuario de forma manual utiliza la cuenta de root y este comando:
</p>
<pre># pam_tally2 --reset --user <i>nombre_de_usuario</i>
</pre>
<p><code>unlock_time</code> se refiere a segundos. Para bloquear a un usuario de forma permanente después de 3 intentos fallidos de inicio de sesión elimina <code>unlock_time</code> y su valor de la línea correspondiente. En este caso el usuario no podrá iniciar sesión hasta que el usuario root realice el desbloqueo correspondiente.
</p>
<h3>
<span id="N.C3.BAmero_m.C3.A1ximo_de_procesos"></span><span class="mw-headline" id="Número_máximo_de_procesos">Número máximo de procesos</span>
</h3>
<p>Cuando un sistema lo utilizan muchos usuarios es importante limitar el número de procesos abiertos que puede tener cada uno. De esta forma pueden evitarse las <a href="https://en.wikipedia.org/wiki/es:Bombafork" class="extiw" title="wikipedia:es:Bombafork">Bombas fork</a> y otros ataques de denegación de servicio. En el archivo de configuración <code>/etc/security/limits.conf</code> se determinan el número de procesos abiertos que un usuario o un grupo de usuarios puede tener. Por defecto todas las configuraciones están comentadas y no tienen efecto. Agregando las dos líneas de abajo se limita por defecto a 100 procesos abiertos a cada usuario del sistema, pero si alguno de ellos utiliza el comando <code>prlimit</code> puede sobrepasar este límite a 200 procesos en la sesión actual. Estos valores pueden cambiarse dependiendo del hardware de la máquina que se administre.
</p>
<pre>* soft nproc 100
* hard nproc 200
</pre>
<p>Se puede averiguar el número de hilos por usuario en un momento dado con <code>ps --no-headers -Leo user | sort | uniq --count</code>. Los resultados pueden servir de ayuda para calcular de forma adecuada los valores a aplicar en este tipo de límite.
</p>
<h3><span class="mw-headline" id="Iniciar_Xorg_sin_la_cuenta_de_root">Iniciar Xorg sin la cuenta de root</span></h3>
<p><a href="/title/Xorg_(Espa%C3%B1ol)" title="Xorg (Español)">Xorg (Español)</a> se <a rel="nofollow" class="external text" href="https://security.stackexchange.com/questions/4641/why-are-people-saying-that-the-x-window-system-is-not-secure/4646#4646">considera inseguro</a> por su arquitectura y diseño, y no es recomendable iniciarlo con la cuenta root.
</p>
<p>Se puede consultar <a href="/title/Xorg#Rootless_Xorg" title="Xorg">Xorg#Rootless Xorg</a> para ver cómo iniciarlo sin la cuenta root.
</p>
<h2><span class="mw-headline" id="Restringir_el_uso_de_la_cuenta_root">Restringir el uso de la cuenta root</span></h2>
<p>Por definición la cuenta root es la más poderosa de un sistema y para evitar daños hay formas de limitar este poder, o al menos dejar un registro de sus acciones.
</p>
<h3><span class="mw-headline" id="Utilizar_sudo_en_lugar_de_su">Utilizar sudo en lugar de su</span></h3>
<p>Para acceder al sistema con privilegios elevados es preferible utilizar <a href="/title/Sudo_(Espa%C3%B1ol)" title="Sudo (Español)">sudo (Español)</a> en lugar de <a href="/title/Su_(Espa%C3%B1ol)" title="Su (Español)">su (Español)</a> por <a href="/title/Su_(Espa%C3%B1ol)#Sudo,_una_alternativa" title="Su (Español)">una serie de razones</a>.
</p>
<ul>
<li>Guarda un log con las acciones privilegiadas realizadas por el usuario.</li>
<li>No es necesario conocer la contraseña de la cuenta root.</li>
<li>Al utilizar <code>sudo</code> no se crea un terminal exclusivo para la sesión de root, evitando que un usuario ejecute de forma accidental comandos <i>root</i> si estos comandos no necesitan privilegios de <i>root</i>. Esto hace cumplir el <a href="https://en.wikipedia.org/wiki/es:Principio_de_m%C3%ADnimo_privilegio" class="extiw" title="wikipedia:es:Principio de mínimo privilegio">principio de mínimo privilegio</a>.</li>
<li>En lugar de proporcionar un entorno completo de root a un comando, se puede limitar este entorno a ciertos usuarios para ejecutar ciertos programas. Por ejemplo, para dar al usuario <i>alicia</i> acceso a un programa concreto:</li>
</ul>
<pre># visudo
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sudoers</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">alice ALL = NOPASSWD: /ruta/al/programa</pre>
<p>O hacer que todos los usuarios puedan acceder a comandos determinados. Para que cualquier usuario normal pueda montar recursos compartidos de un servidor Samba:
</p>
<pre>%users ALL=/sbin/mount.cifs,/sbin/umount.cifs
</pre>
<p>Esto hace que los usuarios del grupo users puedan ejecutar los comandos <code>/sbin/mount.cifs</code> y <code>/sbin/umount.cifs</code> desde cualquier máquina (ALL).
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Sugerencia:</strong> 
<p>Para utilizar la versión restringida de <code>nano</code> en lugar de <code>vi</code> con <code>visudo</code>,
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sudoers</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Defaults editor=/usr/bin/rnano</pre>
<p>Exportar <code>EDITOR=nano visudo</code> se considera un riesgo grave de seguridad pues cualquier cosa puede utilizarse como valor en <code>EDITOR</code>.
</p>
</div>
<h4><span class="mw-headline" id="Editar_archivos_utilizando_sudo">Editar archivos utilizando sudo</span></h4>
<p>Ejecutar un editor de texto como root puede ser un riesgo de seguridad pues muchos editores pueden ejecutar comandos del sistema o afectar a otros archivos además del que se edita. Para evitar esta situación se utiliza <code>sudoedit nombrearchivo</code> o lo que es lo mismo <code>sudo --edit nombrearchivo</code> para editar archivos. Esto hace que la edición del archivo se realice con los privilegios normales de tu cuenta y una vez cerrado el editor, con sudo, escribe el archivo original con los privilegios elevados. En la variable de entorno <code>SUDO_EDITOR</code> se indica el editor que utilizará <code>sudoedit</code>. Por ejemplo, para indicar que <code>vim</code> sea el editor que utilice <code>sudoedit</code>:
</p>
<pre>$ export SUDO_EDITOR=vim
</pre>
<p>Otra opción es utilizar el editor <code>rvim</code>, que incorpora funcionalidades limitadas para ejecutarlo de forma segura como root.
</p>
<h3>
<span id="Limitar_el_inicio_de_sesi.C3.B3n_de_root"></span><span class="mw-headline" id="Limitar_el_inicio_de_sesión_de_root">Limitar el inicio de sesión de root</span>
</h3>
<p>Configurado <a href="/title/Sudo_(Espa%C3%B1ol)" title="Sudo (Español)">sudo (Español)</a> adecuadamente, puede denegarse el inicio de sesión de root o restringirlo lo máximo posible. Para deshabilitar root y utilizar <a href="/title/Sudo_(Espa%C3%B1ol)" title="Sudo (Español)">sudo (Español)</a> se utiliza <code>passwd --lock root</code>.
</p>
<h4><span class="mw-headline" id="Permitir_el_uso_de_su_a_ciertos_usuarios">Permitir el uso de su a ciertos usuarios</span></h4>
<p>El modulo <a href="/title/PAM_(Espa%C3%B1ol)" title="PAM (Español)">PAM (Español)</a> <code>pam_wheel.so</code> hace que solo los usuarios del grupo <code>wheel</code> puedan utilizar <a href="/title/Su_(Espa%C3%B1ol)" title="Su (Español)">su (Español)</a>. Consultar <a href="/title/Su_(Espa%C3%B1ol)#su_y_wheel" title="Su (Español)">su (Español)#su y wheel</a>.
</p>
<h4>
<span id="Denegar_el_inicio_de_sesi.C3.B3n_en_SSH"></span><span class="mw-headline" id="Denegar_el_inicio_de_sesión_en_SSH">Denegar el inicio de sesión en SSH</span>
</h4>
<p>Aunque se permita el inicio de sesión como root a usuarios locales, siempre es una buena práctica <a href="/title/OpenSSH#Deny" title="OpenSSH">denegar el inicio de sesión de root en SSH</a>. El propósito es disponer de una capa más de seguridad ante la posibilidad de que puedan comprometer el sistema de forma remota.
</p>
<h4>
<span id="Restringir_el_inicio_de_sesi.C3.B3n_con_access.conf"></span><span class="mw-headline" id="Restringir_el_inicio_de_sesión_con_access.conf">Restringir el inicio de sesión con access.conf</span>
</h4>
<p>Cuando un usuario intenta iniciar sesión con <a href="/title/PAM_(Espa%C3%B1ol)" title="PAM (Español)">PAM (Español)</a>, el archivo de configuración <code>/etc/security/access.conf</code> aplica unas reglas para determinar si tiene acceso o no y desde donde. 
</p>
<pre>+:root:LOCAL
-:root:ALL
</pre>
<p>Pueden aplicarse reglas a usuarios y grupos. En el siguiente ejemplo, el usuario archie, los miembros del grupo whell y los miembros del grupo adm solo pueden iniciar sesión de forma local y el resto de usuarios no tienen acceso desde ningún lugar:
</p>
<pre>+:archie:LOCAL
+:(wheel):LOCAL
+:(adm):LOCAL
-:ALL:ALL
</pre>
<p>Hay más información en <span class="plainlinks archwiki-template-man" title="$ man 5 access.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/access.conf.5">access.conf(5)</a></span>
</p>
<h2>
<span id="Control_de_Acceso_Obligatorio_.28MAC.29"></span><span class="mw-headline" id="Control_de_Acceso_Obligatorio_(MAC)">Control de Acceso Obligatorio (MAC)</span>
</h2>
<p>En Arch y en la mayoría de distribuciones de Linux se utiliza como política de seguridad el <a href="https://en.wikipedia.org/wiki/es:Control_de_Acceso_Discrecional" class="extiw" title="wikipedia:es:Control de Acceso Discrecional">Control de Acceso Discrecional</a> (DAC) y se distingue mucho del <a href="https://en.wikipedia.org/wiki/Mandatory_Access_Control" class="extiw" title="wikipedia:Mandatory Access Control">Control de Acceso Obligatorio</a> (MAC). Fundamentalmente, MAC significa que antes de que un programa realice una acción sobre el sistema, ésta se comprueba con unas reglas. Si bien un usuario puede modificar las políticas DAC, no puede modificar las MAC. Utilizar la política MAC mejora significativamente la seguridad del sistema y hay varias formas de implementarla.
</p>
<h3><span class="mw-headline" id="MAC_basado_en_nombre_de_ruta">MAC basado en nombre de ruta</span></h3>
<p>El MAC basado en nombre de ruta es un control de acceso simple que proporciona permisos dependiendo de la ruta de un archivo dado. La desventaja de este control de acceso es que un archivo no incorpora sus permisos, por lo que los pierde si se mueve a otra ubicación. Como ventaja, el MAC basado en nombre de ruta puede utilizarse en muchos sistemas de archivos.
</p>
<ul>
<li>
<a href="/title/AppArmor" title="AppArmor">AppArmor</a> es una implementación MAC mantenida por <a href="https://en.wikipedia.org/wiki/Canonical_(company)" class="extiw" title="wikipedia:Canonical (company)">Canonical</a> y se considera como una alternativa sencilla a SELinux.</li>
<li>
<a href="/title/Tomoyo" class="mw-redirect" title="Tomoyo">Tomoyo</a> es otra opción MAC fácil de usar. Tiene pocas dependencias y está diseñado para ser simple en su uso e implementación.</li>
</ul>
<h3><span class="mw-headline" id="Etiquetas_MAC">Etiquetas MAC</span></h3>
<p>Este sistema de control de acceso se basa en el uso de etiquetas y consiste en gestionar la seguridad de un archivo mediante sus atributos extendidos. Si bien este sistema es más flexible que el de MAC basado en nombre de ruta, solo funciona en sistemas de archivos que soporten estos atributos extendidos.
</p>
<ul><li>
<a href="/title/SELinux" title="SELinux">SELinux</a> se basa en un proyecto de la <a href="https://en.wikipedia.org/wiki/es:Agencia_de_Seguridad_Nacional" class="extiw" title="wikipedia:es:Agencia de Seguridad Nacional">NSA</a> cuyo objetivo es mejorar la seguridad de Linux mediante la implementación de MAC independientemente de usuarios y roles. Este sistema proporciona una implementación multicapa muy robusta de políticas de seguridad MAC, a la vez que facilita su gestión y control en sistemas que van cambiando y creciendo.</li></ul>
<h3><span class="mw-headline" id="Listas_de_Control_de_Acceso">Listas de Control de Acceso</span></h3>
<p><a href="/title/Access_Control_Lists_(Espa%C3%B1ol)" title="Access Control Lists (Español)">Access Control Lists (Español)</a> (ACLs) son una alternativa para implementar reglas de alguna forma y directamente en el sistema de archivos. Las ACLs implementan el control de acceso de un programa mediante una lista de acciones permitidas.
</p>
<h2><span class="mw-headline" id="Mejoras_en_la_seguridad_del_Kernel">Mejoras en la seguridad del Kernel</span></h2>
<h3>
<span id="Autoprotecci.C3.B3n_del_Kernel_.2F_reducci.C3.B3n_de_vulnerabilidades"></span><span class="mw-headline" id="Autoprotección_del_Kernel_/_reducción_de_vulnerabilidades">Autoprotección del Kernel / reducción de vulnerabilidades</span>
</h3>
<p>El paquete <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-hardened">linux-hardened</a></span> utiliza un <a rel="nofollow" class="external text" href="https://github.com/anthraxx/linux-hardened">conjunto básico de parches de fortificación del kernel</a> y proporciona más opciones relacionadas con la seguridad que el paquete <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span>. Se puede compilar un kernel personalizado para tener un equilibrio distinto entre seguridad y rendimiento que el que viene por defecto.
</p>
<p>Si se utiliza un driver propietario como <a href="/title/NVIDIA_(Espa%C3%B1ol)" title="NVIDIA (Español)">NVIDIA (Español)</a> es posible que se tenga que utilizar su paquete <a href="/title/DKMS" class="mw-redirect" title="DKMS">DKMS</a> correspondiente.
</p>
<h4><span class="mw-headline" id="ASLR_en_procesos_de_usuario">ASLR en procesos de usuario</span></h4>
<p>El paquete <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-hardened">linux-hardened</a></span> proporciona una implementación mejorada de ASLR (Aleatoriedad en la disposición del espacio de direcciones) para procesos de usuario. El comando <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=paxtest">paxtest</a></span> puede utilizarse para obtener una estimación de la entropía proporcionada:
</p>
<h5><span class="mw-headline" id="Procesos_de_64-bit">Procesos de 64-bit</span></h5>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">linux-hardened 5.4.21.a-1-hardened</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Anonymous mapping randomization test     : 32 quality bits (guessed)
Heap randomization test (ET_EXEC)        : 40 quality bits (guessed)
Heap randomization test (PIE)            : 40 quality bits (guessed)
Main executable randomization (ET_EXEC)  : 32 quality bits (guessed)
Main executable randomization (PIE)      : 32 quality bits (guessed)
Shared library randomization test        : 32 quality bits (guessed)
VDSO randomization test                  : 32 quality bits (guessed)
Stack randomization test (SEGMEXEC)      : 40 quality bits (guessed)
Stack randomization test (PAGEEXEC)      : 40 quality bits (guessed)
Arg/env randomization test (SEGMEXEC)    : 44 quality bits (guessed)
Arg/env randomization test (PAGEEXEC)    : 44 quality bits (guessed)
Offset to library randomisation (ET_EXEC): 34 quality bits (guessed)
Offset to library randomisation (ET_DYN) : 34 quality bits (guessed)
Randomization under memory exhaustion @~0: 32 bits (guessed)
Randomization under memory exhaustion @0 : 32 bits (guessed)
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">linux 5.5.5-arch1-1</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Anonymous mapping randomization test     : 28 quality bits (guessed)
Heap randomization test (ET_EXEC)        : 28 quality bits (guessed)
Heap randomization test (PIE)            : 28 quality bits (guessed)
Main executable randomization (ET_EXEC)  : 28 quality bits (guessed)
Main executable randomization (PIE)      : 28 quality bits (guessed)
Shared library randomization test        : 28 quality bits (guessed)
VDSO randomization test                  : 20 quality bits (guessed)
Stack randomization test (SEGMEXEC)      : 30 quality bits (guessed)
Stack randomization test (PAGEEXEC)      : 30 quality bits (guessed)
Arg/env randomization test (SEGMEXEC)    : 22 quality bits (guessed)
Arg/env randomization test (PAGEEXEC)    : 22 quality bits (guessed)
Offset to library randomisation (ET_EXEC): 28 quality bits (guessed)
Offset to library randomisation (ET_DYN) : 28 quality bits (guessed)
Randomization under memory exhaustion @~0: 29 bits (guessed)
Randomization under memory exhaustion @0 : 29 bits (guessed)
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">linux-lts 4.19.101-1-lts</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Anonymous mapping randomization test     : 28 quality bits (guessed)
Heap randomization test (ET_EXEC)        : 28 quality bits (guessed)
Heap randomization test (PIE)            : 28 quality bits (guessed)
Main executable randomization (ET_EXEC)  : 28 quality bits (guessed)
Main executable randomization (PIE)      : 28 quality bits (guessed)
Shared library randomization test        : 28 quality bits (guessed)
VDSO randomization test                  : 19 quality bits (guessed)
Stack randomization test (SEGMEXEC)      : 30 quality bits (guessed)
Stack randomization test (PAGEEXEC)      : 30 quality bits (guessed)
Arg/env randomization test (SEGMEXEC)    : 22 quality bits (guessed)
Arg/env randomization test (PAGEEXEC)    : 22 quality bits (guessed)
Offset to library randomisation (ET_EXEC): 28 quality bits (guessed)
Offset to library randomisation (ET_DYN) : 28 quality bits (guessed)
Randomization under memory exhaustion @~0: 28 bits (guessed)
Randomization under memory exhaustion @0 : 28 bits (guessed)
</pre>
<h5>
<span id="Procesos_de_32-bit_.28en_un_kernel_x86_64.29"></span><span class="mw-headline" id="Procesos_de_32-bit_(en_un_kernel_x86_64)">Procesos de 32-bit (en un kernel x86_64)</span>
</h5>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">linux-hardened</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Anonymous mapping randomization test     : 16 quality bits (guessed)
Heap randomization test (ET_EXEC)        : 22 quality bits (guessed)
Heap randomization test (PIE)            : 27 quality bits (guessed)
Main executable randomization (ET_EXEC)  : No randomization
Main executable randomization (PIE)      : 18 quality bits (guessed)
Shared library randomization test        : 16 quality bits (guessed)
VDSO randomization test                  : 16 quality bits (guessed)
Stack randomization test (SEGMEXEC)      : 24 quality bits (guessed)
Stack randomization test (PAGEEXEC)      : 24 quality bits (guessed)
Arg/env randomization test (SEGMEXEC)    : 28 quality bits (guessed)
Arg/env randomization test (PAGEEXEC)    : 28 quality bits (guessed)
Offset to library randomisation (ET_EXEC): 18 quality bits (guessed)
Offset to library randomisation (ET_DYN) : 16 quality bits (guessed)
Randomization under memory exhaustion @~0: 18 bits (guessed)
Randomization under memory exhaustion @0 : 18 bits (guessed)
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">linux</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Anonymous mapping randomization test     : 8 quality bits (guessed)
Heap randomization test (ET_EXEC)        : 13 quality bits (guessed)
Heap randomization test (PIE)            : 13 quality bits (guessed)
Main executable randomization (ET_EXEC)  : No randomization
Main executable randomization (PIE)      : 8 quality bits (guessed)
Shared library randomization test        : 8 quality bits (guessed)
VDSO randomization test                  : 8 quality bits (guessed)
Stack randomization test (SEGMEXEC)      : 19 quality bits (guessed)
Stack randomization test (PAGEEXEC)      : 19 quality bits (guessed)
Arg/env randomization test (SEGMEXEC)    : 11 quality bits (guessed)
Arg/env randomization test (PAGEEXEC)    : 11 quality bits (guessed)
Offset to library randomisation (ET_EXEC): 8 quality bits (guessed)
Offset to library randomisation (ET_DYN) : 13 quality bits (guessed)
Randomization under memory exhaustion @~0: No randomization
Randomization under memory exhaustion @0 : No randomization
</pre>
<h3>
<span id="Restricci.C3.B3n_de_acceso_a_los_logs_del_kernel"></span><span class="mw-headline" id="Restricción_de_acceso_a_los_logs_del_kernel">Restricción de acceso a los logs del kernel</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Sugerencia:</strong> En <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-hardened">linux-hardened</a></span> esta restricción viene activada por defecto.</div>
<p>Un atacante puede utilizar la información que proporcionan los logs del kernel para intentar comprometerlo, como por ejemplo direcciones de memoria sensibles. La opción <code>kernel.dmesg_restrict</code> solo deja acceder a los logs del kernel a procesos que tienen el permiso <code>CAP_SYS_ADMIN</code>, que por defecto son los procesos iniciados por root.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sysctl.d/51-dmesg-restrict.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">kernel.dmesg_restrict = 1</pre>
<h3>
<span id="Ocultaci.C3.B3n_de_punteros_del_kernel_en_.2Fproc.2Fkallsyms"></span><span class="mw-headline" id="Ocultación_de_punteros_del_kernel_en_/proc/kallsyms">Ocultación de punteros del kernel en /proc/kallsyms</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-hardened">linux-hardened</a></span> establece <code>kptr_restrict=2</code> por defecto en lugar de <code>0</code>.</div>
<p>Si se configura <code>kernel.kptr_restrict</code> a 1 hace que los usuarios normales (sin el permiso <code>CAP_SYSLOG</code>) no puedan ver en <code>/proc/kallsyms</code> ninguna dirección de símbolos del kernel. Si se dispone de un kernel compilado esta configuración reduce bastante las posibilidades de comprometer el kernel debido a que no se podrían averiguar de forma dinámica las direcciones de símbolos del kernel. En el caso de disponer de un kernel precompilado de Arch Linux como el que se instala por defecto esta configuración no sirve de nada pues el atacante puede obtener los símbolos directamente de las fuentes del paquete del kernel. Esta configuración hace que algunas operaciones del comando <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=perf">perf</a></span> no funcionen cuando lo ejecuta un usuario normal (no root), aunque si es cierto que para que este comando funcione plenamente es necesario ejecutarlo con permisos de root. En <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/34323">FS#34323</a> hay más información.
</p>
<p>Configurar <code>kernel.kptr_restrict</code> a 2 oculta en <code>/proc/kallsyms</code> las direcciones de símbolos del kernel en cualquier caso.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sysctl.d/51-kptr-restrict.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">kernel.kptr_restrict = 1</pre>
<h3><span class="mw-headline" id="Mejoras_en_la_seguridad_de_BPF">Mejoras en la seguridad de BPF</span></h3>
<p>BPF es un sistema que carga y ejecuta bytecode en el kernel de forma dinámica y en tiempo de ejecución. Este sistema suelen utilizarlo otros subsistemas del kernel de Linux relacionados con el procesamiento de paquetes de red (por ej. XDP), la depuración y seguimiento del kernel (kprobes, uprobes, tracepoints) y la seguridad mediante aislamiento de procesos como seccomp. Este sistema es muy útil en situaciones de seguridad avanzada de red, medición de rendimiento y la depuración dinámica del kernel.
</p>
<p>En un principio BPF era un acrónimo de "Berkeley Packet Filter" pues se utilizaba en BSD para capturar paquetes de red, después evolucionó a BPF Extendido (eBPF) y poco después cambió el nombre de nuevo a BPF pero sin ser un acrónimo. Si bien BPF puede utilizarse en herramientas de filtrado de paquetes de red no hay que confundirlo con iptables o netfilter.
</p>
<p>El código BPF puede interpretarse o compilarse mediante un compilador JIT (Compilador en Tiempo de Ejecución). Por defecto el kernel de Arch está compilado con <code>CONFIG_BPF_JIT_ALWAYS_ON</code> de forma que no puede interpretar BPF pero sí puede ejecutarlo mediante un compilador JIT. Esta situación hace más complicado llevar a cabo ataques del estilo SCPECTRE mediante BPF. Hay más detalles en <a rel="nofollow" class="external text" href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=290af86629b25ffd1ed6232c4e9107da031705cb">el parche del kernel que trata sobre CONFIG_BPF_JIT_ALWAYS_ON</a>.
</p>
<p>El kernel incluye una mejora en la seguridad para disminuir el riesgo de los ataques JIT spraying pero penaliza el rendimiento y la capacidad de depurar/hacer seguimiento de los programas BPF. Esta mejora puede activarse para código no privilegiado configurando <code>net.core.bpf_jit_harden</code> a <code>1</code> o en todo el código con <code>2</code>.
</p>
<p>Hay más detalles en las configuraciones de <code>net.core.bpf_*</code> de la <a rel="nofollow" class="external text" href="https://www.kernel.org/doc/Documentation/sysctl/net.txt">documentación del kernel</a>.
</p>
<h3><span class="mw-headline" id="El_alcance_de_ptrace">El alcance de ptrace</span></h3>
<p>Yama LSM es un módulo de Linux que viene activado por defecto en Arch y proporciona la opción <code>kernel.yama.ptrace_scope</code>. Esta opción se activa por defecto y evita que un proceso sin el permiso <code>CAP_SYS_PTRACE</code> realice llamadas de tipo <code>ptrace</code> a otros procesos fuera de su alcance. Esta situación mejora significativamente la seguridad, si bien muchos depuradores no podrán funcionar plenamente. Sin esta opción activada, un proceso de un usuario podría realizar las llamadas indicadas a cualquier otro proceso del mismo usuario si los dos procesos comparten el mismo espacio de nombres y si no existe alguna otra cosa que los separe. Esta situación demuestra el riesgo de la depuración de procesos.
</p>
<h4><span class="mw-headline" id="Ejemplos_de_depuradores_que_funcionan">Ejemplos de depuradores que funcionan</span></h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Los siguientes comandos pueden ejecutarse sin problema como root, y también mediante <a href="/title/Sudo_(Espa%C3%B1ol)" title="Sudo (Español)">sudo</a> a los usuarios permitidos con o sin contraseña.</div>
<ul>
<li><code>gdb -p $PID</code></li>
<li><code>strace -p $PID</code></li>
<li><code>perf trace -p $PID</code></li>
<li><code>reptyr $PID</code></li>
</ul>
<h3><span class="mw-headline" id="hidepid">hidepid</span></h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Advertencia:</strong> 
<ul>
<li>Esto puede dar problemas con aplicaciones que utilicen <a href="/title/Xorg_(Espa%C3%B1ol)" title="Xorg (Español)">Xorg (Español)</a> dentro de una sandbox (consultar alternativa).</li>
<li>También puede dar problemas con <a href="/title/D-Bus_(Espa%C3%B1ol)" title="D-Bus (Español)">D-Bus (Español)</a>, <a href="/title/PulseAudio_(Espa%C3%B1ol)" title="PulseAudio (Español)">PulseAudio (Español)</a> y <a href="/title/Bluetooth_(Espa%C3%B1ol)" title="Bluetooth (Español)">bluetooth (Español)</a> utilizando <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=systemd">systemd</a></span> &gt; 237.64-1.</li>
</ul>
</div>
<p>Un usuario que no sea root puede ver sus procesos y los de otros usuarios en <code>/proc</code>. Como esta situación puede producir riesgos de seguridad, el kernel puede hacer que un usuario que no sea root solo pueda ver sus procesos o ninguno en <code>/proc</code>. Esto es posible mediante el montaje de <code>proc</code> con las opciones <code>hidepid=</code> y <code>gid=</code>. Estas opciones están documentadas <a rel="nofollow" class="external autonumber" href="https://www.kernel.org/doc/html/latest/filesystems/proc.html">[2]</a>.
</p>
<p>El uso de estas opciones hace que un intruso no pueda obtener información sobre otros usuarios y los procesos que tengan activos, como por ejemplo si un demonio se ejecuta con privilegios elevados o si algún usuario está ejecutando algún programa vulnerable o sensible. Además, estas opciones evitan que un intruso acceda a información sensible que pueda estar contenida en los argumentos de programas que no han tenido en cuenta criterios básicos de seguridad.
</p>
<p>Si es necesario que un usuario o servicio sin privilegios de root tenga acceso a <code>/proc/&lt;pid&gt;</code> para que pueda ver la información de los procesos de todos los usuarios, es necesario incluir al usuario en cuestión en el grupo <code>proc</code> y también es necesario configurar <code>/etc/fstab</code> así:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/fstab</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">proc	/proc	proc	nosuid,nodev,noexec,hidepid=2,gid=proc	0	0</pre>
<p>Para que las sesiones de los usuarios funcionen correctamente es necesario configurar de la siguiente forma el servicio <i>systemd-logind</i>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/systemd-logind.service.d/hidepid.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
SupplementaryGroups=proc</pre>
<h3>
<span id="Restricci.C3.B3n_de_la_carga_de_m.C3.B3dulos"></span><span class="mw-headline" id="Restricción_de_la_carga_de_módulos">Restricción de la carga de módulos</span>
</h3>
<p>El kernel de Arch tiene la opción <code>CONFIG_MODULE_SIG_ALL</code> activada por defecto; esto quiere decir que todos los módulos del paquete <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span> están firmados y que el kernel solo cargará módulos firmados con una clave válida. En la práctica, el kernel no cargará los modulos compilados de forma local o proporcionados por paquetes como <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wireguard-arch">wireguard-arch</a></span><sup>[<a href="/title/Help:Procedures#Fix_broken_package_links" title="Help:Procedures">enlace roto</a>: replaced by <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span>]</sup>. Esta restricción también puede realizarse agregando <code>module.sig_enforce=1</code> en la línea de comandos del kernel. Hay más información en <a rel="nofollow" class="external free" href="https://www.kernel.org/doc/html/latest/admin-guide/module-signing.html">https://www.kernel.org/doc/html/latest/admin-guide/module-signing.html</a>.
</p>
<h3>
<span id="Desactivaci.C3.B3n_de_kexec"></span><span class="mw-headline" id="Desactivación_de_kexec">Desactivación de kexec</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Sugerencia:</strong> kexec viene desactivado por defecto en <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-hardened">linux-hardened</a></span>.</div>
<p>Kexec permite iniciar otro kernel desde el kernel actual.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sysctl.d/51-kexec-restrict.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">kernel.kexec_load_disabled = 1</pre>
<h3>
<span id="Restricci.C3.B3n_de_acceso_al_kernel_.28kernel_lockdown.29"></span><span class="mw-headline" id="Restricción_de_acceso_al_kernel_(kernel_lockdown)">Restricción de acceso al kernel (kernel lockdown)</span>
</h3>
<p>El kernel de Linux a partir de la versión 5.4 tiene la opción <code>kernel lockdown</code> para <a rel="nofollow" class="external text" href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=aefcf2f4b58155d27340ba5f9ddbe9513da8286d">restringir el acceso al kernel</a>, cuyo objetivo es mejorar la separación entre el kernel y el UID 0 del usuario root. Al activar esta opción algunas aplicaciones que acceden al kernel o al hardware pueden dejar de funcionar. Esta opción tiene dos modos para restringir el acceso de los usuarios al kernel:
</p>
<ol>
<li>
<code>integrity</code>: impide la modificación del kernel que se ejecuta actualmente, como podría hacerse con kexec y bpf.</li>
<li>
<code>confidentiality</code>: impide la extracción de información confidencial del kernel.</li>
</ol>
<p>Para activar kernel lockdown en tiempo de ejecución (<i>modo</i> puede ser <code>integrity</code> o <code>confidentiality</code>):
</p>
<pre># echo <i>modo</i> &gt; /sys/kernel/security/lockdown
</pre>
<p>Para activar kernel lockdown en el arranque hay que utilizar el <a href="/title/Kernel_parameter" class="mw-redirect" title="Kernel parameter">parámetro del kernel</a> <code>lockdown=<i>mode</i></code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Kernel lockdown no puede desactivarse en tiempo de ejecución.</div>
<h3>
<span id="Desactivaci.C3.B3n_de_hyper-threading_2"></span><span class="mw-headline" id="Desactivación_de_hyper-threading_2">Desactivación de hyper-threading</span>
</h3>
<p>En caso de tener una CPU <a href="/title/Intel_(Espa%C3%B1ol)" class="mw-redirect" title="Intel (Español)">Intel (Español)</a>, hay que considerar desactivar <a href="https://en.wikipedia.org/wiki/es:Hyper-Threading" class="extiw" title="wikipedia:es:Hyper-Threading">hyper-threading</a> debido a la vulnerabilidad <a href="https://en.wikipedia.org/wiki/Microarchitectural_Data_Sampling" class="extiw" title="wikipedia:Microarchitectural Data Sampling">MDS</a>. Hay más información en <a rel="nofollow" class="external free" href="https://www.kernel.org/doc/html/latest/admin-guide/hw-vuln/mds.html">https://www.kernel.org/doc/html/latest/admin-guide/hw-vuln/mds.html</a>.
</p>
<p>Para comprobar si la máquina está afectada, puede realizarse la siguiente comprobación:
</p>
<pre>$ grep . -r /sys/devices/system/cpu/vulnerabilities/
</pre>
<p>Si el resultado contiene <code>SMT vulnerable</code>, es necesario desactivar hyper-threading. Para ello, hay que agregar los siguientes <a href="/title/Kernel_parameters_(Espa%C3%B1ol)" title="Kernel parameters (Español)">parámetros del kernel</a>:
</p>
<pre>l1tf=full,force mds=full,nosmt mitigations=auto,nosmt nosmt=force
</pre>
<p>Después de un reinicio es necesario comprobar de nuevo si la máquina está afectada de forma que el resultado indique <code>SMT disabled</code>.
</p>
<p>Desactivar hyper-threading implica pérdida de rendimiento, por lo que es necesario evaluar si compensa o no.
</p>
<h2><span class="mw-headline" id="Aislamiento_de_aplicaciones">Aislamiento de aplicaciones</span></h2>
<p>Consultar también <a href="https://en.wikipedia.org/wiki/es:Aislamiento_de_procesos" class="extiw" title="wikipedia:es:Aislamiento de procesos">aislamiento de procesos</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> El elemento de configuración <code>CONFIG_USER_NS</code> hace que el kernel proporcione espacios de nombres de usuario de forma que los contenedores (vservers) puedan utilizarlos para separar la información de un usuario entre servidores virtuales. Esta configuración viene activada por defecto en <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span> (versión 4.14.5 y posteriores), en <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-lts">linux-lts</a></span> (versión 4.14.15 y posteriores) y en <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-hardened">linux-hardened</a></span>. Si este elemento de configuración no está activado pueden perderse ciertas funcionalidades relacionadas con el aislamiento de aplicaciones.</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Advertencia:</strong> La configuración <code>CONFIG_USER_NS_UNPRIVILEGED</code> viene activada por defecto en <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span> (versión 5.1.8 y posteriores), en <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-lts">linux-lts</a></span> (versión 4.19.55-2 y posteriores) y en <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-zen">linux-zen</a></span> (versión 5.1.14.zen1-2 y posteriores) a menos que <code>kernel.unprivileged_userns_clone</code> <a href="/title/Sysctl" title="Sysctl">sysctl</a> esté configurada a <code>0</code>. Tener activada esta configuración aumenta el riesgo de ataques por escalación de privilegios, por lo que es aconsejable desactivarla manualmente o utilizar el kernel de <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-hardened">linux-hardened</a></span>. Hay más información en <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/36969">FS#36969</a>.</div>
<h3><span class="mw-headline" id="Firejail">Firejail</span></h3>
<p><a href="/title/Firejail" title="Firejail">Firejail</a> es una herramienta para aislar aplicaciones y servidores fácil de utilizar. Se recomienda su uso para navegadores web, aplicaciones con conexión a Internet, así como para cualquier servidor en producción.
</p>
<h3><span class="mw-headline" id="bubblewrap">bubblewrap</span></h3>
<p><a href="/title/Bubblewrap" title="Bubblewrap">bubblewrap</a> es una herramienta para aislar aplicaciones desarrollada por <a href="https://en.wikipedia.org/wiki/Flatpak" class="extiw" title="wikipedia:Flatpak">Flatpak</a> que tiene menor impacto en la instalación que Firejail. Aunque bubblewrap no tiene ciertas funcionalidades como el uso de listas de rutas de archivo permitidas, proporciona otras como puntos de montaje enlazados o la creación de espacios de nombres para user/IPC/PID/network/cgroup. La herramienta bubblewrap puede aislar aplicaciones de forma simple o <a rel="nofollow" class="external text" href="https://github.com/projectatomic/bubblewrap/blob/master/demos/bubblewrap-shell.sh">compleja</a>. Para facilitar el uso de bubblewrap a la hora de aislar ciertas aplicaciones conocidas hay disponible una colección de scripts aquí<a rel="nofollow" class="external autonumber" href="https://github.com/valoq/bwscripts">[3]</a>.
</p>
<h3>
<span id="Jaulas_root_.28chroots.29"></span><span class="mw-headline" id="Jaulas_root_(chroots)">Jaulas root (chroots)</span>
</h3>
<p>Para disponer de un entorno totalmente aislado se pueden crear jaulas root (<a href="/title/Chroot_(Espa%C3%B1ol)" title="Chroot (Español)">chroot (Español)</a>) de forma manual.
</p>
<h3>
<span id="Contenedores_linux_.28LXC.29"></span><span class="mw-headline" id="Contenedores_linux_(LXC)">Contenedores linux (LXC)</span>
</h3>
<p>Los <a href="/title/Linux_Containers" title="Linux Containers">Linux Containers</a> son una buena opción cuando se necesita aislar más todavía un entorno que las opciones vistas pero sin llegar al aislamiento que proporcionan KVM y VirtualBox. LXC lo ejecuta el kernel de linux en una especie de jaula como chroot con su propio hardware virtual.
</p>
<h3>
<span id="Otras_opciones_de_virtualizaci.C3.B3n"></span><span class="mw-headline" id="Otras_opciones_de_virtualización">Otras opciones de virtualización</span>
</h3>
<p>Se puede mejorar el aislamiento y la seguridad de aplicaciones de alto riesgo o navegar por sitios web peligrosos con la virtualización proporcionada por soluciones como <a href="/title/VirtualBox_(Espa%C3%B1ol)" title="VirtualBox (Español)">VirtualBox (Español)</a>, <a href="/title/KVM" title="KVM">KVM</a>, <a href="/title/Xen_(Espa%C3%B1ol)" title="Xen (Español)">Xen (Español)</a> o <a rel="nofollow" class="external text" href="https://www.qubes-os.org/">Qubes OS</a> (basado en Xen).
</p>
<h2><span class="mw-headline" id="Servicios_de_red_y_cortafuegos">Servicios de red y cortafuegos</span></h2>
<h3><span class="mw-headline" id="Cortafuegos">Cortafuegos</span></h3>
<p>El kernel de Arch tiene distintos cortafuegos como <a href="https://en.wikipedia.org/wiki/es:Netfilter" class="extiw" title="wikipedia:es:Netfilter">Netfilter</a> que utiliza el módulo <a href="/title/Iptables_(Espa%C3%B1ol)" title="Iptables (Español)">iptables (Español)</a> y por otro lado el módulo <a href="/title/Nftables_(Espa%C3%B1ol)" title="Nftables (Español)">nftables (Español)</a>. Si bien estos dos módulos del kernel no vienen activados por defecto, es conveniente activar alguno de ellos y utilizarlo como cortafuegos para proteger los servicios de red del sistema aunque no se sepa muy bien qué servicios proteger.
</p>
<ul>
<li>Hay información general en <a href="/title/Iptables_(Espa%C3%B1ol)" title="Iptables (Español)">iptables (Español)</a> y <a href="/title/Nftables" title="Nftables">nftables</a>.</li>
<li>Consultar <a href="/title/Simple_stateful_firewall_(Espa%C3%B1ol)" title="Simple stateful firewall (Español)">Simple stateful firewall (Español)</a> para utilizar y configurar el cortafuegos iptables.</li>
<li>Consultar <a href="/title/Category:Firewalls" title="Category:Firewalls">Category:Firewalls</a> para configurar netfilter de varias formas.</li>
<li>Consultar <a href="/title/Ipset" title="Ipset">Ipset</a> para bloquear direcciones IP proporcionadas en una lista, como las listas proporcionadas por Bluetack.</li>
</ul>
<h3>
<span id="Par.C3.A1metros_del_kernel"></span><span class="mw-headline" id="Parámetros_del_kernel">Parámetros del kernel</span>
</h3>
<p>Los parámetros del kernel relacionados con los servicios de red se pueden configurar con <a href="/title/Sysctl" title="Sysctl">Sysctl</a> y <a href="/title/Sysctl#TCP/IP_stack_hardening_(Espa%C3%B1ol)" title="Sysctl">Sysctl#TCP/IP stack hardening (Español)</a><sup>[<a href="/title/Help:Procedures#Fix_broken_section_links" title="Help:Procedures">broken link</a>: invalid section]</sup> indica como hacerlo.
</p>
<h3><span class="mw-headline" id="SSH">SSH</span></h3>
<p>Para reducir el riesgo de los <a href="https://en.wikipedia.org/wiki/es:Ataque_de_fuerza_bruta" class="extiw" title="wikipedia:es:Ataque de fuerza bruta">ataques de fuerza bruta</a> se recomienda utilizar la autenticación basada en claves en lugar de usuario/contraseña (más información en <a href="/title/OpenSSH_(Espa%C3%B1ol)#Forzamiento_de_autenticaci%C3%B3n_con_claves_p%C3%BAblicas" title="OpenSSH (Español)">OpenSSH (Español)#Forzamiento de autenticación con claves públicas</a>). También hay disponibles otras soluciones menos efectivas como <a href="/title/Fail2ban" title="Fail2ban">Fail2ban</a> y <a href="/title/Sshguard_(Espa%C3%B1ol)" title="Sshguard (Español)">Sshguard (Español)</a> basadas en el seguimiento de logs de autenticación para comprobar conductas sospechosas de IPs remotas de forma que mediante la aplicación de <a href="/title/Iptables_(Espa%C3%B1ol)" title="Iptables (Español)">iptables rules</a> puedan bloquearse las IPs sospechosas, temporalmente o de forma definitiva. De todas maneras estas soluciones no evitan un ataque por denegación de servicio en el caso de que un atacante intercepte la IP remota de un administrador del servicio SSH y la utilice de forma abusiva para suplantar el inicio de conexión.
</p>
<p>También puede mejorarse la seguridad utilizando autenticación de dos pasos. En este sentido <a href="/title/Google_Authenticator_(Espa%C3%B1ol)" title="Google Authenticator (Español)">Google Authenticator (Español)</a> proporciona un procedimiento de autenticación de dos pasos que utiliza códigos de acceso de un solo uso (<a href="https://en.wikipedia.org/wiki/One-time_pad" class="extiw" title="wikipedia:One-time pad">OTP</a>).
</p>
<p>Es una buena recomendación denegar el acceso a la cuenta de root, tanto para realizar un seguimiento de posibles intrusos como para comprobar los intentos de inicio de sesión del usuario root después de implementar su denegación. En el caso de OpenSSH se puede ver cómo realizar esta configuración en <a href="/title/OpenSSH_(Espa%C3%B1ol)#Denegar" title="OpenSSH (Español)">OpenSSH (Español)#Denegar</a>.
</p>
<h3><span class="mw-headline" id="DNS">DNS</span></h3>
<p>En la mayoría de los sistemas las consultas <a href="/title/DNS" class="mw-redirect" title="DNS">DNS</a> no van cifradas ni autenticadas, por lo que es posible un <a href="https://en.wikipedia.org/wiki/es:Ataque_de_intermediario" class="extiw" title="wikipedia:es:Ataque de intermediario">ataque de intermediario</a>. Este tipo de ataque consiste en que un atacante intercepta consultas DNS de un cliente web y cambia las respuestas para devolver al cliente web una IP distinta a la verdadera. En esta situación el cliente web utilizará esta IP "ilegítima" para conectar con un servidor web, preparado con una copia adaptada de la web legítima, y realizar un ataque de suplantación o <a href="https://en.wikipedia.org/wiki/es:Phishing" class="extiw" title="wikipedia:es:Phishing">phising</a>. El objetivo del ataque es robar información que proporciona el cliente a la web "ilegítima" como un nombre de usuario y contraseña o información de una tarjeta de crédito. Este ataque es posible debido a que el protocolo DNS del cliente confía siempre en las respuestas que recibe, vengan de donde vengan.
</p>
<p><a href="/title/DNSSEC_(Espa%C3%B1ol)" title="DNSSEC (Español)">DNSSEC (Español)</a> proporciona autenticación e integridad de información DNS mediante firmas digitales criptográficas. Si bien su uso no está muy extendido, DNSSEC hace que un atacante no pueda realizar modificaciones en las consultas y respuestas DNS, aunque sí podría leerlas.
</p>
<p><a href="/title/DNSCrypt_(Espa%C3%B1ol)" class="mw-redirect" title="DNSCrypt (Español)">DNSCrypt (Español)</a> proporciona <i>DNS sobre TLS</i> y <i>DNS sobre HTTPS</i> para cifrar la comunicación con los servidores DNS mediante uno de estos protocolos. Hay más información en <a href="/title/Domain_name_resolution#DNS_servers" title="Domain name resolution">Domain name resolution#DNS servers</a>.
</p>
<p>En caso de disponer de un nombre de dominio, es conveniente activar la política <a href="/title/Sender_Policy_Framework" class="mw-redirect" title="Sender Policy Framework">Sender Policy Framework</a> para evitar la suplantación de correo electrónico.
</p>
<h3>
<span id="Proxies_.28intermediarios.29"></span><span class="mw-headline" id="Proxies_(intermediarios)">Proxies (intermediarios)</span>
</h3>
<p>Normalmente los proxies se utilizan como una capa extra entre aplicaciones y la red, filtrando datos desde orígenes desconocidos. Un proxy pequeño que se ejecute con privilegios bajos tiene mucho menos riesgo que una aplicación compleja que utilice los privilegios de un usuario final.
</p>
<p>Por ejemplo, un servidor DNS utiliza las librerías <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=glibc">glibc</a></span>, y si estas librerías tuvieran un bug de forma que un atacante pudiera aprovecharse de él y comprometer el servidor DNS, cualquier cliente DNS que se ejecute con privilegios de root y realice consultas DNS al servidor DNS comprometido, podría aceptar respuestas "envenedadas" y ser comprometido a su vez, produciendo por ejemplo la ejecución remota de código. Esta situación puede evitarse mediante la instalación de un servidor de caché DNS como <a href="/title/Dnsmasq_(Espa%C3%B1ol)" title="Dnsmasq (Español)">dnsmasq (Español)</a>, que actuaría como proxy o intermediario entre los clientes DNS y los servidores DNS.
<a rel="nofollow" class="external autonumber" href="https://googleonlinesecurity.blogspot.it/2016/02/cve-2015-7547-glibc-getaddrinfo-stack.html">[4]</a>
</p>
<h3>
<span id="Gesti.C3.B3n_de_certificados_SSL"></span><span class="mw-headline" id="Gestión_de_certificados_SSL">Gestión de certificados SSL</span>
</h3>
<p>Consultar <a href="/title/OpenSSL" title="OpenSSL">OpenSSL</a> y <a href="/title/Network_Security_Services" title="Network Security Services">Network Security Services</a> (NSS) para gestionar certificados SSL propios en servidores. Se aconseja tener en cuenta el proyecto <a href="/title/Let%E2%80%99s_Encrypt" class="mw-redirect" title="Let’s Encrypt">Let’s Encrypt</a>. 
</p>
<p>El paquete <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ca-certificates">ca-certificates</a></span> y sus dependencias proporcionan las cadenas de confianza por defecto de certificados SSL para Internet. Arch confía en fuentes de confianza como <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ca-certificates-mozilla">ca-certificates-mozilla</a></span> para proporcionar al sistema los certificados de confianza por defecto.
</p>
<p>En algunas ocasiones es prudente no confiar en algún certificado, por ejemplo, cuando se leen noticias como <a rel="nofollow" class="external text" href="https://www.theregister.co.uk/2016/05/27/blue_coat_ca_certs/">esta</a> y no esperar a que lo hagan los proveedores que proporcionan la fuente de confianza. Con Arch es fácil:
</p>
<ol>
<li>Obtener el certificado en cuestión en formato .crt, por ejemplo en el sitio <a rel="nofollow" class="external free" href="https://crt.sh">https://crt.sh</a> se pueden <a rel="nofollow" class="external text" href="https://crt.sh/?id=19538258">ver</a> o <a rel="nofollow" class="external text" href="https://crt.sh/?d=19538258">descargar</a> certificados. Si el certificado es de una Autoridad de confianza de certificación raíz, se puede encontrar en la ruta del sistema.</li>
<li>Copiar el certificado en <code>/etc/ca-certificates/trust-source/blacklist/</code>.</li>
<li>Con el usuario root ejecutar <i>update-ca-trust</i>.</li>
</ol>
<p>Para comprobar que funciona basta con navegar a alguna web que utilice alguno de los certificados ubicados en la lista negra del paso 2 y esperar ver en el navegador la alerta indicando que el certificado utilizado por esa web no es de confianza.
</p>
<h2>
<span id="Autenticaci.C3.B3n_de_paquetes"></span><span class="mw-headline" id="Autenticación_de_paquetes">Autenticación de paquetes</span>
</h2>
<p>Los <a rel="nofollow" class="external text" href="https://www2.cs.arizona.edu/stork/packagemanagersecurity/attacks-on-package-managers.html#overview">ataques a gestores de paquetes</a> suelen producirse cuando estos no gestionan bien el firmado de paquetes, pero también pueden afectar a gestores de paquetes que gestionan <a rel="nofollow" class="external text" href="https://www2.cs.arizona.edu/stork/packagemanagersecurity/faq.html">de forma adecuada sistemas de firmado</a>. Arch utiliza por defecto el firmado de paquetes y confía en una red de confianza basada en 5 claves maestras de confianza. Hay más detalles en <a href="/title/Pacman-key_(Espa%C3%B1ol)" class="mw-redirect" title="Pacman-key (Español)">pacman-key (Español)</a>.
</p>
<h2><span class="mw-headline" id="Actualizaciones">Actualizaciones</span></h2>
<p>Es importante mantener el sistema <a href="/title/System_maintenance_(Espa%C3%B1ol)#Actualizar_el_sistema" title="System maintenance (Español)">actualizado</a> y al día.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Advertencia:</strong> No se recomienda realizar <a href="/title/System_maintenance_(Espa%C3%B1ol)#Las_actualizaciones_parciales_no_son_compatibles" title="System maintenance (Español)">actualizaciones parciales</a>, pues no son compatibles, pueden dejar el sistema inestable y se puede complicar el proceso de actualización si el sistema no viene actualizándose con bastante frecuencia: al actualizar un componente, se debe actualizar el sistema completo.</div>
<h3>
<span id="Reiniciar_despu.C3.A9s_de_actualizar"></span><span class="mw-headline" id="Reiniciar_después_de_actualizar">Reiniciar después de actualizar</span>
</h3>
<p>Normalmente no se actualizan los procesos en ejecución, por lo que es necesario reiniciarlos para que su actualización sea efectiva.
</p>
<p>Una vez actualizado el kernel, es complicado que en él se apliquen bien todos los cambios, y la opción más segura es realizar después un reinicio del sistema. Si hay casos donde reiniciar puede suponer un problema, lo mejor es utilizar las <a href="/title/Kernel_live_patching" title="Kernel live patching">actualizaciones en vivo del kernel</a>; de esta forma puede actualizarse el kernel sin tener que reiniciar después.
</p>
<h3><span class="mw-headline" id="Seguimiento_de_alertas_de_vulnerabilidades">Seguimiento de alertas de vulnerabilidades</span></h3>
<p>Es fundamental estar al día con las actualizaciones sobre alertas de seguridad de CVE (Common Vulnerabilities and Exposure de la National Vulnerability Database). En <a rel="nofollow" class="external text" href="https://nvd.nist.gov/download.cfm">su página web</a> pueden descargarse estas alertas. En <a rel="nofollow" class="external text" href="https://security.archlinux.org/">Arch Linux Security Tracker</a> hay una tabla que combina información del Arch Linux Security Advisory (ASA), el Arch Linux Vulnerability Group (AVG) e información del CVE. Es conveniente conocer el funcionamiento del Equipo de Seguridad de Arch en <a href="/title/Arch_Security_Team" title="Arch Security Team">Arch Security Team</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Advertencia:</strong> No es conveniente realizar actualizaciones parciales (<a href="/title/Partial_upgrades" class="mw-redirect" title="Partial upgrades">partial upgrades</a>), no están contempladas en Arch Linux y pueden dejar el sistema inestable: cuando se actualiza un componente es necesario actualizar el sistema completo. Cuidado con no tener las actualizaciones al día, pues puede complicar los procesos de actualización.</div>
<h2><span class="mw-headline" id="Seguridad_perimetral">Seguridad perimetral</span></h2>
<p>Alguien con tiempo y los recursos suficientes puede obtener acceso como root a un ordenador. Implementando las barreras físicas suficientes puede conseguirse un nivel <i>práctico</i> de seguridad para evitarlo.
</p>
<p>Un atacante puede tomar control total de un ordenador conectando un dispositvo malicioso a él como un IEEE 1394 (Firewire) o una tarjeta PCI Express o Thunderbolt con acceso total a la memoria. Poco se puede hacer contra esto excepto actualizar firmwares maliciosos contenidos en memorias flash. <a rel="nofollow" class="external autonumber" href="https://www.breaknenter.org/projects/inception/">[5]</a> En cualquier caso la mayor parte de los atacantes no suelen tener determinación y conocimiento suficiente cómo para realizar este tipo de operaciones maliciosas.
</p>
<p>El <a href="#Cifrado_de_discos">#Cifrado de discos</a> hace que los datos de un disco duro de un ordenador no estén accesibles en caso de robo del ordenador. No obstante aunque un disco duro esté cifrado, un atacante ingenioso puede utilizar un firmware malicioso en el próximo inicio de sesión para obtener los datos sin cifrar del disco duro.
</p>
<h3>
<span id="Protecci.C3.B3n_mediante_la_BIOS"></span><span class="mw-headline" id="Protección_mediante_la_BIOS">Protección mediante la BIOS</span>
</h3>
<p>Establecer una contraseña en la BIOS es una buena medida para evitar que alguien pueda iniciar el ordenador desde un dispositivo externo y tomar control total del ordenador. Hay que asegurarse de que el orden de arranque en BIOS comienza con el disco duro donde reside el sistema operativo del ordenador y si es posible, configurar el resto de dispositivos para que no puedan arrancar el ordenador.
</p>
<h3><span class="mw-headline" id="Gestores_de_arranque">Gestores de arranque</span></h3>
<p>Es muy importante mantener protegido el <a href="/title/Arch_boot_process_(Espa%C3%B1ol)#Gestor_de_arranque" title="Arch boot process (Español)">gestor de arranque</a>. Sin protección podría iniciarse el ordenador directamente a una shell sin usuario/contraseña, como por ejemplo en el caso de utilizar <code>init=/bin/sh</code> como <a href="/title/Kernel_parameters_(Espa%C3%B1ol)" title="Kernel parameters (Español)">parámetro del kernel</a>.
</p>
<h4><span class="mw-headline" id="Syslinux">Syslinux</span></h4>
<p>Syslinux permite utilizar <a href="/title/Syslinux_(Espa%C3%B1ol)#Seguridad" title="Syslinux (Español)">contraseñas</a> de forma que requiera una contraseña para arrancar de forma global o una contraseña para cada elemento del menú de arranque.
</p>
<h4><span class="mw-headline" id="GRUB">GRUB</span></h4>
<p><a href="/title/GRUB_(Espa%C3%B1ol)" title="GRUB (Español)">GRUB</a> también puede utilizar contraseñas. Hay más detalles en <a href="/title/GRUB_(Espa%C3%B1ol)/Tips_and_tricks_(Espa%C3%B1ol)#Proteger_con_contrase%C3%B1a_el_men%C3%BA_de_GRUB" title="GRUB (Español)/Tips and tricks (Español)">GRUB (Español)/Tips and tricks (Español)#Proteger con contraseña el menú de GRUB</a>. GRUB también puede <a href="/title/GRUB_(Espa%C3%B1ol)#/boot_cifrado" title="GRUB (Español)">cifrar /boot</a>, de forma que solo algunas partes del código del gestor de arranque permanezcan sin cifrar. La configuración de GRUB, el <a href="/title/Kernel_(Espa%C3%B1ol)" title="Kernel (Español)">kernel</a> y <a href="/title/Initramfs_(Espa%C3%B1ol)" class="mw-redirect" title="Initramfs (Español)">initramfs</a> están cifrados.
</p>
<h3>
<span id="Utilizar_un_pendrive_como_partici.C3.B3n_de_arranque"></span><span class="mw-headline" id="Utilizar_un_pendrive_como_partición_de_arranque">Utilizar un pendrive como partición de arranque</span>
</h3>
<p>Una idea bastante conocida es colocar la partición de arranque en un pendrive de forma que el sistema no pueda arrancar sin utilizar ese pendrive como medio de arranque. Los seguidores de esta idea suelen utilizar el <a href="#Cifrado_de_discos">cifrado total del disco</a> y también el cifrado del sistema mediante <a href="/title/Dm-crypt_(Espa%C3%B1ol)/Specialties_(Espa%C3%B1ol)#Sistema_cifrado_usando_un_encabezado_LUKS_separado" title="Dm-crypt (Español)/Specialties (Español)">cabeceras separadas y cifradas</a> en la partición de arranque.
</p>
<h3>
<span id="Cierre_de_sesi.C3.B3n_autom.C3.A1tico"></span><span class="mw-headline" id="Cierre_de_sesión_automático">Cierre de sesión automático</span>
</h3>
<p>Con <a href="/title/Bash_(Espa%C3%B1ol)" title="Bash (Español)">Bash</a> o <a href="/title/Zsh_(Espa%C3%B1ol)" title="Zsh (Español)">Zsh</a> se puede utilizar la variable de entorno <code>TMOUT</code> para establecer un tiempo de inactividad antes de que la sesión se cierre de forma automática.
</p>
<p>Por ejemplo, la siguiente configuración hace que se cierre la sesión automáticamente de cualquier consola virtual después de 10 minutos de inactividad (60*10). Esta configuración no afecta a las sesiones de los emuladores de terminal iniciadas desde X11:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/profile.d/shell-timeout.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">TMOUT="$(( 60*10 ))";
[ -z "$DISPLAY" ] &amp;&amp; export TMOUT;
case $( /usr/bin/tty ) in
	/dev/tty[0-9]*) export TMOUT;;
esac
</pre>
<p>Si es necesario que todas las sesiones de Bash/Zsh (incluidas las iniciadas desde X) tengan este tiempo de inactividad, hay que utilizar:
</p>
<pre>$ export TMOUT="$(( 60*10 ))";
</pre>
<p>Esta configuración no funcionará si hay algún comando ejecutándose en la shell, como una sesión SSH o cualquier otra shell que no tenga en cuenta <code>TMOUT</code>. Esta configuración es muy útil cuando se cuelga GDM/Xorg en un ordenador porque se evita tener que acceder de forma local como root para reiniciarlo.
</p>
<h3>
<span id="Protecci.C3.B3n_contra_dispositivos_USB_da.C3.B1inos"></span><span class="mw-headline" id="Protección_contra_dispositivos_USB_dañinos">Protección contra dispositivos USB dañinos</span>
</h3>
<p><a href="/title/USBGuard" title="USBGuard">USBGuard</a> es un software que ayuda a proteger el ordenador de dispositivos USB dañinos mediante el uso de reglas basadas en los atributos de los dispositivos. Estos dispositivos USB dañinos pueden implementarse con <a rel="nofollow" class="external text" href="https://srlabs.de/badusb">BadUSB</a>, <a rel="nofollow" class="external text" href="https://github.com/samyk/poisontap">PoisonTap</a> o con <a rel="nofollow" class="external text" href="https://lanturtle.com/">LanTurtle</a>.
</p>
<h2>
<span id="Recompilaci.C3.B3n_de_paquetes"></span><span class="mw-headline" id="Recompilación_de_paquetes">Recompilación de paquetes</span>
</h2>
<p>Se puede modificar el código fuente de los paquetes para eliminar funciones y aspectos que reduzcan o eviten riesgos de seguridad y después volver a compilarlos. Por ejemplo, para evitar la vulnerabilidad <a rel="nofollow" class="external text" href="https://security.archlinux.org/CVE-2016-3189">CVE-2016-3189</a>, se puede modificar el código fuente del paquete <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bzip2">bzip2</a></span>, eliminar <code>bzip2recover</code> y volver a compilarlo.
</p>
<h2>
<span id="V.C3.A9ase_tambi.C3.A9n"></span><span class="mw-headline" id="Véase_también">Véase también</span>
</h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://security.archlinux.org/">Arch Linux Security Tracker</a></li>
<li><a rel="nofollow" class="external text" href="https://wiki.centos.org/HowTos/OS_Protection">CentOS Wiki: OS Protection</a></li>
<li><a rel="nofollow" class="external text" href="https://www.ibm.com/developerworks/linux/tutorials/l-harden-desktop/index.html">Hardening the Linux desktop</a></li>
<li><a rel="nofollow" class="external text" href="https://www.ibm.com/developerworks/linux/tutorials/l-harden-server/index.html">Hardening the Linux server</a></li>
<li><a rel="nofollow" class="external text" href="https://github.com/lfit/itpol/blob/master/linux-workstation-security.md">Linux Foundation: Linux workstation security checklist</a></li>
<li><a rel="nofollow" class="external text" href="https://www.privacytools.io/">privacytools.io Privacy Resources</a></li>
<li><a rel="nofollow" class="external text" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Security_Guide/">Red Hat Enterprise Linux 7 Security Guide</a></li>
<li><a rel="nofollow" class="external text" href="https://www.debian.org/doc/manuals/securing-debian-manual/index.en.html">Securing Debian Manual</a></li>
<li><a rel="nofollow" class="external text" href="https://web.archive.org/web/20140220055801/http://crunchbang.org:80/forums/viewtopic.php?id=24722">The paranoid #! Security Guide</a></li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="/title/Special:Categories" title="Special:Categories">Categories</a>: <ul>
<li><a href="/title/Category:Security_(Espa%C3%B1ol)" title="Category:Security (Español)">Security (Español)</a></li>
<li><a href="/title/Category:File_systems_(Espa%C3%B1ol)" title="Category:File systems (Español)">File systems (Español)</a></li>
<li><a href="/title/Category:Networking_(Espa%C3%B1ol)" title="Category:Networking (Español)">Networking (Español)</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="/title/Category:Pages_with_broken_section_links" title="Category:Pages with broken section links">Pages with broken section links</a></li>
<li><a href="/title/Category:Pages_with_dead_links" title="Category:Pages with dead links">Pages with dead links</a></li>
<li><a href="/title/Category:Pages_with_broken_package_links" title="Category:Pages with broken package links">Pages with broken package links</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Security_(Espa%C3%B1ol)&amp;oldid=669367">https://wiki.archlinux.org/index.php?title=Security_(Español)&amp;oldid=669367</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 8 May 2021, at 11:45.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="/title/ArchWiki:Privacy_policy" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="/title/ArchWiki:About" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="/title/ArchWiki:General_disclaimer" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
