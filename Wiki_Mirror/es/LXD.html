<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>LXD (Español) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-LXD_Español rootpage-LXD_Español skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">LXD (Español)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Estado de la traducción:</strong> este artículo es una traducción de <a href="../en/LXD.html" title="LXD">LXD</a> revisada por última vez el <b>2020-02-10</b>. Si advierte que la versión inglesa <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=LXD&amp;diff=0&amp;oldid=597151">ha cambiado</a> puede actualizar la traducción <a href="../es/ArchWiki:f6ecee2fb17812f6654b3a6ff807d392.html" class="mw-redirect" title="ArchWiki:Translation Team/Contributing (Español)">usted mismo</a> o avisar al <a href="../es/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Español)">equipo de traducción</a>.</div>
<p><b><a rel="nofollow" class="external text" href="https://linuxcontainers.org/lxd/">LXD</a></b> es un «hipervisor» de contenedores y máquinas virtuales, además de una nueva experiencia de usuario para los <a href="../en/Linux_Containers.html" title="Linux Containers">contenedores de Linux</a>.
</p>
<div class="archwiki-template-meta-related-articles-start">
<p>Artículos relacionados</p>
<ul>
<li><a href="../en/Linux_Containers.html" title="Linux Containers">Linux Containers</a></li>
</ul>
</div>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Preparaci%C3%B3n"><span class="tocnumber">1</span> <span class="toctext">Preparación</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Software_requerido"><span class="tocnumber">1.1</span> <span class="toctext">Software requerido</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#M%C3%A9todo_alternativo_de_instalaci%C3%B3n"><span class="tocnumber">1.2</span> <span class="toctext">Método alternativo de instalación</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Configurar_LXD"><span class="tocnumber">1.3</span> <span class="toctext">Configurar LXD</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Accediendo_a_LXD_como_un_usuario_sin_privilegios"><span class="tocnumber">1.4</span> <span class="toctext">Accediendo a LXD como un usuario sin privilegios</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6">
<a href="#Utilizaci%C3%B3n"><span class="tocnumber">2</span> <span class="toctext">Utilización</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#Crear_contenedor"><span class="tocnumber">2.1</span> <span class="toctext">Crear contenedor</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Redes_en_LXD"><span class="tocnumber">2.2</span> <span class="toctext">Redes en LXD</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#lxd-agent_dentro_de_una_VM"><span class="tocnumber">2.3</span> <span class="toctext">lxd-agent dentro de una VM</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10">
<a href="#Soluci%C3%B3n_de_problemas"><span class="tocnumber">3</span> <span class="toctext">Solución de problemas</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#Comprobar_la_configuraci%C3%B3n_del_kernel"><span class="tocnumber">3.1</span> <span class="toctext">Comprobar la configuración del kernel</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Lanzar_un_contenedor_sin_CONFIG_USER_NS"><span class="tocnumber">3.2</span> <span class="toctext">Lanzar un contenedor sin CONFIG_USER_NS</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Los_l%C3%ADmites_de_recursos_no_se_aplican_cuando_se_ven_desde_dentro_de_un_contenedor"><span class="tocnumber">3.3</span> <span class="toctext">Los límites de recursos no se aplican cuando se ven desde dentro de un contenedor</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Fallo_en_el_inicio_de_una_VM"><span class="tocnumber">3.4</span> <span class="toctext">Fallo en el inicio de una VM</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Sin_IPv4_con_systemd-networkd"><span class="tocnumber">3.5</span> <span class="toctext">Sin IPv4 con systemd-networkd</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-16"><a href="#Desinstalar"><span class="tocnumber">4</span> <span class="toctext">Desinstalar</span></a></li>
<li class="toclevel-1 tocsection-17"><a href="#V%C3%A9ase_tambi%C3%A9n"><span class="tocnumber">5</span> <span class="toctext">Véase también</span></a></li>
</ul>
</div>

<h2>
<span id="Preparaci.C3.B3n"></span><span class="mw-headline" id="Preparación">Preparación</span>
</h2>
<h3><span class="mw-headline" id="Software_requerido">Software requerido</span></h3>
<p>Instale <a href="../en/Linux_Containers.html" class="mw-redirect" title="LXC">LXC</a> y el paquete <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lxd">lxd</a></span>, entonces <a href="../es/Systemd.html#Utilizar_las_unidades" class="mw-redirect" title="Start (Español)">inicie</a> <code>lxd.service</code>.
</p>
<p>Véase <a href="../en/Linux_Containers.html#Enable_support_to_run_unprivileged_containers_(optional)" title="Linux Containers">Linux Containers#Enable support to run unprivileged containers (optional)</a> si desea ejecutar contenedores <i>sin privilegios</i>. De lo contrario véase <a href="#Lanzar_un_contenedor_sin_CONFIG_USER_NS">#Lanzar un contenedor sin CONFIG_USER_NS</a>.
</p>
<h3>
<span id="M.C3.A9todo_alternativo_de_instalaci.C3.B3n"></span><span class="mw-headline" id="Método_alternativo_de_instalación">Método alternativo de instalación</span>
</h3>
<p>Un método alternativo de instalación es a través de <a href="../en/Snap.html" class="mw-redirect" title="Snapd">snapd</a>, instalando el paquete <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/snapd/">snapd</a></span><sup><small>AUR</small></sup> y ejecutando:
</p>
<pre># snap install lxd
</pre>
<h3><span class="mw-headline" id="Configurar_LXD">Configurar LXD</span></h3>
<p>LXD necesita configurar un grupo de almacenamiento y (si desea acceso a Internet) la configuración de red. Para ello, ejecute lo siguiente como superusuario:
</p>
<pre># lxd init
</pre>
<h3><span class="mw-headline" id="Accediendo_a_LXD_como_un_usuario_sin_privilegios">Accediendo a LXD como un usuario sin privilegios</span></h3>
<p>Por defecto, el demonio LXD permite el acceso a los usuarios del grupo <code>lxd</code>, así que añada su usuario al grupo:
</p>
<pre># usermod -a -G lxd &lt;usuario&gt;
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Advertencia:</strong> Cualquiera añadido al grupo <code>lxd</code> es equivalente al superusuario. Más información <a rel="nofollow" class="external text" href="https://github.com/lxc/lxd#security">aquí</a> y <a rel="nofollow" class="external text" href="https://bugs.launchpad.net/ubuntu/+source/lxd/+bug/1829071">aquí</a>.</div>
<h2>
<span id="Utilizaci.C3.B3n"></span><span class="mw-headline" id="Utilización">Utilización</span>
</h2>
<h3><span class="mw-headline" id="Crear_contenedor">Crear contenedor</span></h3>
<p>LXD tiene dos partes, el demonio (el binario lxd) y el cliente (el binario lxc). Ahora que el demonio está configurado y en ejecución, puede crear un contenedor:
</p>
<pre>$ lxc launch ubuntu:16.04
</pre>
<p>Alternativamente, también puede usar un host LXD remoto como fuente de imágenes. Viene uno preconfigurado en LXD, llamado "images" (images.linuxcontainers.org)
</p>
<pre>$ lxc launch images:centos/7/amd64 centos
</pre>
<p>Para crear un contenedor Arch de amd64:
</p>
<pre>$ lxc launch images:archlinux/current/amd64 arch
</pre>
<h3><span class="mw-headline" id="Redes_en_LXD">Redes en LXD</span></h3>
<p>LXD utiliza las capacidades de red de LXC. Por defecto, conecta contenedores al dispositivo de red <code>lxcbr0</code>. Consulte la documentación de LXC en la <a href="../en/Linux_Containers.html#Host_network_configuration" title="Linux Containers">configuración de la red</a> para configurar un puente <i>(bridge)</i> para sus contenedores.
</p>
<p>Si desea utilizar una interfaz diferente a <code>lxcbr0</code>, edite la predeterminada utilizando la herramienta de línea de órdenes lxc:
</p>
<pre>$ lxc profile edit default
</pre>
<p>Se abrirá un editor con un archivo de configuración que, de forma predeterminada, contiene:
</p>
<pre>name: default
config: {}
devices:
  eth0:
    name: eth0
    nictype: bridged
    parent: lxcbr0
    type: nic
</pre>
<p>Puede establecer el parámetro <code>parent</code> al puente que desee que LXD conecte los contenedores de forma predeterminada.
</p>
<h3><span class="mw-headline" id="lxd-agent_dentro_de_una_VM">lxd-agent dentro de una VM</span></h3>
<p>Dentro de las VMs <code>lxd-agent</code> no está instalado por defecto en el sistema operativo. Este se puede instalar en el equipo montando un recurso de red compartido <code>9p</code>. Esto requiere acceso a la consola con un usuario válido.
</p>
<pre>   $ lxc console v1
   To detach from the console, press: &lt;ctrl&gt;+a q
   
   Ubuntu 18.04.3 LTS v1 ttyS0
   
   v1 login: ubuntu
   Password: 
   Welcome to Ubuntu 18.04.3 LTS (GNU/Linux 4.15.0-74-generic x86_64)
   
   ubuntu@v1:~$ sudo -i
   root@v1:~# mount -t 9p config /mnt/
   root@v1:~# cd /mnt/
   root@v1:/mnt# ./install.sh 
   Created symlink /etc/systemd/system/multi-user.target.wants/lxd-agent.service → /lib/systemd/system/lxd-agent.service.
   Created symlink /etc/systemd/system/multi-user.target.wants/lxd-agent-9p.service → /lib/systemd/system/lxd-agent-9p.service.
   
   LXD agent has been installed, reboot to confirm setup.
   To start it now, unmount this filesystem and run: systemctl start lxd-agent-9p lxd-agent
   root@v1:/mnt# reboot
</pre>
<p>Tras esto <code>lxd-agent</code> estará disponible y <code>lxc exec</code> funcionará dentro de la VM.
</p>
<h2>
<span id="Soluci.C3.B3n_de_problemas"></span><span class="mw-headline" id="Solución_de_problemas">Solución de problemas</span>
</h2>
<h3>
<span id="Comprobar_la_configuraci.C3.B3n_del_kernel"></span><span class="mw-headline" id="Comprobar_la_configuración_del_kernel">Comprobar la configuración del kernel</span>
</h3>
<p>Por defecto, el kernel de Arch Linux está compilado correctamente para los contenedores de Linux y su interfaz LXD. Sin embargo, si está utilizando un kernel personalizado o con opciones modificadas, el kernel podría estar configurado incorrectamente. Verifique que el kernel en ejecución esté correctamente configurado para ejecutar un contenedor:
</p>
<pre>$ lxc-checkconfig
</pre>
<h3><span class="mw-headline" id="Lanzar_un_contenedor_sin_CONFIG_USER_NS">Lanzar un contenedor sin CONFIG_USER_NS</span></h3>
<p>Para lanzar imágenes debe proporcionar <code>security.privileged=true</code> durante la creación de la imagen:
</p>
<pre>$ lxc launch ubuntu:16.04 ubuntu -c security.privileged=true
</pre>
<p>O para una imagen ya existente puede editar la configuración:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ lxc config edit ubuntu</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">name: ubuntu
profiles:
- default
config:
  ...
  security.privileged: "true"
  ...
devices:
  root:
    path: /
    type: disk
ephemeral: false
</pre>
<p>O para activar <code>security.privileged=true</code> para los nuevos contenedores, edite la configuración para el perfil predeterminado <i>(default)</i>:
</p>
<pre>$ lxc profile edit default
</pre>
<h3>
<span id="Los_l.C3.ADmites_de_recursos_no_se_aplican_cuando_se_ven_desde_dentro_de_un_contenedor"></span><span class="mw-headline" id="Los_límites_de_recursos_no_se_aplican_cuando_se_ven_desde_dentro_de_un_contenedor">Los límites de recursos no se aplican cuando se ven desde dentro de un contenedor</span>
</h3>
<p>El servicio lxcfs (encontrado en el repositorio Community) necesita ser instalado e iniciado:
</p>
<pre>$ systemctl start lxcfs
</pre>
<p>lxd tendrá que ser reiniciado. Active lxcfs para que el servicio se inicie en el arranque.
</p>
<h3><span class="mw-headline" id="Fallo_en_el_inicio_de_una_VM">Fallo en el inicio de una VM</span></h3>
<p>Arch Linux no distribuye el firmware ovmf firmado para inicio seguro, así que para arrancar máquinas virtuales debe desactivar el arranque seguro por el momento.
</p>
<pre>$ lxc launch ubuntu:18.04 test-vm --vm -c security.secureboot=false
</pre>
<p>Esto también se puede añadir al perfil predeterminado.
</p>
<h3><span class="mw-headline" id="Sin_IPv4_con_systemd-networkd">Sin IPv4 con systemd-networkd</span></h3>
<p>A partir de la versión 244.1, systemd detecta si los contenedores pueden escribir en <code>/sys</code>. Si es así, udev se inicia automáticamente y rompe IPv4 en contenedores sin privilegios. Véase <a rel="nofollow" class="external text" href="https://github.com/systemd/systemd-stable/commit/96d7083c5499b264ecebd6a30a92e0e8fda14cd5">commit bf331d8</a> y el <a rel="nofollow" class="external text" href="https://discuss.linuxcontainers.org/t/no-ipv4-on-arch-linux-containers/6395">debate en linuxcontainers</a>.
</p>
<p>En los contenedores creados a partir de 2020, ya debería haber un anulador de <code>systemd.networkd.service</code> para solucionar este problema, debe crearlo si no es así:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/systemd-networkd.service.d/lxc.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
BindReadOnlyPaths=/sys</pre>
<p>También podría solucionar este problema estableciendo <code>raw.lxc: lxc.mount.auto = proc:rw sys:ro</code> en el perfil del contenedor para asegurarse de que <code>/sys</code> es de solo lectura para todo el contenedor, aunque esto podría ser problemático, según el debate vinculado arriba.
</p>
<h2><span class="mw-headline" id="Desinstalar">Desinstalar</span></h2>
<p><a href="../es/Systemd.html#Utilizar_las_unidades" class="mw-redirect" title="Stop (Español)">Detenga</a> y desactive <code>lxd.service</code> y <code>lxd.socket</code>:
</p>
<p>Luego desinstale el paquete a través de pacman:
</p>
<pre> # pacman -R lxd
</pre>
<p>Si desinstaló el paquete sin desactivar el servicio, es posible que tenga un enlace simbólico roto en <code>/etc/systemd/system/multi-user.wants/lxd.service</code>.
</p>
<p>Si desea eliminar todos los datos:
</p>
<pre> # rm -r /var/lib/lxd
</pre>
<p>Si utilizó alguna de las configuraciones de red de ejemplo, debería eliminarla también.
</p>
<h2>
<span id="V.C3.A9ase_tambi.C3.A9n"></span><span class="mw-headline" id="Véase_también">Véase también</span>
</h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://lxd.readthedocs.io">Documentation oficial</a></li>
<li><a rel="nofollow" class="external text" href="https://linuxcontainers.org/lxd/">La página oficial de LXD</a></li>
<li><a rel="nofollow" class="external text" href="https://github.com/lxc/lxd">La página en GitHub de LXD</a></li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../es/Category:Virtualization.html" title="Category:Virtualization (Español)">Virtualization (Español)</a></li></ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=LXD_(Espa%C3%B1ol)&amp;oldid=597189">https://wiki.archlinux.org/index.php?title=LXD_(Español)&amp;oldid=597189</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 10 February 2020, at 21:12.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
