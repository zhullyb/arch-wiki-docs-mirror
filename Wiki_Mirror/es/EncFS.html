<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>EncFS (Español) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-EncFS_Español rootpage-EncFS_Español skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">EncFS (Español)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Estado de la traducción:</strong> este artículo es una traducción de <a href="../en/EncFS.html" title="EncFS">EncFS</a> revisada por última vez el <b>2020-08-06</b>. Si advierte que la versión inglesa <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=EncFS&amp;diff=0&amp;oldid=630104">ha cambiado</a> puede actualizar la traducción <a href="../es/ArchWiki:f6ecee2fb17812f6654b3a6ff807d392.html" class="mw-redirect" title="ArchWiki:Translation Team/Contributing (Español)">usted mismo</a> o avisar al <a href="../es/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Español)">equipo de traducción</a>.</div>
<div class="archwiki-template-meta-related-articles-start">
<p>Artículos relacionados</p>
<ul>
<li><a href="../es/Data-at-rest_encryption.html" title="Data-at-rest encryption (Español)">Data-at-rest encryption (Español)</a></li>
</ul>
</div>
<p><a href="https://en.wikipedia.org/wiki/EncFS" class="extiw" title="wikipedia:EncFS">EncFS</a> es un sistema de archivos <a href="https://en.wikipedia.org/wiki/es:Criptograf%C3%ADa" class="extiw" title="wikipedia:es:Criptografía">criptográfico</a> apilable ejecutado en el espacio de usuario similar a <a href="../en/ECryptfs.html" title="ECryptfs">eCryptfs</a>, y tiene como objetivo asegurar los datos con las mínimas complicaciones. Utiliza <a href="https://en.wikipedia.org/wiki/es:Filesystem_in_Userspace" class="extiw" title="wikipedia:es:Filesystem in Userspace">FUSE</a> para montar un directorio encriptado en otro directorio especificado por el usuario. No utiliza un sistema <a href="https://en.wikipedia.org/wiki/es:Loopback" class="extiw" title="wikipedia:es:Loopback">loopback</a> como algunos otros sistemas comparables como <a href="../en/TrueCrypt.html" title="TrueCrypt">TrueCrypt</a> y <a href="../en/Dm-crypt.html" title="Dm-crypt">dm-crypt</a>.
</p>
<p>Definitivamente EncFS es el software más simple si desea probar el cifrado de disco en Linux.
</p>
<p>Esto tiene una serie de ventajas y desventajas en comparación con otros sistemas. En primer lugar, no requiere ningún privilegio de root para implementarlo; cualquier usuario puede crear un repositorio de archivos cifrados. En segundo lugar, no necesita crear un único archivo ni un sistema de archivos dentro de ese; funciona en el sistema de archivos existente sin modificaciones.
</p>
<p>Sin embargo, esto implica algunas desventajas; debido a que los archivos cifrados no se almacenan en su propio archivo, alguien que tuviere acceso al sistema (a pesar del cifrado) podría ver la estructura de los directorios subyacentes, la cantidad de archivos, sus tamaños y cuándo se modificaron. Sin embargo, no podrían ver los contenidos.
</p>
<p>Este método de asegurar los datos en particular, obviamente no es perfecto, pero hay situaciones en las que es útil.
</p>
<p>Para obtener más detalles sobre EncFS en comparación con otras soluciones de cifrado de disco, consulte <a href="../es/Data-at-rest_encryption.html#Cuadro_comparativo" title="Data-at-rest encryption (Español)">Data-at-rest encryption (Español)#Cuadro comparativo</a>.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Comparaci%C3%B3n_con_eCryptFS"><span class="tocnumber">1</span> <span class="toctext">Comparación con eCryptFS</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Instalaci%C3%B3n"><span class="tocnumber">2</span> <span class="toctext">Instalación</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#Utilizaci%C3%B3n"><span class="tocnumber">3</span> <span class="toctext">Utilización</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Cambiar_la_contrase%C3%B1a"><span class="tocnumber">3.1</span> <span class="toctext">Cambiar la contraseña</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5">
<a href="#Herramientas_para_facilitar_el_montaje"><span class="tocnumber">4</span> <span class="toctext">Herramientas para facilitar el montaje</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Gnome_Encfs_Manager"><span class="tocnumber">4.1</span> <span class="toctext">Gnome Encfs Manager</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Montar_utilizando_gnome-encfs"><span class="tocnumber">4.2</span> <span class="toctext">Montar utilizando gnome-encfs</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Montar_utilizando_el_icono_CryptKeeper"><span class="tocnumber">4.3</span> <span class="toctext">Montar utilizando el icono CryptKeeper</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Montar_utilizando_encfsui"><span class="tocnumber">4.4</span> <span class="toctext">Montar utilizando encfsui</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Montar_con_fstab"><span class="tocnumber">4.5</span> <span class="toctext">Montar con fstab</span></a></li>
<li class="toclevel-2 tocsection-11">
<a href="#Montar_al_iniciar_sesi%C3%B3n_utilizando_pam_encfs"><span class="tocnumber">4.6</span> <span class="toctext">Montar al iniciar sesión utilizando pam_encfs</span></a>
<ul>
<li class="toclevel-3 tocsection-12"><a href="#Contrase%C3%B1a_%C3%BAnica"><span class="tocnumber">4.6.1</span> <span class="toctext">Contraseña única</span></a></li>
<li class="toclevel-3 tocsection-13">
<a href="#/etc/pam.d/"><span class="tocnumber">4.6.2</span> <span class="toctext">/etc/pam.d/</span></a>
<ul>
<li class="toclevel-4 tocsection-14"><a href="#configurar_pam_encfs_para_todos_los_m%C3%A9todos_de_inicio_de_sesi%C3%B3n"><span class="tocnumber">4.6.2.1</span> <span class="toctext">configurar pam_encfs para todos los métodos de inicio de sesión</span></a></li>
<li class="toclevel-4 tocsection-15"><a href="#inicio_de_sesi%C3%B3n"><span class="tocnumber">4.6.2.2</span> <span class="toctext">inicio de sesión</span></a></li>
<li class="toclevel-4 tocsection-16"><a href="#gdm"><span class="tocnumber">4.6.2.3</span> <span class="toctext">gdm</span></a></li>
<li class="toclevel-4 tocsection-17"><a href="#Configuraci%C3%B3n"><span class="tocnumber">4.6.2.4</span> <span class="toctext">Configuración</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2 tocsection-18"><a href="#Montar_al_iniciar_sesi%C3%B3n_utilizando_pam_mount"><span class="tocnumber">4.7</span> <span class="toctext">Montar al iniciar sesión utilizando pam_mount</span></a></li>
<li class="toclevel-2 tocsection-19">
<a href="#Montar_cuando_se_inserta_una_unidad_USB_con_carpetas_EncFS_utilizando_fsniper"><span class="tocnumber">4.8</span> <span class="toctext">Montar cuando se inserta una unidad USB con carpetas EncFS utilizando fsniper</span></a>
<ul>
<li class="toclevel-3 tocsection-20"><a href="#C%C3%B3mo_hacerlo"><span class="tocnumber">4.8.1</span> <span class="toctext">Cómo hacerlo</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-21"><a href="#Montar_utilizando_KDE_KWallet"><span class="tocnumber">4.9</span> <span class="toctext">Montar utilizando KDE KWallet</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-22">
<a href="#Copia_de_seguridad_cifrada"><span class="tocnumber">5</span> <span class="toctext">Copia de seguridad cifrada</span></a>
<ul>
<li class="toclevel-2 tocsection-23"><a href="#Copia_de_seguridad_del_directorio_cifrado"><span class="tocnumber">5.1</span> <span class="toctext">Copia de seguridad del directorio cifrado</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#Copia_de_seguridad_del_directorio_de_texto_sin_formato"><span class="tocnumber">5.2</span> <span class="toctext">Copia de seguridad del directorio de texto sin formato</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-25"><a href="#V%C3%A9ase_tambi%C3%A9n"><span class="tocnumber">6</span> <span class="toctext">Véase también</span></a></li>
</ul>
</div>

<h2>
<span id="Comparaci.C3.B3n_con_eCryptFS"></span><span class="mw-headline" id="Comparación_con_eCryptFS">Comparación con eCryptFS</span>
</h2>
<p><a href="../en/ECryptfs.html" title="ECryptfs">ECryptfs</a> se implementa en el espacio del kernel y, por lo tanto, es un poco más difícil de configurar. Con este método se deben recordar varias opciones de cifrado (algoritmo de cifrado usado, tipo de clave, etc.). No es el caso con EncFS, porque este almacena la información de metadatos de cifrado en un archivo de configuración por directorio (<code>.encfs6.xml</code>). Por lo tanto, no tiene que recordar nada (excepto la frase de contraseña).
</p>
<p>El rendimiento de ambos depende del tipo de actividad del disco. Si bien eCryptFS puede funcionar más rápido en algunos casos porque hay menos sobrecarga por el contexto en el que opera (entre el kernel y el espacio de usuario). EncFS tiene ventajas en otros aspectos, porque los metadatos de cifrado están centralizados y no almacenados en los encabezados de los archivos individuales. Para obtener más información, el proyecto EncFS proporciona <a rel="nofollow" class="external text" href="https://github.com/vgough/encfs/blob/master/PERFORMANCE.md">ejemplos de referencia</a>.
</p>
<h2>
<span id="Instalaci.C3.B3n"></span><span class="mw-headline" id="Instalación">Instalación</span>
</h2>
<p><a href="../es/Help:Reading.html#Instalaci%C3%B3n_de_paquetes" class="mw-redirect" title="Install (Español)">Instale</a> el paquete <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=encfs">encfs</a></span>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Advertencia:</strong> una <a rel="nofollow" class="external text" href="https://defuse.ca/audits/encfs.htm">review</a> de  seguridad de <i>encfs</i> (febrero de 2014) descubrió una serie de problemas de seguridad en la versión estable 1.7.4 (junio de 2014). Tenga presente este informe y sus referencias para tener información actualizada antes de usar dicha versión.</div>
<h2>
<span id="Utilizaci.C3.B3n"></span><span class="mw-headline" id="Utilización">Utilización</span>
</h2>
<p>Para crear un repositorio seguro, escriba la orden siguiente:
</p>
<pre>$ encfs ~/.<i>cifrado</i> ~/<i>original</i>
</pre>
<p>Tenga en cuenta que se deben utilizar rutas absolutas. Esta orden vendrá seguida por un mensaje preguntándole sobre si desea optar por las opciones predeterminadas o por una configuración experta. La configuración predeterminada es bastante segura. La experta permite especificar algoritmos y otras opciones. Después de ingresar una clave para el cifrado, se creará y montará el sistema de archivos codificado. Los archivos codificados se almacenarán, en este ejemplo, en <code>~/.<i>cifrado</i></code>, y sus versiones no cifradas en <code>~/<i>original</i></code>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Sugerencia:</strong> el uso de EncFS en un <a href="../en/File_systems.html" class="mw-redirect" title="File system">sistema de archivos</a> FUSE, por ejemplo <a href="../en/NTFS-3G.html" title="NTFS-3G">NTFS-3G</a>, puede abocar a un rendimiento lento. En este caso, considere la posibilidad de cambiar el sistema de archivos.</div>
<p>Para desmontar el sistema de archivos, escriba:
</p>
<pre>$ fusermount -u ~/<i>nombre</i>
</pre>
<p>Para volver a montar el sistema de archivos, emita la primera orden e ingrese la clave utilizada para codificarlo. Una vez ingresada la clave, el sistema de archivos se volverá a montar.
</p>
<h3>
<span id="Cambiar_la_contrase.C3.B1a"></span><span class="mw-headline" id="Cambiar_la_contraseña">Cambiar la contraseña</span>
</h3>
<p>Para cambiar la contraseña de un directorio cifrado por EncFS se puede usar la siguiente orden:
</p>
<pre>$ encfsctl passwd ~/.<i>nombre</i>
</pre>
<p>En este ejemplo, <code>~/.<i>nombre</i></code> es la ruta al directorio que contiene los archivos codificados. El programa le pedirá su contraseña actual y luego podrá establecer una nueva.
</p>
<h2><span class="mw-headline" id="Herramientas_para_facilitar_el_montaje">Herramientas para facilitar el montaje</span></h2>
<h3><span class="mw-headline" id="Gnome_Encfs_Manager">Gnome Encfs Manager</span></h3>
<p><a rel="nofollow" class="external text" href="http://libertyzero.com/GEncfsM/">Gnome Encfs Manager</a> es un administrador y montador de encfs fácil de usar, con una configuración predefinida, con soporte para Gnome Keyring, con un menú de bandeja inspirado en Cryptkeeper pero usando la API AppIndicator y otras características propias.
</p>
<p>Tiene disponible tanto el paquete <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gnome-encfs-manager-bin/">gnome-encfs-manager-bin</a></span><sup><small>AUR</small></sup> como el más actualizado <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gnome-encfs-manager-bzr/">gnome-encfs-manager-bzr</a></span><sup><small>AUR</small></sup>.
</p>
<h3><span class="mw-headline" id="Montar_utilizando_gnome-encfs">Montar utilizando gnome-encfs</span></h3>
<p>gnome-encfs integra las carpetas EncFS en el escritorio de GNOME, almacenando sus contraseñas en el depósito de claves y, opcionalmente, montándo dichas carpetas al iniciar sesión utilizando el mecanismo de inicio automático de GNOME.
Este método tiene la ventaja de que se puede montar y automatizar, y la contraseña no tiene que ser la misma que su contraseña de usuario.
</p>
<h3><span class="mw-headline" id="Montar_utilizando_el_icono_CryptKeeper">Montar utilizando el icono CryptKeeper</span></h3>
<p>Aplicación bastante simple, basta <a href="../es/Help:Reading.html#Instalaci%C3%B3n_de_paquetes" class="mw-redirect" title="Install (Español)">instalar</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/cryptkeeper/">cryptkeeper</a></span><sup><small>AUR</small></sup> y añadirla a su sesión X.
</p>
<h3><span class="mw-headline" id="Montar_utilizando_encfsui">Montar utilizando encfsui</span></h3>
<p>El script de bash <a rel="nofollow" class="external text" href="https://github.com/bulletmark/encfsui">encfsui</a> proporciona una interfaz gráfica de usuario simple diseñada con <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=zenity">zenity</a></span>, creada en torno de la utilidad de línea de órdenes de EncFS, para montar y desmontar un directorio cifrado. Incluye un lanzador de escritorio. Instálelo con <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/encfsui/">encfsui</a></span><sup><small>AUR</small></sup>.
</p>
<h3><span class="mw-headline" id="Montar_con_fstab">Montar con fstab</span></h3>
<p>Añadir una entrada en <code>/etc/fstab</code> le permitirá montar el volumen encfs con un simple <code>mount /ruta/destino</code> y luego se le pedirá su contraseña.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/fstab</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">encfs#/ruta/a/datos/encfs  /mnt/decrypted  fuse  noauto,user  0  0
</pre>
<p>La opción <code>noauto</code> evita el intento de montar el volumen en el arranque, lo que podría retrasar el proceso de arranque mientras el sistema espera que se ingrese una contraseña. Se puede omitir <code>user</code> si se quiere que solo el usuario <code>root</code> pueda montar el volumen.
</p>
<h3>
<span id="Montar_al_iniciar_sesi.C3.B3n_utilizando_pam_encfs"></span><span class="mw-headline" id="Montar_al_iniciar_sesión_utilizando_pam_encfs">Montar al iniciar sesión utilizando pam_encfs</span>
</h3>
<p>Instale <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pam_encfs/">pam_encfs</a></span><sup><small>AUR</small></sup>. Véase también:
</p>
<ul>
<li><a rel="nofollow" class="external free" href="https://wiki.edubuntu.org/EncryptedHomeFolder">https://wiki.edubuntu.org/EncryptedHomeFolder</a></li>
<li><a rel="nofollow" class="external free" href="http://code.google.com/p/pam-encfs/">http://code.google.com/p/pam-encfs/</a></li>
</ul>
<h4>
<span id="Contrase.C3.B1a_.C3.BAnica"></span><span class="mw-headline" id="Contraseña_única">Contraseña única</span>
</h4>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Advertencia:</strong> tenga en cuenta que si va a usar la misma contraseña (por ejemplo: utilizando el parámetro try_first_pass o use_first_pass) para iniciar tanto sesión como encfs (para que encfs se monten durante su inicio de sesión), entonces debe usar <a href="../en/SHA_password_hashes.html" title="SHA password hashes">SHA password hashes</a> (preferiblemente SHA512 con gran cantidad de rondas) y (lo que es más importante) <b>contraseña segura</b>, porque el hash de su contraseña probablemente se almacene en forma no cifrada en el archivo <code>/etc/shadow</code> al que un atacante podría acceder con el fin de obtener su contraseña de encfs (porque es la misma que su contraseña de inicio de sesión normal de Unix).</div>
<h4>
<span id=".2Fetc.2Fpam.d.2F"></span><span class="mw-headline" id="/etc/pam.d/">/etc/pam.d/</span>
</h4>
<p>Tenga en cuenta que cuando utilice el parámetro <i>try_first_pass</i> en <i>pam_unix.so</i>, deberá configurar EncFS para que use la misma contraseña que está utilizando para iniciar sesión (o viceversa) y bastará ingresar una única contraseña. Sin este parámetro, deberá ingresar dos contraseñas.
</p>
<h5>
<span id="configurar_pam_encfs_para_todos_los_m.C3.A9todos_de_inicio_de_sesi.C3.B3n"></span><span class="mw-headline" id="configurar_pam_encfs_para_todos_los_métodos_de_inicio_de_sesión">configurar pam_encfs para todos los métodos de inicio de sesión</span>
</h5>
<p>Coloque la línea encfs en /etc/pam.d/system-login como sigue:
</p>
<pre>...
auth       sufficient pam_encfs.so
...
</pre>
<h5>
<span id="inicio_de_sesi.C3.B3n"></span><span class="mw-headline" id="inicio_de_sesión">inicio de sesión</span>
</h5>
<p>En esta sección se explica cómo hacer que encfs se monte automáticamente cuando inicie sesión con un terminal virtual.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> si solo desea usar encfs a través de <a href="../en/GDM.html" title="GDM">GDM</a>, puede saltarse esta sección e ir directamente a la <a href="#gdm">sección GDM</a>.</div>
<p>Edite el archivo <code>/etc/pam.d/login</code>:
</p>
<pre>#%PAM-1.0

auth		required	pam_securetty.so
auth		requisite	pam_nologin.so
auth		sufficient	pam_encfs.so
auth		required	pam_unix.so nullok try_first_pass
#auth		required	pam_unix.so nullok
auth		required	pam_tally.so onerr=succeed file=/var/log/faillog
# use this to lockout accounts for 10 minutes after 3 failed attempts
#auth		required	pam_tally.so deny=2 unlock_time=600 onerr=succeed file=/var/log/faillog
account		required	pam_access.so
account		required	pam_time.so
account		required	pam_unix.so
#password	required	pam_cracklib.so difok=2 minlen=8 dcredit=2 ocredit=2 retry=3
#password	required	pam_unix.so md5 shadow use_authtok
session		required	pam_unix.so
session		required	pam_env.so
session		required	pam_motd.so
session		required	pam_limits.so
session		optional	pam_mail.so dir=/var/spool/mail standard
session		optional	pam_lastlog.so
session		optional	pam_loginuid.so
-session	optional	pam_ck_connector.so nox11
#Automatic unmount (optional):
#session	required	pam_encfs.so
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Advertencia:</strong> tenga en cuenta que el desmontaje automático se procesará incluso cuando exista otra sesión. Por ejemplo: cerrar sesión en la consola virtual puede desmontar encfs montada en una sesión GDM que aún esté activa.</div>
<h5><span class="mw-headline" id="gdm">gdm</span></h5>
<p>Esta sección explica cómo hacer que encfs se monte automáticamente al iniciar sesión con GDM (GNOME Display Manager).
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> para propósitos de depuración de errores, puede intentar primero el montaje automático con el inicio de sesión en una consola virtual. <a href="#inicio_de_sesi%C3%B3n">Este artículo aborda el montaje automático en el inicio de sesión en una consola virtual</a>.</div>
<p>Edite el archivo <code>/etc/pam.d/gdm-password</code>.
</p>
<p>Inserte (no sobrescriba) lo siguiente en la parte inferior de gdm-password:
</p>
<pre>#%PAM-1.0
auth            requisite       pam_nologin.so
auth            required        pam_env.so
auth            sufficient      pam_encfs.so
auth            required        pam_unix.so try_first_pass
auth            optional        pam_gnome_keyring.so
account         required        pam_unix.so
session         required        pam_limits.so
session         required        pam_unix.so
session         optional        pam_gnome_keyring.so auto_start
password        required        pam_unix.so
session         required        pam_encfs.so
</pre>
<p>Guarde y salga.
</p>
<h5>
<span id="Configuraci.C3.B3n"></span><span class="mw-headline" id="Configuración">Configuración</span>
</h5>
<p>Edite <code>/etc/security/pam_encfs.conf</code>:
</p>
<p>Recomendado: comente la línea:
</p>
<pre>encfs_default --idle=1
</pre>
<p>Este indicador desmontará su carpeta cifrada después de 1 minuto de inactividad. No obstante, si la carpeta se ha montando automáticamente al iniciar sesión, probablemente deseará mantenerla montada durante el tiempo que esté conectado.
</p>
<p>En la parte inferior, comente las entradas de demostración existentes y añada:
</p>
<pre>#USERNAME       SOURCE                                  TARGET PATH                 ENCFS Options           FUSE Options
foo             /home/foo/EncryptedFolder             /home/foo/DecryptedFolder       -v                    allow_other
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> no es posible montar múltiples carpetas EncFS al iniciar sesión usando <code>pam_encfs</code>. Si se especifican varias entradas en <code>/etc/security/pam_encfs.conf</code>, solo se montará la primera y el resto se ignorarán. Para montar múltiples carpetas EncFS al iniciar sesión es necesario usar <a href="../en/Pam_mount.html" title="Pam mount">pam_mount</a>. Vea <a href="#Montar_al_iniciar_sesi%C3%B3n_utilizando_pam_mount">#Montar al iniciar sesión utilizando pam_mount</a> para más detalles.</div>
<p>Además, si ve la línea de abajo, elimine <code>allow_root</code> de las opciones. De lo contrario, entrará en conflicto con <code>allow_other</code> definido anteriormente.
</p>
<pre>fuse_default allow_root,nonempty
</pre>
<p>A continuación, edite <code>/etc/fuse.conf</code> y descomente:
</p>
<pre>user_allow_other

</pre>
<p>Para probar su configuración, abra una nueva terminal virtual (por ejemplo con <code>Ctrl+Alt+F4</code>) e inicie sesión. Debería comprobar que pam monta con éxito su carpeta EncFS.
</p>
<h3>
<span id="Montar_al_iniciar_sesi.C3.B3n_utilizando_pam_mount"></span><span class="mw-headline" id="Montar_al_iniciar_sesión_utilizando_pam_mount">Montar al iniciar sesión utilizando pam_mount</span>
</h3>
<p>Instale y configure <a href="../en/Pam_mount.html" title="Pam mount">pam_mount</a> como se explica en su página wiki. Los montajes de EncFS se pueden especificar en el archivo de configuración de pam_mount de la siguiente manera:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/security/pam_mount.conf.xml</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;volume fstype="fuse" path="encfs#<i>/ruta/a/datos/cifrados/con/encfs</i>" mountpoint="<i>/ruta/a/puntodemontaje/de/datos/descifrados</i>" options="nonempty" /&gt;</pre>
<p>Los montajes de EncFS deben tener la misma contraseña que su cuenta de usuario. La opción <code>nonempty</code> hace posible montar el sistema de archivos cifrados incluso cuando el punto de montaje no está vacío. Puede eliminar esta opción si este no es el comportamiento deseado.
</p>
<p>Es posible montar múltiples carpetas EncFS al iniciar sesión especificando múltiples entradas <code>&lt;volume&gt;</code> consecutivas en el archivo de configuración.
</p>
<h3><span class="mw-headline" id="Montar_cuando_se_inserta_una_unidad_USB_con_carpetas_EncFS_utilizando_fsniper">Montar cuando se inserta una unidad USB con carpetas EncFS utilizando fsniper</span></h3>
<p>Este es un método simple para montar automáticamente encfs (solicitando contraseña) cuando se inserta una unidad USB con una o más carpetas cifradas con EncFS en su raíz. Usaremos <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/fsniper/">fsniper</a></span><sup><small>AUR</small></sup> (sistema de archivos que explora utilizando el demonio inotify) y <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=git">git</a></span> (para pedir contraseñas binarias).
</p>
<p>Para conocer más, consulte <a rel="nofollow" class="external free" href="https://github.com/Harvie/Programs/tree/master/bash/encfs/automount">https://github.com/Harvie/Programs/tree/master/bash/encfs/automount</a> (última versión de los archivos utilizados en <a href="#C%C3%B3mo_hacerlo">#Cómo hacerlo</a>).
</p>
<h4>
<span id="C.C3.B3mo_hacerlo"></span><span class="mw-headline" id="Cómo_hacerlo">Cómo hacerlo</span>
</h4>
<p><b>1.</b> Necesitará un montaje automático de USB que funcione para esto, como lo hace Thunar o Gnome Files.<br>
<b>2.</b> Cree una carpeta cifrada en su unidad extraible, por ejemplo: <code>encfs /media/USB/somename /media/USB/somename.plain</code> (y ​​luego desmonte todo).<br>
<b>3.</b> Cree un archivo en su unidad local <code>~/.config/fsniper/config</code>:
</p>
<pre>watch {
	/etc/ {
		mtab {
			# %% is replaced with the filename of the new file
			handler = encfs-automount.sh %%;
		}
	}
}
</pre>
<p><b>4.</b> Instale el script de ayuda:
</p>
<pre>#!/bin/sh
#	~/.config/fsniper/scripts/encfs-automount.sh
# Quick &amp; dirty script for automounting EncFS USB drives
# TODO:
#  - Unmounting!!!
#
ASKPASS="/usr/lib/git-core/git-gui--askpass"

lock=/tmp/fsniper_encfs.lock
lpid=$(cat "$lock" 2&gt;/dev/null) &amp;&amp;
ps "$lpid" | grep "$lpid" &gt;/dev/null &amp;&amp; {
	echo "Another instance of fsniper_encfs is running"
	exit;
}
echo $BASHPID &gt; "$lock";
sleep 2;

echo
echo ==== EncFS automount script for fsniper ====

list_mounts() {
	cat /proc/mounts | cut -d ' ' -f 2
}

list_mounts | while read mount; do
	config="$mount"'/*/.encfs*';
	echo Looking for "$config"
	config="$(echo $config)"
	[ -r "$config" ] &amp;&amp; {
		cyphertext="$(dirname "$config")";
		plaintext="$cyphertext".plain
		echo Found config: "$config";
		echo Trying to mount: "$cyphertext to $plaintext";
		list_mounts | grep "$plaintext" &gt;/dev/null &amp;&amp; {
			echo Already mounted: "$plaintext"
		} || {
			echo Will mount "$cyphertext to $plaintext"
			"$ASKPASS" "EncFS $cyphertext to $plaintext" | encfs --stdinpass "$cyphertext" "$plaintext"
		}
	}
done
echo

rm "$lock" 2&gt;/dev/null
</pre>
<p><b>5.</b> Asegúrese de que /usr/lib/git-core/git-gui--askpass funciona (es por eso que necesita el paquete git, aunque también podría reajustar el script de ayuda). <br>
<b>6.</b> Pruebe <code>fsniper --log-to-stdout</code> en la terminal (la petición de contraseña debe aparecer cuando se inserte la unidad USB).<br>
<b>7.</b> Agregue <code>fsniper --daemon</code> a su sesión.<br>
<b>8.</b> No olvide desmontar encfs antes de quitar la unidad extraible.
</p>
<h3><span class="mw-headline" id="Montar_utilizando_KDE_KWallet">Montar utilizando KDE KWallet</span></h3>
<p>Esto se puede hacer en KDE con el script <a rel="nofollow" class="external text" href="http://pastebin.com/RR1hguwE">kdeencfs</a>. También deberá <a href="../es/Help:Reading.html#Instalaci%C3%B3n_de_paquetes" class="mw-redirect" title="Install (Español)">instalar</a> los paquetes <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=kdialog">kdialog</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/kdebase-runtime/">kdebase-runtime</a></span><sup><small>AUR</small></sup>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=qt5-tools">qt5-tools</a></span> y <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=kwallet-pam">kwallet-pam</a></span> desde los <a href="../es/Official_repositories.html" title="Official repositories (Español)">repositorios oficiales</a>. kwallet-pam tiene que comenzar con la sesión  por defecto (<i>si no es así, agregue /usr/lib/pam_kwallet_init al inicio de sesión</i>). El script se puede usar llamandolo con <i>kdeencfs carpeta-cifrada carpeta-descifrada</i>.
</p>
<h2><span class="mw-headline" id="Copia_de_seguridad_cifrada">Copia de seguridad cifrada</span></h2>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Advertencia:</strong> si se siguen los siguientes ejemplos para separar el archivo de opciones de cifrado de los datos, evidentemente también debe asegurarse de tener una copia de seguridad separada del archivo de opciones en texto sin formato. Si su disco se bloquea y no ha hecho una copia de seguridad del texto sin formato, la copia de seguridad por sí sola no ayudará en nada porque el archivo contiene metadatos criptográficos. Lo bueno es que el archivo es estático, no necesita repetir la copia de seguridad una y otra vez a menos que cambie la contraseña.</div>
<h3><span class="mw-headline" id="Copia_de_seguridad_del_directorio_cifrado">Copia de seguridad del directorio cifrado</span></h3>
<p>Se puede hacer una copia de seguridad de un directorio cifrado y restaurarlo en otra ubicación. Esto es posible porque el archivo de configuración con las opciones de cifrado/metadatos se almacena en el propio directorio en texto sin formato en el archivo oculto <code>.encfs6.xml</code>. Esto no compromete la seguridad, porque la contraseña no está en él.
</p>
<p>Sin embargo, si, por ejemplo, almacena la copia de seguridad en una ubicación remota (por ejemplo, en la nube) o en un dispositivo portátil, puede sentirse incómodo al respecto. En este caso, tampoco es un problema mover manualmente el archivo oculto fuera del directorio antes de crear la copia de seguridad. Incluso puede moverlo permanentemente y aún montar y acceder a los archivos cifrados, si pasa su ubicación a <i>encfs</i> a través de la variable de entorno <code>ENCFS6_CONFIG</code>. Para el ejemplo anterior dado en <a href="#Utilizaci%C3%B3n">#Utilización</a>:
</p>
<pre>$ mv ~/.nombre/.encfs6.xml ~/.
$ ENCFS6_CONFIG=~/.encfs6.xml encfs ~/.nombre ~/nombre
</pre>
<h3><span class="mw-headline" id="Copia_de_seguridad_del_directorio_de_texto_sin_formato">Copia de seguridad del directorio de texto sin formato</span></h3>
<p>El siguiente ejemplo supone que desea crear una copia de seguridad cifrada del directorio de texto sin formato existente <code>~/mythesis</code> que contiene el archivo <code>thesis.txt</code>.
</p>
<p>Primero, creamos la copia de seguridad cifrada del directorio de texto sin formato existente:
</p>
<pre>$ encfs --reverse ~/mythesis /tmp/thesisbackup
</pre>
<p>Tenga en cuenta que en este caso el orden del directorio se invierte respecto al uso normal. El uso de la opción <code>--reverse</code> tiene dos efectos: en primer lugar, el archivo de configuración ahora se almacena en el directorio de texto sin formato y <code>/tmp/thesisbackup</code> solo lo contiene en forma cifrada. En segundo lugar, los archivos en <code>/tmp/thesisbackup</code> no son persistentes. Se eliminarán una vez que se desmonte (no, esto no se debe al uso del punto de montaje en <code>/tmp</code>).
</p>
<p>En segundo lugar, ahora es el momento de copiar los archivos cifrados en la ubicación deseada <i>antes</i> de desmontar nuevamente el directorio temporal <i>encfs</i>:
</p>
<pre>$ cp -R /tmp/thesisbackup/* /mnt/usbstick/
$ fusermount -u /tmp/thesisbackup 
</pre>
<p>y hecho.
</p>
<p>Para restaurar (o ver) la copia de seguridad, necesitamos acceso a las opciones de cifrado en texto sin formato, que debe pasarse a <i>encfs</i> con la variable de entorno <code>ENCFS6_CONFIG</code> (utilizamos un directorio diferente para no estropear el archivo <code>~/mythesis</code> existente):
</p>
<pre>$ ENCFS6_CONFIG=~/mythesis/.encfs6.xml encfs ~/mnt/usbstick/thesisbackup ~/restoremythesis
</pre>
<p>Si ahora lista el contenido restaurado, contendrá dos archivos:
</p>
<pre>$ ls -la ~/restoremythesis
... 
-rw-r--r--  1 student student    1078  3. Jan 12:33 .encfs6.xml
-rw-r--r--  1 student student      42  3. Jan 12:33 thesis.txt
...
</pre>
<h2>
<span id="V.C3.A9ase_tambi.C3.A9n"></span><span class="mw-headline" id="Véase_también">Véase también</span>
</h2>
<ul>
<li>
<a rel="nofollow" class="external text" href="https://vgough.github.io/encfs/">EncFS</a> - página de inicio del proyecto.</li>
<li>
<a rel="nofollow" class="external text" href="https://defuse.ca/audits/encfs.htm">Auditoría de seguridad</a> de EncFS por Taylor Hornby (14 de enero de 2014).</li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../es/Category:Data-at-rest_encryption.html" title="Category:Data-at-rest encryption (Español)">Data-at-rest encryption (Español)</a></li>
<li><a href="../es/Category:FUSE.html" title="Category:FUSE (Español)">FUSE (Español)</a></li>
</ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=EncFS_(Espa%C3%B1ol)&amp;oldid=631067">https://wiki.archlinux.org/index.php?title=EncFS_(Español)&amp;oldid=631067</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 11 August 2020, at 18:48.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
