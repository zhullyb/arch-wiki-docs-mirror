<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Solid state drive (Русский) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Solid_state_drive_Русский rootpage-Solid_state_drive_Русский skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Solid state drive (Русский)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Ссылки по теме</p>
<ul>
<li><a href="../en/Benchmarking.html" class="mw-redirect" title="SSD Benchmarking">SSD Benchmarking</a></li>
<li><a href="../en/Solid_state_drive/Memory_cell_clearing.html" class="mw-redirect" title="SSD memory cell clearing">SSD memory cell clearing</a></li>
<li><a href="../en/Profile-sync-daemon.html" title="Profile-sync-daemon">profile-sync-daemon</a></li>
</ul>
</div>
<p>Твердотельные накопители (SSD) не достаточно просто подключить чтобы они заработали должным образом. Необходимо учитывать некоторые специфичные вещи для достижения оптимальной производительности, такие как выравнивание разделов, выбор файловой системы, поддержка TRIM и т.д. Статья пытается охватить общую информацию и ключевые понятия, чтобы позволить пользователям получить максимальную отдачу от твердотельных дисков под Linux. Рекомендуется прочесть статью полностью перед тем, как следовать рекомендациям.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Хотя статья и предназначена для пользователей Linux, большая часть информации может относиться также и к другим операционным системам, таким как BSD, Mac OS X или Windows.</div>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#%D0%9E%D0%B1%D0%B7%D0%BE%D1%80"><span class="tocnumber">1</span> <span class="toctext">Обзор</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#%D0%9F%D1%80%D0%B5%D0%B8%D0%BC%D1%83%D1%89%D0%B5%D1%81%D1%82%D0%B2%D0%B0_%D0%BF%D0%B5%D1%80%D0%B5%D0%B4_HDD"><span class="tocnumber">1.1</span> <span class="toctext">Преимущества перед HDD</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#%D0%9D%D0%B5%D0%B4%D0%BE%D1%81%D1%82%D0%B0%D1%82%D0%BA%D0%B8"><span class="tocnumber">1.2</span> <span class="toctext">Недостатки</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#%D0%9D%D0%B0_%D1%87%D1%82%D0%BE_%D0%BE%D0%B1%D1%80%D0%B0%D1%89%D0%B0%D1%82%D1%8C_%D0%B2%D0%BD%D0%B8%D0%BC%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BF%D0%B5%D1%80%D0%B5%D0%B4_%D0%BF%D0%BE%D0%BA%D1%83%D0%BF%D0%BA%D0%BE%D0%B9"><span class="tocnumber">1.3</span> <span class="toctext">На что обращать внимание перед покупкой</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5">
<a href="#%D0%A1%D0%BE%D0%B2%D0%B5%D1%82%D1%8B_%D0%BF%D0%BE_%D1%83%D0%B2%D0%B5%D0%BB%D0%B8%D1%87%D0%B5%D0%BD%D0%B8%D1%8E_%D0%BF%D1%80%D0%BE%D0%B8%D0%B7%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D0%B8_SSD"><span class="tocnumber">2</span> <span class="toctext">Советы по увеличению производительности SSD</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#%D0%92%D1%8B%D1%80%D0%B0%D0%B2%D0%BD%D0%B8%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%80%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB%D0%BE%D0%B2"><span class="tocnumber">2.1</span> <span class="toctext">Выравнивание разделов</span></a></li>
<li class="toclevel-2 tocsection-7">
<a href="#TRIM"><span class="tocnumber">2.2</span> <span class="toctext">TRIM</span></a>
<ul>
<li class="toclevel-3 tocsection-8"><a href="#%D0%9F%D1%80%D0%BE%D0%B2%D0%B5%D1%80%D1%8C%D1%82%D0%B5,_%D0%BF%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D0%B5%D1%82%D1%81%D1%8F_%D0%BB%D0%B8_TRIM"><span class="tocnumber">2.2.1</span> <span class="toctext">Проверьте, поддерживается ли TRIM</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="#%D0%92%D0%BA%D0%BB%D1%8E%D1%87%D0%B8%D1%82%D0%B5_TRIM_%D1%81_%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E_%D1%84%D0%BB%D0%B0%D0%B3%D0%BE%D0%B2_%D0%BC%D0%BE%D0%BD%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F"><span class="tocnumber">2.2.2</span> <span class="toctext">Включите TRIM с помощью флагов монтирования</span></a></li>
<li class="toclevel-3 tocsection-10"><a href="#%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_TRIM_%D0%BF%D0%BE_%D1%80%D0%B0%D0%BF%D0%B8%D1%81%D0%B0%D0%BD%D0%B8%D1%8E_cron"><span class="tocnumber">2.2.3</span> <span class="toctext">Применение TRIM по раписанию cron</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_TRIM_%D0%BF%D0%BE_systemd_%D1%82%D0%B0%D0%B9%D0%BC%D0%B5%D1%80%D1%83"><span class="tocnumber">2.2.4</span> <span class="toctext">Применение TRIM по systemd таймеру</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="#%D0%92%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_TRIM_%D1%81_%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E_tune2fs_(Discouraged)"><span class="tocnumber">2.2.5</span> <span class="toctext">Включение TRIM с помощью tune2fs (Discouraged)</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#%D0%92%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_TRIM_%D0%B4%D0%BB%D1%8F_LVM"><span class="tocnumber">2.2.6</span> <span class="toctext">Включение TRIM для LVM</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#%D0%92%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_TRIM_%D0%B4%D0%BB%D1%8F_dm-crypt"><span class="tocnumber">2.2.7</span> <span class="toctext">Включение TRIM для dm-crypt</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-15">
<a href="#%D0%9F%D0%BB%D0%B0%D0%BD%D0%B8%D1%80%D0%BE%D0%B2%D1%89%D0%B8%D0%BA_%D0%B2%D0%B2%D0%BE%D0%B4%D0%B0/%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4%D0%B0"><span class="tocnumber">2.3</span> <span class="toctext">Планировщик ввода/вывода</span></a>
<ul>
<li class="toclevel-3 tocsection-16"><a href="#%D0%9F%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80_%D1%8F%D0%B4%D1%80%D0%B0_(%D0%B4%D0%BB%D1%8F_%D0%B5%D0%B4%D0%B8%D0%BD%D1%81%D1%82%D0%B2%D0%B5%D0%BD%D0%BD%D0%BE%D0%B3%D0%BE_%D0%BD%D0%B0%D0%BA%D0%BE%D0%BF%D0%B8%D1%82%D0%B5%D0%BB%D1%8F)"><span class="tocnumber">2.3.1</span> <span class="toctext">Параметр ядра (для единственного накопителя)</span></a></li>
<li class="toclevel-3 tocsection-17"><a href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_udev_%D0%BA%D0%B0%D0%BA_%D0%B4%D0%BB%D1%8F_%D0%BE%D0%B4%D0%BD%D0%BE%D0%B3%D0%BE_%D0%BD%D0%B0%D0%BA%D0%BE%D0%BF%D0%B8%D1%82%D0%B5%D0%BB%D1%8F,_%D1%82%D0%B0%D0%BA_%D0%B8_%D0%B4%D0%BB%D1%8F_%D0%BD%D0%B5%D1%81%D0%BA%D0%BE%D0%BB%D1%8C%D0%BA%D0%B8%D1%85_%D1%80%D0%B0%D0%B7%D0%BD%D1%8B%D1%85"><span class="tocnumber">2.3.2</span> <span class="toctext">Использование udev как для одного накопителя, так и для нескольких разных</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-18"><a href="#%D0%A0%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB%D1%8B_%D0%BF%D0%BE%D0%B4%D0%BA%D0%B0%D1%87%D0%BA%D0%B8_%D0%BD%D0%B0_SSD"><span class="tocnumber">2.4</span> <span class="toctext">Разделы подкачки на SSD</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#Hdparm_shows_%22frozen%22_state"><span class="tocnumber">2.5</span> <span class="toctext">Hdparm shows "frozen" state</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#%D0%9E%D1%87%D0%B8%D1%81%D1%82%D0%BA%D0%B0_%D1%8F%D1%87%D0%B5%D0%B5%D0%BA_%D0%BF%D0%B0%D0%BC%D1%8F%D1%82%D0%B8_SSD"><span class="tocnumber">2.6</span> <span class="toctext">Очистка ячеек памяти SSD</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#Resolving_NCQ_Errors"><span class="tocnumber">2.7</span> <span class="toctext">Resolving NCQ Errors</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-22">
<a href="#%D0%A1%D0%BE%D0%B2%D0%B5%D1%82%D1%8B_%D0%B4%D0%BB%D1%8F_%D1%83%D0%BC%D0%B5%D0%BD%D1%8C%D1%88%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BE%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%B9_%D1%87%D1%82%D0%B5%D0%BD%D0%B8%D1%8F/%D0%B7%D0%B0%D0%BF%D0%B8%D1%81%D0%B8"><span class="tocnumber">3</span> <span class="toctext">Советы для уменьшения операций чтения/записи</span></a>
<ul>
<li class="toclevel-2 tocsection-23"><a href="#%D0%9F%D1%80%D0%BE%D0%B4%D1%83%D0%BC%D0%B0%D0%BD%D0%BD%D0%B0%D1%8F_%D1%81%D1%85%D0%B5%D0%BC%D0%B0_%D1%80%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB%D0%BE%D0%B2"><span class="tocnumber">3.1</span> <span class="toctext">Продуманная схема разделов</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#%D0%9E%D0%BF%D1%86%D0%B8%D1%8F_%D0%BC%D0%BE%D0%BD%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F_noatime"><span class="tocnumber">3.2</span> <span class="toctext">Опция монтирования noatime</span></a></li>
<li class="toclevel-2 tocsection-25">
<a href="#%D0%A0%D0%B0%D1%81%D0%BF%D0%BE%D0%BB%D0%BE%D0%B6%D0%B8%D1%82%D0%B5_%D1%87%D0%B0%D1%81%D1%82%D0%BE_%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D0%B5%D0%BC%D1%8B%D0%B5_%D1%84%D0%B0%D0%B9%D0%BB%D1%8B_%D0%B2_%D0%BE%D0%BF%D0%B5%D1%80%D0%B0%D1%82%D0%B8%D0%B2%D0%BD%D0%BE%D0%B9_%D0%BF%D0%B0%D0%BC%D1%8F%D1%82%D0%B8"><span class="tocnumber">3.3</span> <span class="toctext">Расположите часто используемые файлы в оперативной памяти</span></a>
<ul>
<li class="toclevel-3 tocsection-26"><a href="#%D0%9F%D1%80%D0%BE%D1%84%D0%B8%D0%BB%D0%B8_%D0%B1%D1%80%D0%B0%D1%83%D0%B7%D0%B5%D1%80%D0%BE%D0%B2"><span class="tocnumber">3.3.1</span> <span class="toctext">Профили браузеров</span></a></li>
<li class="toclevel-3 tocsection-27"><a href="#%D0%94%D1%80%D1%83%D0%B3%D0%B8%D0%B5_%D1%84%D0%B0%D0%B9%D0%BB%D1%8B"><span class="tocnumber">3.3.2</span> <span class="toctext">Другие файлы</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-28"><a href="#%D0%9A%D0%BE%D0%BC%D0%BF%D0%B8%D0%BB%D1%8F%D1%86%D0%B8%D1%8F_%D0%B2_tmpfs"><span class="tocnumber">3.4</span> <span class="toctext">Компиляция в tmpfs</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="#%D0%9E%D1%82%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B6%D1%83%D1%80%D0%BD%D0%B0%D0%BB%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F_%D0%A4%D0%A1"><span class="tocnumber">3.5</span> <span class="toctext">Отключение журналирования ФС</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-30">
<a href="#%D0%92%D1%8B%D0%B1%D0%BE%D1%80_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2%D0%BE%D0%B9_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B"><span class="tocnumber">4</span> <span class="toctext">Выбор файловой системы</span></a>
<ul>
<li class="toclevel-2 tocsection-31"><a href="#Btrfs"><span class="tocnumber">4.1</span> <span class="toctext">Btrfs</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#Ext4"><span class="tocnumber">4.2</span> <span class="toctext">Ext4</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#XFS"><span class="tocnumber">4.3</span> <span class="toctext">XFS</span></a></li>
<li class="toclevel-2 tocsection-34"><a href="#JFS"><span class="tocnumber">4.4</span> <span class="toctext">JFS</span></a></li>
<li class="toclevel-2 tocsection-35"><a href="#%D0%94%D1%80%D1%83%D0%B3%D0%B8%D0%B5_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2%D1%8B%D0%B5_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B"><span class="tocnumber">4.5</span> <span class="toctext">Другие файловые системы</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-36">
<a href="#%D0%9E%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%BE%D1%88%D0%B8%D0%B2%D0%BE%D0%BA"><span class="tocnumber">5</span> <span class="toctext">Обновление прошивок</span></a>
<ul>
<li class="toclevel-2 tocsection-37"><a href="#OCZ"><span class="tocnumber">5.1</span> <span class="toctext">OCZ</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-38"><a href="#%D0%A1%D0%BC._%D1%82%D0%B0%D0%BA%D0%B6%D0%B5"><span class="tocnumber">6</span> <span class="toctext">См. также</span></a></li>
</ul>
</div>

<h2>
<span id=".D0.9E.D0.B1.D0.B7.D0.BE.D1.80"></span><span class="mw-headline" id="Обзор">Обзор</span>
</h2>
<h3>
<span id=".D0.9F.D1.80.D0.B5.D0.B8.D0.BC.D1.83.D1.89.D0.B5.D1.81.D1.82.D0.B2.D0.B0_.D0.BF.D0.B5.D1.80.D0.B5.D0.B4_HDD"></span><span class="mw-headline" id="Преимущества_перед_HDD">Преимущества перед HDD</span>
</h3>
<ul>
<li>Высокая скорость чтения. В 2-3 раза быстрее современных HDD (7200 об/мин на интерфейсе SATA2).</li>
<li>Устойчивая скорость чтения. Скорость чтения не уменьшается на протяжении всего объёма диска, тогда как производительность HDD падает при перемещении головок от края пластин к центру.</li>
<li>Минимальное время доступа. Приблизительно в 100 раз быстрее HDD. Например, 0,1 мс для SSD против 12-20 мс для HDD.</li>
<li>Высокая степень надежности.</li>
<li>Отсутствие движущихся частей.</li>
<li>Минимальный нагрев.</li>
<li>Минимальное потребление энергии. 1-2 Вт для SSD против 10-30 Вт для HDD (в зависимости от об/мин).</li>
<li>Легкие. Идеальное решение для ноутбуков.</li>
</ul>
<h3>
<span id=".D0.9D.D0.B5.D0.B4.D0.BE.D1.81.D1.82.D0.B0.D1.82.D0.BA.D0.B8"></span><span class="mw-headline" id="Недостатки">Недостатки</span>
</h3>
<ul>
<li>Цена за единицу объёма (сотни рублей за ГБ на SSD, тогда как стоимость ГБ на HDD измеряется копейками).</li>
<li>Ёмкость представленных моделей SSD намного ниже оной для HDD.</li>
<li>Большие ячейки памяти требуют различных оптимизаций файловых систем. Низкий уровень доступа скрыт за контроллером, в то время как современные ОС могли бы использовать низкий уровень для собственных оптимизаций.</li>
<li>Разделы и файловые системы требуют специальных оптимизаций. Размер страницы и размер стираемой страницы автоматически не определяется.</li>
<li>Ячейки изнашиваются. MLC-ячейки, произведённые по 50нм техпроцессу, могут выдерживать до 10 тысяч циклов записи; 35нм обычно выдерживают всего 5000 циклов, а 25нм — 3000 (чем меньше техпроцесс, тем больше плотность и ниже цена). Если участки записи распределены соответствующим образом, не слишком малы и верно выровнены, это увеличивает срок жизни ячеек пропорционально общему объёму. Ежедневные объёмы записи должны быть сбалансированными в течение всего срока службы. Однако, тесты <a rel="nofollow" class="external autonumber" href="http://techreport.com/review/25889/the-ssd-endurance-experiment-500tb-update">[1]</a><a rel="nofollow" class="external autonumber" href="http://techreport.com/review/26523/the-ssd-endurance-experiment-casualties-on-the-way-to-a-petabyte">[2]</a><a rel="nofollow" class="external autonumber" href="http://techreport.com/review/27436/the-ssd-endurance-experiment-two-freaking-petabytes">[3]</a> проведённые на современных SSD показали, что износ накопителя является незначительным, а срок службы SSD сравним с оным для HDD, даже при больших объёмах записи.</li>
<li>Сложные прошивки и контроллеры. В них часто встречаются баги. Современные потребляют мощность, сравнимую с HDD. Они <a rel="nofollow" class="external text" href="https://lwn.net/Articles/353411/">реализуют</a> подобие журнально-структурированной файловой системы со сборкой мусора, переводят команды SATA, изначально предназначенные для HDD; некоторые реализуют сжатие на лету. Также контроллер распределяет циклы записи по всей области диска для предотвращения быстрого износа ячеек, объединяет несколько команд записи мелких данных в одну, опять же, для увеличения продолжительности жизни диска. Наконец, они перемещают ячейки с данными по диску, чтобы те со временем не потеряли содержимое.</li>
<li>Может падать производительность в зависимости от заполненности диска. Не все производители реализовывают сборку мусора достаточно хорошо, поэтому фрагментированное свободное пространство не всегда объединяется в целые ячейки.</li>
</ul>
<h3>
<span id=".D0.9D.D0.B0_.D1.87.D1.82.D0.BE_.D0.BE.D0.B1.D1.80.D0.B0.D1.89.D0.B0.D1.82.D1.8C_.D0.B2.D0.BD.D0.B8.D0.BC.D0.B0.D0.BD.D0.B8.D0.B5_.D0.BF.D0.B5.D1.80.D0.B5.D0.B4_.D0.BF.D0.BE.D0.BA.D1.83.D0.BF.D0.BA.D0.BE.D0.B9"></span><span class="mw-headline" id="На_что_обращать_внимание_перед_покупкой">На что обращать внимание перед покупкой</span>
</h3>
<p>Есть несколько ключевых особенностей, на которые стоит обратить внимание до покупки SSD.
</p>
<ul>
<li>Родная поддержка <a href="https://en.wikipedia.org/wiki/ru:TRIM" class="extiw" title="wikipedia:ru:TRIM">TRIM</a>. Это жизненно необходимая функция для продления срока службы SSD и предотвращения уменьшения производительности операций записи от времени.</li>
<li>Ключевым моментом является покупка SSD верного объема. Для эффективной работы разделы во всех файловых системах должны быть заполнены не более, чем на 75%.</li>
</ul>
<h2>
<span id=".D0.A1.D0.BE.D0.B2.D0.B5.D1.82.D1.8B_.D0.BF.D0.BE_.D1.83.D0.B2.D0.B5.D0.BB.D0.B8.D1.87.D0.B5.D0.BD.D0.B8.D1.8E_.D0.BF.D1.80.D0.BE.D0.B8.D0.B7.D0.B2.D0.BE.D0.B4.D0.B8.D1.82.D0.B5.D0.BB.D1.8C.D0.BD.D0.BE.D1.81.D1.82.D0.B8_SSD"></span><span class="mw-headline" id="Советы_по_увеличению_производительности_SSD">Советы по увеличению производительности SSD</span>
</h2>
<h3>
<span id=".D0.92.D1.8B.D1.80.D0.B0.D0.B2.D0.BD.D0.B8.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D1.80.D0.B0.D0.B7.D0.B4.D0.B5.D0.BB.D0.BE.D0.B2"></span><span class="mw-headline" id="Выравнивание_разделов">Выравнивание разделов</span>
</h3>
<p>Смотрите <a href="../en/Partitioning.html#Partition_alignment" title="Partitioning">Partitioning#Partition alignment</a>.
</p>
<h3><span class="mw-headline" id="TRIM">TRIM</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> TRIM дословно переводится как "подрезка", "подравнивать". - прим. пер.</div>
<p>Большинство SSD накопителей поддерживают <a href="https://en.wikipedia.org/wiki/ru:TRIM" class="extiw" title="wikipedia:ru:TRIM">команду ATA_TRIM</a>, с помощью которой осуществляется одинаковая производительность и распределение износа. За подробностями, описывающими производительность до и после использования TRIM обратитесь к <a rel="nofollow" class="external text" href="https://sites.google.com/site/lightrush/random-1/howtoconfigureext4toenabletrimforssdsonubuntu">этому</a> учебнику.  
</p>
<p>Начиная с ядра linux версии 3.7, следующие файловые системы поддерживают TRIM: <a href="../en/Ext4.html" class="mw-redirect" title="Ext4 (Русский)">Ext4</a>, <a href="../en/Btrfs.html" title="Btrfs">Btrfs</a>, <a href="../en/JFS.html" title="JFS">JFS</a>, VFAT, <a href="../en/XFS.html" title="XFS">XFS</a>.
</p>
<p>VFAT поддерживает TRIM только с помощью флага монтирования 'discard', а не с помощью fstrim.
</p>
<p>Раздел <a href="#%D0%92%D1%8B%D0%B1%D0%BE%D1%80_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2%D0%BE%D0%B9_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B">#Выбор файловой системы</a> в этой статье содержит более подробную информацию.
</p>
<h4>
<span id=".D0.9F.D1.80.D0.BE.D0.B2.D0.B5.D1.80.D1.8C.D1.82.D0.B5.2C_.D0.BF.D0.BE.D0.B4.D0.B4.D0.B5.D1.80.D0.B6.D0.B8.D0.B2.D0.B0.D0.B5.D1.82.D1.81.D1.8F_.D0.BB.D0.B8_TRIM"></span><span class="mw-headline" id="Проверьте,_поддерживается_ли_TRIM">Проверьте, поддерживается ли TRIM</span>
</h4>
<pre># hdparm -I /dev/sda | grep TRIM
        *    Data Set Management TRIM supported (limit 1 block)
</pre>
<p>Чтобы понять, в чём отличие между "limit 1 block" и "limit 8 blocks", обратитесь к статье <a href="https://en.wikipedia.org/wiki/TRIM#ATA" class="extiw" title="wikipedia:TRIM">wikipedia:TRIM#ATA</a>
</p>
<h4>
<span id=".D0.92.D0.BA.D0.BB.D1.8E.D1.87.D0.B8.D1.82.D0.B5_TRIM_.D1.81_.D0.BF.D0.BE.D0.BC.D0.BE.D1.89.D1.8C.D1.8E_.D1.84.D0.BB.D0.B0.D0.B3.D0.BE.D0.B2_.D0.BC.D0.BE.D0.BD.D1.82.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D1.8F"></span><span class="mw-headline" id="Включите_TRIM_с_помощью_флагов_монтирования">Включите TRIM с помощью флагов монтирования</span>
</h4>
<p>Используйте следующий флаг монтирования в вашем <code>/etc/fstab</code>, чтобы получить преимущества команды TRIM, описанные выше:
</p>
<pre>/dev/sda1  /       ext4   defaults,noatime,<b>discard</b>   0  1
/dev/sda2  /home   ext4   defaults,noatime,<b>discard</b>   0  2
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> 
<ul>
<li>TRIM не включается по умолчанию при использовании шифрования блочных устройств на SSD; для дополнительной информации смотрите <a href="../en/Dm-crypt/Specialties.html#Discard.2FTRIM_support_for_solid_state_drives_.28SSD.29" title="Dm-crypt/Specialties">Dm-crypt/TRIM support for SSD</a>.</li>
<li>Нет необходимости использовать флаг <code>discard</code>, если вы периодически запускаете <code>fstrim</code>.</li>
<li>Использование флага <code>discard</code> для корневого раздела с файловой системой ext3 приведёт к тому, что он будет смонтирован в режиме только-чтение.</li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Вы должны убедиться, что ваш SSD поддерживает TRIM перед тем, как пытаться монтировать раздел с флагом <code>discard</code>. Иначе вы можете потерять данные!</div>
<h4>
<span id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5_TRIM_.D0.BF.D0.BE_.D1.80.D0.B0.D0.BF.D0.B8.D1.81.D0.B0.D0.BD.D0.B8.D1.8E_cron"></span><span class="mw-headline" id="Применение_TRIM_по_раписанию_cron">Применение TRIM по раписанию cron</span>
</h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Этот метод не работает для файловых систем VFAT.</div>
<p>Безусловно рекомендуется включать TRIM на поддерживаемых SSD накопителях. Однако, иногда на некоторых SSD это может приводить к <a rel="nofollow" class="external text" href="https://patrick-nagel.net/blog/archives/337">замедлению работы</a> при удалении файлов. Если это ваш случай, вы можете использовать fstrim как альтернативу.
</p>
<pre># fstrim -v /
</pre>
<p>Раздел, который вы хотите "подтримить" должен быть примонтирован и должен быть указан точкой монтирования.  
</p>
<p>Если вам больше подходит данный способ, хорошей идеей будет запуск этой команды время от времени с помощью планировщика cron. Чтобы запускать эту команду ежедневно, установите cron пакет (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=cronie">cronie</a></span>), реализация которого по умолчанию установлена на запуск ежечасных, ежедневных, еженедельных и ежемесячных заданий. Обратите внимание, что <a href="../en/Cron.html#Activation_and_autostart" title="Cron">cronie systemd сервис</a> не включен по умолчанию в новых установках Arch. Чтобы добавить эту команду в список ежедневных заданий cron, просто создайте скрипт script, содержащий эту команду и положите его в <code>/etc/cron.daily</code>, <code>/etc/cron.weekly</code>, и т.д.  Если выбран этот способ, то рекомендуется подобрать соответствующие значения nice и ionice. После того как проделаете всё это, уберите опцию <code>discard</code> из <code>/etc/fstab</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Сначала вы должны попробовать использовать способ с опцией монтирования <code>discard</code>. Данный же способ нужно выбирать только если первый вам не подошёл для нормальной реализации TRIM.</div>
<h4>
<span id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5_TRIM_.D0.BF.D0.BE_systemd_.D1.82.D0.B0.D0.B9.D0.BC.D0.B5.D1.80.D1.83"></span><span class="mw-headline" id="Применение_TRIM_по_systemd_таймеру">Применение TRIM по systemd таймеру</span>
</h4>
<p>Пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=util-linux">util-linux</a></span> предоставляет <a href="../ru/Systemd.html" title="Systemd (Русский)">systemd</a> юнит файлы <code>fstrim.service</code> и <code>fstrim.timer</code> . Если <a href="../ru/Systemd.html#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%BE%D0%B2" title="Systemd (Русский)">включить</a> таймер, то сервис будет активироваться еженедельно, подравнивая все примонтированные файловые системы на устройствах, поддерживающих операцию discard.
</p>
<h4>
<span id=".D0.92.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_TRIM_.D1.81_.D0.BF.D0.BE.D0.BC.D0.BE.D1.89.D1.8C.D1.8E_tune2fs_.28Discouraged.29"></span><span class="mw-headline" id="Включение_TRIM_с_помощью_tune2fs_(Discouraged)">Включение TRIM с помощью tune2fs (Discouraged)</span>
</h4>
<p>Вы можете статически установить флаг trim с помощью tune2fs:
</p>
<pre># tune2fs -o discard /dev/sd<b>XY</b>
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> При использовании данного способа, опция <code>discard</code> <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=137314">НЕ будет показана</a> командой <code>mount</code>.</div>
<h4>
<span id=".D0.92.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_TRIM_.D0.B4.D0.BB.D1.8F_LVM"></span><span class="mw-headline" id="Включение_TRIM_для_LVM">Включение TRIM для LVM</span>
</h4>
<p>Измените значение опции <code>issue_discards</code> с 0 на 1 в файле <code>/etc/lvm/lvm.conf</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Enabling this option will "issue discards to a logical volumes's underlying physical volume(s) when the logical volume is no longer using the physical volumes' space (e.g. lvremove, lvreduce, etc)" (смотрите <span class="plainlinks archwiki-template-man" title="$ man 5 lvm.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lvm.conf.5">lvm.conf(5)</a></span> и/или вписанные комментарии в <code>/etc/lvm/lvm.conf</code>). As such it does not seem to be required for "regular" TRIM requests (file deletions inside a filesystem) to be functional.</div>
<h4>
<span id=".D0.92.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_TRIM_.D0.B4.D0.BB.D1.8F_dm-crypt"></span><span class="mw-headline" id="Включение_TRIM_для_dm-crypt">Включение TRIM для dm-crypt</span>
</h4>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> The discard option allows discard requests to be passed through the encrypted block device. This improves performance on SSD storage but has security implications. See <a href="../en/Dm-crypt/Specialties.html#Discard.2FTRIM_support_for_solid_state_drives_.28SSD.29" title="Dm-crypt/Specialties">Dm-crypt/TRIM support for SSD</a> for more information.</div>
<p>For non-root filesystems, configure <code>/etc/crypttab</code> to include <code>discard</code> in the list of options for encrypted block devices located on a SSD (see <a href="../en/Dm-crypt/System_configuration.html#crypttab" title="Dm-crypt/System configuration">Dm-crypt/System configuration#crypttab</a>).
</p>
<p>For the root filesystem, follow the instructions from <a href="../en/Dm-crypt/Specialties.html#Discard.2FTRIM_support_for_solid_state_drives_.28SSD.29" title="Dm-crypt/Specialties">Dm-crypt/TRIM support for SSD</a> to add the right kernel parameter to the bootloader configuration.
</p>
<h3>
<span id=".D0.9F.D0.BB.D0.B0.D0.BD.D0.B8.D1.80.D0.BE.D0.B2.D1.89.D0.B8.D0.BA_.D0.B2.D0.B2.D0.BE.D0.B4.D0.B0.2F.D0.B2.D1.8B.D0.B2.D0.BE.D0.B4.D0.B0"></span><span class="mw-headline" id="Планировщик_ввода/вывода">Планировщик ввода/вывода</span>
</h3>
<p>Рассмотрим переход со стандартного <a href="https://en.wikipedia.org/wiki/CFQ" class="extiw" title="wikipedia:CFQ">CFQ</a> планировщика (Completely Fair Queuing) к планировщикам <a href="https://en.wikipedia.org/wiki/NOOP_scheduler" class="extiw" title="wikipedia:NOOP scheduler">NOOP</a> или <a href="https://en.wikipedia.org/wiki/Deadline_scheduler" class="extiw" title="wikipedia:Deadline scheduler">Deadline</a>. Последние два обеспечивают повышение производительности SSD. Планировщик NOOP, например, реализует простую очередь входящих запросов чтения/записи без их переупорядочивания или группировки тех, что физически расположены ближе на накопителе. На SSD, в отличие от HDD, время доступа одинаково для всех секторов, поэтому изменение порядка запросов не имеет смысла.
</p>
<p>Arch по умолчанию использует планировщик CFQ. Убедиться в этом можно, выведя содержимое файла <code>/sys/block/sdX/queue/scheduler</code>:
</p>
<pre>$ cat /sys/block/sdX/queue/scheduler
noop deadline [cfq]
</pre>
<p>Планировщик, используемый в данный момент, в списке доступных планировщиков выделен квадратными скобками. 
</p>
<p>Вы можете поменять планировщик прямо на лету, без необходимости перезагрузки:
</p>
<pre># echo noop &gt; /sys/block/sd<b>X</b>/queue/scheduler
</pre>
<p>или:
</p>
<pre>$ sudo tee /sys/block/sd<b>X</b>/queue/scheduler &lt;&lt;&lt; noop
</pre>
<p>Это непостоянный способ (то есть ваше изменение отменится после перезагрузки). Чтобы убедиться в том, что изменения вступили в силу, снова посмотрите содержимое файла и убедитесь, что теперь "noop" в квадратных скобках.
</p>
<h5>
<span id=".D0.9F.D0.B0.D1.80.D0.B0.D0.BC.D0.B5.D1.82.D1.80_.D1.8F.D0.B4.D1.80.D0.B0_.28.D0.B4.D0.BB.D1.8F_.D0.B5.D0.B4.D0.B8.D0.BD.D1.81.D1.82.D0.B2.D0.B5.D0.BD.D0.BD.D0.BE.D0.B3.D0.BE_.D0.BD.D0.B0.D0.BA.D0.BE.D0.BF.D0.B8.D1.82.D0.B5.D0.BB.D1.8F.29"></span><span class="mw-headline" id="Параметр_ядра_(для_единственного_накопителя)">Параметр ядра (для единственного накопителя)</span>
</h5>
<p>Если в системе единственным устройством накопления является SSD, то рекомендуется настроить планировщик ввода/вывода для всей системы с помощью <a href="../en/Kernel_parameters.html" class="mw-redirect" title="Параметры ядра">параметра ядра</a> <code>elevator=noop</code>.
</p>
<h5>
<span id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_udev_.D0.BA.D0.B0.D0.BA_.D0.B4.D0.BB.D1.8F_.D0.BE.D0.B4.D0.BD.D0.BE.D0.B3.D0.BE_.D0.BD.D0.B0.D0.BA.D0.BE.D0.BF.D0.B8.D1.82.D0.B5.D0.BB.D1.8F.2C_.D1.82.D0.B0.D0.BA_.D0.B8_.D0.B4.D0.BB.D1.8F_.D0.BD.D0.B5.D1.81.D0.BA.D0.BE.D0.BB.D1.8C.D0.BA.D0.B8.D1.85_.D1.80.D0.B0.D0.B7.D0.BD.D1.8B.D1.85"></span><span class="mw-headline" id="Использование_udev_как_для_одного_накопителя,_так_и_для_нескольких_разных">Использование udev как для одного накопителя, так и для нескольких разных</span>
</h5>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a><b>This article or section is out of date.</b><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> <span style="color:red;">please use the first argument of the template to provide a brief explanation.</span> (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Solid_state_drive_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)">Talk:Solid state drive (Русский)#</a>)</div>
</div>
<p>Хотя вышеописанные методы будут работать без проблем, ниже представлено также довольно надёжное решение. Следует отметить, что с переходом на <a href="../ru/Systemd.html" title="Systemd (Русский)">systemd</a>, файл rc.local больше не существует. Следовательно, было бы предпочтительнее использовать систему, которая отвечает за устройства, в первую очередь для реализации планировщика. В нашем случае это udev, и чтобы осуществить задуманное, всё что нам нужно — простое <a href="../en/Udev.html" title="Udev">udev</a>-правило.
</p>
<p>Создайте файл в директории /etc/udev/rules.d с именем, например, '60-schedulers.rules'. Запишите в него следующие строки:
</p>
<pre># установка планировщика deadline для SSD
ACTION=="add|change", KERNEL=="sd[a-z]", ATTR{queue/rotational}=="0", ATTR{queue/scheduler}="deadline"

# установка планировщика cfq для HDD
ACTION=="add|change", KERNEL=="sd[a-z]", ATTR{queue/rotational}=="1", ATTR{queue/scheduler}="cfq"
</pre>
<p>Конечно же вы можете заменить deadline/cfq любыми другими планировщиками. Изменения вступают в силу после перезагрузки. Чтобы проверить сработало ли правило, выполните команду
</p>
<pre>$ cat /sys/block/sdX/queue/scheduler   #где X — буква физического накопителя
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Имейте в виду, CFQ является планировщиком по умолчанию, так что второе правило на самом деле не нужно, если вы пользуетесь стандартным ядром. Также в примере имя правила начинается с числа 60, т. к. это число udev использует для своих строгих правил именования. Блочные устройства в этом диапазоне чисел могут модифицироваться, и это безопасная позиция для данного правила. Однако, правило может называться как угодно, при этом оканчиваться на '.rules'.                                       (Источник: falconindy и w0ng на своём блоге)</div>
<h3>
<span id=".D0.A0.D0.B0.D0.B7.D0.B4.D0.B5.D0.BB.D1.8B_.D0.BF.D0.BE.D0.B4.D0.BA.D0.B0.D1.87.D0.BA.D0.B8_.D0.BD.D0.B0_SSD"></span><span class="mw-headline" id="Разделы_подкачки_на_SSD">Разделы подкачки на SSD</span>
</h3>
<p>Можно размещать раздел подкачки на SSD. Но с другой стороны, современные компьютеры, имеющие более 2 ГБ оперативной памяти, используют раздел подкачки очень редко. Заметным исключением являются системы, которые используют спящий режим. Следующая оптимизация для SSD уменьшает "swappiness" системы, чтобы избежать записей подкачки:
</p>
<pre># echo 1 &gt; /proc/sys/vm/swappiness
</pre>
<p>Или можно просто изменить файл <code>/etc/sysctl.d/40-swappiness.conf</code> как рекомендуется в вики-статье <a href="../en/Improving_performance.html#Swappiness" title="Improving performance">Maximizing Performance</a><sup>[<a href="../en/Help:Procedures.html#Fix_broken_section_links" title="Help:Procedures">ссылка недействительна</a>: раздел не найден]</sup>:
</p>
<pre>vm.swappiness=1
vm.vfs_cache_pressure=50
</pre>
<h3>
<span id="Hdparm_shows_.22frozen.22_state"></span><span class="mw-headline" id='Hdparm_shows_"frozen"_state'>Hdparm shows "frozen" state</span>
</h3>
<p>Some motherboard BIOS' issue a "security freeze" command to attached storage devices on initialization. Likewise some SSD (and HDD) BIOS' are set to "security freeze" in the factory already. Both result in the device's password security settings to be set to <b>frozen</b>, as shown in below output: 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">:~# hdparm -I /dev/sda</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Security: 
 	Master password revision code = 65534
 		supported
 	not	enabled
 	<b>not	locked</b>
 		<b>frozen</b>
 	not	expired: security count
 		supported: enhanced erase
 	4min for SECURITY ERASE UNIT. 2min for ENHANCED SECURITY ERASE UNIT.</pre>
<p>Operations like formatting the device or installing operating systems are not affected by the "security freeze". 
</p>
<p>The above output shows the device is <b>not locked</b> by a HDD-password on boot and the <b>frozen</b> state safeguards the device against malwares which may try to lock it by setting a password to it at runtime. 
</p>
<p>If you intend to set a password to a "frozen" device yourself, a motherboard BIOS with support for it is required. A lot of notebooks have support, because it is required for <a href="https://en.wikipedia.org/wiki/Hardware-based_full_disk_encryption" class="extiw" title="wikipedia:Hardware-based full disk encryption">hardware encryption</a>, but support may not be trivial for a desktop/server board. For the Intel DH67CL/BL motherboard, for example, the motherboard has to be set to "maintenance mode" by a physical jumper to access the settings (see <a rel="nofollow" class="external autonumber" href="http://sstahlman.blogspot.in/2014/07/hardware-fde-with-intel-ssd-330-on.html?showComment=1411193181867#c4579383928221016762">[4]</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">устаревшая ссылка</a> 2020-08-04]</sup>, <a rel="nofollow" class="external autonumber" href="https://communities.intel.com/message/251978#251978">[5]</a>). 
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Do not try to change the above <b>lock</b> security settings with <code>hdparm</code> unless you know exactly what you are doing.</div>
<p>If you intend to erase the SSD, see <a href="../en/Securely_wipe_disk.html#hdparm" title="Securely wipe disk">Securely wipe disk#hdparm</a> and <a href="#SSD_Memory_Cell_Clearing">below</a><sup>[<a href="../en/Help:Procedures.html#Fix_broken_section_links" title="Help:Procedures">ссылка недействительна</a>: раздел не найден]</sup>.
</p>
<h3>
<span id=".D0.9E.D1.87.D0.B8.D1.81.D1.82.D0.BA.D0.B0_.D1.8F.D1.87.D0.B5.D0.B5.D0.BA_.D0.BF.D0.B0.D0.BC.D1.8F.D1.82.D0.B8_SSD"></span><span class="mw-headline" id="Очистка_ячеек_памяти_SSD">Очистка ячеек памяти SSD</span>
</h3>
<p>В некоторых случаях, пользователь может полностью сбросить ячейки SSD в состояние, подобное моменту покупки нового накопителя, таким образом добиться <a rel="nofollow" class="external text" href="http://www.anandtech.com/storage/showdoc.aspx?i=3531&amp;p=8">заводской производительности</a>. Скорость записи уменьшается со временем даже с поддержкой TRIM. TRIM работает только с удалением файлов, но не с перемещением и инкрементальными сохранениями.
</p>
<p>Сброс ячеек легко выполнить за 3 шага, описанных в вики-статье <a href="../en/Solid_state_drive/Memory_cell_clearing.html" class="mw-redirect" title="SSD memory cell clearing">SSD memory cell clearing</a>.
</p>
<h3><span class="mw-headline" id="Resolving_NCQ_Errors">Resolving NCQ Errors</span></h3>
<p>Some SSDs and SATA chipsets do not work properly with Linux Native Command Queueing (NCQ). The tell-tale dmesg errors look like this:
</p>
<pre>[ 9.115544] ata9: exception Emask 0x0 SAct 0xf SErr 0x0 action 0x10 frozen
[ 9.115550] ata9.00: failed command: READ FPDMA QUEUED
[ 9.115556] ata9.00: cmd 60/04:00:d4:82:85/00:00:1f:00:00/40 tag 0 ncq 2048 in
[ 9.115557] res 40/00:18:d3:82:85/00:00:1f:00:00/40 Emask 0x4 (timeout)
</pre>
<p>These may be resolved by one of the following methods:
</p>
<ol>
<li>Update the firmware on the SSD. See <a href="../en/Solid_state_drive.html#Firmware_updates" class="mw-redirect" title="SSD">SSD#Firmware updates</a><sup>[<a href="../en/Help:Procedures.html#Fix_broken_section_links" title="Help:Procedures">ссылка недействительна</a>: раздел не найден]</sup>.</li>
<li>Update the BIOS/UEFI on the motherboard. See <a href="../en/Flashing_BIOS_from_Linux.html" title="Flashing BIOS from Linux">Flashing BIOS from Linux</a>.</li>
<li>Disable NCQ on boot. Add <code>libata.force=noncq</code> to the kernel command line in the <a href="../en/Arch_boot_process.html#Boot_loader" class="mw-redirect" title="Bootloader">Bootloader</a> configuration.</li>
</ol>
<p>If these do not resolve the problem or cause other issues, <a href="../en/Bug_reporting_guidelines.html" class="mw-redirect" title="Reporting bug guidelines">file a bug report</a>.
</p>
<h2>
<span id=".D0.A1.D0.BE.D0.B2.D0.B5.D1.82.D1.8B_.D0.B4.D0.BB.D1.8F_.D1.83.D0.BC.D0.B5.D0.BD.D1.8C.D1.88.D0.B5.D0.BD.D0.B8.D1.8F_.D0.BE.D0.BF.D0.B5.D1.80.D0.B0.D1.86.D0.B8.D0.B9_.D1.87.D1.82.D0.B5.D0.BD.D0.B8.D1.8F.2F.D0.B7.D0.B0.D0.BF.D0.B8.D1.81.D0.B8"></span><span class="mw-headline" id="Советы_для_уменьшения_операций_чтения/записи">Советы для уменьшения операций чтения/записи</span>
</h2>
<p>Основной идеей долговечного использования SSD является перенос интенсивных операция ввода/вывода в оперативную память или HDD, в основном из-за большого размера блока очистки (512 КиБ в некоторых случаях).
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> 32ГБ SSD с посредственным 10-кратным показателем write amplification, стандартными 10000 циклами чтения/записи и <b>10ГБ записей в день</b> дают <b>8 лет жизни</b>. Также, дольше живут диски с наибольшими объемами и современными контроллерами, которые имеют меньший показатель write amplification.</div>
<p>Используйте команду <code>iotop -oPa</code> и отсортируйте по количеству записей, чтобы увидеть сколько пишется на диск.
</p>
<h3>
<span id=".D0.9F.D1.80.D0.BE.D0.B4.D1.83.D0.BC.D0.B0.D0.BD.D0.BD.D0.B0.D1.8F_.D1.81.D1.85.D0.B5.D0.BC.D0.B0_.D1.80.D0.B0.D0.B7.D0.B4.D0.B5.D0.BB.D0.BE.D0.B2"></span><span class="mw-headline" id="Продуманная_схема_разделов">Продуманная схема разделов</span>
</h3>
<p>Если в системе установлены одновременно оба типа дисков (HDD и SSD), то рекомендуется монтировать раздел <code>/var</code> на HDD, чтобы продлить жизнь SSD, избежав на нём множества операций чтения/записи.
</p>
<p>Если же SSD является единственным диском в системе, и нет возможности использовать его совместно с HDD, разумно так же выделить отдельный раздел для <code>/var</code>, чтобы в дальнейшем при возникновении ошибки было легче восстановить систему. Например, если программа использовала всё доступное пространство в <code>/</code>, какой-либо лог превысил все разумные размеры, и т. п.
</p>
<h3>
<span id=".D0.9E.D0.BF.D1.86.D0.B8.D1.8F_.D0.BC.D0.BE.D0.BD.D1.82.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D1.8F_noatime"></span><span class="mw-headline" id="Опция_монтирования_noatime">Опция монтирования noatime</span>
</h3>
<p>Монтируйте разделы SSD с опцией <code>noatime</code>. См. раздел <a href="#%D0%9E%D0%BF%D1%86%D0%B8%D1%8F_%D0%BC%D0%BE%D0%BD%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F_noatime">Параметры монтирования</a>.
</p>
<p>Существует несколько ключевых параметров монтирования, используемых в <code>/etc/fstab</code> для разделов на SSD.
</p>
<ul>
<li>
<b>noatime</b> - Во время чтения файлов не будет обновляться поле atime файловой системы, указывающее время последнего доступа к файлу. Важность данного параметра в том, что он убирает необходимость системы производить "ненужные" операции записи когда файл всего-навсего необходимо прочитать. Т. к. эти операции записи могут быть достаточно интенсивными при чтении большого количества файлов, отключение может дать неплохой прирост производительности и срока жизни. Заметьте, что информация о времени последней записи файла будет по-прежнему обновляться каждый раз, когда файл будет изменён.
<ul><li>Однако, эта опция может вызвать проблемы с некоторыми программами, такими как <a href="../en/Mutt.html" title="Mutt">Mutt</a>, т. к. время доступа к файлу станет меньше, чем время изменения, что вызовет проблемы в работе. Использование опции <b>relatime</b> вместо noatime позволит быть уверенным, что поле atime никогда не станет меньше, чем время изменения.</li></ul>
</li>
<li>
<b>discard</b> - Параметр discard включает команду TRIM для ядер версии 2.6.33 и выше. Не работает с файловой системой ext3; если всё же он включен на ext3, корневой раздел будет смонтирован только для чтения.</li>
</ul>
<pre>/dev/sda1 / ext4 defaults,relatime,discard 0 1
/dev/sda2 /home ext4 defaults,relatime,discard 0 1
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Пользователь должен убедиться ещё ДО попытки монтирования раздела с опцией <code>discard</code>, что он работает на ядре версии 2.6.33 или выше, а также, что его SDD поддерживает TRIM. Иначе можно потерять данные!</div>
<p><br>
</p>
<h3>
<span id=".D0.A0.D0.B0.D1.81.D0.BF.D0.BE.D0.BB.D0.BE.D0.B6.D0.B8.D1.82.D0.B5_.D1.87.D0.B0.D1.81.D1.82.D0.BE_.D0.B8.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D1.83.D0.B5.D0.BC.D1.8B.D0.B5_.D1.84.D0.B0.D0.B9.D0.BB.D1.8B_.D0.B2_.D0.BE.D0.BF.D0.B5.D1.80.D0.B0.D1.82.D0.B8.D0.B2.D0.BD.D0.BE.D0.B9_.D0.BF.D0.B0.D0.BC.D1.8F.D1.82.D0.B8"></span><span class="mw-headline" id="Расположите_часто_используемые_файлы_в_оперативной_памяти">Расположите часто используемые файлы в оперативной памяти</span>
</h3>
<h4>
<span id=".D0.9F.D1.80.D0.BE.D1.84.D0.B8.D0.BB.D0.B8_.D0.B1.D1.80.D0.B0.D1.83.D0.B7.D0.B5.D1.80.D0.BE.D0.B2"></span><span class="mw-headline" id="Профили_браузеров">Профили браузеров</span>
</h4>
<p>Довольно просто можно перенести профили браузеров, таких как chromium, firefox, opera, и т.д. в оперативную память через tmpfs и использовать rsync для синхронизации с копиями на диске. Таким образом можно так же заметно сократить количество операций чтения/записи.
</p>
<p>В AUR есть несколько пакетов для автоматизации этой операции, например <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=profile-sync-daemon">profile-sync-daemon</a></span>.
</p>
<h4>
<span id=".D0.94.D1.80.D1.83.D0.B3.D0.B8.D0.B5_.D1.84.D0.B0.D0.B9.D0.BB.D1.8B"></span><span class="mw-headline" id="Другие_файлы">Другие файлы</span>
</h4>
<p>По этой же вышеописанной причине можно расположить в оперативной памяти раздел <code>/srv/http</code> (если запущен web-сервер). Аналогом <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=profile-sync-daemon">profile-sync-daemon</a></span> здесь будет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=anything-sync-daemon">anything-sync-daemon</a></span>, который позволяет определить <b>любую</b> директорию для синхронизации с оперативной памятью.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Не пытайтесь добавлять /var/log в anything-sync-daemon. Systemd очень разозлится на это.</div>
<h3>
<span id=".D0.9A.D0.BE.D0.BC.D0.BF.D0.B8.D0.BB.D1.8F.D1.86.D0.B8.D1.8F_.D0.B2_tmpfs"></span><span class="mw-headline" id="Компиляция_в_tmpfs">Компиляция в tmpfs</span>
</h3>
<p>Перенос интенсивной компиляции в <code>/tmp</code> — отличная идея продления срока жизни диска. Если у вас имеется более 4ГБ оперативной памяти, строку tmp из <code>/etc/fstab</code> нужно изменить, чтобы раздел использовал больше половины доступной памяти, через параметр <code>size=</code>, т. к. <code>/tmp</code> при компиляции растёт очень быстро.
</p>
<p>Пример для машины с 8ГБ оперативки:
</p>
<pre>tmpfs /tmp tmpfs nodev,nosuid,size=7G 0 0
</pre>
<h3>
<span id=".D0.9E.D1.82.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B6.D1.83.D1.80.D0.BD.D0.B0.D0.BB.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D1.8F_.D0.A4.D0.A1"></span><span class="mw-headline" id="Отключение_журналирования_ФС">Отключение журналирования ФС</span>
</h3>
<p>Использование журналируемых ФС типа ext3 или ext4 с отключенным журналом тоже сократит количество записей на SSD. Очевидным недостатком этого будет являться потеря данных при неудачном размонтировании (резкое отключение питания, блокировка ядра и т. д.). Однако, <a rel="nofollow" class="external text" href="http://tytso.livejournal.com/61830.html">Ted Tso</a> выступает в защиту журналирования на современных SSD, т. к. по его тестам оно незначительно влияет на количество записей в большинстве случаев:
</p>
<p><b>Количество записанных данных (в мегабайтах) на ФС ext4 с параметром noatime.</b>
</p>
<table class="wikitable">
<tbody>
<tr>
<th>операция</th>
<th>с журналом</th>
<th>без журнала</th>
<th>разница
</th>
</tr>
<tr>
<th>git clone
</th>
<td>367.0
</td>
<td>353.0
</td>
<td>3.81 %
</td>
</tr>
<tr>
<th>make
</th>
<td>207.6
</td>
<td>199.4
</td>
<td>3.95 %
</td>
</tr>
<tr>
<th>make clean
</th>
<td>6.45
</td>
<td>3.73
</td>
<td>42.17 %
</td>
</tr>
</tbody>
</table>
<p><i>"Результаты показали, что записанный объём при работе с большим количеством мета-данных почти в 2 раза выше, чем реальный размер файлов. Это ожидаемо, т. к. все изменения в блоках мета-данных сначала пишутся в журнал, и транзакция журнала сбрасывается перед тем, как мета-данные будут записаны в конечное положение на диск. Однако же, для обычных задач, где данные пишутся сразу за мета-данными, разница в лишних операциях записи минимальна."</i>
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Пример make clean из таблицы выше показывает важность переноса компиляции в tmpfs как рекомендовано в предыдущем разделе!</div>
<h2>
<span id=".D0.92.D1.8B.D0.B1.D0.BE.D1.80_.D1.84.D0.B0.D0.B9.D0.BB.D0.BE.D0.B2.D0.BE.D0.B9_.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D1.8B"></span><span class="mw-headline" id="Выбор_файловой_системы">Выбор файловой системы</span>
</h2>
<p>Существуют различные варианты файловых систем на выбор, включая Ext2/3/4, Btrfs, и т. д.
</p>
<h3><span class="mw-headline" id="Btrfs">Btrfs</span></h3>
<p>Поддержка <a rel="nofollow" class="external text" href="https://ru.wikipedia.org/wiki/Btrfs">Btrfs</a> включена в ядро с версии 2.6.29. Некоторые считают, что она является не достаточно стабильной для повседневного использования, в то время как есть и явные сторонники этого потенциального преемника ext4. Рекомендуется прочитать статью <a href="../en/Btrfs.html" title="Btrfs">Btrfs</a> для дополнительного ознакомления.
</p>
<h3><span class="mw-headline" id="Ext4">Ext4</span></h3>
<p><a rel="nofollow" class="external text" href="https://ru.wikipedia.org/wiki/Ext4">Ext4</a> — ещё одна файловая система, поддерживающая SSD. Считается стабильной и пригодной для повседневного использования с версии ядра 2.6.28. В отличие от Btrfs, ext4 не умеет автоматически определять тип диска; пользователь сам должен явно включить поддержку команды TRIM, используя параметр монтирования <code>discard</code> в <a href="../en/Fstab.html" title="Fstab">fstab</a> (или командой <code>tune2fs -o discard /dev/sdaX</code>).
См. <a rel="nofollow" class="external text" href="http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=Documentation/filesystems/ext4.txt">официальную документацию ядра</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">устаревшая ссылка</a> 2020-08-04]</sup> для подробного ознакомления c ext4.
</p>
<h3><span class="mw-headline" id="XFS">XFS</span></h3>
<p>Many users do not realize that in addition to ext4 and btrfs, <a href="https://en.wikipedia.org/wiki/XFS" class="extiw" title="wikipedia:XFS">XFS</a> has TRIM support as well.  This can be enabled in the usual ways.  That is, the choice may be made of either using the discard option mentioned above, or by using the fstrim command.  More information can be found on the <a rel="nofollow" class="external text" href="http://xfs.org/index.php/FITRIM/discard">XFS wiki</a>.
</p>
<h3><span class="mw-headline" id="JFS">JFS</span></h3>
<p>As of Linux kernel version 3.7, proper TRIM support has been added.  So far, there is not a great wealth of information of the topic but it has certainly been picked up by <a rel="nofollow" class="external text" href="http://www.phoronix.com/scan.php?page=news_item&amp;px=MTE5ODY">Linux news sites.</a>  It is apparent that it can be enabled via the <code>discard</code> mount option, or by using the method of batch TRIMs with fstrim.
</p>
<h3>
<span id=".D0.94.D1.80.D1.83.D0.B3.D0.B8.D0.B5_.D1.84.D0.B0.D0.B9.D0.BB.D0.BE.D0.B2.D1.8B.D0.B5_.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D1.8B"></span><span class="mw-headline" id="Другие_файловые_системы">Другие файловые системы</span>
</h3>
<p>Существуют также другие файловые системы, специально <a href="https://en.wikipedia.org/wiki/ru:%D0%A1%D0%BF%D0%B8%D1%81%D0%BE%D0%BA_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2%D1%8B%D1%85_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC#.D0.A4.D0.B0.D0.B9.D0.BB.D0.BE.D0.B2.D1.8B.D0.B5_.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D1.8B_.D0.B4.D0.BB.D1.8F_.D1.84.D0.BB.D0.B5.D1.88-.D0.B4.D0.B8.D1.81.D0.BA.D0.BE.D0.B2_.2F_.D1.82.D0.B2.D0.B5.D1.80.D0.B4.D0.BE.D1.82.D0.B5.D0.BB.D1.8C.D0.BD.D1.8B.D1.85_.D0.BD.D0.BE.D1.81.D0.B8.D1.82.D0.B5.D0.BB.D0.B5.D0.B9" class="extiw" title="wikipedia:ru:Список файловых систем">предназначенные для SSD</a>, например <a href="../en/F2FS.html" title="F2FS">F2FS</a>.
</p>
<h2>
<span id=".D0.9E.D0.B1.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D1.80.D0.BE.D1.88.D0.B8.D0.B2.D0.BE.D0.BA"></span><span class="mw-headline" id="Обновление_прошивок">Обновление прошивок</span>
</h2>
<h3><span class="mw-headline" id="OCZ">OCZ</span></h3>
<p>Для дисков компании OCZ имеется утилита командной строки для Linux (i686 и x86_64) на официальном <a rel="nofollow" class="external text" href="http://www.ocztechnology.com/ssd_tools/">форуме</a> или в <a rel="nofollow" class="external text" href="https://aur.archlinux.org">AUR</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ocztoolbox/">ocztoolbox</a></span><sup><small>AUR</small></sup>
</p>
<h2>
<span id=".D0.A1.D0.BC._.D1.82.D0.B0.D0.BA.D0.B6.D0.B5"></span><span class="mw-headline" id="См._также">См. также</span>
</h2>
<ul><li><a rel="nofollow" class="external text" href="http://www.reddit.com/r/archlinux/comments/rkwjm/what_should_i_keep_in_mind_when_installing_on_ssd/">Discussion on Reddit about installing Arch on an SSD</a></li></ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../ru/Category:Storage.html" title="Category:Storage (Русский)">Storage (Русский)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li>
<li><a href="../en/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Solid_state_drive_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;oldid=645150">https://wiki.archlinux.org/index.php?title=Solid_state_drive_(Русский)&amp;oldid=645150</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 13 December 2020, at 14:24.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
