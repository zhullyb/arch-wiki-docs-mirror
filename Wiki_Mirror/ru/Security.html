<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Security (Русский) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Security_Русский rootpage-Security_Русский skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Security (Русский)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Ссылки по теме</p>
<ul>
<li><a href="/title/Arch_Security_Team" title="Arch Security Team">Arch Security Team</a></li>
<li><a href="/title/%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5_%D1%80%D0%B5%D0%BA%D0%BE%D0%BC%D0%B5%D0%BD%D0%B4%D0%B0%D1%86%D0%B8%D0%B8" class="mw-redirect" title="Основные рекомендации">Основные рекомендации</a></li>
<li><a href="/title/PAM" title="PAM">PAM</a></li>
<li><a href="/title/Capabilities" title="Capabilities">Capabilities</a></li>
<li><a href="/title/%D0%A1%D0%BF%D0%B8%D1%81%D0%BE%D0%BA_%D0%BF%D1%80%D0%B8%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D0%B9/%D0%91%D0%B5%D0%B7%D0%BE%D0%BF%D0%B0%D1%81%D0%BD%D0%BE%D1%81%D1%82%D1%8C" class="mw-redirect" title="Список приложений/Безопасность">Список приложений/Безопасность</a></li>
<li><a href="/title/Arch_package_guidelines/Security" title="Arch package guidelines/Security">Arch package guidelines/Security</a></li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Состояние перевода:</strong> На этой странице представлен перевод статьи <a href="/title/Security" title="Security">Security</a>. Дата последней синхронизации: 4 мая 2021. Вы можете <a href="/title/ArchWiki:Translation_Team_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)" title="ArchWiki:Translation Team (Русский)">помочь</a> синхронизировать перевод, если в английской версии произошли <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Security&amp;diff=0&amp;oldid=663423">изменения</a>.</div>
<p>В данной статье собраны рекомендации и лучшие практики по повышению <a href="https://en.wikipedia.org/wiki/ru:%D0%98%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D0%BE%D0%BD%D0%BD%D0%B0%D1%8F_%D0%B1%D0%B5%D0%B7%D0%BE%D0%BF%D0%B0%D1%81%D0%BD%D0%BE%D1%81%D1%82%D1%8C" class="extiw" title="wikipedia:ru:Информационная безопасность">защищённости</a> операционной системы Arch Linux.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#%D0%9F%D1%80%D0%B8%D0%BD%D1%86%D0%B8%D0%BF%D1%8B"><span class="tocnumber">1</span> <span class="toctext">Принципы</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#%D0%9F%D0%B0%D1%80%D0%BE%D0%BB%D0%B8"><span class="tocnumber">2</span> <span class="toctext">Пароли</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#%D0%9D%D0%B0%D0%B4%D1%91%D0%B6%D0%BD%D0%BE%D1%81%D1%82%D1%8C_%D0%BF%D0%B0%D1%80%D0%BE%D0%BB%D1%8F"><span class="tocnumber">2.1</span> <span class="toctext">Надёжность пароля</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#%D0%A5%D1%80%D0%B0%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D0%B0%D1%80%D0%BE%D0%BB%D0%B5%D0%B9"><span class="tocnumber">2.2</span> <span class="toctext">Хранение паролей</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#%D0%A5%D1%8D%D1%88-%D1%81%D1%83%D0%BC%D0%BC%D1%8B_%D0%BF%D0%B0%D1%80%D0%BE%D0%BB%D0%B5%D0%B9"><span class="tocnumber">2.3</span> <span class="toctext">Хэш-суммы паролей</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#%D0%A2%D1%80%D0%B5%D0%B1%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F_%D0%BA_%D0%BF%D0%B0%D1%80%D0%BE%D0%BB%D1%8E_%D1%81_pam_pwquality"><span class="tocnumber">2.4</span> <span class="toctext">Требования к паролю с pam_pwquality</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7">
<a href="#%D0%9F%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81%D0%BE%D1%80"><span class="tocnumber">3</span> <span class="toctext">Процессор</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#%D0%9C%D0%B8%D0%BA%D1%80%D0%BE%D0%BA%D0%BE%D0%B4"><span class="tocnumber">3.1</span> <span class="toctext">Микрокод</span></a></li>
<li class="toclevel-2 tocsection-9">
<a href="#%D0%90%D0%BF%D0%BF%D0%B0%D1%80%D0%B0%D1%82%D0%BD%D1%8B%D0%B5_%D1%83%D1%8F%D0%B7%D0%B2%D0%B8%D0%BC%D0%BE%D1%81%D1%82%D0%B8"><span class="tocnumber">3.2</span> <span class="toctext">Аппаратные уязвимости</span></a>
<ul>
<li class="toclevel-3 tocsection-10"><a href="#%D0%9C%D0%BD%D0%BE%D0%B3%D0%BE%D0%BF%D0%BE%D1%82%D0%BE%D1%87%D0%BD%D0%BE%D1%81%D1%82%D1%8C"><span class="tocnumber">3.2.1</span> <span class="toctext">Многопоточность</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-11">
<a href="#%D0%9F%D0%B0%D0%BC%D1%8F%D1%82%D1%8C"><span class="tocnumber">4</span> <span class="toctext">Память</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#%D0%91%D0%B5%D0%B7%D0%BE%D0%BF%D0%B0%D1%81%D0%BD%D1%8B%D0%B9_malloc"><span class="tocnumber">4.1</span> <span class="toctext">Безопасный malloc</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-13">
<a href="#%D0%94%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5"><span class="tocnumber">5</span> <span class="toctext">Данные</span></a>
<ul>
<li class="toclevel-2 tocsection-14"><a href="#%D0%A8%D0%B8%D1%84%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BD%D0%B5%D0%B0%D0%BA%D1%82%D0%B8%D0%B2%D0%BD%D1%8B%D1%85_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85"><span class="tocnumber">5.1</span> <span class="toctext">Шифрование неактивных данных</span></a></li>
<li class="toclevel-2 tocsection-15">
<a href="#%D0%A4%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2%D1%8B%D0%B5_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B"><span class="tocnumber">5.2</span> <span class="toctext">Файловые системы</span></a>
<ul>
<li class="toclevel-3 tocsection-16"><a href="#%D0%9F%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B_%D0%BC%D0%BE%D0%BD%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F"><span class="tocnumber">5.2.1</span> <span class="toctext">Параметры монтирования</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-17"><a href="#%D0%9F%D1%80%D0%B0%D0%B2%D0%B0_%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%B0_%D0%BA_%D1%84%D0%B0%D0%B9%D0%BB%D0%B0%D0%BC"><span class="tocnumber">5.3</span> <span class="toctext">Права доступа к файлам</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#%D0%A0%D0%B5%D0%B7%D0%B5%D1%80%D0%B2%D0%BD%D0%BE%D0%B5_%D0%BA%D0%BE%D0%BF%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5"><span class="tocnumber">5.4</span> <span class="toctext">Резервное копирование</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-19">
<a href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F"><span class="tocnumber">6</span> <span class="toctext">Настройки пользователя</span></a>
<ul>
<li class="toclevel-2 tocsection-20"><a href="#%D0%9D%D0%B5_%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D0%B9%D1%82%D0%B5_root-%D0%B0%D0%BA%D0%BA%D0%B0%D1%83%D0%BD%D1%82_%D0%B4%D0%BB%D1%8F_%D0%BF%D0%BE%D0%B2%D1%81%D0%B5%D0%B4%D0%BD%D0%B5%D0%B2%D0%BD%D1%8B%D1%85_%D0%BD%D1%83%D0%B6%D0%B4"><span class="tocnumber">6.1</span> <span class="toctext">Не используйте root-аккаунт для повседневных нужд</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#%D0%9F%D0%B0%D1%83%D0%B7%D0%B0_%D0%BF%D0%BE%D1%81%D0%BB%D0%B5_%D0%BD%D0%B5%D1%83%D0%B4%D0%B0%D1%87%D0%BD%D0%BE%D0%B9_%D0%BF%D0%BE%D0%BF%D1%8B%D1%82%D0%BA%D0%B8_%D0%B2%D1%85%D0%BE%D0%B4%D0%B0"><span class="tocnumber">6.2</span> <span class="toctext">Пауза после неудачной попытки входа</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#%D0%91%D0%BB%D0%BE%D0%BA%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B0_%D0%B8%D0%B7-%D0%B7%D0%B0_%D0%BD%D0%B5%D1%83%D0%B4%D0%B0%D1%87%D0%BD%D1%8B%D1%85_%D0%BF%D0%BE%D0%BF%D1%8B%D1%82%D0%BE%D0%BA_%D0%B2%D1%85%D0%BE%D0%B4%D0%B0"><span class="tocnumber">6.3</span> <span class="toctext">Блокировка из-за неудачных попыток входа</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#%D0%9E%D0%B3%D1%80%D0%B0%D0%BD%D0%B8%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BD%D0%B0_%D0%BA%D0%BE%D0%BB%D0%B8%D1%87%D0%B5%D1%81%D1%82%D0%B2%D0%BE_%D0%BF%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81%D0%BE%D0%B2"><span class="tocnumber">6.4</span> <span class="toctext">Ограничение на количество процессов</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#%D0%97%D0%B0%D0%BF%D1%83%D1%81%D0%BA_Xorg_%D0%B1%D0%B5%D0%B7_root"><span class="tocnumber">6.5</span> <span class="toctext">Запуск Xorg без root</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-25">
<a href="#%D0%9E%D0%B3%D1%80%D0%B0%D0%BD%D0%B8%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_root"><span class="tocnumber">7</span> <span class="toctext">Ограничение root</span></a>
<ul>
<li class="toclevel-2 tocsection-26">
<a href="#sudo_%D0%B2%D0%BC%D0%B5%D1%81%D1%82%D0%BE_su"><span class="tocnumber">7.1</span> <span class="toctext">sudo вместо su</span></a>
<ul>
<li class="toclevel-3 tocsection-27"><a href="#%D0%A0%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2_%D1%81_sudo"><span class="tocnumber">7.1.1</span> <span class="toctext">Редактирование файлов с sudo</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-28">
<a href="#%D0%9E%D0%B3%D1%80%D0%B0%D0%BD%D0%B8%D1%87%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BD%D0%B0_%D0%B2%D1%85%D0%BE%D0%B4_%D0%B2_root"><span class="tocnumber">7.2</span> <span class="toctext">Ограничения на вход в root</span></a>
<ul>
<li class="toclevel-3 tocsection-29"><a href="#%D0%94%D0%BE%D1%81%D1%82%D1%83%D0%BF_%D1%82%D0%BE%D0%BB%D1%8C%D0%BA%D0%BE_%D0%B4%D0%BB%D1%8F_%D0%BA%D0%BE%D0%BD%D0%BA%D1%80%D0%B5%D1%82%D0%BD%D1%8B%D1%85_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D0%B5%D0%B9"><span class="tocnumber">7.2.1</span> <span class="toctext">Доступ только для конкретных пользователей</span></a></li>
<li class="toclevel-3 tocsection-30"><a href="#%D0%97%D0%B0%D0%BF%D1%80%D0%B5%D1%82_%D0%BD%D0%B0_%D0%B2%D1%85%D0%BE%D0%B4_%D0%BF%D0%BE_SSH"><span class="tocnumber">7.2.2</span> <span class="toctext">Запрет на вход по SSH</span></a></li>
<li class="toclevel-3 tocsection-31"><a href="#%D0%9F%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B_%D0%B2%D1%85%D0%BE%D0%B4%D0%B0_%D0%B2_access.conf"><span class="tocnumber">7.2.3</span> <span class="toctext">Параметры входа в access.conf</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-32">
<a href="#%D0%9C%D0%B0%D0%BD%D0%B4%D0%B0%D1%82%D0%BD%D0%BE%D0%B5_%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%BE%D0%BC"><span class="tocnumber">8</span> <span class="toctext">Мандатное управление доступом</span></a>
<ul>
<li class="toclevel-2 tocsection-33"><a href="#MAC_%D0%BD%D0%B0_%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D0%B5_%D0%BF%D1%83%D1%82%D0%B5%D0%B9_%D0%BA_%D1%84%D0%B0%D0%B9%D0%BB%D0%B0%D0%BC"><span class="tocnumber">8.1</span> <span class="toctext">MAC на основе путей к файлам</span></a></li>
<li class="toclevel-2 tocsection-34"><a href="#MAC_%D0%BD%D0%B0_%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D0%B5_%D0%BC%D0%B5%D1%82%D0%BE%D0%BA"><span class="tocnumber">8.2</span> <span class="toctext">MAC на основе меток</span></a></li>
<li class="toclevel-2 tocsection-35"><a href="#%D0%A1%D0%BF%D0%B8%D1%81%D0%BA%D0%B8_%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%BE%D0%BC"><span class="tocnumber">8.3</span> <span class="toctext">Списки управления доступом</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-36">
<a href="#%D0%AF%D0%B4%D1%80%D0%BE"><span class="tocnumber">9</span> <span class="toctext">Ядро</span></a>
<ul>
<li class="toclevel-2 tocsection-37">
<a href="#%D0%91%D0%B5%D0%B7%D0%BE%D0%BF%D0%B0%D1%81%D0%BD%D0%BE%D0%B5_%D1%8F%D0%B4%D1%80%D0%BE_%D0%B8_%D0%B7%D0%B0%D1%89%D0%B8%D1%82%D0%B0_%D0%BE%D1%82_%D1%8D%D0%BA%D1%81%D0%BF%D0%BB%D0%BE%D0%B9%D1%82%D0%BE%D0%B2"><span class="tocnumber">9.1</span> <span class="toctext">Безопасное ядро и защита от эксплойтов</span></a>
<ul>
<li class="toclevel-3 tocsection-38">
<a href="#%D0%9F%D1%80%D0%BE%D0%B2%D0%B5%D1%80%D0%BA%D0%B0_ASLR_%D0%BF%D1%80%D0%BE%D1%81%D1%82%D1%80%D0%B0%D0%BD%D1%81%D1%82%D0%B2%D0%B0_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F"><span class="tocnumber">9.1.1</span> <span class="toctext">Проверка ASLR пространства пользователя</span></a>
<ul>
<li class="toclevel-4 tocsection-39"><a href="#64-%D0%B1%D0%B8%D1%82%D0%BD%D1%8B%D0%B5_%D0%BF%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81%D1%8B"><span class="tocnumber">9.1.1.1</span> <span class="toctext">64-битные процессы</span></a></li>
<li class="toclevel-4 tocsection-40"><a href="#32-%D0%B1%D0%B8%D1%82%D0%BD%D1%8B%D0%B5_%D0%BF%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81%D1%8B_(%D0%B4%D0%BB%D1%8F_%D1%8F%D0%B4%D1%80%D0%B0_x86_64)"><span class="tocnumber">9.1.1.2</span> <span class="toctext">32-битные процессы (для ядра x86_64)</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2 tocsection-41"><a href="#%D0%9E%D0%B3%D1%80%D0%B0%D0%BD%D0%B8%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%B0_%D0%BA_%D0%BB%D0%BE%D0%B3%D0%B0%D0%BC_%D1%8F%D0%B4%D1%80%D0%B0"><span class="tocnumber">9.2</span> <span class="toctext">Ограничение доступа к логам ядра</span></a></li>
<li class="toclevel-2 tocsection-42"><a href="#%D0%9E%D0%B3%D1%80%D0%B0%D0%BD%D0%B8%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%B0_%D0%BA_%D1%83%D0%BA%D0%B0%D0%B7%D0%B0%D1%82%D0%B5%D0%BB%D1%8F%D0%BC_%D1%8F%D0%B4%D1%80%D0%B0_%D0%B2_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2%D0%BE%D0%B9_%D1%81%D0%B8%D1%82%D0%B5%D0%BC%D0%B5_/proc"><span class="tocnumber">9.3</span> <span class="toctext">Ограничение доступа к указателям ядра в файловой ситеме /proc</span></a></li>
<li class="toclevel-2 tocsection-43"><a href="#%D0%97%D0%B0%D1%89%D0%B8%D1%82%D0%B0_BPF"><span class="tocnumber">9.4</span> <span class="toctext">Защита BPF</span></a></li>
<li class="toclevel-2 tocsection-44"><a href="#%D0%97%D0%BE%D0%BD%D0%B0_%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%B0_ptrace"><span class="tocnumber">9.5</span> <span class="toctext">Зона доступа ptrace</span></a></li>
<li class="toclevel-2 tocsection-45"><a href="#hidepid"><span class="tocnumber">9.6</span> <span class="toctext">hidepid</span></a></li>
<li class="toclevel-2 tocsection-46"><a href="#%D0%9E%D0%B3%D1%80%D0%B0%D0%BD%D0%B8%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8_%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D0%B5%D0%B9"><span class="tocnumber">9.7</span> <span class="toctext">Ограничение загрузки модулей</span></a></li>
<li class="toclevel-2 tocsection-47"><a href="#%D0%9E%D1%82%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_kexec"><span class="tocnumber">9.8</span> <span class="toctext">Отключение kexec</span></a></li>
<li class="toclevel-2 tocsection-48"><a href="#Lockdown-%D1%80%D0%B5%D0%B6%D0%B8%D0%BC"><span class="tocnumber">9.9</span> <span class="toctext">Lockdown-режим</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-49">
<a href="#%D0%97%D0%B0%D0%BF%D1%83%D1%81%D0%BA_%D0%BF%D1%80%D0%B8%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D0%B9_%D0%B2_%D0%BF%D0%B5%D1%81%D0%BE%D1%87%D0%BD%D0%B8%D1%86%D0%B5"><span class="tocnumber">10</span> <span class="toctext">Запуск приложений в песочнице</span></a>
<ul>
<li class="toclevel-2 tocsection-50"><a href="#Firejail"><span class="tocnumber">10.1</span> <span class="toctext">Firejail</span></a></li>
<li class="toclevel-2 tocsection-51"><a href="#bubblewrap"><span class="tocnumber">10.2</span> <span class="toctext">bubblewrap</span></a></li>
<li class="toclevel-2 tocsection-52"><a href="#chroot"><span class="tocnumber">10.3</span> <span class="toctext">chroot</span></a></li>
<li class="toclevel-2 tocsection-53"><a href="#Linux_containers"><span class="tocnumber">10.4</span> <span class="toctext">Linux containers</span></a></li>
<li class="toclevel-2 tocsection-54"><a href="#%D0%9F%D1%80%D0%BE%D1%87%D0%B8%D0%B5_%D1%81%D0%BF%D0%BE%D1%81%D0%BE%D0%B1%D1%8B_%D0%B2%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D0%B8"><span class="tocnumber">10.5</span> <span class="toctext">Прочие способы виртуализации</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-55">
<a href="#%D0%A1%D0%B5%D1%82%D1%8C_%D0%B8_%D0%BC%D0%B5%D0%B6%D1%81%D0%B5%D1%82%D0%B5%D0%B2%D1%8B%D0%B5_%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D1%8B"><span class="tocnumber">11</span> <span class="toctext">Сеть и межсетевые экраны</span></a>
<ul>
<li class="toclevel-2 tocsection-56">
<a href="#%D0%9C%D0%B5%D0%B6%D1%81%D0%B5%D1%82%D0%B5%D0%B2%D1%8B%D0%B5_%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D1%8B"><span class="tocnumber">11.1</span> <span class="toctext">Межсетевые экраны</span></a>
<ul>
<li class="toclevel-3 tocsection-57"><a href="#%D0%9E%D1%82%D0%BA%D1%80%D1%8B%D1%82%D1%8B%D0%B5_%D0%BF%D0%BE%D1%80%D1%82%D1%8B"><span class="tocnumber">11.1.1</span> <span class="toctext">Открытые порты</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-58"><a href="#%D0%9F%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B_%D1%8F%D0%B4%D1%80%D0%B0"><span class="tocnumber">11.2</span> <span class="toctext">Параметры ядра</span></a></li>
<li class="toclevel-2 tocsection-59"><a href="#SSH"><span class="tocnumber">11.3</span> <span class="toctext">SSH</span></a></li>
<li class="toclevel-2 tocsection-60"><a href="#DNS"><span class="tocnumber">11.4</span> <span class="toctext">DNS</span></a></li>
<li class="toclevel-2 tocsection-61"><a href="#%D0%9F%D1%80%D0%BE%D0%BA%D1%81%D0%B8"><span class="tocnumber">11.5</span> <span class="toctext">Прокси</span></a></li>
<li class="toclevel-2 tocsection-62"><a href="#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_TLS-%D1%81%D0%B5%D1%80%D1%82%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%82%D0%B0%D0%BC%D0%B8"><span class="tocnumber">11.6</span> <span class="toctext">Управление TLS-сертификатами</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-63">
<a href="#%D0%A4%D0%B8%D0%B7%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F_%D0%B1%D0%B5%D0%B7%D0%BE%D0%BF%D0%B0%D1%81%D0%BD%D0%BE%D1%81%D1%82%D1%8C"><span class="tocnumber">12</span> <span class="toctext">Физическая безопасность</span></a>
<ul>
<li class="toclevel-2 tocsection-64"><a href="#%D0%91%D0%BB%D0%BE%D0%BA%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B0_BIOS"><span class="tocnumber">12.1</span> <span class="toctext">Блокировка BIOS</span></a></li>
<li class="toclevel-2 tocsection-65">
<a href="#%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D1%87%D0%B8%D0%BA%D0%B8"><span class="tocnumber">12.2</span> <span class="toctext">Загрузчики</span></a>
<ul>
<li class="toclevel-3 tocsection-66"><a href="#Syslinux"><span class="tocnumber">12.2.1</span> <span class="toctext">Syslinux</span></a></li>
<li class="toclevel-3 tocsection-67"><a href="#GRUB"><span class="tocnumber">12.2.2</span> <span class="toctext">GRUB</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-68"><a href="#Secure_Boot"><span class="tocnumber">12.3</span> <span class="toctext">Secure Boot</span></a></li>
<li class="toclevel-2 tocsection-69"><a href="#Trusted_Platform_Module_(TPM)"><span class="tocnumber">12.4</span> <span class="toctext">Trusted Platform Module (TPM)</span></a></li>
<li class="toclevel-2 tocsection-70"><a href="#%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BE%D1%87%D0%BD%D1%8B%D0%B9_%D1%80%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB_%D0%BD%D0%B0_%D1%81%D1%8A%D1%91%D0%BC%D0%BD%D0%BE%D0%BC_%D0%BD%D0%BE%D1%81%D0%B8%D1%82%D0%B5%D0%BB%D0%B5"><span class="tocnumber">12.5</span> <span class="toctext">Загрузочный раздел на съёмном носителе</span></a></li>
<li class="toclevel-2 tocsection-71"><a href="#%D0%90%D0%B2%D1%82%D0%BE%D0%BC%D0%B0%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B9_%D0%B2%D1%8B%D1%85%D0%BE%D0%B4"><span class="tocnumber">12.6</span> <span class="toctext">Автоматический выход</span></a></li>
<li class="toclevel-2 tocsection-72"><a href="#%D0%97%D0%B0%D1%89%D0%B8%D1%82%D0%B0_%D0%BE%D1%82_%D0%BC%D0%BE%D1%88%D0%B5%D0%BD%D0%BD%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D1%85_USB-%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2"><span class="tocnumber">12.7</span> <span class="toctext">Защита от мошеннических USB-устройств</span></a></li>
<li class="toclevel-2 tocsection-73"><a href="#%D0%A1%D0%B1%D0%BE%D1%80_%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D1%8F%D1%8E%D1%89%D0%B8%D1%85%D1%81%D1%8F_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85"><span class="tocnumber">12.8</span> <span class="toctext">Сбор изменяющихся данных</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-74">
<a href="#%D0%9F%D0%B0%D0%BA%D0%B5%D1%82%D1%8B"><span class="tocnumber">13</span> <span class="toctext">Пакеты</span></a>
<ul>
<li class="toclevel-2 tocsection-75"><a href="#%D0%90%D1%83%D1%82%D0%B5%D0%BD%D1%82%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D1%8F"><span class="tocnumber">13.1</span> <span class="toctext">Аутентификация</span></a></li>
<li class="toclevel-2 tocsection-76"><a href="#%D0%9E%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F"><span class="tocnumber">13.2</span> <span class="toctext">Обновления</span></a></li>
<li class="toclevel-2 tocsection-77"><a href="#%D0%9E%D1%82%D1%81%D0%BB%D0%B5%D0%B6%D0%B8%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%83%D1%8F%D0%B7%D0%B2%D0%B8%D0%BC%D0%BE%D1%81%D1%82%D0%B5%D0%B9"><span class="tocnumber">13.3</span> <span class="toctext">Отслеживание уязвимостей</span></a></li>
<li class="toclevel-2 tocsection-78"><a href="#%D0%9F%D0%B5%D1%80%D0%B5%D1%81%D0%B1%D0%BE%D1%80%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2"><span class="tocnumber">13.4</span> <span class="toctext">Пересборка пакетов</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-79"><a href="#%D0%A1%D0%BC%D0%BE%D1%82%D1%80%D0%B8%D1%82%D0%B5_%D1%82%D0%B0%D0%BA%D0%B6%D0%B5"><span class="tocnumber">14</span> <span class="toctext">Смотрите также</span></a></li>
</ul>
</div>

<h2>
<span id=".D0.9F.D1.80.D0.B8.D0.BD.D1.86.D0.B8.D0.BF.D1.8B"></span><span class="mw-headline" id="Принципы">Принципы</span>
</h2>
<ul>
<li>Систему можно "защитить" до такой степени, что с ней будет невозможно работать. Необходимо найти баланс между защищённостью и удобством.</li>
<li>Существует множество атак и угроз, но следует понимать, что наибольшей уязвимостью всегда был — и будет — сам пользователь.</li>
<li>
<a href="https://en.wikipedia.org/wiki/ru:%D0%9F%D1%80%D0%B8%D0%BD%D1%86%D0%B8%D0%BF_%D0%BC%D0%B8%D0%BD%D0%B8%D0%BC%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D1%85_%D0%BF%D1%80%D0%B8%D0%B2%D0%B8%D0%BB%D0%B5%D0%B3%D0%B8%D0%B9" class="extiw" title="wikipedia:ru:Принцип минимальных привилегий">Принцип минимальных привилегий</a>: каждый элемент системы должен иметь доступ только к тому, что необходимо ему для работы, и ни к чему более.</li>
<li>Безопасность должна быть организована в виде многослойной системы. Когда один из слоёв защиты прорван, следующий остановит атаку.</li>
<li>Будьте немного параноиком. Будьте подозрительны. Если что-то выглядит слишком хорошо, чтобы быть правдой, то скорее всего, так оно и есть.</li>
<li>Тем не менее, обеспечить 100%-ую защищённость можно только одним способом: отключить машину от всех сетей, запереть её в кладовке и никогда не использовать.</li>
<li>Приготовьтесь к неудаче. Создайте план действий на тот случай, если ваши защитные мероприятия не помогут и атакующий преодолеет защиту.</li>
</ul>
<h2>
<span id=".D0.9F.D0.B0.D1.80.D0.BE.D0.BB.D0.B8"></span><span class="mw-headline" id="Пароли">Пароли</span>
</h2>
<p>Пароли — ключ к созданию безопасной Linux-системы. Они обеспечивают защиту <a href="/title/Users_and_groups_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)" title="Users and groups (Русский)">аккаунтов пользователей</a>, <a href="/title/Data-at-rest_encryption" title="Data-at-rest encryption">зашифрованных файловых систем</a>, а также ключей <a href="/title/SSH_keys_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)" title="SSH keys (Русский)">SSH</a> и <a href="/title/GnuPG_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)" title="GnuPG (Русский)">GPG</a>. Пароли представляют собой главный способ, с помощью которого компьютер определяет, можно ли доверять конкретному пользователю. По этой причине выбор паролей и их защита является одним из важнейших элементов компьтерной безопасности.
</p>
<h3>
<span id=".D0.9D.D0.B0.D0.B4.D1.91.D0.B6.D0.BD.D0.BE.D1.81.D1.82.D1.8C_.D0.BF.D0.B0.D1.80.D0.BE.D0.BB.D1.8F"></span><span class="mw-headline" id="Надёжность_пароля">Надёжность пароля</span>
</h3>
<p>Ключевое требование к паролю — он должен быть сложным. Пароль должно быть невозможно угадать на основе личной информации, а также <a href="https://en.wikipedia.org/wiki/ru:%D0%92%D0%B7%D0%BB%D0%BE%D0%BC_%D0%BF%D0%B0%D1%80%D0%BE%D0%BB%D1%8F" class="extiw" title="wikipedia:ru:Взлом пароля">взломать</a> методами социальной инженерии или грубой силы. Главными параметрами пароля являются его <i>длина</i> и <i>случайность</i>. В криптографии качество пароля характеризуется его <a href="https://en.wikipedia.org/wiki/ru:%D0%98%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D0%BE%D0%BD%D0%BD%D0%B0%D1%8F_%D1%8D%D0%BD%D1%82%D1%80%D0%BE%D0%BF%D0%B8%D1%8F" class="extiw" title="wikipedia:ru:Информационная энтропия">энтропией</a>. 
</p>
<p>Ненадёжными считаются пароли:
</p>
<ul>
<li>Основанные на личной информации (кличка домашнего питомца, дата рождения, любимая видеоигра).</li>
<li>Слова с заменой букв (например, <code>k1araj0hns0n</code>), уязвимые для атаки словарём.</li>
<li>Слова или часто употребляемые строки, к которым в начале и/или в конце добавлены числа, символы или буквы (например, <code>DG091101</code>).</li>
<li>Распространённые фразы или строки из слов (например, <code>photocopyhauntbranchexpose</code>), в том числе и с заменой символов (вроде <code>Ph0toc0pyh4uN7br@nch3xp*se</code>).</li>
<li>Любой из <a href="https://en.wikipedia.org/wiki/List_of_the_most_common_passwords" class="extiw" title="wikipedia:List of the most common passwords">наиболее распространённых паролей</a>.</li>
</ul>
<p>Лучше всего для пароля подойдёт длинная (чем длиннее — тем лучше) последовательность символов, созданная с помощью надёжного источника случайности. Очень важно, чтобы пароль был длинным. Слабые алгоритмы хэширования позволяют взломать восьмизначный пароль по его хэш-сумме <a rel="nofollow" class="external text" href="https://www.theregister.com/2019/02/14/password_length">всего за несколько часов</a>.
</p>
<p>Утилиты вроде <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pwgen">pwgen</a></span> или <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/apg/">apg</a></span><sup><small>AUR</small></sup> помогают генерировать случайные пароли. К сожалению, такие пароли сложно запомнить. Одна из часто используемых техник запоминания заключается в том, что генерируется длинный пароль и записывается на бумагу, после чего пользователь запоминает минимальное безопасное количество символов. Со временем количество используемых символов из длинного пароля должно увеличиваться. Наконец, когда весь пароль сохранится на уровне "мышечной памяти", бумажку с паролем можно выбросить. Данная техника довольно непроста в использовании, но зато она гарантирует, что пароль не находится в каком-нибудь словаре и его нельзя будет угадать "умной" bruteforce-атакой, комбинирующей слова и замену символов.
</p>
<p>Часто используется другой подход, с придумыванием мнемонической фразы, в которой каждое слово соответствует  символу или группе символов пароля. Например, строке “the girl is walking down the rainy street” может соответствовать <code>t6!WdtR5</code> или, чуть сложнее, — <code>t&amp;6!RrlW@dtR,57</code>. Такой подход проще, но имейте в виду, что некоторые буквы в начале фраз встречаются <a href="https://en.wikipedia.org/wiki/Letter_frequency#Relative_frequencies_of_the_first_letters_of_a_word_in_the_English_language" class="extiw" title="wikipedia:Letter frequency">чаще других</a>. 
</p>
<p>Ещё одна эффективная техника заключается в записи сложного пароля на физический носитель и хранении его в <i>безопасном</i> месте, вроде кошелька или сейфа с документами. Большинство людей, как правило, в той или иной мере занимались безопасностью физических ценностей, поэтому принципы физической безопасности часто воспринимаются гораздо лучше, чем принципы безопасности цифровой. Подробнее см. <a rel="nofollow" class="external text" href="https://www.schneier.com/news/archives/2010/11/bruce_schneier_write.html">интервью с Bruce Schneier</a>.
</p>
<p>Наконец, для хранения длинных и сложных паролей можно использовать <a href="/title/%D0%A1%D0%BF%D0%B8%D1%81%D0%BE%D0%BA_%D0%BF%D1%80%D0%B8%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D0%B9/%D0%91%D0%B5%D0%B7%D0%BE%D0%BF%D0%B0%D1%81%D0%BD%D0%BE%D1%81%D1%82%D1%8C#%D0%9C%D0%B5%D0%BD%D0%B5%D0%B4%D0%B6%D0%B5%D1%80%D1%8B_%D0%BF%D0%B0%D1%80%D0%BE%D0%BB%D0%B5%D0%B9" class="mw-redirect" title="Список приложений/Безопасность">менеджер</a>, доступ к которому защищён специальным "мастер-паролем". Пользователь должен запомнить мастер-пароль и использовать его только для доступа к менеджеру. Для удобства можно установить менеджер на целевой системе, что, в звисимости от ситуации, может восприниматься и как недостаток, и как преимущество. Для некоторых менеджеров паролей разработаны смартфон-приложения, которые отображают пароль на экране телефона, чтобы пользователь мог вручную ввести его в системе, где менеджер не установлен. Имейте в виду, что если вы забудете мастер-пароль от менеджера, то полностью потеряете доступ к целевой системе.
</p>
<p>Кроме того, раньше считалось эффективным использование в качестве пароля длинных последовательностей несвязанных слов. Предполагалось, что при достаточном количестве слов набранная в длине пароля энтропия компенсирует нехватку энтропии от использования "словарных" слов. Преимущество в энтропии, которое даёт этот метод, наглядно продемонстрировано в <a rel="nofollow" class="external text" href="https://xkcd.com/936/">комиксе XKCD</a>. Тем не менее, в последнее время появились списки фраз с миллиардами возможных перестановок слов и изменений, что снижает <i>эффективную</i> энтропию таких паролей.
</p>
<p>См. также статьи <a rel="nofollow" class="external text" href="https://www.schneier.com/blog/archives/2014/03/choosing_secure_1.html">Choosing Secure Passwords</a>, <a rel="nofollow" class="external text" href="https://www.iusmentis.com/security/passphrasefaq/">The passphrase FAQ</a> и <a href="https://en.wikipedia.org/wiki/ru:%D0%A1%D0%BB%D0%BE%D0%B6%D0%BD%D0%BE%D1%81%D1%82%D1%8C_%D0%BF%D0%B0%D1%80%D0%BE%D0%BB%D1%8F" class="extiw" title="wikipedia:ru:Сложность пароля">Сложность пароля</a>.
</p>
<h3>
<span id=".D0.A5.D1.80.D0.B0.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D0.B0.D1.80.D0.BE.D0.BB.D0.B5.D0.B9"></span><span class="mw-headline" id="Хранение_паролей">Хранение паролей</span>
</h3>
<p>Следующий шаг после выбора надёжного пароля — убедиться, что он хранится в безопасном месте. Здесь необходимо подумать о таких вещах, как <a href="https://en.wikipedia.org/wiki/ru:%D0%9A%D0%B5%D0%B9%D0%BB%D0%BE%D0%B3%D0%B5%D1%80" class="extiw" title="wikipedia:ru:Кейлогер">кейлогеры</a> (программные и аппаратные), скринлогеры, <a href="https://en.wikipedia.org/wiki/ru:%D0%A1%D0%BE%D1%86%D0%B8%D0%B0%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D0%B6%D0%B5%D0%BD%D0%B5%D1%80%D0%B8%D1%8F" class="extiw" title="wikipedia:ru:Социальная инженерия">социальная инженерия</a> и даже банальное <a href="https://en.wikipedia.org/wiki/Shoulder_surfing_(computer_security)" class="extiw" title="wikipedia:Shoulder surfing (computer security)">подглядывание</a>. Старайтесь не использовать неуникальные пароли (т.е. такие, которые вы используете где-то ещё) на серверах, в безопасности которых не уверены — это позволит минимизировать потери в случае утечки. <a href="/title/%D0%A1%D0%BF%D0%B8%D1%81%D0%BE%D0%BA_%D0%BF%D1%80%D0%B8%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D0%B9/%D0%91%D0%B5%D0%B7%D0%BE%D0%BF%D0%B0%D1%81%D0%BD%D0%BE%D1%81%D1%82%D1%8C#%D0%9C%D0%B5%D0%BD%D0%B5%D0%B4%D0%B6%D0%B5%D1%80%D1%8B_%D0%BF%D0%B0%D1%80%D0%BE%D0%BB%D0%B5%D0%B9" class="mw-redirect" title="Список приложений/Безопасность">Менеджеры паролей</a> позволяют хранить большое количество сложных паролей. После копирование пароля из менеджера в приложение необходимо убедиться, что буфер обмена очищен; кроме того, пароли не должны сохраняться в каких либо лог-файлах. Так, не стоит копировать пароли напрямую в команды терминала, потому что тогда они могут отобразиться в файлах вроде <code>.bash_history</code>.
</p>
<p>Разумеется, не стоит выбирать простые пароли лишь по той причине, что их проще запомнить. Вместо большого количества простых, похожих друг на друга паролей лучше создать зашифрованную базу данных надёжных паролей, которая будет защищена ключом шифрования и одним сложным мастер-паролем. Хранение паролей в виде записей на бумажном носителе — также достаточно эффективный подход <a rel="nofollow" class="external autonumber" href="https://www.schneier.com/blog/archives/2005/06/write_down_your.html">[1]</a>, поскольку уязвимости в программном обеспечении больше не будут играть никакой роли; однако взамен потребуется обеспечить безопасность физического носителя в реальном мире.
</p>
<p>Наконец, важным преимуществом сипьного пароля является то, что его нельзя восстановить на основе информации из сторонних источников.
</p>
<p>Если вы используете одну и ту же кодовую фразу для шифрования диска и в качестве пароля входа (удобно при автомонтировании зашифрованного раздела или каталога при входе в систему), убедитесь, что  файл <code>/etc/shadow</code> либо находится на зашифрованном разделе, либо использует надёжный алгоритм хэширования паролей (например, sha512/bcrypt, но не md5; подробнее см. <a href="/title/SHA_password_hashes" title="SHA password hashes">SHA password hashes</a>).
</p>
<p>При создании резервных копий баз данных паролей лучше избегать ситуаций, когда копия хранится на зашифрованном разделе или носителе, защищённом паролем, при этом данный пароль находится в этой самой копии базы. В случае потери доступа к основной версии базы данных возникнет неприятная ситуация, потому что вы потеряете доступ одновременно и к резервной копии, и к разделу, на котором она хранится. В таких случаях раздел или носитель с хранящейся на нём резервной копией лучше защитить простой хэш-суммой мастер-ключа. Следует вести список мест, где хранятся ваши резервные копии: если возникнет подозрение, что мастер-ключ скомпроментирован, то немедленно замените его для всех резервных копий, а также задайте новые ключи зашифрованных разделов, если они вычислялись на основе старого мастер-пароля.
</p>
<p>Безопасное управление версиями базы данных представляет собой довольно сложный процесс. Если вы решите пойти этим путём, то необходимо будет обновлять мастер-пароль во всех версиях базы. Чаще всего явные признаки утечки мастер-пароля отсутствуют, поэтому для снижения рисков стоит производить смену пароля регулярно. Если  возникло подозрение, что кто-то получил несанкционированный доступ к одной из старых версий базы данных, необходимо как можно быстрее сменить все пароли, которые в ней хранились. "Как можно быстрее" в данном случае означает "быстрее, чем злоумышленник подберёт мастер-пароль методом грубой силы". Время подбора пароля можно приблизительно оценить исходя из его энтропии.
</p>
<h3>
<span id=".D0.A5.D1.8D.D1.88-.D1.81.D1.83.D0.BC.D0.BC.D1.8B_.D0.BF.D0.B0.D1.80.D0.BE.D0.BB.D0.B5.D0.B9"></span><span class="mw-headline" id="Хэш-суммы_паролей">Хэш-суммы паролей</span>
</h3>
<p>Хэшированные пароли в Arch Linux хранятся в файле <code>/etc/shadow</code>, который доступен на чтение только суперпользователю. Остальные параметры пользовательских аккаунтов находятся доступном для всех файле <code>/etc/passwd</code> (подробнее см. <a href="/title/%D0%9F%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D0%B8_%D0%B8_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D1%8B#%D0%91%D0%B0%D0%B7%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D0%B5%D0%B9" class="mw-redirect" title="Пользователи и группы">Пользователи и группы#База данных пользователей</a>). Также см. раздел <a href="#%D0%9E%D0%B3%D1%80%D0%B0%D0%BD%D0%B8%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_root">#Ограничение root</a>.
</p>
<p>Задать пароль можно командой <i>passwd</i>, которая <a href="https://en.wikipedia.org/wiki/Key_stretching" class="extiw" title="wikipedia:Key stretching">вычислит</a> его хэш-сумму с помощью функции <a href="https://en.wikipedia.org/wiki/ru:Crypt_(C)" class="extiw" title="wikipedia:ru:Crypt (C)">crypt</a> и затем сохранит в файл <code>/etc/shadow</code>. См. также <a href="/title/SHA_password_hashes" title="SHA password hashes">SHA password hashes</a>. Пароли <a href="https://en.wikipedia.org/wiki/ru:%D0%A1%D0%BE%D0%BB%D1%8C_(%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D0%BE%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D1%8F)" class="extiw" title="wikipedia:ru:Соль (криптография)">солятся</a>, чтобы защитить их от взлома с помощью <a href="https://en.wikipedia.org/wiki/ru:%D0%A0%D0%B0%D0%B4%D1%83%D0%B6%D0%BD%D0%B0%D1%8F_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D0%B0" class="extiw" title="wikipedia:ru:Радужная таблица">радужных таблиц</a>.
</p>
<p>См. также статью о <a rel="nofollow" class="external text" href="https://www.slashroot.in/how-are-passwords-stored-linux-understanding-hashing-shadow-utils">хранении паролей в Linux</a>.
</p>
<h3>
<span id=".D0.A2.D1.80.D0.B5.D0.B1.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D1.8F_.D0.BA_.D0.BF.D0.B0.D1.80.D0.BE.D0.BB.D1.8E_.D1.81_pam_pwquality"></span><span class="mw-headline" id="Требования_к_паролю_с_pam_pwquality">Требования к паролю с pam_pwquality</span>
</h3>
<p><i>pam_pwquality</i> предоставляет защиту от <a href="https://en.wikipedia.org/wiki/ru:%D0%9F%D0%B5%D1%80%D0%B5%D0%B1%D0%BE%D1%80_%D0%BF%D0%BE_%D1%81%D0%BB%D0%BE%D0%B2%D0%B0%D1%80%D1%8E" class="extiw" title="wikipedia:ru:Перебор по словарю">перебора по словарю</a> и помогает настроить политики паролей для всей системы. Модуль основан на <i>pam_cracklib</i> и поддерживат настройки последнего для обратной совместимости.
</p>
<p><a href="/title/%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D0%B5" class="mw-redirect" title="Установите">Установите</a> пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libpwquality">libpwquality</a></span>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> На суперпользователя ограничения политик по умолчанию не действуют.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Суперпользователь может задавать пароли для обычных пользователей, не укладывающиеся в разрешённую политику. Это удобно при создании временных паролей.</div>
<p>Например, вы хотите установить следующую политику:
</p>
<ul>
<li>запрашивать пароль 2 дополнительных раза в случае ошибки (параметр retry);</li>
<li>длина пароля не менее 10 символов (параметр minlen);</li>
<li>новый пароль должен отличаться от старого не менее чем шестью символами (параметр difok);</li>
<li>не менее 1 цифры (параметр dcredit);</li>
<li>не менее 1 буквы в верхнем регистре (параметр ucredit);</li>
<li>не менее 1 буквы в нижнем регистре (параметр lcredit);</li>
<li>не менее 1 другого символа (параметр ocredit);</li>
<li>не содержит слов "myservice" и "mydomain";</li>
<li>работает в том числе и для пользователя root.</li>
</ul>
<p>Добавьте в файл <code>/etc/pam.d/passwd</code> следующие строки:
</p>
<pre>#%PAM-1.0
password required pam_pwquality.so retry=2 minlen=10 difok=6 dcredit=-1 ucredit=-1 ocredit=-1 lcredit=-1 [badwords=myservice mydomain] enforce_for_root
password required pam_unix.so use_authtok sha512 shadow</pre>
<p>Строка <code>password required pam_unix.so use_authtok</code> является указанием модулю <i>pam_unix</i> не запрашивать пароль, а использовать тот, который будет предоставлен модулем <i>pam_pwquality</i>.
</p>
<p>Подробнее см. <span class="plainlinks archwiki-template-man" title="$ man 8 pam_pwquality"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pam_pwquality.8">pam_pwquality(8)</a></span> и <span class="plainlinks archwiki-template-man" title="$ man 8 pam_unix"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pam_unix.8">pam_unix(8)</a></span>.
</p>
<h2>
<span id=".D0.9F.D1.80.D0.BE.D1.86.D0.B5.D1.81.D1.81.D0.BE.D1.80"></span><span class="mw-headline" id="Процессор">Процессор</span>
</h2>
<h3>
<span id=".D0.9C.D0.B8.D0.BA.D1.80.D0.BE.D0.BA.D0.BE.D0.B4"></span><span class="mw-headline" id="Микрокод">Микрокод</span>
</h3>
<p>В статье <a href="/title/%D0%9C%D0%B8%D0%BA%D1%80%D0%BE%D0%BA%D0%BE%D0%B4" class="mw-redirect" title="Микрокод">Микрокод</a> описано, как установить обновления безопасности для микрокода вашего процессора.
</p>
<h3>
<span id=".D0.90.D0.BF.D0.BF.D0.B0.D1.80.D0.B0.D1.82.D0.BD.D1.8B.D0.B5_.D1.83.D1.8F.D0.B7.D0.B2.D0.B8.D0.BC.D0.BE.D1.81.D1.82.D0.B8"></span><span class="mw-headline" id="Аппаратные_уязвимости">Аппаратные уязвимости</span>
</h3>
<p>Некоторые процессоры имеют аппаратные узявимости. В <a rel="nofollow" class="external text" href="https://www.kernel.org/doc/html/latest/admin-guide/hw-vuln/">документации ядра</a> приведён список известных уязвимостей, а также даны рекомендации по защите от них с помощью настроек ядра для конкретных сценариев работы.
</p>
<p>Проверить наличие в вашей системе известных уязвимостей можно командой:
</p>
<pre>$ grep -r . /sys/devices/system/cpu/vulnerabilities/
</pre>
<p>В большинстве случаев для защиты достаточно своевременно обновлять ядро и микрокоды процессора.
</p>
<h4>
<span id=".D0.9C.D0.BD.D0.BE.D0.B3.D0.BE.D0.BF.D0.BE.D1.82.D0.BE.D1.87.D0.BD.D0.BE.D1.81.D1.82.D1.8C"></span><span class="mw-headline" id="Многопоточность">Многопоточность</span>
</h4>
<p><a href="https://en.wikipedia.org/wiki/ru:%D0%9E%D0%B4%D0%BD%D0%BE%D0%B2%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D0%B0%D1%8F_%D0%BC%D0%BD%D0%BE%D0%B3%D0%BE%D0%BF%D0%BE%D1%82%D0%BE%D1%87%D0%BD%D0%BE%D1%81%D1%82%D1%8C" class="extiw" title="wikipedia:ru:Одновременная многопоточность">Одновременная многопоточность</a> (Simultaneous multithreading, SMT), для процессоров Intel также известная как гиперпоточность (hyper-threading), может стать причиной уязвимостей <a rel="nofollow" class="external text" href="https://www.kernel.org/doc/html/latest/admin-guide/hw-vuln/l1tf.html">L1 Terminal Fault</a> и <a rel="nofollow" class="external text" href="https://www.kernel.org/doc/html/latest/admin-guide/hw-vuln/mds.html">Microarchitectural Data Sampling</a>. Ядро Linux и микрокоды предоставляют обновления для защиты от известных уязвимостей, но для некоторых процессоров её лучше отключить, если на машине работают виртуализированные гостевые системы <a rel="nofollow" class="external autonumber" href="https://www.kernel.org/doc/html/latest/admin-guide/hw-vuln/l1tf.html#virtualization-with-untrusted-guests">[2]</a>.
</p>
<p>Часто SMT оказывается отключена на уровне системных прошивок, изучите на предмет этого системную документацию и документацию материнской платы. Отключить многопоточность можно также и вручную, добавив следующие <a href="/title/%D0%9F%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B_%D1%8F%D0%B4%D1%80%D0%B0" class="mw-redirect" title="Параметры ядра">параметры ядра</a>:
</p>
<pre>l1tf=full,force mds=full,nosmt mitigations=auto,nosmt nosmt=force
</pre>
<h2>
<span id=".D0.9F.D0.B0.D0.BC.D1.8F.D1.82.D1.8C"></span><span class="mw-headline" id="Память">Память</span>
</h2>
<h3>
<span id=".D0.91.D0.B5.D0.B7.D0.BE.D0.BF.D0.B0.D1.81.D0.BD.D1.8B.D0.B9_malloc"></span><span class="mw-headline" id="Безопасный_malloc">Безопасный malloc</span>
</h3>
<p><a rel="nofollow" class="external text" href="https://github.com/GrapheneOS/hardened_malloc">hardened_malloc</a> (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/hardened_malloc/">hardened_malloc</a></span><sup><small>AUR</small></sup>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/hardened-malloc-git/">hardened-malloc-git</a></span><sup><small>AUR</small></sup>) — безопасный аналог функции malloc() из стандартной библиотеки <a href="https://en.wikipedia.org/wiki/ru:glibc" class="extiw" title="wikipedia:ru:glibc">glibc</a>. Изначально проект разрабатывался для внедрения в библиотеки <a href="https://en.wikipedia.org/wiki/ru:Bionic_(%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B0)" class="extiw" title="wikipedia:ru:Bionic (библиотека)">Bionic</a> (Android) и <a href="https://en.wikipedia.org/wiki/ru:Musl" class="extiw" title="wikipedia:ru:Musl">musl</a> (GraphenOS), однако имеется и встроенная поддержка обычных Linux-дистрибутивов для архитектуры x86_64.
</p>
<p>Поскольку функция hardened_malloc до сих пор не добавлена в glibc (любая поддержка и запросы на слияние приветствуются), использовать её можно с помощью переменной окружения LD_PRELOAD. Тесты показали, что с некоторыми приложениями могут возникнуть проблемы, если задать эту переменную глобально в файле <code>/etc/ld.so.preload</code>. Например, <code>man</code> завершается с ошибкой, если флаг окружения <code>seccomp</code> отключён. Связано это с тем, что системный вызов <code>getrandom</code> не входит в список разрешённых по умолчанию; решить эту проблему можно повторной сборкой с добавлением данного системного вызова. Кроме того, поскольку hardened_malloc может снизить производительность, окончательное решение о его использовании лучше принимать исходя из конкретной ситуации, принимая во внимание реальную поверхность атаки.
</p>
<p>Проверить работу улучшенной функции можно либо с помощью сценария-обёртки hardened-malloc-preload, либо запустив программу с явно заданной переменной окружения LD_PRELOAD:
</p>
<pre>LD_PRELOAD="/usr/lib/libhardened_malloc.so" /usr/bin/firefox
</pre>
<p>Работа с hardened_malloc в <a href="/title/Firejail" title="Firejail">Firejail</a> описана в соответствующей статье, а список возможных настроек функции вы найдёте в Github-репозитории проекта.
</p>
<h2>
<span id=".D0.94.D0.B0.D0.BD.D0.BD.D1.8B.D0.B5"></span><span class="mw-headline" id="Данные">Данные</span>
</h2>
<h3>
<span id=".D0.A8.D0.B8.D1.84.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.BD.D0.B5.D0.B0.D0.BA.D1.82.D0.B8.D0.B2.D0.BD.D1.8B.D1.85_.D0.B4.D0.B0.D0.BD.D0.BD.D1.8B.D1.85"></span><span class="mw-headline" id="Шифрование_неактивных_данных">Шифрование неактивных данных</span>
</h3>
<p><a href="/title/Data-at-rest_encryption" title="Data-at-rest encryption">Шифрование неактивных данных</a>, в том числе полное шифрование диска с подбором <a href="#%D0%9F%D0%B0%D1%80%D0%BE%D0%BB%D0%B8">надёжного пароля</a>, представляет собой единственный способ защитить данные от физического восстановления. Пока компьютер выключен или зашифрованный диск размонтирован, данные находятся в полной безопасности.
</p>
<p>Однако после включения компьютера и монтирования диска данные становятся столь же уязвимы, как и незашифрованные. Следовательно, такое шифрование относится к числу лучших практик лишь при шифровании размонтированных разделов, данные на которых больше не нужны.
</p>
<p>Программы вроде <a href="/title/Dm-crypt" title="Dm-crypt">dm-crypt</a> позволяют пользователю зашифровать петлевой файл как виртуальный том. Такой подход используется, если защитить необходимо только некоторые части системы, а не диск целиком.
</p>
<p>Также можно зашифровать носитель <a href="/title/Trusted_Platform_Module#Data-at-rest_encryption_with_LUKS" title="Trusted Platform Module">хранящимся в TPM ключом</a>, но имейте в виду, что в нём <a rel="nofollow" class="external text" href="https://tpm.fail">находили уязвимости</a>, а ключ можно извлечь с помощью <a rel="nofollow" class="external text" href="https://pulsesecurity.co.nz/articles/TPM-sniffing">атаки bus sniffing</a>.
</p>
<h3>
<span id=".D0.A4.D0.B0.D0.B9.D0.BB.D0.BE.D0.B2.D1.8B.D0.B5_.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D1.8B"></span><span class="mw-headline" id="Файловые_системы">Файловые системы</span>
</h3>
<p>В настоящее время ядро самостоятельно предотвращает связанные с жёсткими и символическими ссылками проблемы безопасности, если включены переключатели sysctl <code>fs.protected_hardlinks</code> и <code>fs.protected_symlinks</code>. По этой причине нет особого смысла выносить отдельно каталоги, доступные на запись для всех.
</p>
<p>Отделять файловые системы с такими каталогами имеет смысл только в том случае, если вы желаете ограничить "ущерб" от исчерпания свободного места на диске. Однако имейте в виду, что заполнение файловых систем <code>/var</code> или <code>/tmp</code> приведёт к аварийному завершению служб. Более гибкий подход заключается в <a href="/title/Disk_quota" title="Disk quota">выделении квот</a>, причём в некоторые <a href="/title/%D0%A4%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2%D1%8B%D0%B5_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B" class="mw-redirect" title="Файловые системы">файловые системы</a> эта возможность встроена по умолчанию (например, в Btrfs есть квоты на подтома).
</p>
<h4>
<span id=".D0.9F.D0.B0.D1.80.D0.B0.D0.BC.D0.B5.D1.82.D1.80.D1.8B_.D0.BC.D0.BE.D0.BD.D1.82.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D1.8F"></span><span class="mw-headline" id="Параметры_монтирования">Параметры монтирования</span>
</h4>
<p>В соответствии с принципом наименьших привилегий файловые системы необходимо монтировать с максимально жёсткими ограничениями (разумеется, при условии сохранения работоспосбоности).
</p>
<p>Наиболее полезные параметры монтирования:
</p>
<ul>
<li>
<code>nodev</code>: символьные и специальные блочные устройства не будут распознаваться.</li>
<li>
<code>nosuid</code>: биты setuid и setgid в правах доступа к файлам будут игнорироваться.</li>
<li>
<code>noexec</code>: запуск исполняемых двоичных файлов запрещён.
<ul>
<li>Установка <code>noexec</code> для <code>/home</code> вызовет невозможность выполнения сценариев, а также приведёт к проблемам с <a href="/title/Wine_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)" title="Wine (Русский)">Wine</a>*, <a href="/title/Steam" title="Steam">Steam</a>, PyCharm и т.д.</li>
<li>Для некоторых пакетов (например, при сборке <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nvidia-dkms">nvidia-dkms</a></span>) может быть необходим параметр <code>exec</code> для <code>/var</code>.</li>
</ul>
</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> При запуске исполняемых файлов Windows в Wine флаг <code>exec</code> не требуется. Этот флаг необходим только если сам Wine установлен в каталог <code>/home</code>.
</div>
<p>Файловые системы, которые используются только для хранения данных, должны всегда монтироваться с параметрами <code>nodev</code>, <code>nosuid</code> и <code>noexec</code>.
</p>
<p>Примеры файловых систем, для которых это имеет смысл:
</p>
<ul>
<li><code>/var</code></li>
<li><code>/home</code></li>
<li><code>/dev/shm</code></li>
<li><code>/tmp</code></li>
<li><code>/boot</code></li>
</ul>
<h3>
<span id=".D0.9F.D1.80.D0.B0.D0.B2.D0.B0_.D0.B4.D0.BE.D1.81.D1.82.D1.83.D0.BF.D0.B0_.D0.BA_.D1.84.D0.B0.D0.B9.D0.BB.D0.B0.D0.BC"></span><span class="mw-headline" id="Права_доступа_к_файлам">Права доступа к файлам</span>
</h3>
<p>Чаще всего используемые по умолчанию <a href="/title/File_permissions_and_attributes" title="File permissions and attributes">права доступа</a> позволяют читать файлы широкому кругу пользователей. Ограничение доступа позволит скрыть потенциально важную информацию от атакующего, который каким-то образом заполучил обычный (не-root) аккаунт вроде <code>http</code> или <code>nobody</code>.
</p>
<p>Например:
</p>
<pre># chmod 700 /boot /etc/{iptables,arptables}
</pre>
<p><a href="/title/Umask" title="Umask">Umask</a> по умолчанию имеет значение <code>0022</code>, его можно изменить для безопасности новых файлов. В <a rel="nofollow" class="external text" href="https://apps.nsa.gov/iaarchive/library/ia-guidance/security-configuration/operating-systems/guide-to-the-secure-configuration-of-red-hat-enterprise.cfm">руководстве по безопасности RHEL5</a> рекомендуется значение umask <code>0077</code> как обеспечивающее максимальный уровень безопасности, поскольку любые создаваемые файлы будут доступны на чтение только владельцу. В статье <a href="/title/Umask#Set_the_mask_value" title="Umask">Umask#Set the mask value</a> описано, как изменить значение umask.
</p>
<h3>
<span id=".D0.A0.D0.B5.D0.B7.D0.B5.D1.80.D0.B2.D0.BD.D0.BE.D0.B5_.D0.BA.D0.BE.D0.BF.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5"></span><span class="mw-headline" id="Резервное_копирование">Резервное копирование</span>
</h3>
<p>Регулярно создавайте резервные копии важных данных. Регулярно проверяйте целостность резервных копий. Регулярно проверяйте, что резервные копии всё ещё пригодны для восстановления данных.
</p>
<p>Убедитесь, что как минимум одна копия данных хранится офлайн, то есть не подключена к целевой системе, которая может быть атакована. <a href="https://en.wikipedia.org/wiki/Ransomware" class="extiw" title="wikipedia:Ransomware">Ransomware</a> и некоторые другие атаки могут воздайствовать также и на любые подключённые к цели системы резервного копирования.
</p>
<h2>
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B8_.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D1.8F"></span><span class="mw-headline" id="Настройки_пользователя">Настройки пользователя</span>
</h2>
<h3>
<span id=".D0.9D.D0.B5_.D0.B8.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D1.83.D0.B9.D1.82.D0.B5_root-.D0.B0.D0.BA.D0.BA.D0.B0.D1.83.D0.BD.D1.82_.D0.B4.D0.BB.D1.8F_.D0.BF.D0.BE.D0.B2.D1.81.D0.B5.D0.B4.D0.BD.D0.B5.D0.B2.D0.BD.D1.8B.D1.85_.D0.BD.D1.83.D0.B6.D0.B4"></span><span class="mw-headline" id="Не_используйте_root-аккаунт_для_повседневных_нужд">Не используйте root-аккаунт для повседневных нужд</span>
</h3>
<p>В соответствии с принципом наименьших привилегий не следует использовать root-аккаунт в обычном рабочем процессе. Создайте по одному непривилегированному пользователю для каждого человека, который работает с системой. Используйте <a href="/title/Sudo_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)" title="Sudo (Русский)">sudo</a> для временного привилегированного доступа, если это необходимо.
</p>
<h3>
<span id=".D0.9F.D0.B0.D1.83.D0.B7.D0.B0_.D0.BF.D0.BE.D1.81.D0.BB.D0.B5_.D0.BD.D0.B5.D1.83.D0.B4.D0.B0.D1.87.D0.BD.D0.BE.D0.B9_.D0.BF.D0.BE.D0.BF.D1.8B.D1.82.D0.BA.D0.B8_.D0.B2.D1.85.D0.BE.D0.B4.D0.B0"></span><span class="mw-headline" id="Пауза_после_неудачной_попытки_входа">Пауза после неудачной попытки входа</span>
</h3>
<p>Добавьте следующую строку в файл <code>/etc/pam.d/system-login</code>, чтобы установить паузу в 4 секунды после неудачной попытки входа:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pam.d/system-login</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">auth optional pam_faildelay.so delay=4000000</pre>
<p>Здесь <code>4000000</code> — длительность паузы в микросекундах.
</p>
<h3>
<span id=".D0.91.D0.BB.D0.BE.D0.BA.D0.B8.D1.80.D0.BE.D0.B2.D0.BA.D0.B0_.D0.B8.D0.B7-.D0.B7.D0.B0_.D0.BD.D0.B5.D1.83.D0.B4.D0.B0.D1.87.D0.BD.D1.8B.D1.85_.D0.BF.D0.BE.D0.BF.D1.8B.D1.82.D0.BE.D0.BA_.D0.B2.D1.85.D0.BE.D0.B4.D0.B0"></span><span class="mw-headline" id="Блокировка_из-за_неудачных_попыток_входа">Блокировка из-за неудачных попыток входа</span>
</h3>
<p>Согласно настройкам <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pambase">pambase</a></span> по умолчанию, <code>pam_faillock.so</code> блокирует пользователя на 10 минут после трёх неудачных попыток входа в течение последней четверти часа (см. <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/67644">FS#67644</a>). Блокируется только аутентификация по паролю (например, <i>login</i> и <i>sudo</i>), вход через SSH по открытому ключу останется доступным. Чтобы предотвратить полный отказ в обслуживании, для суперпользователя такого рода блокировки отключены.
</p>
<p>Чтобы разблокировать пользователя, выполните:
</p>
<pre>$ faillock --reset --user <i>пользователь</i>
</pre>
<p>Механизм блокировки подразумевает наличие "пользовательского" файла в каталоге <code>/run/faillock/</code>. Если файл удалить или очистить, то пользователь будет разблокирован. Каталог принадлежит суперпользователю, а файлы — обычным пользователям, поэтому команда <code>faillock</code> просто удаляет содержимое файла, для чего права root не требуются.
</p>
<p>Настройки модуля <code>pam_faillock.so</code> находятся в файле <code>/etc/security/faillock.conf</code>. Параметры для настройки блокировок:
</p>
<ul>
<li>
<code>unlock_time</code> — продолжительность блокировки (в секундах, по умолчанию 10 минут).</li>
<li>
<code>fail_interval</code> — период, в течение которого неудачные попытки входа вызовут блокировку (в секундах, по умолчанию 15 минут).</li>
<li>
<code>deny</code> — количество неудачных попыток, необходимое для блокировки (по умолчанию — 3).</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> <code>deny = 0</code> отключит механизм блокировок.</div>
<p>Изменения вступают в силу сразу, перезагрузка не требуется. В руководстве <span class="plainlinks archwiki-template-man" title="$ man 5 faillock.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/faillock.conf.5">faillock.conf(5)</a></span> вы найдёте другие полезные опции: включение блокировки для root-аккаунта, отключение в случае централизованного входа (например, для LDAP) и т.д.
</p>
<h3>
<span id=".D0.9E.D0.B3.D1.80.D0.B0.D0.BD.D0.B8.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BD.D0.B0_.D0.BA.D0.BE.D0.BB.D0.B8.D1.87.D0.B5.D1.81.D1.82.D0.B2.D0.BE_.D0.BF.D1.80.D0.BE.D1.86.D0.B5.D1.81.D1.81.D0.BE.D0.B2"></span><span class="mw-headline" id="Ограничение_на_количество_процессов">Ограничение на количество процессов</span>
</h3>
<p>Если в системах с большим количеством пользователей (в том числе и недоверенных) важно ограничить число процессов, которое пользователь может запускать параллельно. Это помогает защититься от <a href="https://en.wikipedia.org/wiki/ru:fork-%D0%B1%D0%BE%D0%BC%D0%B1%D0%B0" class="extiw" title="wikipedia:ru:fork-бомба">fork-бомб</a> и других DoS-атак. Количество процессов, запускаемых пользователем или группой, определяется в файле <code>/etc/security/limits.conf</code>. Изначально в нём нет ничего, кроме комментариев. Добавьте следующие строки, чтобы ограничить количество процессов значением 100, кроме случаев, когда пользователь выполнил команду <code>prlimit</code>, чтобы повысить свой предел до 200 на время текущего сеанса.
</p>
<pre>* soft nproc 100
* hard nproc 200
</pre>
<p>Текущее число потков для каждого пользователя можно узнать командой <code>ps --no-headers -Leo user | sort | uniq --count</code>. Это позволит определить целесообразные значения пределов.
</p>
<h3>
<span id=".D0.97.D0.B0.D0.BF.D1.83.D1.81.D0.BA_Xorg_.D0.B1.D0.B5.D0.B7_root"></span><span class="mw-headline" id="Запуск_Xorg_без_root">Запуск Xorg без root</span>
</h3>
<p><a href="/title/Xorg_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)" title="Xorg (Русский)">Xorg</a> считается <a rel="nofollow" class="external text" href="https://security.stackexchange.com/questions/4641/why-are-people-saying-that-the-x-window-system-is-not-secure/4646#4646">небезопасным</a> из-за своей архитектуры и устаревшего дизайна. Не рекомендуется запускать его с правами суперпользователя.
</p>
<p>В статье <a href="/title/Xorg_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_Xorg_%D0%B1%D0%B5%D0%B7_%D0%BF%D1%80%D0%B0%D0%B2_%D1%81%D1%83%D0%BF%D0%B5%D1%80%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F" title="Xorg (Русский)">Xorg#Использование Xorg без прав суперпользователя</a> описано, как запустить Xorg без прав root. В качестве альтернативы можно вместо Xorg использовать <a href="/title/Wayland_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)" title="Wayland (Русский)">Wayland</a>.
</p>
<h2>
<span id=".D0.9E.D0.B3.D1.80.D0.B0.D0.BD.D0.B8.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_root"></span><span class="mw-headline" id="Ограничение_root">Ограничение root</span>
</h2>
<p>Суперпользователь обладает максимальными правами в системе. Стоит ввести для него некоторые ограничения, дабы уменьшить возможный причинённый ущерб или хотя бы сделать так, чтобы его действия было проще отслеживать.
</p>
<h3>
<span id="sudo_.D0.B2.D0.BC.D0.B5.D1.81.D1.82.D0.BE_su"></span><span class="mw-headline" id="sudo_вместо_su">sudo вместо su</span>
</h3>
<p>Причины, по которым лучше вместо <a href="/title/Su" title="Su">su</a> использовать для привилегированного доступа <a href="/title/Sudo_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)" title="Sudo (Русский)">sudo</a>, перечислены в статье <a href="/title/Su#Sudo,_an_alternative" title="Su">Su#Sudo, an alternative</a>. Например:
</p>
<ul>
<li>sudo ведёт лог привилегированных команд, запускаемых обычными пользователями;</li>
<li>не нужно выдавать пароль от root каждому пользователю;</li>
<li>поскольку полноценный root-терминал не создаётся, <code>sudo</code> не позволит пользователю случайно запустить команду с правами root, если в этом нет необходимости, что соответствует <a href="https://en.wikipedia.org/wiki/ru:%D0%9F%D1%80%D0%B8%D0%BD%D1%86%D0%B8%D0%BF_%D0%BC%D0%B8%D0%BD%D0%B8%D0%BC%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D1%85_%D0%BF%D1%80%D0%B8%D0%B2%D0%B8%D0%BB%D0%B5%D0%B3%D0%B8%D0%B9" class="extiw" title="wikipedia:ru:Принцип минимальных привилегий">принципу минимальных привилегий</a>.</li>
<li>можно разрешить использование отдельной программы отдельному пользователю вместо предоставления полного root-доступа для запуска этой же команды. Например, выдать пользователю <i>alice</i> доступ к конкретной программе можно следующим образом:</li>
</ul>
<pre># visudo
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sudoers</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">alice ALL = NOPASSWD: /путь/к/программе</pre>
<p>Либо же можно дать доступ к отдельной команде для всех пользователей. Настройки для разрешения обычным пользователям монтировать Samba-каталоги на удалённом сервере:
</p>
<pre>%users ALL=/sbin/mount.cifs,/sbin/umount.cifs
</pre>
<p>Теперь все пользователи из группы users смогут запускать команды <code>/sbin/mount.cifs</code> и <code>/sbin/umount.cifs</code> с любой машины (ALL).
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> 
<p>Для команды <code>visudo</code> лучше использовать не <code>vi</code>, а ограниченную версию редактора <code>nano</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sudoers</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Defaults editor=/usr/bin/rnano
</pre>
<p>Запуск команды с явным указанием переменной окружения <code>EDITOR=nano visudo</code> связан с некоторыми рисками безопасности, поскольку переменной <code>EDITOR</code> можно присвоить абсолютно любое значение.
</p>
</div>
<h4>
<span id=".D0.A0.D0.B5.D0.B4.D0.B0.D0.BA.D1.82.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D1.84.D0.B0.D0.B9.D0.BB.D0.BE.D0.B2_.D1.81_sudo"></span><span class="mw-headline" id="Редактирование_файлов_с_sudo">Редактирование файлов с sudo</span>
</h4>
<p>См. <a href="/title/Sudo#Editing_files" title="Sudo">Sudo#Editing files</a>. Используйте ограниченные версии редакторов <code>rvim</code> и <code>rnano</code>, которые можно безопасно запускать с правами root.
</p>
<h3>
<span id=".D0.9E.D0.B3.D1.80.D0.B0.D0.BD.D0.B8.D1.87.D0.B5.D0.BD.D0.B8.D1.8F_.D0.BD.D0.B0_.D0.B2.D1.85.D0.BE.D0.B4_.D0.B2_root"></span><span class="mw-headline" id="Ограничения_на_вход_в_root">Ограничения на вход в root</span>
</h3>
<p>После соответствующей настройки <a href="/title/Sudo_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)" title="Sudo (Русский)">sudo</a> полный root-доступ можно жестко ограничить или даже полностью запретить без вреда для работы системы. Чтобы заблокировать root (<a href="/title/Sudo_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)" title="Sudo (Русский)">sudo</a> всё равно будет работать), выполните команду <code>passwd --lock root</code>.
</p>
<h4>
<span id=".D0.94.D0.BE.D1.81.D1.82.D1.83.D0.BF_.D1.82.D0.BE.D0.BB.D1.8C.D0.BA.D0.BE_.D0.B4.D0.BB.D1.8F_.D0.BA.D0.BE.D0.BD.D0.BA.D1.80.D0.B5.D1.82.D0.BD.D1.8B.D1.85_.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D0.B5.D0.B9"></span><span class="mw-headline" id="Доступ_только_для_конкретных_пользователей">Доступ только для конкретных пользователей</span>
</h4>
<p><a href="/title/PAM" title="PAM">PAM</a>-модуль <code>pam_wheel.so</code> позволяет настроить доступ к <a href="/title/Su" title="Su">su</a> только для  пользователей из группы <code>wheel</code>. См. <a href="/title/Su#su_and_wheel" title="Su">su#su and wheel</a>.
</p>
<h4>
<span id=".D0.97.D0.B0.D0.BF.D1.80.D0.B5.D1.82_.D0.BD.D0.B0_.D0.B2.D1.85.D0.BE.D0.B4_.D0.BF.D0.BE_SSH"></span><span class="mw-headline" id="Запрет_на_вход_по_SSH">Запрет на вход по SSH</span>
</h4>
<p>Даже если вы не собираетесь запрещать локальным пользователям вход в root-аккаунт, имеет смысл всё же <a href="/title/OpenSSH_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)#%D0%9E%D1%82%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5" title="OpenSSH (Русский)">запретить вход в root по SSH</a>. Это не позволит полностью скомпроментировать вашу систему удалённо.
</p>
<h4>
<span id=".D0.9F.D0.B0.D1.80.D0.B0.D0.BC.D0.B5.D1.82.D1.80.D1.8B_.D0.B2.D1.85.D0.BE.D0.B4.D0.B0_.D0.B2_access.conf"></span><span class="mw-headline" id="Параметры_входа_в_access.conf">Параметры входа в access.conf</span>
</h4>
<p>Когда кто-то пытается выполнить вход с помощью <a href="/title/PAM" title="PAM">PAM</a>, файл <code>/etc/security/access.conf</code> просматривается в поисках первой комбинации, совпадающей с параметрами входа. Попытка считается успешной или неудачной в зависимости от настроек для совпавшей кобинации.
</p>
<pre>+:root:LOCAL
-:root:ALL
</pre>
<p>Правила могут задаваться для групп и для отдельных пользователей. В примере ниже пользователь archie может выполнять локальный вход, как и пользователи в группах wheel и adm. Все прочие попытки входа отклоняются:
</p>
<pre>+:archie:LOCAL
+:(wheel):LOCAL
+:(adm):LOCAL
-:ALL:ALL
</pre>
<p>Подробнее см. <span class="plainlinks archwiki-template-man" title="$ man 5 access.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/access.conf.5">access.conf(5)</a></span>.
</p>
<h2>
<span id=".D0.9C.D0.B0.D0.BD.D0.B4.D0.B0.D1.82.D0.BD.D0.BE.D0.B5_.D1.83.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B4.D0.BE.D1.81.D1.82.D1.83.D0.BF.D0.BE.D0.BC"></span><span class="mw-headline" id="Мандатное_управление_доступом">Мандатное управление доступом</span>
</h2>
<p><a href="https://en.wikipedia.org/wiki/ru:%D0%9C%D0%B0%D0%BD%D0%B4%D0%B0%D1%82%D0%BD%D0%BE%D0%B5_%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%BE%D0%BC" class="extiw" title="wikipedia:ru:Мандатное управление доступом">Мандатное управление доступом</a> (Mandatory access control, MAC) — политика безопасности, которая часто противопоставляется применяемой по умолчанию в большинстве дистрибутивов Linux, в том числе и в Arch, политике <a href="https://en.wikipedia.org/wiki/ru:%D0%98%D0%B7%D0%B1%D0%B8%D1%80%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE%D0%B5_%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%BE%D0%BC" class="extiw" title="wikipedia:ru:Избирательное управление доступом">избирательного управления доступом</a> (Discretionary access control, DAC). MAC означает, что каждое действие программы, любым образом влияющее на систему, проверяется на соответствие набору правил безопасности, причём обычные пользователи, в отличие от DAC, изменить этот набор правил не могут. Мандатная система управления доступом значительно повышает защищённость системы, хотя многое зависит от конкретной реализации.
</p>
<h3>
<span id="MAC_.D0.BD.D0.B0_.D0.BE.D1.81.D0.BD.D0.BE.D0.B2.D0.B5_.D0.BF.D1.83.D1.82.D0.B5.D0.B9_.D0.BA_.D1.84.D0.B0.D0.B9.D0.BB.D0.B0.D0.BC"></span><span class="mw-headline" id="MAC_на_основе_путей_к_файлам">MAC на основе путей к файлам</span>
</h3>
<p>Самая простая форма управления доступом — задание прав доступа на основе путей к файлам. Отрицательным моментом является то, что права доступа к файлу не исчезают при удалении файла из системы, позитивным — путевой MAC можно реализовать на широком диапазоне существующих файловых систем, чего не скажешь о MAC с использованием меток.
</p>
<ul>
<li>
<a href="/title/AppArmor" title="AppArmor">AppArmor</a> — реализация MAC, развиваемая компанией <a href="https://en.wikipedia.org/wiki/ru:Canonical" class="extiw" title="wikipedia:ru:Canonical">Canonical</a>. Позиционирует себя как  "лёгкая" альтернатива SELinux.</li>
<li>
<a href="/title/Tomoyo" class="mw-redirect" title="Tomoyo">Tomoyo</a> — ещё одна простая и удобная в использовании система MAC. Минималистичная реализация, требующая очень небольшого количества зависимостей.</li>
</ul>
<h3>
<span id="MAC_.D0.BD.D0.B0_.D0.BE.D1.81.D0.BD.D0.BE.D0.B2.D0.B5_.D0.BC.D0.B5.D1.82.D0.BE.D0.BA"></span><span class="mw-headline" id="MAC_на_основе_меток">MAC на основе меток</span>
</h3>
<p>Управление доступом с помощью меток подразумевает использование расширенного набора файловых атрибутов, с помощью которых задаются разрешения безопасности. Такая система более гибка, чем путевой MAC, но внедрить её можно только в файловых системах с поддержкой расширенных атрибутов.
</p>
<ul><li>В <a href="/title/SELinux" title="SELinux">SELinux</a>, проекте <a href="https://en.wikipedia.org/wiki/ru:%D0%90%D0%B3%D0%B5%D0%BD%D1%82%D1%81%D1%82%D0%B2%D0%BE_%D0%BD%D0%B0%D1%86%D0%B8%D0%BE%D0%BD%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D0%B9_%D0%B1%D0%B5%D0%B7%D0%BE%D0%BF%D0%B0%D1%81%D0%BD%D0%BE%D1%81%D1%82%D0%B8" class="extiw" title="wikipedia:ru:Агентство национальной безопасности">АНБ</a> по повышению безопасности Linux, MAC реализован полностью отдельно от пользователей и их ролей. Сверхнадёжная многоуровневая политика MAC обеспечивает удобное управление системой, в том числе и в случае её роста и модификации.</li></ul>
<h3>
<span id=".D0.A1.D0.BF.D0.B8.D1.81.D0.BA.D0.B8_.D1.83.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D1.8F_.D0.B4.D0.BE.D1.81.D1.82.D1.83.D0.BF.D0.BE.D0.BC"></span><span class="mw-headline" id="Списки_управления_доступом">Списки управления доступом</span>
</h3>
<p><a href="/title/Access_Control_Lists_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)" title="Access Control Lists (Русский)">Списки управления доступом</a> (Access Control Lists, ACL) — ещё один способ задания правил непосредственно в файловой системе. Управление доступом с помощью ACL подразумевает сравнение действий программ со списками разрешённого поведения.
</p>
<h2>
<span id=".D0.AF.D0.B4.D1.80.D0.BE"></span><span class="mw-headline" id="Ядро">Ядро</span>
</h2>
<h3>
<span id=".D0.91.D0.B5.D0.B7.D0.BE.D0.BF.D0.B0.D1.81.D0.BD.D0.BE.D0.B5_.D1.8F.D0.B4.D1.80.D0.BE_.D0.B8_.D0.B7.D0.B0.D1.89.D0.B8.D1.82.D0.B0_.D0.BE.D1.82_.D1.8D.D0.BA.D1.81.D0.BF.D0.BB.D0.BE.D0.B9.D1.82.D0.BE.D0.B2"></span><span class="mw-headline" id="Безопасное_ядро_и_защита_от_эксплойтов">Безопасное ядро и защита от эксплойтов</span>
</h3>
<p>По сравнению с базовым ядром <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span>, в пакете <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-hardened">linux-hardened</a></span> используется <a rel="nofollow" class="external text" href="https://github.com/anthraxx/linux-hardened">набор патчей безопасности ядра</a> и больше ориентированных на безопасность параметров компиляции. Если вы захотите изменить соотношение безопасность/производительность, то на базе этого пакета можно создать собственную сборку ядра.
</p>
<p>Следует однако учитывать, что некоторые пакеты отказываются работать с этой версией ядра. Например:
</p>
<ul>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/skypeforlinux-preview-bin/">skypeforlinux-preview-bin</a></span><sup><small>AUR</small></sup>
</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/skypeforlinux-stable-bin/">skypeforlinux-stable-bin</a></span><sup><small>AUR</small></sup>
</li>
<li><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=throttled">throttled</a></span></li>
</ul>
<p>Если ваш драйвер (например, для <a href="/title/NVIDIA_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)" title="NVIDIA (Русский)">NVIDIA</a>) не входит в дерево исходников ядра, возможно, придётся переключиться на его <a href="/title/Dynamic_Kernel_Module_Support_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)" title="Dynamic Kernel Module Support (Русский)">DKMS</a>-версию.
</p>
<h4>
<span id=".D0.9F.D1.80.D0.BE.D0.B2.D0.B5.D1.80.D0.BA.D0.B0_ASLR_.D0.BF.D1.80.D0.BE.D1.81.D1.82.D1.80.D0.B0.D0.BD.D1.81.D1.82.D0.B2.D0.B0_.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D1.8F"></span><span class="mw-headline" id="Проверка_ASLR_пространства_пользователя">Проверка ASLR пространства пользователя</span>
</h4>
<p>В пакете <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-hardened">linux-hardened</a></span> представлена улучшенная версия Address Space Layout Randomization (ASLR) для процессов в пространстве пользователя. Команда <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=paxtest">paxtest</a></span> позволяет оценить уровень энтропии.
</p>
<h5>
<span id="64-.D0.B1.D0.B8.D1.82.D0.BD.D1.8B.D0.B5_.D0.BF.D1.80.D0.BE.D1.86.D0.B5.D1.81.D1.81.D1.8B"></span><span class="mw-headline" id="64-битные_процессы">64-битные процессы</span>
</h5>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">linux-hardened 5.4.21.a-1-hardened</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Anonymous mapping randomization test     : 32 quality bits (guessed)
Heap randomization test (ET_EXEC)        : 40 quality bits (guessed)
Heap randomization test (PIE)            : 40 quality bits (guessed)
Main executable randomization (ET_EXEC)  : 32 quality bits (guessed)
Main executable randomization (PIE)      : 32 quality bits (guessed)
Shared library randomization test        : 32 quality bits (guessed)
VDSO randomization test                  : 32 quality bits (guessed)
Stack randomization test (SEGMEXEC)      : 40 quality bits (guessed)
Stack randomization test (PAGEEXEC)      : 40 quality bits (guessed)
Arg/env randomization test (SEGMEXEC)    : 44 quality bits (guessed)
Arg/env randomization test (PAGEEXEC)    : 44 quality bits (guessed)
Offset to library randomisation (ET_EXEC): 34 quality bits (guessed)
Offset to library randomisation (ET_DYN) : 34 quality bits (guessed)
Randomization under memory exhaustion @~0: 32 bits (guessed)
Randomization under memory exhaustion @0 : 32 bits (guessed)
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">linux 5.5.5-arch1-1</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Anonymous mapping randomization test     : 28 quality bits (guessed)
Heap randomization test (ET_EXEC)        : 28 quality bits (guessed)
Heap randomization test (PIE)            : 28 quality bits (guessed)
Main executable randomization (ET_EXEC)  : 28 quality bits (guessed)
Main executable randomization (PIE)      : 28 quality bits (guessed)
Shared library randomization test        : 28 quality bits (guessed)
VDSO randomization test                  : 20 quality bits (guessed)
Stack randomization test (SEGMEXEC)      : 30 quality bits (guessed)
Stack randomization test (PAGEEXEC)      : 30 quality bits (guessed)
Arg/env randomization test (SEGMEXEC)    : 22 quality bits (guessed)
Arg/env randomization test (PAGEEXEC)    : 22 quality bits (guessed)
Offset to library randomisation (ET_EXEC): 28 quality bits (guessed)
Offset to library randomisation (ET_DYN) : 28 quality bits (guessed)
Randomization under memory exhaustion @~0: 29 bits (guessed)
Randomization under memory exhaustion @0 : 29 bits (guessed)
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">linux-lts 4.19.101-1-lts</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Anonymous mapping randomization test     : 28 quality bits (guessed)
Heap randomization test (ET_EXEC)        : 28 quality bits (guessed)
Heap randomization test (PIE)            : 28 quality bits (guessed)
Main executable randomization (ET_EXEC)  : 28 quality bits (guessed)
Main executable randomization (PIE)      : 28 quality bits (guessed)
Shared library randomization test        : 28 quality bits (guessed)
VDSO randomization test                  : 19 quality bits (guessed)
Stack randomization test (SEGMEXEC)      : 30 quality bits (guessed)
Stack randomization test (PAGEEXEC)      : 30 quality bits (guessed)
Arg/env randomization test (SEGMEXEC)    : 22 quality bits (guessed)
Arg/env randomization test (PAGEEXEC)    : 22 quality bits (guessed)
Offset to library randomisation (ET_EXEC): 28 quality bits (guessed)
Offset to library randomisation (ET_DYN) : 28 quality bits (guessed)
Randomization under memory exhaustion @~0: 28 bits (guessed)
Randomization under memory exhaustion @0 : 28 bits (guessed)
</pre>
<h5>
<span id="32-.D0.B1.D0.B8.D1.82.D0.BD.D1.8B.D0.B5_.D0.BF.D1.80.D0.BE.D1.86.D0.B5.D1.81.D1.81.D1.8B_.28.D0.B4.D0.BB.D1.8F_.D1.8F.D0.B4.D1.80.D0.B0_x86_64.29"></span><span class="mw-headline" id="32-битные_процессы_(для_ядра_x86_64)">32-битные процессы (для ядра x86_64)</span>
</h5>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">linux-hardened</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Anonymous mapping randomization test     : 16 quality bits (guessed)
Heap randomization test (ET_EXEC)        : 22 quality bits (guessed)
Heap randomization test (PIE)            : 27 quality bits (guessed)
Main executable randomization (ET_EXEC)  : No randomization
Main executable randomization (PIE)      : 18 quality bits (guessed)
Shared library randomization test        : 16 quality bits (guessed)
VDSO randomization test                  : 16 quality bits (guessed)
Stack randomization test (SEGMEXEC)      : 24 quality bits (guessed)
Stack randomization test (PAGEEXEC)      : 24 quality bits (guessed)
Arg/env randomization test (SEGMEXEC)    : 28 quality bits (guessed)
Arg/env randomization test (PAGEEXEC)    : 28 quality bits (guessed)
Offset to library randomisation (ET_EXEC): 18 quality bits (guessed)
Offset to library randomisation (ET_DYN) : 16 quality bits (guessed)
Randomization under memory exhaustion @~0: 18 bits (guessed)
Randomization under memory exhaustion @0 : 18 bits (guessed)
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">linux</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Anonymous mapping randomization test     : 8 quality bits (guessed)
Heap randomization test (ET_EXEC)        : 13 quality bits (guessed)
Heap randomization test (PIE)            : 13 quality bits (guessed)
Main executable randomization (ET_EXEC)  : No randomization
Main executable randomization (PIE)      : 8 quality bits (guessed)
Shared library randomization test        : 8 quality bits (guessed)
VDSO randomization test                  : 8 quality bits (guessed)
Stack randomization test (SEGMEXEC)      : 19 quality bits (guessed)
Stack randomization test (PAGEEXEC)      : 19 quality bits (guessed)
Arg/env randomization test (SEGMEXEC)    : 11 quality bits (guessed)
Arg/env randomization test (PAGEEXEC)    : 11 quality bits (guessed)
Offset to library randomisation (ET_EXEC): 8 quality bits (guessed)
Offset to library randomisation (ET_DYN) : 13 quality bits (guessed)
Randomization under memory exhaustion @~0: No randomization
Randomization under memory exhaustion @0 : No randomization
</pre>
<h3>
<span id=".D0.9E.D0.B3.D1.80.D0.B0.D0.BD.D0.B8.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B4.D0.BE.D1.81.D1.82.D1.83.D0.BF.D0.B0_.D0.BA_.D0.BB.D0.BE.D0.B3.D0.B0.D0.BC_.D1.8F.D0.B4.D1.80.D0.B0"></span><span class="mw-headline" id="Ограничение_доступа_к_логам_ядра">Ограничение доступа к логам ядра</span>
</h3>
<p>Логи ядра содержат ценную информацию (например, критичные для системы адреса памяти), с помощью которой атакующий может создать эксплойт. Флаг <code>kernel.dmesg_restrict</code> запрещает доступ к логам для процессов без <a href="/title/Capabilities" title="Capabilities">capability</a> <code>CAP_SYS_ADMIN</code> (которая по умолчанию есть только у процессов, запущенных от root).
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sysctl.d/51-dmesg-restrict.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">kernel.dmesg_restrict = 1</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> В ядре <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-hardened">linux-hardened</a></span> этот флаг включён по умолчанию.</div>
<h3>
<span id=".D0.9E.D0.B3.D1.80.D0.B0.D0.BD.D0.B8.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B4.D0.BE.D1.81.D1.82.D1.83.D0.BF.D0.B0_.D0.BA_.D1.83.D0.BA.D0.B0.D0.B7.D0.B0.D1.82.D0.B5.D0.BB.D1.8F.D0.BC_.D1.8F.D0.B4.D1.80.D0.B0_.D0.B2_.D1.84.D0.B0.D0.B9.D0.BB.D0.BE.D0.B2.D0.BE.D0.B9_.D1.81.D0.B8.D1.82.D0.B5.D0.BC.D0.B5_.2Fproc"></span><span class="mw-headline" id="Ограничение_доступа_к_указателям_ядра_в_файловой_ситеме_/proc">Ограничение доступа к указателям ядра в файловой ситеме /proc</span>
</h3>
<p>Если установить параметр <code>kernel.kptr_restrict</code> в значение 1, то адреса символов ядра в файле <code>/proc/kallsyms</code> будут скрыты от обычных пользователей без <i>capability</i> <code>CAP_SYSLOG</code>. Это усложнит динамическое разрешение адресов/символов в эксплойтов ядра. В случае предварительно скомпилированного ядра Arch это поможет слабо, поскольку атакующий просто скачает пакет ядра и вручную найдёт нужные адреса, но для пользовательских сборок этот флаг даёт защиту от локальных root-эксплойтов. Учтите, что это "сломает" некоторые команды <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=perf">perf</a></span>, запускаемые от обычного пользователя (впрочем, для большинства команд <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=perf">perf</a></span> всё равно нужны права root). Поробнее см. <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/34323">FS#34323</a>.
</p>
<p>Если установить <code>kernel.kptr_restrict</code> в значение 2, то адреса в файле <code>/proc/kallsyms</code> будут скрыты вне зависимости от привилегий.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sysctl.d/51-kptr-restrict.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">kernel.kptr_restrict = 1</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> В <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-hardened">linux-hardened</a></span> по умолчанию используется значение <code>kptr_restrict=2</code>.</div>
<h3>
<span id=".D0.97.D0.B0.D1.89.D0.B8.D1.82.D0.B0_BPF"></span><span class="mw-headline" id="Защита_BPF">Защита BPF</span>
</h3>
<p>BPF — система динамической загрузки байткода в ядро и его исполнения. Используется некоторыми подсистемами ядра, такими как сетевой стек (XDP, tc), трассировка (kprobes, uprobes, tracepoints) и безопасность (seccomp). Также полезна при построении систем продвинутой сетевой безопасности, повышении производительности и динамической трассировке.
</p>
<p>Первоначально аббревиатура BPF означала <a href="https://en.wikipedia.org/wiki/ru:Berkeley_Packet_Filter" class="extiw" title="wikipedia:ru:Berkeley Packet Filter">Berkeley Packet Filter</a>, поскольку оригинальный "классический" BPF использовался в инструментах перехвата пакетов в операционной системе BSD. Со временем проект трансформировался в Extended BPF (eBPF), который вскоре снова был переименован обратно в BPF (уже не аббревиатура). Важно не путать BPF с инструментами фильтрации пакетов вроде iptables и netfilter, хотя в принципе BPF может использоваться и для создания таких программ.
</p>
<p>Код BPF может как интерпретироваться, так и компилироваться с помощью <a href="https://en.wikipedia.org/wiki/ru:JIT-%D0%BA%D0%BE%D0%BC%D0%BF%D0%B8%D0%BB%D1%8F%D1%86%D0%B8%D1%8F" class="extiw" title="wikipedia:ru:JIT-компиляция">JIT-компиляции</a>. Ядро Arch собирается с флагом <code>CONFIG_BPF_JIT_ALWAYS_ON</code>, который отключает BPF-интерпретатор, поэтому BPF работает только через JIT-компиляцию. В результате атакующему сложнее использовать BPF для атак на уязвимости типа SPECTRE. Подробнее см. <a rel="nofollow" class="external text" href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=290af86629b25ffd1ed6232c4e9107da031705cb">описание патча</a>, в котором был впервые введён флаг <code>CONFIG_BPF_JIT_ALWAYS_ON</code>.
</p>
<p>В ядре есть встроенные возможности для JIT-скомпилированного BPF, которые защищают от некоторых JIT-spraying атак ценой снижения производительности, а также позволяют выполнять трассировку и отладку BPF-программ. Они включаются флагом <code>net.core.bpf_jit_harden</code>, который установливается в значение <code>1</code> для защиты непривилегированного кода, или в значение <code>2</code>, если необходимо защитить весь код.
</p>
<p>Настройки <code>net.core.bpf_*</code> смотрите в <a rel="nofollow" class="external text" href="https://www.kernel.org/doc/html/latest/admin-guide/sysctl/net.html">документации ядра</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> В ядре <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-hardened">linux-hardened</a></span> по умолчанию установлено значение <code>net.core.bpf_jit_harden=2</code>.</div>
<h3>
<span id=".D0.97.D0.BE.D0.BD.D0.B0_.D0.B4.D0.BE.D1.81.D1.82.D1.83.D0.BF.D0.B0_ptrace"></span><span class="mw-headline" id="Зона_доступа_ptrace">Зона доступа ptrace</span>
</h3>
<p>Системный вызов <span class="plainlinks archwiki-template-man" title="$ man 2 ptrace"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/ptrace.2">ptrace(2)</a></span> позволяет одному процессу ("трассировщику") наблюдать за выполнением другого процесса, управлять им, а также получить доступ к его памяти и регистрам. Вызов <code>ptrace</code> обычно используется в программах-отладчиках вроде <i>gdb</i>, <i>strace</i>, <i>perf</i> или <i>reptyr</i>. Тем не менее, вредоносные программы с помощью данного системного вызова также могут получать доступ к данным и перехватывать управление процессами.
</p>
<p>В Arch по умолчанию включён модуль <a rel="nofollow" class="external text" href="https://www.kernel.org/doc/html/latest/admin-guide/LSM/Yama.html">Yama LSM</a>, в котором задан <a href="/title/Kernel_parameters" title="Kernel parameters">параметр ядра</a> <code>kernel.yama.ptrace_scope</code>. Параметр установлен в значение <code>1</code> (restricted), что не даёт трассировщику выполнять вызов <code>ptrace</code> вне определённой зоны доступа. Исключение составляют только трассировщики, запущенные в привилегированном режиме или с <a href="/title/Capabilities" title="Capabilities">capability</a> <code>CAP_SYS_PTRACE</code>. Это значительно повышает защищённость системы по сравнению с обычными настройками. Без данного модуля по сути нет никакого барьера между процессами, запущенными одним пользователем, поскольку не создаются дополнительные слои безопасности вроде <span class="plainlinks archwiki-template-man" title="$ man 7 pid_namespaces"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pid_namespaces.7">pid_namespaces(7)</a></span>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Программы, использующие системный вызов <code>ptrace</code>, всё ещё можно будет запускать в привилегированном режиме, например, с помощью <a href="/title/Sudo_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)" title="Sudo (Русский)">sudo</a>.
</div>
<p>Если вы не планируете использовать отладчики, то имеет смысл установить <code>kernel.yama.ptrace_scope</code> в значение <code>2</code> (<code>ptrace</code> доступен только администраторам) или <code>3</code> (полный запрет).
</p>
<h3><span class="mw-headline" id="hidepid">hidepid</span></h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> 
<ul>
<li>Могут возникнуть проблемы с некоторыми приложениями при запуске их в песочнице, а также с <a href="/title/Xorg_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)" title="Xorg (Русский)">Xorg</a> (существует обходное решение).</li>
<li>При использовании <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=systemd">systemd</a></span> версии &gt; 237.64-1 возникают проблемы с <a href="/title/D-Bus" title="D-Bus">D-Bus</a>, <a href="/title/PulseAudio_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)" title="PulseAudio (Русский)">PulseAudio</a> и <a href="/title/Bluetooth_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)" title="Bluetooth (Русский)">Bluetooth</a>.</li>
</ul>
</div>
<p>В ядре предусмотрена возможность скрыть процессы, обычно отображаемые в файловой системе <code>/proc</code>, от непривилегированных пользователей. Для этого необходимо смонтировать данную ФС с флагами <code>hidepid=</code> и <code>gid=</code>. Подробнее см. <a rel="nofollow" class="external text" href="https://www.kernel.org/doc/html/latest/filesystems/proc.html">документацию ядра</a>.
</p>
<p>Такой подход значительно усложняет атакующему сбор информации о системе. Например, будет недоступна информация о запущенных процессах, о работающих с повышенными привилегиями демонах, о том, запускают ли пользователи определённые программы и запускают ли хоть какие-то программы вообще. Кроме случая, когда программа выдаст себя своим поведением, невозможно будет понять, использует ли её конкретный пользователь. Наконец, как дополнительный бонус, если программа плохо спроектирована и использует ввод важных данных через аргументы командной строки, то её будет невозможно "подслушать".
</p>
<p><a href="/title/%D0%9F%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D0%B8_%D0%B8_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D1%8B#%D0%A1%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BD%D1%8B%D0%B5_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D1%8B" class="mw-redirect" title="Пользователи и группы">Группа</a> <code>proc</code>, входящая в пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=filesystem">filesystem</a></span>, Представляет собой "белый список" пользователей, которые могут видеть информацию о процессах других пользователей. Если необходимо предоставить какому-то пользователю или службе доступ в каталоги <code>/proc/&lt;pid&gt;</code>, то <a href="/title/%D0%9F%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D0%B8_%D0%B8_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D1%8B#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D0%B0%D0%BC%D0%B8" class="mw-redirect" title="Пользователи и группы">добавьте его</a> в эту группу.
</p>
<p>iНапример, настройки монтирования, при которых информацию о процессах будут видеть только пользователи в группе <code>proc</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/fstab</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">proc    /proc    proc    nosuid,nodev,noexec,hidepid=2,gid=proc    0    0</pre>
<p>Для корректной работы сеансов необходимо добавить исключение в настройки <i>systemd-logind</i>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/systemd-logind.service.d/hidepid.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
SupplementaryGroups=proc</pre>
<h3>
<span id=".D0.9E.D0.B3.D1.80.D0.B0.D0.BD.D0.B8.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B8_.D0.BC.D0.BE.D0.B4.D1.83.D0.BB.D0.B5.D0.B9"></span><span class="mw-headline" id="Ограничение_загрузки_модулей">Ограничение загрузки модулей</span>
</h3>
<p>В базовом ядре Arch включён флаг <code>CONFIG_MODULE_SIG_ALL</code>, что подразумевает обязательное наличие подписи у модулей, входящих в пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span>. Это даёт возможность ограничить загрузку модулей, чтобы загружались только те из них, у которых имеется действительная подпись. На практике это означает, что модули не из ядра, например, скомпилированные локально или входящие в сторонние пакеты вроде <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virtualbox-host-modules-arch">virtualbox-host-modules-arch</a></span>, загружаться не будут. Ограничение вводится  <a href="/title/Kernel_parameters" title="Kernel parameters">параметром ядра</a> <code>module.sig_enforce=1</code>. Подробнее см. <a rel="nofollow" class="external text" href="https://www.kernel.org/doc/html/latest/admin-guide/module-signing.html">документацию ядра</a>.
</p>
<h3>
<span id=".D0.9E.D1.82.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_kexec"></span><span class="mw-headline" id="Отключение_kexec">Отключение kexec</span>
</h3>
<p>Kexec позволяет "подменить" работающее в настоящий момент ядро.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sysctl.d/51-kexec-restrict.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">kernel.kexec_load_disabled = 1</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> В ядре <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-hardened">linux-hardened</a></span> kexec по умолчанию отключён.</div>
<h3>
<span id="Lockdown-.D1.80.D0.B5.D0.B6.D0.B8.D0.BC"></span><span class="mw-headline" id="Lockdown-режим">Lockdown-режим</span>
</h3>
<p>С версии 5.4 в ядро <a rel="nofollow" class="external text" href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=aefcf2f4b58155d27340ba5f9ddbe9513da8286d">добавлен</a> режим <a rel="nofollow" class="external text" href="https://mjg59.dreamwidth.org/55105.html">lockdown</a>, который позволяет создать дополнительный барьер безопасности между ядром и суперпользователем. При этом некоторые приложения, полагающиеся на низкоуровневый доступ к аппаратуре или ядру, могут перестать работать.
</p>
<p>Для работы в lockdown-режиме необходимо выбрать его тип и инициализировать модули LSM.
</p>
<p>Все <a href="/title/Kernel_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)#%D0%9E%D1%84%D0%B8%D1%86%D0%B8%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5_%D1%8F%D0%B4%D1%80%D0%B0" title="Kernel (Русский)">официально поддерживаемые ядра</a> инициализируют LSM-модули, но сам режим не включают.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> Командой <code>cat /sys/kernel/security/lsm</code> можно вывести список активных LSM-модулей.</div>
<p>Существует два типа lockdown-режима:
</p>
<ul>
<li>
<code>integrity</code>: отключены возможности, которые позволяют пользователю модифицировать запущенное ядро (kexec, bpf).</li>
<li>
<code>confidentiality</code>: также отключены возможности, которые позволяют пользователю извлечь из ядра конфиденциальную информацию.</li>
</ul>
<p>Для включения lockdown-режима во время выполнения (runtime) выполните:
</p>
<pre># echo <i>режим</i> &gt; /sys/kernel/security/lockdown
</pre>
<p>Чтобы  ядро запускалось в lockdown-режиме при загрузке, используйте <a href="/title/Kernel_parameters" title="Kernel parameters">параметр ядра</a> <code>lockdown=<i>режим</i></code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> 
<ul>
<li>Отключить lockdown-режим во время выполнения невозможно.</li>
<li>В lockdown-режиме не работает <a href="/title/Power_management_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)/Suspend_and_hibernate_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)#%D0%93%D0%B8%D0%B1%D0%B5%D1%80%D0%BD%D0%B0%D1%86%D0%B8%D1%8F" title="Power management (Русский)/Suspend and hibernate (Русский)">гибернация</a>.</li>
</ul>
</div>
<p>См. также <span class="plainlinks archwiki-template-man" title="$ man 7 kernel_lockdown"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/kernel_lockdown.7">kernel_lockdown(7)</a></span>.
</p>
<h2>
<span id=".D0.97.D0.B0.D0.BF.D1.83.D1.81.D0.BA_.D0.BF.D1.80.D0.B8.D0.BB.D0.BE.D0.B6.D0.B5.D0.BD.D0.B8.D0.B9_.D0.B2_.D0.BF.D0.B5.D1.81.D0.BE.D1.87.D0.BD.D0.B8.D1.86.D0.B5"></span><span class="mw-headline" id="Запуск_приложений_в_песочнице">Запуск приложений в песочнице</span>
</h2>
<p>См. также статью <a href="https://en.wikipedia.org/wiki/ru:%D0%9F%D0%B5%D1%81%D0%BE%D1%87%D0%BD%D0%B8%D1%86%D0%B0_(%D0%B1%D0%B5%D0%B7%D0%BE%D0%BF%D0%B0%D1%81%D0%BD%D0%BE%D1%81%D1%82%D1%8C)" class="extiw" title="wikipedia:ru:Песочница (безопасность)">Песочница</a> в Википедии.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Опция работы с <i>namespace</i> для пользователей (<code>CONFIG_USER_NS</code>) в настоящее время включена в ядрах <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span> (4.14.5 и позднее), <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-lts">linux-lts</a></span> (4.14.15 и позднее), <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-zen">linux-zen</a></span> (4.14.4-2 и позднее) и <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-hardened">linux-hardened</a></span>. Её отсутствие может повлиять на доступность для приложений некоторой фукциональности песочниц.
</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Опция работы с <i>namespace</i> для непривилегированных пользователей (<code>CONFIG_USER_NS_UNPRIVILEGED</code>) по умолчанию включена в ядрах <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span> (5.1.8 и позднее), <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-lts">linux-lts</a></span> (4.19.55-2 и позднее) и <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-zen">linux-zen</a></span> (5.1.14.zen1-2 и позднее). Для её отключения необходимо с помощью <a href="/title/Sysctl" title="Sysctl">sysctl</a> установить <a href="/title/Kernel_parameters" title="Kernel parameters">параметр ядра</a> <code>kernel.unprivileged_userns_clone</code> в значение <code>0</code>. Будучи разрешённой, данная возможность существенно увеличивает поверхность атаки в плане локальной эскалации привилегий, поэтому настоятельно рекомендуется отключить её вручную или использовать ядро <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-hardened">linux-hardened</a></span>. Подробнее см. <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/36969">FS#36969</a>.
</div>
<h3><span class="mw-headline" id="Firejail">Firejail</span></h3>
<p><a href="/title/Firejail" title="Firejail">Firejail</a> — удобный инструмент для запуска приложений и серверов в песочнице. Рекомендован для браузеров и подключённых к сети приложений, а также любых серверов.
</p>
<h3><span class="mw-headline" id="bubblewrap">bubblewrap</span></h3>
<p><a href="/title/Bubblewrap" title="Bubblewrap">bubblewrap</a> — песочница, разработанная на основе <a href="https://en.wikipedia.org/wiki/ru:Flatpak" class="extiw" title="wikipedia:ru:Flatpak">Flatpak</a>, причём с потреблением памяти даже меньшим, чем у Firejail. В bubblewrap не хватает некоторых возможностей, вроде списков разрешённых путей к файлам; тем не менее, в нём реализованы  bind-монтирование,  создание user/IPC/PID/network/cgroup <i>namespaces</i>, а также поддержка как простых, так и сложных песочниц.
</p>
<h3><span class="mw-headline" id="chroot">chroot</span></h3>
<p>Приложения можно запускать в созданном вручную <a href="/title/Chroot_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)" title="Chroot (Русский)">chroot</a>-окружении.
</p>
<h3><span class="mw-headline" id="Linux_containers">Linux containers</span></h3>
<p><a href="/title/Linux_Containers" title="Linux Containers">Linux Containers</a> — ещё один неплохой способ изоляции приложений, особенно когда вы нуждаетесь в большем разделении, чем предлагается в других программах виртуализации (вроде KVM или VirtualBox). LXC запускается поверх существующего ядра в псевдо-chroot окружении с собственным виртуальным аппаратным обеспечением.
</p>
<h3>
<span id=".D0.9F.D1.80.D0.BE.D1.87.D0.B8.D0.B5_.D1.81.D0.BF.D0.BE.D1.81.D0.BE.D0.B1.D1.8B_.D0.B2.D0.B8.D1.80.D1.82.D1.83.D0.B0.D0.BB.D0.B8.D0.B7.D0.B0.D1.86.D0.B8.D0.B8"></span><span class="mw-headline" id="Прочие_способы_виртуализации">Прочие способы виртуализации</span>
</h3>
<p>Программы полной виртуализации вроде <a href="/title/VirtualBox_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)" title="VirtualBox (Русский)">VirtualBox</a>, <a href="/title/KVM" title="KVM">KVM</a>, <a href="/title/Xen" title="Xen">Xen</a> или <a rel="nofollow" class="external text" href="https://www.qubes-os.org/">Qubes OS</a> (основанной на Xen) помогают повысить изолированность и безопасность при запуске небезопасного приложения или при переходе в браузере на подозрительные веб-сайты.
</p>
<h2>
<span id=".D0.A1.D0.B5.D1.82.D1.8C_.D0.B8_.D0.BC.D0.B5.D0.B6.D1.81.D0.B5.D1.82.D0.B5.D0.B2.D1.8B.D0.B5_.D1.8D.D0.BA.D1.80.D0.B0.D0.BD.D1.8B"></span><span class="mw-headline" id="Сеть_и_межсетевые_экраны">Сеть и межсетевые экраны</span>
</h2>
<h3>
<span id=".D0.9C.D0.B5.D0.B6.D1.81.D0.B5.D1.82.D0.B5.D0.B2.D1.8B.D0.B5_.D1.8D.D0.BA.D1.80.D0.B0.D0.BD.D1.8B"></span><span class="mw-headline" id="Межсетевые_экраны">Межсетевые экраны</span>
</h3>
<p>Утилиты <a href="/title/Iptables_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)" title="Iptables (Русский)">iptables</a> и <a href="/title/Nftables_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)" title="Nftables (Русский)">nftables</a> — два фронт-энда для встроенного в ядро Linux межсетевого экрана <a href="https://en.wikipedia.org/wiki/ru:Netfilter" class="extiw" title="wikipedia:ru:Netfilter">Netfilter</a>. По умолчанию они не включены. Для защиты работающих в системе служб рекомендуется настроить и запустить межсетевой экран — как правило, в разного рода руководствах нет указаний по защите отдельных служб, зато межсетевой экран предоставляет комплексную и надёжную защиту.
</p>
<ul>
<li>В статьях <a href="/title/Iptables_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)" title="Iptables (Русский)">iptables</a> и <a href="/title/Nftables_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)" title="Nftables (Русский)">nftables</a> вы найдёте общую информацию о работе межсетевых экранов.</li>
<li>В статье <a href="/title/%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_%D0%BC%D0%B5%D0%B6%D1%81%D0%B5%D1%82%D0%B5%D0%B2%D0%BE%D0%B3%D0%BE_%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0" class="mw-redirect" title="Настройка межсетевого экрана">Настройка межсетевого экрана</a> приведено руководство по настройке экрана iptables.</li>
<li>В статьях из категории <a href="/title/Category:Firewalls_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)" title="Category:Firewalls (Русский)">Firewalls</a> можно найти другие способы работы с netfilter.</li>
<li>В статье <a href="/title/Ipset" title="Ipset">Ipset</a> описываются способы блокировки списков IP-адресов.</li>
</ul>
<h4>
<span id=".D0.9E.D1.82.D0.BA.D1.80.D1.8B.D1.82.D1.8B.D0.B5_.D0.BF.D0.BE.D1.80.D1.82.D1.8B"></span><span class="mw-headline" id="Открытые_порты">Открытые порты</span>
</h4>
<p>Службы часто прослушивают открытые сетевые порты в ожидании входящего трафика. Атакующий может удалённо <a rel="nofollow" class="external text" href="https://samy.pl/slipstream/">эксплуатировать уязвимости в сетевых протоколах и службах</a>, поэтому привязывать службы к адресам и интерфейсам следует только в том случае, если это действительно необходимо для их функционирования. Более того, это касается даже <a rel="nofollow" class="external text" href="https://nvd.nist.gov/vuln/detail/CVE-2019-13450">процессов, привязанных к localhost</a>.
</p>
<p>Если служба не требует доступа в сеть, то её можно привязать либо к сокету Unix (см. <span class="plainlinks archwiki-template-man" title="$ man 7 unix"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/unix.7">unix(7)</a></span>), либо к адресу петлевого интерфейса вида  <code>localhost</code> (но не к непетлевому ядресу <code>0.0.0.0/0</code>).
</p>
<p>Если же службе требуется устанавливать сетевое соединение с внешними системами, то необходимо соответствующим образом настроить <a href="/title/%D0%9C%D0%B5%D0%B6%D1%81%D0%B5%D1%82%D0%B5%D0%B2%D0%BE%D0%B9_%D1%8D%D0%BA%D1%80%D0%B0%D0%BD" class="mw-redirect" title="Межсетевой экран">межсетевой экран</a>, а также аутентификацию, авторизацию и шифрование, где это возможно.
</p>
<p>Вывести список открытых портов можно командой <code>ss -l</code>. Чтобы вывести список процессов, прослушивающий определённый TCP- или UDP-порт, выполните:
</p>
<pre># ss -lpntu
</pre>
<p>Подробнее см. <span class="plainlinks archwiki-template-man" title="$ man 8 ss"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/ss.8">ss(8)</a></span>.
</p>
<h3>
<span id=".D0.9F.D0.B0.D1.80.D0.B0.D0.BC.D0.B5.D1.82.D1.80.D1.8B_.D1.8F.D0.B4.D1.80.D0.B0"></span><span class="mw-headline" id="Параметры_ядра">Параметры ядра</span>
</h3>
<p>Параметры ядра, относящиеся к взаимодействию с сетью, можно настроить утилитой <a href="/title/Sysctl" title="Sysctl">sysctl</a>. Подробнее см. <a href="/title/Sysctl#TCP/IP_stack_hardening" title="Sysctl">Sysctl#TCP/IP stack hardening</a>.
</p>
<h3><span class="mw-headline" id="SSH">SSH</span></h3>
<p>Для защиты от атаки <a href="https://en.wikipedia.org/wiki/ru:%D0%9F%D0%BE%D0%BB%D0%BD%D1%8B%D0%B9_%D0%BF%D0%B5%D1%80%D0%B5%D0%B1%D0%BE%D1%80" class="extiw" title="wikipedia:ru:Полный перебор">методом "грубой силы"</a> рекомендуется настроить аутетификацию по ключу. В случае OpenSSH см. <a href="/title/OpenSSH_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)#%D0%92%D1%85%D0%BE%D0%B4_%D1%82%D0%BE%D0%BB%D1%8C%D0%BA%D0%BE_%D0%BF%D0%BE_%D0%BE%D1%82%D0%BA%D1%80%D1%8B%D1%82%D0%BE%D0%BC%D1%83_%D0%BA%D0%BB%D1%8E%D1%87%D1%83" title="OpenSSH (Русский)">OpenSSH#Вход только по открытому ключу</a>. Утилиты <a href="/title/Fail2ban_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)" title="Fail2ban (Русский)">Fail2ban</a> и <a href="/title/Sshguard" title="Sshguard">Sshguard</a> предлагают дополнительную защиту посредством ведения логов и создания правил <a href="/title/%D0%9C%D0%B5%D0%B6%D1%81%D0%B5%D1%82%D0%B5%D0%B2%D0%BE%D0%B9_%D1%8D%D0%BA%D1%80%D0%B0%D0%BD" class="mw-redirect" title="Межсетевой экран">межсетевого экрана</a>, но они уязвимы для <a href="https://en.wikipedia.org/wiki/ru:%D0%A1%D0%BF%D1%83%D1%84%D0%B8%D0%BD%D0%B3#Spoofing_.D0.B8_TCP.2FIP" class="extiw" title="wikipedia:ru:Спуфинг">спуфинга</a>, поскольку атакующий может изменить пакеты таким образом, что они будут выглядеть как посланные администратором (если известен его IP-адрес). От подмены IP-адресов также можно защититься, см. <a href="/title/Sysctl#Reverse_path_filtering" title="Sysctl">sysctl#Reverse path filtering</a> и <a href="/title/Sysctl#Disable_ICMP_redirects" title="Sysctl">sysctl#Disable ICMP redirects</a>.
</p>
<p>Двухфакторная аутентификация обеспечивает дополнительную безопасность аккаунтов пользователей. В <a href="/title/Google_Authenticator_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)" class="mw-redirect" title="Google Authenticator (Русский)">Google Authenticator</a> применяется двухшаговая процедура аутентификации с использованием одноразовых паролей (one-time passcodes, OTP).
</p>
<p>Запрет на вход суперпользователя также считается хорошей практикой, по двум причинам: это помогает отслеживать случаи проникновения злоумышленников в систему, а также создает дополнительный барьер перед получением root-доступа. Для OpenSSH см. <a href="/title/OpenSSH_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)#%D0%9E%D1%82%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5" title="OpenSSH (Русский)">OpenSSH#Отключение</a>.
</p>
<p>Mozilla опубликовала руководство <a rel="nofollow" class="external text" href="https://infosec.mozilla.org/guidelines/openssh.html">по настройке OpenSSH</a> с подробным логированием и более жёсткими требованиями к шифрованию.
</p>
<h3><span class="mw-headline" id="DNS">DNS</span></h3>
<p>Стандартная конфигурация DNS работает почти всегда, но имеет некоторые недостатки в плане безопасности. См. <a href="/title/%D0%A0%D0%B0%D0%B7%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B4%D0%BE%D0%BC%D0%B5%D0%BD%D0%BD%D1%8B%D1%85_%D0%B8%D0%BC%D1%91%D0%BD#%D0%9F%D1%80%D0%B8%D0%B2%D0%B0%D1%82%D0%BD%D0%BE%D1%81%D1%82%D1%8C_%D0%B8_%D0%B1%D0%B5%D0%B7%D0%BE%D0%BF%D0%B0%D1%81%D0%BD%D0%BE%D1%81%D1%82%D1%8C" class="mw-redirect" title="Разрешение доменных имён">Разрешение доменных имён#Приватность и безопасность</a>.
</p>
<h3>
<span id=".D0.9F.D1.80.D0.BE.D0.BA.D1.81.D0.B8"></span><span class="mw-headline" id="Прокси">Прокси</span>
</h3>
<p>Назначение прокси-сервера — осуществлять санитизацию входных данных от недоверенных ресурсов. Как правило, прокси располагается между приложением и сетью. Поверхность атаки в случае небольшого прокси, запущенного с минимальным уровнем привилегий, гораздо меньше, чем для большого, сложного приложения, работающего с уровнем прав, который имеет конечный пользователь.
</p>
<p>Например, представьте, что некое приложение (запущенное к тому же с правами root) использует функцию разрешения DNS-имён из стандартной библиотеки <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=glibc">glibc</a></span>. Баг в этой функции автоматически приведет к появлению RCE-уязвимости в приложении. Кэширующий DNS-сервер вроде <a href="/title/Dnsmasq_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)" class="mw-redirect" title="Dnsmasq (Русский)">dnsmasq</a>, работающий как прокси, позволит этого избежать <a rel="nofollow" class="external autonumber" href="https://googleonlinesecurity.blogspot.it/2016/02/cve-2015-7547-glibc-getaddrinfo-stack.html">[3]</a>.
</p>
<h3>
<span id=".D0.A3.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_TLS-.D1.81.D0.B5.D1.80.D1.82.D0.B8.D1.84.D0.B8.D0.BA.D0.B0.D1.82.D0.B0.D0.BC.D0.B8"></span><span class="mw-headline" id="Управление_TLS-сертификатами">Управление TLS-сертификатами</span>
</h3>
<p>См. <a href="/title/TLS#Trust_management" class="mw-redirect" title="TLS">TLS#Trust management</a>.
</p>
<h2>
<span id=".D0.A4.D0.B8.D0.B7.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.B0.D1.8F_.D0.B1.D0.B5.D0.B7.D0.BE.D0.BF.D0.B0.D1.81.D0.BD.D0.BE.D1.81.D1.82.D1.8C"></span><span class="mw-headline" id="Физическая_безопасность">Физическая безопасность</span>
</h2>
<p>Физический доступ к машине как правило означает и root-доступ — при наличии достаточного количества времени и ресурсов. Тем не менее, можно создать ряд барьеров, которые повысят уровень защищённости системы и от таких воздействий.
</p>
<p>Установив вредоносное устройство FireWire, Thundebolt или PCI Express, дающее доступ к памяти, атакующий при следующей загрузке получит полный доступ к системе <a rel="nofollow" class="external autonumber" href="https://web.archive.org/web/20210312083421/http://breaknenter.org/2014/09/inception-metasploit-integration/">[4]</a>. С этим мало что можно сделать, как и с модификацией собственно аппаратного обеспечения компьютера — например, при записи вредоносной прошивки в контроллер устройства хранения данных. Тем не менее, как правило большинство атакующих не столь изощрённы.
</p>
<p><a href="#%D0%A8%D0%B8%D1%84%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BD%D0%B5%D0%B0%D0%BA%D1%82%D0%B8%D0%B2%D0%BD%D1%8B%D1%85_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85">#Шифрование неактивных данных</a> не позволит получить к ним доступ, если компьютер был украден, но установив вредоносную прошивку, злоумышленник получит данные, когда вы в следующий раз выполните вход в систему.
</p>
<h3>
<span id=".D0.91.D0.BB.D0.BE.D0.BA.D0.B8.D1.80.D0.BE.D0.B2.D0.BA.D0.B0_BIOS"></span><span class="mw-headline" id="Блокировка_BIOS">Блокировка BIOS</span>
</h3>
<p>Пароль BIOS не позволит кому-либо загрузиться со съёмного носителя (такая загрузка обычно означает root-доступ к системе). Убедитесь, что ваш носитель — первый в порядке загрузки, и отключите загрузку с других устройства и дисков.
</p>
<h3>
<span id=".D0.97.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D1.87.D0.B8.D0.BA.D0.B8"></span><span class="mw-headline" id="Загрузчики">Загрузчики</span>
</h3>
<p>Очень важно защитить ваш <a href="/title/%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D1%87%D0%B8%D0%BA" class="mw-redirect" title="Загрузчик">загрузчик</a>. Отсутствие такой защиты позволит обойти любые ограничения входа, например, установив <a href="/title/%D0%9F%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80_%D1%8F%D0%B4%D1%80%D0%B0" class="mw-redirect" title="Параметр ядра">параметр ядра</a> <code>init=/bin/sh</code>, чтобы загрузиться напрямую в оболочку.
</p>
<h4><span class="mw-headline" id="Syslinux">Syslinux</span></h4>
<p>Syslinux поддерживает задание <a href="/title/Syslinux_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)#%D0%91%D0%B5%D0%B7%D0%BE%D0%BF%D0%B0%D1%81%D0%BD%D0%BE%D1%81%D1%82%D1%8C" title="Syslinux (Русский)">пароля</a>. Можно установить либо один глобальный пароль, либо отдельные пароли для пунктов меню.
</p>
<h4><span class="mw-headline" id="GRUB">GRUB</span></h4>
<p><a href="/title/GRUB_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)" title="GRUB (Русский)">GRUB</a> также поддерживает пароли, подробнее см. <a href="/title/GRUB_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)#%D0%97%D0%B0%D1%89%D0%B8%D1%82%D0%B0_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D1%87%D0%B8%D0%BA%D0%B0_%D0%BF%D0%B0%D1%80%D0%BE%D0%BB%D0%B5%D0%BC" title="GRUB (Русский)">GRUB#Защита загрузчика паролем</a>. Также поддерживается <a href="/title/GRUB#Encrypted_/boot" title="GRUB">шифрование boot-раздела</a>, в результате чего незашифрованными остаются только отдельные участки кода загрузчика. Настройки GRUB, <a href="/title/%D0%AF%D0%B4%D1%80%D0%BE" class="mw-redirect" title="Ядро">ядро</a> и <a href="/title/Initramfs" class="mw-redirect" title="Initramfs">initramfs</a> будут зашифрованы.
</p>
<h3><span class="mw-headline" id="Secure_Boot">Secure Boot</span></h3>
<p><a href="/title/Secure_Boot" class="mw-redirect" title="Secure Boot">Secure Boot</a> — функциональность <a href="/title/UEFI" class="mw-redirect" title="UEFI">UEFI</a> по проверке файлов во время загрузки системы. Это позволяет предотвратить атаки вида <a href="https://en.wikipedia.org/wiki/Evil_maid_attack" class="extiw" title="wikipedia:Evil maid attack">evil maid</a>, например, с подменой файлов на загрузочном разделе. Обычно производители снабжают компьютеры готовыми OEM-ключами, но в режиме <i>Setup Mode</i> пользователь может заменить их на свои и использовать для <a href="/title/Unified_Extensible_Firmware_Interface/Secure_Boot#Using_your_own_keys" title="Unified Extensible Firmware Interface/Secure Boot">настройки безопасной загрузки</a>.
</p>
<h3>
<span id="Trusted_Platform_Module_.28TPM.29"></span><span class="mw-headline" id="Trusted_Platform_Module_(TPM)">Trusted Platform Module (TPM)</span>
</h3>
<p><a href="/title/Trusted_Platform_Module" title="Trusted Platform Module">TPM</a> — аппаратные микропроцессоры со встроенными криптографическими ключами. На этой схеме часто основана безопасность современных компьютеров, в том числе и в плане сквозной проверки цепочки загрузки. Эти устройства можно использовать как внутренние смарт-карты для аттестации прошивок компьютера или как невзламываемое и защищённое хранилище важной информации (ключей).
</p>
<h3>
<span id=".D0.97.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BE.D1.87.D0.BD.D1.8B.D0.B9_.D1.80.D0.B0.D0.B7.D0.B4.D0.B5.D0.BB_.D0.BD.D0.B0_.D1.81.D1.8A.D1.91.D0.BC.D0.BD.D0.BE.D0.BC_.D0.BD.D0.BE.D1.81.D0.B8.D1.82.D0.B5.D0.BB.D0.B5"></span><span class="mw-headline" id="Загрузочный_раздел_на_съёмном_носителе">Загрузочный раздел на съёмном носителе</span>
</h3>
<p>Довольно популярная идея, смысл которой в том, что система не сможет загрузиться без boot-раздела, который вынесен на съёмный флэш-накопитель. Часто при этом используется <a href="#%D0%A8%D0%B8%D1%84%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BD%D0%B5%D0%B0%D0%BA%D1%82%D0%B8%D0%B2%D0%BD%D1%8B%D1%85_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85">полное шифрование диска</a>, а также размещение на загрузочном разделе <a href="/title/Dm-crypt/Specialties#Encrypted_system_using_a_detached_LUKS_header" title="Dm-crypt/Specialties">заголовочных файлов шифрования</a>.
</p>
<p>Данный подход можно также совместить с <a href="/title/Dm-crypt/Specialties#Encrypted_/boot_and_a_detached_LUKS_header_on_USB" title="Dm-crypt/Specialties">шифрованием /boot-раздела</a>.
</p>
<h3>
<span id=".D0.90.D0.B2.D1.82.D0.BE.D0.BC.D0.B0.D1.82.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.B8.D0.B9_.D0.B2.D1.8B.D1.85.D0.BE.D0.B4"></span><span class="mw-headline" id="Автоматический_выход">Автоматический выход</span>
</h3>
<p>Если вы используете <a href="/title/Bash_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)" title="Bash (Русский)">Bash</a> или <a href="/title/Zsh_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)" title="Zsh (Русский)">Zsh</a>, то переменная <code>TMOUT</code> позволяет настроить автоматический выход из оболочки по истечении определённого периода времени.
</p>
<p>Например, настройки для автоматического выхода из виртуальных консолей (но не из эмуляторов терминала в X11):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/profile.d/shell-timeout.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">TMOUT="$(( 60*10 ))";
[ -z "$DISPLAY" ] &amp;&amp; export TMOUT;
case $( /usr/bin/tty ) in
	/dev/tty[0-9]*) export TMOUT;;
esac</pre>
<p>Если же вы хотите задать таймаут при работе в произвольном сеансе Bash/Zsh, выполните:
</p>
<pre>$ export TMOUT="$(( 60*10 ))";
</pre>
<p>Учтите, что команда не сработает, если в оболочке уже выполняется какой-то процесс (например, SSH-сессия или другая оболочка без поддержки переменной <code>TMOUT</code>). Однако если вы используете виртуальную консоль главным образом при перезапуске зависшего GDM/Xorg с правами root, это может оказать весьма удобным.
</p>
<h3>
<span id=".D0.97.D0.B0.D1.89.D0.B8.D1.82.D0.B0_.D0.BE.D1.82_.D0.BC.D0.BE.D1.88.D0.B5.D0.BD.D0.BD.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.B8.D1.85_USB-.D1.83.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2"></span><span class="mw-headline" id="Защита_от_мошеннических_USB-устройств">Защита от мошеннических USB-устройств</span>
</h3>
<p>Установите <a href="/title/USBGuard" title="USBGuard">USBGuard</a>, который помогает защититься от мошеннических USB-носителей (вроде <a rel="nofollow" class="external text" href="https://srlabs.de/badusb">BadUSB</a>, <a rel="nofollow" class="external text" href="https://github.com/samyk/poisontap">PoisonTap</a> или <a rel="nofollow" class="external text" href="https://lanturtle.com/">LanTurtle</a>) с помощью белых и чёрных списков устройств, составляемых на основе их атрибутов.
</p>
<h3>
<span id=".D0.A1.D0.B1.D0.BE.D1.80_.D0.B8.D0.B7.D0.BC.D0.B5.D0.BD.D1.8F.D1.8E.D1.89.D0.B8.D1.85.D1.81.D1.8F_.D0.B4.D0.B0.D0.BD.D0.BD.D1.8B.D1.85"></span><span class="mw-headline" id="Сбор_изменяющихся_данных">Сбор изменяющихся данных</span>
</h3>
<p>В процессе работы компьютер может быть уязвим для <a rel="nofollow" class="external text" href="https://fedvte.usalearning.gov/courses/CSI/course/videos/pdf/CSI_D01_S05_T01_STEP.pdf">сбора изменяющихся данных</a>. Лучше всего отключать компьютер в те моменты, когда он не нужен, или когда его физическая безопасность под вопросом (например, при прохождении поста службы безопасности в каком-либо учреждении).
</p>
<h2>
<span id=".D0.9F.D0.B0.D0.BA.D0.B5.D1.82.D1.8B"></span><span class="mw-headline" id="Пакеты">Пакеты</span>
</h2>
<h3>
<span id=".D0.90.D1.83.D1.82.D0.B5.D0.BD.D1.82.D0.B8.D1.84.D0.B8.D0.BA.D0.B0.D1.86.D0.B8.D1.8F"></span><span class="mw-headline" id="Аутентификация">Аутентификация</span>
</h3>
<p><a rel="nofollow" class="external text" href="https://www2.cs.arizona.edu/stork/packagemanagersecurity/attacks-on-package-managers.html#overview">Атака на пакетный менеджер</a> возможна при неправильной работе с подписями пакетов, хотя и менеджеры, подсистема подписей которых в порядке, тоже <a rel="nofollow" class="external text" href="https://www2.cs.arizona.edu/stork/packagemanagersecurity/faq.html">не являются</a> абсолютно безопасными. Arch использует подписи пакетов по умолчанию, полагаясь на сеть доверия из пяти мастер-ключей. Подробнее см. <a href="/title/Pacman/%D0%9F%D0%BE%D0%B4%D0%BF%D0%B8%D1%81%D1%8C_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%B0" class="mw-redirect" title="Pacman/Подпись пакета">pacman/Подпись пакета</a>.
</p>
<h3>
<span id=".D0.9E.D0.B1.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D1.8F"></span><span class="mw-headline" id="Обновления">Обновления</span>
</h3>
<p>Важно выполнять <a href="/title/System_maintenance_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)#%D0%9E%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B" title="System maintenance (Русский)">обновление системы</a> на регулярной основе.
</p>
<h3>
<span id=".D0.9E.D1.82.D1.81.D0.BB.D0.B5.D0.B6.D0.B8.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D1.83.D1.8F.D0.B7.D0.B2.D0.B8.D0.BC.D0.BE.D1.81.D1.82.D0.B5.D0.B9"></span><span class="mw-headline" id="Отслеживание_уязвимостей">Отслеживание уязвимостей</span>
</h3>
<p>Подпишитесь на рассылку Common Vulnerabilities and Exposure (CVE) Security Alert, которая ведётся National Vulnerability Database и находится <a rel="nofollow" class="external text" href="https://nvd.nist.gov/download.cfm">на странице загрузки NVD</a>. <a rel="nofollow" class="external text" href="https://security.archlinux.org/">Arch Linux Security Tracker</a> — другой полезный ресурс, в котором объединены Arch Linux Security Advisory (ASA), Arch Linux Vulnerability Group (AVG) и данные о CVE. Утилитой <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=arch-audit">arch-audit</a></span> можно проверить наличие уязвимостей в работающей системе. См. также <a href="/title/Arch_Security_Team" title="Arch Security Team">Arch Security Team</a>.
</p>
<p>Также стоит подписаться на уведомления о релизах программ, которые вы используете, особенно если вы устанавливаете ПО из сторонних источников, то есть не из официальных репозиториев и не из AUR. Некоторые программы имеют собственные списки рассылки, на которые вы можете подписаться, чтобы получать уведомления безопасности. На сайтах-хостингах исходного кода часто имеются RSS-ленты новых релизов.
</p>
<h3>
<span id=".D0.9F.D0.B5.D1.80.D0.B5.D1.81.D0.B1.D0.BE.D1.80.D0.BA.D0.B0_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2"></span><span class="mw-headline" id="Пересборка_пакетов">Пересборка пакетов</span>
</h3>
<p>Иногда имеет смысл пересобрать пакет, чтобы удалить из него нежелательную функциональность и уменьшить поверхность атаки. Например, пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bzip2">bzip2</a></span> можно пересобрать без <code>bzip2recover</code>, чтобы избежать <a rel="nofollow" class="external text" href="https://security.archlinux.org/CVE-2016-3189">CVE-2016-3189</a>. Также при пересборке можно применить различные флаги безопасности, как вручную, так и с помощью программ-обёрток.
</p>
<table class="wikitable">
<tbody>
<tr>
<th>Флаг</th>
<th>Назначение
</th>
</tr>
<tr>
<td>-D_FORTIFY_SOURCE=2</td>
<td>Обнаружение переполнения буфера во время выполнения
</td>
</tr>
<tr>
<td>-D_GLIBCXX_ASSERTIONS</td>
<td>Проверка границ строк и контейнеров С++ во время выполнения
</td>
</tr>
<tr>
<td>-fasynchronous-unwind-tables</td>
<td>Повышение надёжности трассировки
</td>
</tr>
<tr>
<td>-fexceptions</td>
<td>Отключение тредов на основе таблиц
</td>
</tr>
<tr>
<td>-fpie -Wl,-pie</td>
<td>Полный ASLR для исполняемых файлов
</td>
</tr>
<tr>
<td>-fpic -shared</td>
<td>Отключение перемещений текста для динамических библиотек
</td>
</tr>
<tr>
<td>-fplugin=annobin</td>
<td>Генерирование данных о контроле качества защищённости
</td>
</tr>
<tr>
<td>-fstack-clash-protection</td>
<td>Повышение надёжности обнаружения переполнения стека
</td>
</tr>
<tr>
<td>-fstack-protector или -fstack-protector-all</td>
<td>Защита от срыва стека
</td>
</tr>
<tr>
<td>-fstack-protector-strong</td>
<td>Аналогично
</td>
</tr>
<tr>
<td>-g</td>
<td>Добавление отладочной информации
</td>
</tr>
<tr>
<td>-grecord-gcc-switches</td>
<td>Сохранение флагов компилятора в отладочной информации
</td>
</tr>
<tr>
<td>-mcet -fcf-protection</td>
<td>Управление защитой целостности
</td>
</tr>
<tr>
<td>-O2</td>
<td>Рекомендованный уровень оптимизации
</td>
</tr>
<tr>
<td>-pipe</td>
<td>Избегать использования временных файлов, ускорение сборки
</td>
</tr>
<tr>
<td>-Wall</td>
<td>Рекомендованный уровень предупреждений компилятора
</td>
</tr>
<tr>
<td>-Werror=format-security</td>
<td>Блокировать потенциально небезопасные аргументы форматной строки
</td>
</tr>
<tr>
<td>-Werror=implicit-function-declaration</td>
<td>Блокировать компиляцию при отсутствии прототипов функций
</td>
</tr>
<tr>
<td>-Wl,-z,defs</td>
<td>Обнаруживать и блокировать перелинковку
</td>
</tr>
<tr>
<td>-Wl,-z,now</td>
<td>Отключение "ленивого связывания"
</td>
</tr>
<tr>
<td>-Wl,-z,relro</td>
<td>После перемещения сегменты доступны только на чтение
</td>
</tr>
</tbody>
</table>
<ul><li><a rel="nofollow" class="external text" href="https://developers.redhat.com/blog/2018/03/21/compiler-and-linker-flags-gcc/">О флагах и их значении</a></li></ul>
<h2>
<span id=".D0.A1.D0.BC.D0.BE.D1.82.D1.80.D0.B8.D1.82.D0.B5_.D1.82.D0.B0.D0.BA.D0.B6.D0.B5"></span><span class="mw-headline" id="Смотрите_также">Смотрите также</span>
</h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://security.archlinux.org/">Arch Linux Security Tracker</a></li>
<li><a rel="nofollow" class="external text" href="https://wiki.centos.org/HowTos/OS_Protection">CentOS Wiki: OS Protection</a></li>
<li><a rel="nofollow" class="external text" href="https://www.ibm.com/developerworks/linux/tutorials/l-harden-desktop/index.html">Hardening the Linux desktop</a></li>
<li><a rel="nofollow" class="external text" href="https://www.ibm.com/developerworks/linux/tutorials/l-harden-server/index.html">Hardening the Linux server</a></li>
<li><a rel="nofollow" class="external text" href="https://github.com/lfit/itpol/blob/master/linux-workstation-security.md">Linux Foundation: Linux workstation security checklist</a></li>
<li><a rel="nofollow" class="external text" href="https://www.privacytools.io/">privacytools.io Privacy Resources</a></li>
<li><a rel="nofollow" class="external text" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Security_Guide/">Red Hat Enterprise Linux 7 Security Guide</a></li>
<li><a rel="nofollow" class="external text" href="https://www.debian.org/doc/manuals/securing-debian-manual/index.en.html">Securing Debian Manual</a></li>
<li><a rel="nofollow" class="external text" href="https://web.archive.org/web/20140220055801/http://crunchbang.org:80/forums/viewtopic.php?id=24722">The paranoid #! Security Guide</a></li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="/title/Special:Categories" title="Special:Categories">Categories</a>: <ul>
<li><a href="/title/Category:Security_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)" title="Category:Security (Русский)">Security (Русский)</a></li>
<li><a href="/title/Category:File_systems_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)" title="Category:File systems (Русский)">File systems (Русский)</a></li>
<li><a href="/title/Category:Networking_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)" title="Category:Networking (Русский)">Networking (Русский)</a></li>
</ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Security_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;oldid=669370">https://wiki.archlinux.org/index.php?title=Security_(Русский)&amp;oldid=669370</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 8 May 2021, at 11:45.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="/title/ArchWiki:Privacy_policy" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="/title/ArchWiki:About" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="/title/ArchWiki:General_disclaimer" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
