<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>NTFS-3G (Русский) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-NTFS-3G_Русский rootpage-NTFS-3G_Русский skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">NTFS-3G (Русский)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Ссылки по теме</p>
<ul>
<li><a href="../en/File_systems.html" title="File systems">File systems</a></li>
<li><a href="../ru/File_systems.html#%D0%9C%D0%BE%D0%BD%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2%D0%BE%D0%B9_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B" class="mw-redirect" title="Mount (Русский)">mount (Русский)</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="http://www.tuxera.com/community/ntfs-3g-download/">NTFS-3G</a> — свободная реализация файловой системы NTFS с поддержкой записи и чтения данных. Для упрощения разработки и обеспечения лучшей переносимости NTFS-3G использует драйвер файловой системы FUSE.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0"><span class="tocnumber">1</span> <span class="toctext">Установка</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#%D0%A0%D1%83%D1%87%D0%BD%D0%BE%D0%B5_%D0%BC%D0%BE%D0%BD%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5"><span class="tocnumber">2</span> <span class="toctext">Ручное монтирование</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0"><span class="tocnumber">3</span> <span class="toctext">Настройка</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#%D0%A1%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D1%8B%D0%B5_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8"><span class="tocnumber">3.1</span> <span class="toctext">Стандартные настройки</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Linux-%D1%81%D0%BE%D0%B2%D0%BC%D0%B5%D1%81%D1%82%D0%B8%D0%BC%D1%8B%D0%B5_%D0%BF%D1%80%D0%B0%D0%B2%D0%B0_%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%B0"><span class="tocnumber">3.2</span> <span class="toctext">Linux-совместимые права доступа</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#%D0%A0%D0%B0%D0%B7%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%B0_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8E/%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D0%B5"><span class="tocnumber">3.3</span> <span class="toctext">Разрешение доступа пользователю/группе</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5_%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B_NTFS-3G"><span class="tocnumber">3.4</span> <span class="toctext">Основные параметры NTFS-3G</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#%D0%9C%D0%BE%D0%BD%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%80%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB%D0%BE%D0%B2_%D0%BE%D1%82_%D0%B8%D0%BC%D0%B5%D0%BD%D0%B8_%D0%BE%D0%B1%D1%8B%D1%87%D0%BD%D0%BE%D0%B3%D0%BE_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F"><span class="tocnumber">3.5</span> <span class="toctext">Монтирование разделов от имени обычного пользователя</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#NTFS-config"><span class="tocnumber">3.6</span> <span class="toctext">NTFS-config</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10"><a href="#%D0%98%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_%D1%80%D0%B0%D0%B7%D0%BC%D0%B5%D1%80%D0%B0_%D1%80%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB%D0%B0_NTFS"><span class="tocnumber">4</span> <span class="toctext">Изменение размера раздела NTFS</span></a></li>
<li class="toclevel-1 tocsection-11">
<a href="#%D0%A0%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC"><span class="tocnumber">5</span> <span class="toctext">Решение проблем</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#%D0%9F%D0%BE%D0%B2%D1%80%D0%B5%D0%B6%D0%B4%D1%91%D0%BD%D0%BD%D0%B0%D1%8F_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2%D0%B0%D1%8F_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0_NTFS"><span class="tocnumber">5.1</span> <span class="toctext">Повреждённая файловая система NTFS</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Metadata_kept_in_Windows_cache,_refused_to_mount"><span class="tocnumber">5.2</span> <span class="toctext">Metadata kept in Windows cache, refused to mount</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#%D0%9E%D1%82%D0%BA%D0%B0%D0%B7_%D0%B2_%D0%BC%D0%BE%D0%BD%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B8"><span class="tocnumber">5.3</span> <span class="toctext">Отказ в монтировании</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#%D0%A4%D0%BE%D1%80%D0%BC%D0%B0%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B2_NTFS"><span class="tocnumber">5.4</span> <span class="toctext">Форматирование в NTFS</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#%D0%9D%D0%B5_%D1%83%D1%87%D0%B8%D1%82%D1%8B%D0%B2%D0%B0%D0%B5%D1%82%D1%81%D1%8F_umask_%D0%BF%D1%80%D0%B8_%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B8_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2"><span class="tocnumber">5.5</span> <span class="toctext">Не учитывается umask при создании файлов</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-17"><a href="#%D0%A1%D0%BC%D0%BE%D1%82%D1%80%D0%B8%D1%82%D0%B5_%D1%82%D0%B0%D0%BA%D0%B6%D0%B5"><span class="tocnumber">6</span> <span class="toctext">Смотрите также</span></a></li>
</ul>
</div>

<h2>
<span id=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0"></span><span class="mw-headline" id="Установка">Установка</span>
</h2>
<p><a href="../ru/Help:Reading.html#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Установите">Установите</a> пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ntfs-3g">ntfs-3g</a></span>, доступный в <a href="../ru/Official_repositories.html" title="Official repositories (Русский)">официальных репозиториях</a>.
</p>
<h2>
<span id=".D0.A0.D1.83.D1.87.D0.BD.D0.BE.D0.B5_.D0.BC.D0.BE.D0.BD.D1.82.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5"></span><span class="mw-headline" id="Ручное_монтирование">Ручное монтирование</span>
</h2>
<p>Вручную примонтировать раздел с NTFS можно двумя способами. Традиционный:
</p>
<pre># mount -t ntfs-3g /dev/<i>раздел-с-NTFS</i> /{mnt,...}/<i>директория</i>
</pre>
<p>При этом тип файловой системы (в данном случае <code>ntfs-3g</code>) явно сообщать необязательно. По умолчанию команда <code>mount</code> будет использовать программу <code>/usr/bin/mount.ntfs</code>, которая является символьной ссылкой на <code>/usr/bin/ntfs-3g</code> и появляется после установки пакета <b>ntfs-3g</b>.
</p>
<p>Второй способ — напрямую вызвать <code>ntfs-3g</code>:
</p>
<pre># ntfs-3g /dev/<i>раздел-с-NTFS</i> /<i>директория</i>
</pre>
<h2>
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0"></span><span class="mw-headline" id="Настройка">Настройка</span>
</h2>
<p>Можно настроить автоматическое монтирование разделов NTFS, или заранее указать параметры монтирования и делать это вручную в удобное для вас время. Настройки задаются в файле <a href="../ru/Fstab.html" title="Fstab (Русский)">fstab</a> или с помощью правил <a href="../ru/Udev.html" title="Udev (Русский)">udev</a>.
</p>
<h3>
<span id=".D0.A1.D1.82.D0.B0.D0.BD.D0.B4.D0.B0.D1.80.D1.82.D0.BD.D1.8B.D0.B5_.D0.BD.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B8"></span><span class="mw-headline" id="Стандартные_настройки">Стандартные настройки</span>
</h3>
<p>При использовании стандартных настроек разделы с NTFS будут монтироваться при загрузке системы, если директория, родительская по отношению к той, куда происходит монтирование, имеет соответствующие <a href="../ru/Users_and_groups.html" class="mw-redirect" title="Пользователи и группы">права доступа</a>.
</p>
<p>Добавьте эти строки в файл <code>/etc/fstab</code>:
</p>
<pre># &lt;file system&gt;   &lt;dir&gt;		&lt;type&gt;    &lt;options&gt;             &lt;dump&gt;  &lt;pass&gt;
/dev/<i>NTFS-part</i>  /mnt/windows  ntfs-3g   defaults		  0       0
</pre>
<h3>
<span id="Linux-.D1.81.D0.BE.D0.B2.D0.BC.D0.B5.D1.81.D1.82.D0.B8.D0.BC.D1.8B.D0.B5_.D0.BF.D1.80.D0.B0.D0.B2.D0.B0_.D0.B4.D0.BE.D1.81.D1.82.D1.83.D0.BF.D0.B0"></span><span class="mw-headline" id="Linux-совместимые_права_доступа">Linux-совместимые права доступа</span>
</h3>
<p>Как правило, права доступа в Linux устанавливаются как 755 для директорий и 644 для файлов. Если вы часто используете NTFS-раздел, рекомендуется использовать эти права доступа и на нём. Следующий пример показывает, как можно присвоить такие права разделу для работы с ним из-под непривилегированного пользователя:
</p>
<pre># Монтировать системный раздел Windows с Linux-совместимыми правами доступа, т. е. 755 для директорий (dmask=022) и 644 для файлов (fmask=133)
UUID=01CD2ABB65E17DE0 /run/media/user1/Windows ntfs-3g uid=user1,gid=users,dmask=022,fmask=133 0 0
</pre>
<h3>
<span id=".D0.A0.D0.B0.D0.B7.D1.80.D0.B5.D1.88.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B4.D0.BE.D1.81.D1.82.D1.83.D0.BF.D0.B0_.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D1.8E.2F.D0.B3.D1.80.D1.83.D0.BF.D0.BF.D0.B5"></span><span class="mw-headline" id="Разрешение_доступа_пользователю/группе">Разрешение доступа пользователю/группе</span>
</h3>
<p>Через файл <code>/etc/fstab</code> можно передать драйверу ntfs-3g и другие параметры монтирования, например разрешить доступ на чтение данных определённому пользователю или группе. Чтобы дать доступ к разделу пользователям, входящим в группу <code>users</code>, можно использовать следующие параметры:
</p>
<pre>/dev/<i>NTFS-partition</i>  /mnt/windows  ntfs-3g   gid=users,umask=0022    0       0
</pre>
<p>В этом случае запись данных на раздел будет возможна только для пользователя root. Чтобы разрешить запись от имени непривилегированных пользователей, нужно указать, кому из них следует дать такой доступ. Для этого используйте параметр <code>uid</code> с именем пользователя:
</p>
<pre>/dev/<i>NTFS-partition</i>  /mnt/windows  ntfs-3g   uid=<i>имя_пользователя</i>,gid=users,umask=0022    0       0
</pre>
<p>Если у вас однопользовательская система, для большего удобства можно дать себе полный доступ к разделу:
</p>
<pre>/dev/<i>NTFS-partition</i>  /mnt/windows  ntfs-3g   uid=<i>имя_пользователя</i>,gid=users    0       0
</pre>
<h3>
<span id=".D0.9E.D1.81.D0.BD.D0.BE.D0.B2.D0.BD.D1.8B.D0.B5_.D0.BF.D0.B0.D1.80.D0.B0.D0.BC.D0.B5.D1.82.D1.80.D1.8B_NTFS-3G"></span><span class="mw-headline" id="Основные_параметры_NTFS-3G">Основные параметры NTFS-3G</span>
</h3>
<p>В большей части случаев для работы должно хватить параметров, описанных выше. Далее описываются параметры, общие для многих файловых систем Linux. Полный список параметров конфигурации ntfs-3g можно посмотреть <a rel="nofollow" class="external text" href="http://www.tuxera.com/community/ntfs-3g-manual/#6">здесь</a>
</p>
<dl>
<dt><a href="../en/Umask.html" title="Umask">umask</a></dt>
<dd>umask — команда командного интерпретатора, позволяющая автоматически присваивать нужные права доступа при создании новых файлов. Стандартные значения umask в Arch Linux для root и обычных пользователей — 0022. При этом новые директории получают права 755, а новые файлы — 644. Дополнительную информацию о umask можно найти <a rel="nofollow" class="external text" href="http://www.cyberciti.biz/tips/understanding-linux-unix-umask-value-usage.html">здесь</a>.</dd>
<dt>noauto</dt>
<dd>Если установлен параметр <code>noauto</code>, соответствующий раздел не будет монтироваться автоматически при загрузке системы.</dd>
<dt>uid</dt>
<dd>Идентификационный номер пользователя. Позволяет дать полный доступ к разделу определённому пользователю. Идентификатор пользователя можно определить с помощью команды <code>id</code>.</dd>
<dt>fmask и dmask</dt>
<dd>Похожи на <code>umask</code>, но задают права доступа к файлам и директориям отдельно.</dd>
</dl>
<h3>
<span id=".D0.9C.D0.BE.D0.BD.D1.82.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D1.80.D0.B0.D0.B7.D0.B4.D0.B5.D0.BB.D0.BE.D0.B2_.D0.BE.D1.82_.D0.B8.D0.BC.D0.B5.D0.BD.D0.B8_.D0.BE.D0.B1.D1.8B.D1.87.D0.BD.D0.BE.D0.B3.D0.BE_.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D1.8F"></span><span class="mw-headline" id="Монтирование_разделов_от_имени_обычного_пользователя">Монтирование разделов от имени обычного пользователя</span>
</h3>
<p>По умолчанию, <i>ntfs-3g</i> требует права суперпользователя для монтирования разделов, даже если добавить параметр "uid" в <code>/etc/fstab</code> (со причинами можно ознакомиться <a rel="nofollow" class="external text" href="http://www.tuxera.com/community/ntfs-3g-faq/#unprivileged">здесь</a>). Чтобы иметь возможность монтировать раздел от имени обычного пользователя, выполните следующие шаги:
</p>
<p>Если опция uid отсутствует в /etc/fstab, добавьте её:
</p>
<pre>/dev/<i>NTFS-partition</i>  /mnt/windows  ntfs-3g   uid=<i>имя_пользователя</i>,gid=users    0       0
</pre>
<p>Убедитесь, что пользователю разрешена работа с соответствующим устройством. Проще всего сделать это, добавив пользователя в группу <i>disk</i> с помощью следующей команды:
</p>
<pre># gpasswd -a username disk
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Для применения изменённых настроек может понадобиться перезагрузка</div>
<p>Далее, необходимо обеспечить пользователю доступ к директории, в которую монтируется раздел. Если вы собираетесь монтировать раздел от имени обычного пользователя, есть смысл поставить его владельцем точки монтирования:
</p>
<pre># chown <i>user</i> /mnt/<i>точка_монтирования</i>
</pre>
<p>Кроме того, необходимо использовать драйвер ntfs-3g со встроенной поддержкой FUSE. Пакет <i>ntfs-3g</i> из официальных репозиториев не имеет его поддержки, поэтому можно установить пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ntfs-3g-fuse/">ntfs-3g-fuse</a></span><sup><small>AUR</small></sup> из AUR.
</p>
<p>При выполнении этих условий у вас должна появиться возможность монтировать разделы NTFS без прав суперпользователя.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Для демонтирования разделов могут понадобиться права суперпользователя. От имени обычного пользователя можно попробовать команду <code>fusermount -u /mnt/<i>точка_монтирования</i></code>. Если вместо параметра <code>uid</code> в <code>/etc/fstab</code> вы используете параметр <code>users</code>, как монтирование, так и демонтирование разделов должно работать от имени обычного пользователя с помощью команд <code>mount</code> и <code>umount</code>.</div>
<h3><span class="mw-headline" id="NTFS-config">NTFS-config</span></h3>
<p>Программа <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ntfs-config/">ntfs-config</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/ArchWiki:Requests.html#Broken_package_links" class="mw-redirect" title="ArchWiki:Requests">ссылка недействительна</a>: package not found]</sup> может помочь вам в настройке параметров работы с разделами NTFS, если другие способы не сработали.
</p>
<h2>
<span id=".D0.98.D0.B7.D0.BC.D0.B5.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5_.D1.80.D0.B0.D0.B7.D0.BC.D0.B5.D1.80.D0.B0_.D1.80.D0.B0.D0.B7.D0.B4.D0.B5.D0.BB.D0.B0_NTFS"></span><span class="mw-headline" id="Изменение_размера_раздела_NTFS">Изменение размера раздела NTFS</span>
</h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Перед редактированием разделов обязательно делайте резервную копию важных данных!</div>
<p>Некоторые пользователи с установленной системой Windows хотели бы оставить её при установке Arch Linux. Часто для того, чтобы освободить место на диске под установку Arch Linux, возникает необходимость изменить размер системного раздела, на котором установлена Windows. Эту задачу можно выполнить одним из двух способов:
</p>
<p>1) Воспользоваться встроенным в Windows средством управления разделами. Для его запуска нажмите Win+R, введите в появившееся окно <i>diskmgmt.msc</i> и нажмите Enter. Кликните по разделу, размер которого нужно уменьшить, правой кнопкой мыши, и выберите в меню пункт <i>Сжать том</i>. Укажите количество места, которое нужно освободить, и нажмите <i>OK</i>. После завершения операции за изменённым разделом появится свободное место, в котором можно будет создать необходимые разделы в процессе установки системы.
</p>
<p>2) Воспользоваться сторонним LiveCD. Для этого скачайте ISO-образ любого диструбитива, в состав которого входят <i>ntfs-3g</i> и <i>gparted</i> (например, <a rel="nofollow" class="external text" href="http://ubuntu.com">Ubuntu</a>), либо образ специализированной системы для работы с разделами (например, <a rel="nofollow" class="external text" href="http://gparted.sourceforge.net/">GParted</a>, <a rel="nofollow" class="external text" href="http://partedmagic.com/">Parted Magic</a> или <a rel="nofollow" class="external text" href="http://www.sysresccd.org/">SystemRescueCD</a>), и запишите его на компакт-диск или USB-накопитель с помощью программы <a rel="nofollow" class="external text" href="http://unetbootin.sourceforge.net/">UNetbootin</a> или <a rel="nofollow" class="external text" href="https://rufus.akeo.ie/">Rufus</a>, после чего загрузитесь с подготовленного носителя. Дальнейшие инструкции можно получить в документации к используемому дистрибутиву.
</p>
<p>Для изменения размера NTFS-раздела из существующей системы Arch Linux установите пакеты <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ntfs-3g">ntfs-3g</a></span> и <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gparted">gparted</a></span> и запустите программу <i>gparted</i>. Если в системе отсутствует графический пользовательский интерфейс, можно использовать программу <i>parted</i>, входящую в состав пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=parted">parted</a></span>.
</p>
<h2>
<span id=".D0.A0.D0.B5.D1.88.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC"></span><span class="mw-headline" id="Решение_проблем">Решение проблем</span>
</h2>
<h3>
<span id=".D0.9F.D0.BE.D0.B2.D1.80.D0.B5.D0.B6.D0.B4.D1.91.D0.BD.D0.BD.D0.B0.D1.8F_.D1.84.D0.B0.D0.B9.D0.BB.D0.BE.D0.B2.D0.B0.D1.8F_.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D0.B0_NTFS"></span><span class="mw-headline" id="Повреждённая_файловая_система_NTFS">Повреждённая файловая система NTFS</span>
</h3>
<p>Если в файловой системе NTFS есть ошибки, ntfs-3g смонтирует её в режиме "только чтение". Для штатного исправления файловой системы NTFS загрузите Windows и запустите chkdsk (chkdsk /F).
</p>
<p>Для коррекции файловой системы NTFS без использования Windows <a href="../ru/Help:Reading.html#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Установите">установите</a> пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ntfsprogs">ntfsprogs</a></span><sup>[<a href="../en/ArchWiki:Requests.html#Broken_package_links" class="mw-redirect" title="ArchWiki:Requests">ссылка недействительна</a>: replaced by <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ntfs-3g">ntfs-3g</a></span>]</sup>, доступный в <a href="../ru/Official_repositories.html" title="Official repositories (Русский)">официальных репозиториях</a>.
</p>
<p>Для исправления файловой системы NTFS раздел должен быть отмонтирован. Пример ремонта NTFS-раздела /dev/sda2:
</p>
<pre># umount /dev/sda2
# ntfsfix /dev/sda2
Mounting volume... OK
Processing of $MFT and $MFTMirr completed successfully.
NTFS volume version is 3.1.
NTFS partition /dev/sda2 was processed successfully.
# mount /dev/sda2
</pre>
<p>Если всё прошло без ошибок, раздел будет доступен для записи.
</p>
<h3>
<span id="Metadata_kept_in_Windows_cache.2C_refused_to_mount"></span><span class="mw-headline" id="Metadata_kept_in_Windows_cache,_refused_to_mount">Metadata kept in Windows cache, refused to mount</span>
</h3>
<p>Если вместе с Arch Linux на компьютере используется Windows 8, при монтировании системного раздела может возникнуть следующая ошибка:
</p>
<pre>The disk contains an unclean file system (0, 0).
Metadata kept in Windows cache, refused to mount.
Failed to mount '/dev/sdc1': Operation not permitted
The NTFS partition is in an unsafe state. Please resume and shutdown
Windows fully (no hibernation or fast restarting), or mount the volume
read-only with the 'ro' mount option.
</pre>
<p>Проблема вызвана новой функцией Windows 8 под названием "быстрый запуск". Когда эта функция включена, часть метаданных файловых систем всех используемых разделов при загрузке восстанавливается к тому состоянию, в котором они находились при завершении работы Windows. В результате изменения содержимого разделов, совершённые из Linux, могут быть утеряны. Это может произойти с любым разделом жёсткого диска, когда работа Windows завершается выбором пункта "Выключить" или "Гибернация". Однако, завершение работы Windows с помощью пункта "Перезагрузка" не должно вызывать таких проблем.
</p>
<p>Чтобы получить возможность беспроблемно записывать данные на раздел из других операционных систем, убедитесь, что функция "быстрый запуск" отключена. Для этого загрузите Windows и выполните следующую команду в командной строке, запущенной от имени администратора:
</p>
<pre>powercfg /h off
</pre>
<p>Чтобы проверить текущее значение параметра, зайдите в <i>Панель управления -&gt; Оборудование и звук -&gt; Электропитание -&gt; Действия кнопок питания</i>. Флажок <i>Включить быстрый запуск</i> должен быть снят либо отсутствовать.
</p>
<h3>
<span id=".D0.9E.D1.82.D0.BA.D0.B0.D0.B7_.D0.B2_.D0.BC.D0.BE.D0.BD.D1.82.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B8"></span><span class="mw-headline" id="Отказ_в_монтировании">Отказ в монтировании</span>
</h3>
<p>Если, даже следуя этому руководству, вам не удаётся примонтировать раздел NTFS, попробуйте отредактировать файл <code>/etc/fstab</code>, указав <a href="../en/Persistent_block_device_naming.html#by-uuid" class="mw-redirect" title="UUID">UUID</a> вместо имён устройств для всех разделов NTFS. С примером можно ознакомиться <a href="../ru/Fstab.html#%D0%9F%D0%BE_UUID" title="Fstab (Русский)">здесь</a>.
</p>
<h3>
<span id=".D0.A4.D0.BE.D1.80.D0.BC.D0.B0.D1.82.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.B2_NTFS"></span><span class="mw-headline" id="Форматирование_в_NTFS">Форматирование в NTFS</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Всегда внимательно проверяйте правильность имени устройства.</div>
<pre># mkfs.ntfs -L myCoolDiskName /dev/sdc1
</pre>
<p>На современных устройствах большого объема такой способ может занять много времени. Для быстрого форматирования используйте команду:
</p>
<pre># mkfs.ntfs -Q -L myCoolDiskName /dev/sdc1
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> При использовании такого способа форматирования этапы перезаписи содержимого раздела нулями и проверки поверхности диска будут пропущены.</div>
<h3>
<span id=".D0.9D.D0.B5_.D1.83.D1.87.D0.B8.D1.82.D1.8B.D0.B2.D0.B0.D0.B5.D1.82.D1.81.D1.8F_umask_.D0.BF.D1.80.D0.B8_.D1.81.D0.BE.D0.B7.D0.B4.D0.B0.D0.BD.D0.B8.D0.B8_.D1.84.D0.B0.D0.B9.D0.BB.D0.BE.D0.B2"></span><span class="mw-headline" id="Не_учитывается_umask_при_создании_файлов">Не учитывается umask при создании файлов</span>
</h3>
<p>Если в <code>/etc/fstab</code> указана опция монтирования <code>permissions</code>, разделы NTFS-3G смогут имитировать работу с привычной системой прав доступа Linux. Однако, при создании файлов вплоть до версии 2014.2.15-1 <a rel="nofollow" class="external text" href="http://tuxera.com/forum/viewtopic.php?p=38385&amp;sid=33a8f1830c44d26a8d53090b1bec1d82#p38385">не учитывается umask пользователя</a>.
</p>
<p>Как решение, используйте <a href="../ru/Arch_Build_System.html" title="Arch Build System (Русский)">ABS</a> для пересборки NTFS-3G без поддержки ACL (<code>--enable-posix-acls</code>):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">PKGBUILD</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">build() {
	cd "${srcdir}/${_pkgname}-${pkgver}"
	./configure \
		--prefix=/usr \
		--sbin=/usr/bin \
		--mandir=/usr/share/man \
		--disable-ldconfig \
		--disable-static \
		--with-fuse=external \
		--enable-extras \

	make
}</pre>
<h2>
<span id=".D0.A1.D0.BC.D0.BE.D1.82.D1.80.D0.B8.D1.82.D0.B5_.D1.82.D0.B0.D0.BA.D0.B6.D0.B5"></span><span class="mw-headline" id="Смотрите_также">Смотрите также</span>
</h2>
<ul><li>
<a rel="nofollow" class="external free" href="http://www.tuxera.com/community/ntfs-3g-manual">http://www.tuxera.com/community/ntfs-3g-manual</a> — Официальное руководство по NTFS-3G</li></ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../ru/Category:FUSE.html" title="Category:FUSE (Русский)">FUSE (Русский)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=NTFS-3G_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;oldid=638521">https://wiki.archlinux.org/index.php?title=NTFS-3G_(Русский)&amp;oldid=638521</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 14 October 2020, at 07:15.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
