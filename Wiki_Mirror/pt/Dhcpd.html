<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>dhcpd (Português) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Dhcpd_Português rootpage-Dhcpd_Português skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">dhcpd (Português)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<p><span></span>
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Status de tradução:</strong> Esse artigo é uma tradução de <a href="../en/Dhcpd.html" title="Dhcpd">dhcpd</a>. Data da última tradução: 2019-08-17. Você pode ajudar a sincronizar a tradução, se houver <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Dhcpd&amp;diff=0&amp;oldid=580071">alterações</a> na versão em inglês.</div>
<div class="archwiki-template-meta-related-articles-start">
<p>Artigos relacionados</p>
<ul>
<li><a href="../en/Dhcpcd.html" title="Dhcpcd">dhcpcd</a></li>
</ul>
</div>
<p>O <i>dhcpd</i> é o servidor DHCP da <a rel="nofollow" class="external text" href="http://www.isc.org/downloads/dhcp/">Internet Systems Consortium</a>. Ele é útil, por exemplo, em uma máquina agindo como um roteador em uma rede local.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> <i>dhcpd</i> (DHCP <b>(server)</b> daemon) não é o mesmo que <a href="../en/Dhcpcd.html" title="Dhcpcd">dhcpcd</a> (DHCP <b>cliente</b> daemon).</div>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Instala%C3%A7%C3%A3o"><span class="tocnumber">1</span> <span class="toctext">Instalação</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Uso"><span class="tocnumber">2</span> <span class="toctext">Uso</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#Configura%C3%A7%C3%A3o"><span class="tocnumber">3</span> <span class="toctext">Configuração</span></a>
<ul>
<li class="toclevel-2 tocsection-4">
<a href="#Ouvindo_apenas_em_uma_interface"><span class="tocnumber">3.1</span> <span class="toctext">Ouvindo apenas em uma interface</span></a>
<ul>
<li class="toclevel-3 tocsection-5"><a href="#Configurando_dhcpd"><span class="tocnumber">3.1.1</span> <span class="toctext">Configurando dhcpd</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#Arquivo_de_servi%C3%A7o"><span class="tocnumber">3.1.2</span> <span class="toctext">Arquivo de serviço</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-7"><a href="#Usar_para_PXE"><span class="tocnumber">3.2</span> <span class="toctext">Usar para PXE</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="#Veja_tamb%C3%A9m"><span class="tocnumber">4</span> <span class="toctext">Veja também</span></a></li>
</ul>
</div>

<h2>
<span id="Instala.C3.A7.C3.A3o"></span><span class="mw-headline" id="Instalação">Instalação</span>
</h2>
<p><a href="../pt/Help:Reading.html#Instala%C3%A7%C3%A3o_de_pacotes" class="mw-redirect" title="Instale">Instale</a> o pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dhcp">dhcp</a></span>, disponível nos <a href="../pt/Official_repositories.html" class="mw-redirect" title="Repositórios oficiais">repositórios oficiais</a>.
</p>
<h2><span class="mw-headline" id="Uso">Uso</span></h2>
<p><i>dhcpd</i> inclui dois arquivos unit <code>dhcpd4.service</code> e <code>dhcpd6.service</code>, que podem ser usados para <a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Habilite">controlar</a> o daemon. Eles iniciam o daemon em <i>todas</i> as <a href="../pt/Network_configuration.html#Interfaces_de_rede" class="mw-redirect" title="Interfaces de rede">interfaces de rede</a> para IPv4 e IPv6, respectivamente. Veja <a href="#Ouvindo_apenas_em_uma_interface">#Ouvindo apenas em uma interface</a> para uma alternativa.
</p>
<h2>
<span id="Configura.C3.A7.C3.A3o"></span><span class="mw-headline" id="Configuração">Configuração</span>
</h2>
<p>Atribua um endereço IPv4 estático para a interface que você deseja usar (em nossos exemplos, usaremos <code>eth0</code>). Os 3 primeiros bytes deste endereço não podem ser exatamente o mesmo que os de outra interface.
</p>
<pre># ip link set up dev eth0
# ip addr add 139.96.30.100/24 dev eth0 # endereço arbitrário
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> Geralmente, uma das três sub-redes são usadas para redes privadas, que são especialmente reservadas e não conflitarão com nenhum host na Internet:
<ul>
<li>
<code>192.168/16</code> (sub-rede <code>192.168.0.0</code>, máscara de rede <code>255.255.0.0</code>)</li>
<li>
<code>172.16/12</code> (sub-rede <code>172.16.0.0</code>, máscara de rede <code>255.240.0.0</code>)</li>
<li>
<code>10/8</code> (para redes grandes; sub-rede <code>10.0.0.0</code>, máscara de rede <code>255.0.0.0</code>)</li>
</ul>
Veja também <a rel="nofollow" class="external text" href="http://www.ietf.org/rfc/rfc1918.txt">RFC 1918</a>.</div>
<p>Para ter seu IP estático atribuído na inicialização, veja <a href="../pt/Network_configuration.html#Endere%C3%A7o_IP_est%C3%A1tico" class="mw-redirect" title="Configuração de rede">Configuração de rede#Endereço IP estático</a>.
</p>
<p>O <code>dhcpd.conf</code> padrão contém muitos exemplos descomentados, então mude-o:
</p>
<pre># cp /etc/dhcpd.conf /etc/dhcpd.conf.example
</pre>
<p>O arquivo de configuração mínimo pode se parecer com:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/dhcpd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">option domain-name-servers 8.8.8.8, 8.8.4.4;
option subnet-mask 255.255.255.0;
option routers 139.96.30.100;
subnet 139.96.30.0 netmask 255.255.255.0 {
  range 139.96.30.150 139.96.30.250;
}
</pre>
<p>Se você precisar fornecer um endereço IP fixo para um dispositivo único específico, você pode usar a seguinte sintaxe:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/dhcpd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">option domain-name-servers 8.8.8.8, 8.8.4.4;
option subnet-mask 255.255.255.0;
option routers 139.96.30.100;
subnet 139.96.30.0 netmask 255.255.255.0 {
  range 139.96.30.150 139.96.30.250;

  host macbookpro{
   hardware ethernet 70:56:81:22:33:44;
   fixed-address 139.96.30.199;
  }
}
</pre>
<p>A opção <code>domain-name-servers</code> contém endereços de servidores DNS que são fornecidos aos clientes. No nosso exemplo, estamos usando os servidores DNS públicos do Google. Se você conhece um servidor DNS local (por exemplo, fornecido pelo seu provedor de internet), você deve usá-lo. Se você configurou seu próprio DNS em uma máquina local, use seu endereço em sua sub-rede (por exemplo, g. <code>139.96.30.100</code> em nosso exemplo).
</p>
<p><code>subnet-mask</code> e <code>routers</code> define uma máscara de sub-rede e uma lista de roteadores disponíveis na sub-rede. Na maioria dos casos, para pequenas redes, você pode usar <code>255.255.255.0</code> como uma máscara e especificar um endereço IP da máquina em que você está configurando o servidor DHCP como roteador.
</p>
<p><code>subnet</code> define opções para sub-redes separadas, que são mapeadas para as interfaces de rede nas quais <i>dhcpd</i> está sendo executado. No nosso exemplo, esta é uma sub-rede <code>139.96.30.0/24</code> para interface única <code>eth0</code>, para a qual definimos o intervalo de endereços IP disponíveis. Os endereços desse intervalo serão atribuídos aos clientes conectados.
</p>
<h3><span class="mw-headline" id="Ouvindo_apenas_em_uma_interface">Ouvindo apenas em uma interface</span></h3>
<p>Se o seu computador já faz parte de uma ou várias redes, pode ser um problema se seu computador começar a dar endereços IP para máquinas das outras redes. Isso pode ser feito configurando dhcpd ou iniciando como um daemon com <a href="../pt/Systemd.html#Usando_units" title="Systemd (Português)">systemctl</a>.
</p>
<h4><span class="mw-headline" id="Configurando_dhcpd">Configurando dhcpd</span></h4>
<p>Para excluir uma interface, você deve criar uma declaração vazia para a sub-rede que será configurada nessa interface.
</p>
<p>Isso é feito editando o arquivo de configuração (por exemplo):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/dhcpd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Nenhum serviço DHCP na rede DMZ (192.168.2.0/24)
subnet 192.168.2.0 netmask 255.255.255.0 {
}
</pre>
<h4>
<span id="Arquivo_de_servi.C3.A7o"></span><span class="mw-headline" id="Arquivo_de_serviço">Arquivo de serviço</span>
</h4>
<p>Não há arquivos <i>.service</i> fornecidos por padrão para usar <i>dhcpd</i> apenas em uma interface, então você precisa criar um:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/dhcpd4@.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=IPv4 DHCP server on %I
Wants=network.target
After=network.target

[Service]
Type=forking
PIDFile=/run/dhcpd4.pid
ExecStart=/usr/bin/dhcpd -4 -q -pf /run/dhcpd4.pid %I
KillSignal=SIGINT

[Install]
WantedBy=multi-user.target
</pre>
<p>Esse é um modelo de unit, que vincula-o a uma interface específica, por exemplo <code>dhcpd4@<i>eth0</i>.service</code>, sendo<i>eth0</i> uma interface mostrada com <code>ip link</code>.
</p>
<p>Às vezes, queremos esperar que a rede seja configurada, neste caso, a solução é fazer o serviço aguardar a network-online.target em vez de network.target:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/dhcpd4@.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Wants=network-online.target
After=network-online.target
</pre>
<p>Para que isso funcione, devemos habilitar outro serviço para que funcione:
</p>
<pre># systemctl enable systemd-networkd-wait-online
</pre>
<h3><span class="mw-headline" id="Usar_para_PXE">Usar para PXE</span></h3>
<p>A configuração de PXE é feita com as duas opções a seguir:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/dhcpd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">next-server 192.168.0.2;
filename "/pxelinux.0";
</pre>
<p>Essa seção pode tanto ser uma <code>subnet</code> inteira ou apenas uma definição de <code>host</code>. <code>next-server</code> é o IP do servidor TFTP e <code>filename</code> é o nome de arquivo da imagem para inicializar. Para mais informações, veja <a href="../pt/Preboot_Execution_Environment.html" class="mw-redirect" title="PXE (Português)">PXE</a>.
</p>
<h2>
<span id="Veja_tamb.C3.A9m"></span><span class="mw-headline" id="Veja_também">Veja também</span>
</h2>
<ul><li><a rel="nofollow" class="external text" href="https://kb.isc.org/docs/aa-00333">Documentação de DHCO do ISC</a></li></ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../pt/Category:DHCP.html" title="Category:DHCP (Português)">DHCP (Português)</a></li></ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Dhcpd_(Portugu%C3%AAs)&amp;oldid=641114">https://wiki.archlinux.org/index.php?title=Dhcpd_(Português)&amp;oldid=641114</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 9 November 2020, at 19:53.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
