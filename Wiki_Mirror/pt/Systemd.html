<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>systemd (Português) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Systemd_Português rootpage-Systemd_Português skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">systemd (Português)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<p><span></span>
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Status de tradução:</strong> Esse artigo é uma tradução de <a href="../en/Systemd.html" title="Systemd">Systemd</a>. Data da última tradução: 2020-06-29. Você pode ajudar a sincronizar a tradução, se houver <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Systemd&amp;diff=0&amp;oldid=622753">alterações</a> na versão em inglês.</div>
<div class="archwiki-template-meta-related-articles-start">
<p>Artigos relacionados</p>
<ul>
<li><a href="../en/Systemd/User.html" title="Systemd/User">systemd/User</a></li>
<li><a href="../pt/af7c34017c1457f128a3bb40b9913e94.html" title="Systemd (Português)/Timers (Português)">systemd/Timers</a></li>
<li><a href="../pt/508d3afdfb62d49d74039238ef71cd04.html" title="Systemd (Português)/Journal (Português)">systemd/Journal</a></li>
<li><a href="../en/Systemd/FAQ.html" class="mw-redirect" title="Systemd FAQ">systemd FAQ</a></li>
<li><a href="../pt/Init.html" title="Init (Português)">init</a></li>
<li><a href="../pt/Daemons.html" title="Daemons (Português)">Daemons</a></li>
<li><a href="../en/Udev.html" title="Udev">udev</a></li>
<li><a href="../pt/7c6fd902d61f81f7e7a9d29791696081.html" class="mw-redirect" title="Melhorando o desempenho/Processo de inicialização">Melhorando o desempenho/Processo de inicialização</a></li>
<li><a href="../en/Allow_users_to_shutdown.html" title="Allow users to shutdown">Permitir desligamento por usuários</a></li>
</ul>
</div>
<p>De <a rel="nofollow" class="external text" href="https://systemd.io/">página web do projeto</a>:
</p>
<dl><dd>
<i>Systemd</i> é um sistema e gerenciador de serviços para Linux, compatível com os scripts de inicializações SysV e LS. <i>Systemd</i> fornece recursos de paralelização agressivos, usa socket e ativação <a href="../en/D-Bus.html" title="D-Bus">D-Bus</a> para iniciar serviços, oferece o início de daemons on-demand, mantém o registro de processos usando <a href="../en/Cgroups.html" title="Cgroups">grupos de controle</a> Linux, suporte snapshotting e restauração do estado do sistema, preserva pontos de montagens e automontagens e implementa uma lógica de controle elaborado transacional baseada em dependência de serviço. O <i>systemd</i> oferece suporte scripts de init SysV e LSB e funciona como um substituto para o sysvinit. Outras partes incluem um daemon de registro, utilitários para controlar a configuração básica do sistema como o nome do host, data, local, manter uma lista de usuários logados e executar contêineres e máquinas virtuais, contas do sistema, diretórios e configurações de tempo de execução e daemons para gerenciar configuração de redes simples, sincronização de tempo de rede, encaminhamento de log e resolução de nomes.</dd></dl>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Para uma explicação detalhada do porquê Arch migrou para o <i>systemd</i>, consulte <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1149530#p1149530">esta mensagem do fórum internacional</a>.</div>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Uso_b%C3%A1sico_do_systemctl"><span class="tocnumber">1</span> <span class="toctext">Uso básico do systemctl</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Analisando_o_estado_do_sistema"><span class="tocnumber">1.1</span> <span class="toctext">Analisando o estado do sistema</span></a></li>
<li class="toclevel-2 tocsection-3">
<a href="#Usando_units"><span class="tocnumber">1.2</span> <span class="toctext">Usando units</span></a>
<ul>
<li class="toclevel-3 tocsection-4"><a href="#Verificando_status"><span class="tocnumber">1.2.1</span> <span class="toctext">Verificando status</span></a></li>
<li class="toclevel-3 tocsection-5"><a href="#Iniciando,_reiniciando,_recarregando"><span class="tocnumber">1.2.2</span> <span class="toctext">Iniciando, reiniciando, recarregando</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#Habilitando"><span class="tocnumber">1.2.3</span> <span class="toctext">Habilitando</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="#Mascarando"><span class="tocnumber">1.2.4</span> <span class="toctext">Mascarando</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-8"><a href="#Gerenciamento_de_energia"><span class="tocnumber">1.3</span> <span class="toctext">Gerenciamento de energia</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9">
<a href="#Escrevendo_arquivos_unit"><span class="tocnumber">2</span> <span class="toctext">Escrevendo arquivos unit</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#Manuseando_depend%C3%AAncias"><span class="tocnumber">2.1</span> <span class="toctext">Manuseando dependências</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Tipos_de_servi%C3%A7os"><span class="tocnumber">2.2</span> <span class="toctext">Tipos de serviços</span></a></li>
<li class="toclevel-2 tocsection-12">
<a href="#Editando_units_fornecidas"><span class="tocnumber">2.3</span> <span class="toctext">Editando units fornecidas</span></a>
<ul>
<li class="toclevel-3 tocsection-13"><a href="#Arquivos_unit_de_substitui%C3%A7%C3%A3o"><span class="tocnumber">2.3.1</span> <span class="toctext">Arquivos unit de substituição</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#Arquivos_drop-in"><span class="tocnumber">2.3.2</span> <span class="toctext">Arquivos drop-in</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#Reverter_para_vers%C3%A3o_do_vendor"><span class="tocnumber">2.3.3</span> <span class="toctext">Reverter para versão do vendor</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="#Exemplos"><span class="tocnumber">2.3.4</span> <span class="toctext">Exemplos</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-17">
<a href="#Targets"><span class="tocnumber">3</span> <span class="toctext">Targets</span></a>
<ul>
<li class="toclevel-2 tocsection-18"><a href="#Obter_targets_atuais"><span class="tocnumber">3.1</span> <span class="toctext">Obter targets atuais</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#Criar_target_personalizado"><span class="tocnumber">3.2</span> <span class="toctext">Criar target personalizado</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Mapeamento_entre_n%C3%ADveis_do_SysV_e_targets_do_systemd"><span class="tocnumber">3.3</span> <span class="toctext">Mapeamento entre níveis do SysV e targets do systemd</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#Alterar_target_atual"><span class="tocnumber">3.4</span> <span class="toctext">Alterar target atual</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#Alterar_target_padr%C3%A3o_para_inicializar"><span class="tocnumber">3.5</span> <span class="toctext">Alterar target padrão para inicializar</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#Ordem_de_target_padr%C3%A3o"><span class="tocnumber">3.6</span> <span class="toctext">Ordem de target padrão</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-24">
<a href="#Componentes_do_systemd"><span class="tocnumber">4</span> <span class="toctext">Componentes do systemd</span></a>
<ul>
<li class="toclevel-2 tocsection-25">
<a href="#systemd.mount_-_montagem"><span class="tocnumber">4.1</span> <span class="toctext">systemd.mount - montagem</span></a>
<ul>
<li class="toclevel-3 tocsection-26"><a href="#Montagem_autom%C3%A1tica_de_parti%C3%A7%C3%A3o_GPT"><span class="tocnumber">4.1.1</span> <span class="toctext">Montagem automática de partição GPT</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-27"><a href="#systemd-sysvcompat"><span class="tocnumber">4.2</span> <span class="toctext">systemd-sysvcompat</span></a></li>
<li class="toclevel-2 tocsection-28"><a href="#systemd-tmpfiles_-_arquivos_tempor%C3%A1rios"><span class="tocnumber">4.3</span> <span class="toctext">systemd-tmpfiles - arquivos temporários</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-29">
<a href="#Dicas_e_truques"><span class="tocnumber">5</span> <span class="toctext">Dicas e truques</span></a>
<ul>
<li class="toclevel-2 tocsection-30"><a href="#Ferramentas_de_configura%C3%A7%C3%A3o_GUI"><span class="tocnumber">5.1</span> <span class="toctext">Ferramentas de configuração GUI</span></a></li>
<li class="toclevel-2 tocsection-31"><a href="#Executando_servi%C3%A7os_ap%C3%B3s_a_rede_estar_ativa"><span class="tocnumber">5.2</span> <span class="toctext">Executando serviços após a rede estar ativa</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#Habilitar_units_instaladas_por_padr%C3%A3o"><span class="tocnumber">5.3</span> <span class="toctext">Habilitar units instaladas por padrão</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#Usando_ambientes_de_aplicativos_em_sandbox"><span class="tocnumber">5.4</span> <span class="toctext">Usando ambientes de aplicativos em <i>sandbox</i></span></a></li>
<li class="toclevel-2 tocsection-34"><a href="#Notifica%C3%A7%C3%A3o_sobre_servi%C3%A7os_com_falha"><span class="tocnumber">5.5</span> <span class="toctext">Notificação sobre serviços com falha</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-35">
<a href="#Solu%C3%A7%C3%A3o_de_problemas"><span class="tocnumber">6</span> <span class="toctext">Solução de problemas</span></a>
<ul>
<li class="toclevel-2 tocsection-36"><a href="#Investigar_servi%C3%A7os_que_falharam"><span class="tocnumber">6.1</span> <span class="toctext">Investigar serviços que falharam</span></a></li>
<li class="toclevel-2 tocsection-37"><a href="#Diagnosticar_problemas_de_inicializa%C3%A7%C3%A3o"><span class="tocnumber">6.2</span> <span class="toctext">Diagnosticar problemas de inicialização</span></a></li>
<li class="toclevel-2 tocsection-38"><a href="#Diagnosticar_um_servi%C3%A7o"><span class="tocnumber">6.3</span> <span class="toctext">Diagnosticar um serviço</span></a></li>
<li class="toclevel-2 tocsection-39"><a href="#Desligamento/reinicializa%C3%A7%C3%A3o_demora_demais"><span class="tocnumber">6.4</span> <span class="toctext">Desligamento/reinicialização demora demais</span></a></li>
<li class="toclevel-2 tocsection-40"><a href="#Processos_de_curta_dura%C3%A7%C3%A3o_n%C3%A3o_parecem_registrar_qualquer_sa%C3%ADda"><span class="tocnumber">6.5</span> <span class="toctext">Processos de curta duração não parecem registrar qualquer saída</span></a></li>
<li class="toclevel-2 tocsection-41"><a href="#Tempo_de_inicializa%C3%A7%C3%A3o_aumentando_com_o_tempo"><span class="tocnumber">6.6</span> <span class="toctext">Tempo de inicialização aumentando com o tempo</span></a></li>
<li class="toclevel-2 tocsection-42"><a href="#systemd-tmpfiles-setup.service_n%C3%A3o_inicia_na_inicializa%C3%A7%C3%A3o_do_sistema"><span class="tocnumber">6.7</span> <span class="toctext">systemd-tmpfiles-setup.service não inicia na inicialização do sistema</span></a></li>
<li class="toclevel-2 tocsection-43"><a href="#Desabilitar_modo_de_emerg%C3%AAncia_em_m%C3%A1quina_remota"><span class="tocnumber">6.8</span> <span class="toctext">Desabilitar modo de emergência em máquina remota</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-44"><a href="#Veja_tamb%C3%A9m"><span class="tocnumber">7</span> <span class="toctext">Veja também</span></a></li>
</ul>
</div>

<h2>
<span id="Uso_b.C3.A1sico_do_systemctl"></span><span class="mw-headline" id="Uso_básico_do_systemctl">Uso básico do systemctl</span>
</h2>
<p>O principal comando usado para introspecção e controle <i>systemd</i> é <i>systemctl</i>. Alguns de seus usos são examinando o estado do sistema e gerenciando o sistema e serviços. Consulte <span class="plainlinks archwiki-template-man" title="$ man 1 systemctl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemctl.1">systemctl(1)</a></span> para mais detalhes.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> 
<ul>
<li>Você pode usar todos os comandos de <i>systemctl</i> abaixo com a opção <code>-H <i>usuário</i>@<i>host</i></code> para controlar uma instância de <i>systemd</i> em uma máquina remota. Isso usará <a href="../pt/Secure_Shell.html" class="mw-redirect" title="SSH (Português)">SSH</a> para se conectar uma instância remota <i>systemd</i>.</li>
<li>Usuários de <a href="../pt/KDE.html#Plasma" class="mw-redirect" title="Plasma (Português)">Plasma</a> podem instalar <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/systemd-kcm/">systemd-kcm</a></span><sup><small>AUR</small></sup> como um frontend gráfico para <i>systemctl</i>. Após a instalação, o módulo será adicionar sob <i>Administração de sistema</i>.</li>
</ul>
</div>
<h3><span class="mw-headline" id="Analisando_o_estado_do_sistema">Analisando o estado do sistema</span></h3>
<p>Mostre <b>status do sistema</b> usando:
</p>
<pre>$ systemctl status
</pre>
<p>Liste units <b>em execução</b>:
</p>
<pre>$ systemctl
</pre>
<p>ou:
</p>
<pre>$ systemctl list-units
</pre>
<p>Liste units <b>que falharam</b>:
</p>
<pre>$ systemctl --failed
</pre>
<p>Os arquivos units disponíveis podem ser vistos em <code>/usr/lib/systemd/system/</code> e <code>/etc/systemd/system/</code> (este último tem precedência). Liste os arquivos unit <b>instalados</b> com:
</p>
<pre>$ systemctl list-unit-files
</pre>
<p>Mostre <a href="../en/Cgroups.html" title="Cgroups"><i>slice</i> de cgroup</a>, memória e pai de um PID:
</p>
<pre>$ systemctl status <i>pid</i>
</pre>
<h3><span class="mw-headline" id="Usando_units">Usando units</span></h3>
<p>As units podem ser, por exemplo, serviços (<i>.service</i>), pontos de montagem (<i>.mount</i>), dispositivos (<i>.device</i>) ou soquetes (<i>.socket</i>).
</p>
<p>Quando usa <i>systemctl</i>, você geralmente tem que especificar o nome completo do arquivo unit, incluindo o sufixo, por exemplo <code>sshd.socket</code>. No entanto, existem algumas formas curtas de especificar a unit nos seguintes comandos <i>systemctl</i>:
</p>
<ul>
<li>Se você não especificar o sufixo, systemctl presumirá <i>.service</i>. Por exemplo, <code>netctl</code> e <code>netctl.service</code> são equivalentes.</li>
<li>Os pontos de montagem serão automaticamente convertidos para a unit <i>.mount</i> adequada. Por exemplo, especificar <code>/home</code> equivale a <code>home.mount</code>.</li>
<li>Similar aos pontos de montagem, dispositivos são automaticamente convertidos para a unit <i>.device</i> adequada, portanto, especificar <code>/dev/sda2</code> equivale a <code>dev-sda2.device</code>.</li>
</ul>
<p>Veja <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.unit"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.unit.5">systemd.unit(5)</a></span> para detalhes.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Alguns nomes de unit contêm um sinal <code>@</code> (por exemplo, <code>nome@<i>string</i>.service</code>): isso significa que eles são <a rel="nofollow" class="external text" href="http://0pointer.net/blog/projects/instances.html">instâncias</a> de uma unit <i>modelo</i> (em inglês, <i>template</i>), cujo nome real do arquivo não contém a parte <code><i>string</i></code> (por exemplo, <code>nome@.service</code>). <code><i>string</i></code> é chamado de <i>identificador de instância</i> (em inglês, <i>instance identifier</i>) e é semelhante a um argumento que é passado para a unit modelo quando chamado com o comando <i>systemctl</i>: no arquivo unit, ele irá substituir o especificador <code>%i</code>.
Para ser mais preciso, <i>antes</i> de tentar instanciar a unit modelo <code>nome@.suffix</code>, o <i>systemd</i> vai, na verdade, procurar por uma unit com o nome de arquivo exato <code>nome@string.sufixo</code>, embora por convenção tal "conflito" ocorra raramente, ou seja, a maioria dos arquivos unit contendo um sinal <code>@</code> são destinados a serem um modelo. Além disso, se uma unit modelo for chamada sem um identificador de instância, ela falhará, pois o especificador <code>%i</code> não conseguirá ser substituído.</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> 
<ul>
<li>A maioria dos comandos a seguir também funciona se várias units forem especificadas; veja <span class="plainlinks archwiki-template-man" title="$ man 1 systemctl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemctl.1">systemctl(1)</a></span> para obter mais informações.</li>
<li>A opção <code>--now</code> pode ser usada em conjunto com <code>enable</code>, <code>disable</code> e <code>mask</code> para iniciar, parar ou mascarar, respectivamente, <i>imediatamente</i> a unit em vez de após reinicializar.</li>
<li>Um pacote pode oferecer units para diferentes finalidades. Se você acabou de instalar um pacote, <code>pacman -Qql <i>pacote</i> | grep -Fe .service -e .socket</code> pode ser usado para verificar e localizá-las.</li>
</ul>
</div>
<h4><span class="mw-headline" id="Verificando_status">Verificando status</span></h4>
<p><b>Páginas de manual</b> associadas a uma unit (conforme suportado pela unit):
</p>
<pre>$ systemctl help <i>unit</i>
</pre>
<p><b>Status</b> de uma unit, incluindo se está em execução ou não:
</p>
<pre>$ systemctl status <i>unit</i>
</pre>
<p><b>Verifica</b> se uma unit está habilitada ou não:
</p>
<pre>$ systemctl is-enabled <i>unit</i>
</pre>
<h4>
<span id="Iniciando.2C_reiniciando.2C_recarregando"></span><span class="mw-headline" id="Iniciando,_reiniciando,_recarregando">Iniciando, reiniciando, recarregando</span>
</h4>
<p><b>Inicia</b> uma unit imediatamente:
</p>
<pre># systemctl start <i>unit</i>
</pre>
<p><b>Para</b> uma unit imediatamente:
</p>
<pre># systemctl stop <i>unit</i>
</pre>
<p><b>Reinicia</b> uma unit:
</p>
<pre># systemctl restart <i>unit</i>
</pre>
<p><b>Recarrega</b> uma unit e sua configuração:
</p>
<pre># systemctl reload <i>unit</i>
</pre>
<p><b>Recarrega a configuração do gerente do systemd</b>, procurando por units novas ou alteradas:
</p>
<pre># systemctl daemon-reload
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Isso não pede as units alteradas que recarreguem suas próprias configurações. Veja o exemplo de <b>Recarrega</b> acima.</div>
<h4><span class="mw-headline" id="Habilitando">Habilitando</span></h4>
<p><b>Habilita</b> uma unit para iniciar automaticamente na inicialização:
</p>
<pre># systemctl enable <i>unit</i>
</pre>
<p><b>Habilita</b> uma unit para iniciar automaticamente na inicialização e <b>inicia-a</b> imediatamente:
</p>
<pre># systemctl enable --now <i>unit</i>
</pre>
<p><b>Desabilita</b> uma unit para não ser iniciada durante a inicialização:
</p>
<pre># systemctl disable <i>unit</i>
</pre>
<p><b>Reabilita</b> (ou seja, desabilita e habilita novamente) uma unit; por exemplo, no caso de sua seção <code>[Install]</code> tenha mudado da última vez que foi habilitada:
</p>
<pre># systemctl reenable <i>unit</i>
</pre>
<h4><span class="mw-headline" id="Mascarando">Mascarando</span></h4>
<p><b>Mascara</b> uma unit para tornar impossível iniciá-la (Tanto manualmente quanto como uma dependência, o que torna mascaragem perigoso):
</p>
<pre># systemctl mask <i>unit</i>
</pre>
<p><b>Desmascara</b> uma unit:
</p>
<pre># systemctl unmask <i>unit</i>
</pre>
<h3><span class="mw-headline" id="Gerenciamento_de_energia">Gerenciamento de energia</span></h3>
<p><a href="../en/Polkit.html" title="Polkit">polkit</a> é necessário para o gerenciamento de energia como um usuário sem privilégios. Se você está em uma sessão de usuário local <i>systemd-logind</i> e nenhuma outra sessão está ativa, os seguintes comandos funcionarão sem privilégios de root. Se não (por exemplo, porque outro usuário está conectado em um tty), <i>systemd</i> vai automaticamente pedir a senha de root.
</p>
<p>Desliga e reinicia o sistema:
</p>
<pre>$ systemctl reboot
</pre>
<p>Desliga e encerra o sistema:
</p>
<pre>$ systemctl poweroff
</pre>
<p>Suspende o sistema:
</p>
<pre>$ systemctl suspend
</pre>
<p>Coloca o sistema em modo de hibernação:
</p>
<pre>$ systemctl hibernate
</pre>
<p>Coloca o sistema em modo de suspensão híbrida:
</p>
<pre>$ systemctl hybrid-sleep
</pre>
<h2><span class="mw-headline" id="Escrevendo_arquivos_unit">Escrevendo arquivos unit</span></h2>
<p>A sintaxe de arquivos unit do <i>systemd</i> (<span class="plainlinks archwiki-template-man" title="$ man 5 systemd.unit"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.unit.5">systemd.unit(5)</a></span>) é inspirada nos <a href="../pt/Desktop_entries.html" title="Desktop entries (Português)">arquivos .desktop da XDG Desktop Entry Specification </a>, que por sua vez são inspirados nos <a href="https://en.wikipedia.org/wiki/pt:INI_(formato_de_arquivo)" class="extiw" title="wikipedia:pt:INI (formato de arquivo)">arquivos .ini do Microsoft Windows</a>. Os arquivos unit são carregados de vários localizações (para ver a lista completa, execute <code>systemctl show --property=UnitPath</code>), mas os principais são (listados da menor para a mais alta precedência):
</p>
<ul>
<li>
<code>/usr/lib/systemd/system/</code>: units fornecidas por pacotes instalados</li>
<li>
<code>/etc/systemd/system/</code>: units instaladas pelo administrador do sistema</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> 
<ul>
<li>Os caminhos de carregamento são completamente diferentes quando se está executando <i>systemd</i> em <a href="../en/Systemd/User.html#How_it_works" title="Systemd/User">modo usuário</a>.</li>
<li>Nomes de unit do systemd só podem conter caracteres alfanuméricos, sublinhados e pontos. Todos outros caracteres devem ser substituídos por escapes no estilo C "\x2d" ou deve-se empregar suas semânticas predefinidas ('@', '-'). Veja <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.unit"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.unit.5">systemd.unit(5)</a></span> e <span class="plainlinks archwiki-template-man" title="$ man 1 systemd-escape"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-escape.1">systemd-escape(1)</a></span> para mais informações.</li>
</ul>
</div>
<p>Veja as units instaladas por seus pacotes para exemplos, bem como em <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.service"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.service.5#EXAMPLES">systemd.service(5) § EXAMPLES</a></span>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> Comentários prefixados com <code>#</code> também podem ser usados em arquivos units, mas apenas em novas linhas. Não use comentários em fim de linha após parâmetros do <i>systemd</i> ou a unidade não conseguirá ativar.</div>
<h3>
<span id="Manuseando_depend.C3.AAncias"></span><span class="mw-headline" id="Manuseando_dependências">Manuseando dependências</span>
</h3>
<p>Com o <i>systemd</i>, dependências podem ser resolvidas através da concepção de arquivos unit corretamente. O caso mais típico é a unit <i>A</i> requerer a unit <i>B</i> para ser executada antes da <i>A</i> ser iniciada. Nesse caso, adicione <code>Requires=<i>B</i></code> e <code>After=<i>B</i></code> para a seção <code>[Unit]</code> de <i>A</i>. Se a dependência for opcional, então adicione <code>Wants=<i>B</i></code> e <code>After=<i>B</i></code>. Nota que <code>Wants=</code> e <code>Requires=</code> não implicam <code>After=</code>, significando que se <code>After=</code> não for especificado, as duas units serão iniciada em paralelo.
</p>
<p>Dependências são normalmente colocadas em serviços e não em <a href="#Targets">#Targets</a>. Por exemplo, o <code>network.target</code> é puxado por qualquer serviço que configure as interfaces de rede, portanto, ordenando a sua unit personalizada depois disso é o bastante desde que <code>network.target</code> é iniciado de qualquer maneira.
</p>
<h3>
<span id="Tipos_de_servi.C3.A7os"></span><span class="mw-headline" id="Tipos_de_serviços">Tipos de serviços</span>
</h3>
<p>Há vários tipos de execução diferentes a considerar quando se escreve um arquivo de serviço personalizado. Isso é definido com o parâmetro <code>Type=</code> na seção <code>[Service]</code>:
</p>
<ul>
<li>
<code>Type=simple</code> (padrão): <i>systemd</i> considera que o serviço seja iniciado imediatamente. O processo não deve fazer <i>fork</i>. Não use este tipo se outros serviços precisarem ser ordenados neste serviço, a menos que seja socket ativado.</li>
<li>
<code>Type=forking</code>: <i>systemd</i> considera que o serviço iniciou uma vez que o processo fez <i>fork</i> e o pai encerrou. Para daemons clássicos, use este tipo a menos que você saiba que ele não é necessário. Você deve especificar <code>PIDFile=</code> também, de forma que o <i>systemd</i> possa acompanhar o processo principal.</li>
<li>
<code>Type=oneshot</code>: este é útil para os scripts que fazem um trabalho único e, em seguida, saem. Você pode querer definir <code>RemainAfterExit=yes</code> também para que <i>systemd</i> ainda considere o serviço como ativo depois que o processo foi encerrado.</li>
<li>
<code>Type=notify</code>: idêntico ao <code>Type=simple</code>, mas com a condição de que o servidor enviará um sinal para <i>systemd</i> quando estiver pronto. A implementação de referência para essa notificação é fornecida por <i>libsystemd-daemon.so</i>.</li>
<li>
<code>Type=dbus</code>: o serviço é considerado pronto quando o <code>BusName</code> especificado aparece no barramento do sistema do DBus.</li>
<li>
<code>Type=idle</code>: <i>systemd</i>vai atrasar a execução do binário do serviço até todos os trabalhos serem despachados. Além desse comportamento, é muito similar a <code>Type=simple</code>.</li>
</ul>
<p>Veja a página man <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.service"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.service.5#OPTIONS">systemd.service(5) § OPTIONS</a></span> para uma explicação mais detalhada dos valores de <code>Type</code>.
</p>
<h3><span class="mw-headline" id="Editando_units_fornecidas">Editando units fornecidas</span></h3>
<p>Para evitar conflitos com o pacman, arquivos unit fornecidos por pacotes não devem ser editados diretamente. Há duas formas seguras de modificar um unit sem tocar no arquivo original: crie um novo arquivo unit que <a href="#Arquivos_unit_de_substitui%C3%A7%C3%A3o">se sobreponha ao unit original</a> ou crie <a href="#Arquivos_drop-in">trechos drop-in</a> que são aplicados sobre o unit original. Para ambos métodos, você deve recarregar o unit em seguida para aplicar suas alterações. Isso pode ser feito editando o unit com <code>systemctl edit</code> (que recarrega o unit automaticamente) ou recarregando todos os units com:
</p>
<pre># systemctl daemon-reload
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> 
<ul>
<li>Você pode usar <i>systemd-delta</i> para ver quais arquivos units foram sobrepostos ou estendidos e o que exatamente foi alterado.</li>
<li>Use <code>systemctl cat <i>unit</i></code> para ver o conteúdo de um arquivo unit e todos os trechos <i>drop-in</i> associados.</li>
</ul>
</div>
<h4>
<span id="Arquivos_unit_de_substitui.C3.A7.C3.A3o"></span><span class="mw-headline" id="Arquivos_unit_de_substituição">Arquivos unit de substituição</span>
</h4>
<p>Para substituir o arquivo unit <code>/usr/lib/systemd/system/<i>unit</i></code>, crie o arquivo <code>/etc/systemd/system/<i>unit</i></code> e <a href="../pt/Systemd.html#Habilitando" title="Systemd (Português)">reabilite</a> o unit para atualizar os links simbólicos.
</p>
<p>Alternativamente, execute:
</p>
<pre># systemctl edit --full <i>unit</i>
</pre>
<p>Isso abre <code>/etc/systemd/system/<i>unit</i></code> em seu editor (copiando a versão instalada se ela não existir ainda) e automaticamente a recarrega quando você finaliza a edição.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> As units de substituição continuarão sendo usadas mesmo que o Pacman atualize as units originais no futuro. Esse método dificulta a manutenção do sistema e, portanto, a próxima abordagem é a preferível.</div>
<h4><span class="mw-headline" id="Arquivos_drop-in">Arquivos drop-in</span></h4>
<p>Para criar arquivos <i>drop-in</i> para o arquivo de unidade <code>/usr/lib/systemd/system/<i>unit</i></code>, crie o diretório <code>/etc/systemd/system/<i>unit</i>.d/</code> e coloque arquivos <i>.conf</i> para substituir ou adicionar novas opções. <i>systemd</i> analisará e aplicará esses arquivos sobre a unit original.
</p>
<p>A forma mais fácil de fazer isso é executar:
</p>
<pre># systemctl edit <i>unit</i>
</pre>
<p>Isso abre o arquivo <code>/etc/systemd/system/<i>unit</i>.d/override.conf</code> em seu editor de texto (criando-o, se necessário) e recarrega automaticamente a unit quando você finalizar a edição.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Nem todas as chaves podem ser substituídas por arquivos drop-in. Por exemplo, para alterar <code>Conflicts=</code> um arquivo de substituição <a rel="nofollow" class="external text" href="https://lists.freedesktop.org/archives/systemd-devel/2017-June/038976.html">é necessário</a>.</div>
<h4>
<span id="Reverter_para_vers.C3.A3o_do_vendor"></span><span class="mw-headline" id="Reverter_para_versão_do_vendor">Reverter para versão do vendor</span>
</h4>
<p>Para reverter quaisquer alterações a uma unit feita usando <code>systemctl edit</code> faça:
</p>
<pre># systemctl revert <i>unit</i>
</pre>
<h4><span class="mw-headline" id="Exemplos">Exemplos</span></h4>
<p>Por exemplo, se você só quiser adicionar uma dependência adicional a uma unit, basta criar o seguinte arquivo:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/<i>unit</i>.d/dependenciapesonalizada.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Requires=<i>nova dependência</i>
After=<i>nova dependência</i></pre>
<p>Como outro exemplo, para substituir a diretiva <code>ExecStart</code> para uma unit que não é do tipo <code>oneshot</code>, crie o seguinte arquivo:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/<i>unit</i>.d/execpersonalizado</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
ExecStart=
ExecStart=<i>novo comando</i></pre>
<p>Note como <code>ExecStart</code> deve ser limpado antes de reatribuir <a rel="nofollow" class="external autonumber" href="https://bugzilla.redhat.com/show_bug.cgi?id=756787#c9">[1]</a>. O mesmo ocorre para todo item que pode ser especificado várias vezes, como <code>OnCalendar</code> para <i>timers</i>.
</p>
<p>Mais um exemplo para reiniciar automaticamente um serviço:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/<i>unit</i>.d/reiniciar.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
Restart=always
RestartSec=30</pre>
<h2><span class="mw-headline" id="Targets">Targets</span></h2>
<p>O <i>systemd</i> usa <i>targets</i> para agrupar units por meio de dependências e como pontos de sincronização padronizada. Eles servem a um propósito semelhante, como <a href="https://en.wikipedia.org/wiki/pt:N%C3%ADvel_de_execu%C3%A7%C3%A3o" class="extiw" title="wikipedia:pt:Nível de execução">níveis de execução</a>, mas agem um pouco diferentemente. Cada <i>target</i> é nomeado em vez de numerado e destina-se a servir uma finalidade específica com a possibilidade de ter múltiplos ativos ao mesmo tempo. Alguns <i>target</i>s são implementados herdando todos os serviços de outro <i>target</i> e adicionando serviços adicionais a ele. Há <i>target</i>s do <i>systemd</i>  que imitam os níveis de execução SystemVinit comuns para que possa mudar <i>target</i>s usando o comando familiar <code>telinit RUNLEVEL</code>.
</p>
<h3><span class="mw-headline" id="Obter_targets_atuais">Obter targets atuais</span></h3>
<p>O comando deve ser no <i>systemd</i> em vez de executar <code>runlevel</code>:
</p>
<pre>$ systemctl list-units --type=target
</pre>
<h3><span class="mw-headline" id="Criar_target_personalizado">Criar target personalizado</span></h3>
<p>Os níveis de execução que tinham um significado definido no sysvinit (ex.: 0, 1, 3, 5 e 6) têm um mapeamento 1:1 com um <i>target</i> de <i>systemd</i> específico. Infelizmente, não há nenhuma boa forma de fazer o mesmo com os níveis de execução definidos pelo usuário, como 2 e 4. Se você fizer uso deles é sugerido que você faça um <i>target</i> de <i>systemd</i> com um novo nome como <code>/etc/systemd/system/<i>seu target</i></code> que leva um dos níveis de execução existentes como base (você pode examinar <code>/usr/lib/systemd/system/graphical.target</code> como um exemplo), crie um diretório <code>/etc/systemd/system/<i>seu target</i>.wants</code>, e então faça um link simbólico dos serviços adicionais de <code>/usr/lib/systemd/system/</code> que você deseja ativar.
</p>
<h3>
<span id="Mapeamento_entre_n.C3.ADveis_do_SysV_e_targets_do_systemd"></span><span class="mw-headline" id="Mapeamento_entre_níveis_do_SysV_e_targets_do_systemd">Mapeamento entre níveis do SysV e targets do systemd</span>
</h3>
<table class="wikitable">
<tbody>
<tr>
<th>Nível de execução do SysV</th>
<th>Target do systemd</th>
<th>Notas
</th>
</tr>
<tr>
<td>0</td>
<td>runlevel0.target, poweroff.target</td>
<td>Interrrompe o sistema.
</td>
</tr>
<tr>
<td>1, s, único</td>
<td>runlevel1.target, rescue.target</td>
<td>Modo de usuário único.
</td>
</tr>
<tr>
<td>2, 4</td>
<td>runlevel2.target, runlevel4.target, multi-user.target</td>
<td>Níveis de execução User-defined/Site-specific. Por padrão, idêntico ao 3.
</td>
</tr>
<tr>
<td>3</td>
<td>runlevel3.target, multi-user.target</td>
<td>Multi-usuário, não-gráfico. Os usuários geralmente podem acessar através de múltiplos consoles ou via rede.
</td>
</tr>
<tr>
<td>5</td>
<td>runlevel5.target, graphical.target</td>
<td>Multi-usuário, gráfico. Normalmente tem todos os serviços do nível de execução 3, mais um login gráfico.
</td>
</tr>
<tr>
<td>6</td>
<td>runlevel6.target, reboot.target</td>
<td>Reiniciar
</td>
</tr>
<tr>
<td>emergência</td>
<td>emergency.target</td>
<td>Shell de emergência
</td>
</tr>
</tbody>
</table>
<h3><span class="mw-headline" id="Alterar_target_atual">Alterar target atual</span></h3>
<p>No <i>systemd</i>, targets são expostos via <i>units de targets</i>. Você pode alterá-los assim:
</p>
<pre># systemctl isolate graphical.target
</pre>
<p>Isso só vai mudar o target atual, e não tem nenhum efeito na próxima inicialização. É equivalente aos comandos como <code>telinit 3</code> ou <code>telinit 5</code> no Sysvinit.
</p>
<h3>
<span id="Alterar_target_padr.C3.A3o_para_inicializar"></span><span class="mw-headline" id="Alterar_target_padrão_para_inicializar">Alterar target padrão para inicializar</span>
</h3>
<p>O target padrão é <code>default.target</code>, que é um link simbólico para <code>graphical.target</code>. Basicamente, ele corresponde ao antigo nível de execução 5.
</p>
<p>Para verificar o target atual com <i>systemctl</i>:
</p>
<pre>$ systemctl get-default
</pre>
<p>Para alterar o target padrão a ser inicializado, altere o link simbólico <code>default.target</code>. Com <i>systemctl</i>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># systemctl set-default multi-user.target</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Removed /etc/systemd/system/default.target.
Created symlink /etc/systemd/system/default.target -&gt; /usr/lib/systemd/system/multi-user.target.</pre>
<p>Alternativamente, acrescente um dos seguintes <a href="../pt/Kernel_parameters.html" class="mw-redirect" title="Parâmetros do kernel">parâmetros do kernel</a> a seu gerenciador de boot:
</p>
<ul>
<li>
<code>systemd.unit=multi-user.target</code> (que basicamente corresponde ao antigo nível de execução 3),</li>
<li>
<code>systemd.unit=rescue.target</code> (que basicamente corresponde ao antigo nível de execução 1).</li>
</ul>
<h3>
<span id="Ordem_de_target_padr.C3.A3o"></span><span class="mw-headline" id="Ordem_de_target_padrão">Ordem de target padrão</span>
</h3>
<p>O systemd escolher o <code>default.target</code> conforme a ordem a seguir:
</p>
<ol>
<li>Parâmetro de kernel mostrado acima</li>
<li>Link simbólico de <code>/etc/systemd/system/default.target</code>
</li>
<li>Link simbólico de <code>/usr/lib/systemd/system/default.target</code>
</li>
</ol>
<h2><span class="mw-headline" id="Componentes_do_systemd">Componentes do systemd</span></h2>
<p>Alguns componentes (não exaustivos) do systemd são:
</p>
<ul>
<li>
<a href="../pt/Systemd-boot.html" title="Systemd-boot (Português)">systemd-boot</a> — simples <a href="../pt/Arch_boot_process.html#Gerenciador_de_boot" class="mw-redirect" title="Gerenciador de boot">gerenciador de boot</a> UEFI;</li>
<li>
<a href="../en/Systemd-firstboot.html" title="Systemd-firstboot">systemd-firstboot</a> — inicialização da configuração básica do sistema antes da primeira inicialização;</li>
<li>
<a href="../pt/Systemd-homed.html" title="Systemd-homed (Português)">systemd-homed</a> — <a href="../pt/Users_and_groups.html" title="Users and groups (Português)">contas</a> portáteis de usuário humano;</li>
<li>
<a rel="nofollow" class="external text" href="https://dvdhrm.wordpress.com/2013/08/24/session-management-on-linux/">systemd-logind</a> — gerenciamento de sessão;</li>
<li>
<a href="../en/Systemd-networkd.html" title="Systemd-networkd">systemd-networkd</a> — gerenciamento de <a href="../pt/Network_configuration.html" class="mw-redirect" title="Configuração de rede">configuração de rede</a>;</li>
<li>
<a href="../en/Systemd-nspawn.html" title="Systemd-nspawn">systemd-nspawn</a> — contêiner de namespace leve;</li>
<li>
<a href="../en/Systemd-resolved.html" title="Systemd-resolved">systemd-resolved</a> — <a href="../pt/Domain_name_resolution.html" title="Domain name resolution (Português)">resolução de nome</a> de rede;</li>
<li>
<span class="plainlinks archwiki-template-man" title="$ man 8 systemd-sysusers"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-sysusers.8">systemd-sysusers(8)</a></span> — cria usuários e grupos do sistema e adiciona usuários a grupos na instalação do pacote ou na inicialização;</li>
<li>
<a href="../en/Systemd-timesyncd.html" title="Systemd-timesyncd">systemd-timesyncd</a> — sincronização da <a href="../en/System_time.html" title="System time">hora do sistema</a> na rede;</li>
<li>
<a href="../pt/508d3afdfb62d49d74039238ef71cd04.html" title="Systemd (Português)/Journal (Português)">systemd/Journal</a> — registro do sistema;</li>
<li>
<a href="../pt/af7c34017c1457f128a3bb40b9913e94.html" title="Systemd (Português)/Timers (Português)">systemd/Timers</a> — cronômetros monotônicos ou em tempo real para controlar arquivos ou eventos <code>.service</code>,  alternativa razoável ao <a href="../en/Cron.html" title="Cron">cron</a>.</li>
</ul>
<h3><span class="mw-headline" id="systemd.mount_-_montagem">systemd.mount - montagem</span></h3>
<p>O <i>systemd</i> é responsável pela montagem das partições e sistemas de arquivos especificados em <code>/etc/fstab</code>. O <span class="plainlinks archwiki-template-man" title="$ man 8 systemd-fstab-generator"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-fstab-generator.8">systemd-fstab-generator(8)</a></span> converte todas as entradas em <code>/etc/fstab</code> em unidades do systemd, isso é executado no momento da inicialização e sempre que a configuração do gerenciador de sistema é recarregada.
</p>
<p>O <i>systemd</i> estende as capacidades usuais do <a href="../pt/Fstab.html" title="Fstab (Português)">fstab</a> e oferece opções adicionais de montagem. Eles afetam as dependências da unidade de montagem, eles podem, por exemplo, garantir que uma montagem seja realizada apenas quando a rede estiver ativa ou apenas quando outra partição for montada. A lista completa de opções de montagem específicas do <i>systemd</i>, normalmente prefixadas com <code>x-systemd.</code>, É detalhada em <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.mount"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.mount.5#FSTAB">systemd.mount(5) § FSTAB</a></span>.
</p>
<p>Um exemplo dessas opções de montagem no contexto de <i>montagem automática</i>, que significa montagem apenas quando o recurso é necessário, em vez de automaticamente no momento da inicialização, é fornecido em <a href="../pt/Fstab.html#Automontagem_com_systemd" title="Fstab (Português)">fstab (Português)#Automontagem com systemd</a>.
</p>
<h4>
<span id="Montagem_autom.C3.A1tica_de_parti.C3.A7.C3.A3o_GPT"></span><span class="mw-headline" id="Montagem_automática_de_partição_GPT">Montagem automática de partição GPT</span>
</h4>
<p>Em um disco particionado <a href="../pt/Partitioning.html#Tabela_de_Parti%C3%A7%C3%A3o_GUID" class="mw-redirect" title="GPT (Português)">GPT</a>, o <span class="plainlinks archwiki-template-man" title="$ man 8 systemd-gpt-auto-generator"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-gpt-auto-generator.8">systemd-gpt-auto-generator(8)</a></span> montará partições seguindo a <a rel="nofollow" class="external text" href="https://systemd.io/DISCOVERABLE_PARTITIONS/">Especificação de partições detectáveis</a>, portanto, podem ser omitidas de <code>fstab</code>.
</p>
<p>A montagem automática de <a href="../pt/EFI_system_partition.html" title="EFI system partition (Português)">partição do sistema EFI</a> requer que o carregador de inicialização defina a variável EFI <a rel="nofollow" class="external text" href="https://systemd.io/BOOT_LOADER_INTERFACE/">LoaderDevicePartUUID</a>. Apenas <a href="../pt/Systemd-boot.html" title="Systemd-boot (Português)">systemd-boot</a> é conhecido por fazer isso.
</p>
<p>Para que a montagem automática de <code>/var</code> e <code>/var/tmp</code> funcione, o PARTUUID deve corresponder ao hash SHA256 HMAC do tipo de partição UUID codificado pela ID da máquina. O PARTUUID necessário pode ser obtido usando: 
</p>
<pre>$ systemd-id128 -u --app-specific=<i>partição-tipo-UUID</i> id-da-máquina
</pre>
<p>Substitua <code><i>partição-tipo-UUID</i></code> pelo valor de UUID do tipo de partição apropriado da <a rel="nofollow" class="external text" href="https://systemd.io/DISCOVERABLE_PARTITIONS/">Especificação de Partições Detectáveis</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> <span class="plainlinks archwiki-template-man" title="$ man 1 systemd-id128"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-id128.1">systemd-id128(1)</a></span> lê a ID da máquina de <code>/etc/machine-id</code>, isso torna impossível saber o PARTUUID necessário antes que o sistema seja instalado.</div>
<p>A montagem automática de uma partição pode ser desabilitada alterando o <a href="https://en.wikipedia.org/wiki/pt:Tabela_de_Parti%C3%A7%C3%A3o_GUID#Tipos_de_parti.C3.A7.C3.A3o_GUID" class="extiw" title="wikipedia:pt:Tabela de Partição GUID">tipo GUID</a> da partição ou definindo o atributo de partição bit 63 "não montar automaticamente", consulte <a href="../en/GPT_fdisk.html#Prevent_GPT_partition_automounting" class="mw-redirect" title="Gdisk">gdisk#Prevent GPT partition automounting</a>.
</p>
<h3><span class="mw-headline" id="systemd-sysvcompat">systemd-sysvcompat</span></h3>
<p>A função principal do <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=systemd-sysvcompat">systemd-sysvcompat</a></span> (requerido por <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=base">base</a></span>) é fornecer o binário tradicional do linux <a href="../pt/Init.html" title="Init (Português)">init</a>. Para sistemas controlados pelo systemd, <code>init</code> é apenas um link simbólico para seu executável <code>systemd</code>.
</p>
<p>Além disso, ele também fornece 4 atalhos de conveniência aos quais os usuários do <a href="../en/SysVinit.html" title="SysVinit">SysVinit</a> podem estar acostumados. Os atalhos de conveniência são <span class="plainlinks archwiki-template-man" title="$ man 8 halt"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/halt.8">halt(8)</a></span>, <span class="plainlinks archwiki-template-man" title="$ man 8 poweroff"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/poweroff.8">poweroff(8)</a></span>, <span class="plainlinks archwiki-template-man" title="$ man 8 reboot"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/reboot.8">reboot(8)</a></span> e <span class="plainlinks archwiki-template-man" title="$ man 8 shutdown"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/shutdown.8">shutdown(8)</a></span>. Cada um desses 4 comandos é um link simbólico para <code>systemctl</code>, e governado pelo comportamento do systemd. Portanto, a discussão em <a href="../pt/Systemd.html#Gerenciamento_de_energia" title="Systemd (Português)">#Gerenciamento de energia</a> se aplica.
</p>
<p>Os sistemas baseados em Systemd podem desistir dos métodos de compatibilidade do System V usando o <a href="../pt/Kernel_parameters.html#Lista_de_par%C3%A2metros" title="Kernel parameters (Português)">parâmetro de boot</a> <code>init=</code>  (consulte, por exemplo, <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=233387">[solved] /bin/init is in systemd-sysvcompat ?</a>) e argumentos de comando do <code>systemctl</code>, nativo do systemd .
</p>
<h3>
<span id="systemd-tmpfiles_-_arquivos_tempor.C3.A1rios"></span><span class="mw-headline" id="systemd-tmpfiles_-_arquivos_temporários">systemd-tmpfiles - arquivos temporários</span>
</h3>
<p>O "<i>systemd-tmpfiles</i> cria, apaga e limpa arquivos e diretórios temporários e voláteis." Ele lê os arquivos de configuração em <code>/etc/tmpfiles.d/</code> e <code>/usr/lib/tmpfiles.d/</code> para descobrir quais ações executar. Os arquivos de configuração do diretório anterior têm precedência sobre os do diretório anterior.
</p>
<p>Os arquivos de configuração geralmente são fornecidos junto com os arquivos de serviço e são nomeados no estilo de <code>/usr/lib/tmpfiles.d/<i>programa</i>.conf</code>. Por exemplo, o daemon <a href="../en/Samba.html" title="Samba">Samba</a> espera que o diretório <code>/run/samba</code> exista e tenha as permissões corretas. Portanto, o pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=samba">samba</a></span> vem com esta configuração:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/lib/tmpfiles.d/samba.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">D /run/samba 0755 root root
</pre>
<p>Os arquivos de configuração também podem ser usados para gravar valores em certos arquivos na inicialização. Por exemplo, se você usou <code>/etc/rc.local</code> para desativar a ativação de dispositivos USB com <code>echo USBE &gt; /proc/acpi/wakeup</code>, você pode usar o seguinte arquivo tmp:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/tmpfiles.d/disable-usb-wake.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#    Caminho               Modo UID  GID  Age Argumento
w    /proc/acpi/wakeup     -    -    -    -   USBE
</pre>
<p>Veja as páginas do manual <span class="plainlinks archwiki-template-man" title="$ man 8 systemd-tmpfiles"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-tmpfiles.8">systemd-tmpfiles(8)</a></span> e <span class="plainlinks archwiki-template-man" title="$ man 5 tmpfiles.d"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/tmpfiles.d.5">tmpfiles.d(5)</a></span> para detalhes.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Este método pode não funcionar para definir opções em <code>/sys</code> uma vez que o serviço <i>systemd-tmpfiles-setup</i> pode ser executado antes que os módulos de dispositivo apropriados sejam carregados. Neste caso, você pode verificar se o módulo tem um parâmetro para a opção que você deseja definir com <code>modinfo <i>módulo</i></code> e definir esta opção com um <a href="../pt/Kernel_module.html#Op%C3%A7%C3%B5es_de_configura%C3%A7%C3%A3o_de_m%C3%B3dulos" title="Kernel module (Português)">arquivo de configuração em /etc/modprobe.d</a>. Caso contrário, você terá que escrever uma <a href="../en/Udev.html#About_udev_rules" title="Udev">regra do udev</a> para definir o atributo apropriado assim que o dispositivo aparecer.</div>
<h2><span class="mw-headline" id="Dicas_e_truques">Dicas e truques</span></h2>
<h3>
<span id="Ferramentas_de_configura.C3.A7.C3.A3o_GUI"></span><span class="mw-headline" id="Ferramentas_de_configuração_GUI">Ferramentas de configuração GUI</span>
</h3>
<ul><li>
<b>systemadm</b> — Navegador gráfico para as units do systemd. Ele pode mostrar a lista de units, possivelmente filtradas por tipo.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://cgit.freedesktop.org/systemd/systemd-ui/">https://cgit.freedesktop.org/systemd/systemd-ui/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=systemd-ui">systemd-ui</a></span>
</dd></dl>
<ul><li>
<b>SystemdGenie</b> — Utilitário de gerenciamento systemd baseado em tecnologias KDE.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://invent.kde.org/system/systemdgenie">https://invent.kde.org/system/systemdgenie</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=systemdgenie">systemdgenie</a></span>
</dd></dl>
<h3>
<span id="Executando_servi.C3.A7os_ap.C3.B3s_a_rede_estar_ativa"></span><span class="mw-headline" id="Executando_serviços_após_a_rede_estar_ativa">Executando serviços após a rede estar ativa</span>
</h3>
<p>Para atrasar um serviço até depois que a rede está ativa, inclua as seguintes dependências no arquivo <i>.service</i>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/<i>foo</i>.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
...
Wants=network-online.target
After=network-online.target
...</pre>
<p>O serviço de espera de rede do aplicativo específico que gerencia a rede também deve ser ativado para que <code>network-online.target</code> reflita adequadamente o status da rede.
</p>
<ul>
<li>Se estiver usando <a href="../pt/NetworkManager.html" title="NetworkManager (Português)">NetworkManager</a>, <code>NetworkManager-wait-online.service</code> está habilitado com <code>NetworkManager.service</code>. Verifque se neste caso com <code>systemctl is-enabled NetworkManager-wait-online.service</code>. Se ele não estiver habilitado, então <a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Reabilite">reabilite</a> <code>NetworkManager.service</code>.</li>
<li>No caso de <a href="../en/Netctl.html" title="Netctl">netctl</a>, <a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Habilite">habilite</a> o <code>netctl-wait-online.service</code>.</li>
<li>Se estiver usando <a href="../en/Systemd-networkd.html" title="Systemd-networkd">systemd-networkd</a>, <code>systemd-networkd-wait-online.service</code> é habilitado com <code>systemd-networkd.service</code>. Verifique se este é o caso com <code>systemctl is-enabled systemd-networkd-wait-online.service</code>. Se ele não estiver habilitado, então <a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Reabilite">reabilite</a> <code>systemd-networkd.service</code>.</li>
</ul>
<p>Para explicações mais detalhadas, veja <a rel="nofollow" class="external text" href="https://www.freedesktop.org/wiki/Software/systemd/NetworkTarget/">Running services after the network is up</a> no wiki do systemd.
</p>
<p>Se um serviço precisar realizar consultas DNS, ele também deve ser solicitado após <code>nss-lookup.target</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/<i>foo</i>.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
...
Wants=network-online.target
After=network-online.target nss-lookup.target
...</pre>
<p>Veja <span class="plainlinks archwiki-template-man" title="$ man 7 systemd.special"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.special.7#Special_Passive_System_Units">systemd.special(7) § Special Passive System Units</a></span>.
</p>
<p>Para que <code>nss-lookup.target</code> tenha algum efeito, ele precisa de um serviço que o extraia via <code>Wants=nss-lookup.target</code> e se ordena antes dele com <code>Before=nss-lookup.target</code>. Normalmente, isso é feito por <a href="../pt/Domain_name_resolution.html#Servidores_DNS" class="mw-redirect" title="Resolvedor de DNS">Resolvedores de DNS</a> locais.
</p>
<p>Verifique qual serviço ativo, se houver, está puxando <code>nss-lookup.target</code> com:
</p>
<pre>$ systemctl list-dependencies --reverse nss-lookup.target
</pre>
<h3>
<span id="Habilitar_units_instaladas_por_padr.C3.A3o"></span><span class="mw-headline" id="Habilitar_units_instaladas_por_padrão">Habilitar units instaladas por padrão</span>
</h3>
<p>O Arch Linux vem com <code>/usr/lib/systemd/system-preset/99-default.preset</code> contendo <code>disable *</code>. Isso faz com que o <i>systemctl preset</i> desabilite todas as unidades por padrão, de forma que quando um novo pacote é instalado, o usuário deve habilitar manualmente a unit.
</p>
<p>Se este comportamento não for desejado, basta criar um link simbólico de <code>/etc/systemd/system-preset/99-default.preset</code> para <code>/dev/null</code> para sobrescrever o arquivo de configuração. Isso fará com que o <i>systemctl preset</i> habilite todas as units que forem instaladas – independentemente do tipo de unit – a menos que especificado em outro arquivo em um dos diretórios de configuração do <i>systemctl preset</i>. Units de usuário não são afetadas. Veja <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.preset"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.preset.5">systemd.preset(5)</a></span> para mais informações.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Habilitar todas as units por padrão pode causar problemas com pacotes que contêm duas ou mais unidades mutuamente exclusivas. O <i>systemctl preset</i> é projetado para ser usado por distribuições ou administradores de sistema. No caso em que duas units conflitantes seriam habilitadas, você deve especificar explicitamente qual delas deve ser desabilitada em um arquivo de configuração predefinido, conforme especificado em <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.preset"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.preset.5">systemd.preset(5)</a></span>.</div>
<h3><span class="mw-headline" id="Usando_ambientes_de_aplicativos_em_sandbox">Usando ambientes de aplicativos em <i>sandbox</i></span></h3>
<p>Um arquivo de unit pode ser criado como uma <i>sandbox</i> para isolar aplicativos e seus processos em um ambiente virtual reforçado. O systemd alavanca <a href="https://en.wikipedia.org/wiki/Linux_namespaces" class="extiw" title="wikipedia:Linux namespaces">espaços de nomes</a>, lista de permitidos/negados de <a href="../pt/Capabilities.html" class="mw-redirect" title="Capacidades">capacidades</a> e <a href="../en/Cgroups.html" class="mw-redirect" title="Control groups">grupos de controle</a> ("cgroups") para processos contêineres através de uma extensa configuração do ambiente de execução—<span class="plainlinks archwiki-template-man" title="$ man 5 systemd.exec"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.exec.5">systemd.exec(5)</a></span>.
</p>
<p>O aprimoramento de um arquivo existente de unit do systemd com um aplicativo de <i>sandboxing</i> normalmente requer testes de tentativa e erro acompanhados pelo uso generoso de <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=strace">strace</a></span>, <a href="https://en.wikipedia.org/wiki/pt:Fluxos_padr%C3%A3o#Erro_padr.C3.A3o_.28stderr.29" class="extiw" title="wikipedia:pt:Fluxos padrão">stderr</a> e facilidades de saída e registro de erro do <span class="plainlinks archwiki-template-man" title="$ man 1 journalctl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/journalctl.1">journalctl(1)</a></span>. Você pode querer pesquisar primeiro a documentação original para testes já feitos para basear os testes. Para obter um ponto de partida para as possível opções de segurança, execute
</p>
<pre>$ systemd-analyze security <i>unit</i>
</pre>
<p>Alguns exemplos de como o <i>sandboxing</i> com systemd pode ser implementado:
</p>
<ul><li>
<code>CapabilityBoundingSet</code> define uma lista de capacidades (<span class="plainlinks archwiki-template-man" title="$ man 7 capabilities"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/capabilities.7">capabilities(7)</a></span>) que são permitidas ou negadas para uma unit. Veja <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.exec"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.exec.5#CAPABILITIES">systemd.exec(5) § CAPABILITIES</a></span>.
<ul><li>A capacidade <code>CAP_SYS_ADM</code>, por exemplo, que deve ser um dos <a rel="nofollow" class="external text" href="https://lwn.net/Articles/486306/">objetivos de um sandbox seguro</a>: <code>CapabilityBoundingSet=~ CAP_SYS_ADM</code>
</li></ul>
</li></ul>
<h3>
<span id="Notifica.C3.A7.C3.A3o_sobre_servi.C3.A7os_com_falha"></span><span class="mw-headline" id="Notificação_sobre_serviços_com_falha">Notificação sobre serviços com falha</span>
</h3>
<p>In order to notify about service failures, a <code>OnFailure=</code> directive needs to be added to the according service file, for example by using a <a href="#Drop-in_files">drop-in configuration file</a>. Adding this directive to every service unit can be achieved with a top-level drop-in configuration file. For details about top-level drop-ins, see <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.unit"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.unit.5">systemd.unit(5)</a></span>.
</p>
<p>Create a top-level drop-in for services:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/service.d/toplevel-override.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
OnFailure=failure-notification@%n</pre>
<p>This adds <code>OnFailure=failure-notification@%n</code> to every service file. If <i>some_service_unit</i> fails, <code>failure-notification@<i>some_service_unit</i></code> will be started to handle the notification delivery (or whatever task it is configured to perform).
</p>
<p>Create the <code>failure-notification@</code> template unit:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/failure-notification@.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Send a notification about a failed systemd unit
After=network.target

[Service]
Type=simple
ExecStart=/<i>path</i>/<i>to</i>/failure-notification.sh %i</pre>
<p>You can create the <code>failure-notification.sh</code> script and define what to do or how to notify (mail, gotify, xmpp, etc.). The <code>%i</code> will be the name of the failed service unit and will be passed as argument to the script.
</p>
<p>In order to prevent a regression for instances of <code>failure-notification@.service</code>, create an empty drop-in configuration file with the same name as the top-level drop-in (the empty service-level drop-in configuration file takes precedence over the top-level drop-in and overrides the latter one):
</p>
<pre># mkdir -p /etc/systemd/system/failure-notification@.service.d
# touch /etc/systemd/system/failure-notification@.service.d/toplevel-override.conf
</pre>
<h2>
<span id="Solu.C3.A7.C3.A3o_de_problemas"></span><span class="mw-headline" id="Solução_de_problemas">Solução de problemas</span>
</h2>
<h3>
<span id="Investigar_servi.C3.A7os_que_falharam"></span><span class="mw-headline" id="Investigar_serviços_que_falharam">Investigar serviços que falharam</span>
</h3>
<p>Para encontrar os serviços <i>systemd</i> que falharam em iniciar:
</p>
<pre>$ systemctl --state=failed
</pre>
<p>Para encontrar o porquê de eles terem falhado, examine a saída do log. Consulte <a href="../pt/508d3afdfb62d49d74039238ef71cd04.html#Filtrando_sa%C3%ADda" title="Systemd (Português)/Journal (Português)">systemd/Journal#Filtrando saída</a> para detalhes.
</p>
<h3>
<span id="Diagnosticar_problemas_de_inicializa.C3.A7.C3.A3o"></span><span class="mw-headline" id="Diagnosticar_problemas_de_inicialização">Diagnosticar problemas de inicialização</span>
</h3>
<p>O <i>systemd</i> tem várias opções para diagnosticar problemas com o processo de inicialização. Veja <a href="../en/General_troubleshooting.html#Boot_problems" class="mw-redirect" title="Boot debugging">Depuração de inicialização</a> para instruções mais gerais e opções para capturar mensagens de inicialização antes que o <i>systemd</i> assuma o <a href="../pt/Arch_boot_process.html" class="mw-redirect" title="Processo de inicialização">processo de inicialização</a>. Veja também a <a rel="nofollow" class="external text" href="https://freedesktop.org/wiki/Software/systemd/Debugging/">documentação de depuração do systemd</a>.
</p>
<h3>
<span id="Diagnosticar_um_servi.C3.A7o"></span><span class="mw-headline" id="Diagnosticar_um_serviço">Diagnosticar um serviço</span>
</h3>
<p>Se algum serviço do <i>systemd</i> se comportar mal ou você quiser obter mais informações sobre o que está acontecendo, defina a <a href="../pt/Environment_variables.html" class="mw-redirect" title="Variável de ambiente">variável de ambiente</a> <code>SYSTEMD_LOG_LEVEL</code> com <code>debug</code>. Por exemplo, para executar o daemon <i>systemd-networkd</i> no modo de depuração:
</p>
<p>Adicione um <a href="#Arquivos_drop-in">arquivo <i>drop-in</i></a> para o serviço adicionando as duas linhas:
</p>
<pre>[Service]
Environment=SYSTEMD_LOG_LEVEL=debug
</pre>
<p>Ou, de forma equivalente, defina a variável de ambiente manualmente:
</p>
<pre># SYSTEMD_LOG_LEVEL=debug /lib/systemd/systemd-networkd
</pre>
<p>então, <a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Reinicie">reinicie</a> <i>systemd-networkd</i> e monitore o journal para o serviço com a opção <code>-f</code>/<code>--follow</code>.
</p>
<h3>
<span id="Desligamento.2Freinicializa.C3.A7.C3.A3o_demora_demais"></span><span class="mw-headline" id="Desligamento/reinicialização_demora_demais">Desligamento/reinicialização demora demais</span>
</h3>
<p>Se o processo de desligamento leva um tempo muito longo (ou parece estar congelado) muito provavelmente um serviço que não se encerra é o responsável. O <i>systemd</i> espera um tempo para cada serviço encerrar antes de tentar matá-lo. Para descobrir se você foi afetado, veja <a rel="nofollow" class="external text" href="https://freedesktop.org/wiki/Software/systemd/Debugging#Shutdown_Completes_Eventually">esse artigo</a>.
</p>
<h3>
<span id="Processos_de_curta_dura.C3.A7.C3.A3o_n.C3.A3o_parecem_registrar_qualquer_sa.C3.ADda"></span><span class="mw-headline" id="Processos_de_curta_duração_não_parecem_registrar_qualquer_saída">Processos de curta duração não parecem registrar qualquer saída</span>
</h3>
<p>Se <code>journalctl -u foounit</code> não mostra nenhuma saída para um serviço de curta duração, veja o PID em vez disso. Por exemplo, se <code>systemd-modules-load.service</code> falha, e <code>systemctl status systemd-modules-load</code> mostra que executou com PID 123, então você talvez possa ver uma saída no journal por esse PID, ou seja, <code>journalctl -b _PID=123</code>. Campos de metadados para o journal como <code>_SYSTEMD_UNIT</code> e <code>_COMM</code> são coletados de forma assíncrona e invocam o diretório <code>/proc</code> para o processo existente. A solução deste problema requer fixar o kernel para fornecer esses dados através de uma conexão de socket, semelhante ao <code>SCM_CREDENTIALS</code>. Em resumo, é um <a rel="nofollow" class="external text" href="https://github.com/systemd/systemd/issues/2913">erro</a>. Tenha em mente que os serviços imediatamente falhos podem não imprimir nada para o journal conforme o design do systemd.
</p>
<h3>
<span id="Tempo_de_inicializa.C3.A7.C3.A3o_aumentando_com_o_tempo"></span><span class="mw-headline" id="Tempo_de_inicialização_aumentando_com_o_tempo">Tempo de inicialização aumentando com o tempo</span>
</h3>
<p>Depois de usar o <code>systemd-analyze</code>, vários usuários notaram que o tempo de inicialização aumentou significativamente em comparação com o que costumava ser. Depois de usar <code>systemd-analyse blame</code>, o <a href="../pt/NetworkManager.html" title="NetworkManager (Português)">NetworkManager</a> está sendo relatado como tendo uma quantidade anormalmente grande de tempo para iniciar.
</p>
<p>O problema para alguns usuários foi devido a <code>/var/log/journal</code> se tornar muito grande. Isso pode ter outros impactos no desempenho, como <code>systemctl status</code> ou <code>journalctl</code>. Como tal, a solução é remover todos os arquivos dentro da pasta (idealmente fazendo um backup em algum lugar, pelo menos temporariamente) e, em seguida, definindo um limite de tamanho de arquivo de diário conforme descrito em <a href="../pt/508d3afdfb62d49d74039238ef71cd04.html#Limite_no_tamanho_do_journal" class="mw-redirect" title="Systemd/Journal (Português)">systemd/Journal (Português)#Limite no tamanho do journal</a>.
</p>
<h3>
<span id="systemd-tmpfiles-setup.service_n.C3.A3o_inicia_na_inicializa.C3.A7.C3.A3o_do_sistema"></span><span class="mw-headline" id="systemd-tmpfiles-setup.service_não_inicia_na_inicialização_do_sistema">systemd-tmpfiles-setup.service não inicia na inicialização do sistema</span>
</h3>
<p>A partir do systemd 219, <code>/usr/lib/tmpfiles.d/systemd.conf</code> especifica os atributos da ACL para os diretórios sob <code>/var/log/journal</code> e, portanto, requer que o suporte da ACL seja ativada para o sistema de arquivos em que o journal reside.
</p>
<p>Veja <a href="../pt/Access_Control_Lists.html#Habilitar_ACL" class="mw-redirect" title="Listas de Controle de Acesso">Listas de Controle de Acesso#Habilitar ACL</a> para instruções sobre como habilitar ACL no sistema de arquivos que hospeda <code>/var/log/journal</code>.
</p>
<h3>
<span id="Desabilitar_modo_de_emerg.C3.AAncia_em_m.C3.A1quina_remota"></span><span class="mw-headline" id="Desabilitar_modo_de_emergência_em_máquina_remota">Desabilitar modo de emergência em máquina remota</span>
</h3>
<p>Você pode desabilitar o modo de emergência em uma máquina remota, por exemplo, uma máquina virtual hospedada no Azure ou no Google Cloud. É porque se o modo de emergência for acionado, a máquina será bloqueada de se conectar à rede.
</p>
<pre># systemctl mask emergency.service
# systemctl mask emergency.target
</pre>
<h2>
<span id="Veja_tamb.C3.A9m"></span><span class="mw-headline" id="Veja_também">Veja também</span>
</h2>
<ul>
<li><a href="https://en.wikipedia.org/wiki/pt:systemd" class="extiw" title="wikipedia:pt:systemd">Wikipedia:pt:systemd</a></li>
<li>
<a rel="nofollow" class="external text" href="https://www.freedesktop.org/wiki/Software/systemd">Site oficial do systemd</a>
<ul>
<li><a rel="nofollow" class="external text" href="https://www.freedesktop.org/wiki/Software/systemd/Optimizations">Otimizações do systemd</a></li>
<li><a rel="nofollow" class="external text" href="https://www.freedesktop.org/wiki/Software/systemd/FrequentlyAskedQuestions">FAQ do systemd</a></li>
<li><a rel="nofollow" class="external text" href="https://www.freedesktop.org/wiki/Software/systemd/TipsAndTricks">Dicas e truques do systemd</a></li>
</ul>
</li>
<li><a rel="nofollow" class="external text" href="https://www.freedesktop.org/software/systemd/man/">Páginas man</a></li>
<li>Outras distribuições:
<ul>
<li><a href="https://wiki.gentoo.org/wiki/Systemd" class="extiw" title="gentoo:Systemd">Gentoo:Systemd</a></li>
<li><a href="https://fedoraproject.org/wiki/Systemd" class="extiw" title="fedora:Systemd">Fedora:Systemd</a></li>
<li><a href="https://fedoraproject.org/wiki/How_to_debug_Systemd_problems" class="extiw" title="fedora:How to debug Systemd problems">Fedora:How to debug Systemd problems</a></li>
<li><a href="https://fedoraproject.org/wiki/SysVinit_to_Systemd_Cheatsheet" class="extiw" title="fedora:SysVinit to Systemd Cheatsheet">Fedora:SysVinit to Systemd Cheatsheet</a></li>
<li><a href="https://wiki.debian.org/systemd" class="extiw" title="debian:systemd">Debian:systemd</a></li>
</ul>
</li>
<li>
<a rel="nofollow" class="external text" href="http://0pointer.de/blog/projects/systemd.html">História do blogue do Lennart</a>, <a rel="nofollow" class="external text" href="http://0pointer.de/blog/projects/systemd-update.html">atualização 1</a>, <a rel="nofollow" class="external text" href="http://0pointer.de/blog/projects/systemd-update-2.html">atualização 2</a>, <a rel="nofollow" class="external text" href="http://0pointer.de/blog/projects/systemd-update-3.html">atualização 3</a>, <a rel="nofollow" class="external text" href="http://0pointer.de/blog/projects/why.html">resumo</a>
</li>
<li><a rel="nofollow" class="external text" href="http://0pointer.de/public/systemd-ebook-psankar.pdf">systemd para administradores (PDF)</a></li>
<li><a rel="nofollow" class="external text" href="https://www.digitalocean.com/community/tutorials/how-to-use-systemctl-to-manage-systemd-services-and-units">Como usar o systemctl para gerenciar serviços e units do systemd</a></li>
<li><a rel="nofollow" class="external text" href="https://dvdhrm.wordpress.com/2013/08/24/session-management-on-linux/">Gerenciamento de sessão com systemd-logind</a></li>
<li><a href="../en/Emacs.html#Syntax_highlighting_for_systemd_Files" title="Emacs">Realce de sintaxe do Emacs para arquivos do systemd</a></li>
<li>Artigo introdutório em <a rel="nofollow" class="external text" href="http://www.h-online.com/open/features/Control-Centre-The-systemd-Linux-init-system-1565543.html">duas</a> <a rel="nofollow" class="external text" href="http://www.h-online.com/open/features/Booting-up-Tools-and-tips-for-systemd-1570630.html">partes</a> na revista <i>The H Open</i>.</li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../pt/Category:Init.html" title="Category:Init (Português)">Init (Português)</a></li></ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Systemd_(Portugu%C3%AAs)&amp;oldid=654444">https://wiki.archlinux.org/index.php?title=Systemd_(Português)&amp;oldid=654444</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 10 March 2021, at 18:41.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
