<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Network configuration (Português) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Network_configuration_Português rootpage-Network_configuration_Português skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Network configuration (Português)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Status de tradução:</strong> Esse artigo é uma tradução de <a href="/title/Network_configuration" title="Network configuration">Network configuration</a>. Data da última tradução: 2020-07-06. Você pode ajudar a sincronizar a tradução, se houver <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Network_configuration&amp;diff=0&amp;oldid=618883">alterações</a> na versão em inglês.</div>
<div class="archwiki-template-meta-related-articles-start">
<p>Artigos relacionados</p>
<ul>
<li><a href="/title/Network_Debugging" title="Network Debugging">Depuração de rede</a></li>
<li><a href="/title/Firewalls" class="mw-redirect" title="Firewalls">Firewalls</a></li>
<li><a href="/title/Jumbo_frames" title="Jumbo frames">Jumbo frames</a></li>
<li><a href="/title/Internet_sharing" title="Internet sharing">Compartilhamento de internet</a></li>
<li><a href="/title/Router" title="Router">Roteador</a></li>
</ul>
</div>
<p>Esse artigo descreve como configurar conexões de rede na <a href="https://en.wikipedia.org/wiki/pt:Camada_de_rede" class="extiw" title="wikipedia:pt:Camada de rede">camada 3 do Modelo OSI</a> e acima. Especificidades para cada meio de transporte são tratadas nas subpáginas <a href="/title/Network_configuration_(Portugu%C3%AAs)/Ethernet" class="mw-redirect" title="Network configuration (Português)/Ethernet">/Ethernet</a> e <a href="/title/Network_configuration_(Portugu%C3%AAs)/Sem_fio" class="mw-redirect" title="Network configuration (Português)/Sem fio">/Sem fio</a>.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Verificar_a_conex%C3%A3o"><span class="tocnumber">1</span> <span class="toctext">Verificar a conexão</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Ping"><span class="tocnumber">1.1</span> <span class="toctext">Ping</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-3">
<a href="#Gerenciamento_de_rede"><span class="tocnumber">2</span> <span class="toctext">Gerenciamento de rede</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#net-tools"><span class="tocnumber">2.1</span> <span class="toctext">net-tools</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#iproute2"><span class="tocnumber">2.2</span> <span class="toctext">iproute2</span></a></li>
<li class="toclevel-2 tocsection-6">
<a href="#Interfaces_de_rede"><span class="tocnumber">2.3</span> <span class="toctext">Interfaces de rede</span></a>
<ul>
<li class="toclevel-3 tocsection-7"><a href="#Listando_interfaces_de_rede"><span class="tocnumber">2.3.1</span> <span class="toctext">Listando interfaces de rede</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="#Habilitando_e_desabilitando_interfaces_de_rede"><span class="tocnumber">2.3.2</span> <span class="toctext">Habilitando e desabilitando interfaces de rede</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-9"><a href="#Endere%C3%A7o_IP_est%C3%A1tico"><span class="tocnumber">2.4</span> <span class="toctext">Endereço IP estático</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Endere%C3%A7os_IP"><span class="tocnumber">2.5</span> <span class="toctext">Endereços IP</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Tabela_de_roteamento"><span class="tocnumber">2.6</span> <span class="toctext">Tabela de roteamento</span></a></li>
<li class="toclevel-2 tocsection-12">
<a href="#DHCP"><span class="tocnumber">2.7</span> <span class="toctext">DHCP</span></a>
<ul>
<li class="toclevel-3 tocsection-13"><a href="#Servidores"><span class="tocnumber">2.7.1</span> <span class="toctext">Servidores</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-14"><a href="#Gerenciadores_de_rede"><span class="tocnumber">2.8</span> <span class="toctext">Gerenciadores de rede</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-15">
<a href="#Configurando_um_hostname"><span class="tocnumber">3</span> <span class="toctext">Configurando um hostname</span></a>
<ul>
<li class="toclevel-2 tocsection-16"><a href="#Resolu%C3%A7%C3%A3o_de_hostname_local"><span class="tocnumber">3.1</span> <span class="toctext">Resolução de hostname local</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Resolu%C3%A7%C3%A3o_de_hostname_de_rede_local"><span class="tocnumber">3.2</span> <span class="toctext">Resolução de hostname de rede local</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-18">
<a href="#Dicas_e_truques"><span class="tocnumber">4</span> <span class="toctext">Dicas e truques</span></a>
<ul>
<li class="toclevel-2 tocsection-19"><a href="#Alterando_o_nome_da_interface"><span class="tocnumber">4.1</span> <span class="toctext">Alterando o nome da interface</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Revertendo_para_nomes_tradicionais_de_interfaces"><span class="tocnumber">4.2</span> <span class="toctext">Revertendo para nomes tradicionais de interfaces</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#Definindo_o_MTU_do_dispositivo_e_o_tamanho_da_fila"><span class="tocnumber">4.3</span> <span class="toctext">Definindo o MTU do dispositivo e o tamanho da fila</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#Bonding_e_LAG_(agrega%C3%A7%C3%A3o_de_LINK)"><span class="tocnumber">4.4</span> <span class="toctext">Bonding e LAG (agregação de LINK)</span></a></li>
<li class="toclevel-2 tocsection-23">
<a href="#Aliasing_de_endere%C3%A7o_IP"><span class="tocnumber">4.5</span> <span class="toctext">Aliasing de endereço IP</span></a>
<ul>
<li class="toclevel-3 tocsection-24"><a href="#Exemplo"><span class="tocnumber">4.5.1</span> <span class="toctext">Exemplo</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-25"><a href="#Modo_prom%C3%ADscuo"><span class="tocnumber">4.6</span> <span class="toctext">Modo promíscuo</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="#Investigar_soquetes"><span class="tocnumber">4.7</span> <span class="toctext">Investigar soquetes</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-27">
<a href="#Solu%C3%A7%C3%A3o_de_problemas"><span class="tocnumber">5</span> <span class="toctext">Solução de problemas</span></a>
<ul>
<li class="toclevel-2 tocsection-28">
<a href="#O_problema_de_escala_de_janela_TCP"><span class="tocnumber">5.1</span> <span class="toctext">O problema de escala de janela TCP</span></a>
<ul>
<li class="toclevel-3 tocsection-29"><a href="#Como_diagnosticar_o_problema"><span class="tocnumber">5.1.1</span> <span class="toctext">Como diagnosticar o problema</span></a></li>
<li class="toclevel-3 tocsection-30">
<a href="#Formas_de_corrigi-lo"><span class="tocnumber">5.1.2</span> <span class="toctext">Formas de corrigi-lo</span></a>
<ul>
<li class="toclevel-4 tocsection-31"><a href="#Ruim"><span class="tocnumber">5.1.2.1</span> <span class="toctext">Ruim</span></a></li>
<li class="toclevel-4 tocsection-32"><a href="#Bom"><span class="tocnumber">5.1.2.2</span> <span class="toctext">Bom</span></a></li>
<li class="toclevel-4 tocsection-33"><a href="#Melhor"><span class="tocnumber">5.1.2.3</span> <span class="toctext">Melhor</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-34"><a href="#Mais_sobre_isso"><span class="tocnumber">5.1.3</span> <span class="toctext">Mais sobre isso</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-35"><a href="#Veja_tamb%C3%A9m"><span class="tocnumber">6</span> <span class="toctext">Veja também</span></a></li>
</ul>
</div>

<h2>
<span id="Verificar_a_conex.C3.A3o"></span><span class="mw-headline" id="Verificar_a_conexão">Verificar a conexão</span>
</h2>
<p>Para solucionar problemas de uma conexão de rede, siga as seguintes condições e assegure-se de atendê-las:
</p>
<ol>
<li>Suas interfaces de rede estão listadas e habilitadas. Do contrário, confira o driver de dispositivo – veja <a href="/title/Network_configuration_(Portugu%C3%AAs)/Ethernet#Driver_de_dispositivo" class="mw-redirect" title="Network configuration (Português)/Ethernet">/Ethernet#Driver de dispositivo</a> ou <a href="/title/Network_configuration_(Portugu%C3%AAs)/Sem_fio#Driver_de_dispositivo" class="mw-redirect" title="Network configuration (Português)/Sem fio">/Sem fio#Driver de dispositivo</a>.</li>
<li>Você está conectado à rede. O cabo está conectado ou você está <a href="/title/Network_configuration_(Portugu%C3%AAs)/Sem_fio" class="mw-redirect" title="Network configuration (Português)/Sem fio">conectado com a rede sem fio</a>.</li>
<li>Sua interface de rede tem um <a href="#Endere%C3%A7os_IP">endereço IP</a>.</li>
<li>Sua <a href="#Tabela_de_roteamento">tabela de roteamento</a> está configurada corretamente.</li>
<li>Você pode <a href="#Ping">pingar</a> um endereço IP local (por exemplo, seu gateway padrão).</li>
<li>Você pode <a href="#Ping">pingar</a> um endereço IP público (por exemplo, <code>8.8.8.8</code>), que é um servidor DNS do Google e é um endereço conveniente para se usar em um teste.</li>
<li>
<a href="/title/Verifique_se_voc%C3%AA_consegue_resolver_nomes_de_dom%C3%ADnio" class="mw-redirect" title="Verifique se você consegue resolver nomes de domínio">Verifique se você consegue resolver nomes de domínio</a> (por exemplo, <code>archlinux.org</code>).</li>
</ol>
<h3><span class="mw-headline" id="Ping">Ping</span></h3>
<p><a href="https://en.wikipedia.org/wiki/pt:Ping" class="extiw" title="wikipedia:pt:Ping">ping</a> é usado para testar se você consegue alcançar um host.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ping www.example.com</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">PING www.example.com (93.184.216.34): 56(84) data bytes
64 bytes from 93.184.216.34: icmp_seq=0 ttl=56 time=11.632 ms
64 bytes from 93.184.216.34: icmp_seq=1 ttl=56 time=11.726 ms
64 bytes from 93.184.216.34: icmp_seq=2 ttl=56 time=10.683 ms
...</pre>
<p>Para cada resposta que você recebe, o utilitário ping imprimirá uma linha como a acima. Para mais informações, consulte o manual <span class="plainlinks archwiki-template-man" title="$ man 8 ping"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/ping.8">ping(8)</a></span>. Observe que os computadores podem ser configurados para não responder às solicitações de eco ICMP. <a rel="nofollow" class="external autonumber" href="https://unix.stackexchange.com/questions/412446/how-to-disable-ping-response-icmp-echo-in-linux-all-the-time">[1]</a>
</p>
<p>Se você não receber nenhuma resposta, isso pode estar relacionado a seu gateway padrão ou a seu provedor de internet. Você pode executar um <a href="/title/Traceroute_(Portugu%C3%AAs)" class="mw-redirect" title="Traceroute (Português)">traceroute</a> para diagnosticar ainda mais a rota para o host.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Se você receber um erro como <code>ping: icmp open socket: Operation not permitted</code> ao executar <i>ping</i>, tente reinstalar o pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=iputils">iputils</a></span>.</div>
<h2><span class="mw-headline" id="Gerenciamento_de_rede">Gerenciamento de rede</span></h2>
<p>Para configurar uma conexão de rede, siga as etapas abaixo:
</p>
<ol>
<li>Certifique-se que sua <a href="#Interfaces_de_rede">interface de rede</a> está listada e habilitada.</li>
<li>Conecte à rede. Conecte o cabo de rede ou <a href="/title/Network_configuration_(Portugu%C3%AAs)/Sem_fio" class="mw-redirect" title="Network configuration (Português)/Sem fio">conecte à rede sem fio</a>.</li>
<li>Configure sua conexão de rede:
<ul>
<li><a href="#Endere%C3%A7o_IP_est%C3%A1tico">endereço IP estático</a></li>
<li>endereço IP dinâmico: use <a href="#DHCP">DHCP</a>
</li>
</ul>
</li>
</ol>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> A imagem de instalação habilita <a href="/title/Dhcpcd" title="Dhcpcd">dhcpcd</a> (<code>dhcpcd@<i>interface</i>.service</code>) para <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/archiso/-/blob/master/configs/releng/airootfs/etc/udev/rules.d/81-dhcpcd.rules">dispositivos de rede cabeada</a> na inicialização.</div>
<h3><span class="mw-headline" id="net-tools">net-tools</span></h3>
<p>Arch Linux tornou <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=net-tools">net-tools</a></span> obsoleto em favor do <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=iproute2">iproute2</a></span>.<a rel="nofollow" class="external autonumber" href="https://www.archlinux-br.org/noticias/155/">[2]</a>
</p>
<table class="wikitable">
<tbody>
<tr>
<th>Comando obsoleto</th>
<th>Comandos substitutos
</th>
</tr>
<tr>
<td>arp</td>
<td>ip neighbor
</td>
</tr>
<tr>
<td><a href="https://en.wikipedia.org/wiki/pt:ifconfig" class="extiw" title="wikipedia:pt:ifconfig">ifconfig</a></td>
<td>ip address, ip link
</td>
</tr>
<tr>
<td>netstat</td>
<td>
<a href="#Investigar_soquetes">ss</a>
</td>
</tr>
<tr>
<td>route</td>
<td>ip route
</td>
</tr>
</tbody>
</table>
<p>Para um resumo mais completo, veja <a rel="nofollow" class="external text" href="https://dougvitale.wordpress.com/2011/12/21/deprecated-linux-networking-commands-and-their-replacements/">essa publicação de blogue</a>.
</p>
<h3><span class="mw-headline" id="iproute2">iproute2</span></h3>
<p><a href="https://en.wikipedia.org/wiki/iproute2" class="extiw" title="wikipedia:iproute2">iproute2</a> é uma dependência do <a href="/title/Metapacote" class="mw-redirect" title="Metapacote">metapacote</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=base">base</a></span> e fornece a interface de linha de comando <span class="plainlinks archwiki-template-man" title="$ man 8 ip"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/ip.8">ip(8)</a></span>, usado para gerenciar <a href="#Interfaces_de_rede">interfaces de rede</a>, <a href="#Endere%C3%A7os_IP">endereços IP</a> e a <a href="#Tabela_de_roteamento">tabela de roteamento</a>. Esteja ciente de que a configuração feita usando <code>ip</code> será perdida após uma reinicialização. Para uma configuração persistente, você pode usar um <a href="/title/Gerenciador_de_rede" class="mw-redirect" title="Gerenciador de rede">gerenciador de rede</a> ou automatizar comandos <i>ip</i> usando scripts e <a href="/title/Systemd_(Portugu%C3%AAs)#Escrevendo_arquivos_unit" title="Systemd (Português)">units de systemd</a>. Observe também que os comandos <code>ip</code> geralmente podem ser abreviados, para maior clareza eles são descritos neste artigo.
</p>
<h3><span class="mw-headline" id="Interfaces_de_rede">Interfaces de rede</span></h3>
<p>Por padrão, o <a href="/title/Udev" title="Udev">udev</a> atribui nomes para suas interfaces de rede usando <a rel="nofollow" class="external text" href="https://systemd.io/PREDICTABLE_INTERFACE_NAMES/">Predictable Network Interface Names</a>, que prefixam nomes de interfaces com <code>en</code> (cabeada/<a href="https://en.wikipedia.org/wiki/pt:Ethernet" class="extiw" title="wikipedia:pt:Ethernet">Ethernet</a>), <code>wl</code> (sem fio/wireless/WLAN) ou <code>ww</code> (<a href="https://en.wikipedia.org/wiki/pt:Rede_de_longa_dist%C3%A2ncia_sem_fio" class="extiw" title="wikipedia:pt:Rede de longa distância sem fio">WWAN</a>).
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> Para alterar os nomes de dispositivos, veja <a href="#Alterando_o_nome_da_interface">#Alterando o nome da interface</a> e <a href="#Revertendo_para_nomes_tradicionais_de_interfaces">#Revertendo para nomes tradicionais de interfaces</a>.</div>
<h4><span class="mw-headline" id="Listando_interfaces_de_rede">Listando interfaces de rede</span></h4>
<p>Ambos nomes de interfaces com e sem fio podem ser descobertos por meio de <code>ls /sys/class/net</code> ou <code>ip link</code>. Note que <code>lo</code> é o <a href="https://en.wikipedia.org/wiki/pt:Loop_device" class="extiw" title="wikipedia:pt:Loop device">dispositivo <i>loop</i> ou de laço</a> e não é usado para fazer conexões de rede.
</p>
<p>Nomes de dispositivos sem fio também podem ser obtidos usando <code>iw dev</code>. Veja também <a href="/title/Network_configuration_(Portugu%C3%AAs)/Sem_fio#Obter_o_nome_da_interface" class="mw-redirect" title="Network configuration (Português)/Sem fio">/Sem fio#Obter o nome da interface</a>.
</p>
<p>Se sua interface de rede não estiver listada, certifique-se que o driver de seu dispositivo foi carregado com sucesso. Consulte <a href="/title/Network_configuration_(Portugu%C3%AAs)/Ethernet#Driver_de_dispositivo" class="mw-redirect" title="Network configuration (Português)/Ethernet">/Ethernet#Driver de dispositivo</a> e <a href="/title/Network_configuration_(Portugu%C3%AAs)/Sem_fio#Driver_de_dispositivo" class="mw-redirect" title="Network configuration (Português)/Sem fio">/Sem fio#Driver de dispositivo</a>.
</p>
<h4><span class="mw-headline" id="Habilitando_e_desabilitando_interfaces_de_rede">Habilitando e desabilitando interfaces de rede</span></h4>
<p>Interfaces de rede podem ser habilitadas/desabilitadas usando <code>ip link set <i>interface</i> up|down</code>. Veja <span class="plainlinks archwiki-template-man" title="$ man 8 ip-link"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/ip-link.8">ip-link(8)</a></span>.
</p>
<p>Para verificar o status da interface <code>eth0</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ip link show dev eth0</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast master br0 state DOWN mode DEFAULT qlen 1000
...
</pre>
<p>O <code>UP</code> em <code>&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;</code> é o que indica a interface está ativa, e não o <code>state DOWN</code> posterior.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Se sua rota padrão é por meio da interface <code>eth0</code>, desabilitá-la também vai remover a rota e reativá-la não vai restabelecer automaticamente a rota padrão. Veja <a href="#Tabela_de_roteamento">#Tabela de roteamento</a> para restabelecê-la.</div>
<h3>
<span id="Endere.C3.A7o_IP_est.C3.A1tico"></span><span class="mw-headline" id="Endereço_IP_estático">Endereço IP estático</span>
</h3>
<p>Um endereço IP estático pode ser configurado com a maioria dos <a href="#Gerenciadores_de_rede">gerenciadores de rede</a> padrão e também <a href="/title/Dhcpcd" title="Dhcpcd">dhcpcd</a>.
</p>
<p>Para configurar manualmente um endereço IP estático, adicione um endereço IP como descrito em <a href="#Endere%C3%A7os_IP">#Endereços IP</a>, configure sua <a href="#Tabela_de_roteamento">tabela de roteamento</a> e <a href="/title/Resolu%C3%A7%C3%A3o_de_nome_de_dom%C3%ADnio" class="mw-redirect" title="Resolução de nome de domínio">configure seus servidores DNS</a>.
</p>
<h3>
<span id="Endere.C3.A7os_IP"></span><span class="mw-headline" id="Endereços_IP">Endereços IP</span>
</h3>
<p><a href="https://en.wikipedia.org/wiki/pt:Endere%C3%A7o_IP" class="extiw" title="wikipedia:pt:Endereço IP">Endereços IP</a> são gerenciados usando <span class="plainlinks archwiki-template-man" title="$ man 8 ip-address"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/ip-address.8">ip-address(8)</a></span>.
</p>
<p>Liste endereços IP:
</p>
<pre>$ ip address show
</pre>
<p>Adicione um endereço IP a uma interface:
</p>
<pre># ip address add <i>endereço/tam_prefixo</i> broadcast + dev <i>interface</i>
</pre>
<dl><dd>Note que:</dd></dl>
<dl><dd><ul>
<li>o endereço é dado em <a href="https://en.wikipedia.org/wiki/pt:Classless_Inter-Domain_Routing#Nota.C3.A7.C3.A3o_standard" class="extiw" title="wikipedia:pt:Classless Inter-Domain Routing">notação CIDR</a> para também fornecer uma <a href="https://en.wikipedia.org/wiki/pt:Sub-rede" class="extiw" title="wikipedia:pt:Sub-rede">máscara de sub-rede</a>
</li>
<li>
<code>+</code> é um símbolo especial que faz o <code>ip</code> derivar o <a href="https://en.wikipedia.org/wiki/pt:Endere%C3%A7o_de_broadcast" class="extiw" title="wikipedia:pt:Endereço de broadcast">endereço broadcast</a> do endereço IP e a máscara de sub-rede</li>
</ul></dd></dl>
<dl><dd><div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Certifique-se que endereços IP atribuídos manualmente não conflitem com os atribuídos por DHCP.</div></dd></dl>
<p>Exclui um endereço IP de uma interface:
</p>
<pre># ip address del <i>endereço/tam_prefixo</i> dev <i>interface</i>
</pre>
<p>Exclui todos os endereços correspondendo a um critério, por exemplo, de uma interface específica:
</p>
<pre># ip address flush dev <i>interface</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> Endereços IP podem ser calculados com <a rel="nofollow" class="external text" href="http://jodies.de/ipcalc">ipcalc</a> (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ipcalc">ipcalc</a></span>).</div>
<h3><span class="mw-headline" id="Tabela_de_roteamento">Tabela de roteamento</span></h3>
<p>A <a href="https://en.wikipedia.org/wiki/Routing_table" class="extiw" title="wikipedia:Routing table">tabela de roteamento</a> é usada para determinar se você pode alcançar um endereço IP diretamente ou qual gateway (roteador) você deve usar. Se nenhuma rota corresponde ao endereço IP, o <a href="https://en.wikipedia.org/wiki/Default_gateway" class="extiw" title="wikipedia:Default gateway">gateway padrão</a> é usado.
</p>
<p>A tabela de roteamento é gerenciada usando <span class="plainlinks archwiki-template-man" title="$ man 8 ip-route"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/ip-route.8">ip-route(8)</a></span>.
</p>
<p><i>PREFIXO</i> é uma notação CIDR ou <code>default</code> para o gateway padrão.
</p>
<p>Lista rotas IPv4:
</p>
<pre>$ ip route show
</pre>
<p>Lista rotas IPv6:
</p>
<pre>$ ip -6 route
</pre>
<p>Adiciona uma rota:
</p>
<pre># ip route add <i>PREFIXO</i> via <i>endereço</i> dev <i>interface</i>
</pre>
<p>Exclui uma rota:
</p>
<pre># ip route del <i>PREFIXO</i> via <i>endereço</i> dev <i>interface</i>
</pre>
<h3><span class="mw-headline" id="DHCP">DHCP</span></h3>
<p>Um servidor <a href="https://en.wikipedia.org/wiki/pt:Dynamic_Host_Configuration_Protocol" class="extiw" title="wikipedia:pt:Dynamic Host Configuration Protocol">Dynamic Host Configuration Protocol</a> (DHCP) fornece aos clientes um endereço IP dinâmico, a máscara de sub-rede, o endereço IP do gateway padrão e, opcionalmente, também servidores de nome DNS.
</p>
<p>Para usar DHCP, você precisa de um servidor DHCP em sua rede e um cliente DHCP:
</p>
<table class="wikitable">
<tbody>
<tr>
<th>Cliente</th>
<th>Pacote</th>
<th><a href="/title/Archiso_(Portugu%C3%AAs)" title="Archiso (Português)">Archiso</a></th>
<th>Nota</th>
<th>Units de systemd
</th>
</tr>
<tr>
<td><a href="/title/Dhcpcd" title="Dhcpcd">dhcpcd</a></td>
<td><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dhcpcd">dhcpcd</a></span></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Sim</td>
<td>DHCP, DHCPv6, ZeroConf, IP estático</td>
<td>
<code>dhcpcd.service</code>, <code>dhcpcd@<i>interface</i>.service</code>
</td>
</tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://www.isc.org/downloads/dhcp/">ISC dhclient</a></td>
<td><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dhclient">dhclient</a></span></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Sim</td>
<td>DHCP, DHCPv6, BOOTP, IP estático</td>
<td>
<code>dhclient@<i>interface</i>.service</code>
</td>
</tr>
</tbody>
</table>
<p>Alternativamente, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=iwd">iwd</a></span> tem um cliente DHCP embutido que pode ser usado com algumas configurações: <a href="/title/Iwd_(Portugu%C3%AAs)#Ativar_configura%C3%A7%C3%A3o_de_rede_embutida" title="Iwd (Português)">iwd (Português)#Ativar configuração de rede embutida</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> 
<ul>
<li>Você não deve usar dois clientes DHCP simultaneamente.</li>
<li>Em vez de usar diretamente um cliente DHCP, você também pode usar um <a href="#Gerenciadores_de_rede">gerenciador de rede</a>.</li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> Você pode verificar se um servidor DHCP estiver funcionando com <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dhcping">dhcping</a></span>.</div>
<h4><span class="mw-headline" id="Servidores">Servidores</span></h4>
<div class="noprint archwiki-template-message">
<p><a href="/title/File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a><b>This article or section needs expansion.</b><a href="/title/File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> <a href="/title/Systemd-networkd" title="Systemd-networkd">systemd-networkd</a> tem suporte a servidor DHCP. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/title/Talk:Network_configuration">talk:Network configuration</a>)</div>
</div>
<table class="wikitable">
<tbody>
<tr>
<th>Servidor</th>
<th>Pacote</th>
<th>IPv4</th>
<th>IPv6</th>
<th>GUI</th>
<th>Interfaces</th>
<th>Backend(s) de armazenamento</th>
<th>Observação
</th>
</tr>
<tr>
<td><a href="/title/Dhcpd_(Portugu%C3%AAs)" title="Dhcpd (Português)">dhcpd</a></td>
<td><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dhcp">dhcp</a></span></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Sim</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Sim</td>
<td><a rel="nofollow" class="external text" href="https://github.com/Akkadius/glass-isc-dhcp">Glass-ISC-DHCP</a></td>
<td>?</td>
<td>Arquivo</td>
<td>
</td>
</tr>
<tr>
<td><a href="/title/Dnsmasq_(Portugu%C3%AAs)" title="Dnsmasq (Português)">dnsmasq</a></td>
<td><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dnsmasq">dnsmasq</a></span></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Sim</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Sim</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">Não</td>
<td>?</td>
<td>Arquivo</td>
<td>Também DNS, PXE e TFTP
</td>
</tr>
<tr>
<td><a href="/title/Kea" title="Kea">Kea</a></td>
<td><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=kea">kea</a></span></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Sim</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Sim</td>
<td><a rel="nofollow" class="external text" href="https://github.com/isc-projects/kea-anterius">Kea-Anterius (Experimental)</a></td>
<td>REST, RADIUS e NETCONF</td>
<td>Arquivo, MySQL, PostgreSQL e Cassandra</td>
<td>Também DNS
</td>
</tr>
</tbody>
</table>
<h3><span class="mw-headline" id="Gerenciadores_de_rede">Gerenciadores de rede</span></h3>
<p>Um gerenciador de rede permite que você gerencie configurações de conexão de rede nos chamados peris de rede para facilitar a troca de redes.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Existem muitas soluções para escolher, mas lembre-se de que todas elas são mutuamente exclusivas; você não deve executar dois daemons simultaneamente.</div>
<table class="wikitable">
<tbody>
<tr>
<th>Gerenciador<br>de rede</th>
<th>GUI</th>
<th>
<a href="/title/Archiso_(Portugu%C3%AAs)" title="Archiso (Português)">Archiso</a> <a rel="nofollow" class="external autonumber" href="https://gitlab.archlinux.org/archlinux/archiso/-/blob/master/configs/releng/packages.x86_64">[3]</a>
</th>
<th>Ferramentas CLI</th>
<th>Suporte a <a href="https://en.wikipedia.org/wiki/pt:Point-to-Point_Protocol" class="extiw" title="wikipedia:pt:Point-to-Point Protocol">PPP</a> (ex., Modem 3G)</th>
<th><a href="#DHCP">Cliente DHCP</a></th>
<th>Units de systemd
</th>
</tr>
<tr>
<th>
<a href="/title/ConnMan" title="ConnMan">ConnMan</a>
</th>
<td data-sort-value="3" style="background: #ffa; color: inherit; vertical-align: middle; text-align: center;">8 não oficiais</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">Não</td>
<td><span class="plainlinks archwiki-template-man" title="$ man 1 connmanctl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/connmanctl.1">connmanctl(1)</a></span></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Sim ((com <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ofono/">ofono</a></span><sup><small>AUR</small></sup>)</td>
<td>interno</td>
<td>
<code>connman.service</code>
</td>
</tr>
<tr>
<th>
<a href="/title/Netctl" title="Netctl">netctl</a>
</th>
<td data-sort-value="3" style="background: #ffa; color: inherit; vertical-align: middle; text-align: center;">2 não oficiais</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Sim</td>
<td>
<span class="plainlinks archwiki-template-man" title="$ man 1 netctl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/netctl.1">netctl(1)</a></span>, wifi-menu</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Sim</td>
<td>
<a href="/title/Dhcpcd" title="Dhcpcd">dhcpcd</a> ou <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dhclient">dhclient</a></span>
</td>
<td>
<code>netctl-ifplugd@<i>interface</i>.service</code>, <code>netctl-auto@<i>interface</i>.service</code>
</td>
</tr>
<tr>
<th>
<a href="/title/NetworkManager_(Portugu%C3%AAs)" title="NetworkManager (Português)">NetworkManager</a>
</th>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Sim</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">Não</td>
<td>
<span class="plainlinks archwiki-template-man" title="$ man 1 nmcli"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/nmcli.1">nmcli(1)</a></span>, <span class="plainlinks archwiki-template-man" title="$ man 1 nmtui"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/nmtui.1">nmtui(1)</a></span>
</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Sim</td>
<td>interno ou <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dhclient">dhclient</a></span>
</td>
<td>
<code>NetworkManager.service</code>
</td>
</tr>
<tr>
<th>
<a href="/title/Systemd-networkd" title="Systemd-networkd">systemd-networkd</a>
</th>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">Não</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Sim (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=base">base</a></span>)</td>
<td><span class="plainlinks archwiki-template-man" title="$ man 1 networkctl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/networkctl.1">networkctl(1)</a></span></td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;"><a rel="nofollow" class="external text" href="https://github.com/systemd/systemd/issues/481">Não</a></td>
<td>interno</td>
<td>
<code>systemd-networkd.service</code>, <code>systemd-resolved.service</code>
</td>
</tr>
<tr>
<th>
<a href="/title/Wicd" title="Wicd">Wicd</a>
</th>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Sim</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">Não</td>
<td>
<span class="plainlinks archwiki-template-man" title="$ man 8 wicd-cli"><a rel="nofollow" class="external text" href="https://manned.org/wicd-cli.8">wicd-cli(8)</a></span>, <span class="plainlinks archwiki-template-man" title="$ man 8 wicd-curses"><a rel="nofollow" class="external text" href="https://manned.org/wicd-curses.8">wicd-curses(8)</a></span>
</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">Não</td>
<td>
<a href="/title/Dhcpcd" title="Dhcpcd">dhcpcd</a> ou <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dhclient">dhclient</a></span>
</td>
<td>
<code>wicd.service</code>
</td>
</tr>
</tbody>
</table>
<h2><span class="mw-headline" id="Configurando_um_hostname">Configurando um hostname</span></h2>
<p>Um <a href="https://en.wikipedia.org/wiki/Hostname" class="extiw" title="wikipedia:Hostname">hostname</a>, ou "nome de máquina", é um nome único criado para identificar uma máquina em uma rede, configurada em <code>/etc/hostname</code> — veja <span class="plainlinks archwiki-template-man" title="$ man 5 hostname"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/hostname.5">hostname(5)</a></span> e <span class="plainlinks archwiki-template-man" title="$ man 7 hostname"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/hostname.7">hostname(7)</a></span> para detalhes. O arquivo pode conter o nome de domínio do sistema, se houver. Para configurar o hostname, <a href="/title/Edi%C3%A7%C3%A3o_de_texto" class="mw-redirect" title="Edição de texto">edite</a> <code>/etc/hostname</code> para incluir uma única linha com <code><i>meuhostname</i></code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/hostname</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"><i>meuhostname</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> Para um conselho quanto ao hostname, veja <a rel="nofollow" class="external text" href="https://tools.ietf.org/html/rfc1178">RFC 1178</a>.</div>
<p>Alternativamente, usando <span class="plainlinks archwiki-template-man" title="$ man 1 hostnamectl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/hostnamectl.1">hostnamectl(1)</a></span>:
</p>
<pre># hostnamectl set-hostname <i>meuhostname</i>
</pre>
<p>Para definir temporariamente o hostname (até reiniciar), use <span class="plainlinks archwiki-template-man" title="$ man 1 hostname"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/hostname.1">hostname(1)</a></span> do <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=inetutils">inetutils</a></span>:
</p>
<pre># hostname <i>meuhostname</i>
</pre>
<p>Para configurar um hostname "bonito" e outros metadados de máquina, veja <span class="plainlinks archwiki-template-man" title="$ man 5 machine-info"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/machine-info.5">machine-info(5)</a></span>.
</p>
<h3>
<span id="Resolu.C3.A7.C3.A3o_de_hostname_local"></span><span class="mw-headline" id="Resolução_de_hostname_local">Resolução de hostname local</span>
</h3>
<p>O módulo <a href="/title/Name_Service_Switch_(Portugu%C3%AAs)" class="mw-redirect" title="Name Service Switch (Português)">Name Service Switch</a> (NSS) <code>myhostname</code> do <a href="/title/Systemd_(Portugu%C3%AAs)" title="Systemd (Português)">systemd</a> fornece resolução de hostname local sem ter que editar <code>/etc/hosts</code> (<span class="plainlinks archwiki-template-man" title="$ man 5 hosts"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/hosts.5">hosts(5)</a></span>). Ele está habilitado por padrão.
</p>
<p>Alguns clientes, porém, podem depender de <code>/etc/hosts</code>, veja <a rel="nofollow" class="external autonumber" href="https://lists.debian.org/debian-devel/2013/07/msg00809.html">[4]</a> <a rel="nofollow" class="external autonumber" href="https://bugzilla.mozilla.org/show_bug.cgi?id=87717#c55">[5]</a> por exemplos.
</p>
<p>Para configurar o arquivo hosts, adicione as seguintes linhas ao <code>/etc/hosts</code>:
</p>
<pre>127.0.0.1        localhost
::1              localhost
127.0.1.1        <i>meuhostname</i>.localdomain        <i>meuhostname</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> A ordem de hostnames/aliases que seguem o endereço IP no <code>/etc/hosts</code> é relevante. A primeira string é considerada o hostname canônico e pode ser adicionada a domínios pais, sendo os componentes de domínio separados por um ponto (p. ex., <code>.dominiolocal</code> acima). Todas as strings a seguir na mesma linha são considerados aliases. Veja <span class="plainlinks archwiki-template-man" title="$ man 5 hosts"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/hosts.5">hosts(5)</a></span> para mais informações.</div>
<p>Como um resultado, o sistema resolve ambas entradas:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ getent hosts</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">127.0.0.1       localhost
127.0.0.1       localhost
127.0.1.1       <i>meuhostname</i>.localdomain <i>meuhostname</i>
</pre>
<p>Para um sistema com um endereço IP permanente, esse endereço IP permanente deve ser usado em vez de <code>127.0.1.1</code>.
</p>
<h3>
<span id="Resolu.C3.A7.C3.A3o_de_hostname_de_rede_local"></span><span class="mw-headline" id="Resolução_de_hostname_de_rede_local">Resolução de hostname de rede local</span>
</h3>
<p>Para tornar sua máquina acessível em sua LAN por seu hostname, você pode:
</p>
<ul>
<li>editar o arquivo <code>/etc/hosts</code> para todo dispositivio em sua LAN, veja <span class="plainlinks archwiki-template-man" title="$ man 5 hosts"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/hosts.5">hosts(5)</a></span>
</li>
<li>configurar um <a href="/title/Servidor_DNS" class="mw-redirect" title="Servidor DNS">servidor DNS</a> para resolver seu hostname e faça com que os dispositivos LAN o usem (ex., por <a href="#DHCP">#DHCP</a>)</li>
<li>ou a forma fácil: use um serviço <a href="https://en.wikipedia.org/wiki/pt:Zeroconf" class="extiw" title="wikipedia:pt:Zeroconf">Zero-configuration networking</a>:
<ul>
<li>Resolução de nomes de host através do serviço <a href="https://en.wikipedia.org/wiki/pt:NetBIOS#Servi.C3.A7o_de_nomes" class="extiw" title="wikipedia:pt:NetBIOS">NetBIOS</a> da Microsoft. Fornecido pelo <a href="/title/Samba" title="Samba">Samba</a> no Linux. Ele precisa da instalação do <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=samba">samba</a></span> e habilitação do serviço <code>nmb.service</code>. Computadores usando Windows, macOS ou Linux com <code>nmb</code> ativo, serão capazes de localizar sua máquina.</li>
<li>Resolução de nomes de host via <a href="https://en.wikipedia.org/wiki/pt:Multicast_DNS" class="extiw" title="wikipedia:pt:Multicast DNS">mDNS</a>. Fornecido por <code>nss_mdns</code> com <a href="/title/Avahi" title="Avahi">Avahi</a> (consulte <a href="/title/Avahi#Hostname_resolution" title="Avahi">Avahi#Hostname resolution</a> para detalhes de configuração) ou <a href="/title/Systemd-resolved" title="Systemd-resolved">systemd-resolved</a>. Computadores usando macOS, ou Linux com o Avahi ou o systemd-running em execução, poderão localizar sua máquina. A API Win32 mais antiga não possui suporte a mDNS, o que pode impedir que alguns aplicativos antigos do Windows acessem seu dispositivo.</li>
</ul>
</li>
</ul>
<h2><span class="mw-headline" id="Dicas_e_truques">Dicas e truques</span></h2>
<h3><span class="mw-headline" id="Alterando_o_nome_da_interface">Alterando o nome da interface</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Ao alterar o esquema de nomes de interface, não se esqueça de atualizar todos os arquivos de configuração relacionados a rede e arquivos personalizados de unit de systemd para refletir a alteração.</div>
<p>Você pode alterar o nome de um dispositivo definindo o nome em uma regra de udev. Exemplo:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/10-network.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">SUBSYSTEM=="net", ACTION=="add", ATTR{address}=="aa:bb:cc:dd:ee:ff", NAME="net1"
SUBSYSTEM=="net", ACTION=="add", ATTR{address}=="ff:ee:dd:cc:bb:aa", NAME="net0"</pre>
<p>Essas regras serão aplicadas automaticamente na inicialização.
</p>
<p>Alguns detalhes devem ser ressaltados:
</p>
<ul>
<li>Para obter o endereço MAC de cada placa de rede, utilize o comando: <code>cat /sys/class/net/<i>nome_dispositivo</i>/address</code>
</li>
<li>Certifique-se de usar valores hexadecimais minúsculos em suas regras de udev. Ele não gosta de letras maiúsculas.</li>
</ul>
<p>Se a placa de rede possui um MAC dinâmico, você pode usar <code>DEVPATH</code>, por exemplo:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/10-network.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">SUBSYSTEM=="net", DEVPATH=="/devices/platform/wemac.*", NAME="int"
SUBSYSTEM=="net", DEVPATH=="/devices/pci*/*1c.0/*/net/*", NAME="en"</pre>
<p>Para obter o <code>DEVPATH</code> de todos os dispositivos atualmente conecados, veja para onde os links simbólicos em <code>/sys/class/net/</code> levam. Por exemplo:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">file /sys/class/net/*</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/sys/class/net/enp0s20f0u4u1: symbolic link to ../../devices/pci0000:00/0000:00:14.0/usb2/2-4/2-4.1/2-4.1:1.0/net/enp0s20f0u4u1
/sys/class/net/enp0s31f6:     symbolic link to ../../devices/pci0000:00/0000:00:1f.6/net/enp0s31f6
/sys/class/net/lo:            symbolic link to ../../devices/virtual/net/lo
/sys/class/net/wlp4s0:        symbolic link to ../../devices/pci0000:00/0000:00:1c.6/0000:04:00.0/net/wlp4s0
</pre>
<p>O caminho do dispositivo deve corresponder ao nome do dispositivo novo e antigo, uma vez que a regra pode ser executada mais de uma vez na inicialização. Por exemplo, na segunda regra, <code>"/devices/pci*/*1c.0/*/net/enp*"</code> seria errado, uma vez que irá parar de corresponder depois que o nome for alterado para <code>en</code>. Somente a regra padrão do sistema será chamada na segunda vez, fazendo com que o nome seja alterado de volta para, por exemplo, <code>enp1s0</code>.
</p>
<p>Se você estiver usando um dispositivo de rede USB (por exemplo, tethering de telefone Android) que tenha um endereço MAC dinâmico e deseje usar diferentes portas USB, poderá usar uma regra que corresponda, dependendo do fornecedor e do ID do produto:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/10-network.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">SUBSYSTEM=="net", ACTION=="add", ATTRS{idVendor}=="12ab", ATTRS{idProduct}=="3cd4", NAME="net2"</pre>
<p>Para <a href="/title/Udev#Testing_rules_before_loading" title="Udev">testar</a> suas regras, elas podem ser acionadas diretamente do espaço de usuário, por exemplo, com <code>udevadm --debug test /sys/class/net/*</code>. Lembre-se de primeiro retirar a interface que você está tentando renomear (ex. <code>ip link set enp1s0 down</code>).
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Ao escolher os nomes estáticos <b>deve-se evitar o uso de nomes no formato de "eth<i>X</i>" e "wlan<i>X</i>"</b>, pois eles podem levar a codiçẽos de corrida entre o kernel e udev durante a inicialização. Em vez disso, é melhor usar nomes de interface que não são usados pelo kernel como padrão, ex.: <code>net0</code>, <code>net1</code>, <code>wifi0</code>, <code>wifi1</code>. Para detalhes adicionais, por favor veja a documentação do <a rel="nofollow" class="external text" href="https://systemd.io/PREDICTABLE_INTERFACE_NAMES/">systemd</a>.</div>
<h3><span class="mw-headline" id="Revertendo_para_nomes_tradicionais_de_interfaces">Revertendo para nomes tradicionais de interfaces</span></h3>
<p>Se você preferir manter os nomes de interface tradicionais, como eth0, <a rel="nofollow" class="external text" href="https://systemd.io/PREDICTABLE_INTERFACE_NAMES/">Predictable Network Interface Names</a> podem ser desabilitados mascarando a regra de rule:
</p>
<pre># ln -s /dev/null /etc/udev/rules.d/80-net-setup-link.rules
</pre>
<p>Alternativamente, adicione <code>net.ifnames=0</code> aos <a href="/title/Par%C3%A2metros_do_kernel" class="mw-redirect" title="Parâmetros do kernel">parâmetros do kernel</a>.
</p>
<h3><span class="mw-headline" id="Definindo_o_MTU_do_dispositivo_e_o_tamanho_da_fila">Definindo o MTU do dispositivo e o tamanho da fila</span></h3>
<p>Você pode alterar o <a href="https://en.wikipedia.org/wiki/pt:MTU" class="extiw" title="wikipedia:pt:MTU">MTU</a> do dispositivo e o tamanho da fila ao definir manualmente com uma regra de udev. Por exemplo:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/10-network.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ACTION=="add", SUBSYSTEM=="net", KERNEL=="wl*", ATTR{mtu}="1500", ATTR{tx_queue_len}="2000"</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> 
<ul>
<li>
<code>mtu</code>: Para PPPoE, o MTU não deve ser maior que 1492. Você também pode definir o MTU via <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.netdev"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.netdev.5">systemd.netdev(5)</a></span>.</li>
<li>
<code>tx_queue_len</code>: Valores pequenos para dispositivos menores com uma latência maior, como modens e ISDN. Valor alto é recomendado para servidor conectado por meio conexões de Internet de alta velocidade que realiza grandes transferências de dados.</li>
</ul>
</div>
<h3>
<span id="Bonding_e_LAG_.28agrega.C3.A7.C3.A3o_de_LINK.29"></span><span class="mw-headline" id="Bonding_e_LAG_(agregação_de_LINK)">Bonding e LAG (agregação de LINK)</span>
</h3>
<p>Veja <a href="/title/Netctl#Bonding" title="Netctl">netctl</a> ou <a href="/title/Systemd-networkd#Bonding_a_wired_and_wireless_interface" title="Systemd-networkd">systemd-networkd</a>, ou <a href="/title/Wireless_bonding" title="Wireless bonding">Wireless bonding</a>.
</p>
<h3>
<span id="Aliasing_de_endere.C3.A7o_IP"></span><span class="mw-headline" id="Aliasing_de_endereço_IP">Aliasing de endereço IP</span>
</h3>
<p><i>IP aliasing</i> é o processo de adicionar mais de um endereço IP para uma interface de rede. Como isso, um nó em uma rede pode ter múltiplas conexões com uma rede, cada uma servindo um propósito diferente. Usos típicos são hospedagem virtual de servidores Web e FTP ou reorganização de servidores sem ter que atualizar qualquer outras máquinas (isso é especialmente útil para servidores de nome).
</p>
<h4><span class="mw-headline" id="Exemplo">Exemplo</span></h4>
<p>Para definir manualmente um alias, para algumas interfaces de rede, use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=iproute2">iproute2</a></span> para executar
</p>
<pre># ip addr add 192.168.2.101/24 dev eth0 label eth0:1
</pre>
<p>Para remover um dado alias, execute
</p>
<pre># ip addr del 192.168.2.101/24 dev eth0:1
</pre>
<p>Os pacotes de rede destinados para uma sub-rede vão usar o alias primário por padrão. Se o IP de destino está dentro de uma sub-rede de um alias secundário, então o IP fonte está definido respectivamente. Considere o caso em que há mais de uma interface de rede, as rotas padrão podem ser listadas com <code>ip route</code>.
</p>
<h3>
<span id="Modo_prom.C3.ADscuo"></span><span class="mw-headline" id="Modo_promíscuo">Modo promíscuo</span>
</h3>
<p>Ativar <a href="https://en.wikipedia.org/wiki/pt:Modo_prom%C3%ADscuo" class="extiw" title="wikipedia:pt:Modo promíscuo">modo promíscuo</a> fará com que uma interface de rede (sem fio) encaminhe todo o tráfego que receber para o sistema operacional para processamento posterior. Isso é contrário ao "modo normal" onde uma interface de rede irá descartar quadros que não pretende receber. É usado com mais frequência para solução de problemas avançados de rede e <a href="https://en.wikipedia.org/wiki/pt:Analisador_de_pacotes" class="extiw" title="wikipedia:pt:Analisador de pacotes">análise de pacotes (sniffing)</a>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/promiscuous@.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Set %i interface in promiscuous mode
After=network.target

[Service]
Type=oneshot
ExecStart=/usr/bin/ip link set dev %i promisc on
RemainAfterExit=yes

[Install]
WantedBy=multi-user.target
</pre>
<p>Se você deseja habilitar o modo promíscuo na interface <code>eth0</code>, execute <a href="/title/Habilite" class="mw-redirect" title="Habilite"><i>enable</i></a> <code>promiscuous@eth0.service</code>.
</p>
<h3><span class="mw-headline" id="Investigar_soquetes">Investigar soquetes</span></h3>
<p><i>ss</i> é um utilitário para investigar portas de rede e é parte do pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=iproute2">iproute2</a></span>. Ele tem uma funcionalidade similar ao utilitário <a rel="nofollow" class="external text" href="https://archlinux.org/news/deprecation-of-net-tools/">obsoleto</a> netstat.
</p>
<p>Uso comum inclui:
</p>
<p>Exibe todos os TCP Sockets com nomes de serviços:
</p>
<pre>$ ss -at
</pre>
<p>Exibe todos os TCP Sockets com números de portas:
</p>
<pre>$ ss -atn
</pre>
<p>Exibe todos os UDP Sockets:
</p>
<pre>$ ss -au
</pre>
<p>Para mais informações, veja <span class="plainlinks archwiki-template-man" title="$ man 8 ss"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/ss.8">ss(8)</a></span>.
</p>
<h2>
<span id="Solu.C3.A7.C3.A3o_de_problemas"></span><span class="mw-headline" id="Solução_de_problemas">Solução de problemas</span>
</h2>
<h3><span class="mw-headline" id="O_problema_de_escala_de_janela_TCP">O problema de escala de janela TCP</span></h3>
<p>Os pacotes TCP contêm um valor "janela" em seus cabeçalhos indicando quantos dados o outro host pode enviar em troca. Esse valor é representado com apenas 16 bits, então o tamanho da janela é no máximo 64Kb. Os pacotes TCP são armazenados em cache por um tempo (eles precisam ser reordenados) e, como a memória é (ou costumava ser) limitada, um host poderia ficar sem isso.
</p>
<p>Em 1992, à medida que mais e mais memória ficava disponível, <a rel="nofollow" class="external text" href="http://www.faqs.org/rfcs/rfc1323.html">RFC 1323</a> foi escrito para melhorar a situação: escala de janela. O valor "janela", fornecido em todos os pacotes, será modificado por um Fator de Escala definido uma vez, no início da conexão. Esse Fator de Escala de 8 bits permite que a Janela seja até 32 vezes maior do que os 64Kb iniciais.
</p>
<p>Parece que alguns roteadores quebrados e firewalls na Internet estão reescrevendo o Fator de Escala para 0, o que causa mal-entendidos entre hosts. O kernel do Linux 2.6.17 introduziu um novo esquema de cálculo gerando maiores fatores de escala, tornando visíveis as consequências dos roteadores quebrados e dos firewalls.
</p>
<p>A conexão resultante é no máximo muito lenta ou quebrada.
</p>
<h4><span class="mw-headline" id="Como_diagnosticar_o_problema">Como diagnosticar o problema</span></h4>
<p>Antes de mais, vamos deixar claro: esse problema é estranho. Em alguns casos, você não poderá usar conexões TCP (HTTP, FTP, ...) e em outros, você poderá se comunicar com alguns hosts (muito poucos).
</p>
<p>Quando você tiver esse problema, a saída do <code>dmesg</code> está normal, os logs estão limpos e <code>ip addr</code> informará o estado como normal... e, na verdade, tudo parece normal.
</p>
<p>Se você não pode navegar em nenhum site, mas você pode fazer ping em alguns hosts aleatórios, você tem grande chances de estar enfrentando esse problema: o ping usa o ICMP e não é afetado pelos problemas do TCP.
</p>
<p>Você pode tentar usar <a href="/title/Wireshark_(Portugu%C3%AAs)" title="Wireshark (Português)">Wireshark</a>. Você pode ver comunicações UDP e ICMP bem-sucedidas, mas comunicações TCP mal sucedidas (somente para hosts estrangeiros).
</p>
<h4><span class="mw-headline" id="Formas_de_corrigi-lo">Formas de corrigi-lo</span></h4>
<h5><span class="mw-headline" id="Ruim">Ruim</span></h5>
<p>Para corrigi-lo de forma incorreta, você pode alterar o valor <code>tcp_rmem</code>, no qual o cálculo do Fator de Escala se baseia. Embora ele funcione para a maioria dos hosts, não é garantido, especialmente para os mais distantes.
</p>
<pre># echo "4096 87380 174760" &gt; /proc/sys/net/ipv4/tcp_rmem
</pre>
<h5><span class="mw-headline" id="Bom">Bom</span></h5>
<p>Simplesmente desative Escala de Janela. Como a Escala de Janela é um bom recurso TCP, pode ser desconfortável desativá-lo, especialmente se você não conseguir corrigir o roteador quebrado. Há várias maneiras de desativar Escala de Janela, e parece que a maneira mais segura (que funcionará com a maioria dos kernels) é adicionar a seguinte linha a <code>/etc/sysctl.d/99-disable_window_scaling.conf</code> (veja também <a href="/title/Sysctl" title="Sysctl">sysctl</a>):
</p>
<pre>net.ipv4.tcp_window_scaling = 0
</pre>
<h5><span class="mw-headline" id="Melhor">Melhor</span></h5>
<p>Esse problema é causado por roteadores/firewalls quebrados, então vamos mudá-los. Alguns usuários relataram que o roteador quebrado era o próprio roteador DSL.
</p>
<h4><span class="mw-headline" id="Mais_sobre_isso">Mais sobre isso</span></h4>
<p>Essa seção é baseada nos artigos, em inglês, do LWN <a rel="nofollow" class="external text" href="https://lwn.net/Articles/92727/">Escala de janela e roteadores quebrados</a> e do Kernel Trap <a rel="nofollow" class="external text" href="https://web.archive.org/web/20120426135627/http://kerneltrap.org:80/node/6723">Escala de Janela na Internet</a> (arquivado).
</p>
<p>Há também vários tópicos relevantes no LKML.
</p>
<h2>
<span id="Veja_tamb.C3.A9m"></span><span class="mw-headline" id="Veja_também">Veja também</span>
</h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://www.tldp.org/LDP/nag2/index.html">Linux Network Administrators Guide</a></li>
<li><a rel="nofollow" class="external text" href="https://www.debian.org/doc/manuals/debian-reference/ch05.en.html">Referência do Debian: Configuração de Rede</a></li>
<li><a rel="nofollow" class="external text" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Networking_Guide/">RHEL7: Guia de Rede</a></li>
<li><a rel="nofollow" class="external text" href="http://www.linuxhomenetworking.com/wiki/">Linux Home Networking</a></li>
<li><a rel="nofollow" class="external text" href="https://blog.packagecloud.io/eng/2016/06/22/monitoring-tuning-linux-networking-stack-receiving-data/">Monitorando e ajustando o Linux a Pilha de Conectividade: Recebendo dados</a></li>
<li><a rel="nofollow" class="external text" href="https://blog.packagecloud.io/eng/2017/02/06/monitoring-tuning-linux-networking-stack-sending-data/">Monitorando e ajustando o Linux a Pilha de Conectividade: Enviando dados</a></li>
<li><a rel="nofollow" class="external text" href="https://blog.yadutaf.fr/2017/07/28/tracing-a-packet-journey-using-linux-tracepoints-perf-ebpf/">Rastreamento de uma viagem de pacotes usando tracepoints, perf e eBPF</a></li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="/title/Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="/title/Category:Network_Configuration_(Portugu%C3%AAs)" title="Category:Network Configuration (Português)">Network Configuration (Português)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="/title/Category:Pages_or_sections_flagged_with_Template:Expansion" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Network_configuration_(Portugu%C3%AAs)&amp;oldid=669160">https://wiki.archlinux.org/index.php?title=Network_configuration_(Português)&amp;oldid=669160</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 8 May 2021, at 11:21.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="/title/ArchWiki:Privacy_policy" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="/title/ArchWiki:About" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="/title/ArchWiki:General_disclaimer" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
