<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>File permissions and attributes (Português) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-File_permissions_and_attributes_Português rootpage-File_permissions_and_attributes_Português skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">File permissions and attributes (Português)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Status de tradução:</strong> Esse artigo é uma tradução de <a href="/title/File_permissions_and_attributes" title="File permissions and attributes">File permissions and attributes</a>. Data da última tradução: 2021-04-25. Você pode ajudar a sincronizar a tradução, se houver <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=File_permissions_and_attributes&amp;diff=0&amp;oldid=661076">alterações</a> na versão em inglês.</div>
<div class="archwiki-template-meta-related-articles-start">
<p>Artigos relacionados</p>
<ul>
<li><a href="/title/Usu%C3%A1rios_e_grupos" class="mw-redirect" title="Usuários e grupos">Usuários e grupos</a></li>
<li><a href="/title/Umask_(Portugu%C3%AAs)" title="Umask (Português)">umask</a></li>
<li><a href="/title/Listas_de_Controle_de_Acesso" class="mw-redirect" title="Listas de Controle de Acesso">Listas de Controle de Acesso</a></li>
<li><a href="/title/Capacidades" class="mw-redirect" title="Capacidades">Capacidades</a></li>
</ul>
</div>
<p><a href="/title/Sistemas_de_arquivos" class="mw-redirect" title="Sistemas de arquivos">Sistemas de arquivos</a> usam <a href="https://en.wikipedia.org/wiki/pt:Permiss%C3%B5es_de_sistema_de_arquivos" class="extiw" title="w:pt:Permissões de sistema de arquivos">permissões</a> e <a href="https://en.wikipedia.org/wiki/File_attribute" class="extiw" title="w:File attribute">atributos</a> para regular o nível de interação que processos de sistema podem ter com os arquivos e diretórios.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> Quando usados para fins de segurança, as permissões e atributos só defendem contra ataques iniciados a partir do sistema inicializado. Para proteger os dados armazenados dos invasores com acesso físico à máquina, é preciso também implementar <a href="/title/Criptografia_de_dados_em_repouso" class="mw-redirect" title="Criptografia de dados em repouso">criptografia de dados em repouso</a>.</div>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Visualizando_permiss%C3%B5es"><span class="tocnumber">1</span> <span class="toctext">Visualizando permissões</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Exemplos"><span class="tocnumber">1.1</span> <span class="toctext">Exemplos</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-3">
<a href="#Alterando_permiss%C3%B5es"><span class="tocnumber">2</span> <span class="toctext">Alterando permissões</span></a>
<ul>
<li class="toclevel-2 tocsection-4">
<a href="#M%C3%A9todo_de_texto"><span class="tocnumber">2.1</span> <span class="toctext">Método de texto</span></a>
<ul>
<li class="toclevel-3 tocsection-5"><a href="#Atalhos_do_m%C3%A9todo_de_texto"><span class="tocnumber">2.1.1</span> <span class="toctext">Atalhos do método de texto</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#Permiss%C3%B5es_de_c%C3%B3pia"><span class="tocnumber">2.1.2</span> <span class="toctext">Permissões de cópia</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-7"><a href="#M%C3%A9todo_num%C3%A9rico"><span class="tocnumber">2.2</span> <span class="toctext">Método numérico</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#chmod_em_lote"><span class="tocnumber">2.3</span> <span class="toctext">chmod em lote</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#Alterando_o_propriet%C3%A1rio"><span class="tocnumber">3</span> <span class="toctext">Alterando o proprietário</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#Listas_de_Controle_de_Acesso"><span class="tocnumber">4</span> <span class="toctext">Listas de Controle de Acesso</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="#Umask"><span class="tocnumber">5</span> <span class="toctext">Umask</span></a></li>
<li class="toclevel-1 tocsection-12">
<a href="#Atributos_de_arquivos"><span class="tocnumber">6</span> <span class="toctext">Atributos de arquivos</span></a>
<ul>
<li class="toclevel-2 tocsection-13"><a href="#chattr_e_lsattr"><span class="tocnumber">6.1</span> <span class="toctext">chattr e lsattr</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-14">
<a href="#Atributos_estendidos"><span class="tocnumber">7</span> <span class="toctext">Atributos estendidos</span></a>
<ul>
<li class="toclevel-2 tocsection-15"><a href="#Atributos_estendidos_de_usu%C3%A1rio"><span class="tocnumber">7.1</span> <span class="toctext">Atributos estendidos de usuário</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Preservando_atributos_estendidos"><span class="tocnumber">7.2</span> <span class="toctext">Preservando atributos estendidos</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-17">
<a href="#Dicas_e_truques"><span class="tocnumber">8</span> <span class="toctext">Dicas e truques</span></a>
<ul>
<li class="toclevel-2 tocsection-18"><a href="#Preservar_root"><span class="tocnumber">8.1</span> <span class="toctext">Preservar root</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-19"><a href="#Veja_tamb%C3%A9m"><span class="tocnumber">9</span> <span class="toctext">Veja também</span></a></li>
</ul>
</div>

<h2>
<span id="Visualizando_permiss.C3.B5es"></span><span class="mw-headline" id="Visualizando_permissões">Visualizando permissões</span>
</h2>
<p>Use a opção <code>-l</code> do comando <a href="/title/Ls_(Portugu%C3%AAs)" class="mw-redirect" title="Ls (Português)">ls</a> para visualizar as permissões (ou <b>modo de arquivo</b>) definidas para o conteúdo de um diretório, por exemplo:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ls -l /caminho/para/diretório</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">total 128
drwxr-xr-x 2 archie users  4096 Jul  5 21:03 'Área de trabalho'
drwxr-xr-x 6 archie users  4096 Jul  5 17:37  Documentos
drwxr-xr-x 2 archie users  4096 Jul  5 13:45  Downloads
-rw-rw-r-- 1 archie users  5120 Jun 27 08:28  clientes
-rw-r--r-- 1 archie users  3339 Jun 27 08:28  tarefas
-rwxr-xr-x 1 archie users  2048 Jul  6 12:56  meuscript.sh
</pre>
<p>A primeira coluna é o que devemos focar. Tomando um valor de exemplo de <code>drwxrwxrwx +</code>, o significado de cada caractere é explicado nas seguintes tabelas:
</p>
<table class="wikitable">

<tbody>
<tr style="text-align:center;">
<td>
<code>d</code>
</td>
<td>
<code>rwx</code>
</td>
<td>
<code>rwx</code>
</td>
<td>
<code>rwx</code>
</td>
<td>
<code>+</code>
</td>
</tr>
<tr>
<td>O tipo de arquivo, tecnicamente não sendo parte de suas permissões. Veja <code>info ls -n "What information is listed"</code> para uma explicação dos valores possíveis.
</td>
<td>As permissões que o proprietário tem sobre o arquivo, explicadas abaixo.
</td>
<td>As permissões que o grupo tem sobre o arquivo, explicadas abaixo.
</td>
<td>As permissões que outros usuários têm sobre o arquivo, explicadas abaixo.
</td>
<td>Um único caractere que especifica se um método de acesso alternativo se aplica ao arquivo. Quando esse caractere é um espaço, não há método de acesso alternativo. Um caractere <code>.</code> indica um arquivo com um contexto de segurança, mas nenhum outro método de acesso alternativo. Um arquivo com qualquer outra combinação de métodos de acesso alternativo é marcado com um caractere <code>+</code>, por exemplo, no caso de <a href="/title/Listas_de_Controle_de_Acesso" class="mw-redirect" title="Listas de Controle de Acesso">Listas de Controle de Acesso</a>.
</td>
</tr>
</tbody>
</table>
<p>Cada uma das três tríades de permissão (<code>rwx</code> no exemplo acima) pode ser composta dos seguintes caracteres:
</p>
<table class="wikitable">
<tbody>
<tr>
<th scope="col" style="width: 10%;">
</th>
<th scope="col" style="width: 10%;">Caractere
</th>
<th scope="col" style="width: 30%;">Efeito nos arquivos
</th>
<th scope="col" style="width: 50%;">Efeito em diretórios
</th>
</tr>
<tr>
<th rowspan="2" style="text-align:left;">Permissão de leitura (primeiro caractere)
</th>
<td style="text-align:center;">
<code>-</code>
</td>
<td>O arquivo não pode ser lido.
</td>
<td>O conteúdo do diretório não pode ser mostrado.
</td>
</tr>
<tr>
<td style="text-align:center;">
<code>r</code>
</td>
<td>O arquivo pode ser lido.
</td>
<td>O conteúdo do diretório pode ser mostrado.
</td>
</tr>
<tr>
<th rowspan="2" style="text-align:left;">Permissão de escrita (segundo caractere)
</th>
<td style="text-align:center;">
<code>-</code>
</td>
<td>O arquivo não pode ser modificado.
</td>
<td>O conteúdo do diretório não pode ser modificado.
</td>
</tr>
<tr>
<td style="text-align:center;">
<code>w</code>
</td>
<td>O arquivo pode ser modificado.
</td>
<td>O conteúdo do diretório pode ser modificado (criar novos arquivos ou pastas; renomear ou excluir arquivos ou pastas existentes); exige que a permissão de execução também esteja definida, do contrário essa permissão não tem efeito.
</td>
</tr>
<tr>
<th rowspan="6" style="text-align:left;">Permissão de execução (terceiro caractere)
</th>
<td style="text-align:center;">
<code>-</code>
</td>
<td>O arquivo não pode ser executado.
</td>
<td>O diretório não pode ser acessado com <a href="/title/Cd_(Portugu%C3%AAs)" class="mw-redirect" title="Cd (Português)">cd</a>.
</td>
</tr>
<tr>
<td style="text-align:center;">
<code>x</code>
</td>
<td>O arquivo pode ser executado.
</td>
<td>O diretório pode ser acessado com <a href="/title/Cd_(Portugu%C3%AAs)" class="mw-redirect" title="Cd (Português)">cd</a>; essa é o único bit de permissão que, na prática, pode ser considerado como "herdado" dos diretórios anteriores - na verdade, se <i>qualquer</i> pasta no caminho não tem o bit <code>x</code> definido, o arquivo ou pasta final também não pode ser acessado(a), independentemente de suas permissões; veja <span class="plainlinks archwiki-template-man" title="$ man 7 path_resolution"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/path_resolution.7">path_resolution(7)</a></span> para mais informações.
</td>
</tr>
<tr>
<td style="text-align:center;">
<code>s</code>
</td>
<td colspan="2">O bit <a href="https://en.wikipedia.org/wiki/pt:setuid" class="extiw" title="w:pt:setuid">setuid</a> quando encontrar-se na tríade de <b>u</b>suário; o bit <b>setgid</b> quando encontrar-se na tríade de <b>g</b>rupo; ele não é encontrado na tríade de <b>o</b>utros; isso também implica que <code>x</code> está definido.
</td>
</tr>
<tr>
<td style="text-align:center;">
<code>S</code>
</td>
<td colspan="2">Mesmo que <code>s</code>, mas <code>x</code> não está definido; raro em arquivos comuns e inútil em pastas.
</td>
</tr>
<tr>
<td style="text-align:center;">
<code>t</code>
</td>
<td colspan="2">O <a href="https://en.wikipedia.org/wiki/pt:sticky_bit" class="extiw" title="w:pt:sticky bit">sticky</a> bit (ou "bit pegajoso"); ele só pode ser encontrado na tríade de <b>o</b>utros; isso também implica que <code>x</code> está definido.
</td>
</tr>
<tr>
<td style="text-align:center;">
<code>T</code>
</td>
<td colspan="2">Mesmo que <code>t</code>, mas <code>x</code> não está definido; raro em arquivos comuns e inútil em pastas.
</td>
</tr>
</tbody>
</table>
<p>Veja <code>info Coreutils -n "Mode Structure"</code> e <span class="plainlinks archwiki-template-man" title="$ man 1 chmod"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/chmod.1">chmod(1)</a></span> para mais detalhes.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> Você pode ver as permissões de um caminho com <code>namei -l <i>caminho</i></code>.</div>
<h3><span class="mw-headline" id="Exemplos">Exemplos</span></h3>
<p>Vamos ver alguns exemplos para esclarecer:
</p>
<pre><b>drwx------</b> 6 archie users  4096 Jul  5 17:37 Documentos
</pre>
<p>Archie tem acesso total ao diretório Documentos. Ele pode listar, criar arquivos e renomear, excluir qualquer arquivo em Documentos, independentemente das permissões de arquivo. Sua capacidade de acessar um arquivo depende da permissão do arquivo.
</p>
<pre><b>dr-x------</b> 6 archie users  4096 Jul  5 17:37 Documentos
</pre>
<p>Archie tem acesso completo, exceto que ele não pode criar, renomear, excluir qualquer arquivo. Ele pode listar os arquivos e (se a permissão do arquivo permitir) acessar um arquivo existente em Documentos.
</p>
<pre><b>d-wx------</b> 6 archie users  4096 Jul  5 17:37 Documentos
</pre>
<p>Archie não pode fazer 'ls' em Documentos, mas se ele sabe o nome de um arquivo existente, ele pode listar, renomear, deletar ou (se a permissão do arquivo permitir) acessá-lo. Além disso, ele é capaz de criar novos arquivos.
</p>
<pre><b>d--x------</b> 6 archie users  4096 Jul  5 17:37 Documentos
</pre>
<p>Archie só é capaz de (se a permissão do arquivo o autorizar) acessar esses arquivos em Documentos que ele conhece. Ele não pode listar arquivos já existentes ou criar, renomear, excluir qualquer um deles.
</p>
<p>Você deve ter em mente que elaboramos permissões de diretório e não tem nada a ver com as permissões de arquivos individuais. Quando você cria um novo arquivo, é o diretório que muda. É por isso que você precisa de permissão de gravação no diretório.
</p>
<p>Vejamos outro exemplo, desta vez de um arquivo, não de um diretório:
</p>
<pre><b>-rw-r--r--</b> 1 archie users  5120 Jun 27 08:28 foobar
</pre>
<p>Aqui podemos ver que a primeira letra não é <code>d</code> mas <code>-</code>. Então sabemos que é um arquivo, não um diretório. Em seguida, as permissões do proprietário são <code>rw-</code> para que o proprietário tenha a capacidade de ler e escrever, mas não de executar. Isso pode parecer estranho que o proprietário não tenha todas as três permissões, mas a permissão <code>x</code> não é necessária, pois é um arquivo de texto/dados, para ser lido por um editor de texto como Gedit, EMACS ou software como o R, e não um executável por si só (se contivesse algo como código de programação python, então muito bem poderia ser). As permissões do grupo são definidas para <code>r--</code>, então o grupo tem a capacidade de ler o arquivo mas não de escrevê-lo/editá-lo de qualquer forma - é essencialmente como configurar algo para somente leitura. Podemos ver que as mesmas permissões se aplicam a todos os outros também.
</p>
<h2>
<span id="Alterando_permiss.C3.B5es"></span><span class="mw-headline" id="Alterando_permissões">Alterando permissões</span>
</h2>
<p><a href="https://en.wikipedia.org/wiki/pt:chmod" class="extiw" title="wikipedia:pt:chmod">chmod</a> é um comando no Linux e em outros sistemas operacionais parecidos com Unix que permite alterar (<i>ch</i>ange) as permissões (ou <i>mod</i>o de acesso) de um arquivo ou diretório.
</p>
<h3>
<span id="M.C3.A9todo_de_texto"></span><span class="mw-headline" id="Método_de_texto">Método de texto</span>
</h3>
<p>Para alterar as permissões - ou <i>modo de acesso</i> - de um arquivo, use o comando <i>chmod</i> em um terminal. Abaixo está a estrutura geral do comando:
</p>
<pre>chmod <i>quem</i>=<i>permissões</i> <i>nome_do_arquivo</i>
</pre>
<p>sendo <code><i>quem</i></code> qualquer intervalo de letras, cada significando a quem está sendo dada a permissão. Eles são o que segue:
</p>
<ul>
<li>
<code>u</code>: o <a href="/title/Usu%C3%A1rio" class="mw-redirect" title="Usuário">usuário</a> proprietário do arquivo.</li>
<li>
<code>g</code>: o <a href="/title/Grupo_de_usu%C3%A1rios" class="mw-redirect" title="Grupo de usuários">grupo de usuários</a> ao qual o arquivo pertence.</li>
<li>
<code>o</code>: <b>o</b>utros usuários, isto é, todos os demais.</li>
<li>
<code>a</code>: todos (<i><b>a</b>ll</i>) acima; use isso em vez de digitar <code>ugo</code>.</li>
</ul>
<p>As permissões são as mesmas discutidas em <a href="#Visualizando_permiss%C3%B5es">#Visualizando permissões</a> (<code>r</code>, <code>w</code> e <code>x</code>).
</p>
<p>Agora dê uma olhada em alguns exemplos usando este comando. Suponha que você tenha se tornado muito protetor do diretório Documentos e queira negar a todos menos a si mesmo, permissões para ler, escrever e executar (ou, neste caso, pesquisar/procurar) nele:
</p>
<p>Antes: <code>drwxr-xr-x 6 archie users  4096 Jul  5 17:37 Documentos</code>
</p>
<pre>$ chmod g= Documentos
$ chmod o= Documentos
</pre>
<p>Após: <code>drwx------ 6 archie users  4096 Jul  6 17:32 Documentos</code>
</p>
<p>Aqui, porque você quer negar permissões, você não coloca nenhuma letra após o <code>=</code> onde as permissões seriam inseridas. Agora você pode ver que apenas as permissões do proprietário são <code>rwx</code> e todas as outras permissões são <code>-</code>.
</p>
<p>Isso pode ser revertido com:
</p>
<p>Antes: <code>drwx------ 6 archie users  4096 Jul  6 17:32 Documentos</code>
</p>
<pre>$ chmod g=rx Documentos
$ chmod o=rx Documentos
</pre>
<p>Após: <code>drwxr-xr-x 6 archie users  4096 Jul  6 17:32 Documentos</code>
</p>
<p>No próximo exemplo, você deseja conceder permissões de leitura e execução ao grupo e a outros usuários, portanto, coloque as letras das permissões (<code>r</code> e <code>x</code>) após o <code>=</code>, sem espaços.
</p>
<p>Você pode simplificar isso para colocar mais de uma letra <code><i>quem</i></code> no mesmo comando, por exemplo:
</p>
<pre>$ chmod go=rx Documentos
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Não importa em que ordem você coloca as letras <code><i>quem</i></code> ou as letras de permissão em um comando <code>chmod</code>: você pode ter <code>chmod go=rx arquivo</code> ou <code>chmod og=xr arquivo</code>. É tudo a mesma coisa.</div>
<p>Agora, vamos considerar um segundo exemplo, suponha que você queira alterar um arquivo <code>foobar</code> para que tenha permissões de leitura e gravação e outros usuários do grupo <code>users</code> que possam ser colegas trabalhando em <code>foobar</code>, também pode ler e escrever para ele, mas outros usuários só podem lê-lo:
</p>
<p>Antes: <code>-rw-r--r-- 1 archie users  5120 Jun 27 08:28 foobar</code>
</p>
<pre>$ chmod g=rw foobar
</pre>
<p>Após: <code>-rw-rw-r-- 1 archie users  5120 Jun 27 08:28 foobar</code>
</p>
<p>Isso é exatamente como no primeiro exemplo, mas com um arquivo, não um diretório, e você concede permissão de gravação (apenas para dar um exemplo de concessão de todas as permissões).
</p>
<h4>
<span id="Atalhos_do_m.C3.A9todo_de_texto"></span><span class="mw-headline" id="Atalhos_do_método_de_texto">Atalhos do método de texto</span>
</h4>
<p>O comando <i>chmod</i> permite adicionar e subtrair permissões de um conjunto existente usando <code>+</code> ou <code>-</code> em vez de <code>=</code>. Isso é diferente dos comandos acima, que essencialmente reescrevem as permissões (por exemplo, para alterar uma permissão de <code>r--</code> para <code>rw-</code>, você ainda precisa incluir <code>r</code> assim como <code>w</code> após o <code>=</code> na invocação do comando <i>chmod</i>. Se você esquecesse <code>r</code>, isso retiraria a permissão de <code>r</code>, pois estão sendo re-escritas com o <code>=</code>. Usar <code>+</code> e <code>-</code> evita isso adicionando ou afastando do conjunto <i>atual</i> de permissões).
</p>
<p>Vamos tentar este método <code>+</code> e <code>-</code> com o exemplo anterior de adicionar permissões de escrita ao grupo:
</p>
<p>Antes: <code>-rw-r--r-- 1 archie users 5120 Jun 27 08:28 foobar</code>
</p>
<pre>$ chmod g+w foobar
</pre>
<p>Após: <code>-rw-rw-r-- 1 archie users  5120 Jun 27 08:28 foobar</code>
</p>
<p>Outro exemplo, negando permissões de escrita para todos (<b>a</b>):
</p>
<p>Antes: <code>-rw-rw-r-- 1 archie users  5120 Jun 27 08:28 foobar</code>
</p>
<pre>$ chmod a-w foobar
</pre>
<p>Após: <code>-r--r--r-- 1 archie users  5120 Jun 27 08:28 foobar</code>
</p>
<p>Um atalho diferente é o modo especial <code>X</code>: este não é um modo de arquivo real, mas é frequentemente usado em conjunto com a opção <code>-R</code> para definir o bit executável somente para diretórios, e deixe-o inalterado para arquivos regulares, por exemplo:
</p>
<pre>$ chmod -R a+rX ./data/
</pre>
<h4>
<span id="Permiss.C3.B5es_de_c.C3.B3pia"></span><span class="mw-headline" id="Permissões_de_cópia">Permissões de cópia</span>
</h4>
<p>É possível dizer ao <i>chmod</i> para copiar as permissões de uma classe, digamos o proprietário, e dar as mesmas permissões para grupo ou até mesmo todos. Para fazer isso, ao invés de colocar <code>r</code>, <code>w</code>, ou <code>x</code> depois do <code>=</code>, coloque outra letra de <i>quem</i>. Por exemplo:
</p>
<p>Antes: <code>-rw-r--r-- 1 archie users 5120 Jun 27 08:28 foobar</code>
</p>
<pre>$ chmod g=u foobar
</pre>
<p>Após: <code>-rw-rw-r-- 1 archie users 5120 Jun 27 08:28 foobar</code>
</p>
<p>Este comando essencialmente se traduz a "altere as permissões do grupo (<code>g=</code>) para ser a mesma que o usuário proprietário (<code>=u</code>). Note que você não pode copiar um conjunto de permissões, bem como conceder novas, por exemplo:
</p>
<pre>$ chmod g=wu foobar
</pre>
<p>Neste caso, <i>chmod</i> exibe um erro.
</p>
<h3>
<span id="M.C3.A9todo_num.C3.A9rico"></span><span class="mw-headline" id="Método_numérico">Método numérico</span>
</h3>
<p>O <i>chmod</i> também pode definir permissões usando números.
</p>
<p>Usar números é outro método que permite editar as permissões de todos os três proprietário, grupo e outros ao mesmo tempo, bem como os bits setuid, setgid e sticky. Essa estrutura básica do código é esta:
</p>
<pre>$ chmod <i>xxx</i> <i>nome_do_arquivo</i>
</pre>
<p>sendo <code><b>xxx</b></code> um número de 3 dígitos onde cada dígito pode ser qualquer coisa de 0 a 7. O primeiro dígito se aplica a permissões para proprietário, o segundo dígito se aplica a permissões para grupo e o terceiro dígito se aplica a permissões para todos os outros.
</p>
<p>Nesta notação numérica, os valores <code>r</code>, <code>w</code> e <code>x</code> possuem seu próprio valor numérico:
</p>
<pre>r=4
w=2
x=1
</pre>
<p>Para criar um número de 3 dígitos, é necessário considerar quais permissões você deseja que proprietário, grupo e todos os outros tenham e, em seguida, totalizar seus valores. Por exemplo, se você quiser conceder ao proprietário de um diretório permissões de leitura, escrita e execução, e quiser que o grupo e todos os demais tenham apenas permissões de leitura e execução, você obterá os valores numéricos da seguinte forma:
</p>
<ul>
<li>Proprietário: <code>rwx</code>=4+2+1=7</li>
<li>Grupo: <code>r-x</code>=4+0+1=5</li>
<li>Outro: <code>r-x</code>=4+0+1=5</li>
</ul>
<pre>$ chmod 755 <i>nome_do_arquivo</i>
</pre>
<p>Isso é equivalente a usar o seguinte:
</p>
<pre>$ chmod u=rwx <i>nome_do_arquivo</i>
$ chmod go=rx <i>nome_do_arquivo</i>
</pre>
<p>Para visualizar as permissões existentes de um arquivo ou diretório no formato numérico, use o comando <span class="plainlinks archwiki-template-man" title="$ man 1 stat"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/stat.1">stat(1)</a></span>:
</p>
<pre>$ stat -c %a <i>nome_do_arquivo</i>
</pre>
<p>sendo que a opção %a especifica a saída no formato numérico.
</p>
<p>A maioria das pastas e diretórios é configurada para <code>755</code> para permitir leitura, escrita e execução para o proprietário, mas nega a escrita para todos os outros, e os arquivos são normalmente <code>644</code> para permitir leitura e escrita para o proprietário, mas apenas leitura para todos os outros; consulte a última nota sobre a falta de permissões <code>x</code> com arquivos não executáveis: é a mesma coisa aqui.
</p>
<p>Para ver isso em ação com exemplos, considere o exemplo anterior que foi usado, mas com este método numérico aplicado:
</p>
<p>Antes: <code>-rw-r--r-- 1 archie users  5120 Jun 27 08:28 foobar</code>
</p>
<pre>$ chmod 664 foobar
</pre>
<p>Após: <code>-rw-rw-r-- 1 archie users  5120 Jun 27 08:28 foobar</code>
</p>
<p>Se este fosse um executável, o número seria <code>774</code> se você quisesse conceder permissão executável ao proprietário e ao grupo. Alternativamente, se você quiser que todos tenham permissão de leitura, o número será <code>444</code>. Tratar <code>r</code> como 4, <code>w</code> como 2 e <code>x</code> como 1 é provavelmente a maneira mais fácil de calcular os valores numéricos para usar <code>chmod <i>xxx</i> <i>nome_do_arquivo</i></code>, mas há também um método binário, em que cada permissão possui um número binário e, em seguida, isso é convertido em um número. É um pouco mais complicado, mas aqui incluído para ser completo.
</p>
<p>Considere esse conjunto de permissões:
</p>
<pre>-rwxr-xr--
</pre>
<p>Se você colocar um 1 em cada permissão concedida e um 0 para cada um não concedido, o resultado seria algo assim:
</p>
<pre>-rwxrwxr-x
 111111101
</pre>
<p>Você pode então converter esses números binários:
</p>
<pre>000=0	    100=4
001=1	    101=5
010=2	    110=6
011=3	    111=7
</pre>
<p>O valor do acima seria, portanto, 775.
</p>
<p>Considere que queríamos remover a permissão gravável do grupo:
</p>
<pre>-rwxr-xr-x
 111101101
</pre>
<p>O valor seria, portanto, 755 e você usaria o <code>chmod 755 <i>nome_do_arquivo</i></code> para remover a permissão de escrita. Você notará que obtém o mesmo número de três dígitos, independentemente do método usado. O uso de texto ou números dependerá da preferência pessoal e da velocidade de digitação. Quando você deseja restaurar um diretório ou arquivo para as permissões padrão, por exemplo, ler e escrever (e executar) permissão para o proprietário, mas negar permissão de gravação a todos os outros, pode ser mais rápido usar <code>chmod 755/644 <i>nome_do_arquivo</i></code>. No entanto, se você estiver alterando as permissões para algo fora da norma, poderá ser mais simples e rápido usar o método de texto, em vez de tentar convertê-lo em números, o que pode levar a um erro. Pode-se argumentar que não há diferença significativa real na velocidade de cada método para um usuário que só precisa usar <i>chmod</i> ocasionalmente.
</p>
<p>Você também pode usar o método numérico para definir os bits <code>setuid</code>, <code>setgid</code> e <code>sticky</code> usando quatro dígitos.
</p>
<pre>setuid=4
setgid=2
sticky=1
</pre>
<p>Por exemplo, <code>chmod 2777 <i>nome_do_arquivo</i></code> vai definir bits de leitura/escrita/execução para todos e também vai habilitar o bit <code>setgid</code>.
</p>
<h3><span class="mw-headline" id="chmod_em_lote">chmod em lote</span></h3>
<p>Geralmente, os diretórios e arquivos não devem ter as mesmas permissões. Se for necessário modificar em massa uma árvore de diretórios, use <a href="/title/Find_(Portugu%C3%AAs)" class="mw-redirect" title="Find (Português)">find</a> para modificar seletivamente um ou o outro.
</p>
<p>Para usar <i>chmod</i> para modificar permissões apenas de diretórios para 755:
</p>
<pre>$ find <i>diretório</i> -type d -exec chmod 755 {} +
</pre>
<p>Para usar <i>chmod</i> para modificar permissões apenas de arquivos para 644:
</p>
<pre>$ find <i>diretório</i> -type f -exec chmod 644 {} +
</pre>
<h2>
<span id="Alterando_o_propriet.C3.A1rio"></span><span class="mw-headline" id="Alterando_o_proprietário">Alterando o proprietário</span>
</h2>
<p>O <a href="https://en.wikipedia.org/wiki/pt:chown" class="extiw" title="wikipedia:pt:chown">chown</a> altera o proprietário de um arquivo ou diretório, o que é mais rápido e mais fácil do que alterar as permissões em alguns casos.
</p>
<p>Considere o exemplo a seguir, criando uma nova partição com <a href="/title/GParted" class="mw-redirect" title="GParted">GParted</a> para dados de backup. O Gparted faz isso tudo como root, então tudo pertence à raiz por padrão. Tudo isso é bom, mas quando se trata de escrever dados na partição montada, a permissão é negada para usuários comuns.
</p>
<pre>brw-rw---- 1 root disk 8,    9 Jul  6 16:02 sda9
drwxr-xr-x 5 root root    4096 Jul  6 16:01 Backup
</pre>
<p>Como você pode ver, o dispositivo em <code>/dev</code> pertence ao root, assim como o local de montagem (<code>/media/Backup</code>). Para alterar o proprietário do local de montagem, é possível fazer o seguinte:
</p>
<p>Antes: <code>drwxr-xr-x 5 root  root 4096 Jul  6 16:01 Backup</code>
</p>
<pre># chown archie /media/Backup
</pre>
<p>Após: <code>drwxr-xr-x 5 archie  root 4096 Jul  6 16:01 Backup</code>
</p>
<p>Agora a partição pode ter dados gravados pelo novo proprietário, archie, sem alterar as permissões (já que a tríade do proprietário já tinha permissões <code>rwx</code>).
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> 
<ul>
<li>
<code>chown</code> sempre limpa os bits de setuid e setgid.</li>
<li>Além root, nenhum usuário pode usar <code>chown</code> para "dar" arquivos que lhe pertence para outro usuário.</li>
</ul>
</div>
<h2><span class="mw-headline" id="Listas_de_Controle_de_Acesso">Listas de Controle de Acesso</span></h2>
<p><a href="/title/Listas_de_Controle_de_Acesso" class="mw-redirect" title="Listas de Controle de Acesso">Listas de Controle de Acesso</a> fornece um mecanismo de permissão adicional e mais flexível para sistemas de arquivos, permitindo definir permissões para qualquer usuário ou grupo para qualquer arquivo.
</p>
<h2><span class="mw-headline" id="Umask">Umask</span></h2>
<p>O utilitário <a href="/title/Umask_(Portugu%C3%AAs)" title="Umask (Português)">umask</a> é usado para controlar a máscara do modo de criação de arquivo, que determina o valor inicial dos bits de permissão de arquivo para arquivos recém-criados.
</p>
<h2><span class="mw-headline" id="Atributos_de_arquivos">Atributos de arquivos</span></h2>
<p>Além dos bits do modo de arquivo que controlam <a href="/title/Usu%C3%A1rios_e_grupos" class="mw-redirect" title="Usuários e grupos">usuário e grupo</a> permissões de leitura, gravação e execução, vários <a href="/title/Sistemas_de_arquivos" class="mw-redirect" title="Sistemas de arquivos">sistemas de arquivos</a> suportam atributos de arquivo que permitem uma personalização adicional das operações de arquivo permitidas. Esta seção descreve alguns desses atributos e como trabalhar com eles.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> Por padrão, atributos de arquivo não são preservados por <a href="/title/Cp_(Portugu%C3%AAs)" class="mw-redirect" title="Cp (Português)">cp</a>, <a href="/title/Rsync" title="Rsync">rsync</a> e outros programas similares.</div>
<h3><span class="mw-headline" id="chattr_e_lsattr">chattr e lsattr</span></h3>
<p>Para sistemas de arquivos ext2 e <a href="/title/Ext3" title="Ext3">ext3</a>, o pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=e2fsprogs">e2fsprogs</a></span> contém os programas <a href="https://en.wikipedia.org/wiki/lsattr" class="extiw" title="wikipedia:lsattr">lsattr</a> e <a href="https://en.wikipedia.org/wiki/chattr" class="extiw" title="wikipedia:chattr">chattr</a> que listam e alteram os atributos de um arquivo, respectivamente. Embora alguns não sejam respeitados por todos os sistemas de arquivos, os atributos disponíveis são:
</p>
<ul>
<li>
<code>a</code>: anexar apenas</li>
<li>
<code>c</code>: compactado</li>
<li>
<code>d</code>: sem despejo</li>
<li>
<code>e</code>: formato estendido</li>
<li>
<code>i</code>: imutável</li>
<li>
<code>j</code>: journalling de dados</li>
<li>
<code>s</code>: exclusão segura</li>
<li>
<code>t</code>: sem tail-merging</li>
<li>
<code>u</code>: não excluível</li>
<li>
<code>A</code>: sem atualizações atime</li>
<li>
<code>C</code>: sem cópia ao escrever</li>
<li>
<code>D</code>: atualizações de diretório síncronas</li>
<li>
<code>S</code>: atualizações síncronas</li>
<li>
<code>T</code>: topo da hierarquia de diretório</li>
</ul>
<p>Por exemplo, se você deseja definir o bit imutável em alguns arquivos, use o seguinte comando:
</p>
<pre># chattr +i <i>/caminho/para/arquivo</i>
</pre>
<p>Para remover um atributo em um arquivo, basta alterar <code>+</code> para <code>-</code>.
</p>
<h2><span class="mw-headline" id="Atributos_estendidos">Atributos estendidos</span></h2>
<p>Do <span class="plainlinks archwiki-template-man" title="$ man 7 xattr"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/xattr.7">xattr(7)</a></span>: "Atributos estendidos são pares nome:valor associados permanentemente a arquivos e diretórios". Existem quatro classes de atributos estendidos: segurança, sistema, confiável e usuário.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> Por padrão, atributos estendidos não são preservados por <a href="/title/Cp_(Portugu%C3%AAs)" class="mw-redirect" title="Cp (Português)">cp</a>, <a href="/title/Rsync" title="Rsync">rsync</a> e outros programas similares, veja <a href="#Preservando_atributos_estendidos">#Preservando atributos estendidos</a>.</div>
<p>Atributos estendidos também são usados para definir <a href="/title/Capacidades" class="mw-redirect" title="Capacidades">Capacidades</a>.
</p>
<h3>
<span id="Atributos_estendidos_de_usu.C3.A1rio"></span><span class="mw-headline" id="Atributos_estendidos_de_usuário">Atributos estendidos de usuário</span>
</h3>
<p>Os atributos estendidos do usuário podem ser usados para armazenar informações arbitrárias sobre um arquivo. Para criar um:
</p>
<pre>$ setfattr -n user.checksum -v "3baf9ebce4c664ca8d9e5f6314fb47fb" foo.txt
</pre>
<p>Use getfattr para exibir atributos estendidos:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ getfattr -d foo.txt</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># file: foo.txt
user.checksum="3baf9ebce4c664ca8d9e5f6314fb47fb"</pre>
<p>Finalmente, para remover um atributo estendido:
</p>
<pre>$ setfattr -x user.checksum foo.txt
</pre>
<h3><span class="mw-headline" id="Preservando_atributos_estendidos">Preservando atributos estendidos</span></h3>
<table class="wikitable">
<tbody>
<tr>
<th>Comando</th>
<th>Sinalizador necessário
</th>
</tr>
<tr>
<td><code>cp</code></td>
<td>
<code>--preserve=mode,ownership,timestamps,xattr</code>
</td>
</tr>
<tr>
<td><code>mv</code></td>
<td data-sort-value="3" style="background: #ffa; color: inherit; vertical-align: middle; text-align: center;">preserva, por padrão<sup>1
</sup>
</td>
</tr>
<tr>
<td><code>tar</code></td>
<td>
<code>--xattrs</code> para criação e extração
</td>
</tr>
<tr>
<td><code>bsdtar</code></td>
<td>
<code>-p</code> para extração
</td>
</tr>
<tr>
<td><a href="/title/Rsync" title="Rsync">rsync</a></td>
<td>
<code>--xattrs</code>
</td>
</tr>
</tbody>
</table>
<ol><li>mv descarta silenciosamente atributos quando o sistema de arquivos alvo não tiver suporte a eles.</li></ol>
<p>Para preservar atributos estendidos com <a href="/title/Editores_de_texto" class="mw-redirect" title="Editores de texto">editores de texto</a>, você precisa configurá-los para truncar arquivos ao salvar em vez de usar <span class="plainlinks archwiki-template-man" title="$ man 2 rename"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/rename.2">rename(2)</a></span>.<a rel="nofollow" class="external autonumber" href="https://unix.stackexchange.com/questions/45407">[1]</a>
</p>
<h2><span class="mw-headline" id="Dicas_e_truques">Dicas e truques</span></h2>
<h3><span class="mw-headline" id="Preservar_root">Preservar root</span></h3>
<p>Use o sinalizador <code>--preserve-root</code> para impedir que <code>chmod</code> atue recursivamente em <code>/</code>. Isso pode, por exemplo, impedir que um remova o bit executável em todo o sistema e, assim, quebre o sistema. Para usar esse sinalizador todas as vezes, defina-o em um <a href="/title/Alias" class="mw-redirect" title="Alias">alias</a>. Veja também <a rel="nofollow" class="external autonumber" href="https://www.reddit.com/r/linux/comments/4ni3xe/tifu_sudo_chmod_644/">[2]</a>.
</p>
<h2>
<span id="Veja_tamb.C3.A9m"></span><span class="mw-headline" id="Veja_também">Veja também</span>
</h2>
<ul>
<li><a href="https://en.wikipedia.org/wiki/pt:Chattr" class="extiw" title="wikipedia:pt:Chattr">wikipedia:pt:Chattr</a></li>
<li><a rel="nofollow" class="external text" href="https://www.hackinglinuxexposed.com/articles/20030417.html">Confusão nas Permissões de Arquivos no Linux</a></li>
<li><a rel="nofollow" class="external text" href="https://www.hackinglinuxexposed.com/articles/20030424.html">Confusão nas Permissões de Arquivos no Linux parte 2</a></li>
<li><a href="https://en.wikipedia.org/wiki/Extended_file_attributes#Linux" class="extiw" title="wikipedia:Extended file attributes">wikipedia:Extended file attributes#Linux</a></li>
<li><a rel="nofollow" class="external text" href="https://www.lesbonscomptes.com/pages/extattrs.html">Atributos estendidos: o bom, o não tão bom, o mal.</a></li>
<li><a rel="nofollow" class="external text" href="https://www.concrete5.org/documentation/how-tos/designers/backup-and-restore-file-permissions-in-linux/">Faça backup e restaure permissões de arquivos no Linux</a></li>
<li><a rel="nofollow" class="external text" href="https://serverfault.com/questions/364677/why-is-chmod-r-777-destructive">Por que “chmod -R 777 /” é destrutivo?</a></li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="/title/Special:Categories" title="Special:Categories">Categories</a>: <ul>
<li><a href="/title/Category:File_systems_(Portugu%C3%AAs)" title="Category:File systems (Português)">File systems (Português)</a></li>
<li><a href="/title/Category:Command-line_(Portugu%C3%AAs)" title="Category:Command-line (Português)">Command-line (Português)</a></li>
</ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=File_permissions_and_attributes_(Portugu%C3%AAs)&amp;oldid=668738">https://wiki.archlinux.org/index.php?title=File_permissions_and_attributes_(Português)&amp;oldid=668738</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 8 May 2021, at 10:41.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="/title/ArchWiki:Privacy_policy" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="/title/ArchWiki:About" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="/title/ArchWiki:General_disclaimer" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
