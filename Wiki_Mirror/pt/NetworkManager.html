<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>NetworkManager (Português) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-NetworkManager_Português rootpage-NetworkManager_Português skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">NetworkManager (Português)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Status de tradução:</strong> Esse artigo é uma tradução de <a href="../en/NetworkManager.html" title="NetworkManager">NetworkManager</a>. Data da última tradução: 2020-06-30. Você pode ajudar a sincronizar a tradução, se houver <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=NetworkManager&amp;diff=0&amp;oldid=588634">alterações</a> na versão em inglês.</div>
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../pt/Network_configuration.html" class="mw-redirect" title="Configuração de rede">Configuração de rede</a></li>
<li><a href="../pt/b9b884f10bec6b20a2e6f1b1fe79d6b3.html" class="mw-redirect" title="Configuração de rede sem fio">Configuração de rede sem fio</a></li>
</ul>
</div>
<p>O <a rel="nofollow" class="external text" href="https://wiki.gnome.org/Projects/NetworkManager/">NetworkManager</a> é um programa que provê a detecção e configuração automática de redes para computadores. As funcionalidades do NetworkManager são úteis para redes sem fio e cabeadas. Nas redes sem fio, o NetworkManager terá preferência pelas redes que já conhece, e possui a habilidade para trocar para a rede mais confiável sempre que disponível. Aplicativos preparados para o NetworkManager podem trocar do modo online para o offline. O NetworkManager tem preferência pelas redes cabeadas em detrimento das redes sem fio, e possui suporte a certos tipos de VPN. Foi originalmente desenvolvido pela Red Hat e agora, é hospedado no projeto <a href="../pt/GNOME.html" title="GNOME (Português)">GNOME</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> Por padrão, as senhas de Wi-Fi são armazenadas em texto simples, veja <a href="#Senhas_de_Wi-Fi_criptografadas">#Senhas de Wi-Fi criptografadas</a>.</div>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Instala%C3%A7%C3%A3o"><span class="tocnumber">1</span> <span class="toctext">Instalação</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Habilitar_NetworkManager"><span class="tocnumber">1.1</span> <span class="toctext">Habilitar NetworkManager</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Interfaces_adicionais"><span class="tocnumber">1.2</span> <span class="toctext">Interfaces adicionais</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Suporte_a_banda_larga_m%C3%B3vel"><span class="tocnumber">1.3</span> <span class="toctext">Suporte a banda larga móvel</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Suporte_a_PPPoE_/_DSL"><span class="tocnumber">1.4</span> <span class="toctext">Suporte a PPPoE / DSL</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Suporte_a_VPN"><span class="tocnumber">1.5</span> <span class="toctext">Suporte a VPN</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7">
<a href="#Uso"><span class="tocnumber">2</span> <span class="toctext">Uso</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#Exemplos_de_nmcli"><span class="tocnumber">2.1</span> <span class="toctext">Exemplos de nmcli</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Editar_uma_conex%C3%A3o"><span class="tocnumber">2.2</span> <span class="toctext">Editar uma conexão</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10">
<a href="#Front-ends"><span class="tocnumber">3</span> <span class="toctext">Front-ends</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#GNOME"><span class="tocnumber">3.1</span> <span class="toctext">GNOME</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#KDE_Plasma"><span class="tocnumber">3.2</span> <span class="toctext">KDE Plasma</span></a></li>
<li class="toclevel-2 tocsection-13">
<a href="#nm-applet"><span class="tocnumber">3.3</span> <span class="toctext">nm-applet</span></a>
<ul>
<li class="toclevel-3 tocsection-14"><a href="#Appindicator"><span class="tocnumber">3.3.1</span> <span class="toctext">Appindicator</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-15"><a href="#networkmanager-dmenu"><span class="tocnumber">3.4</span> <span class="toctext">networkmanager-dmenu</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-16">
<a href="#Configura%C3%A7%C3%A3o"><span class="tocnumber">4</span> <span class="toctext">Configuração</span></a>
<ul>
<li class="toclevel-2 tocsection-17"><a href="#Habilitar_NetworkManager_Wait_Online"><span class="tocnumber">4.1</span> <span class="toctext">Habilitar  NetworkManager Wait Online</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Configurar_as_permiss%C3%B5es_de_PolicyKit"><span class="tocnumber">4.2</span> <span class="toctext">Configurar as permissões de PolicyKit</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#Configura%C3%A7%C3%B5es_de_proxy"><span class="tocnumber">4.3</span> <span class="toctext">Configurações de proxy</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Verificando_conectividade"><span class="tocnumber">4.4</span> <span class="toctext">Verificando conectividade</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#Portais_cativos"><span class="tocnumber">4.5</span> <span class="toctext">Portais cativos</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#Cliente_DHCP"><span class="tocnumber">4.6</span> <span class="toctext">Cliente DHCP</span></a></li>
<li class="toclevel-2 tocsection-23">
<a href="#Gerenciamento_de_DNS"><span class="tocnumber">4.7</span> <span class="toctext">Gerenciamento de DNS</span></a>
<ul>
<li class="toclevel-3 tocsection-24">
<a href="#Cache_de_DNS_e_encaminhamento_condicional"><span class="tocnumber">4.7.1</span> <span class="toctext">Cache de DNS e encaminhamento condicional</span></a>
<ul>
<li class="toclevel-4 tocsection-25">
<a href="#dnsmasq"><span class="tocnumber">4.7.1.1</span> <span class="toctext">dnsmasq</span></a>
<ul>
<li class="toclevel-5 tocsection-26"><a href="#Configura%C3%A7%C3%A3o_personalizada_do_dnsmasq"><span class="tocnumber">4.7.1.1.1</span> <span class="toctext">Configuração personalizada do dnsmasq</span></a></li>
<li class="toclevel-5 tocsection-27"><a href="#IPv6"><span class="tocnumber">4.7.1.1.2</span> <span class="toctext">IPv6</span></a></li>
<li class="toclevel-5 tocsection-28"><a href="#DNSSEC"><span class="tocnumber">4.7.1.1.3</span> <span class="toctext">DNSSEC</span></a></li>
</ul>
</li>
<li class="toclevel-4 tocsection-29"><a href="#systemd-resolved"><span class="tocnumber">4.7.1.2</span> <span class="toctext">systemd-resolved</span></a></li>
<li class="toclevel-4 tocsection-30"><a href="#Resolvedor_de_DNS_com_um_assinante_do_openresolv"><span class="tocnumber">4.7.1.3</span> <span class="toctext">Resolvedor de DNS com um assinante do openresolv</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-31">
<a href="#Servidores_DNS_personalizados"><span class="tocnumber">4.7.2</span> <span class="toctext">Servidores DNS personalizados</span></a>
<ul>
<li class="toclevel-4 tocsection-32"><a href="#Configurando_servidores_DNS_globais_personalizados"><span class="tocnumber">4.7.2.1</span> <span class="toctext">Configurando servidores DNS globais personalizados</span></a></li>
<li class="toclevel-4 tocsection-33">
<a href="#Configurando_servidores_DNS_personalizados_em_uma_conex%C3%A3o"><span class="tocnumber">4.7.2.2</span> <span class="toctext">Configurando servidores DNS personalizados em uma conexão</span></a>
<ul>
<li class="toclevel-5 tocsection-34"><a href="#Configurando_servidores_DNS_personalizados_em_uma_conex%C3%A3o_(GUI)"><span class="tocnumber">4.7.2.2.1</span> <span class="toctext">Configurando servidores DNS personalizados em uma conexão (GUI)</span></a></li>
<li class="toclevel-5 tocsection-35"><a href="#Configurando_servidores_DNS_personalizados_em_uma_conex%C3%A3o_(nmcli_/_arquivo_de_conex%C3%A3o)"><span class="tocnumber">4.7.2.2.2</span> <span class="toctext">Configurando servidores DNS personalizados em uma conexão (nmcli / arquivo de conexão)</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-3 tocsection-36">
<a href="#/etc/resolv.conf"><span class="tocnumber">4.7.3</span> <span class="toctext">/etc/resolv.conf</span></a>
<ul>
<li class="toclevel-4 tocsection-37"><a href="#/etc/resolv.conf_n%C3%A3o_gerenciado"><span class="tocnumber">4.7.3.1</span> <span class="toctext">/etc/resolv.conf não gerenciado</span></a></li>
<li class="toclevel-4 tocsection-38"><a href="#Usar_openresolv"><span class="tocnumber">4.7.3.2</span> <span class="toctext">Usar openresolv</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2 tocsection-39"><a href="#Firewall"><span class="tocnumber">4.8</span> <span class="toctext">Firewall</span></a></li>
<li class="toclevel-2 tocsection-40"><a href="#Configura%C3%A7%C3%A3o_de_802.1x_/_PEAP"><span class="tocnumber">4.9</span> <span class="toctext">Configuração de 802.1x / PEAP</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-41">
<a href="#Servi%C3%A7os_de_rede_com_o_NetworkManager_dispatcher"><span class="tocnumber">5</span> <span class="toctext">Serviços de rede com o NetworkManager dispatcher</span></a>
<ul>
<li class="toclevel-2 tocsection-42"><a href="#Evitando_o_esgotamento_de_tempo_limite_do_dispatcher"><span class="tocnumber">5.1</span> <span class="toctext">Evitando o esgotamento de tempo limite do dispatcher</span></a></li>
<li class="toclevel-2 tocsection-43">
<a href="#Exemplos_de_dispatcher"><span class="tocnumber">5.2</span> <span class="toctext">Exemplos de dispatcher</span></a>
<ul>
<li class="toclevel-3 tocsection-44"><a href="#Montar_pasta_remota_com_sshfs"><span class="tocnumber">5.2.1</span> <span class="toctext">Montar pasta remota com sshfs</span></a></li>
<li class="toclevel-3 tocsection-45"><a href="#Montagem_de_compartilhamentos_SMB"><span class="tocnumber">5.2.2</span> <span class="toctext">Montagem de compartilhamentos SMB</span></a></li>
<li class="toclevel-3 tocsection-46"><a href="#Montagem_de_compartilhamentos_NFS"><span class="tocnumber">5.2.3</span> <span class="toctext">Montagem de compartilhamentos NFS</span></a></li>
<li class="toclevel-3 tocsection-47"><a href="#Usar_dispatcher_para_ativar_rede_sem_fio_automaticamente_dependendo_de_cabo_LAN_estar_conectado"><span class="tocnumber">5.2.4</span> <span class="toctext">Usar dispatcher para ativar rede sem fio automaticamente dependendo de cabo LAN estar conectado</span></a></li>
<li class="toclevel-3 tocsection-48"><a href="#Usar_dispatcher_para_conectar_a_uma_VPN_ap%C3%B3s_uma_conex%C3%A3o_de_rede_ser_estabelecida"><span class="tocnumber">5.2.5</span> <span class="toctext">Usar dispatcher para conectar a uma VPN após uma conexão de rede ser estabelecida</span></a></li>
<li class="toclevel-3 tocsection-49"><a href="#Usar_dispatcher_para_desabilitar_IPv6_em_conex%C3%B5es_de_provedor_de_VPN"><span class="tocnumber">5.2.6</span> <span class="toctext">Usar dispatcher para desabilitar IPv6 em conexões de provedor de VPN</span></a></li>
<li class="toclevel-3 tocsection-50"><a href="#OpenNTPD"><span class="tocnumber">5.2.7</span> <span class="toctext">OpenNTPD</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-51"><a href="#Testando"><span class="tocnumber">6</span> <span class="toctext">Testando</span></a></li>
<li class="toclevel-1 tocsection-52">
<a href="#Dicas_e_truques"><span class="tocnumber">7</span> <span class="toctext">Dicas e truques</span></a>
<ul>
<li class="toclevel-2 tocsection-53">
<a href="#Senhas_de_Wi-Fi_criptografadas"><span class="tocnumber">7.1</span> <span class="toctext">Senhas de Wi-Fi criptografadas</span></a>
<ul>
<li class="toclevel-3 tocsection-54"><a href="#Usando_GNOME_Keyring"><span class="tocnumber">7.1.1</span> <span class="toctext">Usando GNOME Keyring</span></a></li>
<li class="toclevel-3 tocsection-55"><a href="#Usando_KDE_Wallet"><span class="tocnumber">7.1.2</span> <span class="toctext">Usando KDE Wallet</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-56"><a href="#Compartilhando_conex%C3%A3o_internet_pelo_Wi-Fi"><span class="tocnumber">7.2</span> <span class="toctext">Compartilhando conexão internet pelo Wi-Fi</span></a></li>
<li class="toclevel-2 tocsection-57"><a href="#Compartilhando_conex%C3%A3o_internet_por_Ethernet"><span class="tocnumber">7.3</span> <span class="toctext">Compartilhando conexão internet por Ethernet</span></a></li>
<li class="toclevel-2 tocsection-58"><a href="#Verificando_se_a_conectividade_est%C3%A1_ativa_dentro_de_um_script_ou_trabalho_cron"><span class="tocnumber">7.4</span> <span class="toctext">Verificando se a conectividade está ativa dentro de um script ou trabalho cron</span></a></li>
<li class="toclevel-2 tocsection-59"><a href="#Conectar_a_uma_rede_com_segredo_na_inicializa%C3%A7%C3%A3o"><span class="tocnumber">7.5</span> <span class="toctext">Conectar a uma rede com segredo na inicialização</span></a></li>
<li class="toclevel-2 tocsection-60"><a href="#OpenConnect_com_senha_no_KWallet"><span class="tocnumber">7.6</span> <span class="toctext">OpenConnect com senha no KWallet</span></a></li>
<li class="toclevel-2 tocsection-61"><a href="#Ignorar_dispositivos_espec%C3%ADficos"><span class="tocnumber">7.7</span> <span class="toctext">Ignorar dispositivos específicos</span></a></li>
<li class="toclevel-2 tocsection-62"><a href="#Configurando_aleatoriza%C3%A7%C3%A3o_de_endere%C3%A7o_MAC"><span class="tocnumber">7.8</span> <span class="toctext">Configurando aleatorização de endereço MAC</span></a></li>
<li class="toclevel-2 tocsection-63"><a href="#Habilitar_extens%C3%B5es_de_privacidade_IPv6"><span class="tocnumber">7.9</span> <span class="toctext">Habilitar extensões de privacidade IPv6</span></a></li>
<li class="toclevel-2 tocsection-64"><a href="#Trabalhando_com_conex%C3%B5es_cabeadas"><span class="tocnumber">7.10</span> <span class="toctext">Trabalhando com conexões cabeadas</span></a></li>
<li class="toclevel-2 tocsection-65"><a href="#Usando_iwd_como_o_backend_de_Wi-Fi"><span class="tocnumber">7.11</span> <span class="toctext">Usando iwd como o backend de Wi-Fi</span></a></li>
<li class="toclevel-2 tocsection-66"><a href="#Executando_em_um_espa%C3%A7o_de_nomes_de_rede"><span class="tocnumber">7.12</span> <span class="toctext">Executando em um espaço de nomes de rede</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-67">
<a href="#Solu%C3%A7%C3%A3o_de_problemas"><span class="tocnumber">8</span> <span class="toctext">Solução de problemas</span></a>
<ul>
<li class="toclevel-2 tocsection-68"><a href="#Nenhum_prompt_para_senha_de_redes_Wi-Fi_seguras"><span class="tocnumber">8.1</span> <span class="toctext">Nenhum prompt para senha de redes Wi-Fi seguras</span></a></li>
<li class="toclevel-2 tocsection-69"><a href="#Gerenciamento_de_rede_desabilitado"><span class="tocnumber">8.2</span> <span class="toctext">Gerenciamento de rede desabilitado</span></a></li>
<li class="toclevel-2 tocsection-70"><a href="#Problemas_com_cliente_DHCP_interno"><span class="tocnumber">8.3</span> <span class="toctext">Problemas com cliente DHCP interno</span></a></li>
<li class="toclevel-2 tocsection-71"><a href="#Problemas_DHCP_com_dhclient"><span class="tocnumber">8.4</span> <span class="toctext">Problemas DHCP com dhclient</span></a></li>
<li class="toclevel-2 tocsection-72"><a href="#Modem_3G_n%C3%A3o_detectado"><span class="tocnumber">8.5</span> <span class="toctext">Modem 3G não detectado</span></a></li>
<li class="toclevel-2 tocsection-73"><a href="#Desligando_WLAN_em_laptops"><span class="tocnumber">8.6</span> <span class="toctext">Desligando WLAN em laptops</span></a></li>
<li class="toclevel-2 tocsection-74"><a href="#Revers%C3%A3o_de_configura%C3%A7%C3%B5es_de_endere%C3%A7o_IP_est%C3%A1tico_para_DHCP"><span class="tocnumber">8.7</span> <span class="toctext">Reversão de configurações de endereço IP estático para DHCP</span></a></li>
<li class="toclevel-2 tocsection-75"><a href="#N%C3%A3o_%C3%A9_poss%C3%ADvel_editar_conex%C3%B5es_como_usu%C3%A1rio_normal"><span class="tocnumber">8.8</span> <span class="toctext">Não é possível editar conexões como usuário normal</span></a></li>
<li class="toclevel-2 tocsection-76"><a href="#Esquecer_rede_sem_fio_oculta"><span class="tocnumber">8.9</span> <span class="toctext">Esquecer rede sem fio oculta</span></a></li>
<li class="toclevel-2 tocsection-77"><a href="#VPN_n%C3%A3o_funciona_no_GNOME"><span class="tocnumber">8.10</span> <span class="toctext">VPN não funciona no GNOME</span></a></li>
<li class="toclevel-2 tocsection-78"><a href="#Impossibilidade_de_se_conectar_a_redes_sem_fio_europeias_vis%C3%ADveis"><span class="tocnumber">8.11</span> <span class="toctext">Impossibilidade de se conectar a redes sem fio europeias visíveis</span></a></li>
<li class="toclevel-2 tocsection-79"><a href="#Conex%C3%A3o_autom%C3%A1tica_a_VPN_na_inicializa%C3%A7%C3%A3o_n%C3%A3o_funciona"><span class="tocnumber">8.12</span> <span class="toctext">Conexão automática a VPN na inicialização não funciona</span></a></li>
<li class="toclevel-2 tocsection-80"><a href="#Gargalo_no_systemd"><span class="tocnumber">8.13</span> <span class="toctext">Gargalo no systemd</span></a></li>
<li class="toclevel-2 tocsection-81"><a href="#Desconex%C3%B5es_de_rede_regulares,_lat%C3%AAncia,_pacotes_perdidos_(WiFi)"><span class="tocnumber">8.14</span> <span class="toctext">Desconexões de rede regulares, latência, pacotes perdidos (WiFi)</span></a></li>
<li class="toclevel-2 tocsection-82"><a href="#Impossibilidade_de_ligar_o_Wi-Fi_com_laptop_Lenovo_(IdeaPad,_Legion,_etc.)"><span class="tocnumber">8.15</span> <span class="toctext">Impossibilidade de ligar o Wi-Fi com laptop Lenovo (IdeaPad, Legion, etc.)</span></a></li>
<li class="toclevel-2 tocsection-83"><a href="#Desligar_envido_de_hostname"><span class="tocnumber">8.16</span> <span class="toctext">Desligar envido de hostname</span></a></li>
<li class="toclevel-2 tocsection-84"><a href="#nm-applet_desaparece_no_i3wm"><span class="tocnumber">8.17</span> <span class="toctext">nm-applet desaparece no i3wm</span></a></li>
<li class="toclevel-2 tocsection-85"><a href="#%C3%8Dcones_de_bandeja_do_nm-applet_exibidos_incorretamente"><span class="tocnumber">8.18</span> <span class="toctext">Ícones de bandeja do nm-applet exibidos incorretamente</span></a></li>
<li class="toclevel-2 tocsection-86"><a href="#Unit_dbus-org.freedesktop.resolve1.service_n%C3%A3o_encontrado"><span class="tocnumber">8.19</span> <span class="toctext">Unit dbus-org.freedesktop.resolve1.service não encontrado</span></a></li>
<li class="toclevel-2 tocsection-87"><a href="#Segredos_eram_necess%C3%A1rios,_mas_n%C3%A3o_fornecidos"><span class="tocnumber">8.20</span> <span class="toctext">Segredos eram necessários, mas não fornecidos</span></a></li>
<li class="toclevel-2 tocsection-88"><a href="#Conex%C3%A3o_WPA_Empresarial_com_o_NetworkManager"><span class="tocnumber">8.21</span> <span class="toctext">Conexão WPA Empresarial com o NetworkManager</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-89"><a href="#Veja_tamb%C3%A9m"><span class="tocnumber">9</span> <span class="toctext">Veja também</span></a></li>
</ul>
</div>

<h2>
<span id="Instala.C3.A7.C3.A3o"></span><span class="mw-headline" id="Instalação">Instalação</span>
</h2>
<p>O NetworkManager pode ser <a href="../pt/Help:Reading.html#Instala%C3%A7%C3%A3o_de_pacotes" class="mw-redirect" title="Instala">instalado</a> com o pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=networkmanager">networkmanager</a></span>, que contém um daemon, uma interface de linha de comando (<code>nmcli</code>) e uma interface baseada em curses (<code>nmtui</code>).
</p>
<h3><span class="mw-headline" id="Habilitar_NetworkManager">Habilitar NetworkManager</span></h3>
<p>Após a instalação, você deve <a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Iniciar/habilitar">iniciar/habilitar</a> <code>NetworkManager.service</code>. Uma vez iniciado o daemon do NetworkManager, ele se conectará automaticamente a todas as "conexões do sistema" disponíveis que já foram configuradas. Quaisquer "conexões de usuário" ou conexões não configuradas precisarão de <i>nmcli</i> ou um miniaplicativo para configurar e conectar.
</p>
<h3><span class="mw-headline" id="Interfaces_adicionais">Interfaces adicionais</span></h3>
<ul>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nm-connection-editor">nm-connection-editor</a></span> para uma interface gráfica de usuário,</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=network-manager-applet">network-manager-applet</a></span> para um miniaplicativo de bandeja de sistema (<code>nm-applet</code>).</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Você deve garantir que nenhum outro serviço que deseje configurar a rede esteja em execução; na verdade, vários serviços de rede entrarão em conflito. Você pode encontrar uma lista dos serviços em execução no momento com <code>systemctl --type=service</code> e, em seguida, <a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Parar">parar</a>. Veja <a href="#Configura%C3%A7%C3%A3o">#Configuração</a> para ativar o serviço NetworkManager.</div>
<h3>
<span id="Suporte_a_banda_larga_m.C3.B3vel"></span><span class="mw-headline" id="Suporte_a_banda_larga_móvel">Suporte a banda larga móvel</span>
</h3>
<p><a href="../pt/Help:Reading.html#Instala%C3%A7%C3%A3o_de_pacotes" class="mw-redirect" title="Instale">Instale</a> os pacotes <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=modemmanager">modemmanager</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mobile-broadband-provider-info">mobile-broadband-provider-info</a></span> e <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=usb_modeswitch">usb_modeswitch</a></span> para um suporte a conexão de banda larga móvel. Veja <a href="../en/USB_3G_Modem.html#NetworkManager" title="USB 3G Modem">USB 3G Modem#NetworkManager</a> para detalhes.
</p>
<h3>
<span id="Suporte_a_PPPoE_.2F_DSL"></span><span class="mw-headline" id="Suporte_a_PPPoE_/_DSL">Suporte a PPPoE / DSL</span>
</h3>
<p><a href="../pt/Help:Reading.html#Instala%C3%A7%C3%A3o_de_pacotes" class="mw-redirect" title="Instale">Instale</a> o pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=rp-pppoe">rp-pppoe</a></span> para suporte a conexão PPPoE/DSL. Para realmente adicionar uma conexão PPPoE, use <code>nm-connection-editor</code> e adicione uma nova conexão DSL/PPPoE.
</p>
<h3><span class="mw-headline" id="Suporte_a_VPN">Suporte a VPN</span></h3>
<p>O NetworkManager desde a versão 1.16 tem suporte nativo ao <a href="../en/WireGuard.html" title="WireGuard">WireGuard</a>, precisando apenas de seu módulo de kernel <code>wireguard</code>. Leia o <a rel="nofollow" class="external text" href="https://blogs.gnome.org/thaller/2019/03/15/wireguard-in-networkmanager/">WireGuard na publicação de blog do NetworkManager</a>.
</p>
<p>O suporte para outros tipos de VPN é baseado em um sistema de plug-in. Eles são fornecidos nos seguintes pacotes:
</p>
<ul>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=networkmanager-openconnect">networkmanager-openconnect</a></span> para <a href="../pt/OpenConnect.html" title="OpenConnect (Português)">OpenConnect</a>
</li>
<li>
<a href="../en/Networkmanager-openvpn.html" title="Networkmanager-openvpn">networkmanager-openvpn</a> para <a href="../en/OpenVPN.html" title="OpenVPN">OpenVPN</a>
</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=networkmanager-pptp">networkmanager-pptp</a></span> para <a href="../en/PPTP_Client.html" title="PPTP Client">PPTP Client</a>
</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=networkmanager-vpnc">networkmanager-vpnc</a></span> para <a href="../en/Vpnc.html" title="Vpnc">Vpnc</a>
</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=networkmanager-strongswan">networkmanager-strongswan</a></span> para <a href="../en/StrongSwan.html" title="StrongSwan">strongSwan</a>
</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/networkmanager-fortisslvpn-git/">networkmanager-fortisslvpn-git</a></span><sup><small>AUR</small></sup>
</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/networkmanager-iodine-git/">networkmanager-iodine-git</a></span><sup><small>AUR</small></sup>
</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/networkmanager-libreswan/">networkmanager-libreswan</a></span><sup><small>AUR</small></sup>
</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/networkmanager-l2tp/">networkmanager-l2tp</a></span><sup><small>AUR</small></sup>
</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/networkmanager-ssh-git/">networkmanager-ssh-git</a></span><sup><small>AUR</small></sup>
</li>
<li><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=network-manager-sstp">network-manager-sstp</a></span></li>
</ul>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> Há vários <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/NetworkManager/NetworkManager/issues?search=VPN&amp;state=opened">bugs</a> (e <a rel="nofollow" class="external text" href="https://bugzilla.gnome.org/buglist.cgi?bug_status=__open__&amp;content=VPN&amp;product=NetworkManager">bugs antigos</a>) relacionados a suporte VPN. Verifique as opções de processos daemon definidos via a GUI corretamente e certifique-se em cada lançamento do pacote.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Pra ter uma resolução de DNS totalmente funcional ao usar VPN, você deve configurar <a href="#Cache_de_DNS_e_encaminhamento_condicional">encaminhamento condicional</a>.</div>
<h2><span class="mw-headline" id="Uso">Uso</span></h2>
<p>NetworkManager vem com <span class="plainlinks archwiki-template-man" title="$ man 1 nmcli"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/nmcli.1">nmcli(1)</a></span> e <span class="plainlinks archwiki-template-man" title="$ man 1 nmtui"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/nmtui.1">nmtui(1)</a></span>.
</p>
<h3><span class="mw-headline" id="Exemplos_de_nmcli">Exemplos de nmcli</span></h3>
<p>Lista redes wifi próximas:
</p>
<pre>$ nmcli device wifi list
</pre>
<p>Conecta a uma rede wifi:
</p>
<pre>$ nmcli device wifi connect <i>SSID</i> password <i>senha</i>
</pre>
<p>Conecta a uma rede oculta:
</p>
<pre>$ nmcli device wifi connect <i>SSID</i> password <i>senha</i> hidden yes
</pre>
<p>Conecta a um wifi na interface de rede <code>wlan1</code>:
</p>
<pre>$ nmcli device wifi connect <i>SSID</i> password <i>senha</i> ifname wlan1 <i>nome_perfil</i>
</pre>
<p>Desconecta uma interface:
</p>
<pre>$ nmcli device disconnect ifname eth0
</pre>
<p>Reconecta uma interface marcada como desconectada:
</p>
<pre>$ nmcli connection up uuid <i>UUID</i>
</pre>
<p>Obtém uma lista de UUIDs:
</p>
<pre>$ nmcli connection show
</pre>
<p>Vê uma lista de dispositivos de rede e seus estados:
</p>
<pre>$ nmcli device
</pre>
<p>Desliga o wifi:
</p>
<pre>$ nmcli radio wifi off
</pre>
<h3>
<span id="Editar_uma_conex.C3.A3o"></span><span class="mw-headline" id="Editar_uma_conexão">Editar uma conexão</span>
</h3>
<p>Para uma lista compreensiva de configurações, veja <span class="plainlinks archwiki-template-man" title="$ man 5 nm-settings"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/nm-settings.5">nm-settings(5)</a></span>.
</p>
<p>Em primeiro lugar você precisa obter lista de conexões:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ nmcli connection</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">NAME                UUID                                  TYPE      DEVICE
Conexão cabeada 2   e7054040-a421-3bef-965d-bb7d60b7cecf  ethernet  enp5s0
Conexão cabeada 1   997f2782-f0fc-301d-bfba-15421a2735d8  ethernet  enp0s25
MEU-WIFI-DE-CASA    92a0f7b3-2eba-49ab-a899-24d83978f308  wifi       --
</pre>
<p>Aqui você pode usar a primeira coluna como ID de conexão usada posteriormente. Neste exemplo, escolhemos <code>Conexão cabeada 2</code> como um ID de conexão.
</p>
<p>Você pode ter três métodos para configurar uma conexão após <code>Conexão cabeada 2</code> ter sido criada:
</p>
<dl>
<dt>Editor interativo do nmcli</dt>
<dd>
<code>nmcli connection edit <i>Conexão cabeada 2</i></code>.<br> O uso está bem documentado no editor.</dd>
</dl>
<dl>
<dt>Interface de linha de comando do nmcli</dt>
<dd>
<code>nmcli connection modify <i>Conexão cabeada 2</i> <i>definição</i>.<i>propriedade</i> <i>valor</i></code>. Veja <span class="plainlinks archwiki-template-man" title="$ man 1 nmcli"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/nmcli.1">nmcli(1)</a></span> para seu uso. Por exemplo, você pode alterar sua métrica de rota IPv4 para 200 usando o comando <code>nmcli connection modify 'Conexão cabeada 2' ipv4.route-metric 200</code>.</dd>
</dl>
<dl>
<dt>Arquivo de conexão</dt>
<dd>Em <code>/etc/NetworkManager/system-connections/</code>, modifique o arquivo <code><i>Conexão cabeada 2</i>.nmconnection</code> correspondente.<br> Não se esqueça de recarregar o arquivo de configuração com <code>nmcli connection reload</code>
</dd>
</dl>
<h2><span class="mw-headline" id="Front-ends">Front-ends</span></h2>
<p>Para configurar e ter acesso fácil ao NetworkManager, a maioria dos usuários desejará instalar um applet. Esse front-end da GUI geralmente reside na bandeja do sistema (ou na área de notificação) e permite a seleção de rede e a configuração do NetworkManager. Vários ambientes de área de trabalho possuem seu próprio applet. Caso contrário, você pode usar <a href="#nm-applet">#nm-applet</a>.
</p>
<h3><span class="mw-headline" id="GNOME">GNOME</span></h3>
<p>O <a href="../pt/GNOME.html" title="GNOME (Português)">GNOME</a> tem uma ferramenta embutida, acessível a partir das configurações de Rede.
</p>
<h3><span class="mw-headline" id="KDE_Plasma">KDE Plasma</span></h3>
<p><a href="../pt/Help:Reading.html#Instala%C3%A7%C3%A3o_de_pacotes" class="mw-redirect" title="Instale">Instale</a> o pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=plasma-nm">plasma-nm</a></span>. Em seguida, adicione-o à barra de tarefas do KDE por meio do menu <i>Opções de painel &gt; Adicionar widgets &gt; Redes</i>.
</p>
<h3><span class="mw-headline" id="nm-applet">nm-applet</span></h3>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=network-manager-applet">network-manager-applet</a></span> é um front-end em GTK 3 que funciona sob ambientes Xorg com uma bandeja de sistema.
</p>
<p>Para armazenar conexões secretas, instale e configure <a href="../en/GNOME/Keyring.html" title="GNOME/Keyring">GNOME/Keyring</a>.
</p>
<p>Esteja ciente de que depois de ativar a opção caixa de seleção <code>Disponibilizar para outros usuários</code> para uma conexão, o NetworkManager armazena a senha em texto simples, embora o respectivo arquivo seja acessível apenas para root (ou outros usuários via <code>nm-applet</code>). Veja <a href="#Senhas_de_Wi-Fi_criptografadas">#Senhas de Wi-Fi criptografadas</a>.
</p>
<p>Para executar <code>nm-applet</code> sem uma bandeja do sistema, você pode usar <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=trayer">trayer</a></span> ou <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=stalonetray">stalonetray</a></span>. Por exemplo, você pode adicionar um script como este em seu caminho:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">nmgui</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh
nm-applet    2&gt;&amp;1 &gt; /dev/null &amp;
stalonetray  2&gt;&amp;1 &gt; /dev/null
killall nm-applet
</pre>
<p>Quando você fecha a janela <i>stalonetray</i>, ela fecha <code>nm-applet</code> também, então nenhuma memória extra é usada quando você terminar as configurações de rede.
</p>
<p>O applet pode mostrar notificações de eventos, como conexão ou desconexão de uma rede WiFi. Para que essas notificações sejam exibidas, verifique se você tem um servidor de notificação instalado - consulte <a href="../en/Desktop_notifications.html" title="Desktop notifications">Notificações na área de trabalho</a>. Se você usar o applet sem um servidor de notificação, poderá ver algumas mensagens em stdout/stderr e o aplicativo poderá ser interrompido. Veja <a rel="nofollow" class="external autonumber" href="https://bugzilla.gnome.org/show_bug.cgi?id=788313">[1]</a>.
</p>
<p>Para executar <code>nm-applet</code> com tais notificações desabilitadas, inicie o miniaplicativo com o seguinte comando:
</p>
<pre>$ nm-applet --no-agent
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> <code>nm-applet</code> pode ser iniciado automaticamente com um <a href="../pt/XDG_Autostart.html" title="XDG Autostart (Português)">arquivo desktop de inicialização automática</a>, para adicionar a opção --no-agent, modifique a linha Exec, p.ex.,
 <pre>Exec=nm-applet --no-agent</pre>
</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> No <a href="../pt/I3.html" title="I3 (Português)">i3</a>, se o nm-applet for iniciado com a opção <code>--no-agent</code>, não será possível conectar-se a uma nova rede WiFi criptografada clicando na lista de itens porque nenhuma janela de diálogo de entrada de senha será exibida. <a href="../pt/508d3afdfb62d49d74039238ef71cd04.html" class="mw-redirect" title="Journal (Português)">journal</a> mostrará <code>no secrets: No agents were available for this request</code>.</div>
<h4><span class="mw-headline" id="Appindicator">Appindicator</span></h4>
<p>Desde a versão 1.18.0, o suporte do Appindicator está <a rel="nofollow" class="external text" href="https://github.com/archlinux/svntogit-packages/commit/7640a2bd557fe84813207ef4d5e35bb5aece6c54">disponível</a> no pacote oficial <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=network-manager-applet">network-manager-applet</a></span>. Para usar o nm-applet em um ambiente Appindicator, inicie o miniaplicativo com o seguinte comando:
</p>
<pre>$ nm-applet --indicator
</pre>
<h3><span class="mw-headline" id="networkmanager-dmenu">networkmanager-dmenu</span></h3>
<p>Como alternativa, existe o <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/networkmanager-dmenu-git/">networkmanager-dmenu-git</a></span><sup><small>AUR</small></sup>, que é um pequeno script para gerenciar as conexões do NetworkManager com o <a href="../en/Dmenu.html" title="Dmenu">dmenu</a> ou <a href="../en/Rofi.html" title="Rofi">rofi</a> em vez do <code>nm-applet</code>. Ele fornece todos os recursos essenciais, como conexão com conexões Wi-Fi ou com fio existentes do NetworkManager, conexão a novas conexões Wi-Fi, solicitações de senha, se necessário, conexão VPN existente, habilitação/desabilitação de rede e inicialização da interface gráfica <i>nm-connection-editor</i>, conexão a redes Bluetooth.
</p>
<h2>
<span id="Configura.C3.A7.C3.A3o"></span><span class="mw-headline" id="Configuração">Configuração</span>
</h2>
<p>O NetworkManager exigirá algumas etapas adicionais para poder funcionar corretamente. Certifique-se de ter configurado <code>/etc/hosts</code> como descrito na seção <a href="../pt/Network_configuration.html#Configurando_um_hostname" class="mw-redirect" title="Configuração de rede">Configuração de rede#Configurando um hostname</a>.
</p>
<p>O NetworkManager possui um arquivo de configuração global em <code>/etc/NetworkManager/NetworkManager.conf</code>. Arquivos de configuração adicionais podem ser colocados em <code>/etc/NetworkManager/conf.d/</code>. Geralmente, nenhuma configuração precisa ser feita para os padrões globais.
</p>
<p>Após editar um arquivo de configuração, as alterações podem ser aplicadas executando:
</p>
<pre># nmcli general reload
</pre>
<h3><span class="mw-headline" id="Habilitar_NetworkManager_Wait_Online">Habilitar  NetworkManager Wait Online</span></h3>
<p>Se você tiver serviços que falham se eles forem iniciados antes que a rede esteja ativa, você pode usar o <code>NetworkManager-wait-online.service</code> além do <code>NetworkManager.service</code>. Isso, no entanto, raramente é necessário porque a maioria dos daemons em rede é inicializada corretamente, mesmo que a rede ainda não tenha sido configurada.
</p>
<p>Em alguns casos, o serviço ainda falhará ao iniciar com sucesso na inicialização devido à configuração de tempo limite em <code>/usr/lib/systemd/system/NetworkManager-wait-online.service</code> ser muito curta. Altere o tempo limite padrão de 30 para um valor mais alto.
</p>
<h3>
<span id="Configurar_as_permiss.C3.B5es_de_PolicyKit"></span><span class="mw-headline" id="Configurar_as_permissões_de_PolicyKit">Configurar as permissões de PolicyKit</span>
</h3>
<p>Veja <a href="../en/General_troubleshooting.html#Session_permissions" title="General troubleshooting">General troubleshooting#Session permissions</a> para como configurar uma sessão de trabalho.
</p>
<p>Com uma sessão de trabalho, você tem várias opções para conceder os privilégios necessários ao NetworkManager:
</p>
<ul>
<li>
<i>Opção 1.</i> Execute um agente de autenticação <a href="../en/Polkit.html" title="Polkit">Polkit</a> ao efetuar login, como <code>/usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1</code> (parte do <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=polkit-gnome">polkit-gnome</a></span>). Você será solicitado a fornecer sua senha sempre que adicionar ou remover uma conexão de rede.</li>
<li>
<i>Opção 2.</i> <a href="../pt/Users_and_groups.html#Gerenciamento_de_grupo" class="mw-redirect" title="Usuários e grupos">Adicione</a> a si próprio ao grupo <code>wheel</code>. Você não precisará inserir sua senha, mas a sua conta de usuário também poderá receber outras permissões, como a capacidade de usar o <a href="../pt/Sudo.html" title="Sudo (Português)">sudo</a> sem digitar a senha do root.</li>
<li>
<i>Opção 3.</i> <a href="../pt/Users_and_groups.html#Gerenciamento_de_grupo" class="mw-redirect" title="Usuários e grupos">Adicione</a> a si próprio ao grupo <code>network</code> e crie o seguinte arquivo:</li>
</ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/polkit-1/rules.d/50-org.freedesktop.NetworkManager.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">polkit.addRule(function(action, subject) {
  if (action.id.indexOf("org.freedesktop.NetworkManager.") == 0 &amp;&amp; subject.isInGroup("network")) {
    return polkit.Result.YES;
  }
});
</pre>
<dl><dd>Todos os usuários do grupo <code>network</code> poderão adicionar e remover redes sem uma senha. Isso não funcionará em <a href="../pt/Systemd.html" title="Systemd (Português)">systemd</a> se você não tiver uma sessão ativa com <i>systemd-logind</i>.</dd></dl>
<h3>
<span id="Configura.C3.A7.C3.B5es_de_proxy"></span><span class="mw-headline" id="Configurações_de_proxy">Configurações de proxy</span>
</h3>
<p>O NetworkManager não lida diretamente com configurações de proxy, mas se você estiver usando o <a href="../pt/GNOME.html" title="GNOME (Português)">GNOME</a> ou <a href="../pt/KDE.html" title="KDE (Português)">KDE</a>, você pode usar o <a rel="nofollow" class="external text" href="http://marin.jb.free.fr/proxydriver/">proxydriver</a> que lida com configurações de proxy usando Informações do NetworkManager. O proxydriver é encontrado no pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/proxydriver/">proxydriver</a></span><sup><small>AUR</small></sup>.
</p>
<p>Para que o <i>proxydriver</i> possa alterar as configurações do proxy, você precisaria executar este comando, como parte do processo de inicialização do GNOME (veja <a href="../pt/GNOME.html#Inicializa%C3%A7%C3%A3o_autom%C3%A1tica" title="GNOME (Português)">GNOME (Português)#Inicialização automática</a>):
</p>
<pre>xhost +si:localuser:<i>nome_de_usuário</i>
</pre>
<p>Veja também as <a href="../en/Proxy_server.html" class="mw-redirect" title="Proxy settings">configurações de proxy</a>.
</p>
<h3><span class="mw-headline" id="Verificando_conectividade">Verificando conectividade</span></h3>
<p>NetworkManager pode tentar alcançar uma página na Internet ao conectar a uma rede. <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=networkmanager">networkmanager</a></span> está configurado por padrão em <code>/usr/lib/NetworkManager/conf.d/20-connectivity.conf</code> para verificar a conectividade com o archlinux.org. Para usar um servidor web diferente ou desabilitar a verificação de conectividade, crie <code>/etc/NetworkManager/conf.d/20-connectivity.conf</code>, veja <span class="plainlinks archwiki-template-man" title="$ man 5 NetworkManager.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/NetworkManager.conf.5#CONNECTIVITY_SECTION">NetworkManager.conf(5) § CONNECTIVITY SECTION</a></span>. Segue abaixo um exemplo de uso de servidores do GNOME (não requer o uso de <a href="../en/GNOME.html" title="GNOME">GNOME</a> em si):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/conf.d/20-connectivity.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[connectivity]
uri=http://nmcheck.gnome.org/check_network_status.txt
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Embora as verificações automáticas de conectividade sejam um vazamento de privacidade em potencial, o URL oficial de conectividade padrão do archlinux.org está comprometido em não registrar nenhum acesso. Veja <a rel="nofollow" class="external autonumber" href="https://gitlab.archlinux.org/archlinux/infrastructure/-/commit/68fbaca2ef9f31f624f117899848f4288d6b39d1">[2]</a>.</div>
<h3><span class="mw-headline" id="Portais_cativos">Portais cativos</span></h3>
<p>Para aqueles que estão por trás de um <a href="https://en.wikipedia.org/wiki/Captive_portal" class="extiw" title="wikipedia:Captive portal">portal cativo</a> <i>(captive portal)</i>, o gerenciador de desktop pode abrir automaticamente uma janela solicitando credenciais. Se sua área de trabalho não funcionar, você pode usar o pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=capnet-assist">capnet-assist</a></span> (no entanto, atualmente ele possui um script de <i>dispatcher</i> quebrado do NetworkManager). Como alternativa, você pode criar um script de expedidor do NetworkManager com o seguinte conteúdo:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/dispatcher.d/90-open_captive_portal</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh -e
# Script to dispatch NetworkManager events
#
# Runs shows a login webpage on walled garden networks.
# See NetworkManager(8) for further documentation of the dispatcher events.

PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin

if [ -x "/usr/bin/logger" ]; then
    logger="/usr/bin/logger -s -t captive-portal"
else
    logger=":"
fi

wait_for_process() {
    PNAME=$1
    while [ -z "$(/usr/bin/pgrep $PNAME)" ]; do
        sleep 3;
    done
}

#launch the browser, but on boot we need to wait that nm-applet starts
start_browser() {
    local user="$1"
    local display="$2"

    export DISPLAY="$display"
    wait_for_process nm-applet

    export XAUTHORITY="/home/$user/.Xauthority"

    $logger "Running browser as '$user' with display '$display' to login in captive portal"
    sudo -u "$user" --preserve-env=DISPLAY,XAUTHORITY -H xdg-open http://capnet.elementary.io 2&gt;&amp;1 &gt; /dev/null
}

# Run the right scripts
case "$2" in
    connectivity-change)
    $logger -p user.debug "dispatcher script triggered on connectivity change: $CONNECTIVITY_STATE"
    if [ "$CONNECTIVITY_STATE" = "PORTAL" ]; then
        # Match last column of who's output with ' :[at least one digit] '
        who | awk '$NF ~ /\(:[0-9]+\)/ { print $1 " " substr($NF, 2, length($NF)-2) };' | \
        while read user display; do
            start_browser $user $display || $logger -p user.err "Failed for user: '$user' display: '$display'"
        done
    fi
    ;;
    *)
    # In a down phase
    exit 0
    ;;
esac
</pre>
<p>Você precisará <a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Reiniciar">reiniciar</a> <code>NetworkManager.service</code> ou reiniciar para que isso comece a funcionar. Depois disso, o script do expedidor deve abrir uma janela de login assim que detectar que você está atrás de um portal cativo.
</p>
<p>Outra solução é o <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/captive-browser-git/">captive-browser-git</a></span><sup><small>AUR</small></sup>, baseado no Google Chrome.
</p>
<h3><span class="mw-headline" id="Cliente_DHCP">Cliente DHCP</span></h3>
<p>Por padrão, o NetworkManager usa seu cliente DHCP interno. O plugin DHCPv4 interno baseado na biblioteca <a rel="nofollow" class="external text" href="https://github.com/nettools/n-dhcp4">n-dhcp4 do nettools</a>, enquanto o plugin DHCPv6 interno é feito de código baseado systemd-networkd.
</p>
<p>Para usar o cliente DHCP da ISC, <a href="../pt/Help:Reading.html#Instala%C3%A7%C3%A3o_de_pacotes" class="mw-redirect" title="Instale">instale</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dhclient">dhclient</a></span>. Para alterar o backend do cliente DHCP, defina a opção <code>main.dhcp=<i>nome_cliente_dhcp</i></code> com um arquivo de configuração em <code>/etc/NetworkManager/conf.d/</code>. Por exemplo:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/conf.d/dhcp-client.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[main]
dhcp=dhclient</pre>
 <div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> 
<ul>
<li>Não ative as units systemd enviadas com os pacotes <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dhclient">dhclient</a></span> e <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dhcpcd">dhcpcd</a></span>. Eles entrarão em conflito com o NetworkManager; consulte a nota em <a href="#Instala%C3%A7%C3%A3o">#Instalação</a> para mais detalhes.</li>
<li>O NetworkManger não suporta dhcpcd ≥ 9.0.0. Veja <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/66231">FS#66231</a>.</li>
</ul>
</div>
<h3><span class="mw-headline" id="Gerenciamento_de_DNS">Gerenciamento de DNS</span></h3>
<p>O gerenciamento de DNS do NetworkManager é descrito na página wiki do projeto GNOME — <a rel="nofollow" class="external text" href="https://wiki.gnome.org/Projects/NetworkManager/DNS">Projects/NetworkManager/DNS</a>.
</p>
<h4><span class="mw-headline" id="Cache_de_DNS_e_encaminhamento_condicional">Cache de DNS e encaminhamento condicional</span></h4>
<p>O NetworkManager possui um plugin para habilitar o cache DNS e encaminhamento condicional (<a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/NetworkManager/NetworkManager/merge_requests/143">anteriormente</a> chamado "DNS dividido" na documentação do NetworkManager) usando <a href="../pt/Dnsmasq.html" title="Dnsmasq (Português)">dnsmasq</a> ou <a href="../en/Systemd-resolved.html" title="Systemd-resolved">systemd-resolved</a>. As vantagens dessa configuração são que as pesquisas de DNS serão armazenadas em cache, encurtando os tempos de resolução e as pesquisas de DNS dos hosts de VPN serão roteadas para os servidores DNS da VPN relevantes. Isso é especialmente útil se você estiver conectado a mais de uma VPN.
</p>
<h5><span class="mw-headline" id="dnsmasq">dnsmasq</span></h5>
<p>Certifique-se que <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dnsmasq">dnsmasq</a></span> está instalado. Então, defina <code>main.dns=dnsmasq</code> com um arquivo de configuração em <code>/etc/NetworkManager/conf.d/</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/conf.d/dns.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[main]
dns=dnsmasq</pre>
<p>Agora, execute <code>nmcli general reload</code> como root. NetworkManager vai iniciar automaticamente o dnsmasq e adicionar <code>127.0.0.1</code> ao <code>/etc/resolv.conf</code>. Os servidores DNS originais podem ser localizados no <code>/run/NetworkManager/no-stub-resolv.conf</code>. Você pode verificar se dnsmasq está sendo usado fazendo a mesma procura DNS duas vezes com <code>drill example.com</code> e verificando o servidor e tempos de consulta.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> 
<ul>
<li>Você não precisa iniciar <code>dnsmasq.service</code> ou editar <code>/etc/dnsmasq.conf</code>. O NetworkManager iniciará o dnsmasq sem usar o serviço systemd e sem ler o(s) arquivo(s) de configuração padrão do dnsmasq.</li>
<li>A instância do dnsmasq iniciada pelo NetworkManager será vinculada a <code>127.0.0.1:53</code>, você pode executar qualquer software (incluindo <code>dnsmasq.service</code>) no mesmo endereço e porta.</li>
</ul>
</div>
<h6>
<span id="Configura.C3.A7.C3.A3o_personalizada_do_dnsmasq"></span><span class="mw-headline" id="Configuração_personalizada_do_dnsmasq">Configuração personalizada do dnsmasq</span>
</h6>
<p>Configurações personalizadas podem ser criadas para o <i>dnsmasq</i> criando arquivos de configuração em <code>/etc/NetworkManager/dnsmasq.d/</code>. Por exemplo, para alterar o tamanho do cache DNS (armazenado na RAM):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/dnsmasq.d/cache.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">cache-size=1000</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> Verifique a sintaxe do arquivo de configuração com <code>dnsmasq --test --conf-file=/dev/null --conf-dir=/etc/NetworkManager/dnsmasq.d</code>.</div>
<p>Veja <span class="plainlinks archwiki-template-man" title="$ man 8 dnsmasq"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/dnsmasq.8">dnsmasq(8)</a></span> para todas as opções disponíveis.
</p>
<h6><span class="mw-headline" id="IPv6">IPv6</span></h6>
<p>Habilitar o <code>dnsmasq</code> no NetworkManager pode interromper as pesquisas de DNS somente do IPv6 (ou seja, <code>drill -6 [hostname</code>}) que, de outra forma, funcionariam. Para resolver isso, a criação do arquivo a seguir configurará o <i>dnsmasq</i> para também ouvir o loopback do IPv6:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/dnsmasq.d/ipv6-listen.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">listen-address=::1</pre>
<p>Além disso, o <code>dnsmasq</code> também não prioriza o DNS IPv6 upstream. Infelizmente, o NetworkManager não faz isso (<a rel="nofollow" class="external text" href="https://bugs.launchpad.net/ubuntu/+source/network-manager/+bug/936712">Bug do Ubuntu</a>). Uma solução alternativa seria desabilitar o DNS IPv4 na configuração do NetworkManager, supondo que exista.
</p>
<h6><span class="mw-headline" id="DNSSEC">DNSSEC</span></h6>
<p>A instância dnsmasq iniciada pelo NetworkManager por padrão não validará <a href="../pt/DNSSEC.html" title="DNSSEC (Português)">DNSSEC</a> desde que seja iniciada com a opção <code>--proxy-dnssec</code>. Ele irá confiar em qualquer informação DNSSEC obtida do servidor DNS upstream.
</p>
<p>Para que o dnsmasq valide corretamente o DNSSEC, quebrando assim a resolução de DNS com servidores de nomes que não suportam ele, crie o seguinte arquivo de configuração:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/dnsmasq.d/dnssec.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">conf-file=/usr/share/dnsmasq/trust-anchors.conf
dnssec</pre>
<h5><span class="mw-headline" id="systemd-resolved">systemd-resolved</span></h5>
<p>O NetworkManager pode usar o <a href="../en/Systemd-resolved.html" title="Systemd-resolved">systemd-resolved</a> como um resolvedor e cache de DNS. Certifique-se de que <i>systemd-resolved</i> esteja configurado corretamente e que <code>systemd-resolved.service</code> esteja <a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Iniciado">iniciado</a> antes de usá-lo.
</p>
<p>systemd-resolved vai ser usado automaticamente se <code>/etc/resolv.conf</code> é um <a href="../en/Systemd-resolved.html#DNS" title="Systemd-resolved">link simbólico</a> para <code>/run/systemd/resolve/stub-resolv.conf</code>, <code>/run/systemd/resolve/resolv.conf</code> ou <code>/usr/lib/systemd/resolv.conf</code>.
</p>
<p>Você pode habilitá-lo explicitamente definindo <code>main.dns=systemd-resolved</code> com um arquivo de configuração em <code>/etc/NetworkManager/conf.d/</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/conf.d/dns.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[main]
dns=systemd-resolved</pre>
<h5><span class="mw-headline" id="Resolvedor_de_DNS_com_um_assinante_do_openresolv">Resolvedor de DNS com um assinante do openresolv</span></h5>
<p>Se o <a href="../pt/Openresolv.html" title="Openresolv (Português)">openresolv</a> tem um assinante para seu <a href="../pt/Domain_name_resolution.html#Servidores_DNS" class="mw-redirect" title="Resolvedor de DNS">resolvedor de DNS</a> local, configure o assinante e <a href="#Usar_openresolv">configure o NetworkManager para usar o openresolv</a>.
</p>
<p>Porque o NetworkManager anuncia uma única "interface" para o <i>resolvconf</i>, não é possível implementar encaminhamento condicional entre duas conexões do NetworkManager. Veja <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/NetworkManager/NetworkManager/issues/153">issue 153 do NetworkManager</a>.
</p>
<p>Isso pode ser parcialmente mitigado se você definir <code>private="*"</code> no <code>/etc/resolvconf.conf</code><a rel="nofollow" class="external autonumber" href="https://roy.marples.name/projects/openresolv/configuration.html">[3]</a>. Quaisquer consultas por domínios que não estejam na lista de domínios de pesquisa não serão encaminhados. Elas serão tratadas conforme a configuração do resolvedor local. Por exemplo, encaminhadas para outro servidor DNS ou resolvidas recursivamente a partir da raiz do DNS.
</p>
<h4><span class="mw-headline" id="Servidores_DNS_personalizados">Servidores DNS personalizados</span></h4>
<h5><span class="mw-headline" id="Configurando_servidores_DNS_globais_personalizados">Configurando servidores DNS globais personalizados</span></h5>
<p>Para definir servidores DNS para todas as conexões, especifique-as em <span class="plainlinks archwiki-template-man" title="$ man 5 NetworkManager.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/NetworkManager.conf.5">NetworkManager.conf(5)</a></span> usando a sintaxe <code>servers=<i>endereçoservidorip1</i>,<i>endereçoservidorip2</i>,<i>endereçoservidorip3</i></code> em uma seção chamada <code>[global-dns-domain-*]</code>. Por exemplo:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/conf.d/dns-servers.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[global-dns-domain-*]
servers=::1,127.0.0.1</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> 
<ul>
<li>Se você usa <a href="#Cache_de_DNS_e_encaminhamento_condicional">plugin de dnsmasq ou systemd-resolved do NetworkManager</a> ou <a href="#Resolvedor_de_DNS_com_um_assinante_do_openresolv">assinantes de openresolv</a>, então não especifique endereços de loopback com a opção <code>servers=</code>, pois isso pode quebrar a resolução de DNS.</li>
<li>Os servidores especificados não são enviados para <a href="../en/Systemd-resolved.html" title="Systemd-resolved">systemd-resolved</a>, os servidores DNS da conexão são usados.</li>
</ul>
</div>
<h5>
<span id="Configurando_servidores_DNS_personalizados_em_uma_conex.C3.A3o"></span><span class="mw-headline" id="Configurando_servidores_DNS_personalizados_em_uma_conexão">Configurando servidores DNS personalizados em uma conexão</span>
</h5>
<h6>
<span id="Configurando_servidores_DNS_personalizados_em_uma_conex.C3.A3o_.28GUI.29"></span><span class="mw-headline" id="Configurando_servidores_DNS_personalizados_em_uma_conexão_(GUI)">Configurando servidores DNS personalizados em uma conexão (GUI)</span>
</h6>
<p>A configuração vai depender do tipo de front-end usado; o processo geralmente envolve clicar com botão direito no miniaplicativo, editar (ou criar) um perfil e, então, escolher o tipo de DHCP como <i>Automático (especifique endereços)</i>. OS endereços DNS precisarão ser inseridos e são geralmente dessa formato: <code>127.0.0.1, <i>Servidor-DNS-um</i>, ...</code>.
</p>
<h6>
<span id="Configurando_servidores_DNS_personalizados_em_uma_conex.C3.A3o_.28nmcli_.2F_arquivo_de_conex.C3.A3o.29"></span><span class="mw-headline" id="Configurando_servidores_DNS_personalizados_em_uma_conexão_(nmcli_/_arquivo_de_conexão)">Configurando servidores DNS personalizados em uma conexão (nmcli / arquivo de conexão)</span>
</h6>
<p>Para configurar servidores DNS por conexão, você pode usar o campo <code>dns</code> (e os <code>dns-search</code> e <code>dns-options</code> associados) nas <a href="#Editar_uma_conex%C3%A3o">configurações da conexão</a>.
</p>
<p>Se <code>method</code> estiver definido para <code>auto</code> (quando você usa DHCP), você precisa definir <code>ignore-auto-dns</code> para <code>yes</code>.
</p>
<h4>
<span id=".2Fetc.2Fresolv.conf"></span><span class="mw-headline" id="/etc/resolv.conf">/etc/resolv.conf</span>
</h4>
<p>Por padrão, <code>/etc/resolv.conf</code> é gerenciado pelo <i>NetworkManager</i> a menos que ele seja um link simbólico.
</p>
<p>Ele pode ser configurado para escrever por meio do <a href="#Usar_openresolv">openresolv</a> ou para <a href="#/etc/resolv.conf_n%C3%A3o_gerenciado">não tocar</a>.
</p>
<p>O uso do openresolv permite que o NetworkManager coexista com outro software com suporte a <i>resolvconf</i> ou, por exemplo, para executar um cache DNS local e um resolvedor de DNS dividido para o qual o openresolv tem um <a href="../pt/Openresolv.html#Assinantes" title="Openresolv (Português)">assinante</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Encaminhamento condicional <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/NetworkManager/NetworkManager/issues/153">ainda não possui suporte completo</a> ao usar NetworkManager com openresolv.</div>
<p>O <i>NetworkManager</i> também oferece hooks via os scripts dispatchers que podem ser usados para alterar o <code>/etc/resolv.conf</code> após as alterações de rede. Veja <a href="#Servi%C3%A7os_de_rede_com_o_NetworkManager_dispatcher">#Serviços de rede com o NetworkManager dispatcher</a> e <span class="plainlinks archwiki-template-man" title="$ man 8 NetworkManager"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/NetworkManager.8">NetworkManager(8)</a></span> para mais informações.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> 
<ul>
<li>Se o NetworkManager estiver configurado para usar <a href="#dnsmasq">dnsmasq</a> ou <a href="#systemd-resolved">systemd-resolved</a>, os endereços loopback apropriados serão escritos em <code>/etc/resolv.conf</code>.</li>
<li>O arquivo <code>resolv.conf</code> que o NetworkManager escreve, ou que escreveria em <code>/etc/resolv.conf</code>, pode ser encontrado em <code>/run/NetworkManager/resolv.conf</code>.</li>
<li>Um arquivo <code>resolv.conf</code> com os servidores de nome obtidos e domínios de pesquisa podem ser encontrados em <code>/run/NetworkManager/no-stub-resolv.conf</code>.</li>
</ul>
</div>
<h5>
<span id=".2Fetc.2Fresolv.conf_n.C3.A3o_gerenciado"></span><span class="mw-headline" id="/etc/resolv.conf_não_gerenciado">/etc/resolv.conf não gerenciado</span>
</h5>
<p>Para evitar que o NetworkManager toque no <code>/etc/resolv.conf</code>, defina <code>main.dns=none</code> com um arquivo de configuração em <code>/etc/NetworkManager/conf.d/</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/conf.d/dns.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[main]
dns=none</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> Você também pode querer definir <code>main.systemd-resolved=false</code>, de forma que o NetworkManager não envie a configuração DNS para <a href="../en/Systemd-resolved.html" title="Systemd-resolved">systemd-resolved</a>.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Veja <a href="#Cache_de_DNS_e_encaminhamento_condicional">#Cache de DNS e encaminhamento condicional</a>, para configurar o NetworkManager usando outros backends de DNS, como <a href="../pt/Dnsmasq.html" title="Dnsmasq (Português)">dnsmasq</a> e <a href="../en/Systemd-resolved.html" title="Systemd-resolved">systemd-resolved</a>, em vez de usar <code>main.dns=none</code>.</div>
<p>Após isso, o <code>/etc/resolv.conf</code> pode ser um link simbólico quebrado que você precisará remover. Então, basta criar um novo arquivo <code>/etc/resolv.conf</code>.
</p>
<h5><span class="mw-headline" id="Usar_openresolv">Usar openresolv</span></h5>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Não defina <code>rc-manager=resolvconf</code> quando <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=systemd-resolvconf">systemd-resolvconf</a></span> estiver instalado. <i>systemd-resolved</i> fornece suporte limitado à interface do <i>resolvconf</i> e o NetworkManager possui suporte a se comunicar com systemd-resolved por meio de D-Bus sem usar <i>resolvconf</i>.</div>
<p>Para configurar o NetworkManager para usar <a href="../pt/Openresolv.html" title="Openresolv (Português)">openresolv</a>, defina <code>main.rc-manager=resolvconf</code> com um arquivo de configuração em <code>/etc/NetworkManager/conf.d/</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/conf.d/rc-manager.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[main]
rc-manager=resolvconf</pre>
<h3><span class="mw-headline" id="Firewall">Firewall</span></h3>
<p>Você pode atribuir uma zona <a href="../en/Firewalld.html" title="Firewalld">firewalld</a> com base na sua conexão atual. Por exemplo, um firewall restritivo no trabalho e um menos restritivo no domicílio.
</p>
<p>Isso também pode ser feito com o <a href="#Servi%C3%A7os_de_rede_com_o_NetworkManager_dispatcher">NetworkManager dispatcher</a>.
</p>
<h3>
<span id="Configura.C3.A7.C3.A3o_de_802.1x_.2F_PEAP"></span><span class="mw-headline" id="Configuração_de_802.1x_/_PEAP">Configuração de 802.1x / PEAP</span>
</h3>
<p>Uma rede PEAP e 802.1x pode ser adicionada adicionando um arquivo de configuração ao <code>/etc/NetworkManager/system-connections/<i>nome</i></code>.
</p>
<p>Aqui está um exemplo de arquivo de configuração para IPv4 com IPv6 desativado:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/system-connections/<i>nome</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[ipv6]
method=ignore

[ipv4]
method=auto

[connection]
#id=XXXXXXXXX
#uuid=XXXXXXXXX
type=802-11-wireless
#timestamp=XXXX

[802-11-wireless-security]
key-mgmt=wpa-eap

[802-11-wireless]
ssid=ssid
mode=infrastructure
#seen-bssids=XXXXXXXXX
security=802-11-wireless-security

[802-1x]
eap=peap;
identity=user
password=password
phase2-auth=mschapv2</pre>
<p>A cerquilha (#) define comentários.
</p>
<h2>
<span id="Servi.C3.A7os_de_rede_com_o_NetworkManager_dispatcher"></span><span class="mw-headline" id="Serviços_de_rede_com_o_NetworkManager_dispatcher">Serviços de rede com o NetworkManager dispatcher</span>
</h2>
<p>Existem alguns serviços de rede que você não desejará executar até que o NetworkManager exiba uma interface. O NetworkManager tem a capacidade de iniciar serviços quando você se conecta a uma rede e os interrompe quando você desconecta (por exemplo, ao usar <a href="../en/NFS.html" title="NFS">NFS</a>, <a href="../en/Samba.html" class="mw-redirect" title="SMB">SMB</a> e <a href="../en/Network_Time_Protocol_daemon.html" class="mw-redirect" title="NTPd">NTPd</a>).
</p>
<p>Para ativar o recurso, você precisa <a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Habilitar">habilitar</a> e <a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Inicia">iniciar</a> o <code>NetworkManager-dispatcher.service</code>.
</p>
<p>Quando o serviço estiver ativo, os scripts poderão ser adicionados ao diretório <code>/etc/NetworkManager/dispatcher.d</code>.
</p>
<p>Os scripts devem pertencer ao <b>root</b>, caso contrário o distribuidor não os executará. Para maior segurança, defina o <a href="../pt/File_permissions_and_attributes.html#Alterando_o_propriet%C3%A1rio" class="mw-redirect" title="Proprietário">proprietário</a> e grupo para root:
</p>
<pre># chown root:root /etc/NetworkManager/dispatcher.d/<i>10-script.sh</i>
</pre>
<p>Certifique-se que o arquivo tem as permissões corretas:
</p>
<pre># chmod 755 /etc/NetworkManager/dispatcher.d/<i>10-script.sh</i>
</pre>
<p>Os scripts serão executados em ordem alfabética no momento da conexão e em ordem alfabética inversa no momento da desconexão. Para garantir a ordem em que aparecem, é comum usar caracteres numéricos antes do nome do script (por exemplo, <code>10-portmap</code> ou <code>30-netfs</code> (o que garante que <i>portmapper</i> esteja ativo antes que as montagens do NFS sejam tentadas).
</p>
<p>Scripts vão receber os seguintes argumentos:
</p>
<ul>
<li>
<b>Nome da interface:</b> p. ex., <code>eth0</code>
</li>
<li>
<b>Status da interface:</b> <i>up</i> ou <i>down</i>
</li>
<li>
<b>Status da VPN:</b> <i>vpn-up</i> ou <i>vpn-down</i>
</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> Se você se conectar a redes estrangeiras ou públicas, esteja ciente de quais serviços você está iniciando e quais servidores você espera que estejam disponíveis para eles se conectarem. Você pode criar uma falha de segurança iniciando os serviços errados enquanto estiver conectado a uma rede pública.</div>
<h3><span class="mw-headline" id="Evitando_o_esgotamento_de_tempo_limite_do_dispatcher">Evitando o esgotamento de tempo limite do dispatcher</span></h3>
<p>Se o acima está funcionando, então esta seção não é relevante. No entanto, há um problema geral relacionado à execução de scripts do dispatcher que demoram mais para serem executados. Inicialmente, foi utilizado um tempo limite interno de apenas três segundos. Se o script chamado não foi concluído a tempo, ele foi morto. Mais tarde, o tempo limite foi estendido para cerca de 20 segundos (veja o <a rel="nofollow" class="external text" href="https://bugzilla.redhat.com/show_bug.cgi?id=982734">Rastreador de erros</a> para mais informações). Se o tempo limite ainda criar o problema, uma solução alternativa poderá ser modificar o arquivo de serviço do distribuidor <code>/usr/lib/systemd/system/NetworkManager-dispatcher.service</code> para permanecer ativo após a saída:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/NetworkManager-dispatcher.service.d/remain_after_exit.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
RemainAfterExit=yes</pre>
<p>Agora, inicie e habilite o serviço modificado <code>NetworkManager-dispatcher</code> service.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> Adicionar a linha <code>RemainAfterExit</code> a ele impedirá que o dispatcher feche. Infelizmente, o dispatcher <b>tem</b> para fechar antes que possa executar seus scripts novamente. Com ele, o dispatcher não irá expirar, mas também não será fechado, o que significa que os scripts só serão executados uma vez por inicialização. Portanto, não adicione a linha a menos que o tempo limite esteja causando um problema.</div>
<h3><span class="mw-headline" id="Exemplos_de_dispatcher">Exemplos de dispatcher</span></h3>
<h4><span class="mw-headline" id="Montar_pasta_remota_com_sshfs">Montar pasta remota com sshfs</span></h4>
<p>Como o script é executado em um ambiente muito restritivo, você precisa exportar <code>SSH_AUTH_SOCK</code> para se conectar ao seu agente SSH. Existem diferentes maneiras de conseguir isso, veja <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1042030#p1042030">esta mensagem</a> para obter mais informações. O exemplo abaixo funciona com <a href="../en/GNOME/Keyring.html" class="mw-redirect" title="GNOME Keyring">GNOME Keyring</a>, e irá pedir a senha se você ainda não estiver desbloqueado. Caso o NetworkManager conecte-se automaticamente no login, é provável que o <i>gnome-keyring</i> ainda não tenha iniciado e a exportação irá falhar (daí o sleep). O <code>UUID</code> para correspondência pode ser encontrado com o comando <code>nmcli connection status</code> ou <code>nmcli connection list</code>.
</p>
<pre>#!/bin/sh
USER='nome_de_usuário'
REMOTE='usuário@host:/caminho/remoto'
LOCAL='/caminho/local'

interface=$1 status=$2
if [ "$CONNECTION_UUID" = "<i>uuid</i>" ]; then
  case $status in
    up)
      SSH_AUTH_SOCK=$(find /tmp -maxdepth 1 -type s -user "$USER" -name 'ssh')
      export SSH_AUTH_SOCK
      su "$USER" -c "sshfs $REMOTE $LOCAL"
      ;;
    down)
      fusermount -u "$LOCAL"
      ;;
  esac
fi
</pre>
<h4><span class="mw-headline" id="Montagem_de_compartilhamentos_SMB">Montagem de compartilhamentos SMB</span></h4>
<p>Alguns compartilhamentos <a href="../en/Samba.html" class="mw-redirect" title="SMB">SMB</a> estão disponíveis apenas em determinadas redes ou locais (por exemplo, em casa). Você pode usar o distribuidor para montar apenas compartilhamentos SMB que estejam presentes em seu local atual.
</p>
<p>O script a seguir verificará se nos conectamos a uma rede específica e montamos os compartilhamentos de acordo:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/dispatcher.d/30-mount-smb.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

# Localiza o UUID de conexão com "nmcli connection show" no terminal.
# Todos os tipos de conexão do NetworkManager têm suporte: sem fio, VPN, com fio...
if [ "$2" = "up" ]; then
  if [ "$CONNECTION_UUID" = "uuid" ]; then
    mount /seu/ponto/de/montagem &amp;
    # adicione mais compartilhamentos conforme necessário
  fi
fi
</pre>
<p>O script a seguir desmontará todos os compartilhamentos SMB antes de um software ter iniciado a desconexão de uma rede específica:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/dispatcher.d/pre-down.d/30-umount-smb.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

if [ "$CONNECTION_UUID" = "uuid" ]; then
  umount -a -l -t cifs
fi
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Certifique-se de que este script esteja localizado no subdiretório <code>pre-down.d</code>, conforme mostrado acima, caso contrário, ele desmontará todos os compartilhamentos em qualquer alteração de estado de conexão.</div>
<p>O script a seguir tentará desmontar todos os compartilhamentos SMB após uma desconexão inesperada de uma rede específica:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/dispatcher.d/40-umount-smb.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

if [ "$CONNECTION_UUID" = "uuid" ]; then
  if [ "$2" = "down" ]; then
    umount -a -l -t cifs
  fi
fi
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> 
<ul>
<li>Desde o NetworkManager 0.9.8, os eventos <i>pre-down</i> e <i>down</i> não são executados no desligamento ou reinicialização, veja <a rel="nofollow" class="external text" href="https://bugzilla.gnome.org/show_bug.cgi?id=701242">este relatório de erro</a> para mais informações.</li>
<li>Os scripts de <i>umount</i> anteriores ainda são propensos a deixar os aplicativos que realmente acessam a montagem para "travar".</li>
</ul>
</div>
<p>Uma alternativa é usar o script como visto em <a href="../en/NFS.html#Using_a_NetworkManager_dispatcher" title="NFS">NFS#Using a NetworkManager dispatcher</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/dispatcher.d/30-smb.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/bash

# Descubra O UUID da conexão com "nmcli con show" no terminal.
# Todos os tipos de conexão do NetworkManager têm suporte: wireless, VPN, wired...
WANTED_CON_UUID="CHANGE-ME-NOW-9c7eff15-010a-4b1c-a786-9b4efa218ba9"

if [[ "$CONNECTION_UUID" == "$WANTED_CON_UUID" ]]; then
    
    # Parâmetro do script $1: Nome da conexão do NetworkManager, não usado
    # Parâmetro do script $2: eventos despachado
    
    case "$2" in
        "up")
            mount -a -t cifs
            ;;
        "pre-down");&amp;
        "vpn-pre-down")
            umount -l -a -t cifs &gt;/dev/null
            ;;
    esac
fi
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Este script ignora as montagens com a opção <code>noauto</code>, remove esta opção de montagem ou usa <code>auto</code> para permitir que o despachante gerencie essas montagens.</div>
<p>Crie um link simbólico dentro de <code>/etc/NetworkManager/dispatcher.d/pre-down</code> para pegar os eventos <code>pre-down</code>:
</p>
<pre># ln -s ../30-smb.sh /etc/NetworkManager/dispatcher.d/pre-down.d/30-smb.sh
</pre>
<h4><span class="mw-headline" id="Montagem_de_compartilhamentos_NFS">Montagem de compartilhamentos NFS</span></h4>
<p>Veja <a href="../en/NFS.html#Using_a_NetworkManager_dispatcher" title="NFS">NFS#Using a NetworkManager dispatcher</a>.
</p>
<h4><span class="mw-headline" id="Usar_dispatcher_para_ativar_rede_sem_fio_automaticamente_dependendo_de_cabo_LAN_estar_conectado">Usar dispatcher para ativar rede sem fio automaticamente dependendo de cabo LAN estar conectado</span></h4>
<p>A ideia é ligar o Wi-Fi apenas quando o cabo LAN estiver desconectado (por exemplo, ao desconectá-lo de um laptop) e para que o Wi-Fi seja desativado automaticamente, assim que o cabo LAN for conectado novamente.
</p>
<p>Crie o seguinte script de dispatcher<a rel="nofollow" class="external autonumber" href="https://superuser.com/questions/233448/disable-wlan-if-wired-cable-network-is-available">[4]</a>, substituindo <code>LAN_interface</code> pelo seu.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/dispatcher.d/wlan_auto_toggle.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

if [ "$1" = "LAN_interface" ]; then
    case "$2" in
        up)
            nmcli radio wifi off
            ;;
        down)
            nmcli radio wifi on
            ;;
    esac
fi
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Você obter uma lista de interfaces usando <a href="#Exemplos_de_nmcli">nmcli</a>. As interfaces ethernet (LAN) iniciam com <code>en</code>, p.ex., <code>enp0s5</code>
</div>
<h4>
<span id="Usar_dispatcher_para_conectar_a_uma_VPN_ap.C3.B3s_uma_conex.C3.A3o_de_rede_ser_estabelecida"></span><span class="mw-headline" id="Usar_dispatcher_para_conectar_a_uma_VPN_após_uma_conexão_de_rede_ser_estabelecida">Usar dispatcher para conectar a uma VPN após uma conexão de rede ser estabelecida</span>
</h4>
<p>Neste exemplo, queremos nos conectar automaticamente a uma conexão VPN definida anteriormente após a conexão a uma rede Wi-Fi específica. A primeira coisa a fazer é criar o script de dispatcher que define o que fazer depois de estarmos conectados à rede.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Esse script vai precisar de <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wireless_tools">wireless_tools</a></span> para usar <code>iwgetid</code>.</div>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/dispatcher.d/vpn-up</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh
VPN_NAME="nome da conexão VPN definido no NetworkManager"
ESSID="ESSID da rede Wi-Fi (não o nome da conexão)"

interface=$1 status=$2
case $status in
  up|vpn-down)
    if iwgetid | grep -qs ":\"$ESSID\""; then
      nmcli connection up id "$VPN_NAME"
    fi
    ;;
  down)
    if iwgetid | grep -qs ":\"$ESSID\""; then
      if nmcli connection show --active | grep "$VPN_NAME"; then
        nmcli connection down id "$VPN_NAME"
      fi
    fi
    ;;
esac
</pre>
<p>Se você quiser se conectar automaticamente à VPN para todas as redes Wi-Fi, use a seguinte definição do ESSID: <code>ESSID=$(iwgetid -r)</code>. Lembre-se de definir as permissões do script <a href="#Servi%C3%A7os_de_rede_com_o_NetworkManager_dispatcher">de acordo com isso</a>.
</p>
<p>A tentativa de se conectar com o script acima ainda pode falhar com <code>NetworkManager-dispatcher.service</code> reclamando sobre "nenhum segredo de VPN válido", por causa de <a rel="nofollow" class="external text" href="https://developer.gnome.org/NetworkManager/0.9/secrets-flags.html">como os segredos VPN são armazenados</a>. Felizmente, existem diferentes opções para fornecer ao script acima acesso à sua senha de VPN.
</p>
<p>1: Um deles requer a edição do arquivo de configuração de conexão VPN para fazer com que o NetworkManager armazene os segredos por si só, em vez de dentro de um chaveiro <a rel="nofollow" class="external text" href="https://bugzilla.redhat.com/show_bug.cgi?id=710552">que será inacessível por root</a>: abra <code>/etc/NetworkManager/system-connections/<i>nome de sua conexão VPN</i></code> e altere as <code>password-flags</code> e <code>secret-flags</code> de <code>1</code> para <code>0</code>.
</p>
<p>Se isso não funcionar sozinho, talvez seja necessário criar um <code>passwd-file</code> em um local seguro com as mesmas permissões e propriedade que o script do dispatcher, contendo o seguinte:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/caminho/para/arquivo-passwd</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">vpn.secrets.password:SUA_SENHA
</pre>
<p>O script deve ser alterado de acordo, para que obtenha a senha do arquivo:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/dispatcher.d/vpn-up</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh
VPN_NAME="nome de conexão VPN definida no NetworkManager"
ESSID="ESSID de rede Wi-Fi (nenhum nome de conexão)"

interface=$1 status=$2
case $status in
  up|vpn-down)
    if iwgetid | grep -qs ":\"$ESSID\""; then
      nmcli connection up id "$VPN_NAME" passwd-file /path/to/passwd-file
    fi
    ;;
  down)
    if iwgetid | grep -qs ":\"$ESSID\""; then
      if nmcli connection show --active | grep "$VPN_NAME"; then
        nmcli connection down id "$VPN_NAME"
      fi
    fi
    ;;
esac
</pre>
<p>2: Alternativamente, altere a <code>password-flags</code> e coloque a senha diretamente no arquivo de configuração adicionando a seção <code>vpn-secrets</code>:
</p>
<pre> [vpn]
 ....
 password-flags=0
 
 [vpn-secrets]
 password=<i>senha_senha</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Agora pode ser necessário reabrir o editor de conexão do NetworkManager e salvar as senhas/segredos da VPN novamente.</div>
<h4>
<span id="Usar_dispatcher_para_desabilitar_IPv6_em_conex.C3.B5es_de_provedor_de_VPN"></span><span class="mw-headline" id="Usar_dispatcher_para_desabilitar_IPv6_em_conexões_de_provedor_de_VPN">Usar dispatcher para desabilitar IPv6 em conexões de provedor de VPN</span>
</h4>
<p>Muitos <a href="../en/Category:VPN_providers.html" title="Category:VPN providers">provedores de VPN comercial</a> possuem suporte apenas a IPv4. Isso significa que todo o tráfego IPv6 ignora a VPN e acaba por se tornar virtualmente desnecessário. Para evitar isso, o dispatcher pode ser usado para desabilitar todo o tráfego IPv5 para o período em que a conexão VPN está ativa.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/dispatcher.d/10-vpn-ipv6</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

case "$2" in
    vpn-up)
        echo 1 &gt; /proc/sys/net/ipv6/conf/all/disable_ipv6
        ;;
    vpn-down)
        echo 0 &gt; /proc/sys/net/ipv6/conf/all/disable_ipv6
        ;;
esac
</pre>
<h4><span class="mw-headline" id="OpenNTPD">OpenNTPD</span></h4>
<p>Veja <a href="../en/OpenNTPD.html#Using_NetworkManager_dispatcher" title="OpenNTPD">OpenNTPD#Using NetworkManager dispatcher</a>.
</p>
<h2><span class="mw-headline" id="Testando">Testando</span></h2>
<p>Os miniaplicativos do NetworkManager são projetados para serem carregados no início da sessão, portanto, nenhuma configuração adicional deve ser necessária para a maioria dos usuários. Se você já desativou suas configurações de rede anteriores e desconectou-se da sua rede, agora pode testar se o NetworkManager funcionará. O primeiro passo é <a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Inicia">iniciar</a> <code>NetworkManager.service</code>.
</p>
<p>Alguns miniaplicativos fornecerão um arquivo <code>.desktop</code> para que o miniaplicativo NetworkManager possa ser carregado através do menu do aplicativo. Se isso não acontecer, você terá que descobrir o comando para usar ou efetuar logout e efetuar login novamente para iniciar o miniaplicativo. Depois que o applet é iniciado, ele provavelmente começará a pesquisar conexões de rede com a autoconfiguração com um servidor DHCP.
</p>
<p>Para iniciar o miniaplicativo do GNOME nos gerenciadores de janela não compatíveis com xdg, como <a href="../en/Awesome.html" title="Awesome">awesome</a>:
</p>
<pre>nm-applet --sm-disable &amp;
</pre>
<p>Para endereços IP estáticos, você terá que configurar o NetworkManager para entendê-los. O processo geralmente envolve clicar com o botão direito do mouse no applet e selecionar algo como 'Editar conexões'.
</p>
<h2><span class="mw-headline" id="Dicas_e_truques">Dicas e truques</span></h2>
<h3><span class="mw-headline" id="Senhas_de_Wi-Fi_criptografadas">Senhas de Wi-Fi criptografadas</span></h3>
<p>Por padrão, o NetworkManager armazena senhas em texto não criptografado nos arquivos de conexão em <code>/etc/NetworkManager/system-connections/</code>. Para imprimir as senhas armazenadas, use o seguinte comando:
</p>
<pre># grep -r '^psk=' /etc/NetworkManager/system-connections/
</pre>
<p>As senhas são acessíveis ao usuário root no sistema de arquivos e aos usuários com acesso às configurações através da GUI (por exemplo, <code>nm-applet</code>).
</p>
<p>É preferível salvar as senhas em formato criptografado em um chaveiro, em vez de texto não criptografado. A desvantagem de usar um chaveiro é que as conexões precisam ser configuradas para cada usuário.
</p>
<h4><span class="mw-headline" id="Usando_GNOME_Keyring">Usando GNOME Keyring</span></h4>
<p>O daemon do conjunto de chaves deve ser iniciado e o chaveiro precisa ser desbloqueado para que o seguinte funcione.
</p>
<p>Além disso, o NetworkManager precisa ser configurado para não armazenar a senha para todos os usuários. Usando o GNOME <code>nm-applet</code>, execute <code>nm-connection-editor</code> em um terminal, selecione uma conexão de rede, clique em <code>Editar</code>, selecione <code>Segurança Wi-Fi</code> e clique no ícone à direita da senha e marque <code>Armazenar a senha somente para este usuário</code>.
</p>
<h4><span class="mw-headline" id="Usando_KDE_Wallet">Usando KDE Wallet</span></h4>
<p>Usando o <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=plasma-nm">plasma-nm</a></span> do KDE, clique no applet, clique no ícone <code>Configurações</code> na parte superior direita, clique em uma conexão de rede, na guia <code>Configurações gerais</code>, desmarque <code>Todos os usuários podem se conectar nesta rede</code>. Se a opção estiver marcada, as senhas ainda serão armazenadas em texto não criptografado, mesmo que um daemon de chaveiro esteja em execução.
</p>
<p>Se a opção foi selecionada anteriormente e você desmarcá-la, você pode ter que usar a opção <code>reset</code> primeiro para fazer a senha desaparecer do arquivo. Como alternativa, exclua a conexão primeiro e configure-a novamente.
</p>
<h3>
<span id="Compartilhando_conex.C3.A3o_internet_pelo_Wi-Fi"></span><span class="mw-headline" id="Compartilhando_conexão_internet_pelo_Wi-Fi">Compartilhando conexão internet pelo Wi-Fi</span>
</h3>
<p>Você pode compartilhar sua conexão com a Internet (por exemplo, 3G ou com fio) com apenas alguns cliques. Por favor, note que um <a href="../en/Category:Firewalls.html" class="mw-redirect" title="Firewall">firewall</a> pode interferir no compartilhamento de internet.
</p>
<p>Você precisará de uma placa Wi-Fi que tenha suporte ao modo AP. Veja <a href="../en/Software_access_point.html#Wi-Fi_device_must_support_AP_mode" title="Software access point">Software access point#Wi-Fi device must support AP mode</a> para detalhes.
</p>
<p><a href="../pt/Help:Reading.html#Instala%C3%A7%C3%A3o_de_pacotes" class="mw-redirect" title="Instale">Instale</a> o pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dnsmasq">dnsmasq</a></span> para poder realmente compartilhar a conexão.
</p>
<p>Crie a conexão compartilhada:
</p>
<ul>
<li>Clique no miniaplicativo e escolha <i>Criar nova rede sem fio</i>.</li>
<li>Siga o assistente (escolha WPA2 ou superior, certifique-se de usar pelo menos 8 caracteres, pois tamanhos menores falharão).
<ul><li>Escolha <a href="https://fedoraproject.org/wiki/Features/RealHotspot" class="extiw" title="fedora:Features/RealHotspot">Hotspot</a> ou Ad-hoc como modo Wi-Fi.</li></ul>
</li>
</ul>
<p>A conexão será salva e permanecerá armazenada para a próxima vez que você precisar dela.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> O Android não possui suporte a conexão a redes ad-hoc. Para compartilhar uma conexão com o Android, use o modo infraestrutura (por exemplo, defina o modo Wi-Fi como "Hotspot").</div>
<h3>
<span id="Compartilhando_conex.C3.A3o_internet_por_Ethernet"></span><span class="mw-headline" id="Compartilhando_conexão_internet_por_Ethernet">Compartilhando conexão internet por Ethernet</span>
</h3>
<p>Cenário: o seu dispositivo está conectado à Internet através de wi-fi e pretende compartilhar a conexão à Internet a outros dispositivos através da rede ethernet.
</p>
<p>Requisitos:
</p>
<ul>
<li>
<a href="../pt/Help:Reading.html#Instala%C3%A7%C3%A3o_de_pacotes" class="mw-redirect" title="Instale">Instale</a> o pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dnsmasq">dnsmasq</a></span> para ser capaz de compartilhar a conexão.</li>
<li>Seu dispositivo conectado à internet e outros dispositivos estarem conectados por um cabo ethernet adequado (isso geralmente significa um cabo <i>cross</i> ou  um switch entre eles).</li>
<li>Compartilhamento de Internet não estar bloqueado por um <a href="../en/Category:Firewalls.html" class="mw-redirect" title="Firewall">firewall</a>.</li>
</ul>
<p>Etapas:
</p>
<ul>
<li>Executar <code>nm-connection-editor</code> do terminal.</li>
<li>Adicionar uma nova conexão ethernet.</li>
<li>Dê um nome sensato. Por exemplo, "Internet compartilhada"</li>
<li>Acesse "Configurações IPv4".</li>
<li>Para "Método:" selecione "Compartilhado com outros computadores".</li>
<li>Salve</li>
</ul>
<p>Agora, você deve ter uma nova opção "Internet compartilhada" sob as conexões cabeadas no NetworkManager.
</p>
<h3>
<span id="Verificando_se_a_conectividade_est.C3.A1_ativa_dentro_de_um_script_ou_trabalho_cron"></span><span class="mw-headline" id="Verificando_se_a_conectividade_está_ativa_dentro_de_um_script_ou_trabalho_cron">Verificando se a conectividade está ativa dentro de um script ou trabalho cron</span>
</h3>
<p>Alguns trabalhos de <i>cron</i> exigem conectividade para serem bem-sucedidos. Você pode evitar a execução desses trabalhos quando a rede estiver inoperante. Para isso, adicione um teste <b>if</b> para redes que consulte a <i>nm-tool</i> do NetworkManager e verifique o estado da rede. O teste mostrado aqui é bem-sucedido se qualquer interface estiver ativa e falhará se todos estiverem inativos. Isso é conveniente para laptops que podem ser conectados, podem estar sem fio ou podem estar fora da rede.
</p>
<pre>if [ $(nm-tool|grep State|cut -f2 -d' ') == "connected" ]; then
    #Qualquer coisa que você deseje fazer se a rede estiver online
else
    #Qualquer coisa que você deseje fazer se a rede estiver offline - note, isso e qualquer outra coisa acima é opcional
fi
</pre>
<p>Isso é útil para um script <code>cron.hourly</code> que executa o <i>fpupdate</i> para a atualização da assinatura do scanner de vírus F-Prot, como exemplo. Outra maneira que pode ser útil, com uma pequena modificação, é diferenciar entre redes usando várias partes da saída do <i>nm-tool</i>; por exemplo, como a rede sem fio ativa é denotada com um asterisco, você pode usar o nome da rede e, em seguida, o grep para um asterisco literal.
</p>
<h3>
<span id="Conectar_a_uma_rede_com_segredo_na_inicializa.C3.A7.C3.A3o"></span><span class="mw-headline" id="Conectar_a_uma_rede_com_segredo_na_inicialização">Conectar a uma rede com segredo na inicialização</span>
</h3>
<p>Por padrão, o NetworkManager não se conectará a redes que exigem um segredo automaticamente na inicialização. Isso ocorre porque ele bloqueia essas conexões para o usuário que faz isso por padrão, conectando-se somente depois de terem efetuado login. Para alterar isso, faça o seguinte:
</p>
<ol>
<li>Clique com o botão direito do mouse no ícone do <code>nm-applet</code> em seu painel e selecione Editar conexões e abra a guia Sem fio</li>
<li>Selecione a conexão com a qual você deseja trabalhar e clique no botão Editar</li>
<li>Marque as caixas "Conectar automaticamente" e "Disponível para todos os usuários"</li>
<li>Adicionalmente, certifique-se que em "Segurança Wi-Fi", "Armazenar senha para todos os usuários (não criptografado)" esteja selecionado</li>
</ol>
<p>Encerre e inicie novamente a sessão para completar.
</p>
<h3><span class="mw-headline" id="OpenConnect_com_senha_no_KWallet">OpenConnect com senha no KWallet</span></h3>
<p>Enquanto você pode digitar os dois valores no momento da conexão, o <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=plasma-nm">plasma-nm</a></span> 0.9.3.2-1 e acima são capazes de obter o nome de usuário e a senha do OpenConnect diretamente do <a href="../en/KDE_Wallet.html" class="mw-redirect" title="KWallet">KWallet</a>.
</p>
<p>Abra o "Gerenciador de carteiras do KDE" e procure a sua conexão OpenConnect VPN em "Gerenciamento de rede | Mapas". Clique em "Mostrar valores" e insira suas credenciais na chave "VpnSecrets" neste formulário (substitua "nome_de_usuário" e "senha"):
</p>
<pre>form:main:username%SEP%<i>nome_de_usuário</i>%SEP%form:main:password%SEP%<i>senha</i>
</pre>
<p>Da próxima vez que você se conectar, o nome de usuário e a senha deverão aparecer na caixa de diálogo "Segredos de VPN".
</p>
<h3>
<span id="Ignorar_dispositivos_espec.C3.ADficos"></span><span class="mw-headline" id="Ignorar_dispositivos_específicos">Ignorar dispositivos específicos</span>
</h3>
<p>Às vezes, pode ser desejado que o NetworkManager ignore dispositivos específicos e não tente configurar endereços e rotas para eles. Você pode rapidamente e facilmente ignorar dispositivos por MAC ou por nome de interface usando o seguinte em <code>/etc/NetworkManager/conf.d/unmanaged.conf</code>:
</p>
<pre>[keyfile]
unmanaged-devices=mac:00:22:68:1c:59:b1;mac:00:1E:65:30:D1:C4;interface-name:eth0
</pre>
<p>Após editar o arquivo, execute <code>nmcli general reload</code> como root. Em seguida, você deve ser capaz de configurar interfaces sem o NetworkManager alterar o que você definiu.
</p>
<h3>
<span id="Configurando_aleatoriza.C3.A7.C3.A3o_de_endere.C3.A7o_MAC"></span><span class="mw-headline" id="Configurando_aleatorização_de_endereço_MAC">Configurando aleatorização de endereço MAC</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Desabilitar a aleatorização de endereço MAC pode ser necessário para obter uma conexão de link (estável) <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=220101">[5]</a> e/ou redes que restrinjam dispositivos com base em seu endereço MAC ou tenham uma rede de limite capacidade.</div>
<p>A aleatorização de MAC pode ser usada para aumentar a privacidade, não revelando seu endereço MAC real à rede.
</p>
<p>O NetworkManager oferece suporte a dois tipos de aleatorização de endereços MAC: aleatorização durante a digitalização e para conexões de rede. Ambos os modos podem ser configurados modificando o <code>/etc/NetworkManager/NetworkManager.conf</code> ou criando um arquivo de configuração separado no <code>/etc/NetworkManager/conf.d/</code>, que é recomendado já que o primeiro arquivo de configuração acima pode ser substituído pelo NetworkManager.
</p>
<p>A aleatorização durante a varredura de Wi-Fi é ativada por padrão, mas pode ser desativada adicionando as seguintes linhas ao <code>/etc/NetworkManager/NetworkManager.conf</code> ou a um arquivo de configuração dedicado em <code>/etc/NetworkManager/conf.d</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/conf.d/wifi_rand_mac.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[device]
wifi.scan-rand-mac-address=no</pre>
<p>A aleatorização de MAC para conexões de rede pode ser definida para modos diferentes para interfaces sem fio e Ethernet. Veja a <a rel="nofollow" class="external text" href="https://blogs.gnome.org/thaller/2016/08/26/mac-address-spoofing-in-networkmanager-1-4-0/">publicação de blog do GNOME</a> para mais detalhes sobre os diferentes modos.
</p>
<p>Em termos de aleatorização de MAC, os modos mais importantes são <code>stable</code> e <code>random</code>. <code>stable</code> gera um endereço MAC aleatório quando você se conecta a uma nova rede e associa os dois permanentemente. Isso significa que você usará o mesmo endereço MAC sempre que se conectar a essa rede. Em contraste, <code>random</code> irá gerar um novo endereço MAC toda vez que você se conectar a uma rede, nova ou previamente conhecida. Você pode configurar a aleatorização do MAC adicionando a configuração desejada em <code>/etc/NetworkManager/conf.d</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/conf.d/wifi_rand_mac.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[device-mac-randomization]
# "yes" já é o padrão para fazer varredura
wifi.scan-rand-mac-address=yes
 
[connection-mac-randomization]
# Aleatoriza o MAC para cada conexão ethernet
ethernet.cloned-mac-address=random
# Gera um MAC aleatório para cada WiFi e associa a dois permanentemente.
wifi.cloned-mac-address=stable</pre>
<p>Veja a seguinte <a rel="nofollow" class="external text" href="https://blogs.gnome.org/thaller/2016/08/26/mac-address-spoofing-in-networkmanager-1-4-0/">publicação de blog do GNOME</a> para mais detalhes.
</p>
<h3>
<span id="Habilitar_extens.C3.B5es_de_privacidade_IPv6"></span><span class="mw-headline" id="Habilitar_extensões_de_privacidade_IPv6">Habilitar extensões de privacidade IPv6</span>
</h3>
<p>Veja <a href="../pt/IPv6.html#NetworkManager" title="IPv6 (Português)">IPv6 (Português)#NetworkManager</a>.
</p>
<h3>
<span id="Trabalhando_com_conex.C3.B5es_cabeadas"></span><span class="mw-headline" id="Trabalhando_com_conexões_cabeadas">Trabalhando com conexões cabeadas</span>
</h3>
<p>Por padrão, o NetworkManager gera um perfil de conexão para cada conexão Ethernet com fio que encontrar. No momento em que gera a conexão, ele não sabe se haverá mais adaptadores Ethernet disponíveis. Por isso, ele chama a primeira conexão com fio "Conexão cabeada 1". Você pode evitar gerar essa conexão, configurando <code>no-auto-default</code> (consulte <span class="plainlinks archwiki-template-man" title="$ man 5 NetworkManager.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/NetworkManager.conf.5">NetworkManager.conf(5)</a></span>) ou simplesmente excluindo-a. Em seguida, o NetworkManager se lembrará de não gerar uma conexão para essa interface novamente.
</p>
<p>Você também pode editar a conexão (e persistir no disco) ou excluí-la. O NetworkManager não irá gerar novamente uma nova conexão. Então, você pode mudar o nome para o que você quiser. Você pode usar algo como o <i>nm-connection-editor</i> para esta tarefa.
</p>
<h3><span class="mw-headline" id="Usando_iwd_como_o_backend_de_Wi-Fi">Usando iwd como o backend de Wi-Fi</span></h3>
<p>Instale <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/networkmanager-iwd/">networkmanager-iwd</a></span><sup><small>AUR</small></sup> ou habilite o backend experimental <a href="../pt/Iwd.html" title="Iwd (Português)">iwd</a> criando o seguinte arquivo de configuração:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/conf.d/wifi_backend.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[device]
wifi.backend=iwd</pre>
<h3>
<span id="Executando_em_um_espa.C3.A7o_de_nomes_de_rede"></span><span class="mw-headline" id="Executando_em_um_espaço_de_nomes_de_rede">Executando em um espaço de nomes de rede</span>
</h3>
<p>Se você deseja executar o NetworkManager dentro de um espaço de nomes de rede (por exemplo, para gerenciar um dispositivo específico que deve ser usado por aplicativos selecionados), abaixe o dispositivo antes de movê-lo para o espaço de nomes:
</p>
<pre>$ ip link set dev <i>MEU_DISPOSITIVO</i> down
$ ip link set dev <i>MEU_DISPOSITIVO</i> netns <i>MEU_ESPAÇO_DE_NOMES</i>
$ ip netns exec <i>MEU_ESPAÇO_DE_NOMES</i> NetworkManager
...
$ ip netns exec <i>MEU_ESPAÇO_DE_NOMES</i> killall NetworkManager
</pre>
<p>caso contrário, o NetworkManager falhará posteriormente ao estabelecer a conexão com um erro <code>device is strictly unmanaged</code>.
</p>
<h2>
<span id="Solu.C3.A7.C3.A3o_de_problemas"></span><span class="mw-headline" id="Solução_de_problemas">Solução de problemas</span>
</h2>
<h3><span class="mw-headline" id="Nenhum_prompt_para_senha_de_redes_Wi-Fi_seguras">Nenhum prompt para senha de redes Wi-Fi seguras</span></h3>
<p>Ao tentar se conectar a uma rede Wi-Fi protegida, nenhum prompt de senha é exibido e nenhuma conexão é estabelecida. Isso acontece quando nenhum pacote de chaveiro é instalado. Uma solução fácil é instalar o <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnome-keyring">gnome-keyring</a></span>. Se você quiser que as senhas sejam armazenadas em formato criptografado, siga <a href="../en/GNOME/Keyring.html" class="mw-redirect" title="GNOME Keyring">GNOME Keyring</a> para configurar o <i>gnome-keyring-daemon</i>.
</p>
<h3><span class="mw-headline" id="Gerenciamento_de_rede_desabilitado">Gerenciamento de rede desabilitado</span></h3>
<p>Quando o NetworkManager for desligado, mas o arquivo pid (estado) não for removido, você verá uma mensagem <code>Network management disabled</code>. Se isso acontecer, remova o arquivo manualmente:
</p>
<pre># rm /var/lib/NetworkManager/NetworkManager.state
</pre>
<h3><span class="mw-headline" id="Problemas_com_cliente_DHCP_interno">Problemas com cliente DHCP interno</span></h3>
<p>Se você tiver problemas para obter um endereço IP usando o cliente DHCP interno, considere usar outro cliente DHCP, consulte <a href="#Cliente_DHCP">#Cliente DHCP</a> para obter instruções. Essa solução alternativa pode resolver problemas em grandes redes sem fio, como o eduroam.
</p>
<h3><span class="mw-headline" id="Problemas_DHCP_com_dhclient">Problemas DHCP com dhclient</span></h3>
<p>Se você tiver problemas ao obter um endereço IP via DHCP, tente adicionar o seguinte ao seu <code>/etc/dhclient.conf</code>:
</p>
<pre> interface "eth0" {
   send dhcp-client-identifier 01:<i>aa:bb:cc:dd:ee:ff</i>;
 }
</pre>
<p>sendo <code><i>aa:bb:cc:dd:ee:ff</i></code> o endereço MAC desta NIC. O endereço MAC pode ser localizado usando o comando <code>ip link show <i>interface</i></code> com o pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=iproute2">iproute2</a></span>.
</p>
<h3>
<span id="Modem_3G_n.C3.A3o_detectado"></span><span class="mw-headline" id="Modem_3G_não_detectado">Modem 3G não detectado</span>
</h3>
<p>Veja <a href="../en/USB_3G_Modem.html#NetworkManager" title="USB 3G Modem">USB 3G Modem#NetworkManager</a>.
</p>
<h3><span class="mw-headline" id="Desligando_WLAN_em_laptops">Desligando WLAN em laptops</span></h3>
<p>Às vezes o NetworkManager não funciona quando você desabilita o seu adaptador Wi-Fi com um botão em seu laptop e tenta habilitá-lo novamente depois. Isso geralmente é um problema com <i>rfkill</i>. Para verificar se o driver notifica <i>rfkill</i> sobre o status do adaptador sem fio, use:
</p>
<pre>$ watch -n1 rfkill list all
</pre>
<p>Se um identificador permanecer bloqueado depois de ligar o adaptador, você pode tentar desbloqueá-lo manualmente (onde X é o número do identificador fornecido pela saída acima):
</p>
<pre># rfkill event unblock X
</pre>
<h3>
<span id="Revers.C3.A3o_de_configura.C3.A7.C3.B5es_de_endere.C3.A7o_IP_est.C3.A1tico_para_DHCP"></span><span class="mw-headline" id="Reversão_de_configurações_de_endereço_IP_estático_para_DHCP">Reversão de configurações de endereço IP estático para DHCP</span>
</h3>
<p>Devido a um erro não resolvido, ao alterar as conexões padrão para um endereço IP estático, o <code>nm-applet</code> pode não armazenar adequadamente a alteração de configuração e voltará ao DHCP automático.
</p>
<p>Para contornar este problema você tem que editar a conexão padrão (por exemplo, "Auto eth0") em <code>nm-applet</code>, alterar o nome da conexão (por exemplo "meu eth0"), desmarque a caixa de seleção "Disponível para todos os usuários", altere suas configurações de endereço IP estático conforme desejado e clique em <b>Aplicar</b>. Isso salvará uma nova conexão com o nome fornecido.
</p>
<p>Em seguida, você desejará fazer com que a conexão padrão não seja conectada automaticamente. Para fazer isso, execute <code>nm-connection-editor</code> (<b>não</b> como root). No editor de conexão, edite a conexão padrão (por exemplo, "Auto eth0") e desmarque "Conectar automaticamente". Clique em <b>Aplicar</b> e feche o editor de conexão.
</p>
<h3>
<span id="N.C3.A3o_.C3.A9_poss.C3.ADvel_editar_conex.C3.B5es_como_usu.C3.A1rio_normal"></span><span class="mw-headline" id="Não_é_possível_editar_conexões_como_usuário_normal">Não é possível editar conexões como usuário normal</span>
</h3>
<p>Veja <a href="#Configurar_as_permiss%C3%B5es_de_PolicyKit">#Configurar as permissões de PolicyKit</a>.
</p>
<h3><span class="mw-headline" id="Esquecer_rede_sem_fio_oculta">Esquecer rede sem fio oculta</span></h3>
<p>Como as redes ocultas não são exibidas na lista de seleção da tela de redes sem fio, elas não podem ser esquecidas (removidas) com a GUI. Você pode excluir um com o seguinte comando:
</p>
<pre># rm /etc/NetworkManager/system-connections/<i>SSID</i>
</pre>
<p>Isso funciona para qualquer outra conexão.
</p>
<h3>
<span id="VPN_n.C3.A3o_funciona_no_GNOME"></span><span class="mw-headline" id="VPN_não_funciona_no_GNOME">VPN não funciona no GNOME</span>
</h3>
<p>Ao configurar conexões OpenConnect ou vpnc no NetworkManager enquanto estiver usando o GNOME, você algumas vezes nunca verá a caixa de diálogo aparecer e o seguinte erro aparecerá em <code>/var/log/errors.log</code>:
</p>
<pre>localhost NetworkManager[399]: &lt;error&gt; [1361719690.10506] [nm-vpn-connection.c:1405] get_secrets_cb(): Failed to request VPN secrets #3: (6) No agents were available for this request.
</pre>
<p>Isso é causado pelo fato do miniaplicativo de NM do GNOME esperar que os scripts de diálogo estejam em <code>/usr/lib/gnome-shell</code>, quando os pacotes do NetworkManager os colocam em <code>/usr/lib/networkmanager</code>.
Como uma correção "temporária" (este bug já existe há algum tempo), faça os seguintes links simbólicos:
</p>
<ul>
<li>Para OpenConnect: <code>ln -s /usr/lib/networkmanager/nm-openconnect-auth-dialog /usr/lib/gnome-shell/</code>
</li>
<li>Para VPNC (isto é, Cisco VPN): <code>ln -s /usr/lib/networkmanager/nm-vpnc-auth-dialog /usr/lib/gnome-shell/</code>
</li>
</ul>
<p>Isso pode precisar ser feito para qualquer outro plug-in de VPN do NM, mas esses são os dois mais comuns.
</p>
<h3>
<span id="Impossibilidade_de_se_conectar_a_redes_sem_fio_europeias_vis.C3.ADveis"></span><span class="mw-headline" id="Impossibilidade_de_se_conectar_a_redes_sem_fio_europeias_visíveis">Impossibilidade de se conectar a redes sem fio europeias visíveis</span>
</h3>
<p>Os chips WLAN são fornecidos com um padrão <a href="../pt/b9b884f10bec6b20a2e6f1b1fe79d6b3.html#Respeitar_o_dom%C3%ADnio_regulat%C3%B3rio" class="mw-redirect" title="Configuração de rede sem fio">domínio regulatório</a>. Se o seu ponto de acesso não operar dentro dessas limitações, você não conseguirá se conectar à rede. Consertar isso é fácil:
</p>
<ol>
<li>
<a href="../pt/Help:Reading.html#Instala%C3%A7%C3%A3o_de_pacotes" class="mw-redirect" title="Instale">Instale</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=crda">crda</a></span>
</li>
<li>Descomente o código de país correto em <code>/etc/conf.d/wireless-regdom</code>
</li>
<li>Reinicie o sistema, pois a configuração está como somente leitura na inicialização</li>
</ol>
<h3>
<span id="Conex.C3.A3o_autom.C3.A1tica_a_VPN_na_inicializa.C3.A7.C3.A3o_n.C3.A3o_funciona"></span><span class="mw-headline" id="Conexão_automática_a_VPN_na_inicialização_não_funciona">Conexão automática a VPN na inicialização não funciona</span>
</h3>
<p>O problema ocorre quando o sistema (ou seja, o NetworkManager em execução como usuário root) tenta estabelecer uma conexão VPN, mas a senha não está acessível porque está armazenada no GNOME Keyring de um usuário específico.
</p>
<p>Uma solução é manter a senha em sua VPN em texto simples, conforme descrito na etapa (2.) de <a href="#Usar_dispatcher_para_conectar_a_uma_VPN_ap%C3%B3s_uma_conex%C3%A3o_de_rede_ser_estabelecida">#Usar dispatcher para conectar a uma VPN após uma conexão de rede ser estabelecida</a>.
</p>
<p>Você não precisa mais usar o dispatcher descrito na etapa (1.) para se conectar automaticamente, se você usar a nova opção "autoconectar VPN" na interface gráfica do <code>nm-applet</code>.
</p>
<h3><span class="mw-headline" id="Gargalo_no_systemd">Gargalo no systemd</span></h3>
<p>Com o tempo, os arquivos de log (<code>/var/log/journal</code>) podem se tornar muito grandes. Isso pode ter um grande impacto no desempenho da inicialização ao usar o NetworkManager, consulte: <a href="../pt/Systemd.html#Tempo_de_inicializa%C3%A7%C3%A3o_aumentando_com_o_tempo" title="Systemd (Português)">Systemd (Português)#Tempo de inicialização aumentando com o tempo</a>.
</p>
<h3>
<span id="Desconex.C3.B5es_de_rede_regulares.2C_lat.C3.AAncia.2C_pacotes_perdidos_.28WiFi.29"></span><span class="mw-headline" id="Desconexões_de_rede_regulares,_latência,_pacotes_perdidos_(WiFi)">Desconexões de rede regulares, latência, pacotes perdidos (WiFi)</span>
</h3>
<p>O NetworkManager faz uma varredura a cada 2 minutos.
</p>
<p>Alguns drivers de WiFi apresentam problemas ao procurar estações base enquanto conectados/associados. Os sintomas incluem desconexões/reconexões de VPN e perda de pacotes, páginas da Web que não podem ser carregadas e, em seguida, atualizadas corretamente.
</p>
<p>A execução <code>journalctl -f</code> indicará que isso está ocorrendo, mensagens como as seguintes estarão contidas nos logs em intervalos regulares.
</p>
<pre>NetworkManager[410]: &lt;info&gt;  (wlp3s0): roamed from BSSID 00:14:48:11:20:CF (my-wifi-name) to (none) ((none))
</pre>
<p>Existe uma versão corrigida do NetworkManager que deve evitar esse tipo de verificação: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/networkmanager-noscan/">networkmanager-noscan</a></span><sup><small>AUR</small></sup>.
</p>
<p>Como alternativa, se o roaming não for importante, o comportamento de varredura periódica poderá ser desabilitado bloqueando o BSSID do ponto de acesso no perfil de conexão WiFi.
</p>
<h3>
<span id="Impossibilidade_de_ligar_o_Wi-Fi_com_laptop_Lenovo_.28IdeaPad.2C_Legion.2C_etc..29"></span><span class="mw-headline" id="Impossibilidade_de_ligar_o_Wi-Fi_com_laptop_Lenovo_(IdeaPad,_Legion,_etc.)">Impossibilidade de ligar o Wi-Fi com laptop Lenovo (IdeaPad, Legion, etc.)</span>
</h3>
<p>Há um problema com o módulo <code>ideapad_laptop</code> em alguns modelos da Lenovo, devido ao driver wi-fi relatar incorretamente um bloco virtual. A placa ainda pode ser manipulada com <code>netctl</code>, mas os gerenciadores como o NetworkManager quebram. Você pode verificar se este é o problema, verificando a saída de <code>rfkill list</code> depois de alternar sua chave de hardware e ver que o bloco de software persiste.
</p>
<p><a href="../pt/Kernel_module.html" class="mw-redirect" title="Modprobe (Português)">Descarregar</a> o módulo <code>ideapad_laptop</code> deve corrigir isso. (<b>atenção</b>: isso também pode desabilitar o teclado e o touchpad do laptop!).
</p>
<h3><span class="mw-headline" id="Desligar_envido_de_hostname">Desligar envido de hostname</span></h3>
<p>O NetworkManager, por padrão, envia o nome do host para o servidor DHCP. O envio de nome de host só pode ser desativado por conexão não globalmente (<a rel="nofollow" class="external text" href="https://bugzilla.gnome.org/show_bug.cgi?id=768076">Bug 768076 do GNOME</a>).
</p>
<p>Para desabilitar o envio do seu nome de host para o servidor DHCP para uma conexão específica, adicione o seguinte ao seu arquivo de conexão de rede:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/system-connections/<i>seu_arquivo_de_conexão</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
[ipv4]
dhcp-send-hostname=false
...
[ipv6]
dhcp-send-hostname=false
...</pre>
<h3><span class="mw-headline" id="nm-applet_desaparece_no_i3wm">nm-applet desaparece no i3wm</span></h3>
<p>Se você usar o <code>xfce4-notifyd.service</code> para notificações, deverá <a href="../pt/Systemd.html#Editando_units_fornecidas" class="mw-redirect" title="Editar">editar</a> a unidade e adicionar o seguinte:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/user/xfce4-notifyd.service.d/display_env.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
Environment="DISPLAY=:0.0"</pre>
<p>Depois de recarregar os daemons, <a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Reinicie">reinicie</a> o <code>xfce4-notifyd.service</code>. Saia do i3 e reinicie-o novamente, e o miniaplicativo deverá aparecer na área de notificação.
</p>
<h3>
<span id=".C3.8Dcones_de_bandeja_do_nm-applet_exibidos_incorretamente"></span><span class="mw-headline" id="Ícones_de_bandeja_do_nm-applet_exibidos_incorretamente">Ícones de bandeja do nm-applet exibidos incorretamente</span>
</h3>
<p>Atualmente, os ícones da área de notificação do nm-applet são desenhados uns em cima dos outros, ou seja, o ícone exibindo a força sem fio pode ser exibido na parte superior do ícone, indicando que não há conexão com fio.
Isso aparentemente é um problema/bug do GTK3: <a rel="nofollow" class="external free" href="https://gitlab.gnome.org/GNOME/gtk/issues/1280">https://gitlab.gnome.org/GNOME/gtk/issues/1280</a> .
</p>
<p>Uma versão corrigida do GTK3 existe no AUR, que aparentemente corrige o erro do ícone da área de notificação: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gtk3-mushrooms/">gtk3-mushrooms</a></span><sup><small>AUR</small></sup> .
</p>
<h3>
<span id="Unit_dbus-org.freedesktop.resolve1.service_n.C3.A3o_encontrado"></span><span class="mw-headline" id="Unit_dbus-org.freedesktop.resolve1.service_não_encontrado">Unit dbus-org.freedesktop.resolve1.service não encontrado</span>
</h3>
<p>Se <code>systemd-resolved.service</code> não tiver sido iniciado, NetworkManager vai tentar iniciá-lo usando D-Bus e vai falhar:
</p>
<pre>dbus-daemon[991]: [system] Activating via systemd: service name='org.freedesktop.resolve1' unit='dbus-org.freedesktop.resolve1.service' requested by ':1.23' (uid=0 pid=1012 comm="/usr/bin/NetworkManager --no-daemon ")
dbus-daemon[991]: [system] Activation via systemd failed for unit 'dbus-org.freedesktop.resolve1.service': Unit dbus-org.freedesktop.resolve1.service not found.
dbus-daemon[991]: [system] Activating via systemd: service name='org.freedesktop.resolve1' unit='dbus-org.freedesktop.resolve1.service' requested by ':1.23' (uid=0 pid=1012 comm="/usr/bin/NetworkManager --no-daemon ")
</pre>
<p>Isso é porque o NetworkManager vai tentar enviar informações DNS para <a href="../en/Systemd-resolved.html" title="Systemd-resolved">systemd-resolved</a> independentemente da configuração <code>main.dns=</code> no <span class="plainlinks archwiki-template-man" title="$ man 5 NetworkManager.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/NetworkManager.conf.5">NetworkManager.conf(5)</a></span>.<a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/NetworkManager/NetworkManager/commit/d4eb4cb45f41b1751cacf71da558bf8f0988f383">[6]</a>
</p>
<p>Isso pode ser desabilitado com um arquivo de configuração em <code>/etc/NetworkManager/conf.d/</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/conf.d/no-systemd-resolved.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[main]
systemd-resolved=false</pre>
<p>Veja  <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/62138">FS#62138</a>.
</p>
<h3>
<span id="Segredos_eram_necess.C3.A1rios.2C_mas_n.C3.A3o_fornecidos"></span><span class="mw-headline" id="Segredos_eram_necessários,_mas_não_fornecidos">Segredos eram necessários, mas não fornecidos</span>
</h3>
<p>Se você tenta se conectar a uma rede usando o dispositivo <code>nmcli device wifi connect <i>SSID</i> password <i>senha</i></code> e recebe o seguinte erro:
</p>
<pre>Erro: Ativação da conexão falhou: (7) Segredos foram requisitados, mas não fornecidos
</pre>
<p>O erro pode ser resolvido excluindo o perfil de conexão e criando um novo:
</p>
<pre>$ nmcli connection delete <i>SSID</i>
$ nmcli device wifi connect <i>SSID</i> password <i>senha</i>
</pre>
<h3>
<span id="Conex.C3.A3o_WPA_Empresarial_com_o_NetworkManager"></span><span class="mw-headline" id="Conexão_WPA_Empresarial_com_o_NetworkManager">Conexão WPA Empresarial com o NetworkManager</span>
</h3>
<p>Se você tentar se conectar a uma rede WPA Empresarial como 'eduroam' com o NetworkManager com o backend <a href="../pt/Iwd.html" title="Iwd (Português)">iwd</a>, o NetworkManager receberá o seguinte erro:
</p>
<pre> Connection 'eduroam' is not avialable on device wlan0 because profile is not compatible with device (802.1x connections must have IWD provisioning files)
</pre>
<p>Isso ocorre porque o NetworkManager não consegue configurar uma rede WPA Enterprise. Portanto, você deve configurá-lo usando um arquivo de configuração do iwd <code>/var/lib/iwd/<i>essid</i>.8021x</code> como descrito em <a href="../pt/Iwd.html#WPA_Empresarial" title="Iwd (Português)">iwd (Português)#WPA Empresarial</a>.
</p>
<h2>
<span id="Veja_tamb.C3.A9m"></span><span class="mw-headline" id="Veja_também">Veja também</span>
</h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://blogs.gnome.org/dcbw/2015/02/16/networkmanager-for-administrators-part-1/">NetworkManager para Administradores Parte 1</a></li>
<li><a href="https://en.wikipedia.org/wiki/pt:NetworkManager" class="extiw" title="wikipedia:pt:NetworkManager">Wikipedia:pt:NetworkManager</a></li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../pt/Category:Network_managers.html" title="Category:Network managers (Português)">Network managers (Português)</a></li>
<li><a href="../pt/Category:Red_Hat.html" title="Category:Red Hat (Português)">Red Hat (Português)</a></li>
</ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=NetworkManager_(Portugu%C3%AAs)&amp;oldid=627517">https://wiki.archlinux.org/index.php?title=NetworkManager_(Português)&amp;oldid=627517</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 31 July 2020, at 19:22.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
