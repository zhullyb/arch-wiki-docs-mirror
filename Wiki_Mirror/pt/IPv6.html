<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>IPv6 (Português) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-IPv6_Português rootpage-IPv6_Português skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">IPv6 (Português)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Status de tradução:</strong> Esse artigo é uma tradução de <a href="/title/IPv6" title="IPv6">IPv6</a>. Data da última tradução: 2019-11-06. Você pode ajudar a sincronizar a tradução, se houver <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=IPv6&amp;diff=0&amp;oldid=587192">alterações</a> na versão em inglês.</div>
<div class="archwiki-template-meta-related-articles-start">
<p>Artigos relacionados</p>
<ul>
<li><a href="/title/Configura%C3%A7%C3%A3o_de_tunnel_broker_IPv6" class="mw-redirect" title="Configuração de tunnel broker IPv6">Configuração de tunnel broker IPv6</a></li>
</ul>
</div>
<p>No Arch Linux, IPv6 está habilitado por padrão.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Descoberta_de_vizinhan%C3%A7a"><span class="tocnumber">1</span> <span class="toctext">Descoberta de vizinhança</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Autoconfigura%C3%A7%C3%A3o_sem_estado_(SLAAC)"><span class="tocnumber">2</span> <span class="toctext">Autoconfiguração sem estado (SLAAC)</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Para_clientes"><span class="tocnumber">2.1</span> <span class="toctext">Para clientes</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Para_gateways"><span class="tocnumber">2.2</span> <span class="toctext">Para gateways</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5">
<a href="#Extens%C3%B5es_de_privacidade"><span class="tocnumber">3</span> <span class="toctext">Extensões de privacidade</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#dhcpcd"><span class="tocnumber">3.1</span> <span class="toctext">dhcpcd</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#NetworkManager"><span class="tocnumber">3.2</span> <span class="toctext">NetworkManager</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#systemd-networkd"><span class="tocnumber">3.3</span> <span class="toctext">systemd-networkd</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#connman"><span class="tocnumber">3.4</span> <span class="toctext">connman</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10">
<a href="#Endere%C3%A7os_privados_est%C3%A1veis"><span class="tocnumber">4</span> <span class="toctext">Endereços privados estáveis</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#NetworkManager_2"><span class="tocnumber">4.1</span> <span class="toctext">NetworkManager</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="#Endere%C3%A7o_est%C3%A1tico"><span class="tocnumber">5</span> <span class="toctext">Endereço estático</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="#IPv6_e_PPPoE"><span class="tocnumber">6</span> <span class="toctext">IPv6 e PPPoE</span></a></li>
<li class="toclevel-1 tocsection-14">
<a href="#Delega%C3%A7%C3%A3o_de_prefixo_(DHCPv6-PD)"><span class="tocnumber">7</span> <span class="toctext">Delegação de prefixo (DHCPv6-PD)</span></a>
<ul>
<li class="toclevel-2 tocsection-15"><a href="#Com_dibbler"><span class="tocnumber">7.1</span> <span class="toctext">Com dibbler</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Com_dhcpcd"><span class="tocnumber">7.2</span> <span class="toctext">Com dhcpcd</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Com_WIDE-DHCPv6"><span class="tocnumber">7.3</span> <span class="toctext">Com WIDE-DHCPv6</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#systemd-networkd_2"><span class="tocnumber">7.4</span> <span class="toctext">systemd-networkd</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#Outros_clientes"><span class="tocnumber">7.5</span> <span class="toctext">Outros clientes</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-20">
<a href="#Desabilitar_IPv6"><span class="tocnumber">8</span> <span class="toctext">Desabilitar IPv6</span></a>
<ul>
<li class="toclevel-2 tocsection-21"><a href="#Desabilitar_funcionalidade"><span class="tocnumber">8.1</span> <span class="toctext">Desabilitar funcionalidade</span></a></li>
<li class="toclevel-2 tocsection-22">
<a href="#Outros_programas"><span class="tocnumber">8.2</span> <span class="toctext">Outros programas</span></a>
<ul>
<li class="toclevel-3 tocsection-23"><a href="#dhcpcd_2"><span class="tocnumber">8.2.1</span> <span class="toctext">dhcpcd</span></a></li>
<li class="toclevel-3 tocsection-24"><a href="#NetworkManager_3"><span class="tocnumber">8.2.2</span> <span class="toctext">NetworkManager</span></a></li>
<li class="toclevel-3 tocsection-25"><a href="#ntpd"><span class="tocnumber">8.2.3</span> <span class="toctext">ntpd</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-26"><a href="#systemd-networkd_3"><span class="tocnumber">8.3</span> <span class="toctext">systemd-networkd</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-27"><a href="#Preferir_IPv4_a_IPv6"><span class="tocnumber">9</span> <span class="toctext">Preferir IPv4 a IPv6</span></a></li>
<li class="toclevel-1 tocsection-28"><a href="#Veja_tamb%C3%A9m"><span class="tocnumber">10</span> <span class="toctext">Veja também</span></a></li>
</ul>
</div>

<h2>
<span id="Descoberta_de_vizinhan.C3.A7a"></span><span class="mw-headline" id="Descoberta_de_vizinhança">Descoberta de vizinhança</span>
</h2>
<p>Pingar o endereço multicast <code>ff02::1</code> resulta em todos os hosts no escopo link-local responderem. Uma interface tem que ser especificada:
</p>
<pre>$ ping ff02::1%eth0
</pre>
<p>Após isso, você pode obter uma lista de todos os vizinhos na rede local com:
</p>
<pre>$ ip -6 neigh
</pre>
<p>Com um ping para o endereço multicast <code>ff02::2</code> apenas roteadores vão responderem.
</p>
<p>Se você adicionar uma opção <code>-I <i>seu-ipv6-global</i></code>, hosts link-local vão responder com seus endereços de escopo link-global. A interface pode ser omitida neste caso:
</p>
<pre>$ ping -I 2001:4f8:fff6::21 ff02::1
</pre>
<h2>
<span id="Autoconfigura.C3.A7.C3.A3o_sem_estado_.28SLAAC.29"></span><span class="mw-headline" id="Autoconfiguração_sem_estado_(SLAAC)">Autoconfiguração sem estado (SLAAC)</span>
</h2>
<p>A maneira mais fácil de adquirir um endereço IPv6, desde que sua rede esteja configurada, é através de <i>Stateless address autoconfiguration</i> (abreviado para SLAAC, que poderia ser traduzido para português como "Autoconfiguração de endereço sem estado"). O endereço é inferido automaticamente do prefixo que o seu roteador anuncia e não requer nenhuma configuração adicional nem software especializado, como um cliente DHCP.
</p>
<h3><span class="mw-headline" id="Para_clientes">Para clientes</span></h3>
<p>Se você está usando o <a href="/title/Netctl" title="Netctl">netctl</a>, você só precisa adicionar a seguinte linha para sua configuração Ethernet ou sem fio.
</p>
<pre>IP6=stateless
</pre>
<p>Se você está usando o <a href="/title/NetworkManager_(Portugu%C3%AAs)" title="NetworkManager (Português)">NetworkManager</a>, então endereços IP são habilitados automaticamente se houver anúncios para eles na rede.
</p>
<p>Observe que a autoconfiguração sem estado funciona com a condição de que pacotes icmp IPv6 sejam permitidos em toda a rede. Portanto, para o lado do cliente, os pacotes <code>ipv6-icmp</code> devem ser aceitos. Se você estiver usando um <a href="/title/Simple_stateful_firewall" title="Simple stateful firewall">Firewall stateful simples</a> ou o <a href="/title/Iptables" title="Iptables">iptables</a>, você só precisa adicionar:
</p>
<pre>-A INPUT -p ipv6-icmp -j ACCEPT
</pre>
<p>Se você estiver usando um outro front-end de firewall (ufw, shorewall, etc), consulte sua documentação sobre como habilitar os pacotes <code>ipv6-icmp</code>.
</p>
<p>Se a sua solução de gerenciamento de rede escolhida não ter suporte a configuração do resolvedor DNS com IPv6 sem estado (por exemplo, netctl), será possível usar <span class="plainlinks archwiki-template-man" title="$ man 8 rdnssd"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/rdnssd.8">rdnssd(8)</a></span> do pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ndisc6">ndisc6</a></span> para isso.
</p>
<h3><span class="mw-headline" id="Para_gateways">Para gateways</span></h3>
<p>Para distribuir corretamente os IPv6s aos clientes da rede, precisaremos usar um daemon de anúncio. A ferramenta padrão para este trabalho é <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=radvd">radvd</a></span> e está disponível em <a href="/title/Reposit%C3%B3rios_oficiais" class="mw-redirect" title="Repositórios oficiais">repositórios oficiais</a>. Configuração do radvd é bastante simples. Edite <code>/etc/radvd.conf</code> para incluir:
</p>
<pre># substitua LAN com sua interface de LAN
interface LAN {
  AdvSendAdvert on;
  MinRtrAdvInterval 3;
  MaxRtrAdvInterval 10;
  prefix ::/64 {
    AdvOnLink on;
    AdvAutonomous on;
    AdvRouterAddr on;
  };
};
</pre>
<p>A configuração acima dirá aos clientes para se autoconfigurarem usando endereços do bloco /64 anunciado. Observe que a configuração acima anuncia "todos os prefixos disponíveis" atribuídos à interface de LAN. Se você quiser limitar os prefixos anunciados em vez de <code>::/64</code> use o prefixo desejado, por exemplo, <code>2001:DB8::/64</code>. O bloco <code>prefix</code> pode ser repetido várias vezes para mais prefixos.
</p>
<p>Para anunciar servidores DNS para seus clientes LAN, você pode usar o recurso RDNSS. Por exemplo, adicione as seguintes linhas a <code>/etc/radvd.conf</code> para anunciar os servidores DNS v6 do Google:
</p>
<pre>RDNSS 2001:4860:4860::8888 2001:4860:4860::8844 {
};
</pre>
<p>O gateway também deve permitir o tráfego de pacotes <code> ipv6-icmp</code> em todas as cadeias básicas. Para um <a href="/title/Simple_stateful_firewall" title="Simple stateful firewall">Firewall stateful simples</a> ou o <a href="/title/Iptables" title="Iptables">iptables</a>, adicione:
</p>
<pre>-A INPUT -p ipv6-icmp -j ACCEPT
-A OUTPUT -p ipv6-icmp -j ACCEPT
-A FORWARD -p ipv6-icmp -j ACCEPT
</pre>
<p>Ajuste de acordo com outros front-ends de firewall e não se esqueça de habilitar <code>radvd.service</code>.
</p>
<h2>
<span id="Extens.C3.B5es_de_privacidade"></span><span class="mw-headline" id="Extensões_de_privacidade">Extensões de privacidade</span>
</h2>
<p>Quando um cliente adquire um endereço através do SLAAC, seu endereço IPv6 é derivado do prefixo anunciado e do endereço MAC da interface de rede do cliente. Isso pode aumentar as preocupações de segurança, pois o endereço MAC do computador pode ser facilmente derivado pelo endereço IPv6. Para resolver este problema, o padrão <i>IPv6 Privacy Extensions</i> (<a rel="nofollow" class="external text" href="https://tools.ietf.org/html/rfc4941">RFC 4941</a>) foi desenvolvido. Com as extensões de privacidade, o kernel gera um endereço <i>temporário</i> que é destacado do endereço original configurado automaticamente. Os endereços privados são preferidos ao se conectar a um servidor remoto, portanto, o endereço original fica oculto. Para ativar as extensões de privacidade, reproduza as seguintes etapas:
</p>
<p>Adicione essas linhas a <code>/etc/sysctl.d/40-ipv6.conf</code>:
</p>
<pre># Habilita IPv6 Privacy Extensions
net.ipv6.conf.all.use_tempaddr = 2
net.ipv6.conf.default.use_tempaddr = 2
net.ipv6.conf.<i>nic0</i>.use_tempaddr = 2
...
net.ipv6.conf.<i>nicN</i>.use_tempaddr = 2
</pre>
<p>Sendo que <code>nic0</code> a <code>nicN</code> são suas placas de rede (<i><b>N</b>etwork <b>I</b>nterface <b>C</b>ards</i>). Você pode encontrar seus nomes usando as instruções em <a href="/title/Configura%C3%A7%C3%A3o_de_rede#Listando_interfaces_de_rede" class="mw-redirect" title="Configuração de rede">Configuração de rede#Listando interfaces de rede</a>. Os parâmetros <code>all.use_tempaddr</code> ou <code>default.use_tempaddr</code> não são aplicados nas <i>NIC</i>s que já existem quando as configurações de <a href="/title/Sysctl" title="Sysctl">sysctl</a> são executadas.
</p>
<p>Após uma reinicialização, no final, Privacy Extensions devem estar habilitadas.
</p>
<h3><span class="mw-headline" id="dhcpcd">dhcpcd</span></h3>
<p><a href="/title/Dhcpcd" title="Dhcpcd">dhcpcd</a> inclui em seu arquivo de configuração padrão desde a versão 6.4.0 a opção <code>slaac private</code>, que ativa "Endereços IPv6 privados estáveis ao invés de baseados em hardware", implementando <a rel="nofollow" class="external text" href="https://tools.ietf.org/html/rfc7217">RFC 7217</a> (<a rel="nofollow" class="external text" href="http://archive.today/2014.10.06-110059/http://roy.marples.name/projects/dhcpcd/info/8aa9dab00dc72c453aeccbde885ecce27a3d81ff">commit</a>). Portanto, não é necessário alterar nada, exceto se for desejado alterar o endereço IPv6 com mais frequência do que a cada vez que o sistema for conectado a uma nova rede. Defina para <code>slaac hwaddr</code> para um endereço estável.
</p>
<h3><span class="mw-headline" id="NetworkManager">NetworkManager</span></h3>
<p>NetworkManager não honra as configurações colocadas em <code>/etc/sysctl.d/40-ipv6.conf</code>. Isso pode ser verificado executando <code>$ ip -6 addr show <i>interface</i></code> após reiniciar: nenhum endereço <code>scope global <b>temporary</b></code> aparece além do regular.
</p>
<p>Para habilitar IPv6 Privacy Extensions por padrão, adicione essas linhas a <code>/etc/NetworkManager/NetworkManager.conf</code>
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/NetworkManager.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
<b>[connection]</b>
<b>ipv6.ip6-privacy=2</b></pre>
<p>Para habilitar as IPv6 Privacy Extensions para conexões gerenciadas pelo NetworkManager, edite o arquivo de conexão desejado em <code>/etc/NetworkManager/system-connections/</code> e acrescente à sua seção <code>[ipv6]</code> o par de valores-chave <code>ip6-privacy=2</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/system-connections/<i>conexao-exemplo</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
[ipv6]
method=auto
<b>ip6-privacy=2</b></pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Embora possa parecer que o endereço IPv6 <code>scope global temporary</code> criado ao ativar as Privacy Extensions nunca é renovado (nunca muda para o status <code>deprecated</code> no termo de sua vida útil <code>valid_lft</code>), deve ser verificado durante um período de tempo mais longo que esse endereço <b>realmente</b> muda.</div>
<h3><span class="mw-headline" id="systemd-networkd">systemd-networkd</span></h3>
<p>Systemd-networkd também não honra as configurações <code>net.ipv6.conf.xxx.use_tempaddr</code> colocadas em <code>/etc/sysctl.d/40-ipv6.conf</code> a menos que a opção <code>IPv6PrivacyExtensions</code> esteja definida com o valor <code>kernel</code> no(s) arquivo(s) .network.
</p>
<p>Outras opções para as IPv6 Privacy Extensions como:
</p>
<pre>net.ipv6.conf.xxx.temp_prefered_lft
net.ipv6.conf.xxx.temp_valid_lft
</pre>
<p>são honradas.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> <code>temp_prefered_lft</code> é o nome da variável, <i>preferred</i> tem que ser escrito errado mesmo.</div>
<p>Veja <a href="/title/Systemd-networkd" title="Systemd-networkd">systemd-networkd</a> e <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.network"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.network.5">systemd.network(5)</a></span> para detalhes.
</p>
<h3><span class="mw-headline" id="connman">connman</span></h3>
<p>Adicione a <code>/var/lib/connman/settings</code> sob a seção global:
</p>
<pre>[global]
IPv6.privacy=preferred
</pre>
<h2>
<span id="Endere.C3.A7os_privados_est.C3.A1veis"></span><span class="mw-headline" id="Endereços_privados_estáveis">Endereços privados estáveis</span>
</h2>
<p>Outra opção é um endereço IP privado estável (<a rel="nofollow" class="external text" href="https://tools.ietf.org/html/rfc7217">RFC 7217</a>). Isso permite que os IPs sejam estáveis dentro de uma rede sem expor o endereço MAC da interface.
</p>
<p>Para que o kernel gere uma chave (por <code>wlan0</code>, por exemplo) podemos definir:
</p>
<pre>sysctl net.ipv6.conf.wlan0.addr_gen_mode=3
</pre>
<p>Desative a interface e ative-a novamente e você deverá ver <code>stable-privacy</code> ao lado de cada endereço IPv6 depois de executar <code>ip addr show dev wlan0</code>. O kernel gerou um segredo de 128 bits para gerar endereços IP para esta interface, para vê-lo rodar <code>sysctl net.ipv6.conf.wlan0.stable_secret</code>. Vamos persistir esse valor, então adicione as seguintes linhas ao <code>/etc/sysctl.d/40-ipv6.conf</code>:
</p>
<pre># Habilita modo de privacidade estável de IPv6
net.ipv6.conf.wlan0.stable_secret = &lt;saída do comando anterior&gt;
net.ipv6.conf.wlan0.addr_gen_mode = 2
</pre>
<h3><span class="mw-headline" id="NetworkManager_2">NetworkManager</span></h3>
<p>As configurações acima não são respeitadas pelo NetworkManager, mas o NetworkManager usa endereços privados estáveis por padrão.
</p>
<h2>
<span id="Endere.C3.A7o_est.C3.A1tico"></span><span class="mw-headline" id="Endereço_estático">Endereço estático</span>
</h2>
<p>Às vezes, usar um endereço estático pode melhorar a segurança. Por exemplo, se o seu roteador local usa Neighbor Discovery ou radvd (<a rel="nofollow" class="external text" href="https://datatracker.ietf.org/doc/html/rfc2461">RFC 2461</a>), sua interface receberá automaticamente um endereço baseado em seu endereço MAC (usando a configuração automática sem estado do IPv6). Isso pode ser menos do que ideal para segurança, pois permite que um sistema seja rastreado mesmo que a parte da rede do endereço IP seja alterada.
</p>
<p>Para atribuir um endereço IP estático usando <a href="/title/Netctl" title="Netctl">netctl</a>, veja no exemplo de perfil em <code>/etc/netctl/examples/ethernet-static</code>. As seguintes linhas são importantes:
</p>
<pre>...
# Para configuração de endereço IPv6 estático
IP6=static
Address6=('1234:5678:9abc:def::1/64' '1234:3456::123/96')
Routes6=('abcd::1234')
Gateway6='1234:0:123::abcd'
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Se você estiver conectado somente a IPv6, precisará determinar seu servidor DNS IPv6. Por exemplo:
<pre>DNS=('6666:6666::1' '6666:6666::2')
</pre>
Se o seu provedor não forneceu DNS IPv6 e você não está executando o seu próprio, você pode escolher o artigo <a href="/title/Resolv.conf_(Portugu%C3%AAs)" class="mw-redirect" title="Resolv.conf (Português)">resolv.conf</a>.</div>
<h2><span class="mw-headline" id="IPv6_e_PPPoE">IPv6 e PPPoE</span></h2>
<p>A ferramenta padrão para o PPPoE, <code>pppd</code>, fornece suporte a IPv6 sob PPPoE desde que seu provedor de internet e seu modem tenham suporte a isso. Basta adicionar ao seguinte a <code>/etc/ppp/options</code>
</p>
<pre>+ipv6
</pre>
<p>Se você estiver usando <a href="/title/Netctl" title="Netctl">netctl</a> para PPPoE, basta adicionar o seguinte a sua configuração de netctl
</p>
<pre>PPPoEIP6=yes
</pre>
<h2>
<span id="Delega.C3.A7.C3.A3o_de_prefixo_.28DHCPv6-PD.29"></span><span class="mw-headline" id="Delegação_de_prefixo_(DHCPv6-PD)">Delegação de prefixo (DHCPv6-PD)</span>
</h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Esta seção é direcionada para a configuração de gateway personalizada, não para máquinas clientes. Para roteadores de mercado padrão, consulte a documentação do seu roteador sobre como habilitar a delegação de prefixo.</div>
<p>A delegação de prefixo é uma técnica comum de implementação de IPv6 usada por muitos ISPs. É um método de atribuição de um prefixo de rede a um site do usuário (por exemplo, rede local). Um roteador pode ser configurado para atribuir diferentes prefixos de rede a várias sub-redes. O ISP distribui um prefixo de rede usando DHCPv6 (geralmente um <code>/56</code> ou <code>/64</code>) e um cliente dhcp atribui os prefixos à rede local. Para um simples gateway de duas interfaces, ele praticamente atribui um prefixo IPv6 à interface conectada à rede local a partir de um endereço adquirido através da interface conectada à WAN (ou uma pseudo-interface como ppp).
</p>
<h3><span class="mw-headline" id="Com_dibbler">Com dibbler</span></h3>
<p><a rel="nofollow" class="external text" href="http://klub.com.pl/dhcpv6/">Dibbler</a> é um cliente e servidor DHCPv6 portátil que pode ser usado para delegação de prefixo. Pode ser <a href="/title/Instala" class="mw-redirect" title="Instala">instalado</a> com o pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/dibbler/">dibbler</a></span><sup><small>AUR</small></sup>.
</p>
<p>Se você está usando <code>dibbler</code>, edite <code>/etc/dibbler/client.conf</code>
</p>
<pre>log-mode short
log-level 7
# use a interface conectada a sua WAN
iface "WAN" {
  ia
  pd
}
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> Leia <span class="plainlinks archwiki-template-man" title="$ man 8 dibbler-client">dibbler-client(8)</span> para mais informações.</div>
<h3><span class="mw-headline" id="Com_dhcpcd">Com dhcpcd</span></h3>
<p>O <a href="/title/Dhcpcd" title="Dhcpcd">dhcpcd</a> além do suporte a dhcp IPv4 também fornece uma implementação bastante completa do padrão de cliente DHCPv6 que inclui o DHCPv6-PD. Se você estiver usando <code>dhcpcd</code> edite <code>/etc/dhcpcd.conf</code>. Você pode já estar usando o dhcpcd para IPv4, portanto, basta atualizar sua configuração existente.
</p>
<pre>duid
noipv6rs
waitip 6
# Descomente esta linha se você está usando dhcpcd para apenas IPv6.
#ipv6only

# usa a interface conectada a WAN
interface WAN
ipv6rs
iaid 1
# use a interface conectada a sua LAN
ia_pd 1 LAN
#ia_pd 1/::/64 LAN/0/64
</pre>
<p>Essa configuração solicitará um prefixo da interface WAN (<code>WAN</code>) e a delegará para a interface interna (<code>LAN</code>).
No caso de um intervalo <code>/64</code> ser emitido, você precisará usar a segunda <code>ia_pd instruction</code> comentada em seu lugar.
Ele também desativará as solicitações do roteador em todas as interfaces, exceto na interface WAN (<code>WAN</code>).
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> Leia também <span class="plainlinks archwiki-template-man" title="$ man 8 dhcpcd"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/dhcpcd.8">dhcpcd(8)</a></span> e <span class="plainlinks archwiki-template-man" title="$ man 5 dhcpcd.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/dhcpcd.conf.5">dhcpcd.conf(5)</a></span>.</div>
<h3><span class="mw-headline" id="Com_WIDE-DHCPv6">Com WIDE-DHCPv6</span></h3>
<p><a rel="nofollow" class="external text" href="http://wide-dhcpv6.sourceforge.net/">WIDE-DHCPv6</a> é uma implementação de código aberto do Protocolo de Configuração de Host Dinâmico para IPv6 (DHCPv6) originalmente desenvolvido pelo projeto KAME. Pode ser <a href="/title/Instala" class="mw-redirect" title="Instala">instalado</a> com o pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/wide-dhcpv6/">wide-dhcpv6</a></span><sup><small>AUR</small></sup>.
</p>
<p>Se você está usando <code>wide-dhcpv6</code>, edite <code>/etc/wide-dhcpv6/dhcp6c.conf</code>
</p>
<pre># use a interface conectada a sua WAN
interface WAN {
  send ia-pd 0;
};
 
id-assoc pd 0 {
  # use a interface conectada a sua LAN
  prefix-interface LAN {
    sla-id 1;
    sla-len 8;
  };
};
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> <code>sla-len</code> deve ser definido de forma que <code>(WAN-prefix) + (sla-len) = 64</code>. Neste caso, é configurado para um <code>/56</code> prefix 56+8=64. Para um prefixo <code>/64</code>, <code>sla-len</code> deve ser <code>0</code>.</div>
<p>O cliente wide-dhcpv6 pode ser <a href="/title/Iniciado/habilitado" class="mw-redirect" title="Iniciado/habilitado">iniciado/habilitado</a> usando o arquivo unit systemd <code>dhcp6c@<i>interface</i>.service</code>, sendo que <code><i>interface</i></code> é o nome da interface no arquivo de configuração. Por exemplo, para um nome de interface "WAN", use <code>dhcp6c@WAN.service</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> Leia <span class="plainlinks archwiki-template-man" title="$ man 8 dhcp6c">dhcp6c(8)</span> e <span class="plainlinks archwiki-template-man" title="$ man 5 dhcp6c.conf">dhcp6c.conf(5)</span> para mais informações.</div>
<h3><span class="mw-headline" id="systemd-networkd_2">systemd-networkd</span></h3>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/network/lan.network</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Network]
Address=192.168.1.1
IPv6PrefixDelegation=dhcpv6</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/network/wan.network</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Network]
DHCP=yes
IPForward=yes
IPv6Token=::1
IPv6AcceptRouterAdvertisements=2
IPv6AcceptRA=yes
IPv6DuplicateAddressDetection=1
IPv6PrivacyExtensions=kernel</pre>
<h3><span class="mw-headline" id="Outros_clientes">Outros clientes</span></h3>
<p><a href="/title/Dhclient_(Portugu%C3%AAs)" class="mw-redirect" title="Dhclient (Português)">dhclient</a> também pode solicitar um prefixo, mas atribuir esse prefixo ou partes desse prefixo a interfaces deve ser feito usando um script de saída do dhclient. Por exemplo: <a rel="nofollow" class="external free" href="https://github.com/jaymzh/v6-gw-scripts/blob/master/dhclient-ipv6">https://github.com/jaymzh/v6-gw-scripts/blob/master/dhclient-ipv6</a>.
</p>
<h2><span class="mw-headline" id="Desabilitar_IPv6">Desabilitar IPv6</span></h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> O Arch kernel tem suporte a IPv6 compilado diretamente e, portanto, um módulo não pode ser inserido na lista negra.</div>
<h3><span class="mw-headline" id="Desabilitar_funcionalidade">Desabilitar funcionalidade</span></h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> Desabilitar a pilha IPv6 pode quebrar certos programas que esperam que ela seja ativada. <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/46297">FS#46297</a>
</div>
<p>Adicionar <code>ipv6.disable=1</code> à linha do kernel desabilita toda a pilha IPv6, o que é provável o que você deseja se estiver tendo problemas. Veja <a href="/title/Par%C3%A2metros_do_kernel" class="mw-redirect" title="Parâmetros do kernel">Parâmetros do kernel</a> para mais informações.
</p>
<p>Como alternativa, adicionar <code>ipv6.disable_ipv6=1</code> manterá a pilha do IPv6 funcional, mas não atribuirá endereços IPv6 a nenhum de seus dispositivos de rede.
</p>
<p>Também é possível evitar a atribuição de endereços IPv6 a interfaces de rede específicas, adicionando a seguinte configuração de sysctl a <code>/etc/sysctl.d/40-ipv6.conf</code>:
</p>
<pre># Desabilita IPv6
net.ipv6.conf.all.disable_ipv6 = 1
net.ipv6.conf.<i>nic0</i>.disable_ipv6 = 1
...
net.ipv6.conf.<i>nicN</i>.disable_ipv6 = 1
</pre>
<p>Observe que você deve listar explicitamente todas as interfaces de destino, pois a desabilitação de <code>all.disable_ipv6</code> não se aplica a interfaces que já estão "up" quando as configurações de sysctl são aplicadas.
</p>
<p>Outra observação: se desabilitar o IPv6 por sysctl, você deve comentar os hosts IPv6 em seu <code>/etc/hosts</code>:
</p>
<pre>#&lt;endereço-ip&gt; &lt;hostnam.domínio.org&gt; &lt;hostname&gt;
127.0.0.1 localhost.localdomain localhost
#::1 localhost.localdomain localhost
</pre>
<p>caso contrário, pode haver alguns erros de conexão, pois os hosts são resolvidos para o endereço IPv6, que não pode ser acessado.
</p>
<h3><span class="mw-headline" id="Outros_programas">Outros programas</span></h3>
<p>Desabilitar a funcionalidade do IPv6 no kernel não impede que outros programas tentem usar o IPv6. Na maioria dos casos, isso é completamente inofensivo, mas se você tiver problemas com esse programa, consulte as páginas de manual do programa para obter uma maneira de desabilitar essa funcionalidade.
</p>
<h4><span class="mw-headline" id="dhcpcd_2">dhcpcd</span></h4>
<p><i>dhcpcd</i> vai continuar sem prejuízo tentar realizar uma solicitação IPv6 ao roteador. Para desabilitar isso, conforme documentado na <a href="/title/P%C3%A1gina_man" class="mw-redirect" title="Página man">página man</a> <span class="plainlinks archwiki-template-man" title="$ man 5 dhcpcd.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/dhcpcd.conf.5">dhcpcd.conf(5)</a></span>, adicione o seguinte ao <code>/etc/dhcpcd.conf</code>:
</p>
<pre>noipv6rs
noipv6
</pre>
<h4><span class="mw-headline" id="NetworkManager_3">NetworkManager</span></h4>
<p>Para desabilitar IPv6 no NetworkManager, clique com o botão direito no ícone de status de rede, e selecione <i>Editar conexões &gt; Cabeada &gt; </i>Nome da rede<i> &gt; Editar &gt; Configurações IPv6 &gt; Método &gt; Ignorado/Desabilitado</i>
</p>
<p>Então, clique em "Salvar".
</p>
<h4><span class="mw-headline" id="ntpd">ntpd</span></h4>
<p>Seguindo o conselho em <a href="/title/Systemd_(Portugu%C3%AAs)#Arquivos_drop-in" title="Systemd (Português)">systemd (Português)#Arquivos drop-in</a>, <a href="/title/Edite" class="mw-redirect" title="Edite">edite</a> <code>ntpd.service</code> para definir como o systemd o inicia.
</p>
<p>Isso criará um trecho drop-in que será executado em vez do padrão <code>ntpd.service</code>. O sinalizador <code>-4</code> impede que o IPv6 seja usado pelo daemon ntp. Coloque o seguinte no trecho drop-in:
</p>
<pre>[Service]
ExecStart=
ExecStart=/usr/bin/ntpd -4 -g -u ntp:ntp
</pre>
<p>que primeiro limpa o <code>ExecStart</code> anterior e, em seguida, o substitui por um que inclua o sinalizador <code>-4</code>.
</p>
<h3><span class="mw-headline" id="systemd-networkd_3">systemd-networkd</span></h3>
<p>O networkd possui suporte a desabilitação do IPv6 por interface. Quando a seção <code>[Network]</code> de uma unidade de rede possui <code>LinkLocalAddressing=ipv4</code> ou <code>LinkLocalAddressing=no</code>, o networkd não tentará configurar o IPv6 na correspondência interfaces.
</p>
<p>No entanto, observe que, mesmo ao usar a opção acima, o networkd ainda esperará receber anúncios do roteador se o IPv6 não estiver desabilitado globalmente. Se o tráfego IPv6 não estiver sendo recebido pela interface (por exemplo, devido a configurações sysctl ou ip6tables), ele permanecerá no estado de configuração e poderá causar tempos limites para os serviços aguardando a configuração completa da rede. Para evitar isso, a opção <code>IPv6AcceptRA=no</code> também deve ser definida na seção <code>[Network]</code>.
</p>
<h2><span class="mw-headline" id="Preferir_IPv4_a_IPv6">Preferir IPv4 a IPv6</span></h2>
<p>Descomente a seguinte linha no <code>/etc/gai.conf</code>:
</p>
<pre>#
#    Para sites que preferem conexões IPv4, mude a última linha para
#
precedence ::ffff:0:0/96  100
</pre>
<h2>
<span id="Veja_tamb.C3.A9m"></span><span class="mw-headline" id="Veja_também">Veja também</span>
</h2>
<ul>
<li>
<a rel="nofollow" class="external text" href="https://www.kernel.org/doc/html/latest/networking/ipv6.html">IPv6</a> - documentação do kernel.org</li>
<li>
<a rel="nofollow" class="external text" href="http://www.ipsidixit.net/2012/08/09/ipv6-temporary-addresses-and-privacy-extensions/">Endereços temporários IPv6</a> - um resumo sobre endereços temporários e extensões de privacidade</li>
<li>
<a rel="nofollow" class="external text" href="https://tldp.org/HOWTO/Linux+IPv6-HOWTO/ch03s02.html">IPv6 prefixes</a> - um resumo de tipos de prefixo</li>
<li>
<a rel="nofollow" class="external text" href="https://tldp.org/HOWTO/Linux+IPv6-HOWTO/ch11s02.html">net.ipv6 options</a> - documentação de parâmetros do kernel</li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="/title/Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="/title/Category:Networking_(Portugu%C3%AAs)" title="Category:Networking (Português)">Networking (Português)</a></li></ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=IPv6_(Portugu%C3%AAs)&amp;oldid=670700">https://wiki.archlinux.org/index.php?title=IPv6_(Português)&amp;oldid=670700</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 12 May 2021, at 12:56.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="/title/ArchWiki:Privacy_policy" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="/title/ArchWiki:About" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="/title/ArchWiki:General_disclaimer" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
