<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>fsck (Português) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Fsck_Português rootpage-Fsck_Português skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">fsck (Português)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<p><span></span>
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Status de tradução:</strong> Esse artigo é uma tradução de <a href="../en/Fsck.html" title="Fsck">fsck</a>. Data da última tradução: 2020-04-12. Você pode ajudar a sincronizar a tradução, se houver <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Fsck&amp;diff=0&amp;oldid=600603">alterações</a> na versão em inglês.</div>
<div class="archwiki-template-meta-related-articles-start">
<p>Artigos relacionados</p>
<ul>
<li><a href="../pt/Ext4.html" title="Ext4 (Português)">Ext4</a></li>
<li><a href="../pt/Btrfs.html" title="Btrfs (Português)">Btrfs</a></li>
<li><a href="../pt/Fstab.html" title="Fstab (Português)">fstab</a></li>
</ul>
</div>
<p><a href="https://en.wikipedia.org/wiki/Fsck" class="extiw" title="wikipedia:Fsck">fsck</a>, acrônimo do inglês de <i>"File System Check"</i>, que significa <i>"verificação do sistema de arquivos "</i> é usado para verificar e, opcionalmente, reparar um ou mais sistemas de arquivos Linux. Normalmente, o programa fsck irá tentar manusear sistemas de arquivos em diferentes discos físicos em paralelo para reduzir o tempo total necessário para verificar todos os sistemas de arquivos (veja: <span class="plainlinks archwiki-template-man" title="$ man 8 fsck"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/fsck.8">fsck(8)</a></span>).
</p>
<p>O <a href="../pt/Arch_boot_process.html" class="mw-redirect" title="Processo de inicialização do Arch">processo de inicialização do Arch Linux</a> convenientemente cuida dos procedimentos fsck por você e irá verificar todas as partições relevantes em seu(s) dispositivo(s) automaticamente em cada inicialização. Consequentemente, geralmente não há necessidade de recorrer à linha de comando.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Verifica%C3%A7%C3%A3o_durante_inicializa%C3%A7%C3%A3o_do_sistema"><span class="tocnumber">1</span> <span class="toctext">Verificação durante inicialização do sistema</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Mecanismo"><span class="tocnumber">1.1</span> <span class="toctext">Mecanismo</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#For%C3%A7ando_a_verifica%C3%A7%C3%A3o"><span class="tocnumber">1.2</span> <span class="toctext">Forçando a verificação</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4">
<a href="#Dicas_e_truques"><span class="tocnumber">2</span> <span class="toctext">Dicas e truques</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#Tentar_reparar_blocos_danificados"><span class="tocnumber">2.1</span> <span class="toctext">Tentar reparar blocos danificados</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Reparar_blocos_danificados_interativamente"><span class="tocnumber">2.2</span> <span class="toctext">Reparar blocos danificados interativamente</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Alterando_a_frequ%C3%AAncia_de_verifica%C3%A7%C3%A3o"><span class="tocnumber">2.3</span> <span class="toctext">Alterando a frequência de verificação</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Op%C3%A7%C3%B5es_do_fstab"><span class="tocnumber">2.4</span> <span class="toctext">Opções do fstab</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9">
<a href="#Solu%C3%A7%C3%A3o_de_problemas"><span class="tocnumber">3</span> <span class="toctext">Solução de problemas</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#N%C3%A3o_%C3%A9_poss%C3%ADvel_executar_fsck_em_uma_parti%C3%A7%C3%A3o_/usr_separada"><span class="tocnumber">3.1</span> <span class="toctext">Não é possível executar fsck em uma partição /usr separada</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#ext2fs_:_no_external_journal"><span class="tocnumber">3.2</span> <span class="toctext">ext2fs : no external journal</span></a></li>
</ul>
</li>
</ul>
</div>

<h2>
<span id="Verifica.C3.A7.C3.A3o_durante_inicializa.C3.A7.C3.A3o_do_sistema"></span><span class="mw-headline" id="Verificação_durante_inicialização_do_sistema">Verificação durante inicialização do sistema</span>
</h2>
<h3><span class="mw-headline" id="Mecanismo">Mecanismo</span></h3>
<p>Há duas opções:
</p>
<ol>
<li>mkinitcpio oferece a opção de executar fsck em seu sistema de arquivos raiz antes de montá-lo pelo hook do fsck. Ao fazer isto, você deverá montar a raiz em modo de escrita  pelo apropriado parâmetro do kernel <code>rw</code>.<a rel="nofollow" class="external autonumber" href="https://projects.archlinux.org/mkinitcpio.git/commit/?id=449b3e543c">[1]</a>
</li>
<li>systemd irá executar fsck em todos os sistemas de arquivos, exceto os que tenham um código execução definido superior a 0 (em <code>/etc/fstab</code> ou arquivo init definido pelo usuário). Para o sistema de arquivos raiz, ele também deve ser montado inicialmente em modo somente-leitura com o parâmetro do kernel <code>ro</code> para depois ser remontado em modo de escrita pelo <a href="../pt/Fstab.html" title="Fstab (Português)">fstab</a> (note que a opção de montagem <code>defaults</code> implica <code>rw</code>).</li>
</ol>
<p>A primeira opção descrita é a padrão, e é a obtida se você seguir o <a href="../pt/Installation_guide.html" class="mw-redirect" title="Guia de instalação">guia de instalação</a>. Se, ao invés dela, ocorrer a opção 2, você precisará remover o hook do fsck de <code>mkinitcpio.conf</code> e usar <code>ro</code> na linha de comando do kernel. O parâmetro do kernel <code>fsck.mode=skip</code> pode ser usado para certificar-se de que fsck está completamente desativado para ambas as opções.
</p>
<h3>
<span id="For.C3.A7ando_a_verifica.C3.A7.C3.A3o"></span><span class="mw-headline" id="Forçando_a_verificação">Forçando a verificação</span>
</h3>
<p>Se você usar o hook <code>base</code> do <a href="../pt/Mkinitcpio.html" title="Mkinitcpio (Português)">mkinitcpio</a>, será possível forçar a execução do fsck durante a inicialização passando <code>fsck.mode=force</code> como um <a href="../pt/Kernel_parameters.html" class="mw-redirect" title="Parâmetro do kernel">parâmetro do kernel</a>. Isto fará com que ele verifique cada sistema de arquivos existente na máquina.
</p>
<p>Alternativamente, systemd fornece <span class="plainlinks archwiki-template-man" title="$ man 8 systemd-fsck@.service"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-fsck%40.service.8">systemd-fsck@.service(8)</a></span>, que verifica todos os sistemas de arquivos configurados, os quais não foram verificados em initramfs. Contudo, verificar o sistema de arquivos raiz dessa maneira irá causar uma demora no processo de inicialização, já que o sistema de arquivos precisará ser remontado.
</p>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a><b>This article or section needs expansion.</b><a href="../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> É possível executar fsck pela initramfs usando o hook do systemd? (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Fsck_(Portugu%C3%AAs)">Talk:Fsck (Português)#</a>)</div>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Para aqueles acostumados em usar outras distribuições GNU/Linux, os truques antigos que consistiam em escrever um arquivo com o nome <code>forcefsck</code> na raiz do sistema de arquivos ou usando o comando <code>shutdown</code> com a opção <code>-F</code>, somente funcionavam no antigo <a href="../en/SysVinit.html" title="SysVinit">SysVinit</a> e em versões anteriores do <a href="https://en.wikipedia.org/wiki/Upstart" class="extiw" title="wikipedia:Upstart">Upstart</a>, e não estão mais funcionando com o <a href="../pt/Systemd.html" title="Systemd (Português)">systemd</a>. O método descrito acima, portanto, é a única que funciona com Arch Linux.</div>
<h2><span class="mw-headline" id="Dicas_e_truques">Dicas e truques</span></h2>
<h3><span class="mw-headline" id="Tentar_reparar_blocos_danificados">Tentar reparar blocos danificados</span></h3>
<p>Para automaticamente reparar setores danificados, execute:
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> Isto não irá perguntar se você deseja repará-los, já que a resposta padrão será <b>Sim</b> quando você executá-lo.</div>
<pre># fsck -a
</pre>
<h3><span class="mw-headline" id="Reparar_blocos_danificados_interativamente">Reparar blocos danificados interativamente</span></h3>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> Isto é útil quando um arquivo na partição de inicialização foi alterado, e o <i>journal</i> falhou em atualizá-lo corretamente. Neste caso, desmonte a partição de inicialização, e execute o seguinte código:</div>
<p>Para reparar setores danificados, execute:
</p>
<pre># fsck -r &lt;drive&gt;
</pre>
<h3>
<span id="Alterando_a_frequ.C3.AAncia_de_verifica.C3.A7.C3.A3o"></span><span class="mw-headline" id="Alterando_a_frequência_de_verificação">Alterando a frequência de verificação</span>
</h3>
<p>Por padrão, fsck verifica o sistema de arquivos a cada 30 inicializações (contadas individualmente para cada partição). Para alterar a frequência de verificação, execute:
</p>
<pre># tune2fs -c 20 /dev/sda1
</pre>
<p>Neste exemplo, <code>20</code> é o número de inicializações que ocorrerão entre duas verificações.
</p>
<p>Note que <code>1</code> fará com que a verificação ocorra em cada inicialização, ao passo que <code>0</code> faria com que a varredura deixasse de ocorrer.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> Se desejar ver a frequência e a atual contagem de montagens para uma partição específica, use:
<pre># dumpe2fs -h /dev/sda1 | grep -i 'mount count'
</pre>
</div>
<h3>
<span id="Op.C3.A7.C3.B5es_do_fstab"></span><span class="mw-headline" id="Opções_do_fstab">Opções do fstab</span>
</h3>
<p><a href="../pt/Fstab.html" title="Fstab (Português)">fstab</a> é um arquivo de configuração do sistema e é usado para informar ao Linux kernel quais partições (sistemas de arquivos) montar e onde estará a árvore do sistema de arquivos.
</p>
<p>Um entrada típica do <code>/etc/fstab</code> será algo semelhante a isto:
</p>
<pre>/dev/sda1   /         ext4      defaults       0  <b>1</b>
/dev/sda2   /other    ext4      defaults       0  <b>2</b>
/dev/sda3   /win      ntfs-3g   defaults       0  <b>0</b>
</pre>
<p>A sexta coluna (em negrito) é a opção do fsck.
</p>
<ul>
<li>0 = Não verificar.</li>
<li>1 = Primeiro sistema de arquivos (partição) passar pela verificação; <code>/</code> (partição raiz) deverá ser definida com 1.</li>
<li>2 = Todos os outros sistemas de arquivos a serem verificados.</li>
</ul>
<h2>
<span id="Solu.C3.A7.C3.A3o_de_problemas"></span><span class="mw-headline" id="Solução_de_problemas">Solução de problemas</span>
</h2>
<h3>
<span id="N.C3.A3o_.C3.A9_poss.C3.ADvel_executar_fsck_em_uma_parti.C3.A7.C3.A3o_.2Fusr_separada"></span><span class="mw-headline" id="Não_é_possível_executar_fsck_em_uma_partição_/usr_separada">Não é possível executar fsck em uma partição /usr separada</span>
</h3>
<ol>
<li>Certifique-se de que você definiu <a href="../pt/Mkinitcpio.html#/usr_como_uma_parti%C3%A7%C3%A3o_separada" title="Mkinitcpio (Português)">hooks</a> em <code>/etc/mkinitcpio.conf</code> e que você lembrou-se de recriar sua imagem initramfs após editar este arquivo.</li>
<li>Verifique seu <a href="../pt/Fstab.html" title="Fstab (Português)">fstab</a>! Somente a partição raiz precisa de "1" ao final da linha, todos os demais deverão conter "2" ou "0". Cuidadosamente verifique se há quaisquer erros de digitação.</li>
</ol>
<h3><span class="mw-headline" id="ext2fs_:_no_external_journal">ext2fs : no external journal</span></h3>
<p>Às vezes (devido à falta de energia), um sistema de arquivos ext(3/4) poderá corromper-se de modo que um reparo normal não será capaz de solucionar. Normalmente, haverá um prompt do fsck indicando que não pôde encontrar um <i>journal</i> externo. Neste caso, execute os seguintes comandos:
</p>
<p>Desmontar a partição baseada em seu diretório
</p>
<pre># umount &lt;diretório&gt;
</pre>
<p>Gravar um novo <i>journal</i> à partição
</p>
<pre># tune2fs -j /dev/&lt;partition&gt;
</pre>
<p>Executar fsck para reparar a partição
</p>
<pre># fsck -p /dev/&lt;partition&gt;
</pre>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../pt/Category:File_systems.html" title="Category:File systems (Português)">File systems (Português)</a></li>
<li><a href="../pt/Category:Commands.html" title="Category:Commands (Português)">Commands (Português)</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Fsck_(Portugu%C3%AAs)&amp;oldid=620879">https://wiki.archlinux.org/index.php?title=Fsck_(Português)&amp;oldid=620879</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 18 June 2020, at 14:12.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
