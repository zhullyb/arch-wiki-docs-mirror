<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>badblocks (Português) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Badblocks_Português rootpage-Badblocks_Português skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">badblocks (Português)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<p><span></span>
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Status de tradução:</strong> Esse artigo é uma tradução de <a href="/title/Badblocks" title="Badblocks">Badblocks</a>. Data da última tradução: 2019-10-20. Você pode ajudar a sincronizar a tradução, se houver <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Badblocks&amp;diff=0&amp;oldid=584714">alterações</a> na versão em inglês.</div>
<p><i>badblocks</i> é um programa para testar dispositivos de armazenamento para blocos defeituosos (em inglês, <i>bad blocks</i>).
</p>
<p>No caso de um HDD, todo o setor deve ser aposentado. Um setor é uma subdivisão de uma faixa em um dispositivo de armazenamento e setores que se tornaram ruins não podem ser usados porque ficaram danificados permanentemente (um setor defeituoso pode ter efeitos adversos variando de alterar uma letra em um arquivo de texto para causar um programa binário tem uma falha de segmentação).
</p>
<p><a href="/title/S.M.A.R.T." title="S.M.A.R.T.">S.M.A.R.T.</a> <i>(Self-Monitoring, Analysis, and Reporting Technology)</i> é um recurso de hardware presente em quase todos os HDD ainda em uso hoje em dia e em alguns casos pode automaticamente "aposentar" defeituosos setores de HDD. De qualquer forma, S.M.A.R.T. espera apenas passivamente por erros, enquanto os blocos defeituosos escrevem padrões simples para cada bloco de um dispositivo e, em seguida, os lê e verifica procurando por áreas danificadas. (Assim como o memtest86* faz com a RAM.)
</p>
<p>Isso pode ser feito em um modo de gravação <i>(write-mode)</i> destrutivo que efetivamente <a href="/title/Securely_wipe_disk" title="Securely wipe disk">apaga</a> o dispositivo (faça backup!) ou em modos não-destrutivos de leitura-gravação (backup aconselhável também!) e somente leitura.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Instala%C3%A7%C3%A3o"><span class="tocnumber">1</span> <span class="toctext">Instalação</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Fidelidade_do_dispositivo_de_armazenamento"><span class="tocnumber">2</span> <span class="toctext">Fidelidade do dispositivo de armazenamento</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Compara%C3%A7%C3%B5es_com_outros_programas"><span class="tocnumber">3</span> <span class="toctext">Comparações com outros programas</span></a></li>
<li class="toclevel-1 tocsection-4">
<a href="#Testando_por_setores_ruins"><span class="tocnumber">4</span> <span class="toctext">Testando por setores ruins</span></a>
<ul>
<li class="toclevel-2 tocsection-5">
<a href="#Teste_de_leitura-grava%C3%A7%C3%A3o_(aviso:destrutivo)"><span class="tocnumber">4.1</span> <span class="toctext">Teste de leitura-gravação (aviso:destrutivo)</span></a>
<ul>
<li class="toclevel-3 tocsection-6">
<a href="#Defina_padr%C3%A3o_de_teste_espec%C3%ADfico"><span class="tocnumber">4.1.1</span> <span class="toctext">Defina padrão de teste específico</span></a>
<ul>
<li class="toclevel-4 tocsection-7"><a href="#Padr%C3%A3o_aleat%C3%B3rio"><span class="tocnumber">4.1.1.1</span> <span class="toctext">Padrão aleatório</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2 tocsection-8"><a href="#Teste_de_leitura-grava%C3%A7%C3%A3o_(n%C3%A3o-destrutivo)"><span class="tocnumber">4.2</span> <span class="toctext">Teste de leitura-gravação (não-destrutivo)</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9">
<a href="#Fa%C3%A7a_o_sistema_de_arquivos_incorporar_setores_ruins"><span class="tocnumber">5</span> <span class="toctext">Faça o sistema de arquivos incorporar setores ruins</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#Durante_a_verifica%C3%A7%C3%A3o_de_sistema_de_arquivos"><span class="tocnumber">5.1</span> <span class="toctext">Durante a verificação de sistema de arquivos</span></a></li>
<li class="toclevel-2 tocsection-11">
<a href="#Antes_da_cria%C3%A7%C3%A3o_do_sistema_de_arquivos"><span class="tocnumber">5.2</span> <span class="toctext">Antes da criação do sistema de arquivos</span></a>
<ul>
<li class="toclevel-3 tocsection-12"><a href="#Ext4"><span class="tocnumber">5.2.1</span> <span class="toctext">Ext4</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#Tamanho_do_bloco"><span class="tocnumber">5.2.2</span> <span class="toctext">Tamanho do bloco</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-14"><a href="#Veja_tamb%C3%A9m"><span class="tocnumber">6</span> <span class="toctext">Veja também</span></a></li>
</ul>
</div>

<h2>
<span id="Instala.C3.A7.C3.A3o"></span><span class="mw-headline" id="Instalação">Instalação</span>
</h2>
<p><a href="/title/Instale" class="mw-redirect" title="Instale">Instale</a> o pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=e2fsprogs">e2fsprogs</a></span>.
</p>
<p>Veja <span class="plainlinks archwiki-template-man" title="$ man 8 badblocks"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/badblocks.8">badblocks(8)</a></span> para o uso.
</p>
<h2><span class="mw-headline" id="Fidelidade_do_dispositivo_de_armazenamento">Fidelidade do dispositivo de armazenamento</span></h2>
<p>Embora não exista uma regra firme, é comum pensar que uma nova unidade deve ter zero setores defeituosos. Com o passar do tempo, setores defeituosos se desenvolverão e, embora possam ser definidos para o sistema de arquivos para que sejam evitados, o uso contínuo da unidade geralmente resultará na formação de setores defeituosos adicionais e normalmente é o prenúncio de sua eventual morte. A substituição do dispositivo é recomendada.
</p>
<h2>
<span id="Compara.C3.A7.C3.B5es_com_outros_programas"></span><span class="mw-headline" id="Comparações_com_outros_programas">Comparações com outros programas</span>
</h2>
<p>Prática recomendada típica para testar um dispositivo de armazenamento para setores defeituosos é usar o programa de teste do fabricante. A maioria dos fabricantes possui programas que fazem isso. O principal motivo para isso é que os fabricantes geralmente têm seus padrões embutidos nos programas de teste que lhe dirão se a unidade precisa ser substituída ou não. A ressalva aqui é que alguns programas de teste de fabricantes não imprimem resultados de teste completos e permitem que um certo número de setores defeituosos diga apenas se eles passam ou não. Os programas de fabricantes, no entanto, são geralmente mais rápidos do que os <i>badblocks</i>, por vezes, uma quantidade razoável.
</p>
<h2><span class="mw-headline" id="Testando_por_setores_ruins">Testando por setores ruins</span></h2>
<p>Para testar setores defeituosos no Linux, o programa <i>badblocks</i> é normalmente usado. <i>badblocks</i> tem vários modos diferentes para detectar setores defeituosos.
</p>
<h3>
<span id="Teste_de_leitura-grava.C3.A7.C3.A3o_.28aviso:destrutivo.29"></span><span class="mw-headline" id="Teste_de_leitura-gravação_(aviso:destrutivo)">Teste de leitura-gravação (aviso:destrutivo)</span>
</h3>
<p>Este teste é principalmente para testar novas unidades e é um teste de leitura/gravação. À medida que o padrão é gravado em todos os blocos acessíveis, o dispositivo obtém efetivamente <a href="/title/Securely_wipe_disk" title="Securely wipe disk">apagado</a>. O padrão é um teste extensivo com quatro passagens usando quatro padrões diferentes: 0xaa (10101010), 0x55 (01010101), 0xff (11111111) e 0x00 (00000000). Para alguns dispositivos, isso levará alguns dias para ser concluído.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># badblocks -wsv /dev/<i>dispositivo</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Checking for bad blocks in read-write mode
From block 0 to 488386583
Testing with pattern <b>0xaa</b>: done
Reading and comparing: done
Testing with pattern <b>0x55</b>: done
Reading and comparing: done
Testing with pattern <b>0xff</b>: 22.93% done, 4:09:55 elapsed. (0/0/0 errors)
[...]
Testing with pattern <b>0x00</b>: done
Reading and comparing: done
Pass completed, 0 bad blocks found. (0/0/0 errors)
</pre>
<p>Opções:
</p>
<dl>
<dd>
<code>-b <i>número</i></code>: especifica o tamanho do bloco do disco rígido que pode melhorar significativamente o tempo de teste. (<code># tune2fs -l <i>partição</i></code>)</dd>
<dd>
<code>-w</code>: faz um teste de gravação destrutivo</dd>
<dd>
<code>-s</code>: mostra o progresso</dd>
<dd>
<code>-v</code>: torna a saída "verbosa" e emite setores defeituosos detectados para a <i>stdout</i>
</dd>
</dl>
<p>Opções adicionais que você pode considerar:
</p>
<dl>
<dd>
<code>-p <i>número</i></code>: executa <i>número</i> testes extensos de passagens de iterações sequenciais</dd>
<dd>
<code>-o <i>/caminho/do/arquivo-de-saída</i></code>: emite setores defeituosos para <i>arquivo-de-saída</i> em vez da stdout</dd>
<dd>
<code>-t <i>padrão_de_teste</i></code>: especifica um padrão. Veja abaixo.</dd>
</dl>
<h4>
<span id="Defina_padr.C3.A3o_de_teste_espec.C3.ADfico"></span><span class="mw-headline" id="Defina_padrão_de_teste_específico">Defina padrão de teste específico</span>
</h4>
<p><b>Da página man:</b> "O <i>padrão_de_teste</i> pode ser um valor numérico entre 0 e um ULONG_MAX-1 inclusive [...]."
</p>
<h5>
<span id="Padr.C3.A3o_aleat.C3.B3rio"></span><span class="mw-headline" id="Padrão_aleatório">Padrão aleatório</span>
</h5>
<p>Pode-se fazer com que blocos defeituosos sejam repetidamente gravados com um único "padrão aleatório" com a opção <code>-t random</code>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># badblocks -wsv -t random /dev/<i>dispositivo</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Checking for bad blocks in read-write mode
From block 0 to 488386583
Testing with <b>random pattern</b>: done
Reading and comparing: done
Pass completed, 0 bad blocks found. (0/0/0 errors)</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> Isso não é seguro para fins criptográficos. Um "padrão aleatório" é uma contradição em si. Como <i>badblocks</i> não (como <a href="https://en.wikipedia.org/wiki/pt:/dev/random" class="extiw" title="wikipedia:pt:/dev/random">/dev/urandom</a>) aplica procedimentos sofisticados para reutilizar a entropia, mas simplesmente repete um "padrão aleatório", ele não deve ser usado onde dados aleatórios seriam necessários, por exemplo, para <a href="/title/Securely_wipe_disk#Preparations_for_block_device_encryption" title="Securely wipe disk">criptografia de dispositivos de bloco</a>.</div>
<h3>
<span id="Teste_de_leitura-grava.C3.A7.C3.A3o_.28n.C3.A3o-destrutivo.29"></span><span class="mw-headline" id="Teste_de_leitura-gravação_(não-destrutivo)">Teste de leitura-gravação (não-destrutivo)</span>
</h3>
<p>Este teste foi projetado para dispositivos com dados já existentes. Um teste de leitura-gravação não destrutivo faz um backup do conteúdo original de um setor antes de testar com um único padrão aleatório e, em seguida, restaura o conteúdo do backup. Este é um teste de passagem única e é útil como um teste de manutenção geral.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># badblocks -nsv /dev/<i>dispositivo</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Checking for bad blocks in non-destructive read-write mode
From block 0 to 488386583
Checking for bad blocks (non-destructive read-write test)
Testing with <b>random pattern</b>: done
Pass completed, 0 bad blocks found. (0/0/0 errors)</pre>
<p>A opção <code>-n</code> significa um teste de leitura-gravação não destrutivo.
</p>
<h2>
<span id="Fa.C3.A7a_o_sistema_de_arquivos_incorporar_setores_ruins"></span><span class="mw-headline" id="Faça_o_sistema_de_arquivos_incorporar_setores_ruins">Faça o sistema de arquivos incorporar setores ruins</span>
</h2>
<p>Para não usar setores defeituosos, eles devem ser conhecidos pelo sistema de arquivos.
</p>
<h3>
<span id="Durante_a_verifica.C3.A7.C3.A3o_de_sistema_de_arquivos"></span><span class="mw-headline" id="Durante_a_verificação_de_sistema_de_arquivos">Durante a verificação de sistema de arquivos</span>
</h3>
<p>A incorporação de setores defeituosos pode ser feita usando o utilitário de verificação do sistema de arquivos (<code>fsck</code>). Pode-se dizer ao <code>fsck</code> para usar <i>badblocks</i> durante um teste. Para fazer um teste <b>leitura-gravação</b> (não destrutivo) e ter os setores defeituosos tornados conhecidos para o sistema de arquivos:
</p>
<pre># fsck -vcck /dev/<i>dispositivo-PARTIÇÃO</i>
</pre>
<p>A opção <code>-cc</code> fala para executar <code>fsck</code> no modo de teste <b>não-destrutivo</b>, o <code>-v</code> diz ao <code>fsck</code> para mostre sua saída, e a opção <code>-k</code> preserva setores defeituosos antigos que foram detectados.
</p>
<p>Para fazer um teste <b>somente leitura</b> (não recomendado):
</p>
<pre># fsck -vck /dev/<i>dispositivo-PARTIÇÃO</i>
</pre>
<h3>
<span id="Antes_da_cria.C3.A7.C3.A3o_do_sistema_de_arquivos"></span><span class="mw-headline" id="Antes_da_criação_do_sistema_de_arquivos">Antes da criação do sistema de arquivos</span>
</h3>
<p>Como alternativa, isso pode ser feito antes da criação do sistema de arquivos.
</p>
<p>Se <i>badblocks</i> for executado sem a opção <code>-o</code>, os setores defeituosos serão impressos apenas no stdout.
</p>
<p>Exemplo de saída para erros de leitura no começo do disco:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># badblocks -wsv /dev/<i>dispositivo</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[...]
Testing with pattern <b>0xff</b>: done
Reading and comparing:
[...]
37584
37585 0.84% done, 7:31:08 elapsed. (0/0/527405 errors)
37586
[...]
done
Testing with pattern <b>0x00</b>:
Reading and comparing:
[...]
37584
37585
[...]
done
Pass completed, 527405 bad blocks found. (0/0/527405 errors)</pre>
<p>Para passar confortavelmente a saída de erro de <i>badblocks</i> para o sistema de arquivos, deve-se gravar em um arquivo.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># badblocks -wsv <b>-o</b> /root/<i>badblocks.txt</i> /dev/<i>dispositivo</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Checking for bad blocks in read-write mode
From block 0 to 488386583
Testing with pattern <b>0xaa</b>: done
Reading and comparing:   6.36% done, 0:51 elapsed. (0/0/14713 errors)
[...]
Testing with pattern <b>0x00</b>: done
Reading and comparing: done
Pass completed, 527405 bad blocks found. (0/0/527405 errors)</pre>
<p>Então, (re)crie o sistema de arquivos com a informação:
</p>
<pre># mkfs.<i>tipo-sistema-de-arquivos</i> <b>-l</b> /root/<i>badblocks.txt</i> /dev/<i>dispositivo</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> O sentido de erros <code>0/0/527405</code> é <i>número_de_erros_de_leitura</i> / <i>número_de_erros_de_escrita</i> / <i>número_de_erros_de_corrupção</i>.</div>
<h4><span class="mw-headline" id="Ext4">Ext4</span></h4>
<p>Da página de manual <span class="plainlinks archwiki-template-man" title="$ man 8 mke2fs"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/mke2fs.8">mke2fs(8)</a></span>:
</p>
<dl><dd>Note que os números de bloco na lista de blocos defeituosos devem ser gerados usando o mesmo tamanho de bloco usado por <i>mke2fs</i>. Como resultado, a opção <code>-c</code> para <i>mke2fs</i> é um método muito mais simples e menos propenso a erros de verificar um disco em busca de blocos defeituosos antes de formatá-lo.</dd></dl>
<p>Então, o método recomendado é usar:
</p>
<pre># mkfs.ext4 -c /dev/<i>dispositivo</i>
</pre>
<p>Use <code>-cc</code> para fazer um teste de leitura-gravação de blocos defeituosos.
</p>
<h4><span class="mw-headline" id="Tamanho_do_bloco">Tamanho do bloco</span></h4>
<p>Primeiramente, encontre o <b>tamanho de bloco</b> do sistema de arquivos. Por exemplo, para sistemas de arquivos ext#:
</p>
<pre># dumpe2fs /dev/<i>dispositivo-PARTIÇÃO</i> | grep 'Block size'
</pre>
<p>Alimente isso ao <i>badblocks</i>:
</p>
<pre># badblocks -b <i>tamanho de bloco</i>
</pre>
<h2>
<span id="Veja_tamb.C3.A9m"></span><span class="mw-headline" id="Veja_também">Veja também</span>
</h2>
<ul><li>
<a rel="nofollow" class="external text" href="https://www.pcguide.com/ts/x/comp/hdd/errorsBadSectors-c.html">Meu disco rígido tem setores defeituosos ou está desenvolvendo setores defeituosos ao longo do tempo</a> (em inglês)</li></ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="/title/Special:Categories" title="Special:Categories">Categories</a>: <ul>
<li><a href="/title/Category:Hardware_detection_and_troubleshooting_(Portugu%C3%AAs)" title="Category:Hardware detection and troubleshooting (Português)">Hardware detection and troubleshooting (Português)</a></li>
<li><a href="/title/Category:Commands_(Portugu%C3%AAs)" title="Category:Commands (Português)">Commands (Português)</a></li>
</ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Badblocks_(Portugu%C3%AAs)&amp;oldid=668502">https://wiki.archlinux.org/index.php?title=Badblocks_(Português)&amp;oldid=668502</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 8 May 2021, at 09:59.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="/title/ArchWiki:Privacy_policy" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="/title/ArchWiki:About" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="/title/ArchWiki:General_disclaimer" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
