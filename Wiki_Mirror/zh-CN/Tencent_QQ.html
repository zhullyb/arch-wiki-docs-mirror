<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Tencent QQ (简体中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Tencent_QQ_简体中文 rootpage-Tencent_QQ_简体中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Tencent QQ (简体中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<p>QQ 是腾讯公司开发的即时通讯软件，为 ICQ 的仿制品，是中国最流行的 IM 软件。本页面列出了 Arch Linux 使用 QQ 的各种解决方案。
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#%E5%AE%98%E6%96%B9%E7%89%88%E6%9C%AC"><span class="tocnumber">1</span> <span class="toctext">官方版本</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#%E8%99%9A%E6%8B%9F%E6%9C%BA"><span class="tocnumber">2</span> <span class="toctext">虚拟机</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#Wine"><span class="tocnumber">3</span> <span class="toctext">Wine</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Deepin_QQ/TIM"><span class="tocnumber">3.1</span> <span class="toctext">Deepin QQ/TIM</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Crossover"><span class="tocnumber">3.2</span> <span class="toctext">Crossover</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#AppImage"><span class="tocnumber">3.3</span> <span class="toctext">AppImage</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#%E6%B8%85%E9%A3%8E%E8%80%81%E5%B8%88%E7%9A%84_Wine_QQ_%E6%96%B9%E6%A1%88"><span class="tocnumber">3.4</span> <span class="toctext">清风老师的 Wine QQ 方案</span></a></li>
<li class="toclevel-2 tocsection-8">
<a href="#%E6%89%8B%E5%8A%A8_Wine_%E6%96%B9%E6%A1%88"><span class="tocnumber">3.5</span> <span class="toctext">手动 Wine 方案</span></a>
<ul>
<li class="toclevel-3 tocsection-9"><a href="#QQ_%E8%BD%BB%E8%81%8A%E7%89%88"><span class="tocnumber">3.5.1</span> <span class="toctext">QQ 轻聊版</span></a></li>
<li class="toclevel-3 tocsection-10">
<a href="#TIM"><span class="tocnumber">3.5.2</span> <span class="toctext">TIM</span></a>
<ul>
<li class="toclevel-4 tocsection-11"><a href="#%E7%94%9F%E6%88%90%E5%9B%BE%E6%A0%87"><span class="tocnumber">3.5.2.1</span> <span class="toctext">生成图标</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-12">
<a href="#%E6%8F%90%E7%A4%BA%E4%B8%8E%E6%8A%80%E5%B7%A7"><span class="tocnumber">4</span> <span class="toctext">提示与技巧</span></a>
<ul>
<li class="toclevel-2 tocsection-13"><a href="#HiDPI_%E6%94%AF%E6%8C%81"><span class="tocnumber">4.1</span> <span class="toctext">HiDPI 支持</span></a></li>
<li class="toclevel-2 tocsection-14">
<a href="#%E5%B9%B3%E9%93%BA%E5%BC%8F%E7%AA%97%E5%8F%A3%E7%AE%A1%E7%90%86%E5%99%A8%E4%B8%8B%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="tocnumber">4.2</span> <span class="toctext">平铺式窗口管理器下的配置</span></a>
<ul>
<li class="toclevel-3 tocsection-15"><a href="#Awesome"><span class="tocnumber">4.2.1</span> <span class="toctext">Awesome</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="#i3"><span class="tocnumber">4.2.2</span> <span class="toctext">i3</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-17">
<a href="#%E7%96%91%E9%9A%BE%E8%A7%A3%E7%AD%94"><span class="tocnumber">5</span> <span class="toctext">疑难解答</span></a>
<ul>
<li class="toclevel-2 tocsection-18"><a href="#%E6%97%A0%E6%B3%95%E8%B0%83%E7%94%A8%E8%BE%93%E5%85%A5%E6%B3%95"><span class="tocnumber">5.1</span> <span class="toctext">无法调用输入法</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#%E5%AD%97%E4%BD%93%E9%85%8D%E7%BD%AE"><span class="tocnumber">5.2</span> <span class="toctext">字体配置</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#%E6%96%87%E4%BB%B6%E8%A2%AB%E5%8D%A0%E7%94%A8"><span class="tocnumber">5.3</span> <span class="toctext">文件被占用</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#xfce4%EF%BC%88xfwm4%EF%BC%89%E4%B8%8B%E6%97%A0%E6%B3%95%E8%BE%93%E5%85%A5%E8%A1%A8%E6%83%85"><span class="tocnumber">5.4</span> <span class="toctext">xfce4（xfwm4）下无法输入表情</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#%E5%9C%A8%E9%9D%9E%E4%B8%AD%E6%96%87_locale_%E4%B8%8B%E6%97%A0%E6%B3%95%E8%BE%93%E5%85%A5%E4%B8%AD%E6%96%87"><span class="tocnumber">5.5</span> <span class="toctext">在非中文 locale 下无法输入中文</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-23"><a href="#%E5%8F%82%E9%98%85"><span class="tocnumber">6</span> <span class="toctext">参阅</span></a></li>
</ul>
</div>

<h2>
<span id=".E5.AE.98.E6.96.B9.E7.89.88.E6.9C.AC"></span><span class="mw-headline" id="官方版本">官方版本</span>
</h2>
<p>官方版本已经可用。要使用官方版本，安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/linuxqq/">linuxqq</a></span><sup><small>AUR</small></sup>。
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 官方版本提供的是普通 QQ，TIM 没有官方版本。如果要使用 TIM，请使用 <a href="#Wine">wine 方案</a>。</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 官方版本功能不全，界面简陋，如果需要使用缺失的功能或更好看的界面，请使用 <a href="#Wine">wine 方案</a>。</div>
<p>9.3.9的强制更新会导致wine-qq自动更新。
</p>
<h2>
<span id=".E8.99.9A.E6.8B.9F.E6.9C.BA"></span><span class="mw-headline" id="虚拟机">虚拟机</span>
</h2>
<p>您可以在虚拟机中运行一个完整的 Windows 系统，并在此中运行 QQ。相比于其他的方案，这种方案出错的几率是最小的，缺点是占用的资源较多。
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>提示：</strong> 
<ul>
<li>根据<a rel="nofollow" class="external text" href="https://www.microsoft.com/en-us/Useterms/OEM/Windows/10Mobile/UseTerms_OEM_Windows_10Mobile_ChineseSimplified.htm">许可条款</a>，在每个虚拟设备上运行 Windows 都需要单独的授权。但您可以选择使用<a rel="nofollow" class="external text" href="https://developer.microsoft.com/en-us/microsoft-edge/tools/vms/">微软提供的虚拟机专用系统</a>（免费使用）。</li>
<li>如果您使用 VirtualBox，建议您开启<b><a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch04.html#seamlesswindows">无缝模式</a></b>，这个功能能让您在宿主机的桌面下无缝操作虚拟机中的窗口。</li>
</ul>
</div>
<h2><span class="mw-headline" id="Wine">Wine</span></h2>
<p><a href="../zh-CN/Wine.html" title="Wine (简体中文)">Wine</a> 是类 UNIX 系统下运行微软 Windows 程序的"兼容层"，可以用它模拟 Windows 环境来运行 QQ/TIM。
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>警告：</strong> Wine QQ/TIM 在平铺式窗口管理器下的样式可能会大规模失控，需要进行<a href="#%E5%B9%B3%E9%93%BA%E5%BC%8F%E7%AA%97%E5%8F%A3%E7%AE%A1%E7%90%86%E5%99%A8%E4%B8%8B%E7%9A%84%E9%85%8D%E7%BD%AE">额外的配置</a>。</div>
<h3>
<span id="Deepin_QQ.2FTIM"></span><span class="mw-headline" id="Deepin_QQ/TIM">Deepin QQ/TIM</span>
</h3>
<p>Deepin QQ/TIM 是 wine 中相对成熟的方案。几乎开箱即用，bug 较少。可从AUR(可以选择 <a rel="nofollow" class="external text" href="https://www.archlinuxcn.org/archlinux-cn-repo-and-mirror/">ArchLinux CN 源</a>)安装:
</p>
<p>普通 QQ：<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/com.qq.im.deepin/">com.qq.im.deepin</a></span><sup><small>AUR</small></sup> 
</p>
<p>TIM：<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/com.qq.office.deepin/">com.qq.office.deepin</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">断开的链接</a>：package not found]</sup> ，若想使用较新的可选： <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/com.qq.tim.spark/">com.qq.tim.spark</a></span><sup><small>AUR</small></sup> 。
</p>
<p>或者可以安装 Light 版：<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/deepin.com.qq.im.light/">deepin.com.qq.im.light</a></span><sup><small>AUR</small></sup> 。
</p>
<p>如果是 KDE/Plasma 桌面，见 <a href="../en/Deepin-wine.html#Deepin-wine_applications_fails_to_start" title="Deepin-wine">Deepin-wine#Deepin-wine applications fails to start</a>。
</p>
<p>如果是 N 卡用户，可能需要用安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lib32-nvidia-libgl">lib32-nvidia-libgl</a></span><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">断开的链接</a>：replaced by <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lib32-nvidia-utils">lib32-nvidia-utils</a></span>]</sup> 才能使用。
</p>
<h3><span class="mw-headline" id="Crossover">Crossover</span></h3>
<p>可以使用 <a href="../en/CrossOver.html" title="CrossOver">CrossOver</a> 运行 QQ、TM2013 和 TIM。更多详情可以参阅 <a rel="nofollow" class="external text" href="https://www.codeweavers.com/compatibility">CrossOver 的兼容性列表</a>。
</p>
<h3><span class="mw-headline" id="AppImage">AppImage</span></h3>
<p>AppImage 是一种把应用打包成单一文件的格式。您可以在<a rel="nofollow" class="external text" href="https://sourceforge.net/projects/wine-qq-tim/files/">sourceforge</a>下载到封装好的 Wine QQ/TIM。只需要赋予可执行权限即可使用。由于 AppImage 格式附带了程序所需要的依赖，所以这种方式受系统中其他组件版本的影响最小。
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 由于 AppImage 不使用系统的 Wine，所以对 Wine 的调整可能无效，例如<a href="#HiDPI_%E6%94%AF%E6%8C%81">#HiDPI 支持</a>。</div>
<h3>
<span id=".E6.B8.85.E9.A3.8E.E8.80.81.E5.B8.88.E7.9A.84_Wine_QQ_.E6.96.B9.E6.A1.88"></span><span class="mw-headline" id="清风老师的_Wine_QQ_方案">清风老师的 Wine QQ 方案</span>
</h3>
<p>您也可以使用<a rel="nofollow" class="external text" href="http://phpcj.org/wineqq/">清风老师</a>提供的 Wine QQ 方案。
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 安装成功之后要取消勾选 QQ 的自动更新，以免自动更新导致不可用。
</div>
<h3>
<span id=".E6.89.8B.E5.8A.A8_Wine_.E6.96.B9.E6.A1.88"></span><span class="mw-headline" id="手动_Wine_方案">手动 Wine 方案</span>
</h3>
<h4>
<span id="QQ_.E8.BD.BB.E8.81.8A.E7.89.88"></span><span class="mw-headline" id="QQ_轻聊版">QQ 轻聊版</span>
</h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 此方案使用 QQ 轻聊版 6.7，更高版本在当前 wine 版本需要<a rel="nofollow" class="external text" href="https://blog.lilydjwg.me/2015/10/26/run-tencent-qq-lite-with-wine.186640.html">额外的调整</a>才能安装。</div>
<p>安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=winetricks">winetricks</a></span>、<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wine">wine</a></span>。创建 <code>qqlight.verb</code> 如下：
</p>
<pre>w_metadata qqlight apps \
 title="QQ Light" \
 publisher="Tencent" \
 year="2015" \
 media="download" \
 file1="QQ6.7Light.exe" \
 installed_exe1="$W_PROGRAMS_X86_WIN/Tencent/QQ/Bin/QQ.exe" \
 homepage="<a rel="nofollow" class="external free" href="https://www.qq.com">https://www.qq.com</a>" \
 unattended="no"

load_qqlight()
{
    w_download <a rel="nofollow" class="external free" href="https://dldir1.qq.com/qqfile/qq/QQ6.7Light/13466/QQ6.7Light.exe">https://dldir1.qq.com/qqfile/qq/QQ6.7Light/13466/QQ6.7Light.exe</a> e1e1ff2bf6461c08047d0a01927a43c5a0746bdf

    if w_workaround_wine_bug 29636 "Installing native riched20 to work around crash bug"
    then
        w_call riched20
    fi

    if w_workaround_wine_bug 34566 "Installing native ctf to work around crash"
    then
        w_call msctf
    fi

    # Make sure chinese fonts are available
    w_call fakechinese

    # uses mfc42u.dll
    w_call mfc42

    cd "$W_CACHE/$W_PACKAGE"
    w_try "$WINE" "$file1"

    # fix crash after login
    mkdir -p ~/.local/share/wineprefixes/qqlight/drive_c/users/$LOGNAME/Application\ Data/Tencent/QQ/Misc/com.tencent.wireless/SDK
    chmod 000 ~/.local/share/wineprefixes/qqlight/drive_c/users/$LOGNAME/Application\ Data/Tencent/QQ/Misc/com.tencent.wireless/SDK

    w_declare_exe "$W_PROGRAMS_X86_WIN\\Tencent\\QQ\\Bin" QQ.exe
}
</pre>
<p>运行 <code>winetricks</code> 安装：
</p>
<pre>$ winetricks qqlight.verb
</pre>
<p>安装完成后通过 <code>wineconsole</code> 启动：
</p>
<pre>$ wineconsole .wine/drive_c/run-qqlight.bat
</pre>
<h4><span class="mw-headline" id="TIM">TIM</span></h4>
<p>安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wine">wine</a></span>、<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wine-gecko">wine-gecko</a></span> 和 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wine-mono">wine-mono</a></span>。
</p>
<p>执行 <code>winetricks riched20</code>，也可使用 <code>winecfg</code> 设置函数库顶替。
</p>
<p>可能需要配置中文字体显示，见<a href="#%E5%AD%97%E4%BD%93%E9%85%8D%E7%BD%AE">#字体配置</a>。
</p>
<p>安装 TIM。
</p>
<h5>
<span id=".E7.94.9F.E6.88.90.E5.9B.BE.E6.A0.87"></span><span class="mw-headline" id="生成图标">生成图标</span>
</h5>
<p>安装的 TIM 可能没有在程序列表中生成图标。若要自行添加图标，新建 <code>tim.desktop</code> 文件，写入以下内容：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">tim.desktop</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Desktop Entry]
Encoding=UTF-8
Version=1
Name=TIM
Comment=Tencent TIM
Exec=wine '~/.wine/drive_c/Program Files/Tencent/TIM/Bin/TIM.exe'
Icon=~/.wine/drive_c/Program Files/Tencent/TIM/TIMUninst.ico
Terminal=false
Type=Application
Categories=Network;</pre>
<p>将 <code>tim.desktop</code> 移动到 <code>~/.local/share/applications</code> 或 <code>/usr/share/applications</code>文件夹下即可。
</p>
<h2>
<span id=".E6.8F.90.E7.A4.BA.E4.B8.8E.E6.8A.80.E5.B7.A7"></span><span class="mw-headline" id="提示与技巧">提示与技巧</span>
</h2>
<h3>
<span id="HiDPI_.E6.94.AF.E6.8C.81"></span><span class="mw-headline" id="HiDPI_支持">HiDPI 支持</span>
</h3>
<p>在 HiDPI 显示器上，QQ/TIM 的界面可能会过小。在较新版本的 QQ/TIM 中已经加入了对 HiDPI 的支持。只需手动调整 Wine 的 DPI 即可。
</p>
<p>执行 <code>winecfg</code>，在打开的窗口中切换到<b>显示</b>选项卡并调整 DPI。
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 如果您使用的不是默认的 Wine 容器（例如使用了deepin QQ/TIM），那么需要在执行 <code>winecfg</code> 时指定<code>WINEPREFIX</code> 变量。例如<code>env WINEPREFIX=$HOME/.deepinwine/Deepin-QQ deepin-wine winecfg</code> 或是 <code>env WINEPREFIX=$HOME/.deepinwine/Deepin-TIM deepin-wine winecfg</code>。</div>
<h3>
<span id=".E5.B9.B3.E9.93.BA.E5.BC.8F.E7.AA.97.E5.8F.A3.E7.AE.A1.E7.90.86.E5.99.A8.E4.B8.8B.E7.9A.84.E9.85.8D.E7.BD.AE"></span><span class="mw-headline" id="平铺式窗口管理器下的配置">平铺式窗口管理器下的配置</span>
</h3>
<h4><span class="mw-headline" id="Awesome">Awesome</span></h4>
<p>Wine QQ/TM 在平铺式窗口管理器下可能会失控，需要进行一些配置。
</p>
<p>下面的配置有这些作用：
</p>
<ul><li>将所有 TM 的窗口设置为浮动。</li></ul>
<ul><li>清除不需要的窗口边框、避免菜单弹出时焦点移动到菜单上。</li></ul>
<ul><li>在使用标签式会话窗口时，增加<a rel="nofollow" class="external text" href="https://blog.lilydjwg.me/2013/11/15/switch-tabs-with-alt-num-in-wined-tm-exe-in-awesome.41729.html">使用 Alt+数字来切换标签页</a>的快捷键，需要安装 <a href="../en/Xorg.html#Automation" class="mw-redirect" title="Xdotool">xdotool</a>。</li></ul>
<ul><li>自动关闭弹出的新闻窗口。</li></ul>
<p>将以下内容添加到 <a href="../zh-CN/Awesome.html" title="Awesome (简体中文)">Awesome</a> 配置：
</p>
<pre>function myfocus_filter(c)
  if awful.client.focus.filter(c) then
    -- This works with tooltips and some popup-menus
    if c.class == 'Wine' and c.above == true then
      return nil
    elseif c.class == 'Wine'
      and c.type == 'dialog'
      and c.skip_taskbar == true
      and c.size_hints.max_width and c.size_hints.max_width &lt; 160
      then
      -- for popup item menus of Photoshop CS5
      return nil
    else
      return c
    end
  end
end

awful.rules.rules = {
  -- All clients will match this rule.
  {
    rule = { },
    properties = {
      -- 这里使用我们自己的函数
      focus = myfocus_filter,
      -- 以下是默认的部分
      border_width = beautiful.border_width,
      border_color = beautiful.border_normal,
      keys = clientkeys,
      buttons = clientbuttons,
    }
  }, {
    rule_any = { 
      instance = {'TM.exe', 'QQ.exe'},
    },
    properties = {
      -- This, together with myfocus_filter, make the popup menus flicker taskbars less
      -- Non-focusable menus may cause TM2013preview1 to not highlight menu
      -- items on hover and crash.
      focusable = true,
      floating = true,
      -- 去掉边框
      border_width = 0,
    }
  }, {
    -- 其它规则
  }
}

alt_switch_keys = awful.util.table.join(
    -- it's easier for a vimer to manage this than figuring out a nice way to loop and concat
    awful.key({'Mod1'}, 1, function(c) awful.util.spawn('xdotool key --window ' .. c.window .. ' ctrl+1') end),
    awful.key({'Mod1'}, 2, function(c) awful.util.spawn('xdotool key --window ' .. c.window .. ' ctrl+2') end),
    awful.key({'Mod1'}, 3, function(c) awful.util.spawn('xdotool key --window ' .. c.window .. ' ctrl+3') end),
    awful.key({'Mod1'}, 4, function(c) awful.util.spawn('xdotool key --window ' .. c.window .. ' ctrl+4') end),
    awful.key({'Mod1'}, 5, function(c) awful.util.spawn('xdotool key --window ' .. c.window .. ' ctrl+5') end),
    awful.key({'Mod1'}, 6, function(c) awful.util.spawn('xdotool key --window ' .. c.window .. ' ctrl+6') end),
    awful.key({'Mod1'}, 7, function(c) awful.util.spawn('xdotool key --window ' .. c.window .. ' ctrl+7') end),
    awful.key({'Mod1'}, 8, function(c) awful.util.spawn('xdotool key --window ' .. c.window .. ' ctrl+8') end),
    awful.key({'Mod1'}, 9, function(c) awful.util.spawn('xdotool key --window ' .. c.window .. ' ctrl+9') end)
)
function bind_alt_switch_tab_keys(client)
    client:keys(awful.util.table.join(client:keys(), alt_switch_keys))
end -- }}}

client.connect_signal("manage", function (c, startup)
  -- 其它配置

  if c.instance == 'TM.exe' then
    -- 添加 Alt+n 支持
    bind_alt_switch_tab_keys(c)
    -- 关闭各类新闻通知小窗口
    if c.name and c.name:match('^腾讯') and c.above then
      c:kill()
    end
  end

  -- 其它配置
end)
</pre>
<p>也可以看看完整 <a rel="nofollow" class="external text" href="https://github.com/lilydjwg/myawesomerc">Awesome 配置</a>。
</p>
<h4><span class="mw-headline" id="i3">i3</span></h4>
<p>原生配置下，启动 <code>qq2012</code> 时会自动最大化，且边框不美观，可在 <a href="../zh-CN/I3.html" title="I3 (简体中文)">i3</a> 的 <code>config</code> 设置如下两条规则以改善：
</p>
<pre>for_window [instance="QQ.exe"] floating enable
for_window [instance="QQ.exe"] border none
</pre>
<h2>
<span id=".E7.96.91.E9.9A.BE.E8.A7.A3.E7.AD.94"></span><span class="mw-headline" id="疑难解答">疑难解答</span>
</h2>
<h3>
<span id=".E6.97.A0.E6.B3.95.E8.B0.83.E7.94.A8.E8.BE.93.E5.85.A5.E6.B3.95"></span><span class="mw-headline" id="无法调用输入法">无法调用输入法</span>
</h3>
<p>如果在 QQ 中使用输入法无反应，可考虑在 QQ 的启动脚本中配置有关环境变量，示例如下（将 fcitx 改成你用的输入法）。
</p>
<pre>export GTK_IM_MODULE=fcitx
export QT_IM_MODULE=fcitx
export XMODIFIERS=@im=fcitx
</pre>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/deepin.com.qq.im/">deepin.com.qq.im</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">断开的链接</a>：package not found]</sup>等默认脚本中可能存在将输入法配置为 ibus 的行，如果你要使用其它输入法，需将这些行删去。
</p>
<h3>
<span id=".E5.AD.97.E4.BD.93.E9.85.8D.E7.BD.AE"></span><span class="mw-headline" id="字体配置">字体配置</span>
</h3>
<p>如果中文的显示遇到问题，可以尝试先执行 <code>winetricks fakechinese</code>。
</p>
<p>另请参阅<a href="../zh-CN/Wine.html#%E5%AD%97%E4%BD%93" title="Wine (简体中文)">字体</a>和<a href="../zh-CN/Font_configuration.html#%E6%B2%A1%E6%9C%89fontconfig%E6%94%AF%E6%8C%81%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F" title="Font configuration (简体中文)">没有 fontconfig 支持的应用程序</a>。
</p>
<h3>
<span id=".E6.96.87.E4.BB.B6.E8.A2.AB.E5.8D.A0.E7.94.A8"></span><span class="mw-headline" id="文件被占用">文件被占用</span>
</h3>
<p>杀死 QQ 或 TIM 的进程即可。
在退出 QQ/TIM 之后，某些相关进程仍然在后台运行。也可以使用如下脚本来启动 QQ/TIM，它会首先查找已有的进程，杀死该进程后启动新的 QQ/TIM。
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">start-tim.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh
# script to start TIM
# kill TIM before start TIM
for pid in `pgrep TIM.exe`; do
	if [ -n ${pid} ]; then
		kill ${pid}
	fi
done
# start TIM
wine '~/.wine/drive_c/Program Files/Tencent/TIM/Bin/TIM.exe'
</pre>
<p>上面的例子适用于 TIM，稍作修改之后即可应用于 QQ。
</p>
<h3>
<span id="xfce4.EF.BC.88xfwm4.EF.BC.89.E4.B8.8B.E6.97.A0.E6.B3.95.E8.BE.93.E5.85.A5.E8.A1.A8.E6.83.85"></span><span class="mw-headline" id="xfce4（xfwm4）下无法输入表情">xfce4（xfwm4）下无法输入表情</span>
</h3>
<p>打开设置管理器-窗口管理器微调-焦点，取消勾选激活焦点防窃取和遵照标准的 ICCCM 焦点提示即可。
</p>
<p>原因是表情窗口获取焦点时会发生不兼容现象。
</p>
<h3>
<span id=".E5.9C.A8.E9.9D.9E.E4.B8.AD.E6.96.87_locale_.E4.B8.8B.E6.97.A0.E6.B3.95.E8.BE.93.E5.85.A5.E4.B8.AD.E6.96.87"></span><span class="mw-headline" id="在非中文_locale_下无法输入中文">在非中文 locale 下无法输入中文</span>
</h3>
<p>修改 <code>.desktop</code> 文件的 <code>Exec</code>，这个文件一般位于 <code>/usr/share/applications/</code> 或者 <code>~/.local/share/applications/</code>。
</p>
<p>在 <code>Exec</code> 行中加入 <code>env LC_ALL=zh_CN.UTF-8</code>。
例如，原来的 <code>Exec</code> 为：
</p>
<pre>Exec=".wine/drive_c/Program Files/QQ/Bin/QQ.exe"
</pre>
<p>则应改为：
</p>
<pre>Exec=env LC_ALL=zh_CN.UTF-8 wine ".wine/drive_c/Program Files/QQ/Bin/QQ.exe"
</pre>
<h2>
<span id=".E5.8F.82.E9.98.85"></span><span class="mw-headline" id="参阅">参阅</span>
</h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://zh.opensuse.org/SDB:QQ">openSUSE wiki</a></li>
<li>
<a rel="nofollow" class="external text" href="http://qun.qzone.qq.com/">Web 端的 QQ 群空间</a> 当所使用 QQ 客户端不支持群空间时，可以此用该服务代替。</li>
<li>
<a rel="nofollow" class="external text" href="https://im.qq.com/mobileqq/">IM QQ-QQ 手机版</a> 移动端也未尝不也是一种代替方案。</li>
<li>
<a rel="nofollow" class="external text" href="https://github.com/hillwoodroc/winetricks-zh">hillwoodroc/winetricks-zh</a> hillwoodroc/winetricks-zh</li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../zh-CN/Category:Instant_messaging.html" title="Category:Instant messaging (简体中文)">Instant messaging (简体中文)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Tencent_QQ_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;oldid=662438">https://wiki.archlinux.org/index.php?title=Tencent_QQ_(简体中文)&amp;oldid=662438</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 18 April 2021, at 21:08.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
