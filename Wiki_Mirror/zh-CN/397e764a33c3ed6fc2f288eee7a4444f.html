<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Network configuration (简体中文)/Ethernet (简体中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Network_configuration_简体中文_Ethernet_简体中文 rootpage-Network_configuration_简体中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Network configuration (简体中文)/Ethernet (简体中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"><span class="subpages">&lt; <a href="/title/Network_configuration_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)" title="Network configuration (简体中文)">Network configuration (简体中文)</a></span></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>翻译状态：</strong>本文是 <a href="/title/Network_configuration/Ethernet" title="Network configuration/Ethernet">Network configuration/Ethernet</a> 的<a href="/title/ArchWiki:Translation_Team_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)" title="ArchWiki:Translation Team (简体中文)">翻译</a>。上次翻译日期：2020-02-04。如果英文版本有所<a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Network_configuration/Ethernet&amp;diff=0&amp;oldid=650686">更改</a>，则您可以帮助同步翻译。</div>
<p>本页描述了<a href="https://en.wikipedia.org/wiki/zh:%E4%BB%A5%E5%A4%AA%E7%BD%91" class="extiw" title="wikipedia:zh:以太网">以太网</a>的详细信息，一般的网络配置则为<a href="/title/Network_configuration_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)" title="Network configuration (简体中文)">网络配置</a>所涵盖。
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8"><span class="tocnumber">1</span> <span class="toctext">设备驱动</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#%E6%A3%80%E6%B5%8B%E9%A9%B1%E5%8A%A8%E7%8A%B6%E6%80%81"><span class="tocnumber">1.1</span> <span class="toctext">检测驱动状态</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#%E5%8A%A0%E8%BD%BD%E8%AE%BE%E5%A4%87%E6%A8%A1%E5%9D%97"><span class="tocnumber">1.2</span> <span class="toctext">加载设备模块</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4">
<a href="#%E6%8F%90%E7%A4%BA%E4%B8%8E%E6%8A%80%E5%B7%A7"><span class="tocnumber">2</span> <span class="toctext">提示与技巧</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#%E7%94%A8%E4%BA%8E%E7%AC%94%E8%AE%B0%E6%9C%AC%E7%9A%84_ifplugd"><span class="tocnumber">2.1</span> <span class="toctext">用于笔记本的 ifplugd</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6">
<a href="#%E7%96%91%E9%9A%BE%E8%A7%A3%E7%AD%94"><span class="tocnumber">3</span> <span class="toctext">疑难解答</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#%E6%9B%B4%E6%8D%A2%E4%BA%86%E8%BF%9E%E6%8E%A5%E6%9C%89%E7%BA%BF%E8%B0%83%E5%88%B6%E8%A7%A3%E8%B0%83%E5%99%A8%E7%9A%84%E8%AE%A1%E7%AE%97%E6%9C%BA"><span class="tocnumber">3.1</span> <span class="toctext">更换了连接有线调制解调器的计算机</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#%E6%98%BE%E5%BC%8F%E6%8B%A5%E5%A1%9E%E9%80%9A%E7%9F%A5"><span class="tocnumber">3.2</span> <span class="toctext">显式拥塞通知</span></a></li>
<li class="toclevel-2 tocsection-9">
<a href="#Realtek_%E6%B2%A1%E6%9C%89%E8%BF%9E%E6%8E%A5/%E7%BD%91%E7%BB%9C%E5%94%A4%E9%86%92%E6%95%85%E9%9A%9C"><span class="tocnumber">3.3</span> <span class="toctext">Realtek 没有连接/网络唤醒故障</span></a>
<ul>
<li class="toclevel-3 tocsection-10"><a href="#%E5%9C%A8_Linux_%E4%B8%AD%E5%90%AF%E7%94%A8%E7%BD%91%E5%8D%A1"><span class="tocnumber">3.3.1</span> <span class="toctext">在 Linux 中启用网卡</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#%E8%BF%98%E5%8E%9F/%E5%8F%98%E6%9B%B4_Windows_%E9%A9%B1%E5%8A%A8"><span class="tocnumber">3.3.2</span> <span class="toctext">还原/变更 Windows 驱动</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="#%E5%90%AF%E5%8A%A8_Windows_%E9%A9%B1%E5%8A%A8%E9%87%8C%E7%9A%84%E7%BD%91%E7%BB%9C%E5%94%A4%E9%86%92%E5%8A%9F%E8%83%BD"><span class="tocnumber">3.3.3</span> <span class="toctext">启动 Windows 驱动里的网络唤醒功能</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#%E5%9C%A8_BIOS/CMOS_%E4%B8%AD%E5%90%AF%E7%94%A8_LAN_Boot_ROM"><span class="tocnumber">3.3.4</span> <span class="toctext">在 BIOS/CMOS 中启用 LAN Boot ROM</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-14"><a href="#Atheros_%E8%8A%AF%E7%89%87%E7%BB%84%E6%89%BE%E4%B8%8D%E5%88%B0%E7%BD%91%E5%8D%A1"><span class="tocnumber">3.4</span> <span class="toctext">Atheros 芯片组找不到网卡</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Broadcom_BCM57780"><span class="tocnumber">3.5</span> <span class="toctext">Broadcom BCM57780</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Realtek_RTL8111/8168B"><span class="tocnumber">3.6</span> <span class="toctext">Realtek RTL8111/8168B</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#%E9%85%8D%E6%9C%89_Realtek_8111/8168/8411_%E7%9A%84_Gigabyte_%E4%B8%BB%E6%9D%BF"><span class="tocnumber">3.7</span> <span class="toctext">配有 Realtek 8111/8168/8411 的 Gigabyte 主板</span></a></li>
</ul>
</li>
</ul>
</div>

<h2>
<span id=".E8.AE.BE.E5.A4.87.E9.A9.B1.E5.8A.A8"></span><span class="mw-headline" id="设备驱动">设备驱动</span>
</h2>
<h3>
<span id=".E6.A3.80.E6.B5.8B.E9.A9.B1.E5.8A.A8.E7.8A.B6.E6.80.81"></span><span class="mw-headline" id="检测驱动状态">检测驱动状态</span>
</h3>
<p><a href="/title/Udev" title="Udev">udev</a> 会探测你的网卡（<a href="https://en.wikipedia.org/wiki/zh:%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3%E6%8E%A7%E5%88%B6%E5%99%A8" class="extiw" title="wikipedia:zh:网络接口控制器">网络接口控制器</a>）并在启动时自动载入必要的<a href="/title/Kernel_module_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)" title="Kernel module (简体中文)">内核模块</a>。检查 <code>lspci -v</code> 输出中“Ethernet controller”（或者类似的）条目，它会告诉你哪个内核模块包含了你的网络设备的驱动程序。例如：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ lspci -v</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">02:00.0 Ethernet controller: Attansic Technology Corp. L1 Gigabit Ethernet Adapter (rev b0)
 	...
 	Kernel driver in use: atl1
 	Kernel modules: atl1
</pre>
<p>接下来，用 <code>dmesg | grep <i>module_name</i></code> 来检查是否已经加载了驱动。例如：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># dmesg | grep atl1</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
atl1 0000:02:00.0: eth0 link is up 100 Mbps full duplex
</pre>
<p>如果驱动加载成功，就跳过下一节，否则，你需要知道你特定型号的网络设备需要哪一个模块。
</p>
<h3>
<span id=".E5.8A.A0.E8.BD.BD.E8.AE.BE.E5.A4.87.E6.A8.A1.E5.9D.97"></span><span class="mw-headline" id="加载设备模块">加载设备模块</span>
</h3>
<p>在互联网上搜索你的芯片组所需的模块/驱动。常见的驱动模块有用于 Realtek 芯片组网卡的 <code>8139too</code>，或者用于 Sis 芯片组网卡的 <code>sis900</code>。知道要使用什么模块之后，尝试<a href="/title/Kernel_module_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E6%89%8B%E5%8A%A8%E5%8A%A0%E8%BD%BD%E5%8D%B8%E8%BD%BD" title="Kernel module (简体中文)">手动加载它</a>。如果你碰到了未找到模块的错误，可能驱动没有包括在 Arch 的内核中。你可以在 <a href="/title/AUR" class="mw-redirect" title="AUR">AUR</a> 中搜索模块名称。
</p>
<p>如果 udev 在引导时不能自动侦测和加载适当的模块，参见 <a href="/title/Kernel_module_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E4%BD%BF%E7%94%A8systemd%E8%87%AA%E5%8A%A8%E5%8A%A0%E8%BD%BD%E6%A8%A1%E5%9D%97" title="Kernel module (简体中文)">Kernel module (简体中文)#使用systemd自动加载模块</a>。
</p>
<h2>
<span id=".E6.8F.90.E7.A4.BA.E4.B8.8E.E6.8A.80.E5.B7.A7"></span><span class="mw-headline" id="提示与技巧">提示与技巧</span>
</h2>
<h3>
<span id=".E7.94.A8.E4.BA.8E.E7.AC.94.E8.AE.B0.E6.9C.AC.E7.9A.84_ifplugd"></span><span class="mw-headline" id="用于笔记本的_ifplugd">用于笔记本的 ifplugd</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>提示：</strong> <a href="/title/Dhcpcd" title="Dhcpcd">dhcpcd</a> 也提供了同样的功能。</div>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ifplugd">ifplugd</a></span> 是一个守护进程，当网络适配器插入的时候自动配置网络，当网络断开的时候自动取消配置。这对于笔记本电脑这样的使用移动式的网络适配器的情况很有用，因为他只会在网络实际接入的时候才会配置网络接口。另外一个可能会用得着它的情况是，你需要重启你的网络，可是你既不想重启电脑也不想使用 shell 进行配置。
</p>
<p>在默认情况下，它会工作于 <code>eth0</code> 设备。要更改这个设置（以及更改其他设置，比如等待时间），可以编辑 <code>/etc/ifplugd/ifplugd.conf</code>。
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> <a href="/title/Netctl" title="Netctl">netctl</a> 软件包包含了 <code>netctl-ifplugd@.service</code>，否则你可以使用 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ifplugd">ifplugd</a></span> 软件包中的 <code>ifplugd@.service</code>。例如<a href="/title/%E5%90%AF%E7%94%A8" class="mw-redirect" title="启用">启用</a> <code>ifplugd@eth0.service</code>。</div>
<h2>
<span id=".E7.96.91.E9.9A.BE.E8.A7.A3.E7.AD.94"></span><span class="mw-headline" id="疑难解答">疑难解答</span>
</h2>
<h3>
<span id=".E6.9B.B4.E6.8D.A2.E4.BA.86.E8.BF.9E.E6.8E.A5.E6.9C.89.E7.BA.BF.E8.B0.83.E5.88.B6.E8.A7.A3.E8.B0.83.E5.99.A8.E7.9A.84.E8.AE.A1.E7.AE.97.E6.9C.BA"></span><span class="mw-headline" id="更换了连接有线调制解调器的计算机">更换了连接有线调制解调器的计算机</span>
</h3>
<p>许多有线网络运营商（例如加拿大最大的有线电视公司 Vidéotron，还有中国大陆的有线电视宽带公司）都使用记录网卡 MAC 地址的方法将有线调制解调器配置为只能一台计算机使用。一旦调制解调器获得第一台连接它的设备的 MAC 地址，就不会响应任何其它 MAC 地址。这样如果你换了台计算机（或者路由器），由于新计算机（或者路由器）的 MAC 地址和旧的不同，就没法连接调制解调器了。这时候必须复位调制解调器以使它重新进行识别。 你得关闭调制解调器电源，然后重新打开。一旦调制解调器重启并再次登录完毕（指示灯熄灭），重启新连接的设备以使它发起一个 DHCP 请求，或者手动发起 DHCP 请求。
</p>
<p>如果这个方法不能奏效，你需要克隆原来机器上的 MAC 地址。参见 <a href="/title/MAC_%E5%9C%B0%E5%9D%80%E4%BC%AA%E8%A3%85" class="mw-redirect" title="MAC 地址伪装">MAC 地址伪装</a>。
</p>
<h3>
<span id=".E6.98.BE.E5.BC.8F.E6.8B.A5.E5.A1.9E.E9.80.9A.E7.9F.A5"></span><span class="mw-headline" id="显式拥塞通知">显式拥塞通知</span>
</h3>
<p><a href="https://en.wikipedia.org/wiki/zh:%E6%98%BE%E5%BC%8F%E6%8B%A5%E5%A1%9E%E9%80%9A%E7%9F%A5" class="extiw" title="wikipedia:zh:显式拥塞通知">显式拥塞通知</a>(Explicit Congestion Notification, ECN) 可能在老旧/劣质的路由器上造成网络拥堵问题<a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=239892">[1]</a>。从 <a rel="nofollow" class="external text" href="https://github.com/systemd/systemd/issues/9748">systemd 239</a> 开始，它同时为入站流量和出站流量启用。
</p>
<p>设置仅当传入连接请求时才启用 ECN（内核默认设置，相当安全）：
</p>
<pre># sysctl net.ipv4.tcp_ecn=2
</pre>
<p>设置完全禁用 ECN（例如，测试 ECN 是否引起问题）：
</p>
<pre># sysctl net.ipv4.tcp_ecn=0
</pre>
<p>参见<a rel="nofollow" class="external text" href="https://www.kernel.org/doc/html/latest/networking/ip-sysctl.html">内核文档</a>。
</p>
<h3>
<span id="Realtek_.E6.B2.A1.E6.9C.89.E8.BF.9E.E6.8E.A5.2F.E7.BD.91.E7.BB.9C.E5.94.A4.E9.86.92.E6.95.85.E9.9A.9C"></span><span class="mw-headline" id="Realtek_没有连接/网络唤醒故障">Realtek 没有连接/网络唤醒故障</span>
</h3>
<p>使用基于 Realtek 8168 8169 8101 8111(C) 芯片网卡（独立网卡和板载）的用户也许会发现这个故障，启动时网卡不可用，网卡上的连接指示灯不亮。这通常会发生在安装了 Windows 的双启动系统上。在 Windows 下使用 Realtek 官方驱动（2007 年 5 月后的版本）会引发故障。新驱动通过在 Windows 关机时禁止网卡来关闭网络唤醒功能，直到下一次 Windows 启动前网卡都会一直不可用。如果是这个原因影响的你，你会观察到连接指示灯在 Windows 启动前一直熄灭，在 Windows 关机过程中也会熄灭。正常情况应该是只要计算机一直开着，即使在 POST 加电过程中，连接指示灯也应该一直亮着。这个故障也会影响其它没有安装新驱动的操作系统（例如各种 Live CD）。这里给出几种解决方案：
</p>
<h4>
<span id=".E5.9C.A8_Linux_.E4.B8.AD.E5.90.AF.E7.94.A8.E7.BD.91.E5.8D.A1"></span><span class="mw-headline" id="在_Linux_中启用网卡">在 Linux 中启用网卡</span>
</h4>
<p>参考 <a href="/title/Network_configuration_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E5%90%AF%E7%94%A8%E5%92%8C%E7%A6%81%E7%94%A8%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3" title="Network configuration (简体中文)">Network configuration (简体中文)#启用和禁用网络接口</a> 来启用网卡。
</p>
<h4>
<span id=".E8.BF.98.E5.8E.9F.2F.E5.8F.98.E6.9B.B4_Windows_.E9.A9.B1.E5.8A.A8"></span><span class="mw-headline" id="还原/变更_Windows_驱动">还原/变更 Windows 驱动</span>
</h4>
<p>你可以将你的 Windows 网卡驱动还原回微软自带的驱动（如果有的话），或者安装 2007 年 5 月份以前的 Realtek 官方驱动（也许在网卡附带的 CD 上）。
</p>
<h4>
<span id=".E5.90.AF.E5.8A.A8_Windows_.E9.A9.B1.E5.8A.A8.E9.87.8C.E7.9A.84.E7.BD.91.E7.BB.9C.E5.94.A4.E9.86.92.E5.8A.9F.E8.83.BD"></span><span class="mw-headline" id="启动_Windows_驱动里的网络唤醒功能">启动 Windows 驱动里的网络唤醒功能</span>
</h4>
<p>也许最好最快的修复方法就是改变 Windows 驱动里的这个设置。这个方法可以解决很多其它操作系统而不仅仅是 Arch 的麻烦。在 Windows 的设备管理器里，找到你的 Realtek 网卡，双击它。在“高级”标签页中，开启“wake-on-lan after shutdown”选项。
</p>
<p>例如在 Windows XP 里
</p>
<pre> 右键点击我的电脑
 --&gt;管理
   --&gt;设备管理器
     --&gt;网络适配器
       --&gt;双击 Realtek ...
         --&gt; 高级标签页
           --&gt; Wake-On-Lan After Shutdown
             --&gt; 启用。
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 新的 Realtek Windows 驱动程序中（已测试了 2009/01/22 GIGABYTE 上的 <i>Realtek 8111/8169 LAN Driver v5.708.1030.2008</i>）可能与这里的选项稍微有点不同，像 <i>Shutdown Wake-On-LAN &gt; Enable</i>。似乎把它切换成 <code>Disable</code> 没有效果（你仍然可以在Windows关闭时看到连接指示灯熄灭）。一个比较不好的解决方法是引导 Windows，然后立即重启系统（执行非正常重启/关机），不给予 Windows 驱动程序关闭 LAN 的机会。连接指示灯将会保持亮着，网卡也会在 POST 之后保持可用——直到你再次进入 Windows 并正常关机。</div>
<h4>
<span id=".E5.9C.A8_BIOS.2FCMOS_.E4.B8.AD.E5.90.AF.E7.94.A8_LAN_Boot_ROM"></span><span class="mw-headline" id="在_BIOS/CMOS_中启用_LAN_Boot_ROM">在 BIOS/CMOS 中启用 LAN Boot ROM</span>
</h4>
<p>尽管 Windows 驱动程序在系统关闭时禁用了它，但在 BIOS/CMOS 中设置 <i>Integrated Peripherals --&gt; Onboard LAN Boot ROM --&gt; Enabled</i>，系统启动时会重新激活 Realtek LAN 芯片。
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 这个方法多次在 GIGABYTE GA-G31M-ES2L 主板，2009/02/05 发布的 BIOS 版本 F8 上测试成功。你的情况可能不同。</div>
<h3>
<span id="Atheros_.E8.8A.AF.E7.89.87.E7.BB.84.E6.89.BE.E4.B8.8D.E5.88.B0.E7.BD.91.E5.8D.A1"></span><span class="mw-headline" id="Atheros_芯片组找不到网卡">Atheros 芯片组找不到网卡</span>
</h3>
<p>有些用户的 Atheros 芯片无法正常工作 (至少在 2014 年 2 月的安装镜像中)。可以通过安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/backports-patched/">backports-patched</a></span><sup><small>AUR</small></sup> 解决。
</p>
<h3><span class="mw-headline" id="Broadcom_BCM57780">Broadcom BCM57780</span></h3>
<p>这个 Broadcom 芯片只有你指定模块的加载顺序后才能正常工作。这些模块是 <code>broadcom</code> 和 <code>tg3</code>，前者需要首先加载。
</p>
<p>如果你的电脑有这个芯片，这些步骤应该有用：
</p>
<ul><li>从 <code>lspci</code> 的输出中找到你的网卡：</li></ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ lspci | grep Ethernet</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">02:00.0 Ethernet controller: Broadcom Corporation NetLink BCM57780 Gigabit Ethernet PCIe (rev 01)
</pre>
<ul><li>如果你的有线网络不能工作，尝试断开网线，然后以 root 权限实施以下步骤：</li></ul>
<pre># modprobe -r tg3
# modprobe broadcom
# modprobe tg3
</pre>
<ul><li>插回网线，检查模块是否成功：</li></ul>
<pre># dmesg | grep tg3
</pre>
<ul><li>如果现在你的故障解决了，你可以把 <code>broadcom</code> 和 <code>tg3</code> （以此顺序）加入到 <code>/etc/mkinitcpio.conf</code> 的 <code>MODULES</code> 一行，使得更改持久化：</li></ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/mkinitcpio.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">MODULES=(.. broadcom tg3 ..)</pre>
<ul>
<li><a href="/title/Mkinitcpio_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E5%88%9B%E5%BB%BA%E5%92%8C%E5%90%AF%E7%94%A8%E9%95%9C%E5%83%8F" title="Mkinitcpio (简体中文)">重新生成 initramfs</a></li>
<li>还有一种方法是创建 <code>/etc/modprobe.d/broadcom.conf</code>：</li>
</ul>
<pre>softdep tg3 pre: broadcom
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 这些方法可能也适用于其它芯片，例如 BCM57760。</div>
<h3>
<span id="Realtek_RTL8111.2F8168B"></span><span class="mw-headline" id="Realtek_RTL8111/8168B">Realtek RTL8111/8168B</span>
</h3>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># lspci | grep Ethernet</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">03:00.0 Ethernet controller: Realtek Semiconductor Co., Ltd. RTL8111/8168B PCI Express Gigabit Ethernet controller (rev 02)
</pre>
<p>这个网络适配器应被内核的<code>r8169</code>模块识别。 但是，对于某些芯片版本，网络连接可能一直是断开状态。 可以在 <a href="/title/Official_repositories" title="Official repositories">official repositories</a>中找到<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=r8168">r8168</a></span> 作为<code>r8169</code>的替代品，在这种情况下，其应该可以实现稳定可靠的连接。 将<code>r8169</code>列入黑名单<a href="/title/Kernel_modules#Blacklisting" class="mw-redirect" title="Kernel modules">Blacklist</a>，如果 <a href="/title/Udev" title="Udev">udev</a>没有自动加载<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=r8168">r8168</a></span> ，请参见内核模块 <a href="/title/Kernel_module_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E4%BD%BF%E7%94%A8systemd%E8%87%AA%E5%8A%A8%E5%8A%A0%E8%BD%BD%E6%A8%A1%E5%9D%97" title="Kernel module (简体中文)">Kernel module (简体中文)#使用systemd自动加载模块</a>
</p>
<div class="noprint archwiki-template-message">
<p><a href="/title/File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a><b>The factual accuracy of this article or section is disputed.</b><a href="/title/File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> "某些修订版本：",  不是驱动程序导致的问题，而是DNS服务器没有正确配置  (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/title/Talk:Network_configuration_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)/Ethernet_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">Talk:Network configuration (简体中文)/Ethernet (简体中文)#</a>)</div>
</div>
<p>对于此网络适配器的某些修订版，驱动程序中的另一个故障是IPv6支持不佳。 如果遇到诸如网页挂起和速度慢之类的问题，禁用IPv6功能 <a href="/title/IPv6#Disable_functionality" title="IPv6">IPv6#Disable functionality</a>可能会有所帮助。
</p>
<h3>
<span id=".E9.85.8D.E6.9C.89_Realtek_8111.2F8168.2F8411_.E7.9A.84_Gigabyte_.E4.B8.BB.E6.9D.BF"></span><span class="mw-headline" id="配有_Realtek_8111/8168/8411_的_Gigabyte_主板">配有 Realtek 8111/8168/8411 的 Gigabyte 主板</span>
</h3>
<p>使用诸如 Gigabyte GA-990FXA-UD3 这样的主板，在关闭 <a href="/title/PCI_passthrough_via_OVMF_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E8%AE%BE%E7%BD%AEIOMMU" title="PCI passthrough via OVMF (简体中文)">IOMMU</a> 的配置下启动（可能是默认设置）将会使网络连接出问题，通常是无法连接或连接上了但没有流量。这适用于板载网卡和小节标题中的任何其他 pci-NIC，因为 IOMMU 设置会影响主板上的整个网络接口。启用 IOMMU 并使用安装介质引导会在一秒钟内引发 AMD I-10/xhci 页面错误，但随后会正常启动，板载网卡完全正常运行（即使使用 r8169 模块）。在配置安装引导过程时，添加 <code>iommu=soft</code> 作为<a href="/title/%E5%86%85%E6%A0%B8%E5%8F%82%E6%95%B0" class="mw-redirect" title="内核参数">内核参数</a>，以消除引导时的错误信息，并恢复 USB3.0 功能。
</p>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="/title/Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="/title/Category:Network_configuration_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)" title="Category:Network configuration (简体中文)">Network configuration (简体中文)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="/title/Category:Pages_or_sections_flagged_with_Template:Accuracy" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Network_configuration_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)/Ethernet_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;oldid=667424">https://wiki.archlinux.org/index.php?title=Network_configuration_(简体中文)/Ethernet_(简体中文)&amp;oldid=667424</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 2 May 2021, at 18:32.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="/title/ArchWiki:Privacy_policy" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="/title/ArchWiki:About" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="/title/ArchWiki:General_disclaimer" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
