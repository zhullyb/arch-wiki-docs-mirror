<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Install Arch Linux via SSH (简体中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Install_Arch_Linux_via_SSH_简体中文 rootpage-Install_Arch_Linux_via_SSH_简体中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Install Arch Linux via SSH (简体中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#%E7%AE%80%E4%BB%8B"><span class="tocnumber">1</span> <span class="toctext">简介</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#%E4%BB%8E%E5%AE%89%E8%A3%85%E5%AA%92%E4%BD%93%E5%90%AF%E5%8A%A8"><span class="tocnumber">2</span> <span class="toctext">从安装媒体启动</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#%E4%B8%BA%E4%BD%BF%E7%94%A8SSH%E8%AE%BE%E7%BD%AElive%E5%AE%89%E8%A3%85%E7%8E%AF%E5%A2%83"><span class="tocnumber">3</span> <span class="toctext">为使用SSH设置live安装环境</span></a></li>
<li class="toclevel-1 tocsection-4">
<a href="#%E9%80%9A%E8%BF%87SSH%E8%BF%9E%E6%8E%A5%E5%88%B0%E7%9B%AE%E6%A0%87PC"><span class="tocnumber">4</span> <span class="toctext">通过SSH连接到目标PC</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#%E6%B3%A8%E6%84%8F"><span class="tocnumber">4.1</span> <span class="toctext">注意</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="#%E4%B8%8B%E4%B8%80%E6%AD%A5"><span class="tocnumber">5</span> <span class="toctext">下一步</span></a></li>
</ul>
</div>

<h2>
<span id=".E7.AE.80.E4.BB.8B"></span><span class="mw-headline" id="简介">简介</span>
</h2>
<p>这篇文章主要是介绍在使用SSH连接的情况下安装Arch。考虑到以下几种场景下的该安装方法的一个标准情况：
</p>
<p>在以下情况安装Arch...
</p>
<ul>
<li>没有显示器的HTPC(比如一个SDTV)。</li>
<li>一个在另外城市、省份、国家的PC。(朋友的家、父母的家等等)</li>
<li>一个你想要远程安装的PC，比如从一个可以方便的从 Arch Wiki 复制/粘贴的自己的工作站上远程安装。</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 前2步需要直接的物理控制PC。显然，如果PC在别处，就需要另外一个人的协调。</div>
<h2>
<span id=".E4.BB.8E.E5.AE.89.E8.A3.85.E5.AA.92.E4.BD.93.E5.90.AF.E5.8A.A8"></span><span class="mw-headline" id="从安装媒体启动">从安装媒体启动</span>
</h2>
<p>使用<a href="../zh-CN/Installation_guide.html#%E8%8E%B7%E5%BE%97%E6%9C%80%E6%96%B0%E7%9A%84%E5%AE%89%E8%A3%85%E5%AA%92%E4%BB%8B" class="mw-redirect" title="Beginners' guide (简体中文)">最新的安装媒介</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" class="mw-redirect" title="ArchWiki:Requests">断开的链接</a>：无效的部分]</sup>启动PC到Arch的live环境，并且以<b>root</b>登陆。
</p>
<h2>
<span id=".E4.B8.BA.E4.BD.BF.E7.94.A8SSH.E8.AE.BE.E7.BD.AElive.E5.AE.89.E8.A3.85.E7.8E.AF.E5.A2.83"></span><span class="mw-headline" id="为使用SSH设置live安装环境">为使用SSH设置live安装环境</span>
</h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 下面的命令必须以root账户执行。<b>#</b>提示是为了复制/粘贴方便而故意忽略了。</div>
<p>现在你的眼前应该可以看到<b>[root@archiso~]#</b>的提示。
</p>
<p>首先，建立目标机器的网络设置：
</p>
<pre>aif -p partial-configure-network
</pre>
<p>这个命令会列出所有已知的网络接口，输入你想使用的网络接口(比如，eth0作为有线以太网的接口)
</p>
<p>第2步，同步安装环境与源，安装openssh包，然后启动它：
</p>
<pre>pacman -Syy openssh
rc.d start sshd
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 根据安装介质的年龄，pacman也许会抱怨它自己要首先被更新。考虑到我们只是简单的要安装openssh包，推荐取消pacman的更新要求从而只安装这一个包。</div>
<p>最后，设定一个建立ssh链接需要的root密码；默认root的arch密码是空的。
</p>
<pre>passwd
</pre>
<h2>
<span id=".E9.80.9A.E8.BF.87SSH.E8.BF.9E.E6.8E.A5.E5.88.B0.E7.9B.AE.E6.A0.87PC"></span><span class="mw-headline" id="通过SSH连接到目标PC">通过SSH连接到目标PC</span>
</h2>
<p>使用下面的命令以链接到目标机器:
</p>
<pre>$ ssh root@ip.address.of.target
</pre>
<p>从现在开始尽管我们在本地，也可以通过我们自己的键盘控制远程的机器显示安装画面了。
</p>
<pre>ssh root@10.1.10.105
root@10.1.10.105's password: 
Last login: Thu Dec 23 08:33:02 2010 from 10.1.10.200
**************************************************************
* To begin installation, run /arch/setup                     *
* You can find documentation at                              *
*  /usr/share/aif/docs/official_installation_guide_en        *
*                                                            *
* i18n: Use the 'km' utility to change your keyboard layout  *
*       and console font.                                    *
*                                                            *
* If you are looking to install Arch on something more       *
* exotic, such as your kerosene-powered cheese grater,       *
* please consult <a rel="nofollow" class="external free" href="https://wiki.archlinux.org">https://wiki.archlinux.org</a>.                  *
*                                                            *
**************************************************************
[root@archiso ~]#</pre>
<h3>
<span id=".E6.B3.A8.E6.84.8F"></span><span class="mw-headline" id="注意">注意</span>
</h3>
<ul>
<li>如果目标机器处在防火墙/路由的后面，ssh默认的22端口需要转发给目标机器在的本地LAN IP地址。这个端口的转发不在本文的讨论范围。</li>
<li>你也可以在启动守护进程前编辑 Live 环境上的<code>/etc/ssh/sshd_config</code>，比如如果想在非标准端口运行的话。</li>
</ul>
<h2>
<span id=".E4.B8.8B.E4.B8.80.E6.AD.A5"></span><span class="mw-headline" id="下一步">下一步</span>
</h2>
<p>没有限制。如果只是想从这个安装介质安装Arch，只需要运行 <code>/arch/setup</code>。如果想编辑一个已有的损坏的安装，参见<a href="../en/Install_Arch_Linux_from_existing_Linux.html" class="mw-redirect" title="Install from existing Linux">Install from existing Linux</a>的wiki文章。
</p>
<p>想要<a href="../en/GRUB.html" class="mw-redirect" title="Grub2">grub2</a>或者使用<a href="../en/Partitioning.html#GUID_Partition_Table" class="mw-redirect" title="GPT">GPT</a>硬盘?
</p>
<ul>
<li>如果想要在运行安装环境的机器上，重新通过<b>pacman -S gdisk</b>安装的<b>gdisk</b>来手工的对目标机器的HDD/SDD硬盘分区，只要简单的回答no然后返回live安装环境的root提示符。</li>
<li>安装grub2是很容易的。只需要简单的chroot进新安装的arch环境(如果从安装环境出来了就已经挂载了)然后安装grub2：</li>
</ul>
<pre> cd /mnt
 rm console ; mknod -m 600 console c 5 1
 rm null ; mknod -m 666 null c 1 3
 rm zero ; mknod -m 666 zero c 1 5
 mount -t proc proc /mnt/proc
 mount -t sysfs sys /mnt/sys
 mount -o bind /dev /mnt/dev
 chroot /mnt /bin/bash
</pre>
<p>现在进入这个新的Arch的chroot:
</p>
<pre> pacman -S grub2
 grep -v rootfs /proc/mounts &gt; /etc/mtab
</pre>
<p>按照你喜欢的方式编辑<code>/etc/default/grub</code>。
安装grub并且生成一个grub.cfg
</p>
<pre> grub-install /dev/sdX --no-floppy
 grub-mkconfig -o /boot/grub/grub.cfg
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 上面的命令假设用户想要从GPT硬盘上启动，并且充分的理解了上述wiki文章，而且还有可供grub2使用的1Mb的ef02分区。</div>
<p>当准备好重启新的Arch机器前，离开chroot环境，并且在重启前卸载掉前面挂载的分区。
</p>
<pre> exit
 umount /mnt/boot   # if mounted this or any other separate partitions
 umount /mnt/{proc,sys,dev}
 umount /mnt
</pre>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../zh-CN/Category:Installation_process.html" title="Category:Installation process (简体中文)">Installation process (简体中文)</a></li>
<li><a href="../zh-CN/Category:Secure_Shell.html" title="Category:Secure Shell (简体中文)">Secure Shell (简体中文)</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Install_Arch_Linux_via_SSH_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;oldid=627804">https://wiki.archlinux.org/index.php?title=Install_Arch_Linux_via_SSH_(简体中文)&amp;oldid=627804</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 1 August 2020, at 12:10.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
