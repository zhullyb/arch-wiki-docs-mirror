<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Plymouth (简体中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Plymouth_简体中文 rootpage-Plymouth_简体中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Plymouth (简体中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../en/Silent_boot.html" title="Silent boot">Silent boot</a></li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>翻译状态：</strong>本文是 <a href="../en/Plymouth.html" title="Plymouth">Plymouth</a> 的<a href="../zh-CN/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (简体中文)">翻译</a>。上次翻译日期：2020-04-28。如果英文版本有所<a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Plymouth&amp;diff=0&amp;oldid=602458">更改</a>，则您可以帮助同步翻译。</div>
<p><a rel="nofollow" class="external text" href="http://fedoraproject.org/wiki/Releases/FeatureBetterStartup">Plymouth</a> 是一个来自于Fedora社区的提供美化启动图形界面的功能的项目，现在它被列入了<a rel="nofollow" class="external text" href="https://www.freedesktop.org/wiki/Software/#graphicsdriverswindowsystemsandsupportinglibraries">freedesktop.org的软件列表</a>之中。它依靠<a href="../en/Kernel_mode_setting.html" class="mw-redirect" title="KMS">KMS</a>尽可能早的设置显示器的原始分辨率显示，之后产生美化的启动引导界面直至登陆界面。
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#%E5%87%86%E5%A4%87"><span class="tocnumber">1</span> <span class="toctext">准备</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#%E5%AE%89%E8%A3%85"><span class="tocnumber">2</span> <span class="toctext">安装</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#plymouth_%E9%92%A9%E5%AD%90"><span class="tocnumber">2.1</span> <span class="toctext">plymouth 钩子</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#%E5%85%B6%E4%BB%96%E7%9A%84Plymouth%E9%92%A9%E5%AD%90%EF%BC%88%E6%90%AD%E9%85%8DSystemd%E9%92%A9%E5%AD%90%EF%BC%89"><span class="tocnumber">2.2</span> <span class="toctext">其他的Plymouth钩子（搭配Systemd钩子）</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#%E5%86%85%E6%A0%B8%E5%91%BD%E4%BB%A4%E8%A1%8C"><span class="tocnumber">2.3</span> <span class="toctext">内核命令行</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6">
<a href="#%E9%85%8D%E7%BD%AE"><span class="tocnumber">3</span> <span class="toctext">配置</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#%E5%B9%B3%E6%BB%91%E8%BF%87%E6%B8%A1"><span class="tocnumber">3.1</span> <span class="toctext">平滑过渡</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#%E6%98%BE%E7%A4%BA%E5%BB%B6%E8%BF%9F"><span class="tocnumber">3.2</span> <span class="toctext">显示延迟</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#%E6%9B%B4%E6%94%B9%E4%B8%BB%E9%A2%98"><span class="tocnumber">3.3</span> <span class="toctext">更改主题</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10">
<a href="#%E6%8F%90%E7%A4%BA%E4%B8%8E%E6%8A%80%E5%B7%A7"><span class="tocnumber">4</span> <span class="toctext">提示与技巧</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#%E6%98%BE%E7%A4%BA%E5%86%85%E6%A0%B8%E6%B6%88%E6%81%AF"><span class="tocnumber">4.1</span> <span class="toctext">显示内核消息</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#%E6%9B%BF%E6%8D%A2Arch_Logo%E5%92%8C%E5%88%9B%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%BB%E9%A2%98"><span class="tocnumber">4.2</span> <span class="toctext">替换Arch Logo和创建自定义主题</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-13"><a href="#%E8%AF%B7%E5%8F%82%E9%98%85"><span class="tocnumber">5</span> <span class="toctext">请参阅</span></a></li>
</ul>
</div>

<h2>
<span id=".E5.87.86.E5.A4.87"></span><span class="mw-headline" id="准备">准备</span>
</h2>
<p>Plymouth 依靠 <a href="../en/Kernel_mode_setting.html" class="mw-redirect" title="KMS">KMS</a> (Kernel Mode Setting) 显示图形界面。在EFI/UEFI系统中，Plymouth可以使用EFI帧缓冲。如果你无法启用KMS，比如你使用了私有驱动，或者你只是纯粹不想使用EFI帧缓冲，那么可以考虑使用<a href="../en/Uvesafb.html" title="Uvesafb">Uvesafb</a>来适配大屏分辨率。
</p>
<p>如果既没有KMS也没有framebuffer，那么Plymouth将使用文本模式。
</p>
<h2>
<span id=".E5.AE.89.E8.A3.85"></span><span class="mw-headline" id="安装">安装</span>
</h2>
<p>从<a href="../en/Arch_User_Repository.html" class="mw-redirect" title="AUR">AUR</a>中安装Plymouth:<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/plymouth/">plymouth</a></span><sup><small>AUR</small></sup>是稳定版本而<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/plymouth-git/">plymouth-git</a></span><sup><small>AUR</small></sup>是开发版本。
</p>
<p>如果你使用的是<a href="../en/GDM.html" title="GDM">GDM</a>,那么你需要安装<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gdm-plymouth/">gdm-plymouth</a></span><sup><small>AUR</small></sup>,这个版本编译时加入了 plymouth 支持。
</p>
<p><br>
</p>
<h3>
<span id="plymouth_.E9.92.A9.E5.AD.90"></span><span class="mw-headline" id="plymouth_钩子">plymouth 钩子</span>
</h3>
<p>把 <code>plymouth</code> 添加到 <a href="../en/Mkinitcpio.html" class="mw-redirect" title="Mkinitcpio.conf">mkinitcpio.conf</a> 的 HOOKS行，且<b>必须</b>在"base","udev"<b>之后</b>：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/mkinitcpio.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">HOOKS="base udev plymouth [...] "</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>警告：</strong> 
<ul>
<li>如果你使用 <b>encrypt</b> 钩子进行<a href="../en/Dm-crypt.html" class="mw-redirect" title="System Encryption with LUKS for dm-crypt">硬盘加密</a>，你<i>必须</i> 使用<b>plymouth-encrypt</b> 替代<code>encrypt</code> 以便提示输入TTY 密码.</li>
<li>
<code>plymouth-encrypt</code> 钩子不支持在 <code>cryptdevice=</code> 中使用 PARTUUID 或 PARTLABEL 参数。</li>
<li>对于根目录使用了<a href="../en/Install_Arch_Linux_on_ZFS.html#Native_encryption" title="Install Arch Linux on ZFS">加密的ZFS文件系统</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" class="mw-redirect" title="ArchWiki:Requests">断开的链接</a>：无效的部分]</sup>的用户，你必须安装<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/plymouth-zfs/">plymouth-zfs</a></span><sup><small>AUR</small></sup>并用<code>plymouth-zfs</code>钩子替换<code>zfs</code>钩子。</li>
</ul>
</div>
<p>加入了<code>plymouth-encrypt</code>钩子后，如果输入的密码不是以密码提示而是以明文形式传递到后台，你需要添加你的（内核）显卡驱动到initramfs中。例如，假设你在使用intel核显：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/mkinitcpio.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">MOUDLES=(i915 [...])</pre>
<p>可能有些主题的启动也需要这么做。
</p>
<h3>
<span id=".E5.85.B6.E4.BB.96.E7.9A.84Plymouth.E9.92.A9.E5.AD.90.EF.BC.88.E6.90.AD.E9.85.8DSystemd.E9.92.A9.E5.AD.90.EF.BC.89"></span><span class="mw-headline" id="其他的Plymouth钩子（搭配Systemd钩子）">其他的Plymouth钩子（搭配Systemd钩子）</span>
</h3>
<p>如果你的<a href="../en/Mkinitcpio.html" class="mw-redirect" title="Mkinitcpio.conf">mkinitcpio.conf</a>文件中包含了<code>systemd</code>钩子，那么将<code>plymouth</code>钩子替换为<code>sd-plymouth</code>钩子。此外，如果使用了硬盘加密，用<code>sd-encrypt</code>钩子替换<code>encrypt</code>或<code>plymouth-encrypt</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/mkinitcpio.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">HOOKS=(base systemd sd-plymouth [...] sd-encrypt [...])</pre>
<h3>
<span id=".E5.86.85.E6.A0.B8.E5.91.BD.E4.BB.A4.E8.A1.8C"></span><span class="mw-headline" id="内核命令行">内核命令行</span>
</h3>
<p>你需要通过引导程序<a href="../en/Kernel_parameters.html" title="Kernel parameters">向内核传递参数</a><code>quiet splash loglevel=3 rd.udev.log_priority=3 vt.global_cursor_default=0</code>。查看<a href="../en/Silent_boot.html" title="Silent boot">Silent boot</a>词条查看更多影响终端输出的参数。
</p>
<p><a href="../en/Mkinitcpio.html" title="Mkinitcpio">重建 initrd 镜像</a>，例如：
</p>
<pre># mkinitcpio -p linux
</pre>
<h2>
<span id=".E9.85.8D.E7.BD.AE"></span><span class="mw-headline" id="配置">配置</span>
</h2>
<h3>
<span id=".E5.B9.B3.E6.BB.91.E8.BF.87.E6.B8.A1"></span><span class="mw-headline" id="平滑过渡">平滑过渡</span>
</h3>
<p>要启用平滑过渡，需要：
</p>
<ol>
<li>禁用 <a href="../en/Display_manager.html" title="Display manager">Display manager</a>，例如 <code>systemctl disable gdm.service</code>
</li>
<li>启用对应的 plymouth 服务(支持 GDM, LXDM, SLiM, LightDM, SDDM), 例如<code>systemctl enable gdm-plymouth.service</code>
</li>
</ol>
<h3>
<span id=".E6.98.BE.E7.A4.BA.E5.BB.B6.E8.BF.9F"></span><span class="mw-headline" id="显示延迟">显示延迟</span>
</h3>
<p>plymouth 在<code>/etc/plymouth/plymouthd.conf</code> 中有选项：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/plymouth/plymouthd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Daemon]
Theme=spinner
ShowDelay=5</pre>
<p>对于启动很快的系统，在显示登陆框时会出现屏幕闪烁。可以设置 ShowDelay 为一个比启动时间更长的值，默认是 5 秒，可以根据机器状况进行调节。
</p>
<h3>
<span id=".E6.9B.B4.E6.94.B9.E4.B8.BB.E9.A2.98"></span><span class="mw-headline" id="更改主题">更改主题</span>
</h3>
<p>Plymouth自带了一些主题：
</p>
<ol>
<li>
<b>Fade-in</b>: "简单的有淡出淡入的星星的主题"</li>
<li>
<b>Glow</b>: "伴随着新兴标志的饼状引导进度条的企业主题"</li>
<li>
<b>Script</b>: "脚本案例插件" (漂亮的Arch Logo主题)</li>
<li>
<b>Solar</b>: "带有燃烧的蓝色星球的空间主题"</li>
<li>
<b>Spinner</b>: "带有加载框的简单主题"</li>
<li>
<b>Spinfinity</b>: "显示旋转的无穷大标志的主题"</li>
<li>
<b>Text</b>: "三种颜色的进度条(Fedora默认的白、浅蓝、蓝启动进度条)")</li>
<li>
<b>Details</b>: "详细的启动信息滚动输出"</li>
</ol>
<p>开发版本的Plymouth(<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/plymouth-git/">plymouth-git</a></span><sup><small>AUR</small></sup>)支持<b>BGRT</b>(Boot Graphics Resource Table)主题，它的样子是在可以的情况下显示带有OEM图标的Spinner主题。
</p>
<p>此外你还可以在<a href="../en/Arch_User_Repository.html" class="mw-redirect" title="AUR">AUR</a>里安装其他主题，可以从<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/plymouth/">plymouth</a></span><sup><small>AUR</small></sup>被依赖列表中甄选出主题。
</p>
<p>显示当前主题:
</p>
<pre>$ plymouth-set-default-theme
</pre>
<p>你可以使用以下命令获得已安装的主题列表：
</p>
<pre>$ plymouth-set-default-theme -l
</pre>
<p>或是通过：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ls /usr/share/plymouth/themes</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">details golw solar spinner tribar 
fade-in script spinfinity text
</pre>
<p>默认选择<b>spinner</b>，可以修改<code>/etc/plymouth/plymouthd.conf</code>文件设置其它主题, 例如:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/plymouth/plymouthd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Daemon]
Theme=spinner
ShowDelay=5</pre>
<p>要不重启预览主题。按 Ctrl+Alt+F6 切换终端，使用root登陆：
</p>
<pre># plymouthd
# plymouth --show-splash

</pre>
<p>再按Ctrl+Alt+F6并输入如下命令退出预览：
</p>
<pre># plymouth --quit
</pre>
<p>设置你喜欢的主题：
</p>
<pre># plymouth-set-default-theme -R &lt;theme name&gt;</pre>
<p>重启。
</p>
<h2>
<span id=".E6.8F.90.E7.A4.BA.E4.B8.8E.E6.8A.80.E5.B7.A7"></span><span class="mw-headline" id="提示与技巧">提示与技巧</span>
</h2>
<h3>
<span id=".E6.98.BE.E7.A4.BA.E5.86.85.E6.A0.B8.E6.B6.88.E6.81.AF"></span><span class="mw-headline" id="显示内核消息">显示内核消息</span>
</h3>
<p>启动时按 "Home" 或 "Escape" 按键会显示内核消息。
</p>
<h3>
<span id=".E6.9B.BF.E6.8D.A2Arch_Logo.E5.92.8C.E5.88.9B.E5.BB.BA.E8.87.AA.E5.AE.9A.E4.B9.89.E4.B8.BB.E9.A2.98"></span><span class="mw-headline" id="替换Arch_Logo和创建自定义主题">替换Arch Logo和创建自定义主题</span>
</h3>
<p>fade-in, script, solar, spinfinity这些主题使用的Logo是由Plymouth在<code>/usr/share/plymouth/arch-logo.png</code>提供的。如果你想使用其他Logo，你可以从这些主题中选取或者从<a href="../en/Arch_User_Repository.html" class="mw-redirect" title="AUR">AUR</a>的Plymouth主题中选取，然后编辑*.plymouth（有时会编辑*.script），最后用所选择的图片替换。你应该创建一个新的主题安装包，因为<code>/usr/share/plymouth</code>中的文件可能不会通过升级软件而改变。
</p>
<p>安装或者选择主题之后，应该重建initrd映像，使得新的主题生效。
</p>
<h2>
<span id=".E8.AF.B7.E5.8F.82.E9.98.85"></span><span class="mw-headline" id="请参阅">请参阅</span>
</h2>
<ul>
<li><a rel="nofollow" class="external text" href="http://fedoraproject.org/wiki/Releases/FeatureBetterStartup">Original Spec</a></li>
<li><a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=81406">Related forum thread</a></li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../zh-CN/Category:Bootsplash.html" title="Category:Bootsplash (简体中文)">Bootsplash (简体中文)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Plymouth_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;oldid=638584">https://wiki.archlinux.org/index.php?title=Plymouth_(简体中文)&amp;oldid=638584</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 14 October 2020, at 07:17.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
