<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>libinput (简体中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Libinput_简体中文 rootpage-Libinput_简体中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">libinput (简体中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<p><span></span>
</p>
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../en/Xorg.html" title="Xorg">Xorg</a></li>
<li><a href="../en/Touchpad_Synaptics.html" title="Touchpad Synaptics">Touchpad Synaptics</a></li>
<li><a href="../en/Wayland.html" title="Wayland">Wayland</a></li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>翻译状态：</strong>本文是 <a href="../en/Libinput.html" title="Libinput">Libinput</a> 的<a href="../zh-CN/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (简体中文)">翻译</a>。上次翻译日期：2021-04-16。如果英文版本有所<a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Libinput&amp;diff=0&amp;oldid=659628">更改</a>，则您可以帮助同步翻译。</div>
<p>来自<a rel="nofollow" class="external text" href="https://freedesktop.org/wiki/Software/libinput/">libinput</a> wiki 项目
</p>
<dl><dd>libinput 是一个函数库，在 Wayland 上用来接收设备的输入，在 X.Org 上提供输入设备的驱动。它提供对设备事件的检测和接收。对输入设备信号进行处理。它提供了一些列的函数供用户使用。</dd></dl>
<p>需要注意的是， X.Org 输入驱动为大多数常规<a href="../en/Xorg.html#Input_devices" title="Xorg">输入设备</a>提供了支持，libinput 项目的目标是为触摸板和触摸屏的触摸功能（如多点触控、手势等）提供高级支持。详情请参见 <a rel="nofollow" class="external text" href="https://wayland.freedesktop.org/libinput/doc/latest/">libinput 文档</a>。
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#%E5%AE%89%E8%A3%85"><span class="tocnumber">1</span> <span class="toctext">安装</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#%E9%85%8D%E7%BD%AE"><span class="tocnumber">2</span> <span class="toctext">配置</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#%E4%BD%BF%E7%94%A8_xinput"><span class="tocnumber">2.1</span> <span class="toctext">使用 xinput</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#%E4%BD%BF%E7%94%A8_Xorg_%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="tocnumber">2.2</span> <span class="toctext">使用 Xorg 配置文件</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#%E5%9B%BE%E5%BD%A2%E5%B7%A5%E5%85%B7"><span class="tocnumber">2.3</span> <span class="toctext">图形工具</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6">
<a href="#%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7"><span class="tocnumber">3</span> <span class="toctext">使用技巧</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#%E4%BA%A4%E6%8D%A2%E5%A4%9A%E6%8C%87%E7%82%B9%E5%87%BB%E5%8A%A8%E4%BD%9C"><span class="tocnumber">3.1</span> <span class="toctext">交换多指点击动作</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#%E8%AE%BE%E7%BD%AE%E6%8C%89%E9%94%AE%E6%98%A0%E5%B0%84"><span class="tocnumber">3.2</span> <span class="toctext">设置按键映射</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#%E6%9B%B4%E6%94%B9%E8%A7%A6%E6%91%B8%E6%9D%BF%E7%81%B5%E6%95%8F%E5%BA%A6"><span class="tocnumber">3.3</span> <span class="toctext">更改触摸板灵敏度</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#%E7%A6%81%E7%94%A8%E8%A7%A6%E6%91%B8%E6%9D%BF"><span class="tocnumber">3.4</span> <span class="toctext">禁用触摸板</span></a></li>
<li class="toclevel-2 tocsection-11">
<a href="#%E6%89%8B%E5%8A%BF%E6%93%8D%E4%BD%9C"><span class="tocnumber">3.5</span> <span class="toctext">手势操作</span></a>
<ul>
<li class="toclevel-3 tocsection-12"><a href="#libinput-gestures"><span class="tocnumber">3.5.1</span> <span class="toctext">libinput-gestures</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#fusuma"><span class="tocnumber">3.5.2</span> <span class="toctext">fusuma</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#Gebaar"><span class="tocnumber">3.5.3</span> <span class="toctext">Gebaar</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#GnomeExtendedGestures"><span class="tocnumber">3.5.4</span> <span class="toctext">GnomeExtendedGestures</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-16"><a href="#%E4%BD%BF%E7%94%A8%E9%BC%A0%E6%A0%87%E6%8C%89%E9%94%AE%E5%AE%9E%E7%8E%B0%E6%BB%9A%E5%8A%A8"><span class="tocnumber">3.6</span> <span class="toctext">使用鼠标按键实现滚动</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#%E8%B0%83%E8%8A%82%E6%BB%9A%E8%BD%AE%E6%BB%9A%E5%8A%A8%E9%80%9F%E5%BA%A6"><span class="tocnumber">3.7</span> <span class="toctext">调节滚轮滚动速度</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-18">
<a href="#%E7%96%91%E9%9A%BE%E8%A7%A3%E7%AD%94"><span class="tocnumber">4</span> <span class="toctext">疑难解答</span></a>
<ul>
<li class="toclevel-2 tocsection-19"><a href="#%E8%A7%A6%E6%91%B8%E6%9D%BF%E5%9C%A8_GNOME_%E4%B8%AD%E6%97%A0%E6%B3%95%E5%B7%A5%E4%BD%9C"><span class="tocnumber">4.1</span> <span class="toctext">触摸板在 GNOME 中无法工作</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-20"><a href="#%E5%8F%82%E9%98%85"><span class="tocnumber">5</span> <span class="toctext">参阅</span></a></li>
</ul>
</div>

<h2>
<span id=".E5.AE.89.E8.A3.85"></span><span class="mw-headline" id="安装">安装</span>
</h2>
<p>在 Wayland 上使用 libinput 一般不需要手动安装。<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libinput">libinput</a></span> 包是所有 Wayland 图形环境的依赖包并且已经安装，也不需要额外的驱动。
</p>
<p>如果想要在 <a href="../en/Xorg.html" title="Xorg">Xorg</a> 上使用 libinput，需要<a href="../zh-CN/Help:Reading.html#%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E5%8C%85" class="mw-redirect" title="安装">安装</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-input-libinput">xf86-input-libinput</a></span> 包。这是 libinput 的一个包装（wrapper），能够使 libinput 用于 X 上的输入设备。同时此驱动可以作为 evdev 和 synaptics 的替代品 <a rel="nofollow" class="external autonumber" href="https://freedesktop.org/wiki/Software/libinput/">[1]</a>。也就是说，其他用于 X 输入的软件包（即以 <code>xf86-input-</code> 为前缀的软件包）都可以使用这个驱动替换
</p>
<p>你可能还要安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xorg-xinput">xorg-xinput</a></span> 以便在程序运行时更改设置。
</p>
<h2>
<span id=".E9.85.8D.E7.BD.AE"></span><span class="mw-headline" id="配置">配置</span>
</h2>
<p>在 <a href="../en/Wayland.html" title="Wayland">Wayland</a> 上, 没有关于 libinput 的配置文件。 可配置内容由你使用的桌面环境对 libinput 的支持情况决定。详情请见 <a href="#%E5%9B%BE%E5%BD%A2%E5%B7%A5%E5%85%B7">#图形工具</a> 部分。
</p>
<p>对于 <a href="../en/Xorg.html" title="Xorg">Xorg</a>, 默认的配置文件安装在 <code>/usr/share/X11/xorg.conf.d/40-libinput.conf</code>。一般没有必要使用额外的配置文件来检测键盘，触摸板，指点杆（小红点）和触摸屏。
</p>
<h3>
<span id=".E4.BD.BF.E7.94.A8_xinput"></span><span class="mw-headline" id="使用_xinput">使用 xinput</span>
</h3>
<p>首先，执行:
</p>
<pre># libinput list-devices
</pre>
<p>这将会输出系统中的设备和它们被 libinput 支持的具体特性。
</p>
<p>重启图形环境之后，如果没有其它驱动程序被配置为优先，设备应由具有默认配置的 libinput 管理。
</p>
<p>参见 <span class="plainlinks archwiki-template-man" title="$ man 4 libinput"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/libinput.4">libinput(4)</a></span> 了解可设定的常规选项和一些参数信息。<i>xinput</i> 工具用于查看或更改运行中的特定设备的设置。例如：
</p>
<p>查看所有设备并确定其名称和编号：
</p>
<pre>$ xinput list
</pre>
<p>查看 <i>device</i> 的设置
（在下文中，<code><i>device</i></code> 表示要操作的设备的名称或编号）：
</p>
<pre>$ xinput list-props <i>device</i>
</pre>
<p>修改 <i>device</i> 的某项设置：
</p>
<pre>$ xinput set-prop <i>device</i> <i>option</i> <i>setting</i>
</pre>
<p>上文中 <code><i>optioin</i></code> 既可以是设置项的名称，也可以是其对应编号。
例如，修改“libinput Click Method Enabled (303)”项目的两个值，可以使用以下命令：
</p>
<pre>$ xinput set-prop 14 303 {1 1}
</pre>
<p>或者
</p>
<pre>$ xinput set-prop 14 "libinput Click Method Enabled" 1 1
</pre>
<h3>
<span id=".E4.BD.BF.E7.94.A8_Xorg_.E9.85.8D.E7.BD.AE.E6.96.87.E4.BB.B6"></span><span class="mw-headline" id="使用_Xorg_配置文件">使用 Xorg 配置文件</span>
</h3>
<p>参见 <a href="../en/Xorg.html#Using_.conf_files" title="Xorg">Xorg#Using .conf files</a> 了解永久的选项设置。<a href="../en/Logitech_Marble_Mouse.html#libinput" title="Logitech Marble Mouse">Logitech Marble Mouse#libinput</a> 和 <a href="#%E6%8C%89%E9%94%AE%E6%98%A0%E5%B0%84">#按键映射</a> 中列举了几个例子。
</p>
<p><a href="../en/Xorg.html#Input_devices" title="Xorg">Xorg#Input devices</a> 的替代驱动程序通常可以同时安装。如果您打算将一个设备的驱动程序切换到 libinput，请确保没有在 <code>/etc/X11/xorg.conf.d/</code> 的配置文件中为其它驱动程序配置优先。
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> 如果你同时安装了 libinput 和 synaptics 并使用其默认配置（即 <code>/etc/X11/xorg.conf.d/</code> 中没有属于两者中任一的文件），synaptics 将因其在默认安装目录中拥有更高的数字顺序 <code>70-</code> 而获得较高优先级。为了避免这种情况，您可以将默认的 libinput 配置文件（<code>40-libinput.conf</code>）符号链接到目录搜索顺序优先于 <code>70-synaptics.conf</code> 的 <code>/etc/X11/xorg.conf.d/</code> 中去取代它：
<pre># ln -s /usr/share/X11/xorg.conf.d/40-libinput.conf /etc/X11/xorg.conf.d/40-libinput.conf
</pre>
如果在 <code>/etc/X11/xorg.conf.d/</code> 目录下这两个配置文件***同时存在***，libinput 的配置一定是处于较低优先级的；参见 <a href="../en/Xorg.html#Using_.conf_files" title="Xorg">Xorg#Using .conf files</a>。如果要禁用 libinput（并回退到较旧的驱动程序）， 只需从 <code>/etc/X11/xorg.conf.d/</code> 中删除之前创建的符号链接即可。</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> 如果配置文件不起作用，请检查非特权用户是否拥有该文件读取权限</div>
<p>检查哪些设备是由 libinput 管理的一种方法是查看 <a href="../en/Xorg.html#General" title="Xorg">xorg 日志文件</a>。以下是一个例子：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ grep -e "Using input driver 'libinput'" <i>/path/to/Xorg.0.log</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[    28.799] (II) Using input driver 'libinput' for 'Power Button'
[    28.847] (II) Using input driver 'libinput' for 'Video Bus'
[    28.853] (II) Using input driver 'libinput' for 'Power Button'
[    28.860] (II) Using input driver 'libinput' for 'Sleep Button'
[    28.872] (II) Using input driver 'libinput' for 'AT Translated Set 2 keyboard'
[    28.878] (II) Using input driver 'libinput' for 'SynPS/2 Synaptics TouchPad'
[    28.886] (II) Using input driver 'libinput' for 'TPPS/2 IBM TrackPoint'
[    28.895] (II) Using input driver 'libinput' for 'ThinkPad Extra Buttons'</pre>
<p>这是一台 <code>/etc/X11/xorg.conf.d/</code> 中没有任何配置文件的笔记本电脑，也就是说，设备是被自动检测出来的。
</p>
<p>当然，你可以选择为一个设备使用替代的驱动程序，而为其它设备选择 libinput。许多因素可能会影响到底使用哪个驱动程序。举个例子，与 <a href="../en/Touchpad_Synaptics.html" title="Touchpad Synaptics">Touchpad Synaptics</a> 相比，libinput 驱动程序能根据自己的喜好去自定义触摸板行为的选项较少，但处理多点触控事件的程序逻辑要多得多（例如，手掌检测）。因此，如果你在使用某个驱动程序的时候，在硬件上遭遇了问题，那么尝试一下替代驱动程序是合理的。
</p>
<p>自定义配置文件应放在 <code>/etc/X11/xorg.conf.d/</code> 中，并且遵循被广泛使用的命名模式，通常选择 <code>30-touchpad.conf</code> 作为文件名。
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> 阅读 <code>/usr/share/X11/xorg.conf.d/40-libinput.conf</code> 中的详细配置以获取指导并参考 <span class="plainlinks archwiki-template-man" title="$ man 4 libinput"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/libinput.4">libinput(4)</a></span> 手册页获取有关可用配置选项的详细说明</div>
<p>一个基本的配置应该遵循以下的结构：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/30-touchpad.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "InputClass"
    Identifier "devname"
    Driver "libinput"
    ...
EndSection
</pre>
<p>你可以在单个配置文件中定义任意多的 Section（通常每个输入设备只配置一个 Section）
要配置你选择的设备，请指定 <span class="plainlinks archwiki-template-man" title="$ man 5 xorg.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/xorg.conf.5#INPUTCLASS_SECTION">xorg.conf(5) § INPUTCLASS SECTION</a></span> 中的一个过滤器，例如：
</p>
<ul>
<li>
<code>MatchIsPointer "on"</code> (trackpoint)</li>
<li><code>MatchIsKeyboard "on"</code></li>
<li><code>MatchIsTouchpad "on"</code></li>
<li><code>MatchIsTouchscreen "on"</code></li>
</ul>
<p>输入设备能够在 CONFIGURATION 中进行配置，详情请看 <span class="plainlinks archwiki-template-man" title="$ man 4 libinput"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/libinput.4#CONFIGURATION">libinput(4) § CONFIGURATION</a></span>。一些常用的配置选项有：
</p>
<ul>
<li>
<code>Option "Tapping" "on"</code>: 触摸以点击</li>
<li>
<code>Option "ClickMethod" "clickfinger"</code>: 触摸板不再拥有中右键区域的区分，与之代替的是双指代表右键，三指代表中键。 详情请看<a rel="nofollow" class="external text" href="https://wayland.freedesktop.org/libinput/doc/latest/clickpad-softbuttons.html#clickfinger-behavior">docs</a>.</li>
<li>
<code>Option "NaturalScrolling" "true"</code>: 自然滚动（反方向滚动）</li>
<li>
<code>Option "ScrollMethod" "edge"</code>: 边缘滚动页面</li>
</ul>
<p>注意：有的功能只在特定设备中起作用，并且你可能需要重启 “X服务” 来让功能生效。
</p>
<h3>
<span id=".E5.9B.BE.E5.BD.A2.E5.B7.A5.E5.85.B7"></span><span class="mw-headline" id="图形工具">图形工具</span>
</h3>
<p>下面列出了一些图形工具：
</p>
<ul>
<li>
<a href="../en/GNOME.html" title="GNOME">GNOME</a>:
<ul>
<li>控制中心（Control center）带有一个基础配置页面，详见 <a href="../en/GNOME.html#Mouse_and_touchpad" title="GNOME">GNOME#Mouse and touchpad</a>.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnome-tweaks">gnome-tweaks</a></span> 提供一些其他设置。</li>
</ul>
</li>
<li>
<a href="../en/Cinnamon.html" title="Cinnamon">Cinnamon</a>:
<ul><li>与 GNOME 界面相似，可更改选项更多。</li></ul>
</li>
<li>
<a href="../en/KDE.html#Plasma" class="mw-redirect" title="KDE Plasma">KDE Plasma</a> 5:
<ul><li>键盘，鼠标和控制器可以通过系统设置（System Settings）配置。</li></ul>
</li>
<li>
<a href="../en/Xfce.html" title="Xfce">Xfce</a>
<ul><li>在 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xfce4-settings">xfce4-settings</a></span> 下的“鼠标和触摸板（Mouse and Touchpad）”子菜单中进行配置。</li></ul>
</li>
</ul>
<ul><li>
<a href="../en/MATE.html" title="MATE">MATE</a>:
<ul><li>你可以在 MATE 的控制面板中配置鼠标相关内容，也可以使用 <code>mate-mouse-properties</code>
</li></ul>
</li></ul>
<h2>
<span id=".E4.BD.BF.E7.94.A8.E6.8A.80.E5.B7.A7"></span><span class="mw-headline" id="使用技巧">使用技巧</span>
</h2>
<h3>
<span id=".E4.BA.A4.E6.8D.A2.E5.A4.9A.E6.8C.87.E7.82.B9.E5.87.BB.E5.8A.A8.E4.BD.9C"></span><span class="mw-headline" id="交换多指点击动作">交换多指点击动作</span>
</h3>
<p>本小节以交换触摸板的两指点击与三指点击动作为例进行说明。
</p>
<p>为了使用两指点击来替代三指点击的动作，需要修改 <a href="../en/Xorg.html" title="Xorg">Xorg</a> 配置文件中 <code>TappingButtonMap</code> 选项。如果希望将单指、两指、三指点击对应的动作分别对应为左键、右键、中键（left/right/middle）点击，将 <code>TappingButtonMap</code> 设置为 <code>lrm</code> 即可。若想调换两指、三指点击对应动作，将该选项配置为 <code>lmr</code> （即单指、两指、三指点击分别对应左键、中键、左键点击）即可。
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/30-touchpad.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "InputClass"
    Identifier "touchpad"
    Driver "libinput"
    MatchIsTouchpad "on"
    Option "Tapping" "on"
    Option "TappingButtonMap" "lmr"
EndSection</pre>
<p>如果你的设备不是触控板，请记得移除 <code>MatchIsTouchpad "on"</code> 选项，并对应修改 <code>Identifier</code> 选项。
</p>
<h3>
<span id=".E8.AE.BE.E7.BD.AE.E6.8C.89.E9.94.AE.E6.98.A0.E5.B0.84"></span><span class="mw-headline" id="设置按键映射">设置按键映射</span>
</h3>
<p>设置按键映射可以实现使用鼠标侧键替换鼠标中键（鼠标中键在 X11 中可以用于粘贴内容，一般为按压鼠标滚轮的对应按键）等功能。
</p>
<p>可以通过如下命令查看按键映射情况：
</p>
<pre>$ xinput get-button-map <i>device</i>
</pre>
<p>其中 <i>device</i> 可以是 <code>xinput list</code> 命令返回的设备名或者设备ID。你可以随意交换按钮对应的数字并写回。例如：
</p>
<pre>$ xinput set-button-map <i>device</i> 1 6 3 4 5 0 7
</pre>
<p>在上面的例子中，我们将编号为6的按钮设置为了中键，并为原本的中键配置了按键0以禁用该按键。
关于按键映射的内容可以参阅<span class="plainlinks archwiki-template-man" title="$ man 4 libinput"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/libinput.4">libinput(4)</a></span>的“ButtonMapping”部分。
也许在 <a href="../en/Wayland.html" title="Wayland">Wayland</a> 中这种修改方式同样适用，但是需要注意的是，<i>device</i> 的编号与 button-map 也许互不相通。因此在 Xorg 与 Wayland 的设置并不能直接交换。
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> 你可以使用命令 <code>xev</code>（包含于软件包 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xorg-xev">xorg-xev</a></span>）来查看物理按键对应的逻辑按键编号。</div>
<p>在列出设备时，某些设备可能会以相同的设备名被多次列出，但是他们往往对应着不同的按键映射，因此准确修改按键映射需要辨别真正需要修改按键映射的设备。下面是一个通过 <a href="../en/Xinit.html#xinitrc" class="mw-redirect" title="Xinitrc">xinitrc</a> 来对某款鼠标（Logitech Revolution MX）进行配置的示例。
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.xinitrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
for i in $(xinput list | grep "Logitech USB Receiver" | perl -n -e'/id=(\d+)/ &amp;&amp; print "$1\n"')
	do if xinput get-button-map "$i" 2&gt;/dev/null| grep -q 20; then
		xinput set-button-map "$i" 1 17 3 4 5 8 7 6 9 10 11 12 13 14 15 16 2 18 19 20
	fi
done
...</pre>
<h3>
<span id=".E6.9B.B4.E6.94.B9.E8.A7.A6.E6.91.B8.E6.9D.BF.E7.81.B5.E6.95.8F.E5.BA.A6"></span><span class="mw-headline" id="更改触摸板灵敏度">更改触摸板灵敏度</span>
</h3>
<p>寻找触摸板适合的灵敏度阈值的方法可以参考上游文档<a rel="nofollow" class="external autonumber" href="https://wayland.freedesktop.org/libinput/doc/latest/touchpad-pressure-debugging.html#touchpad-pressure-hwdb">[2]</a>
</p>
<p>自定义触摸板的按压灵敏度可以通过“temporary local device quirks”实现，参见 device-quirks 文档<a rel="nofollow" class="external autonumber" href="https://wayland.freedesktop.org/libinput/doc/latest/device-quirks.html">[3]</a>。
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 
<p>Quirks 是一组内部API（internal API），并不保证能够在未来版本的 libinput 中正常工作。
在libinput 1.11 到 1.12 版本中，udev规则<a rel="nofollow" class="external autonumber" href="https://wayland.freedesktop.org/libinput/doc/1.11.3/udev_config.html#hwdb">[4]</a> 被 <code>.quirk</code>文件<a rel="nofollow" class="external autonumber" href="https://wayland.freedesktop.org/libinput/doc/latest/device-quirks.html">[5]</a>取代。
</p>
</div>
<h3>
<span id=".E7.A6.81.E7.94.A8.E8.A7.A6.E6.91.B8.E6.9D.BF"></span><span class="mw-headline" id="禁用触摸板">禁用触摸板</span>
</h3>
<p>禁用触摸板需要先使用命令 <code>xinput list</code> 获取触摸板名称，之后使用命令 <code>xinput disable <i>name</i></code> 来禁用。
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 
<ul>
<li>使用设备ID来禁用设备是一种相对较为鲁莽的行为，因为设备ID可能被重新分配。</li>
<li>当设备名中包含空格时，需要使用英文引号将其包含在内。</li>
</ul>
</div>
<p>如果希望其在系统启动时生效，参见 <a href="../zh-CN/Autostarting.html" title="Autostarting (简体中文)">自动启动</a> 相关内容。
</p>
<p>可以编写相应脚本来启用/禁用触摸板<a rel="nofollow" class="external autonumber" href="https://github.com/lahwaacz/Scripts/blob/master/toggle-touchpad.sh">[6]</a>。
</p>
<h3>
<span id=".E6.89.8B.E5.8A.BF.E6.93.8D.E4.BD.9C"></span><span class="mw-headline" id="手势操作">手势操作</span>
</h3>
<p>虽然 libinput 已经提供了<a rel="nofollow" class="external text" href="https://wayland.freedesktop.org/libinput/doc/latest/gestures.html">手势操作</a>，比如：捏、滑。但部分<a href="../en/Desktop_environment.html" title="Desktop environment">桌面环境（DE）</a>和<a href="../en/Window_manager.html" title="Window manager">窗口管理器（WM）</a>可能还没有支持这些功能。
</p>
<h4><span class="mw-headline" id="libinput-gestures">libinput-gestures</span></h4>
<p>对于兼容 <a href="https://en.wikipedia.org/wiki/Extended_Window_Manager_Hints" class="extiw" title="w:Extended Window Manager Hints">EWMH</a>（另见 <a rel="nofollow" class="external text" href="https://www.freedesktop.org/wiki/Specifications/wm-spec/">wm-spec</a>）的窗口管理器（WM）, 可以使用 <a rel="nofollow" class="external text" href="https://github.com/bulletmark/libinput-gestures">libinput-gestures</a> 。 程序从 libinput 获取触摸板的手势 (通过 <code>libinput debug-events</code>) ，然后根据相关配置将其映射成相对应的行为。这个程序提供了相当多了可自定义的功能。
</p>
<p>要使用 <a rel="nofollow" class="external text" href="https://github.com/bulletmark/libinput-gestures">libinput-gestures</a>, 请安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/libinput-gestures/">libinput-gestures</a></span><sup><small>AUR</small></sup> 。 你能使用很多系统级别的手势操作，也能自定义配置文件，详情请看 <a rel="nofollow" class="external text" href="https://github.com/bulletmark/libinput-gestures/blob/master/README.md">README</a> 。
</p>
<h4><span class="mw-headline" id="fusuma">fusuma</span></h4>
<p><a rel="nofollow" class="external text" href="https://github.com/iberianpig/fusuma">Fusuma</a> 是一个使用 <a href="../en/Ruby.html" title="Ruby">Ruby</a> 编写的多点手势识别器（multitouch gesture recognizer），可以作为 libinput-gestures 的替代品。
</p>
<p>使用 <a href="../en/Ruby.html#RubyGems" title="Ruby">Ruby gem</a> 安装 <code>fusuma</code>：
</p>
<pre>$ gem install fusuma
</pre>
<p>或者可以从 AUR 安装：<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ruby-fusuma/">ruby-fusuma</a></span><sup><small>AUR</small></sup>。
</p>
<p>除了 <code>fusuma</code> 模块，还需要安装Ruby模块 <code>fusuma-plugin-sendkey</code> 或者从 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xdotool">xdotool</a></span>（用于X）与 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ydotool/">ydotool</a></span><sup><small>AUR</small></sup> 中任选其一。其他可选择的工具可以参见<a rel="nofollow" class="external text" href="https://github.com/iberianpig/fusuma#alternatives-to-xdotool">项目说明</a>
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>提示：</strong>  <code>fusuma-plugin-sendkey</code> 模块同时支持 X 和 Wayland.</div>
<p>fusuma 安装完成后可以在配置文件 <code>~/.config/fusuma/config.yml</code> 进行配置。例如：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/fusuma/config.yml</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">swipe:
  3: 
    left: 
      sendkey: 'LEFTALT+RIGHT'
    right: 
      sendkey: 'LEFTALT+LEFT'
    up: 
      sendkey: 'LEFTALT+LEFTSHIFT+TAB'
    down: 
      sendkey: 'LEFTALT+TAB'
pinch:
  in:
    sendkey: 'LEFTALT+LEFTSHIFT+TAB'
  out:
    sendkey: 'LEFTALT+TAB'

threshold:
  swipe: 0.5
  pinch: 0.2

interval:
  swipe: 0.2
  pinch: 0.2
</pre>
<p>适用于 <code>xdotool</code> 的配置：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/fusuma/config.yml</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">swipe:
  3: 
    left: 
      command: 'xdotool key alt+Right'
    right: 
      command: 'xdotool key alt+Left'
    up: 
      command: 'xdotool key ctrl+shift+plus'
    down: 
      command: 'xdotool key ctrl+minus'
pinch:
  in:
    command: 'xdotool key ctrl+shift+plus'
  out:
    command: 'xdotool key ctrl+minus'

threshold:
  swipe: 0.5
  pinch: 0.2

interval:
  swipe: 0.2
  pinch: 0.2
</pre>
<p><code>ydotool</code> 适用的配置同上。
</p>
<p>适当配置滑动阈值（swip threshold）可以避免在滚动时划过过多页面。
</p>
<p>需要注意的是该配置仅适用于三指滑动，并不适用于两指滑动<a rel="nofollow" class="external autonumber" href="https://github.com/iberianpig/fusuma/issues/104#issuecomment-434742767">[7]</a>
</p>
<h4><span class="mw-headline" id="Gebaar">Gebaar</span></h4>
<p><a rel="nofollow" class="external text" href="https://github.com/Coffee2CodeNL/gebaar-libinput">Gebaar</a> 是另一个手势识别器（gesture recognizer）。与 Fusuma 相比，gebaar 不支持“捏”的手势（该手势支持已经被加入开发计划中）和阈值配置，但是增加了四指、五指滑动手势与斜线滑动。
</p>
<p>gebaar的<a rel="nofollow" class="external text" href="https://github.com/Osleg/gebaar-libinput">一份fork</a>可以使用AUR安装：<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gebaar-libinput-git/">gebaar-libinput-git</a></span><sup><small>AUR</small></sup>，这一版本的gebaar适配了“捏”的手势以及一些其他功能。该版本当前正处于积极开发的状态，但是配置文件与<a rel="nofollow" class="external text" href="https://github.com/Coffee2CodeNL/gebaar-libinput">gebaar原始版本</a>不兼容。
</p>
<h4><span class="mw-headline" id="GnomeExtendedGestures">GnomeExtendedGestures</span></h4>
<p>对于 GNOME 环境，可以尝试 <a rel="nofollow" class="external text" href="https://github.com/mpiannucci/GnomeExtendedGestures">GnomeExtendedGestures</a>（<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gnome-shell-extension-extended-gestures-git/">gnome-shell-extension-extended-gestures-git</a></span><sup><small>AUR</small></sup>）。
使用该工具可以将三指水平和垂直滑动对应动作配置为相关 gnome-shell actions（例如切换应用视图或在应用间切换）。
</p>
<h3>
<span id=".E4.BD.BF.E7.94.A8.E9.BC.A0.E6.A0.87.E6.8C.89.E9.94.AE.E5.AE.9E.E7.8E.B0.E6.BB.9A.E5.8A.A8"></span><span class="mw-headline" id="使用鼠标按键实现滚动">使用鼠标按键实现滚动</span>
</h3>
<p>通过配置，在按住某个鼠标按键（例如左键或者右键，或者鼠标上的其他按键）的同时移动鼠标，可以实现滚动页面的动作，这对于轨迹球之类没有滚轮的设备十分有帮助。只需要将 <code>ScrollMethod</code> 配置为 <code>button</code>，并通过 <code>ScrollButton</code> 选项配置对应的按键即可。可以参考下面的例子：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/00-mouse.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "InputClass"
    Identifier "system-mouse"
    MatchIsPointer "on"
    Option "ScrollMethod" "button"
    Option "ScrollButton" "3"
EndSection
</pre>
<h3>
<span id=".E8.B0.83.E8.8A.82.E6.BB.9A.E8.BD.AE.E6.BB.9A.E5.8A.A8.E9.80.9F.E5.BA.A6"></span><span class="mw-headline" id="调节滚轮滚动速度">调节滚轮滚动速度</span>
</h3>
<p>对某些鼠标，尤其是使用 <a href="../en/HiDPI.html" title="HiDPI">HiDPI</a> 的设备，使用鼠标滚轮时可能会感觉滚动速度较慢。
<a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/xorg/driver/xf86-input-libinput/-/merge_requests/12">相关补丁</a>还没有合并进libinput项目中。另一个第三方 <a rel="nofollow" class="external text" href="https://github.com/archlinuxcn/repo/tree/d0eb728b38450b47a4913539193a58fb523cc255/archlinuxcn/xf86-input-libinput-oldherl">xf86-input-libinput</a> 使用了这个补丁。
</p>
<p>这个补丁为鼠标提供了一个新属性 <code>libinput Scroll Distance Scale</code>，而且你可以通过如下方法配置滚动缩放（set a scaling factor）：
</p>
<pre>$ xinput --set-prop 'RAPOO Rapoo 2.4G Wireless Device' 'libinput Scroll Distance Scale' 2.5 2.5
</pre>
<p>上述命令中，<code>RAPOO Rapoo 2.4G Wireless Device</code> 是你的鼠标在 <code>xinput --list</code> 输出中展示的设备名，<code>2.5 2.5</code> 是缩放比例，分别对应 x 和 y 方向。
</p>
<p>或者你可以选择安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/libinput-multiplier/">libinput-multiplier</a></span><sup><small>AUR</small></sup> 并重启 <a href="../en/Xorg.html" title="Xorg">Xorg</a>，之后将y轴滚动距离配置为6倍：
</p>
<pre>$ echo 6 &gt; /tmp/libinput_discrete_deltay_multiplier
</pre>
<p><a rel="nofollow" class="external text" href="https://github.com/tkkcc/libinput_patch#change-with-focused-window">这个示例</a>展示了如何在焦点发生变化时调整滚动缩放。
</p>
<h2>
<span id=".E7.96.91.E9.9A.BE.E8.A7.A3.E7.AD.94"></span><span class="mw-headline" id="疑难解答">疑难解答</span>
</h2>
<p>当遇到libinput相关问题时，可以尝试使用 <code>libinput debug-events</code> 来帮助你进行调试，相关内容请参考 <span class="plainlinks archwiki-template-man" title="$ man 1 libinput-debug-events"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/libinput-debug-events.1">libinput-debug-events(1)</a></span>。
</p>
<p>一些输入事件需要内核支持，查看支持的输入事件可以安装软件包 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=evemu">evemu</a></span>，使用工具 <code>evemu-describe</code> 进行确认。
</p>
<h3>
<span id=".E8.A7.A6.E6.91.B8.E6.9D.BF.E5.9C.A8_GNOME_.E4.B8.AD.E6.97.A0.E6.B3.95.E5.B7.A5.E4.BD.9C"></span><span class="mw-headline" id="触摸板在_GNOME_中无法工作">触摸板在 GNOME 中无法工作</span>
</h3>
<p>首先需要确认触摸板的事件倍正确的发送给了 GNOME 处理，可以执行下面的命令：
</p>
<pre>$ gsettings set org.gnome.desktop.peripherals.touchpad send-events enabled
</pre>
<p>此外，GNOME 可能会重载部分行为，例如关闭轻触点击和强制使用自然滚动（Natural Scrolling）。
如果希望进行修改，必须使用 GNOME 的设置命令 <code>gsettings</code> 或者你选择的图形前端进行配置。
例如，如果希望为当前用户开启轻触点击（Tapping）以及关闭自然滚动（Natural Scrolling），按照下面的命令修改触摸板的相关配置：
</p>
<pre>$ gsettings set org.gnome.desktop.peripherals.touchpad tap-to-click true
$ gsettings set org.gnome.desktop.peripherals.touchpad natural-scroll false
</pre>
<h2>
<span id=".E5.8F.82.E9.98.85"></span><span class="mw-headline" id="参阅">参阅</span>
</h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://wayland.freedesktop.org/libinput/doc/latest/index.html">libinput Wayland documentation</a></li>
<li>
<a rel="nofollow" class="external text" href="https://archive.fosdem.org/2015/schedule/event/libinput/attachments/slides/591/export/events/attachments/libinput/slides/591/libinput_xorg.pdf">FOSDEM 2015 - libinput</a> - Hans de Goede on goals and plans of the project</li>
<li>
<a rel="nofollow" class="external text" href="https://who-t.blogspot.com.au/">Peter Hutterer's Blog</a> - numerous posts on libinput from one of the project's hackers</li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../zh-CN/Category:Input_devices.html" title="Category:Input devices (简体中文)">Input devices (简体中文)</a></li></ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Libinput_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;oldid=661705">https://wiki.archlinux.org/index.php?title=Libinput_(简体中文)&amp;oldid=661705</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 18 April 2021, at 11:56.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
