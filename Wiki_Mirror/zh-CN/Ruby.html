<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Ruby (简体中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Ruby_简体中文 rootpage-Ruby_简体中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Ruby (简体中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>翻译状态：</strong>本文是 <a href="../en/Ruby.html" title="Ruby">Ruby</a> 的<a href="../zh-CN/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (简体中文)">翻译</a>。上次翻译日期：2018-01-05。如果英文版本有所<a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Ruby&amp;diff=0&amp;oldid=499910">更改</a>，则您可以帮助同步翻译。</div>
<p>Ruby 是一门专注于简洁和生产力的动态解释型开源编程语言。
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#%E5%AE%89%E8%A3%85_Ruby"><span class="tocnumber">1</span> <span class="toctext">安装 Ruby</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#%E5%A4%9A%E7%89%88%E6%9C%AC"><span class="tocnumber">1.1</span> <span class="toctext">多版本</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#%E6%96%87%E6%A1%A3"><span class="tocnumber">1.2</span> <span class="toctext">文档</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4">
<a href="#RubyGems"><span class="tocnumber">2</span> <span class="toctext">RubyGems</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#%E5%BB%BA%E7%AB%8B"><span class="tocnumber">2.1</span> <span class="toctext">建立</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#%E7%94%A8%E6%B3%95"><span class="tocnumber">2.2</span> <span class="toctext">用法</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#%E5%AE%89%E8%A3%85%E6%AF%8F%E4%B8%AA%E7%94%A8%E6%88%B7%E6%88%96%E5%85%A8%E7%B3%BB%E7%BB%9F%E7%9A%84_gems"><span class="tocnumber">2.3</span> <span class="toctext">安装每个用户或全系统的 gems</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Bundler"><span class="tocnumber">2.4</span> <span class="toctext">Bundler</span></a></li>
<li class="toclevel-2 tocsection-9">
<a href="#Managing_RubyGems_using_pacman"><span class="tocnumber">2.5</span> <span class="toctext">Managing RubyGems using pacman</span></a>
<ul>
<li class="toclevel-3 tocsection-10"><a href="#Quarry"><span class="tocnumber">2.5.1</span> <span class="toctext">Quarry</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="#See_also"><span class="tocnumber">3</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2>
<span id=".E5.AE.89.E8.A3.85_Ruby"></span><span class="mw-headline" id="安装_Ruby">安装 Ruby</span>
</h2>
<p>对于最新版本的ruby，<a href="../zh-CN/Help:Reading.html#%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E5%8C%85" title="Help:Reading (简体中文)">安装</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ruby">ruby</a></span> 包。它包括 <a href="#RubyGems">ruby​​gems</a>。
</p>
<h3>
<span id=".E5.A4.9A.E7.89.88.E6.9C.AC"></span><span class="mw-headline" id="多版本">多版本</span>
</h3>
<p>如果你要在同一个系统安装多个版本 (比如 2.0.0-p0 和 1.9.3-p392)，最简单的办法时安装 <a href="../en/RVM.html" title="RVM">RVM</a>，<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/chruby/">chruby</a></span><sup><small>AUR</small></sup> 或者 <a href="../en/Rbenv.html" title="Rbenv">rbenv</a>。
</p>
<h3>
<span id=".E6.96.87.E6.A1.A3"></span><span class="mw-headline" id="文档">文档</span>
</h3>
<p>为了通过 <code>ri</code> 命令行工具使文档可用，安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ruby-docs">ruby-docs</a></span>。
你可以查询文档通过：<code>ri Array</code>，<code>ri Array.pop</code> 等等。（就像 man 页面）
</p>
<h2><span class="mw-headline" id="RubyGems">RubyGems</span></h2>
<p>RubyGems 是 Ruby 模块(叫做 <i>gems</i>) 的包管理器，在某种程度上与 <a href="../en/Pacman.html" title="Pacman">pacman</a> 相对于 Arch Linux 的角色相当。它包含在 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ruby">ruby</a></span> 中。
</p>
<h3>
<span id=".E5.BB.BA.E7.AB.8B"></span><span class="mw-headline" id="建立">建立</span>
</h3>
<p><a href="../zh-CN/Help:Reading.html#%E6%B7%BB%E5%8A%A0%E3%80%81%E5%88%9B%E5%BB%BA%E3%80%81%E7%BC%96%E8%BE%91%E6%96%87%E4%BB%B6" title="Help:Reading (简体中文)">添加</a> <code>$(ruby -e 'print Gem.user_dir')/bin</code> 到 <code>PATH</code> <a href="../zh-CN/Environment_variables.html" title="Environment variables (简体中文)">环境变量</a> 来允许 RubyGems 被执行：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.profile</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">PATH="$(ruby -e 'print Gem.user_dir')/bin:$PATH"</pre>
<p>这样而不是输入完整的路径对可执行的 gems 是必需的，尽管库工作并不需要修改你的路径。
</p>
<p>为了允许当前 <a href="../zh-CN/Users_and_groups.html" title="Users and groups (简体中文)">用户</a> 安装 RubyGems，例如 <i>你的用户帐号不允许安装到系统 RubyGems。</i>，你可以设置 <code>GEM_HOME</code> 为本地路径：
</p>
<pre>$ export GEM_HOME=$HOME/.gem
</pre>
<p>你可能想把这个变量追加到 <code>.profile</code> 中：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.profile</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">PATH="$(ruby -e 'print Gem.user_dir')/bin:$PATH"
export GEM_HOME=$HOME/.gem</pre>
<p>使用 <code>gem env</code> 来查看当前的 RubyGems 环境：
</p>
<pre>$ gem env
</pre>
<h3>
<span id=".E7.94.A8.E6.B3.95"></span><span class="mw-headline" id="用法">用法</span>
</h3>
<p>查看已安装有那些 gem:
</p>
<pre>$ gem list
</pre>
<p>获取某个 gem 的详细信息：
</p>
<pre>$ gem spec "gem_name"
</pre>
<p>默认情况下，<code>gem list</code> 和 <code>gem spec</code> 开启了 <code>--local</code> 选项，导致 <i>gem</i> 只会在本地系统里进行搜索。这可以用 <code>--remote</code> 参数来覆盖。这样来搜索一个 mysql gem：
</p>
<pre>$ gem list --remote mysql
</pre>
<p>安装一个 gem：
</p>
<pre>$ gem install mysql
</pre>
<p>安装过程可以加快一点，如果你不需要本地的文档的话：
</p>
<pre>$ gem install mysql --no-document
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 这可以通过配置以下 <code>~/.gemrc</code> 文件成为默认选项：
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.gemrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">gem: --no-document
</pre>
</div>
<p>更新所有已安装的 gem：
</p>
<pre>$ gem update
</pre>
<h3>
<span id=".E5.AE.89.E8.A3.85.E6.AF.8F.E4.B8.AA.E7.94.A8.E6.88.B7.E6.88.96.E5.85.A8.E7.B3.BB.E7.BB.9F.E7.9A.84_gems"></span><span class="mw-headline" id="安装每个用户或全系统的_gems">安装每个用户或全系统的 gems</span>
</h3>
<p>在 Arch Linux 下运行 <code>gem</code> 时，gems 默认是为用户安装的（安装到 <code>~/.gem/ruby​​/</code>），而不是系统范围内（安装到 <code>/usr/lib/ruby/gems/</code>）。这被认为是 Arch 上管理 gems 的最好方式，因为否则它们可能会干扰 pacman 安装的宝石。
</p>
<p>可以通过以 root 身份运行 <code>gem</code> 命令并附加 <code>--no-user-install</code> 标志以在系统范围内安装 gems。这可以被设置为默认通过在 <code>/etc/gemrc</code>（系统范围）或在 <code>~/.gemrc</code>（用户，覆盖系统范围） 中用 <code>--no-user-install</code> 替换 <code>--user-install</code>。
</p>
<p><a href="#Bundler">Bundler</a> 通过将宝石打包到您的应用程序中来解决这些问题。请参阅下面关于使用 bundler 的部分。
</p>
<h3><span class="mw-headline" id="Bundler">Bundler</span></h3>
<p><a rel="nofollow" class="external text" href="http://bundler.io">Bundler</a> 帮助你指定你的项目需要使用哪些 gem，还有可选地指定哪个版本被需要。当声明恰当时，Bundler 会安装所有依赖的 gem (包括整个依赖树)，后期检查之后还会打印出 log。Bundler 默认是安装 gem 到一个共享的路径，不过也可以指定直接安装到你的应用。当你项目运行的时候，Bundler 就提供每个 gem 正确的版本，即便安装的 gem 其实有多个版本。这需要有一点工作：应用需要以 <code>bundle exec</code> 命令运行，还有几行的 boilerplate 代码要被写在你的应用的可执行文件里。
</p>
<p>安装 Bundler：
</p>
<pre>$ gem install bundler
</pre>
<p>Bundler 默认把 gem 安装在系统全局，这跟 Arch 上处理 <i>gem</i> 的方案正好相反。要解决这个问题，添加下面的配置到你的 <code>~/.bashrc</code>:
</p>
<pre>export GEM_HOME=$(ruby -e 'print Gem.user_dir')
</pre>
<p>新建一个 bundle:
</p>
<pre>$ bundle init
</pre>
<p>然后编辑当前目录 (gem init 执行的目录)下的 <code>Gemfile</code> 添加你需要的 gem:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">Gemfile</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">gem "rails", "3.2.9"
gem "mysql"
</pre>
<p>运行下面的命令安装需要的 gem 到 <code>GEM_HOME</code>:
</p>
<pre>$ bundle install
</pre>
<p>或者作为可选方案, 运行下面的命令把 gem 安装到工作路径的 <code>.bundle</code>:
</p>
<pre>$ bundle install --path .bundle
</pre>
<p>别忘了要编辑你主要的执行文件:
</p>
<pre>#!/usr/bin/env ruby

# "This will automatically discover your Gemfile, and make all of the gems in
# your Gemfile available to Ruby." <a rel="nofollow" class="external free" href="http://bundler.io/rationale.html">http://bundler.io/rationale.html</a>
require 'bundler/setup'

...
</pre>
<p>最后运行你的程序:
</p>
<pre>bundle exec <i>main_executable_name.rb</i>
</pre>
<h3><span class="mw-headline" id="Managing_RubyGems_using_pacman">Managing RubyGems using pacman</span></h3>
<p>Instead of managing gems with <code>gem</code>, you can use <a href="../en/Pacman.html" title="Pacman">pacman</a>, or an <a href="../en/Arch_User_Repository.html" class="mw-redirect" title="AUR">AUR</a> helper. Ruby packages follow the naming convention ruby-<i>gemname</i>.
</p>
<p>This option provides the following advantages:
</p>
<ul>
<li>Gems are updated along with the rest of your system.</li>
<li>Installed gems are available system-wide, instead of being available only to the user who installed them.</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> There are also tools integrating <i>gem</i> with <i>pacman</i> by automatically generating PKGBUILDs for specified gems: see <a href="../en/Creating_packages.html#PKGBUILD_generators" title="Creating packages">Creating packages#PKGBUILD generators</a>.</div>
<h4><span class="mw-headline" id="Quarry">Quarry</span></h4>
<p>Quarry is an opensource tool (GPL3 license) that allows to maintain <a rel="nofollow" class="external text" href="http://rubygems.org">rubygems</a> binary repository for Arch Linux, as an easier alternative to building packages manually from the AUR. The source is hosted at <a rel="nofollow" class="external text" href="https://github.com/anatol/quarry">github</a>.
</p>
<p>The repository is maintained by Arch developer anatolik at <a rel="nofollow" class="external free" href="http://pkgbuild.com/~anatolik/quarry/">http://pkgbuild.com/~anatolik/quarry/</a>, and is currently for the x86_64 architecture only. It contains many popular gems and new gems can be added upon request.
</p>
<p>See <a href="../en/Unofficial_user_repositories.html#quarry" title="Unofficial user repositories">Unofficial user repositories#quarry</a> to enable it.
</p>
<p>Then install required gem <code># pacman -S ruby-$gemname</code>.
</p>
<p>If you have general questions - send it at the project announcement <a rel="nofollow" class="external free" href="https://bbs.archlinux.org/viewtopic.php?id=182729">https://bbs.archlinux.org/viewtopic.php?id=182729</a><br>
If you have bugreports or code improvements - file at github <a rel="nofollow" class="external free" href="https://github.com/anatol/quarry">https://github.com/anatol/quarry</a>
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a href="../en/Ruby_on_Rails.html" title="Ruby on Rails">Ruby on Rails</a></li>
<li>Ruby - <a rel="nofollow" class="external free" href="http://ruby-lang.org/">http://ruby-lang.org/</a><sup title="最后检查状态：domain name not resolved">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-04 ⓘ]</sup>
</li>
<li>Bundler - <a rel="nofollow" class="external free" href="http://bundler.io/">http://bundler.io/</a>
</li>
<li><a href="https://en.wikipedia.org/wiki/Why%27s_(poignant)_Guide_to_Ruby" class="extiw" title="wikipedia:Why's (poignant) Guide to Ruby">why's (poignant) Guide to Ruby</a></li>
<li>
<a rel="nofollow" class="external text" href="http://ruby.learncodethehardway.org/">Learn Ruby The Hard Way</a><sup title="最后检查状态：404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-04 ⓘ]</sup>
</li>
<li><a rel="nofollow" class="external text" href="http://blog.hyfather.com/blog/2011/10/18/bundler/">Comparison of Bundler and RVM workflows</a></li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../zh-CN/Category:Programming_languages.html" title="Category:Programming languages (简体中文)">Programming languages (简体中文)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Ruby_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;oldid=642112">https://wiki.archlinux.org/index.php?title=Ruby_(简体中文)&amp;oldid=642112</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 22 November 2020, at 10:44.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
