<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Environment variables (简体中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Environment_variables_简体中文 rootpage-Environment_variables_简体中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Environment variables (简体中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../en/Default_applications.html" title="Default applications">Default applications</a></li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>翻译状态：</strong>本文是 <a href="../en/Environment_variables.html" title="Environment variables">Environment_variables</a> 的<a href="../zh-CN/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (简体中文)">翻译</a>。上次翻译日期：2016-09-07。如果英文版本有所<a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Environment_variables&amp;diff=0&amp;oldid=436138">更改</a>，则您可以帮助同步翻译。</div>
<p>环境变量是一个有名称的对象，包含可被其它程序使用的数据。简单的说，它是一个名称和数值对。环境变量的值可以是文件系统上所有执行程序的位置，默认的编辑器，系统本地化设置等。Linux 新用户可能觉得这种管理变量的方式有点混乱。但是环境变量提供了一种在多个程序和进程间共享配置的方式。
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#%E5%B7%A5%E5%85%B7"><span class="tocnumber">1</span> <span class="toctext">工具</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F"><span class="tocnumber">2</span> <span class="toctext">定义变量</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#%E5%85%A8%E5%B1%80"><span class="tocnumber">2.1</span> <span class="toctext">全局</span></a></li>
<li class="toclevel-2 tocsection-4">
<a href="#%E6%8C%89%E7%94%A8%E6%88%B7"><span class="tocnumber">2.2</span> <span class="toctext">按用户</span></a>
<ul>
<li class="toclevel-3 tocsection-5"><a href="#%E5%9B%BE%E5%BD%A2%E7%A8%8B%E5%BA%8F"><span class="tocnumber">2.2.1</span> <span class="toctext">图形程序</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-6"><a href="#%E6%8C%89%E4%BC%9A%E8%AF%9D"><span class="tocnumber">2.3</span> <span class="toctext">按会话</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7">
<a href="#%E7%A4%BA%E4%BE%8B"><span class="tocnumber">3</span> <span class="toctext">示例</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#%E4%BD%BF%E7%94%A8_pam_env"><span class="tocnumber">3.1</span> <span class="toctext">使用 pam_env</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#%E5%8F%82%E9%98%85"><span class="tocnumber">4</span> <span class="toctext">参阅</span></a></li>
</ul>
</div>

<h2>
<span id=".E5.B7.A5.E5.85.B7"></span><span class="mw-headline" id="工具">工具</span>
</h2>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=coreutils">coreutils</a></span>软件包含程序<i>printenv</i>和<i>env</i>. 要显示当前环境变量的值: 
</p>
<pre>$ printenv
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 一些环境变量是属于特定用户的. 比较一般用户和<i>root</i>用户的 <i>printenv</i> 就可以看到差异。</div>
<p>工具 <code>env</code> 可以用指定的环境变量执行一个命令。下面例子把环境变量 <code>EDITOR</code> 设置为 <code>vim</code> 然后执行命令 <i>xterm</i>. 这个操作不会影响全局环境变量<code>EDITOR</code>.
</p>
<pre>$ env EDITOR=vim xterm
</pre>
<p><a href="../en/Bash.html" title="Bash">Bash</a> 内建的 <i>set</i> 命令可以设置 shell 选项值或显示 shell 变量的名称和数值。更多信息请参阅: <a rel="nofollow" class="external autonumber" href="https://www.gnu.org/software/bash/manual/bash.html#The-Set-Builtin">[1]</a>.
</p>
<p>每个进程都把他们的环境变量保存在 <code>/proc/$PID/environ</code> 文件中。此文件包含用 nul (<code>\x0</code>) 字符分隔的键值对。用 <a href="../en/Core_utilities.html#Essentials" class="mw-redirect" title="Sed">sed</a> 可以获得用户可读的内容：<code>sed 's:\x0:\n:g' /proc/$PID/environ</code>.
</p>
<h2>
<span id=".E5.AE.9A.E4.B9.89.E5.8F.98.E9.87.8F"></span><span class="mw-headline" id="定义变量">定义变量</span>
</h2>
<h3>
<span id=".E5.85.A8.E5.B1.80"></span><span class="mw-headline" id="全局">全局</span>
</h3>
<p>理论上，任何 shell 脚本都可以初始化环境变量，但为了维护方便，环境变量的定义集中在几个特定的文件中。对全局变量来说是：<code>/etc/profile</code>, <code>/etc/bash.bashrc</code> 和 <code>/etc/environment</code>. 每个文件都有不同的限制，请根据需要选择要使用的文件。
</p>
<ul>
<li>
<code>/etc/profile</code> <b>仅</b>初始化登陆 shell 的环境变量。它可以执行脚本并支持 <a href="https://en.wikipedia.org/wiki/Bourne_shell" class="extiw" title="wikipedia:Bourne shell">Bash </a>兼容 Shell。</li>
<li>
<code>/etc/bash.bashrc</code> <b>仅</b>初始化交互 shell，它也可以执行脚本但是只支持 Bash。</li>
<li>
<code>/etc/environment</code> 被 PAM-env 模块使用，和登陆与否，交互与否，Bash与否无关，所以无法使用脚本或通配符展开。仅接受 <code><i>variable=value</i></code> 格式。</li>
</ul>
<p>以将 <code>~/bin</code> 加入某些特定用户的 <code>PATH</code> 为例，可以将其放入 <code>/etc/profile</code> 或 <code>/etc/bash.bashrc</code>:
</p>
<pre># If user ID is greater than or equal to 1000 &amp; if ~/bin exists and is a directory &amp; if ~/bin is not already in your $PATH
# then export ~/bin to your $PATH.
if [[ $UID -ge 1000 &amp;&amp; -d $HOME/bin &amp;&amp; -z $(echo $PATH | grep -o $HOME/bin) ]]
then
    export PATH=$HOME/bin:${PATH}
fi
</pre>
<h3>
<span id=".E6.8C.89.E7.94.A8.E6.88.B7"></span><span class="mw-headline" id="按用户">按用户</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> dbus 进程和 systemd 用户实例不会使用任何 .bashrc 等文件定义的环境变量。所以 dbus 启动的程序默认不会使用这些变量，请参考 <a href="../en/Systemd/User.html#Environment_variables" title="Systemd/User">Systemd/User#Environment variables</a>.</div>
<p>有时并不希望定义全局环境变量，比如要把 <code>/home/my_user/bin</code> 加入 <code>PATH</code> 变量但是不影响其它用户。本地环境变量可以在下面文件定义：
</p>
<ol>
<li>shell 配置文件，例如 <a href="../en/Bash.html#Configuration_files" title="Bash">Bash#Configuration files</a> 或 <a href="../en/Zsh.html#Configuration_files" title="Zsh">Zsh#Configuration files</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" class="mw-redirect" title="ArchWiki:Requests">断开的链接</a>：无效的部分]</sup>.</li>
<li>很多 shell 会使用 <code>~/.profile</code> 作为后备方案参考 <a href="https://en.wikipedia.org/wiki/Unix_shell#Configuration_files" class="extiw" title="wikipedia:Unix shell">wikipedia:Unix shell#Configuration files</a>.</li>
<li>
<code>~/.pam_environment</code> 是用户特有的环境变量，PAM-env 模块会使用它。参考 <code>pam_env(8)</code> 和 <code>pam_env.conf(5)</code>。</li>
</ol>
<p>要修改本地用户的路径变量，修改 <code>~/.bash_profile</code>:
</p>
<pre>export PATH="${PATH}:/home/my_user/bin"
</pre>
<p>要更新变量，重新登录或 <i>source</i> 文件 <code>$ source ~/.bash_profile</code>.
</p>
<h4>
<span id=".E5.9B.BE.E5.BD.A2.E7.A8.8B.E5.BA.8F"></span><span class="mw-headline" id="图形程序">图形程序</span>
</h4>
<p>要设置图形程序的环境变量，可以将变量放入 <a href="../en/Xinit.html#xinitrc" class="mw-redirect" title="Xinitrc">xinitrc</a> (从 <a href="../en/Display_manager.html" title="Display manager">显示管理器</a> 登陆时，使用 <a href="../en/Xprofile.html" title="Xprofile">xprofile</a>)，例如：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.xinitrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">export PATH="${PATH}:~/scripts"
export GUIVAR=value</pre>
<h3>
<span id=".E6.8C.89.E4.BC.9A.E8.AF.9D"></span><span class="mw-headline" id="按会话">按会话</span>
</h3>
<p>如果需要更严格的定义，例如在运行程序时临时修改路径，在短时间改变 <code>~/.bash_profile</code> 等。这时，可以用 export 命令在当前会话修改 <code>PATH</code>，只要不退出登录，<code>PATH</code> 变量就会一直生效。增加 <code>PATH</code> 到一个会话:
</p>
<pre>$ export PATH="${PATH}:/home/my_user/tmp/usr/bin"
</pre>
<h2>
<span id=".E7.A4.BA.E4.BE.8B"></span><span class="mw-headline" id="示例">示例</span>
</h2>
<p>The following section lists a number of common environment variables used by a Linux system and describes their values.
</p>
<ul><li>
<code>DE</code> indicates the <i>D</i>esktop <i>E</i>nvironment being used. <a href="../en/Xdg-utils.html#xdg-open" class="mw-redirect" title="Xdg-open">xdg-open</a> will use it to choose more user-friendly file-opener application that desktop environment provides. Some packages need to be installed to use this feature. For <a href="../en/GNOME.html" title="GNOME">GNOME</a>, that would be <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/libgnome/">libgnome</a></span><sup><small>AUR</small></sup>; for <a href="../en/Xfce.html" title="Xfce">Xfce</a> this is <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=exo">exo</a></span>. Recognised values of <code>DE</code> variable are: <code>gnome</code>, <code>kde</code>, <code>xfce</code>, <code>lxde</code> and <code>mate</code>.</li></ul>
<dl><dd>The <code>DE</code> environment variable needs to be exported before starting the window manager. For example:</dd></dl>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.xinitrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">export DE="xfce"
exec openbox</pre>
<dl><dd>This will make <i>xdg-open</i> use the more user-friendly <i>exo-open</i>, because it assumes it is running inside Xfce. Use <i>exo-preferred-applications</i> for configuring.</dd></dl>
<ul><li>
<code>DESKTOP_SESSION</code> is similar to <code>DE</code>, but used in <a href="../en/LXDE.html" title="LXDE">LXDE</a> desktop enviroment: when <code>DESKTOP_SESSION</code> is set to <code>LXDE</code>, <i>xdg-open</i> will use <i>pcmanfm</i> file associations.</li></ul>
<ul><li>
<code>PATH</code> contains a colon-separated list of directories in which your system looks for executable files. When a regular command (e.g., <i>ls</i>, <i>rc-update</i> or <i>ic|emerge</i>) is interpreted by the shell (e.g., <i>bash</i> or <i>zsh</i>), the shell looks for an executable file with the same name as your command in the listed directories, and executes it. To run executables that are not listed in <code>PATH</code>, the absoute path to the executable must be given: <code>/bin/ls</code>.</li></ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> It is advised not to include the current working directory (<code>.</code>) into your <code>PATH</code> for security reasons, as it may trick the user to execute vicious commands.</div>
<ul><li>
<code>HOME</code> contains the path to the home directory of the current user. This variable can be used by applications to associate configuration files and such like with the user running it.</li></ul>
<ul><li>
<code>PWD</code> contains the path to your working directory.</li></ul>
<ul><li>
<code>OLDPWD</code> contains the path to your previous working directory, that is, the value of <code>PWD</code> before last <i>cd</i> was executed.</li></ul>
<ul><li>
<code>SHELL</code> contains the name of the running, interactive shell, e.g., <code>bash</code>
</li></ul>
<ul><li>
<code>TERM</code> contains the name of the running terminal, e.g., <code>xterm</code>
</li></ul>
<ul><li>
<code>PAGER</code> contains command to run the program used to list the contents of files, e.g., <code>/bin/less</code>.</li></ul>
<ul><li>
<code>EDITOR</code> contains the command to run the lightweight program used for editing files, e.g., <code>/usr/bin/nano</code>. For example, you can write an interactive switch between <i>gedit</i> under <a href="../en/Xorg.html" class="mw-redirect" title="X">X</a> or <i>nano</i> in this example):</li></ul>
<pre>export EDITOR="$(if [[ -n $DISPLAY ]]; then echo 'gedit'; else echo 'nano'; fi)"
</pre>
<ul><li>
<code>VISUAL</code> contains command to run the full-fledged editor that is used for more demanding tasks, such as editing mail (e.g., <code>vi</code>, <a href="../en/Vim.html" title="Vim">vim</a>, <a href="../en/Emacs.html" title="Emacs">emacs</a> etc).</li></ul>
<ul><li>
<code>MAIL</code> contains the location of incoming email. The traditional setting is <code>/var/spool/mail/$LOGNAME</code>.</li></ul>
<ul><li>
<code>BROWSER</code> contains the path to the web browser. Helpful to set in an interactive shell configuration file so that it may be dynamically altered depending on the availability of a graphic environment, such as <a href="../en/Xorg.html" class="mw-redirect" title="X">X</a>:</li></ul>
<pre>if [ -n "$DISPLAY" ]; then
    export BROWSER=firefox
else 
    export BROWSER=links
fi
</pre>
<ul><li>
<code>ftp_proxy and http_proxy</code> contains FTP and HTTP proxy server, respectively:</li></ul>
<pre>ftp_proxy="ftp://192.168.0.1:21"
http_proxy="http://192.168.0.1:80"
</pre>
<ul><li>
<code>MANPATH</code> contains a colon-separated list of directories in which <i>man</i> searches for the man pages.</li></ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> In <code>/etc/profile</code>, there is a comment that states "Man is much better than us at figuring this out", so this variable should generally be left as default, i.e. <code>/usr/share/man:/usr/local/share/man</code>
</div>
<ul><li>
<code>INFODIR</code>	contains a colon-separated list of directories in which the info command searches for the info pages, e.g., <code>/usr/share/info:/usr/local/share/info</code>
</li></ul>
<ul><li>
<code>TZ</code> can be used to to set a time zone different to the system zone for a user. The zones listed in <code>/usr/share/zoneinfo/</code> can be used as reference, for example <code>TZ="/usr/share/zoneinfo/Pacific/Fiji"</code>
</li></ul>
<h3>
<span id=".E4.BD.BF.E7.94.A8_pam_env"></span><span class="mw-headline" id="使用_pam_env">使用 pam_env</span>
</h3>
<p>Using <code>/etc/environment</code> and <code>~/.pam_environment</code> can be a little tricky, and the man pages (<code>pam_env(8)</code> and <code>pam_env.conf(5)</code>) are not particularly clear. So, here's an example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.pam_environment</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">LANG             DEFAULT=en_US.UTF-8
LC_ALL           DEFAULT=${LANG}

XDG_CONFIG_HOME  DEFAULT=@{HOME}/.config
#XDG_CONFIG_HOME=@{HOME}/.config                    # is **not** valid see below
XDG_DATA_HOME    DEFAULT=@{HOME}/.local/share
 
# you can even use recently defined variables
RCRC             DEFAULT=${XDG_CONFIG_HOME}/rcrc
BROWSER=firefox
#BROWSER         DEFAULT=firefox # same as above
EDITOR=vim</pre>
<p>In <code>~/.pam_environment</code> there are two ways to set environmental variables:
</p>
<pre>VARIABLE=VALUE
</pre>
<p>and
</p>
<pre>VARIABLE [DEFAULT=[value]] [OVERRIDE=[value]]
</pre>
<p>The first one <b>doesn't allow</b> the use of <code> ${VARIABLES} </code>, while the second does. <code> @{HOME} </code> is a special variable that expands what is defined in <code>/etc/passwd</code> (same goes with <code> @{SHELL} </code>). After defining a <code>VARIABLE</code>, you can recall it with <code> ${VARIABLE} </code>. Note that curly braces and the dollar sign are needed (<code> ${} </code>) when invoking the previously defined variable.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  This file is read before everything, even <code> ~/.{,bash_,z}profile </code> and <code> ~/.zshenv </code>. </div>
<h2>
<span id=".E5.8F.82.E9.98.85"></span><span class="mw-headline" id="参阅">参阅</span>
</h2>
<ul><li><a rel="nofollow" class="external text" href="https://wiki.gentoo.org/wiki/Handbook:X86/Working/EnvVar">Gentoo Linux Documentation</a></li></ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../zh-CN/Category:System_administration.html" title="Category:System administration (简体中文)">System administration (简体中文)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Environment_variables_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;oldid=631073">https://wiki.archlinux.org/index.php?title=Environment_variables_(简体中文)&amp;oldid=631073</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 11 August 2020, at 18:49.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
