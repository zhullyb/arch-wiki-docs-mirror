<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Distcc (简体中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Distcc_简体中文 rootpage-Distcc_简体中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Distcc (简体中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>相关文章</p>
<ul>
<li><a href="../en/TORQUE.html" title="TORQUE">TORQUE</a></li>
<li><a href="../en/Slurm.html" title="Slurm">Slurm</a></li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>翻译状态：</strong>本文是 <a href="../en/Distcc.html" title="Distcc">Distcc</a> 的<a href="../zh-CN/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (简体中文)">翻译</a>。上次翻译日期：2018-07-13。如果英文版本有所<a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Distcc&amp;diff=0&amp;oldid=520230">更改</a>，则您可以帮助同步翻译。</div>
<p>Distcc 是一个将 C、C++、Objective C 或 Objective C++ 等程序的编译任务分发到网络中多个主机的程序。distcc 的结果和本地编译一模一样，安装后使用方便，通常比本地编译快很多。
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#%E5%90%8D%E8%AF%8D%E5%AE%9A%E4%B9%89"><span class="tocnumber">1</span> <span class="toctext">名词定义</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#%E5%BC%80%E5%A7%8B"><span class="tocnumber">2</span> <span class="toctext">开始</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#%E9%85%8D%E7%BD%AE"><span class="tocnumber">3</span> <span class="toctext">配置</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#%E4%BB%8E%E6%9C%BA%E9%85%8D%E7%BD%AE"><span class="tocnumber">3.1</span> <span class="toctext">从机配置</span></a></li>
<li class="toclevel-2 tocsection-5">
<a href="#%E4%B8%BB%E6%9C%BA%E9%85%8D%E7%BD%AE"><span class="tocnumber">3.2</span> <span class="toctext">主机配置</span></a>
<ul>
<li class="toclevel-3 tocsection-6"><a href="#makepkg_%E7%BC%96%E8%AF%91"><span class="tocnumber">3.2.1</span> <span class="toctext">makepkg 编译</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="#%E9%9D%9E_makepkg_%E7%BC%96%E8%AF%91"><span class="tocnumber">3.2.2</span> <span class="toctext">非 makepkg 编译</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-8">
<a href="#%E7%BC%96%E8%AF%91"><span class="tocnumber">4</span> <span class="toctext">编译</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="#makepkg_%E7%BC%96%E8%AF%91_2"><span class="tocnumber">4.1</span> <span class="toctext">makepkg 编译</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#%E9%9D%9E_makepkg_%E7%BC%96%E8%AF%91_2"><span class="tocnumber">4.2</span> <span class="toctext">非 makepkg 编译</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="#%E7%9B%91%E8%A7%86%E8%BF%9B%E5%BA%A6"><span class="tocnumber">5</span> <span class="toctext">监视进度</span></a></li>
<li class="toclevel-1 tocsection-12">
<a href="#%22Cross_Compiling%22_with_distcc"><span class="tocnumber">6</span> <span class="toctext">"Cross Compiling" with distcc</span></a>
<ul>
<li class="toclevel-2 tocsection-13">
<a href="#32-bit_x86_(i686)"><span class="tocnumber">6.1</span> <span class="toctext">32-bit x86 (i686)</span></a>
<ul>
<li class="toclevel-3 tocsection-14">
<a href="#Chroot_method_(preferred)"><span class="tocnumber">6.1.1</span> <span class="toctext">Chroot method (preferred)</span></a>
<ul>
<li class="toclevel-4 tocsection-15"><a href="#Add_port_numbers_to_DISTCC_HOSTS_on_the_i686_chroot"><span class="tocnumber">6.1.1.1</span> <span class="toctext">Add port numbers to DISTCC_HOSTS on the i686 chroot</span></a></li>
<li class="toclevel-4 tocsection-16"><a href="#Invoke_makepkg_from_the_Native_Environment"><span class="tocnumber">6.1.1.2</span> <span class="toctext">Invoke makepkg from the Native Environment</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-17"><a href="#Multilib_GCC_method_(not_recommended)"><span class="tocnumber">6.1.2</span> <span class="toctext">Multilib GCC method (not recommended)</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-18">
<a href="#Other_architectures"><span class="tocnumber">6.2</span> <span class="toctext">Other architectures</span></a>
<ul>
<li class="toclevel-3 tocsection-19"><a href="#Arch_Linux_ARM"><span class="tocnumber">6.2.1</span> <span class="toctext">Arch Linux ARM</span></a></li>
<li class="toclevel-3 tocsection-20"><a href="#Additional_toolchains"><span class="tocnumber">6.2.2</span> <span class="toctext">Additional toolchains</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-21">
<a href="#Troubleshooting"><span class="tocnumber">7</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-22"><a href="#Journalctl"><span class="tocnumber">7.1</span> <span class="toctext">Journalctl</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#code_110"><span class="tocnumber">7.2</span> <span class="toctext">code 110</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#%E4%BF%AE%E6%94%B9_%24HOME/.distcc_%E4%BD%8D%E7%BD%AE%E4%BB%A5%E9%99%90%E5%88%B6%E7%A1%AC%E7%9B%98%E4%BD%BF%E7%94%A8"><span class="tocnumber">7.3</span> <span class="toctext">修改 $HOME/.distcc 位置以限制硬盘使用</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="#%E4%BF%AE%E6%94%B9%E6%97%A5%E5%BF%97%E7%BA%A7%E5%88%AB"><span class="tocnumber">7.4</span> <span class="toctext">修改日志级别</span></a></li>
</ul>
</li>
</ul>
</div>

<h2>
<span id=".E5.90.8D.E8.AF.8D.E5.AE.9A.E4.B9.89"></span><span class="mw-headline" id="名词定义">名词定义</span>
</h2>
<dl>
<dt>主机</dt>
<dd>启动编译的机器.</dd>
<dt>从机</dt>
<dd>接受 master 的编译请求，一个系统可以包含一个或多个从机。</dd>
</dl>
<h2>
<span id=".E5.BC.80.E5.A7.8B"></span><span class="mw-headline" id="开始">开始</span>
</h2>
<p>将所有用到的计算机都<a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">安装</a>软件包 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=distcc">distcc</a></span>。如果是其他的发行版甚至使用 Cygwin 的 Windows 操作系统,请阅读 <a rel="nofollow" class="external text" href="http://distcc.samba.org/doc.html">distcc 文档</a>。
</p>
<h2>
<span id=".E9.85.8D.E7.BD.AE"></span><span class="mw-headline" id="配置">配置</span>
</h2>
<h3>
<span id=".E4.BB.8E.E6.9C.BA.E9.85.8D.E7.BD.AE"></span><span class="mw-headline" id="从机配置">从机配置</span>
</h3>
<p>编辑 <code>/etc/conf.d/distccd</code>，修改唯一没有被注释掉的那一行，设置正确的 IP 地址或整个子网。
</p>
<pre>DISTCC_ARGS="--user nobody --allow 192.168.0.0/24"
</pre>
<pre>DISTCC_ARGS="--allow 192.168.0.0/24"
</pre>
<p><a rel="nofollow" class="external text" href="http://www.ipaddressguide.com/cidr">CIDR Utility Tool</a>可以帮助进行地址转换，其它设置请参考 <span class="plainlinks archwiki-template-man" title="$ man 1 distcc"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/distcc.1">distcc(1)</a></span>.
</p>
<p>在所有从机上<a href="../en/Systemd.html#Using_units" class="mw-redirect" title="Start">启动</a> 服务 <code>distccd.service</code>。要开机启动，请<a href="../en/Systemd.html#Using_units" class="mw-redirect" title="Enable">启用</a> 此服务。
</p>
<h3>
<span id=".E4.B8.BB.E6.9C.BA.E9.85.8D.E7.BD.AE"></span><span class="mw-headline" id="主机配置">主机配置</span>
</h3>
<h4>
<span id="makepkg_.E7.BC.96.E8.AF.91"></span><span class="mw-headline" id="makepkg_编译">makepkg 编译</span>
</h4>
<p>编辑<code>/etc/makepkg.conf</code>：
</p>
<ol>
<li>确保 BUILDENV 中的 distcc 没有被禁用(前面没有感叹号)</li>
<li>编辑<i>DISTCC_HOSTS</i> ，加入可以使用的编译服务器的 IP 地址 + 反斜杠 + 线程数，不同 IP 地址用空格隔开，按照处理器性能排列</li>
<li>修改 MAKEFLAGS 中的 N 为所有使用线程的和。在下面的示例为 5+3+3=11. 如果超过这个值，超出的线程将会被 distcc阻塞。</li>
</ol>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 在单机编译时一般定义为 CPU 数加一，仅在单机编译时才是对的，这里不应该使用这个方法。</div>
<p>相关行的示例:
</p>
<pre>BUILDENV=(distcc fakeroot color !ccache check !sign)
MAKEFLAGS="-j11"
DISTCC_HOSTS="192.168.0.2/5 192.168.0.3/3 192.168.0.4/3"
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong>  <code>CFLAGS</code> 和 <code>CXXFLAGS</code> 中不能使用 <code>-march=native</code> 选项，否则 distccd 不会将编译任务发给其它机器。</div>
<h4>
<span id=".E9.9D.9E_makepkg_.E7.BC.96.E8.AF.91"></span><span class="mw-headline" id="非_makepkg_编译">非 makepkg 编译</span>
</h4>
<p>The minimal configuration for distcc on the master includes the setting of the available slaves. This can either be done by setting the addresses in the environment variable <code>DISTCC_HOSTS</code> or in either of the configuration files <code>$DISTCC_HOSTS</code>, <code>$DISTCC_DIR/hosts</code>, <code>~/.distcc/hosts</code> or <code>/etc/distcc/hosts</code>.
</p>
<p>Example for setting the slave address using <code>DISTCC_HOSTS</code>:
</p>
<pre>$ export DISTCC_HOSTS="192.168.0.3,lzo,cpp 192.168.0.4,lzo,cpp"
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This is a white space separated list.</div>
<p>Example for setting the slave addresses in the hosts configuration file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.distcc/hosts</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">192.168.0.3,lzo,cpp 192.168.0.4,lzo,cpp
</pre>
<p>Instead of explicitly listing the server addresses one can also use the avahi zeroconf mode. To use this mode <code>+zeroconf</code> must be in place instead of the server addresses and the distcc daemons on the slaves have to be started using the <code>--zeroconf</code> option. Note that this option does not support the pump mode!
</p>
<p>The examples add the following options to the address:
</p>
<ul>
<li>
<code>lzo</code>: Enables LZO compression for this TCP or SSH host (slave).</li>
<li>
<code>cpp</code>: Enables distcc-pump mode for this host (slave). Note: the build command must be wrapped in the pump script in order to start the include server.</li>
</ul>
<p>A description for the pump mode can be found here: <a rel="nofollow" class="external text" href="http://distcc.googlecode.com/svn%20...%20%3Cdiv%20class=/trunk/doc/web/man/distcc_1.html#TOC_8">HOW DISTCC-PUMP MODE WORKS</a><sup title="最后检查状态：404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-02 ⓘ]</sup> and <a rel="nofollow" class="external text" href="http://google-opensource.blogspot.de/2008/08/distccs-pump-mode-new-design-for.html">distcc's pump mode: A New Design for Distributed C/C++ Compilation </a>
</p>
<p>To use distcc-pump mode for a slave, users must start the compilation using the pump script otherwise the compilation will fail.
</p>
<h2>
<span id=".E7.BC.96.E8.AF.91"></span><span class="mw-headline" id="编译">编译</span>
</h2>
<h3>
<span id="makepkg_.E7.BC.96.E8.AF.91_2"></span><span class="mw-headline" id="makepkg_编译_2">makepkg 编译</span>
</h3>
<p>然后正常运行 makepkg 即可。
</p>
<h3>
<span id=".E9.9D.9E_makepkg_.E7.BC.96.E8.AF.91_2"></span><span class="mw-headline" id="非_makepkg_编译_2">非 makepkg 编译</span>
</h3>
<p>To compile a source file using the distcc pump mode, use the following command:
</p>
<pre>$ pump distcc g++ -c hello_world.cpp
</pre>
<p>In this case the pump script will execute distcc which in turn calls g++ with "-c hello_world.cpp" as parameter.
</p>
<p>To compile a Makefile project, first find out which variables are set by the compiler. For example in gzip-1.6,  one can find the following line in the Makefile: <code>CC = gcc -std=gnu99</code>. Normally the variables are called <code>CC</code> for C projects and <code>CXX</code> for C++ projects. To compile the project using distcc it would look like this:
</p>
<pre>$ wget <a rel="nofollow" class="external free" href="ftp://ftp.gnu.org/pub/gnu/gzip/gzip-1.6.tar.xz">ftp://ftp.gnu.org/pub/gnu/gzip/gzip-1.6.tar.xz</a>
$ tar xf gzip-1.6.tar.xz
$ cd gzip-1.6
$ ./configure
$ pump make -j2 CC="distcc gcc -std=gnu99"
</pre>
<p>This example would compile gzip using distcc's pump mode with two compile threads. For the correct <code>-j</code> setting have a look at <a rel="nofollow" class="external text" href="https://cdn.rawgit.com/distcc/distcc/master/doc/web/faq.html">What -j level to use?</a>
</p>
<h2>
<span id=".E7.9B.91.E8.A7.86.E8.BF.9B.E5.BA.A6"></span><span class="mw-headline" id="监视进度">监视进度</span>
</h2>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=distcc">distcc</a></span> ships with a cli monitor <code>distccmon-text</code> and a gtk monitor <code>distccmon-gnome</code> one can use to check on compilation status.
</p>
<p>The cli monitor can run continuously by appending a space followed by integer to the command which corresponds to the number of sec to wait for a repeat query:
</p>
<pre>$ distccmon-text 3
29291 Preprocess  probe_64.c                                 192.168.0.2[0]
30954 Compile     apic_noop.c                                192.168.0.2[0]
30932 Preprocess  kfifo.c                                    192.168.0.2[0]
30919 Compile     blk-core.c                                 192.168.0.2[1]
30969 Compile     i915_gem_debug.c                           192.168.0.2[3]
30444 Compile     block_dev.c                                192.168.0.3[1]
30904 Compile     compat.c                                   192.168.0.3[2]
30891 Compile     hugetlb.c                                  192.168.0.3[3]
30458 Compile     catalog.c                                  192.168.0.4[0]
30496 Compile     ulpqueue.c                                 192.168.0.4[2]
30506 Compile     alloc.c                                    192.168.0.4[0]
</pre>
<h2>
<span id=".22Cross_Compiling.22_with_distcc"></span><span class="mw-headline" id='"Cross_Compiling"_with_distcc'>"Cross Compiling" with distcc</span>
</h2>
<h3>
<span id="32-bit_x86_.28i686.29"></span><span class="mw-headline" id="32-bit_x86_(i686)">32-bit x86 (i686)</span>
</h3>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a><b>This article or section is out of date.</b><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> The <a href="../en/ArchWiki:Archive.html" class="mw-redirect" title="Install bundled 32-bit system in 64-bit system">Install bundled 32-bit system in 64-bit system</a> article has been archived (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Distcc_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">Talk:Distcc (简体中文)#</a>)</div>
</div>
<p>There are currently two methods from which to select to have the ability of distcc distribution of tasks over a cluster building i686 packages from a native x86_64 environment.  Neither is ideal, but to date, there are the only two methods documented on the wiki.
</p>
<p>An ideal setup is one that uses the unmodified ARCH packages for distccd running only once one each node regardless of building from the native environment or from within a chroot AND one that works with makepkg.  Again, this Utopian setup is not currently known.
</p>
<p>A <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=129762">discussion thread</a> has been started on the topic; feel free to contribute.
</p>
<h4>
<span id="Chroot_method_.28preferred.29"></span><span class="mw-headline" id="Chroot_method_(preferred)">Chroot method (preferred)</span>
</h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This method works, but is not very elegant requiring duplication of distccd on all nodes AND need to have a 32-bit chroots on all nodes.</div>
<p>Assuming the user has a <a href="../en/ArchWiki:Archive.html" class="mw-redirect" title="Install bundled 32-bit system in 64-bit system">32-bit chroot</a> setup and configured on <b>each node</b> of the distcc cluster, the strategy is to have two separate instances of distccd running on different ports on each node -- one runs in the native x86_64 environment and the other in the x86 chroot on a modified port.  Start makepkg via a <span class="plainlinks archwiki-template-man" title="$ man 1 schroot"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/schroot.1">schroot(1)</a></span>  command invoking makepkg.
</p>
<h5><span class="mw-headline" id="Add_port_numbers_to_DISTCC_HOSTS_on_the_i686_chroot">Add port numbers to DISTCC_HOSTS on the i686 chroot</span></h5>
<p>Append the port number defined eariler (3692) to each of the hosts in <code>/opt/arch32/etc/makepkg.conf</code> as follows:
</p>
<pre>DISTCC_HOSTS="192.168.1.101/5:3692 192.168.1.102/5:3692 192.168.1.103/3:3692"
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This only needs to be setup on the "master" i686 chroot.  Where "master" is defined as the one from which the compilation will take place.</div>
<h5><span class="mw-headline" id="Invoke_makepkg_from_the_Native_Environment">Invoke makepkg from the Native Environment</span></h5>
<p>Set up <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=schroot">schroot</a></span> on the native x86_64 environment.  Invoke makepkg to build an i686 package from the native x86_64 environment, simply by:
</p>
<pre>$ schroot -p -- makepkg -src
</pre>
<h4>
<span id="Multilib_GCC_method_.28not_recommended.29"></span><span class="mw-headline" id="Multilib_GCC_method_(not_recommended)">Multilib GCC method (not recommended)</span>
</h4>
<p>See <a href="../en/Makepkg.html#Build_32-bit_packages_on_a_64-bit_system" title="Makepkg">Makepkg#Build 32-bit packages on a 64-bit system</a>.
</p>
<h3><span class="mw-headline" id="Other_architectures">Other architectures</span></h3>
<h4><span class="mw-headline" id="Arch_Linux_ARM">Arch Linux ARM</span></h4>
<p>When building on an Arch Linux ARM device, the developers <i>highly</i> recommend using the official project <a rel="nofollow" class="external text" href="https://archlinuxarm.org/wiki/Distcc_Cross-Compiling">toolchains</a> which should be installed on the x86_64 slave machine(s).  Rather than manually managing these, the <a href="../en/Arch_User_Repository.html" class="mw-redirect" title="AUR">AUR</a> provides all four toolchains as well as simple systemd service units:
</p>
<ul>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/distccd-alarm-armv5/">distccd-alarm-armv5</a></span><sup><small>AUR</small></sup>
</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/distccd-alarm-armv6h/">distccd-alarm-armv6h</a></span><sup><small>AUR</small></sup>
</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/distccd-alarm-armv7h/">distccd-alarm-armv7h</a></span><sup><small>AUR</small></sup>
</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/distccd-alarm-armv8/">distccd-alarm-armv8</a></span><sup><small>AUR</small></sup>
</li>
</ul>
<p>Setup on the slave machine containing the toolchain is identical to <a href="#Slaves">#Slaves</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" class="mw-redirect" title="ArchWiki:Requests">断开的链接</a>：无效的部分]</sup> except that the name of the configuration file matches that of the respective package.  For example, <code>/etc/conf.d/distccd-armv7h</code>.
</p>
<p>A systemd service unit is provided for each respective package.  For example, <code>distccd-armv7h.service</code>.
</p>
<h4><span class="mw-headline" id="Additional_toolchains">Additional toolchains</span></h4>
<ul>
<li>
<a rel="nofollow" class="external text" href="https://embtoolkit.org/">EmbToolkit</a>: Tool for creating cross compilation tool chain; supports ARM and MIPS architectures; supports building of an LLVM based tool chain</li>
<li>
<a rel="nofollow" class="external text" href="http://crosstool-ng.org/">crosstool-ng</a>: Similar to EmbToolkit; supports more architectures (see website for more information)</li>
<li>
<a rel="nofollow" class="external text" href="https://www.linaro.org/downloads/">Linaro</a>: Provides tool chains for ARM development</li>
</ul>
<p>The <code>EmbToolkit</code> provides a nice graphical configuration menu (<code>make xconfig</code>) for configuring the tool chain.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Journalctl">Journalctl</span></h3>
<p>Use <code>journalctl</code> to find out what was going wrong:
</p>
<pre>$ journalctl $(which distccd) -e --since "5 min ago"
</pre>
<h3><span class="mw-headline" id="code_110">code 110</span></h3>
<p>Make sure that the tool chain works for the user account under which the distcc daemon process gets started (default is nobody). The following will test if the tool chain works for user nobody. In <code>/etc/passwd</code> change the login for the nobody user to the following:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ cat /etc/passwd</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
nobody:x:99:99:nobody:/:/bin/bash
...
</pre>
<p>Then cd into the directory containing the cross compiler binaries and try to execute the compiler:
</p>
<pre># su nobody
$ ./gcc --version
bash: ./gcc: Permission denied
</pre>
<p>Users experiencing this error should make sure that groups permissions as described in <a href="#Other_architectures">#Other architectures</a> are correctly in setup.
</p>
<p>Make sure to change back <code>/etc/passwd</code> to its original state after these modifications.
</p>
<p>Alternatively, use sudo without changing the shell in /etc/passwd.
</p>
<pre> # sudo -u nobody gcc --version
</pre>
<h3>
<span id=".E4.BF.AE.E6.94.B9_.24HOME.2F.distcc_.E4.BD.8D.E7.BD.AE.E4.BB.A5.E9.99.90.E5.88.B6.E7.A1.AC.E7.9B.98.E4.BD.BF.E7.94.A8"></span><span class="mw-headline" id="修改_$HOME/.distcc_位置以限制硬盘使用">修改 $HOME/.distcc 位置以限制硬盘使用</span>
</h3>
<p>distcc 默认会在 <code>$HOME/.distcc</code> 保存中间结果。在内存 /tmp 中创建 <i>.distcc</i> 并链接到 $HOME 可以避免磁盘读写。
</p>
<pre>$ export DISTCC_DIR=/tmp/distcc
</pre>
<h3>
<span id=".E4.BF.AE.E6.94.B9.E6.97.A5.E5.BF.97.E7.BA.A7.E5.88.AB"></span><span class="mw-headline" id="修改日志级别">修改日志级别</span>
</h3>
<p>默认日志放在 <code>/var/log/messages.log</code>，也可以放到一个单独的文件，例如通过 /tmp 放到 RAM 中。同时降低日志级别也可以只显示错误信息。LEVEL 可以是任意 syslog 级别，例如 critical, error, warning, notice, info, 或 debug.
</p>
<p>把它们<b>附加</b>到 <code>/etc/conf.d/distccd</code> 的 DISTCC_ARGS 中。 
</p>
<pre>DISTCC_ARGS="--user nobody --allow 192.168.0.0/24 --log-level error --log-file /tmp/distccd.log"
</pre>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../zh-CN/Category:Package_development.html" title="Category:Package development (简体中文)">Package development (简体中文)</a></li>
<li><a href="../zh-CN/Category:Networking.html" title="Category:Networking (简体中文)">Networking (简体中文)</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li>
<li><a href="../en/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Distcc_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;oldid=628470">https://wiki.archlinux.org/index.php?title=Distcc_(简体中文)&amp;oldid=628470</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 2 August 2020, at 17:40.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
