<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Intel C++ (简体中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Intel_C_简体中文 rootpage-Intel_C_简体中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Intel C++ (简体中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>相关文章</p>
<ul>
<li><a href="../en/Arch_Build_System.html" class="mw-redirect" title="ABS">ABS</a></li>
<li><a href="../en/Creating_packages.html" class="mw-redirect" title="Creating Packages">Creating Packages</a></li>
<li><a href="../en/Makepkg.html" title="Makepkg">Makepkg</a></li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>翻译状态：</strong>本文是 <a href="../en/Intel_C++.html" title="Intel C++">Intel_C++</a> 的<a href="../zh-CN/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (简体中文)">翻译</a>。上次翻译日期：2012-12-09。如果英文版本有所<a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Intel_C%2B%2B&amp;diff=0&amp;oldid=239486">更改</a>，则您可以帮助同步翻译。</div>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#%E5%9C%A8%E5%BC%80%E5%A7%8B%E4%B9%8B%E5%89%8D"><span class="tocnumber">1</span> <span class="toctext">在开始之前</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#%E8%AE%BE%E7%BD%AE%E5%92%8C%E5%AE%89%E8%A3%85"><span class="tocnumber">2</span> <span class="toctext">设置和安装</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#%E9%80%9A%E8%BF%87makepkg%E4%BD%BF%E7%94%A8ICC"><span class="tocnumber">3</span> <span class="toctext">通过makepkg使用ICC</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#%E6%96%B9%E6%B3%95_1_(2012%E5%B9%B412%E6%9C%8808%E6%97%A5)"><span class="tocnumber">3.1</span> <span class="toctext">方法 1 (2012年12月08日)</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5">
<a href="#icc_CFLAGS"><span class="tocnumber">4</span> <span class="toctext">icc CFLAGS</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#-xX"><span class="tocnumber">4.1</span> <span class="toctext">-xX</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#-Ox"><span class="tocnumber">4.2</span> <span class="toctext">-Ox</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#-w"><span class="tocnumber">4.3</span> <span class="toctext">-w</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#%E7%94%A8Intel_C_/_C++%E7%BC%96%E8%AF%91%E7%9A%84%E8%BD%AF%E4%BB%B6"><span class="tocnumber">5</span> <span class="toctext">用Intel C / C++编译的软件</span></a></li>
</ul>
</div>

<h2>
<span id=".E5.9C.A8.E5.BC.80.E5.A7.8B.E4.B9.8B.E5.89.8D"></span><span class="mw-headline" id="在开始之前">在开始之前</span>
</h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 通过ICC编译的软件，必须包含 <b>intel-openmp</b>库才能运行.  由于 <b>intel-openmp</b> 依赖 <b>intel-compiler-base</b>，用户必须在任何时候都安装有这两个包！</div>
<h2>
<span id=".E8.AE.BE.E7.BD.AE.E5.92.8C.E5.AE.89.E8.A3.85"></span><span class="mw-headline" id="设置和安装">设置和安装</span>
</h2>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/intel-parallel-studio-xe/">intel-parallel-studio-xe</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">断开的链接</a>：package not found]</sup> 位于 <a href="../en/Arch_User_Repository.html" class="mw-redirect" title="AUR">AUR</a>.  为了构建这个包，用户必须有一个许可文件，这个许可文件对个人和非商业用途免费。 这份许可文件可以通过电子邮件发送给用户 <a rel="nofollow" class="external text" href="https://registrationcenter.intel.com/RegCenter/AutoGen.aspx?ProductID=1517&amp;AccountID=&amp;EmailID=&amp;ProgramID=&amp;RequestDt=&amp;rm=NCOM&amp;lang=">注册</a> 并且应该在运行mkaepkg前复制到 $startdir 里.  当前的PKGBUILD需要7到8个包:
</p>
<ul>
<li>
<b>intel-compiler-base</b> - Intel C/C++ 编译器和基本库</li>
<li>
<b>intel-fortran-compiler</b> - Intel fortran 编译器和基本库  (仅 Parallel Studio XE)</li>
<li>
<b>intel-openmp</b> - Intel OpenMP 库</li>
<li>intel-idb- Intel C/C++ 调试器</li>
<li>intel-ipp - Intel 集成性能原件</li>
<li>intel-mkl - Intel 数学核心库 (Intel® MKL)</li>
<li>intel-sourcechecker - Intel 源代码检测器</li>
<li>intel-tbb - Intel 线程构建模块 (TBB)</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 至少需要两个标为<b>粗体</b>的包.</div>
<h2>
<span id=".E9.80.9A.E8.BF.87makepkg.E4.BD.BF.E7.94.A8ICC"></span><span class="mw-headline" id="通过makepkg使用ICC">通过makepkg使用ICC</span>
</h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 不是每个包都能在不大量修改源代码的情况下通过ICC编译。</div>
<p>目前没有通过makepkg运行ICC的官方指南。本节的目的是收集用户使用的各种方法。如果您愿意提出您宝贵的建议，请将您的建议建立一个新的小节。
</p>
<h3>
<span id=".E6.96.B9.E6.B3.95_1_.282012.E5.B9.B412.E6.9C.8808.E6.97.A5.29"></span><span class="mw-headline" id="方法_1_(2012年12月08日)">方法 1 (2012年12月08日)</span>
</h3>
<p>修改<code>/etc/makepkg.conf</code> 中的<b>CXXFLAGS</b>以使makepkg使用ICC。 在现有的文件里添加以下代码。调用makepkg时不需要什么特殊的开关。
</p>
<pre>_CC=icc
if [ $_CC = "icc" ]; then
export CC="icc"
export CXX="icpc"
export CFLAGS="-march=native -O3 -no-prec-div -fno-alias -pipe"
export CXXFLAGS="${CFLAGS}"
export LDFLAGS="-Wl,-O1,--sort-common,--as-needed"
export AR="xiar"
export LD="xild"
fi</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 可以简单地通过注释 <b>_CC</b>变量切换GCC或ICC。</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 如果用以上的方法编译失败请使用 <i>gcc</i>编译, 所以你应该测试你的程序是否能用 <i>icc</i>正确编译。</div>
<p>测试你的软件是否真的是用ICC编译的:
</p>
<ul><li>输入命令 <b>ldd [你的程序] | grep intel</b> 如果这个程序连接到一个位于 <b>/opt/intel/lib/</b>中的共享库，那么它就是ICC编译的。</li></ul>
<ul><li>另一种方法是观察编译时的输出，看他是否使用了<i>icc</i> 或者 <i>icpc</i> 命令。</li></ul>
<ul><li>最后一种方法是看警告信息是不是<i>icc</i>风格的。</li></ul>
<h2><span class="mw-headline" id="icc_CFLAGS">icc CFLAGS</span></h2>
<p>In general, icc supports many of the same CFLAGS gcc supports and is also pretty tolerant to gcc flags it cannot use.  In most cases it will happily ignore the flag warning the user and moving on.  For an exhaustive list and explanation of available compiler flags, consult the icc manpage or better yet by invoking the compiler with the help flag:
</p>
<pre>icc --help
</pre>
<h3><span class="mw-headline" id="-xX">-xX</span></h3>
<p>Use to generate specialized code to run exclusively on processors supporting it.  If unsure which option to use, simply inspect the <b>flags</b> section of <code>/proc/cpuinfo</code>.  In the example below, <b>SSE4.1</b> would be the correct selection:
</p>
<pre>$ cat /proc/cpuinfo  | grep -m 1 flags
flags: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush 
dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx lm constant_tsc arch_perfmon pebs 
bts rep_good nopl aperfmperf pni dtes64 monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr
pdcm sse4_1 lahf_lm dts tpr_shadow vnmi flexpriority</pre>
<ul>
<li>-xHost</li>
<li>-xSSE2</li>
<li>-xSSE3</li>
<li>-xSSSE3</li>
<li>-xSSE4.1</li>
<li>-xSSE4.2</li>
<li>-xAVX</li>
<li>-xCORE-AVX-I</li>
<li>-xSSSE3_ATOM</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> 使用 <b>-xHost</b> 如果你不确定你的处理器支持什么。</div>
<h3><span class="mw-headline" id="-Ox">-Ox</span></h3>
<p>和gcc一样. x 是下列选上之一:
</p>
<ul>
<li>0 - 不进行优化</li>
<li>1 - 优化以使得执行速度变快，但是不进行那些增加代码但是提高速度有限的优化</li>
<li>2 - 缺省，优化以使得执行速度变快</li>
<li>3 - 优化以使得执行速度最快，除了O2的优化外，还包含一些比较激进的优化（不是对所有程序都会提高性能）</li>
</ul>
<h3><span class="mw-headline" id="-w">-w</span></h3>
<p>与gcc类似:
</p>
<ul>
<li>-w      - 关闭所有警告 (推荐在编译包时使用)</li>
<li>-Wbrief - print brief one-line diagnostics</li>
<li>-Wall   - 开启所有警告</li>
<li>-Werror  - 强制将警告视为错误</li>
</ul>
<h2>
<span id=".E7.94.A8Intel_C_.2F_C.2B.2B.E7.BC.96.E8.AF.91.E7.9A.84.E8.BD.AF.E4.BB.B6"></span><span class="mw-headline" id="用Intel_C_/_C++编译的软件">用Intel C / C++编译的软件</span>
</h2>
<p>在下面的表格中我们发布了一个我们用Intel C/C++ 编译器尝试过编译的包列表 .应该可以用ABS取得源码。
</p>
<table class="wikitable sortable collapsible">

<tbody>
<tr style="background: #ffdead;">
<th>Application</th>
<th>Compile</th>
<th>Comments
</th>
</tr>
<tr>
<td><b>xz</b></td>
<td style="background: Lime">OK</td>
<td>Works with the <a href="#%E6%96%B9%E6%B3%95_1_(2012%E5%B9%B412%E6%9C%8808%E6%97%A5)">Method 1</a>
</td>
</tr>
<tr>
<td><b>zlib</b></td>
<td style="background: Lime">OK</td>
<td>Works with the <a href="#%E6%96%B9%E6%B3%95_1_(2012%E5%B9%B412%E6%9C%8808%E6%97%A5)">Method 1</a>
</td>
</tr>
<tr>
<td><b>GIMP 2.8</b></td>
<td style="background: Lime">OK</td>
<td>Works with the <a href="#%E6%96%B9%E6%B3%95_1_(2012%E5%B9%B412%E6%9C%8808%E6%97%A5)">Method 1</a>
</td>
</tr>
<tr>
<td><b>Pacman 4.0.3</b></td>
<td style="background: Lime">OK</td>
<td>Works with the <a href="#%E6%96%B9%E6%B3%95_1_(2012%E5%B9%B412%E6%9C%8808%E6%97%A5)">Method 1</a>
</td>
</tr>
<tr>
<td><b>x264</b></td>
<td style="background: Lime">OK</td>
<td>Works with the <a href="#%E6%96%B9%E6%B3%95_1_(2012%E5%B9%B412%E6%9C%8808%E6%97%A5)">Method 1</a>
</td>
</tr>
<tr>
<td><b>MySQL</b></td>
<td style="background: Lime">OK</td>
<td>Works with the <a href="#%E6%96%B9%E6%B3%95_1_(2012%E5%B9%B412%E6%9C%8808%E6%97%A5)">Method 1</a>
</td>
</tr>
<tr>
<td><b>SQLite</b></td>
<td style="background: Lime">OK</td>
<td>Works with the <a href="#%E6%96%B9%E6%B3%95_1_(2012%E5%B9%B412%E6%9C%8808%E6%97%A5)">Method 1</a>
</td>
</tr>
<tr>
<td><b>LAME</b></td>
<td style="background: Lime">OK</td>
<td>Works with the <a href="#%E6%96%B9%E6%B3%95_1_(2012%E5%B9%B412%E6%9C%8808%E6%97%A5)">Method 1</a>
</td>
</tr>
<tr>
<td><b>xaos</b></td>
<td style="background: Lime">OK</td>
<td>Works with the <a href="#%E6%96%B9%E6%B3%95_1_(2012%E5%B9%B412%E6%9C%8808%E6%97%A5)">Method 1</a>
</td>
</tr>
<tr>
<td><b>VLC</b></td>
<td style="background: pink">Out of date</td>
<td>There's some problem with the compiler flags
</td>
</tr>
<tr>
<td><b>MPlayer</b></td>
<td style="background: pink">Out of date</td>
<td>It don't recognize the Intel compiler
</td>
</tr>
<tr>
<td><b>optipng</b></td>
<td style="background: GreenYellow">OK</td>
<td>Works with the <a href="#%E6%96%B9%E6%B3%95_1_(2012%E5%B9%B412%E6%9C%8808%E6%97%A5)">Method 1</a>. Comment out LD=xild in makepkg.conf
</td>
</tr>
<tr>
<td><b>python-numpy</b></td>
<td style="background: GreenYellow">OK</td>
<td>We must edit the PKGBUILD. <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/python-numpy-mkl/">python-numpy-mkl</a></span><sup><small>AUR</small></sup>
</td>
</tr>
<tr>
<td><b>python-scipy</b></td>
<td style="background: GreenYellow">OK</td>
<td>We must edit the PKGBUILD. <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/python-scipy-mkl/">python-scipy-mkl</a></span><sup><small>AUR</small></sup>
</td>
</tr>
<tr>
<td><b>Qt</b></td>
<td style="background: GreenYellow">OK</td>
<td>We must add the option <i>-platform linux-icc-64 (or 32)</i> in the configure command
</td>
</tr>
<tr>
<td><b>systemd</b></td>
<td style="background: red">Fail</td>
<td>undefined reference to `server_dispatch_message'
</td>
</tr>
</tbody>
</table>
<p><b>图例:</b>
</p>
<table class="wikitable">

<tbody>
<tr>
<td style="background: Lime">OK</td>
<td>可以用icc编译并且工作
</td>
</tr>
<tr>
<td style="background: GreenYellow">OK</td>
<td>可以用icc编译并且工作，但是需要编辑PKGBUILD
</td>
</tr>
<tr>
<td style="background: Tomato">Unsuccessful</td>
<td>可以编译，但有错误
</td>
</tr>
<tr>
<td style="background: yellow">Not recommended</td>
<td>可以编译，但不推荐
</td>
</tr>
<tr>
<td style="background: red">Fail</td>
<td>无法使用ICC编译这个包
</td>
</tr>
<tr>
<td style="background: pink">Out of date</td>
<td>用以前的CFLAGS不成功，你可以试试新的<a href="#%E6%96%B9%E6%B3%95_1_(2012%E5%B9%B412%E6%9C%8808%E6%97%A5)">Method 1</a>，别忘了把结果贴上来！
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../zh-CN/Category:Development.html" title="Category:Development (简体中文)">Development (简体中文)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Intel_C%2B%2B_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;oldid=627461">https://wiki.archlinux.org/index.php?title=Intel_C%2B%2B_(简体中文)&amp;oldid=627461</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 31 July 2020, at 16:33.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
