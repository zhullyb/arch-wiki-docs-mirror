<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Oracle Database (简体中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Oracle_Database_简体中文 rootpage-Oracle_Database_简体中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Oracle Database (简体中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a><b>This article or section is out of date.</b><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> <span style="color:red;">please use the first argument of the template to provide a brief explanation.</span> (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Oracle_Database_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">Talk:Oracle Database (简体中文)#</a>)</div>
</div>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#%E4%BB%8B%E7%BB%8D"><span class="tocnumber">1</span> <span class="toctext">介绍</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#%E5%AE%89%E8%A3%85%E6%96%B9%E6%B3%951_-_%E6%89%8B%E5%8A%A8"><span class="tocnumber">2</span> <span class="toctext">安装方法1 - 手动</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#%E5%87%86%E5%A4%87%E5%AE%89%E8%A3%85"><span class="tocnumber">2.1</span> <span class="toctext">准备安装</span></a></li>
<li class="toclevel-2 tocsection-4">
<a href="#%E5%AE%89%E8%A3%85%E6%A1%8C%E9%9D%A2%E7%8E%AF%E5%A2%83"><span class="tocnumber">2.2</span> <span class="toctext">安装桌面环境</span></a>
<ul>
<li class="toclevel-3 tocsection-5"><a href="#%E5%AE%89%E8%A3%85Oracle%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BF%85%E9%9C%80%E7%9A%84%E8%BD%AF%E4%BB%B6%E5%8C%85"><span class="tocnumber">2.2.1</span> <span class="toctext">安装Oracle数据库必需的软件包</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#%E9%85%8D%E7%BD%AE"><span class="tocnumber">2.2.2</span> <span class="toctext">配置</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-7">
<a href="#%E5%9B%BE%E5%BD%A2%E5%AE%89%E8%A3%85"><span class="tocnumber">2.3</span> <span class="toctext">图形安装</span></a>
<ul>
<li class="toclevel-3 tocsection-8"><a href="#%E5%AE%89%E8%A3%85Oracle%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BD%AF%E4%BB%B6"><span class="tocnumber">2.3.1</span> <span class="toctext">安装Oracle数据库软件</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-9"><a href="#Oracle%E4%BC%81%E4%B8%9A%E7%AE%A1%E7%90%86%E5%AE%89%E8%A3%85(%E5%8F%AF%E9%80%89)"><span class="tocnumber">2.4</span> <span class="toctext">Oracle企业管理安装(可选)</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10">
<a href="#%E5%AE%89%E8%A3%85%E6%96%B9%E6%B3%952_-_AUR"><span class="tocnumber">3</span> <span class="toctext">安装方法2 - AUR</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#%E5%AE%89%E8%A3%85"><span class="tocnumber">3.1</span> <span class="toctext">安装</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12">
<a href="#Post_%E5%AE%89%E8%A3%85"><span class="tocnumber">4</span> <span class="toctext">Post 安装</span></a>
<ul>
<li class="toclevel-2 tocsection-13">
<a href="#%E5%88%9B%E5%BB%BA%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="tocnumber">4.1</span> <span class="toctext">创建初始化数据库</span></a>
<ul>
<li class="toclevel-3 tocsection-14"><a href="#%E5%9B%BE%E5%BD%A2"><span class="tocnumber">4.1.1</span> <span class="toctext">图形</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#Scripted"><span class="tocnumber">4.1.2</span> <span class="toctext">Scripted</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="#%E6%B5%8B%E8%AF%95%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="tocnumber">4.1.3</span> <span class="toctext">测试数据库</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-17"><a href="#%E5%9C%A8%E5%90%AF%E5%8A%A8%E6%97%B6%E5%90%AF%E5%8A%A8oracle"><span class="tocnumber">4.2</span> <span class="toctext">在启动时启动oracle</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#%E4%B8%BA%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7%E8%AE%BE%E5%AE%9A%E6%9D%83%E9%99%90"><span class="tocnumber">4.3</span> <span class="toctext">为普通用户设定权限</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-19">
<a href="#Transfer_existing_Oracle_installation"><span class="tocnumber">5</span> <span class="toctext">Transfer existing Oracle installation</span></a>
<ul>
<li class="toclevel-2 tocsection-20"><a href="#%E6%9B%B4%E5%A4%9A%E8%B5%84%E6%BA%90"><span class="tocnumber">5.1</span> <span class="toctext">更多资源</span></a></li>
</ul>
</li>
</ul>
</div>

<h2>
<span id=".E4.BB.8B.E7.BB.8D"></span><span class="mw-headline" id="介绍">介绍</span>
</h2>
<p>这份文档将会帮助您把Oracle数据库11gR1安装到Arch Linux。使用安装方法2，您可以仅仅通过几个步骤完成长时间的安装过程。
</p>
<h2>
<span id=".E5.AE.89.E8.A3.85.E6.96.B9.E6.B3.951_-_.E6.89.8B.E5.8A.A8"></span><span class="mw-headline" id="安装方法1_-_手动">安装方法1 - 手动</span>
</h2>
<p>这节将会引导您在全新的archlinux上安装Oracle。这是一个通用的方法，在内核2.6.28.ARCH 64位机器上安装Oracle 11g R1 64
位测试通过。<i><b>这在其他版本的Orale上也应该可以工作</b></i>。
</p>
<h3>
<span id=".E5.87.86.E5.A4.87.E5.AE.89.E8.A3.85"></span><span class="mw-headline" id="准备安装">准备安装</span>
</h3>
<h3>
<span id=".E5.AE.89.E8.A3.85.E6.A1.8C.E9.9D.A2.E7.8E.AF.E5.A2.83"></span><span class="mw-headline" id="安装桌面环境">安装桌面环境</span>
</h3>
<pre># pacman -Syu
# pacman -S python
# pacman -U <a rel="nofollow" class="external free" href="ftp://ftp.berlios.de/pub/aurbuild/aurbuild-1.8.4-1-any.pkg.tar.gz">ftp://ftp.berlios.de/pub/aurbuild/aurbuild-1.8.4-1-any.pkg.tar.gz</a>
</pre>
<p>安装并测试Xorg。
</p>
<pre># pacman -S xorg
# pacman -S hwd
</pre>
<p>尽管从Xorg 7.4后，xorg.conf 不再需要。这命令是可选的。
</p>
<pre># hwd -x
# cp /etc/X11/xorg.conf.vesa /etc/X11/xorg.conf
</pre>
<p>使用<code>startx</code>检查(Should get mouse movement with X cursor - Ctrl-Alt-Backspace to exit.)
</p>
<pre>$ startx
</pre>
<p>安装桌面环境，Gnome,KDE 或 Xfce。这个例子假设Xfce4将被安装：
</p>
<pre># pacman -S xfce4
# pacman -S pcmanfm
</pre>
<p>运行 xfce:
</p>
<pre>$ startxfce4
</pre>
<h4>
<span id=".E5.AE.89.E8.A3.85Oracle.E6.95.B0.E6.8D.AE.E5.BA.93.E5.BF.85.E9.9C.80.E7.9A.84.E8.BD.AF.E4.BB.B6.E5.8C.85"></span><span class="mw-headline" id="安装Oracle数据库必需的软件包">安装Oracle数据库必需的软件包</span>
</h4>
<p><a href="../en/Pacman.html" title="Pacman">安装</a> 软件包 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=unzip">unzip</a></span> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=sudo">sudo</a></span> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/groups/x86_64/base-devel/">base-devel</a></span> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=icu">icu</a></span> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gawk">gawk</a></span> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gdb">gdb</a></span> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=elfutils">elfutils</a></span> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=sysstat">sysstat</a></span> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libstdc%2B%2B5">libstdc++5</a></span>.
</p>
<p>安装 <a href="../en/Java.html" title="Java">Java</a> 运行时环境，例如 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=jre7-openjdk">jre7-openjdk</a></span> 或 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=jdk7-openjdk">jdk7-openjdk</a></span>.
</p>
<p>安装ksh (problem with aurbuild -s ksh).
</p>
<pre>mkdir -p ABS/ksh
cd ABS/ksh
chmod 777 -R /software
wget --http-user "I accept www.opensource.org/licenses/cpl" --http-password "." <a rel="nofollow" class="external free" href="http://www.research.att.com/~gsf/download/tgz/INIT.2009-05-05.tgz">http://www.research.att.com/~gsf/download/tgz/INIT.2009-05-05.tgz</a><sup title="最后检查状态：404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-04 ⓘ]</sup>
wget --http-user "I accept www.opensource.org/licenses/cpl" --http-password "." <a rel="nofollow" class="external free" href="http://www.research.att.com/~gsf/download/tgz/ast-ksh.2009-05-05.tgz">http://www.research.att.com/~gsf/download/tgz/ast-ksh.2009-05-05.tgz</a><sup title="最后检查状态：404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-04 ⓘ]</sup>
wget <a rel="nofollow" class="external free" href="https://aur.archlinux.org/packages/ksh/ksh/PKGBUILD">https://aur.archlinux.org/packages/ksh/ksh/PKGBUILD</a><sup title="最后检查状态：404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-04 ⓘ]</sup>
wget <a rel="nofollow" class="external free" href="https://aur.archlinux.org/packages/ksh/ksh/ksh.install">https://aur.archlinux.org/packages/ksh/ksh/ksh.install</a><sup title="最后检查状态：404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-04 ⓘ]</sup>
makepkg -c --asroot
makepkg -i --asroot
</pre>
<pre>pacman -S icu
aurbuild -s beecrypt
aurbuild -s rpm
pacman -S gawk
pacman -S gdb
aurbuild -s libaio
pacman -S libelf
pacman -S sysstat
pacman -S libstdc++5
</pre>
<p>Oracle32位数据库需要unixodbc。
</p>
<pre># pacman -S unixodbc
</pre>
<p>可选的lib32 软件包 x86_64: 
</p>
<pre># pacman -S lib32-libstdc++5 
# pacman -S lib32-glibc 
# pacman -S lib32-gcc-libs
</pre>
<p>Oracle数据库需要32位的libaio和unixodbc在x86_64上，但在32位上是不必要的。 
</p>
<p>Oracle Universal Installer需要的一些软链接。
</p>
<pre># ln -s /usr/bin/rpm /bin/rpm
# ln -s /usr/bin/ksh /bin/ksh
# ln -s /bin/awk /usr/bin/awk
# ln -s /bin/tr /usr/bin/tr
# ln -s /usr/bin/basename /bin/basename
</pre>
<p>Arch x86_64:
</p>
<pre># ln -s /usr/lib /usr/lib64
</pre>
<h4>
<span id=".E9.85.8D.E7.BD.AE"></span><span class="mw-headline" id="配置">配置</span>
</h4>
<p>为Orcale数据库创建用户和组：
</p>
<pre># groupadd oinstall
# groupadd dba
# useradd -m -g oinstall -G dba oracle
</pre>
<p>为用户oracle设置密码：
</p>
<pre># passwd oracle
</pre>
<p>可选: Add oracle to the <code>sshd_config</code> file.
</p>
<pre># pacman -S openssh
</pre>
<p>Add this line to <code>/etc/ssh/sshd_config</code>:
</p>
<pre>AllowUsers oracle
</pre>
<p>Add oracle to <code>/etc/sudoers</code>. This will give oracle super user privilege.
</p>
<pre>oracle    ALL=(ALL) ALL
</pre>
<p>Add these lines to <code>/etc/sysctl.d/99-sysctl.conf</code> (<i><b>Review Oracle documentation to adjust these settings</b></i>).
</p>
<pre># oracle kernel settings
fs.file-max = 6553600
kernel.shmall = 2097152
kernel.shmmax = 2147483648
kernel.shmmni = 4096
kernel.sem = 250 32000 100 128
net.ipv4.ip_local_port_range = 1024 65535
net.core.rmem_default = 4194304
net.core.rmem_max = 4194304
net.core.wmem_default = 262144
net.core.wmem_max = 262144
</pre>
<p>Add these lines to <code>/etc/security/limits.conf</code> (<i><b>Review Oracle documentation to adjust these settings</b></i>)
</p>
<pre># oracle settings
oracle           soft    nproc   2047
oracle           hard    nproc   16384
oracle           soft    nofile  1024
oracle           hard    nofile  65536
</pre>
<p>可选: 想使变化生效您可以重启电脑。
</p>
<p>为Ocale数据库创建一些目录。您可以选择目录路径。下面是参考例子。 
</p>
<pre>mkdir -p /oracle
mkdir -p /oracle/inventory
mkdir -p /oracle/recovery
mkdir -p /oracle/product/db
</pre>
<p>为目录设定权限。
</p>
<pre>chown -R oracle:dba /oracle
chmod 777 /tmp
</pre>
<p>Create or update oracle bashrc <code>/home/oracle/.bashrc</code>. Here is an example of the oracle user settings.
</p>
<pre>export ORACLE_BASE=/oracle
export ORACLE_HOME=/oracle/product/db
export ORACLE_SID=xdb
export ORACLE_INVENTORY=/oracle/inventory
export ORACLE_BASE ORACLE_SID ORACLE_HOME
export PATH=$ORACLE_HOME/bin:$PATH
export LD_LIBRARY_PATH=$ORACLE_HOME/lib:$LD_LIBRARY_PATH
export EDITOR=nano
export VISUAL=nano
</pre>
<h3>
<span id=".E5.9B.BE.E5.BD.A2.E5.AE.89.E8.A3.85"></span><span class="mw-headline" id="图形安装">图形安装</span>
</h3>
<h4>
<span id=".E5.AE.89.E8.A3.85Oracle.E6.95.B0.E6.8D.AE.E5.BA.93.E8.BD.AF.E4.BB.B6"></span><span class="mw-headline" id="安装Oracle数据库软件">安装Oracle数据库软件</span>
</h4>
<p>从下面下载Orcale数据库：
<a rel="nofollow" class="external free" href="http://www.oracle.com/technology/software/products/database/index.html">http://www.oracle.com/technology/software/products/database/index.html</a>
</p>
<p>解压Oracle数据库。
</p>
<p>Arch i686:
</p>
<pre>unzip linux_11gR1_database_1013.zip -d /media
</pre>
<p>Arch x86_64:
</p>
<pre>unzip linux.x64_11gR1_database_1013.zip -d /media
</pre>
<p>可选: Arch x86_64 (only required if the installer will not launch automatically ... at the time of this writing there was an issue with the packaged unzip in the 64-bit Oracle installer):
</p>
<pre>cd /media/database/install
mv unzip unzipx
ln -s /usr/bin/unzip 
</pre>
<p>Change the permissions for the extracted Oracle database.
</p>
<pre>chmod -R 777 /media/database
chown -R oracle:oinstall /media/database
</pre>
<p>Enter the directory where you extracted the Oracle database.
</p>
<p>In oder to run oracle installation script you need to export the X display as a normal user:
</p>
<pre>DISPLAY=:0.0; export DISPLAY; xhost +
</pre>
<p>Login as the user oracle and export the X display:
</p>
<pre>su oracle
DISPLAY=:0.0; export DISPLAY
</pre>
<p>Enter the database directory and run the Oracle Universal Installer as the user oracle.
</p>
<pre>cd /media/database
./runInstaller -ignoreSysPrereqs
</pre>
<p>在图形安装过程中：
</p>
<ol>
<li>Click on "Next".</li>
<li>Choose "Enterprise Edition" Installation Type and click on "Next"</li>
<li>Oracle Base should be: /oracle. Do not change it, unless you know what you are doing.
<ol>
<li>Change the default "Name" to orarch or something else.</li>
<li>The predefined path in <code>/etc/rc.d/oracledb</code> is "db", ie: /oracle/product/db. If you want to use a different path you will have to change <code>/etc/rc.d/oracledb</code>, so that the startup script can locate ORACLE_HOME directory.</li>
<li>After changing the defaults, click on "Next".</li>
</ol>
</li>
<li>Since Oracle database requires certain distro requirement, you will have to manually check them and then click on "Next".</li>
<li>Chose "Software Install Only" and click on "Next".</li>
<li>There is only one DBA group for oracle database. Click on "Next".</li>
<li>Install "Summary" shows what's going to be installed. Click on "Install".</li>
<li>The installation will take some time, especially the "Linking" part. Be patient! If you get an error message ignore it by clicking on "Continue".
<ol>
<li>At the end of the installation you will have to open another terminal, and execute <code>/oracle/product/db/root.sh</code> as root. <b>Do not click on "OK" yet</b>.</li>
<li>When running root.sh, you will be offered to use /usr/local/bin as the full pathname. Press the "Enter" key here.</li>
<li>Now you can click on "OK"</li>
</ol>
</li>
<li>Installation is finished, click on "Exit" and "Yes", you really want to exit.</li>
</ol>
<h3>
<span id="Oracle.E4.BC.81.E4.B8.9A.E7.AE.A1.E7.90.86.E5.AE.89.E8.A3.85.28.E5.8F.AF.E9.80.89.29"></span><span class="mw-headline" id="Oracle企业管理安装(可选)">Oracle企业管理安装(可选)</span>
</h3>
<p>This section describes how to install the web based OEM available in 10g+.  
</p>
<p><i>Depending on your settings the OUI may have already installed this</i>.
</p>
<p>Login or su to oracle, then run the following commands (answering the prompts approriately). <i><b>This may take a while</b></i>.
</p>
<pre>cd ${ORACLE_HOME}/bin
./emca -repos create
./emca -config dbcontrol db
</pre>
<p>Test this out by navigating to the enterprise manager (adjust the servername (localhost) apporpriately).  
</p>
<pre><a rel="nofollow" class="external free" href="https://localhost:1158/em/console">https://localhost:1158/em/console</a>
</pre>
<p>You can control OEM with the following commands.
</p>
<pre>emctl status dbconsole
emctl stop dbconsole
emctl start dbconsole
</pre>
<h2>
<span id=".E5.AE.89.E8.A3.85.E6.96.B9.E6.B3.952_-_AUR"></span><span class="mw-headline" id="安装方法2_-_AUR">安装方法2 - AUR</span>
</h2>
<h3>
<span id=".E5.AE.89.E8.A3.85"></span><span class="mw-headline" id="安装">安装</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  这种安装方法会自动创建数据库，因此，在安装完后，Orcale数据库就可以使用了。</div>
<p><b>第一步</b>
从AUR里面下载Arch Linux 软件包：<a rel="nofollow" class="external free" href="https://aur.archlinux.org/packages.php?ID=23730">https://aur.archlinux.org/packages.php?ID=23730</a><sup title="最后检查状态：404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-04 ⓘ]</sup>
下载Oracle数据库11gR1：<a rel="nofollow" class="external free" href="http://www.oracle.com/technology/software/products/database/index.html">http://www.oracle.com/technology/software/products/database/index.html</a>
</p>
<p><b>第二步</b>
解压Arch Linux 软件包到一个目录。同时把Oracle数据库11gR1复制到同一目录下。
</p>
<p>信息:默认的安装配置<code> ee.rsp.patch</code>是:
</p>
<pre>ORACLE_BASE="/home/oracle/app/oracle"
ORACLE_HOME="/home/oracle/app/oracle/product/11.1.0/orarch"
ORACLE_HOME_NAME="orarch"
s_globalDBName="archlinux"
s_dbSid="archlinux"
s_superAdminSamePasswd="orarchdbadmin"
s_superAdminSamePasswdAgain="orarchdbadmin"
</pre>
<p>可选: You can either change the default password now or later after the installation. If you change the ee.rsp.patch file, you need to update the md5sums in the PKGBUILD file. To obtain the md5sum, run (makepkg -g) or:
</p>
<pre>md5sum ee.rsp.patch 
</pre>
<p>创建Orcale数据库软件包通过使用makepkg：
</p>
<pre>makepkg -s
</pre>
<p><b>Step 3.</b>
安装已经创建好的软件包。
</p>
<p>Arch i686:
</p>
<pre>pacman -U oracle-11gR1-1-i686.pkg.tar.gz 
</pre>
<p>Arch x86_64:
</p>
<pre>pacman -U oracle-11gR1-1-x86_64.pkg.tar.gz 
</pre>
<p>Pacman现在将安装Oracle数据库通过执行Oracle自己的安装脚本(./runInstaller -silent -ignoreSysPrereqs)。 
</p>
<p>安装将花费一些时间。请耐心一点。在安装过程中不要退出终端，特别是安装脚本在执行配置助手时：
</p>
<pre>.... 
Starting to execute configuration assistants
Configuration assistant "Oracle Net Configuration Assistant" succeeded 
...
</pre>
<p>安装脚本会结束像下面所举的:
</p>
<pre>The following configuration scripts need to be executed as the "root" user.
#!/bin/sh
#Root script to run
/home/oracle/oraInventory/orainstRoot.sh
/home/oracle/app/oracle/product/11.1.0/orarch/root.sh
To execute the configuration scripts:
   1. Open a terminal window
   2. Log in as "root"
   3. Run the scripts
   
The installation of Oracle Database 11g was successful.
Please check '/home/oracle/oraInventory/logs/silentInstall2009-03-03_07-24-10PM.log'
for more details.
</pre>
<p><b>第四步</b>
以root身份运行这些脚本：
</p>
<pre>[ahc@archlinux ~]$ su
Password: 
</pre>
<pre>cd /home/oracle/oraInventory
./orainstRoot.sh
</pre>
<pre>cd /home/oracle/app/oracle/product/11.1.0/orarch
./root.sh
</pre>
<p><b>第五步</b>
默认的Oracle用户是“oracle”。由于没有为用户oracle设置密码，您需要以root身份运行passwd：
</p>
<pre>passwd oracle
</pre>
<p><b>第六步</b>
以用户oracle身份登录。
</p>
<pre>su oracle
</pre>
<p>创建文件/home/oracle/.bashrc，然后添加这些行到.bashrc文件：
</p>
<pre>export ORACLE_SID=archlinux
export ORACLE_HOME=/home/oracle/app/oracle/product/11.1.0/orarch
export PATH=$PATH:$ORACLE_HOME/bin
</pre>
<p><b>第七步</b>
如果您没有改变<code> ee.rsp.patch</code>文件,您需要<b>为SYS和SYSTEM改变管理密码</b>。 
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 如果数据库没有被挂载或者打开，以用户oracle身份登录然后首先尝试： </div>
<pre>su oracle
</pre>
<pre>sqlplus '/as sysdba'
</pre>
<pre>SQL&gt; startup mount;
SQL&gt; alter database open; 
</pre>
<p>为 <b>SYSTEM</b>用户更改密码:
</p>
<pre>sqlplus '/as sysdba'
</pre>
<pre>SQL&gt; show user
USER is "SYS"
</pre>
<pre>SQL&gt; passw system
Changing password for system
New password:
Retype new password:
Password changed
</pre>
<pre>SQL&gt; quit
</pre>
<p>为<b>SYS</b> 用户更改密码:
</p>
<pre>sqlplus system/secretpassword
</pre>
<pre>SQL&gt; show user;
USER is "SYSTEM"
</pre>
<pre>SQL&gt; passw sys
Changing password for sys
New password: 
Retype new password: 
Password changed
</pre>
<pre>SQL&gt; quit
</pre>
<h2>
<span id="Post_.E5.AE.89.E8.A3.85"></span><span class="mw-headline" id="Post_安装">Post 安装</span>
</h2>
<h3>
<span id=".E5.88.9B.E5.BB.BA.E5.88.9D.E5.A7.8B.E5.8C.96.E6.95.B0.E6.8D.AE.E5.BA.93"></span><span class="mw-headline" id="创建初始化数据库">创建初始化数据库</span>
</h3>
<h4>
<span id=".E5.9B.BE.E5.BD.A2"></span><span class="mw-headline" id="图形">图形</span>
</h4>
<p>You have only installed the Oracle database software. Now you need to create a database. Login as the user oracle:
</p>
<pre>su oracle
</pre>
<p>Export the ORACLE_HOME binary directory:
</p>
<pre>export ORACLE_HOME=/oracle/product/db
export PATH=$PATH:$ORACLE_HOME/bin
</pre>
<p>Run database installation script:
</p>
<pre>dbca
</pre>
<p>During the graphical installation:
</p>
<ol>
<li>Click on "Next".</li>
<li>Check "Create a Database" and click on "Next".</li>
<li>Check "General Purpose or Transaction Processing" and click on "Next".</li>
<li>Chose a database name and SID. Example: Global Database Name: <code>archlinux</code>, SID: <code>archlinux</code>. And then click on "Next".</li>
<li>Uncheck "Configure Enterprise Manager", leave it empty and click on "Next".</li>
<li>Check "Use the Same Administrative Password for All Accounts", set password and click on "Next".</li>
<li>Check "File System" and click on "Next".</li>
<li>Check "Use Database File Locations from Template" and click on "Next".</li>
<li>Uncheck "Specify Flash Recovery Area" and click on "Next".</li>
<li>No need for "Sample Schemas", click on "Next".</li>
<li>If you do not know what you are doing, check "Typical" and click on "Next"</li>
<li>Check "Keep the enhanced 11g default security settings" and click on "Next".</li>
<li>Uncheck "Enable automatic maintenance tasks" if you wish to do it by yourself and click on "Next".</li>
<li>View your filesystem layout and click on "Next".</li>
<li>"Create Database" is checked by default. Click on "Finish" to create database.</li>
<li>Summary of following operations to be performed, click on "OK".</li>
<li>When database creation is complete, click on "Exit".</li>
</ol>
<h4><span class="mw-headline" id="Scripted">Scripted</span></h4>
<p>This section walks you through doing a scripted initial database creation.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  The scripts assume they are the first database to be installed on this system.  If this is not the case review the xdb-create.sh script and comment out the portions which deal with the *.ora files.</div>
<p>Download the following tar file with a set of scripted database installation scripts.
</p>
<pre>wget <a rel="nofollow" class="external free" href="https://sites.google.com/site/mbasil77/Home/instanceCreateXdb.tgz">https://sites.google.com/site/mbasil77/Home/instanceCreateXdb.tgz</a>
</pre>
<p>Extract the directory
</p>
<pre>tar xzf instanceCreateXdb.tgz
</pre>
<p>Move into instanceCreateXdb directory
</p>
<pre>cd instanceCreateXdb
</pre>
<p>File list
</p>
<ul>
<li>CreateDB.sql</li>
<li>CreateDBCatalog.sql</li>
<li>initxdb.dbs.ora</li>
<li>initxdb.ora</li>
<li>listener.ora</li>
<li>postDBCreation.sql</li>
<li>sqlnet.ora</li>
<li>sysObjects.sql</li>
<li>tnsnames.ora</li>
<li>xdb-create.sh</li>
<li>xdb-create.sql</li>
<li>xdb-secfix.sh</li>
</ul>
<p>Script notes
</p>
<ul>
<li>the files assume a database sid of <b>xdb</b>
</li>
<li>the files assume an oracle base of <b>/oracle/product/db</b>
</li>
<li><i><b>review all memory and storage parameters against Oracle documentation</b></i></li>
</ul>
<p>Setup filesystem (as root)
</p>
<pre>./xdb-create.sh
</pre>
<p>Install database from script (<i><b>this will take a long time</b></i>)
</p>
<pre>su oracle
sqlplus / as sysdba @/oracle/admin/xdb/scripts/xdb-create.sql
</pre>
<h4>
<span id=".E6.B5.8B.E8.AF.95.E6.95.B0.E6.8D.AE.E5.BA.93"></span><span class="mw-headline" id="测试数据库">测试数据库</span>
</h4>
<p>以用户oracle身份登录，然后运行 export ORACLE_SID="yourSID"等,:
</p>
<pre>export ORACLE_SID=xdb
export ORACLE_HOME=/oracle/product/db
export PATH=$PATH:$ORACLE_HOME/bin
</pre>
<p>运行oraenv来确认已经export的配置:
</p>
<pre>oraenv
</pre>
<pre>ORACLE_SID = [xdb] ? 
The Oracle base for ORACLE_HOME=/oracle/product/db 
is /oracle
</pre>
<p>检查数据库是否关闭或开启：
</p>
<pre>sqlplus '/as sysdba'
</pre>
<pre>SQL&gt; shutdown immediate;
Database closed.
Database dismounted.
ORACLE instance shut down.
</pre>
<pre>SQL&gt; startup mount;

ORACLE instance started.

Total System Global Area  385003520 bytes
Fixed Size		    1300100 bytes
Variable Size		  234883452 bytes
Database Buffers	  142606336 bytes
Redo Buffers		    6213632 bytes
Database mounted.
Database opened.
</pre>
<p>Type "quit" when you want to leave SQL prompt:
</p>
<pre>SQL&gt; quit
</pre>
<h3>
<span id=".E5.9C.A8.E5.90.AF.E5.8A.A8.E6.97.B6.E5.90.AF.E5.8A.A8oracle"></span><span class="mw-headline" id="在启动时启动oracle">在启动时启动oracle</span>
</h3>
<p>If you want to start with your oracle SID, replace ":N" with ":Y" in /etc/oratab:
</p>
<pre>&lt;your sid&gt;:&lt;oracle home&gt;:N
&lt;your sid&gt;:&lt;oracle home&gt;:Y
</pre>
<p>Example from Scripted database creation (/etc/oratab):
</p>
<pre>xdb:/oracle/product/db:Y
</pre>
<p>To start the oracle database daemon during boot, add "oracledb" in your /etc/rc.conf:
</p>
<pre>DAEMONS=(oracledb syslog-ng dbus !network netfs crond ntpd alsa hal wicd fam)
</pre>
<p>Note: If the daemon does not start, please check that the ORACLE_HOME path matches your current oracle directory in /etc/rc.d/oracledb:
</p>
<pre>export ORACLE_HOME=/oracle/product/db
</pre>
<pre>[oracle@archlinux orarch]$ pwd
/oracle/product/db
</pre>
<p>Test starting the daemon as root:
</p>
<pre>/etc/rc.d/oracledb start
</pre>
<pre>Starting Oracle: 
LSNRCTL for Linux: Version 11.1.0.6.0 - Production on 27-FEB-2009 23:14:45
...
The command completed successfully
Processing Database instance "archlinux": log file 
/oracle/product/db/startup.log
OK
</pre>
<p>Now you will login to your oracle database each time you reboot:
</p>
<pre>su oracle
export ORACLE_SID=xdb
oraenv
sqlplus '/as sysdba'
</pre>
<p>Install Method 2:
</p>
<pre>su oracle
export ORACLE_SID=archlinux
oraenv
sqlplus '/as sysdba'
</pre>
<h3>
<span id=".E4.B8.BA.E6.99.AE.E9.80.9A.E7.94.A8.E6.88.B7.E8.AE.BE.E5.AE.9A.E6.9D.83.E9.99.90"></span><span class="mw-headline" id="为普通用户设定权限">为普通用户设定权限</span>
</h3>
<p>此时仅仅一个用户（oracle）能够使用oracle数据库。您需要添加您其他的用户到组“dba”。假设“joe”是一个普通用户： 
</p>
<pre>gpasswd -a joe dba
</pre>
<p>dba组在您登出时然后登录进来才生效。用户oracle拥有oracle家目录的权限，如 /home/oracle： 
</p>
<pre>drwx------ 6 oracle dba 4096 2009-02-27 23:27 oracle
</pre>
<p>您需要使组“dba”拥有权限来执行oracle目录下到二进制文件： 
</p>
<pre>chmod -R g+x /home/oracle
</pre>
<p>此时您的普通用户就可以使用oracle数据库了。
</p>
<h2><span class="mw-headline" id="Transfer_existing_Oracle_installation">Transfer existing Oracle installation</span></h2>
<p>Moving or transferring Oracle can be quite useful in the following conditions:
</p>
<ul>
<li>replacing hardware</li>
<li>setting up several dev machines</li>
<li>running lean system (no desktop manager, java, etc)</li>
</ul>
<p>The installation of Oracle requires several packages.  However, just running an Oracle database is much simpler and has far fewer requirements, as shown below. 
</p>
<p><i>In principle transferring Oracle should work across distros.  Transferring from RHEL/Centos 5.2 to ARCH 2009.02 has been tested successfully.</i>
</p>
<p>To prep Oracle for a move shutdown database services
</p>
<pre>dbstop ${ORACLE_HOME}
lsnrctl stop
</pre>
<p>Optional: stop OEM if it is running
</p>
<pre>emctl stop dbconsole
</pre>
<p><i><b>If you are running other Oracle daemons stop them as well</b></i>
</p>
<p>This section assumes the following conditions about the existing Oracle installation:
</p>
<ul>
<li>oracle root is /oracle</li>
<li>oracle data is at /oracle/oradata/&lt;sid&gt;</li>
</ul>
<p>Tar up entire Oracle installation and data.
</p>
<pre>cd /
tar czf oracle.tgz /oracle
</pre>
<p>Using ssh and sftp or your method of choice transfer oracle.tgz to the root (/) of the target system.
</p>
<p>Login to target system as root and unpack the tar
</p>
<pre>cd /
tar xzf oracle.tgz
chmod 755 -R /oracle
chown -R oracle:dba /oracle
</pre>
<p>Update system
</p>
<pre>pacman -S pacman
pacman -Syu
pacman -S python
pacman -U <a rel="nofollow" class="external free" href="ftp://ftp.berlios.de/pub/aurbuild/aurbuild-1.8.4-1-any.pkg.tar.gz">ftp://ftp.berlios.de/pub/aurbuild/aurbuild-1.8.4-1-any.pkg.tar.gz</a>
pacman -S unzip
pacman -S sudo
</pre>
<p>Install required package run Oracle database and <i>required</i> daemons.
</p>
<pre>aurbuild -s libaio
pacman -S sysstat
</pre>
<p>Configure server for oracle
</p>
<pre><a href="../en/Category:Oracle.html#Configuration" class="mw-redirect" title="Oracle">Oracle#Configuration</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" class="mw-redirect" title="ArchWiki:Requests">断开的链接</a>：无效的部分]</sup>
</pre>
<p>Setup OEM (optional)
</p>
<pre><a href="../en/Category:Oracle.html#Oracle_Enterprise_Manager_installation_(optional)" class="mw-redirect" title="Oracle">Oracle#Oracle Enterprise Manager installation (optional)</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" class="mw-redirect" title="ArchWiki:Requests">断开的链接</a>：无效的部分]</sup>
</pre>
<p>Execute appropriate/desired post installation steps
</p>
<pre><a href="../en/Category:Oracle.html#Post_Installation" class="mw-redirect" title="Oracle">Oracle#Post_Installation</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" class="mw-redirect" title="ArchWiki:Requests">断开的链接</a>：无效的部分]</sup>
</pre>
<pre>===疑难解答===
</pre>
<p>已知问题: The Oracle Universal Installer(ie, in silent mode) seems create errors when installing on other paths than "../app/oracle/..".
</p>
<h3>
<span id=".E6.9B.B4.E5.A4.9A.E8.B5.84.E6.BA.90"></span><span class="mw-headline" id="更多资源">更多资源</span>
</h3>
<hr>
<p>大部分的步骤是基于ubuntu用户的oracle安装向导，这篇文档包括一步一步的图形例子：
<a rel="nofollow" class="external free" href="http://www.pythian.com/blogs/1355/installing-oracle-11gr1-on-ubuntu-810-intrepid-ibex">http://www.pythian.com/blogs/1355/installing-oracle-11gr1-on-ubuntu-810-intrepid-ibex</a><sup title="最后检查状态：404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-04 ⓘ]</sup>
</p>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../zh-CN/Category:Database_management_systems.html" title="Category:Database management systems (简体中文)">Database management systems (简体中文)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
<li><a href="../en/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Oracle_Database_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;oldid=663498">https://wiki.archlinux.org/index.php?title=Oracle_Database_(简体中文)&amp;oldid=663498</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 21 April 2021, at 19:07.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
