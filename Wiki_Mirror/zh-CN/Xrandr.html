<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Xrandr (简体中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Xrandr_简体中文 rootpage-Xrandr_简体中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Xrandr (简体中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../zh-CN/Xorg.html" title="Xorg (简体中文)">Xorg (简体中文)</a></li>
<li><a href="../en/Multihead.html" title="Multihead">Multihead</a></li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>翻译状态：</strong>本文是 <a href="../en/Xrandr.html" title="Xrandr">Xrandr</a> 的<a href="../zh-CN/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (简体中文)">翻译</a>。上次翻译日期：2020-11-02。如果英文版本有所<a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Xrandr&amp;diff=0&amp;oldid=637896">更改</a>，则您可以帮助同步翻译。</div>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-preferences-desktop-locale.png" class="image"><img alt="Tango-preferences-desktop-locale.png" src="../File:Tango-preferences-desktop-locale.png" decoding="async" width="48" height="48"></a><b>本文或本节需要<a href="../zh-CN/ArchWiki:Contributing.html#%E7%BF%BB%E8%AF%91" title="ArchWiki:Contributing (简体中文)">翻译</a>。要贡献翻译，请访问<a href="../zh-CN/ArchWiki:Translation_Team.html" class="mw-redirect" title="ArchWiki Translation Team (简体中文)">简体中文翻译团队</a>。</b><a href="../File:Tango-preferences-desktop-locale.png" class="image"><img alt="Tango-preferences-desktop-locale.png" src="../File:Tango-preferences-desktop-locale.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>附注：</b> 原文已有大量更新，请持续更新译文（在 <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Xrandr_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">Talk:Xrandr (简体中文)#</a> 中讨论）</div>
</div>
<p>"xrandr" 是一款官方的 <a href="https://en.wikipedia.org/wiki/RandR" class="extiw" title="wikipedia:RandR">RandR</a> (<i>Resize and Rotate</i>)<a href="https://en.wikipedia.org/wiki/X_Window_System" class="extiw" title="wikipedia:X Window System">维基百科：X 窗口系统</a> 扩展配置工具。它可以设置屏幕显示的大小、方向、镜像等。对多显示器的情况，请参考 <a href="../en/Multihead.html" title="Multihead">Multihead</a> 页面。
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#%E5%AE%89%E8%A3%85"><span class="tocnumber">1</span> <span class="toctext">安装</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#%E5%9B%BE%E5%BD%A2%E5%8C%96%E6%93%8D%E4%BD%9C%E7%A8%8B%E5%BA%8F"><span class="tocnumber">1.1</span> <span class="toctext">图形化操作程序</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%89%8D%E7%AB%AF"><span class="tocnumber">1.2</span> <span class="toctext">命令行前端</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="#%E6%B5%8B%E8%AF%95%E9%85%8D%E7%BD%AE"><span class="tocnumber">2</span> <span class="toctext">测试配置</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#%E6%B7%BB%E5%8A%A0%E6%9C%AA%E8%A2%AB%E6%A3%80%E6%B5%8B%E5%88%B0%E7%9A%84%E6%9C%89%E6%95%88%E5%88%86%E8%BE%A8%E7%8E%87"><span class="tocnumber">3</span> <span class="toctext">添加未被检测到的有效分辨率</span></a></li>
<li class="toclevel-1 tocsection-6">
<a href="#%E4%BD%BFxrandr%E6%89%80%E6%9B%B4%E6%94%B9%E7%9A%84%E5%88%86%E8%BE%A8%E7%8E%87%E8%AE%BE%E7%BD%AE%E6%B0%B8%E4%B9%85%E7%94%9F%E6%95%88"><span class="tocnumber">4</span> <span class="toctext">使xrandr所更改的分辨率设置永久生效</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#%E5%9C%A8xorg.conf%E8%AE%BE%E7%BD%AE%E5%88%86%E8%BE%A8%E7%8E%87%EF%BC%88%E6%8E%A8%E8%8D%90%EF%BC%89"><span class="tocnumber">4.1</span> <span class="toctext">在xorg.conf设置分辨率（推荐）</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#%E5%9C%A8xprofile%E8%AE%BE%E5%AE%9Axrandr%E5%91%BD%E4%BB%A4"><span class="tocnumber">4.2</span> <span class="toctext">在xprofile设定xrandr命令</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#%E5%9C%A8KDM/GDM%E7%9A%84%E5%90%AF%E5%8A%A8%E8%84%9A%E6%9C%AC%E8%AE%BE%E5%AE%9Axrandr%E5%91%BD%E4%BB%A4"><span class="tocnumber">4.3</span> <span class="toctext">在KDM/GDM的启动脚本设定xrandr命令</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10"><a href="#%E8%84%9A%E6%9C%AC"><span class="tocnumber">5</span> <span class="toctext">脚本</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="#%E5%9C%A8VNC%E4%B8%8A%E4%BD%BF%E7%94%A8xrandr"><span class="tocnumber">6</span> <span class="toctext">在VNC上使用xrandr</span></a></li>
<li class="toclevel-1 tocsection-12">
<a href="#%E7%96%91%E9%9A%BE%E6%8E%92%E9%99%A4"><span class="tocnumber">7</span> <span class="toctext">疑难排除</span></a>
<ul>
<li class="toclevel-2 tocsection-13">
<a href="#%E6%B7%BB%E5%8A%A0%E6%9C%AA%E6%A3%80%E6%B5%8B%E5%88%B0%E7%9A%84%E5%88%86%E8%BE%A8%E7%8E%87"><span class="tocnumber">7.1</span> <span class="toctext">添加未检测到的分辨率</span></a>
<ul>
<li class="toclevel-3 tocsection-14"><a href="#EDID_%E6%A0%A1%E9%AA%8C%E5%92%8C%E6%97%A0%E6%95%88"><span class="tocnumber">7.1.1</span> <span class="toctext">EDID 校验和无效</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-15"><a href="#%E7%BA%A0%E6%AD%A3%E7%94%B5%E8%A7%86%E6%9C%BA%E5%88%86%E8%BE%A8%E7%8E%87%E8%BF%87%E6%89%AB"><span class="tocnumber">7.2</span> <span class="toctext">纠正电视机分辨率过扫</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Correction_of_overscan_tv_resolutions_via_--transform"><span class="tocnumber">7.3</span> <span class="toctext">Correction of overscan tv resolutions via --transform</span></a></li>
<li class="toclevel-2 tocsection-17">
<a href="#Full_RGB_in_HDMI"><span class="tocnumber">7.4</span> <span class="toctext">Full RGB in HDMI</span></a>
<ul>
<li class="toclevel-3 tocsection-18"><a href="#Screen_resolution_reverts_back_after_a_blink"><span class="tocnumber">7.4.1</span> <span class="toctext">Screen resolution reverts back after a blink</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-19"><a href="#%E5%8F%82%E8%A7%81"><span class="tocnumber">8</span> <span class="toctext">参见</span></a></li>
</ul>
</div>

<h2>
<span id=".E5.AE.89.E8.A3.85"></span><span class="mw-headline" id="安装">安装</span>
</h2>
<p><a href="../zh-CN/Help:Reading.html#%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E5%8C%85" class="mw-redirect" title="安装">安装</a> 软件包 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xorg-xrandr">xorg-xrandr</a></span>。
</p>
<h3>
<span id=".E5.9B.BE.E5.BD.A2.E5.8C.96.E6.93.8D.E4.BD.9C.E7.A8.8B.E5.BA.8F"></span><span class="mw-headline" id="图形化操作程序">图形化操作程序</span>
</h3>
<ul><li>
<b>ARandR</b> — 提供了一个简单的图形化程序给 XrandR。显示器的位置会图形化地展示出来并可以使用拖拽的方式调整。</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://christian.amsuess.com/tools/arandr/">https://christian.amsuess.com/tools/arandr/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=arandr">arandr</a></span>
</dd></dl>
<ul><li>
<b>LXRandR</b> — 是 LXDE 中的屏幕分辨率和外置显示器管理的工具.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://wiki.lxde.org/en/LXRandR">https://wiki.lxde.org/en/LXRandR</a> || GTK 2: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lxrandr">lxrandr</a></span>, GTK 3: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lxrandr-gtk3">lxrandr-gtk3</a></span>
</dd></dl>
<p><br>
</p>
<h3>
<span id=".E5.91.BD.E4.BB.A4.E8.A1.8C.E5.89.8D.E7.AB.AF"></span><span class="mw-headline" id="命令行前端">命令行前端</span>
</h3>
<ul><li>
<b>xlayoutdisplay</b> — 检测和排列显示器。可处理：笔记本电脑开合状态，最高有效刷新率，计算并设定当前的 DPI。最适合用在.xinitrc 中，以便于在接入或断开外置显示器或闭合笔记本盖子时引用这些参数</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/alex-courtis/xlayoutdisplay">https://github.com/alex-courtis/xlayoutdisplay</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xlayoutdisplay/">xlayoutdisplay</a></span><sup><small>AUR</small></sup>
</dd></dl>
<h2>
<span id=".E6.B5.8B.E8.AF.95.E9.85.8D.E7.BD.AE"></span><span class="mw-headline" id="测试配置">测试配置</span>
</h2>
<p>当没有添加任何选项直接运行时，<i>xrandr</i> 列出该系统可用的显示输出设备  (<code>VGA-1</code>, <code>HDMI-1</code> 等等) 和每一台设备可设置的分辨率，当前分辨率后面带有一个<b>*</b>号和一个<b>+</b>号:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">xrandr</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Screen 0: minimum 320 x 200, current 3200 x 1080, maximum 8192 x 8192
VGA-1 disconnected (normal left inverted right x axis y axis)
HDMI-1 connected primary 1920x1080+0+0 (normal left inverted right x axis y axis) 531mm x 299mm
   1920x1080     59.93 +  60.00*   50.00    59.94  
   1920x1080i    60.00    50.00    59.94  
   1680x1050     59.88  
…
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 如果你的分辨率没有出现在上方， 请看 <a href="#%E6%B7%BB%E5%8A%A0%E6%9C%AA%E8%A2%AB%E6%A3%80%E6%B5%8B%E5%88%B0%E7%9A%84%E6%9C%89%E6%95%88%E5%88%86%E8%BE%A8%E7%8E%87">#添加未被检测到的有效分辨率</a>
</div>
<p>你可以使用 <i>xrandr</i> 设置不同的分辨率（必须是出现在上面输出列表中的分辨率）：
</p>
<pre>$ xrandr --output HDMI-1 --mode 1920x1080
</pre>
<p>当列表中出现多个刷新率，可以通过 <code>--rate</code> 选项改变，一次性设置或者分开设置，例如：
</p>
<pre>$ xrandr --output HDMI-1 --mode 1920x1080 --rate 60
</pre>
<p>如果输出设备已经连接但被禁用，<code>--auto</code> 选项会以系统偏好的分辨率（最大分辨率）开启特定的输出设备：
</p>
<pre>$ xrandr --output HDMI-1 --auto
</pre>
<p>还可以用一条命令设置多个输出设备，例如，使用系统偏好的选项关闭 <code>HDMI-1</code> 并打开 <code>HDMI-2</code>：
</p>
<pre>$ xrandr --output HDMI-1 --off --output HDMI-2 --auto
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 
<ul>
<li>通过 <i>xrandr</i> 作出的改变只在本次会话中有效</li>
<li>
<i>xrandr</i> 有很多功能 - 详情请参考 <span class="plainlinks archwiki-template-man" title="$ man 1 xrandr"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/xrandr.1">xrandr(1)</a></span>。</li>
</ul>
</div>
<h2>
<span id=".E6.B7.BB.E5.8A.A0.E6.9C.AA.E8.A2.AB.E6.A3.80.E6.B5.8B.E5.88.B0.E7.9A.84.E6.9C.89.E6.95.88.E5.88.86.E8.BE.A8.E7.8E.87"></span><span class="mw-headline" id="添加未被检测到的有效分辨率">添加未被检测到的有效分辨率</span>
</h2>
<p>由于出错的硬件或驱动，xrandr 可能并不能检测出您的显示器所有的有效分辨率。不过，我们可以在xrandr里添加所需要的分辨率。 Also, this same procedure can be used to add refresh rates you know are supported, but not enabled by your driver。
</p>
<p>首先，运行<code>gtf</code>或者<code>cvt</code>，查询某分辨率的有效扫描频率。
</p>
<pre> $ cvt 1280 1024
 
 # 1280x1024 59.89 Hz (CVT 1.31M4) hsync: 63.67 kHz; pclk: 109.00 MHz
 Modeline "1280x1024_60.00"  109.00  1280 1368 1496 1712  1024 1027 1034 1063 -hsync +vsync
</pre>
<p>然后通过--newmode参数新建一种xrandr模式，输入上面所得到的查询结果，其中Modeline关键词自然需要被省略。
</p>
<pre>   xrandr --newmode "1280x1024_60.00"  109.00  1280 1368 1496 1712  1024 1027 1034 1063 -hsync +vsync
</pre>
<p>新建模式后，我们需要把这模式添加到当前的输出设备（假定为VGA1）上。由于一些参数已经事先设置，只需输入模式名称即可，即1280x1024_60.00。
</p>
<pre>   xrandr --addmode VGA1 1280x1024_60.00
</pre>
<p>最后，再把VGA1的分辨率指定为刚刚添加的新模式。
</p>
<pre>   xrandr --output VGA1 --mode 1280x1024_60.00
</pre>
<p>注意，以上设置同样地只能在当前会话暂时生效。
</p>
<p>如果您对所要添加的某分辨率感到不放心，您可以追加新命令“sleep 5”以及一条切换到已有有效分辨率的命令，以保证不会被困在实际无效的分辨率，示例：
</p>
<pre>   xrandr --output VGA1 --mode 1280x1024_60.00 &amp;&amp; sleep 5 &amp;&amp; xrandr --newmode "1024x768-safe" 65.00 1024 1048 1184 1344 768 771 777 806 -HSync -VSync &amp;&amp; xrandr --addmode VGA1 1024x768-safe &amp;&amp; xrandr --output VGA1 --mode 1024x768-safe
</pre>
<p>其他输出设备如法炮制：VGA1或DVI-I……
</p>
<h2>
<span id=".E4.BD.BFxrandr.E6.89.80.E6.9B.B4.E6.94.B9.E7.9A.84.E5.88.86.E8.BE.A8.E7.8E.87.E8.AE.BE.E7.BD.AE.E6.B0.B8.E4.B9.85.E7.94.9F.E6.95.88"></span><span class="mw-headline" id="使xrandr所更改的分辨率设置永久生效">使xrandr所更改的分辨率设置永久生效</span>
</h2>
<p>使xrandr定制永久生效的方案有：
</p>
<ul>
<li>
<code>xorg.conf</code>（推荐）</li>
<li><code>.xprofile</code></li>
<li>kdm/gdm</li>
</ul>
<h3>
<span id=".E5.9C.A8xorg.conf.E8.AE.BE.E7.BD.AE.E5.88.86.E8.BE.A8.E7.8E.87.EF.BC.88.E6.8E.A8.E8.8D.90.EF.BC.89"></span><span class="mw-headline" id="在xorg.conf设置分辨率（推荐）">在xorg.conf设置分辨率（推荐）</span>
</h3>
<p>示例：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "Monitor"
    Identifier      "External DVI"
    Modeline        "1280x1024_60.00"  108.88  1280 1360 1496 1712  1024 1025 1028 1060  -HSync +Vsync
    Option          "PreferredMode" "1280x1024_60.00"
EndSection
Section "Device"
    Identifier      "ATI Technologies, Inc. M22 [Radeon Mobility M300]"
    Driver          "ati"
    Option          "Monitor-DVI-0" "External DVI"
EndSection
Section "Screen"
    Identifier      "Primary Screen"
    Device          "ATI Technologies, Inc. M22 [Radeon Mobility M300]"
    DefaultDepth    24
    SubSection "Display"
        Depth           24
        Modes   "1280x1024" "1024x768" "640x480"
    EndSubSection
EndSection

Section "ServerLayout"
        Identifier      "Default Layout"
        Screen          "Primary Screen"
EndSection
</pre>
<p>关于更多的配置细节，请阅读<a href="../zh-CN/Xorg.html" title="Xorg (简体中文)">Xorg (简体中文)</a>或<span class="plainlinks archwiki-template-man" title="$ man 5 xorg.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/xorg.conf.5">xorg.conf(5)</a></span>。
</p>
<h3>
<span id=".E5.9C.A8xprofile.E8.AE.BE.E5.AE.9Axrandr.E5.91.BD.E4.BB.A4"></span><span class="mw-headline" id="在xprofile设定xrandr命令">在xprofile设定xrandr命令</span>
</h3>
<p>请阅读<a href="../en/Xprofile.html" title="Xprofile">xprofile</a>.
</p>
<p>这方案具有缺点：如果您使用<a href="../zh-CN/Display_manager.html" title="Display manager (简体中文)">Display manager (简体中文)</a>的话，那么在启动进程之后很大程度上就会执行失败，最终无法顺利修改分辨率。
</p>
<h3>
<span id=".E5.9C.A8KDM.2FGDM.E7.9A.84.E5.90.AF.E5.8A.A8.E8.84.9A.E6.9C.AC.E8.AE.BE.E5.AE.9Axrandr.E5.91.BD.E4.BB.A4"></span><span class="mw-headline" id="在KDM/GDM的启动脚本设定xrandr命令">在KDM/GDM的启动脚本设定xrandr命令</span>
</h3>
<p>KDM和GDM都具备在X初始化时，会被自动执行的启动脚本。GDM的启动脚本放在<code>/etc/gdm/</code>， KDM的则是<code>/usr/share/config/kdm/Xsetup</code>，SDDM 的则是在 <code>/usr/share/sddm/scripts/Xsetup</code>。您可以把相关的xrandr命令添加到这些启动脚本里。
</p>
<p>这些脚本需要root权限及其他系统配置的配合，不过在启动进程里会比xprofile更早生效。
</p>
<h2>
<span id=".E8.84.9A.E6.9C.AC"></span><span class="mw-headline" id="脚本">脚本</span>
</h2>
<p>控制第二显示器的开关状态，默认显示器保持开启：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/bin/xdisplay</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/bash
#
# This script toggles the extended monitor outputs if something is connected
#

# all available outputs
OUTPUTS=$(xrandr |awk '$2 ~ /connected/ {print $1}')

# your notebook LVDS monitor
DEFAULT_OUTPUT=$(sed -ne 's/.*(LVDS[^ ]*).*/1/p' &lt;&lt;&lt;$OUTPUTS)

# get info from xrandr
XRANDR=`xrandr`

EXECUTE=""

for CURRENT in $OUTPUTS
do
        if [[ $XRANDR == *$CURRENT\ connected*  ]] # is connected
        then
                if [[ $XRANDR == *$CURRENT\ connected\ \(* ]] # is disabled
                then
                        EXECUTE+="--output $CURRENT --auto --above $DEFAULT_OUTPUT "
                else
                        EXECUTE+="--output $CURRENT --off "
                fi
        else # make sure disconnected outputs are off 
                EXECUTE+="--output $CURRENT --off "
        fi
done

xrandr --output $DEFAULT_OUTPUT --auto $EXECUTE
</pre>
<p>在显示器之间切换，且只开启其中一个。
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/local/bin/toggle-display</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/bash
#
# toggle-display.sh
#
# Iterates through connected monitors in xrander and switched to the next one
# each time it is run.
#

# get info from xrandr
xStatus=`xrandr`
connectedOutputs=$(echo "$xStatus" | grep " connected" | sed -e "s/\([A-Z0-9]\+\) connected.*/\1/")
activeOutput=$(echo "$xStatus" | grep -e " connected [^(]" | sed -e "s/\([A-Z0-9]\+\) connected.*/\1/") 
connected=$(echo $connectedOutputs | wc -w)

# initialize variables
execute="xrandr "
default="xrandr "
i=1
switch=0

for display in $connectedOutputs
do

	# build default configuration
	if [ $i -eq 1 ]
	then
		default=$default"--output $display --auto "
	else
		default=$default"--output $display --off "
	fi

	# build "switching" configuration
	if [ $switch -eq 1 ]
	then
		execute=$execute"--output $display --auto "
		switch=0
	else
		execute=$execute"--output $display --off "
	fi

	# check whether the next output should be switched on
	if [ $display = $activeOutput ]
	then
		switch=1
	fi

	i=$(( $i + 1 ))

done

# check if the default setup needs to be executed then run it
echo "Resulting Configuration:"
if [ -z "$(echo $execute | grep "auto")" ]
then
	echo "Command: $default"
	`$default`
else
	echo "Command: $execute"
	`$execute`
fi
echo -e "\n$(xrandr)"
</pre>
<p>您也可以使用xrr-events (from <a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xrr-events-git/">AUR</a><sup title="最后检查状态：404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-06 ⓘ]</sup>)，一种负责监听XrandR事件的daemon服务。当某台显示器接通状态发生变动时，就会执行相关脚本。可在man页面进一步查询具体信息。
</p>
<h2>
<span id=".E5.9C.A8VNC.E4.B8.8A.E4.BD.BF.E7.94.A8xrandr"></span><span class="mw-headline" id="在VNC上使用xrandr">在VNC上使用xrandr</span>
</h2>
<p>如果您在使用某台支持xrandr的VNC服务器，您可以通过"xrandr -s &lt;width&gt;x&lt;height&gt;"命令实时修改VNC的分辨率。tigervnc就是一种支持xrandr的VNC客户端。
</p>
<p>示例：
</p>
<pre>xrandr -s 1920x1200
</pre>
<p>登陆VNC之后，如果您在控制台上输入"xrandr"，您将得到列出当前已配置模式的清单。每个模式均可通过xrandr -s选项激活。不过，若您所需要的模式并不在清单中，您可以按照以下来添加它。
</p>
<p>示例：不妨想添加的是1024x600（上网本的一种常见分辨率）
</p>
<p>首先执行CVT，得到理想分辨率所对应的正确刷新频率。
</p>
<pre>$ cvt 1024 600
</pre>
<p>您会得到如下类似的输出：
</p>
<pre># 1024x600 59.85 Hz (CVT) hsync: 37.35 kHz; pclk: 49.00 MHz
Modeline "1024x600_60.00"   49.00  1024 1072 1168 1312  600 603 613 624 -hsync +vsync
</pre>
<p>在以下命令使用那些关于刷新频率的输出部分。
</p>
<pre>xrandr --newmode "1024x600"   49.00  1024 1072 1168 1312  600 603 613 624 -hsync +vsync
xrandr --addmode default "1024x600"
</pre>
<p>通过以上流程，输入xrandr -s 1024x600，就可以设置当前分辨率为1024x600，但是这设置只在当前的X会话暂时生效。为确保其模式永久可用，在~/.vnc/xstartup添加以下：
</p>
<pre>xrandr --newmode "1024x600"   49.00  1024 1072 1168 1312  600 603 613 624 -hsync +vsync
xrandr --addmode default "1024x600"r
</pre>
<h2>
<span id=".E7.96.91.E9.9A.BE.E6.8E.92.E9.99.A4"></span><span class="mw-headline" id="疑难排除">疑难排除</span>
</h2>
<h3>
<span id=".E6.B7.BB.E5.8A.A0.E6.9C.AA.E6.A3.80.E6.B5.8B.E5.88.B0.E7.9A.84.E5.88.86.E8.BE.A8.E7.8E.87"></span><span class="mw-headline" id="添加未检测到的分辨率">添加未检测到的分辨率</span>
</h3>
<p>由于硬件以及驱动程序可能的缺陷，例如，请求的EDID数据块不正确，导致 xrandr 可能不能准确侦测到显示器的分辨率。不过我们可以手工添加期望的分辨率。
</p>
<p>首先，运行 <code>gtf</code> 或 <code>cvt</code> 以获取所需分辨率的 <b>模式行（Modeline）</b> ：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ cvt 1280 1024</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># 1280x1024 59.89 Hz (CVT 1.31M4) hsync: 63.67 kHz; pclk: 109.00 MHz
Modeline "1280x1024_60.00"  109.00  1280 1368 1496 1712  1024 1027 1034 1063 -hsync +vsync
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> For some LCD screens (e.g. Samsung 2343NW, Acer XB280HK), the command <code>cvt -r</code> (= with reduced blanking) is to be used.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 如果使用了 Intel 的显示驱动程序 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-video-intel">xf86-video-intel</a></span>，期望的分辨率会在 <code>/var/log/Xorg.0.log</code> 中与其他特征值一并报告——如果该值不同于 <code>gtf</code> or <code>cvt</code> 的输出应首选该值。这里给出一个log文件的报告值与 xrandr 使用值的实例：
<pre>[    45.063] (II) intel(0): clock: 241.5 MHz   Image Size:  597 x 336 mm
[    45.063] (II) intel(0): h_active: 2560  h_sync: 2600  h_sync_end 2632 h_blank_end 2720 h_border: 0
[    45.063] (II) intel(0): v_active: 1440  v_sync: 1443  v_sync_end 1448 v_blanking: 1481 v_border: 0
</pre>
<pre>xrandr --newmode "2560x1440" 241.50 2560 2600 2632 2720 1440 1443 1448 1481 -hsync +vsync
</pre>
</div>
<p>然后创建一个新的 xandr 模式。注意模式行中那些被忽略的关键字。
</p>
<pre>$ xrandr --newmode "1280x1024_60.00"  109.00  1280 1368 1496 1712  1024 1027 1034 1063 -hsync +vsync
</pre>
<p>创建完毕还需要一个操作步骤，把这个新模式追加到当前显示输出端口（VGA1）。我们只需引用模式的名称，因为参数已经在前面设置好了。
</p>
<pre>$ xrandr --addmode VGA1 1280x1024_60.00
</pre>
<p>现在，我们可以把屏幕分辨率切换为刚刚追加的值：
</p>
<pre>$ xrandr --output VGA1 --mode 1280x1024_60.00
</pre>
<p>注意，上述这些设置仅在本次会话中有效。
</p>
<p>如果你不能确保将要测试的分辨率可用，可以在后面附加一个延迟和一个安全分辨率命令行，就像这样：
</p>
<pre>$ xrandr --output VGA1 --mode 1280x1024_60.00 &amp;&amp; sleep 5 &amp;&amp; xrandr --newmode "1024x768-safe" 65.00 1024 1048 1184 1344 768 771 777 806 -HSync -VSync &amp;&amp; xrandr --addmode VGA1 1024x768-safe &amp;&amp; xrandr --output VGA1 --mode 1024x768-safe
</pre>
<p>还有，要把 <code>VGA1</code> 改为正确的输出端口名。
</p>
<h4>
<span id="EDID_.E6.A0.A1.E9.AA.8C.E5.92.8C.E6.97.A0.E6.95.88"></span><span class="mw-headline" id="EDID_校验和无效">EDID 校验和无效</span>
</h4>
<p>如果前述方法导致引导期间发生 <code>*ERROR* EDID checksum is invalid</code> 错误，参阅 <a href="../zh-CN/Kernel_mode_setting.html#%E5%BC%BA%E8%AE%BE%E6%A8%A1%E5%BC%8F%E5%92%8C_EDID" title="Kernel mode setting (简体中文)">这里</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" class="mw-redirect" title="ArchWiki:Requests">断开的链接</a>：无效的部分]</sup> 和 <a rel="nofollow" class="external text" href="https://askubuntu.com/questions/201081/how-can-i-make-linux-behave-better-when-edid-is-unavailable">这里</a>.
</p>
<p>也许 <code>xrandr --addmode</code> 会返回错误 <code>X Error of failed request: BadMatch</code>。NVIDIA 用户请参阅 <a href="../en/NVIDIA/Troubleshooting.html#xrandr_BadMatch" title="NVIDIA/Troubleshooting">NVIDIA/Troubleshooting#xrandr BadMatch</a>。<code>BadMatch</code> 能指示出无效的 EDID 校验和。要验证确实是这种情况，请以 verbose mode 运行 X 服务（例如：<code>startx -- -logverbose 6</code>）然后查阅 Xorg 日志中有关 EDID 错误的信息。
</p>
<h3>
<span id=".E7.BA.A0.E6.AD.A3.E7.94.B5.E8.A7.86.E6.9C.BA.E5.88.86.E8.BE.A8.E7.8E.87.E8.BF.87.E6.89.AB"></span><span class="mw-headline" id="纠正电视机分辨率过扫">纠正电视机分辨率过扫</span>
</h3>
<p>With a flat panel TV, <a href="https://en.wikipedia.org/wiki/overscan" class="extiw" title="w:overscan">w:overscan</a> looks like the picture is "zoomed in" so the edges are cut off.
</p>
<p>Check your TV if there is a parameter to change. If not, apply an <code>underscan</code> and change border values. 
The required <code>underscan vborder</code> and <code>underscan hborder</code> values can be different for you, just check it and change it by more or less.
</p>
<p><code>$ xrandr --output HDMI-0 --set underscan on --set "underscan vborder" 25 --set "underscan hborder" 40 </code>
</p>
<h3><span class="mw-headline" id="Correction_of_overscan_tv_resolutions_via_--transform">Correction of overscan tv resolutions via --transform</span></h3>
<p>If underscan is not available another solution is using <code>xrandr --transform <i>a,b,c,d,e,f,g,h,i</i></code>, which applies a transformation matrix on the output. See the <span class="plainlinks archwiki-template-man" title="$ man 1 xrandr"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/xrandr.1#RandR_version_1.3_options">xrandr(1) § RandR_version_1.3_options</a></span> manual page for the explanation of the transformation.
</p>
<p>For example, the transformation scaling horizontal coordinates by <code>0.8</code>, vertical coordinates by <code>1.04</code> and moving the screen by 35 pixels right and 19 pixels down, is:
</p>
<pre>$ xrandr --output HDMI1 --transform 0.80,0,-35,0,1.04,-19,0,0,1
</pre>
<h3><span class="mw-headline" id="Full_RGB_in_HDMI">Full RGB in HDMI</span></h3>
<p>It may occur that the <a href="../en/Intel_graphics.html" class="mw-redirect" title="Intel">Intel</a> driver will not configure correctly the output of the HDMI monitor. It will set a limited color range (16-235) using the <a rel="nofollow" class="external text" href="https://patchwork.kernel.org/patch/1972181/">Broadcast RGB property</a>, and the black will not look black, it will be grey.
</p>
<p>To see if it is your case:
</p>
<pre>$ xrandr --output HDMI1 --set "Broadcast RGB" "Full"
</pre>
<h4><span class="mw-headline" id="Screen_resolution_reverts_back_after_a_blink">Screen resolution reverts back after a blink</span></h4>
<p>If you use <a href="../en/GNOME.html" title="GNOME">GNOME</a> and your monitor doesn't have an EDID, above <a href="#Adding_undetected_resolutions">#Adding undetected resolutions</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" class="mw-redirect" title="ArchWiki:Requests">断开的链接</a>：无效的部分]</sup> might not work, with your screen just blinking once, after <code>xrandr --output</code>.
</p>
<p>Poke around with <code>~/.config/monitors.xml</code>, or delete the file completely, and then reboot.
</p>
<p>It is better explained in <a rel="nofollow" class="external text" href="https://unix.stackexchange.com/questions/184941/gnome-prevents-high-resolution-vga-without-edid-info-over-vga">this</a> article.
</p>
<h2>
<span id=".E5.8F.82.E8.A7.81"></span><span class="mw-headline" id="参见">参见</span>
</h2>
<ul>
<li>
<a href="../en/Multihead.html" class="mw-redirect" title="DualScreen">DualScreen</a> Arch wiki page. How to get dual screens with Xrandr</li>
<li><a rel="nofollow" class="external free" href="https://wiki.ubuntu.com/X/Config/Resolution">https://wiki.ubuntu.com/X/Config/Resolution</a></li>
<li><a href="https://wiki.debian.org/XStrikeForce/HowToRandR12" class="extiw" title="debian:XStrikeForce/HowToRandR12">Debian Wiki - RandR 1.2 tutorial</a></li>
<li><a rel="nofollow" class="external free" href="https://bbs.archlinux.org/viewtopic.php?pid=652861">https://bbs.archlinux.org/viewtopic.php?pid=652861</a></li>
<li>
<a rel="nofollow" class="external free" href="http://nouveau.freedesktop.org/wiki/Randr12Howto">http://nouveau.freedesktop.org/wiki/Randr12Howto</a><sup title="最后检查状态：404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-06 ⓘ]</sup>
</li>
<li><a rel="nofollow" class="external free" href="http://wiki.debian.org/XStrikeForce/HowToRandR12">http://wiki.debian.org/XStrikeForce/HowToRandR12</a></li>
<li>man xrandr</li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../zh-CN/Category:X_server.html" title="Category:X server (简体中文)">X server (简体中文)</a></li>
<li><a href="../zh-CN/Category:Xorg_commands.html" title="Category:Xorg commands (简体中文)">Xorg commands (简体中文)</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../zh-CN/Category:Pages_or_sections_flagged_with_Template:Translateme.html" title="Category:Pages or sections flagged with Template:Translateme (简体中文)">Pages or sections flagged with Template:Translateme (简体中文)</a></li>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
<li><a href="../en/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Xrandr_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;oldid=640334">https://wiki.archlinux.org/index.php?title=Xrandr_(简体中文)&amp;oldid=640334</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 2 November 2020, at 08:57.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
