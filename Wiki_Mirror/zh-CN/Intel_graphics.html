<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Intel graphics (简体中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Intel_graphics_简体中文 rootpage-Intel_graphics_简体中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Intel graphics (简体中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>相关文章</p>
<ul>
<li><a href="../en/Intel_GMA_3600.html" class="mw-redirect" title="Intel GMA3600">Intel GMA3600</a></li>
<li><a href="../zh-CN/Xorg.html" title="Xorg (简体中文)">Xorg</a></li>
<li><a href="../en/Kernel_mode_setting.html" title="Kernel mode setting">Kernel mode setting</a></li>
<li><a href="../en/Xrandr.html" title="Xrandr">Xrandr</a></li>
<li><a href="../en/Hybrid_graphics.html" title="Hybrid graphics">Hybrid graphics</a></li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>翻译状态：</strong>本文是 <a href="../en/Intel_graphics.html" class="mw-redirect" title="Intel Graphics">Intel_Graphics</a> 的<a href="../zh-CN/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (简体中文)">翻译</a>。上次翻译日期：2016-08-16。如果英文版本有所<a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Intel_Graphics&amp;diff=0&amp;oldid=446766">更改</a>，则您可以帮助同步翻译。</div>
<p>由于 Intel 提供和支持 X.Org 开源驱动，Intel 的显卡基本上是即插即用的。
</p>
<p>Intel显卡和相应芯片组、cpu的完整型号参考<a href="https://en.wikipedia.org/wiki/Comparison_of_Intel_graphics_processing_units" class="extiw" title="wikipedia:Comparison of Intel graphics processing units">维基百科上的 Intel 显卡处理单元对比</a>。
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 
<ul>
<li>有些人建议不要安装Intel驱动，而应该使用通用的 modesetting 驱动。 参见 <a rel="nofollow" class="external autonumber" href="https://packages.debian.org/sid/x11/xserver-xorg-video-intel">[1]</a> 与 <a rel="nofollow" class="external autonumber" href="https://www.reddit.com/r/archlinux/comments/4cojj9/it_is_probably_time_to_ditch_xf86videointel/">[2]</a>.</li>
<li>开源驱动不支持基于PowerVR的显卡(<a href="../en/Intel_GMA_3600.html" title="Intel GMA 3600">GMA 3600</a> 系列)。</li>
</ul>
</div>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#%E5%AE%89%E8%A3%85"><span class="tocnumber">1</span> <span class="toctext">安装</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#%E9%85%8D%E7%BD%AE"><span class="tocnumber">2</span> <span class="toctext">配置</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#%E5%8A%A0%E8%BD%BD"><span class="tocnumber">3</span> <span class="toctext">加载</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#%E5%90%AF%E7%94%A8_early_KMS"><span class="tocnumber">3.1</span> <span class="toctext">启用 early KMS</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5">
<a href="#%E5%9F%BA%E4%BA%8E%E6%A8%A1%E5%9D%97%E7%9A%84%E7%9C%81%E7%94%B5%E9%80%89%E9%A1%B9"><span class="tocnumber">4</span> <span class="toctext">基于模块的省电选项</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#RC6_sleep_modes_(enable_rc6)"><span class="tocnumber">4.1</span> <span class="toctext">RC6 sleep modes (enable_rc6)</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#%E5%B8%A7%E7%BC%93%E5%86%B2%E5%8E%8B%E7%BC%A9_(enable_fbc)"><span class="tocnumber">4.2</span> <span class="toctext">帧缓冲压缩 (enable_fbc)</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8">
<a href="#%E6%8A%80%E5%B7%A7"><span class="tocnumber">5</span> <span class="toctext">技巧</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="#%E9%81%BF%E5%85%8D%E6%92%AD%E6%94%BE%E8%A7%86%E9%A2%91%E6%97%B6%E5%B1%8F%E5%B9%95%E6%92%95%E8%A3%82"><span class="tocnumber">5.1</span> <span class="toctext">避免播放视频时屏幕撕裂</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#%E7%A6%81%E7%94%A8%E5%9E%82%E7%9B%B4%E5%90%8C%E6%AD%A5_(VSYNC)"><span class="tocnumber">5.2</span> <span class="toctext">禁用垂直同步 (VSYNC)</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#%E8%AE%BE%E7%BD%AE%E8%87%AA%E5%8A%A8%E7%BC%A9%E6%94%BE%E6%A8%A1%E5%BC%8F"><span class="tocnumber">5.3</span> <span class="toctext">设置自动缩放模式</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#KMS_%E9%97%AE%E9%A2%98:_%E7%BB%88%E7%AB%AF%E9%9D%A2%E7%A7%AF%E5%BE%88%E5%B0%8F"><span class="tocnumber">5.4</span> <span class="toctext">KMS 问题: 终端面积很小</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#%E5%9C%A8_GMA_4500_%E7%A1%AC%E8%A7%A3_H.264"><span class="tocnumber">5.5</span> <span class="toctext">在 GMA 4500 硬解 H.264</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#%E8%AE%BE%E7%BD%AE%E4%BC%BD%E9%A9%AC%E5%92%8C%E4%BA%AE%E5%BA%A6"><span class="tocnumber">5.6</span> <span class="toctext">设置伽马和亮度</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-15">
<a href="#%E7%96%91%E9%9A%BE%E8%A7%A3%E7%AD%94"><span class="tocnumber">6</span> <span class="toctext">疑难解答</span></a>
<ul>
<li class="toclevel-2 tocsection-16"><a href="#SNA_%E9%97%AE%E9%A2%98"><span class="tocnumber">6.1</span> <span class="toctext">SNA 问题</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#DRI3_%E9%97%AE%E9%A2%98"><span class="tocnumber">6.2</span> <span class="toctext">DRI3 问题</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Font_and_screen_corruption_in_GTK+_applications_(missing_glyphs_after_suspend/resume)"><span class="tocnumber">6.3</span> <span class="toctext">Font and screen corruption in GTK+ applications (missing glyphs after suspend/resume)</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#%E5%9C%A8%E5%90%AF%E5%8A%A8%E9%98%B6%E6%AE%B5%EF%BC%8C%E5%BD%93_%22Loading_modules%22_%E6%97%B6%E9%BB%91%E5%B1%8F"><span class="tocnumber">6.4</span> <span class="toctext">在启动阶段，当 "Loading modules" 时黑屏</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#X_%E5%86%BB%E7%BB%93/%E5%B4%A9%E6%BA%83"><span class="tocnumber">6.5</span> <span class="toctext">X 冻结/崩溃</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#%E6%B7%BB%E5%8A%A0%E6%9C%AA%E8%AF%86%E5%88%AB%E5%88%86%E8%BE%A8%E7%8E%87"><span class="tocnumber">6.6</span> <span class="toctext">添加未识别分辨率</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#Weathered_colors_(color_range_problem)"><span class="tocnumber">6.7</span> <span class="toctext">Weathered colors (color range problem)</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#Backlight_is_not_adjustable"><span class="tocnumber">6.8</span> <span class="toctext">Backlight is not adjustable</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#Disabling_frame_buffer_compression"><span class="tocnumber">6.9</span> <span class="toctext">Disabling frame buffer compression</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="#Corruption/Unresponsiveness_in_Chromium_and_Firefox"><span class="tocnumber">6.10</span> <span class="toctext">Corruption/Unresponsiveness in Chromium and Firefox</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="#Kernel_crashing_w/kernels_4.0+_on_Broadwell/Core-M_chips"><span class="tocnumber">6.11</span> <span class="toctext">Kernel crashing w/kernels 4.0+ on Broadwell/Core-M chips</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#Skylake_support"><span class="tocnumber">6.12</span> <span class="toctext">Skylake support</span></a></li>
<li class="toclevel-2 tocsection-28"><a href="#Lag_in_Windows_guests"><span class="tocnumber">6.13</span> <span class="toctext">Lag in Windows guests</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-29"><a href="#%E6%9B%B4%E5%A4%9A%E4%BF%A1%E6%81%AF"><span class="tocnumber">7</span> <span class="toctext">更多信息</span></a></li>
</ul>
</div>

<h2>
<span id=".E5.AE.89.E8.A3.85"></span><span class="mw-headline" id="安装">安装</span>
</h2>
<p><a href="../zh-CN/Pacman.html" title="Pacman (简体中文)">安装</a>位于<a href="../zh-CN/Official_repositories.html" title="Official repositories (简体中文)">官方软件仓库</a>的 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-video-intel">xf86-video-intel</a></span> 软件包。它提供了用于2D加速的DDX驱动。并且它依赖于3D加速的DRI驱动 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mesa">mesa</a></span>。
</p>
<p>要启用OpenGL支持, 需要安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mesa-libgl">mesa-libgl</a></span><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">断开的链接</a>：replaced by <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mesa">mesa</a></span>]</sup>。如果你使用的是64位系统并且需要 32 位程序中使用加速功能，还需要安装<a href="../en/Official_repositories.html#multilib" class="mw-redirect" title="Multilib">multilib</a> 仓库中的 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/lib32-mesa-libgl/">lib32-mesa-libgl</a></span><sup><small>AUR</small></sup>。
</p>
<p>参考 <a href="../en/Hardware_video_acceleration.html" title="Hardware video acceleration">Hardware video acceleration</a>.
</p>
<p>Ivy-Bridge以及更新的GPU支持 <a href="../en/Vulkan.html" title="Vulkan">Vulkan</a> ，要启用这项功能，请安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=vulkan-intel">vulkan-intel</a></span> 。
</p>
<h2>
<span id=".E9.85.8D.E7.BD.AE"></span><span class="mw-headline" id="配置">配置</span>
</h2>
<p>要运行 <a href="../en/Xorg.html" title="Xorg">Xorg</a>，没有必要做任何形式的配置（不需要<code>xorg.conf</code>，但若有则需要正确配置）。
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 一些最新型号的核心显卡（例如Skylake/HD 530）可能需要额外的设置，参见<a href="#Skylake_%E6%94%AF%E6%8C%81">#Skylake 支持</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" class="mw-redirect" title="ArchWiki:Requests">断开的链接</a>：无效的部分]</sup>
</div>
<p>然而，为了设定驱动的选项，你可能需要创建一份形式如下的Xorg的配置文件。
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/20-intel.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "Device"
   Identifier  "Intel Graphics"
   Driver      "intel"
EndSection</pre>
<p>其他的一些选项由用户自行添加在<code>Driver</code>下方（每个选项一行）。
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 
<ul>
<li>在创建配置文件时，你可能需要指定<code>Option "AccelMethod"</code>（加速方式），哪怕只是将他设定为默认的方式 （现在的默认加速方式为 <code>"sna"</code>）；否则 X 可能会崩溃。</li>
<li>你可能会需要在配置文件中添加更多的<code>Section "Device"</code>（驱动部分）。在相应的文章中会提示你在何处添加。</li>
</ul>
</div>
<p>查看完整选项列表，在终端中输入<span class="plainlinks archwiki-template-man" title="$ man 4 intel"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/intel.4">intel(4)</a></span>。
</p>
<h2>
<span id=".E5.8A.A0.E8.BD.BD"></span><span class="mw-headline" id="加载">加载</span>
</h2>
<p>英特尔内核模块在系统启动时自动加载.
如果它不启动，请检查:
</p>
<ul>
<li>首先，确认你 <b>没有</b> 在 <a href="../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a> 中添加 <code>nomodeset</code> 或 <code>vga=</code>选项， 因为Intel显示驱动需要 <a href="../en/Kernel_mode_setting.html" class="mw-redirect" title="KMS">KMS</a>.</li>
<li>其次，检查你没有把Intel列入 <code>/etc/modprobe.d/</code> 或 <code>/usr/lib/modprobe.d/</code> 中的modprobe的黑名单文件中。</li>
</ul>
<h3>
<span id=".E5.90.AF.E7.94.A8_early_KMS"></span><span class="mw-headline" id="启用_early_KMS">启用 early KMS</span>
</h3>
<p><a href="../en/Kernel_mode_setting.html" title="Kernel mode setting">Kernel mode setting</a> (KMS)被使用的i915 DRM驱动程序英特尔芯片组所支持，并且默认情况下被强制启用。
</p>
<p>要在启动过程的早期启动 KMS，请参考 <a href="../en/Kernel_mode_setting.html#Early_KMS_start" title="Kernel mode setting">Kernel mode setting#Early KMS start</a>。
</p>
<h2>
<span id=".E5.9F.BA.E4.BA.8E.E6.A8.A1.E5.9D.97.E7.9A.84.E7.9C.81.E7.94.B5.E9.80.89.E9.A1.B9"></span><span class="mw-headline" id="基于模块的省电选项">基于模块的省电选项</span>
</h2>
<p>可以通过<a href="../en/Kernel_module.html#Setting_module_options" class="mw-redirect" title="Kernel modules">内核模块选项</a> 配置 <code>i915</code> 内核模块，其中一些选项会对影响省电功能。
</p>
<p>通过下面命令可以获得所有支持选项及其简介和默认值
</p>
<pre>$ modinfo -p i915
</pre>
<p>要检查目前启用了那些选项：
</p>
<pre># systool -m i915 -av
</pre>
<p>You will note that the <code>i915.powersave</code> option which "enable[s] powersavings, fbc, downclocking, etc." is enabled by default, resulting in per-chip powersaving defaults. It is however possible to configure more aggressive powersaving by using <a href="../en/Kernel_module.html#Setting_module_options" class="mw-redirect" title="Kernel modules">module options</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Diverting from the defaults will mark the kernel as <a rel="nofollow" class="external text" href="https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=fc9740cebc3ab7c65f3c5f6ce0caf3e4969013ca">tainted</a> from Linux 3.18 onwards. This basically implies using other options than the per-chip defaults is considered experimental and not supported by the developers.</div>
<p>The following set of options should be generally safe to enable:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/i915.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options i915 enable_rc6=1 enable_fbc=1 lvds_downclock=1 semaphores=1
</pre>
<h3>
<span id="RC6_sleep_modes_.28enable_rc6.29"></span><span class="mw-headline" id="RC6_sleep_modes_(enable_rc6)">RC6 sleep modes (enable_rc6)</span>
</h3>
<p>You can experiment with higher values for <code>enable_rc6</code>, but your GPU may not support them or the activation of the other options <a rel="nofollow" class="external autonumber" href="https://wiki.archlinux.org/index.php?title=Talk:Intel_Graphics&amp;oldid=327547#Kernel_Module_options">[3]</a>.
</p>
<p>The available <code>enable_rc6</code> values are a bitmask with bit values RC6=1, RC6p=2, RC6pp=3<a rel="nofollow" class="external autonumber" href="https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/drivers/gpu/drm/i915/intel_pm.c#n34">[4]</a> - where "RC6p" and "RC6pp" are lower power states.
</p>
<p>To confirm the current running RC6 level, you can look in sysfs:
</p>
<pre># cat /sys/class/drm/card0/power/rc6_enable
</pre>
<p>... if the value read is a lower number than expected, the other RC6 level are probably not supported. Passing <code>drm.debug=0xe</code> will add DRM debugging information to the kernel log - possibly including a line like this:
</p>
<pre>[drm:sanitize_rc6_option] Adjusting RC6 mask to 1 (requested 7, valid 1)
</pre>
<h3>
<span id=".E5.B8.A7.E7.BC.93.E5.86.B2.E5.8E.8B.E7.BC.A9_.28enable_fbc.29"></span><span class="mw-headline" id="帧缓冲压缩_(enable_fbc)">帧缓冲压缩 (enable_fbc)</span>
</h3>
<p>在 Sandy Bridge之前世代的 Intel GPU （第六代）上使用帧缓冲压缩可能会导致 GPU 的不稳定，甚至不可用。这时系统日志里可能会出现类似于下面的消息：
</p>
<pre>kernel: drm: not enough stolen space for compressed buffer, disabling.
</pre>
<h2>
<span id=".E6.8A.80.E5.B7.A7"></span><span class="mw-headline" id="技巧">技巧</span>
</h2>
<h3>
<span id=".E9.81.BF.E5.85.8D.E6.92.AD.E6.94.BE.E8.A7.86.E9.A2.91.E6.97.B6.E5.B1.8F.E5.B9.95.E6.92.95.E8.A3.82"></span><span class="mw-headline" id="避免播放视频时屏幕撕裂">避免播放视频时屏幕撕裂</span>
</h3>
<p>若使用 SNA，将下列内容添加到 <code>/etc/X11/xorg.conf.d/20-intel.conf</code> 的 <code>Device</code> 部分可杜绝屏幕撕裂问题。
</p>
<pre>Option "TearFree" "true"
</pre>
<p>参见 <a rel="nofollow" class="external text" href="https://bugs.freedesktop.org/show_bug.cgi?id=37686">original bug report</a> 以获取更多信息.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 
<ul>
<li>如果 <code>SwapbuffersWait</code> 被设定为 <code>false</code>，这个选项可能不会生效。</li>
<li>这个选项对一些非常挑剔垂直同步时间的程序会产生很多问题，例如 <a href="https://en.wikipedia.org/wiki/Super_Meat_Boy" class="extiw" title="wikipedia:Super Meat Boy">Super Meat Boy</a>。</li>
<li>这个选项对 UXA 的加速方式不起作用，它仅仅作用于 SNA 的加速方式。</li>
<li>当 DRI3 被启用时，这个选项应该是不需要的。</li>
</ul>
</div>
<h3>
<span id=".E7.A6.81.E7.94.A8.E5.9E.82.E7.9B.B4.E5.90.8C.E6.AD.A5_.28VSYNC.29"></span><span class="mw-headline" id="禁用垂直同步_(VSYNC)">禁用垂直同步 (VSYNC)</span>
</h3>
<p>在<code>/etc/X11/xorg.conf.d/20-intel.conf</code> 的 <code>Section "Device"</code> 段添加 <code>Option "SwapbuffersWait" "false"</code> 可禁用 VSYNC.
</p>
<p>在 <code>~/.drirc</code> 中将 <code>vblank_mode</code> 设为 <code>0</code> 并且将 <code>driver</code> 设为 <code>dri2</code> 也可达到上述效果:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.drirc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;device screen="0" driver="dri2"&gt;
   &lt;application name="Default"&gt;
   &lt;option name="vblank_mode" value="0"/&gt;
   &lt;/application&gt;
&lt;/device&gt;</pre>
<h3>
<span id=".E8.AE.BE.E7.BD.AE.E8.87.AA.E5.8A.A8.E7.BC.A9.E6.94.BE.E6.A8.A1.E5.BC.8F"></span><span class="mw-headline" id="设置自动缩放模式">设置自动缩放模式</span>
</h3>
<p>在一些全屏应用中此方法适用:
</p>
<pre>$ xrandr --output LVDS1 --set PANEL_FITTING param
</pre>
<p><code>param</code> 可以是:
</p>
<ul>
<li>
<code>center</code>: 使用自定义分辨率，不缩放；</li>
<li>
<code>full</code>: 使用全屏；</li>
<li>
<code>full_aspect</code>: 在长宽比不变的情况下使用最大可用分辨率。</li>
</ul>
<p>若无效，可尝试:
</p>
<pre>$ xrandr --output LVDS1 --set "scaling mode" param
</pre>
<p><code>param</code>可以是<code>"Full"</code>、<code>"Center"</code> 或 <code>"Full aspect"</code>.
</p>
<h3>
<span id="KMS_.E9.97.AE.E9.A2.98:_.E7.BB.88.E7.AB.AF.E9.9D.A2.E7.A7.AF.E5.BE.88.E5.B0.8F"></span><span class="mw-headline" id="KMS_问题:_终端面积很小">KMS 问题: 终端面积很小</span>
</h3>
<p>在启动阶段，启用了低分辨率的接口会导致终端面积很小。通过i915模块设置可解决此问题，具体在加载器的内核参数添加 <code>video=SVIDEO-1:d</code>。内核参数的更多信息参考 <a href="../en/Kernel_parameters.html" title="Kernel parameters">Kernel parameters</a> .
</p>
<p>若无效，可试着禁用 TV1 或 VGA1 接口。
</p>
<h3>
<span id=".E5.9C.A8_GMA_4500_.E7.A1.AC.E8.A7.A3_H.264"></span><span class="mw-headline" id="在_GMA_4500_硬解_H.264">在 GMA 4500 硬解 H.264</span>
</h3>
<p>GMA 4500 平台上，<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libva-intel-driver">libva-intel-driver</a></span> 只能硬解 MPEG-2。 H.264 的硬解为另一分支——g45-h264， 在 <a href="../en/Arch_User_Repository.html" title="Arch User Repository">Arch User Repository</a> 中安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/libva-driver-intel-g45-h264/">libva-driver-intel-g45-h264</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">断开的链接</a>：package not found]</sup> 就OK。 但注意 g45-h264 目前仍处于试验阶段，且开发不活跃。通过 VA-API 会减轻cpu的负载但不如使用非加速方式流畅。 mplayer的测试表明 使用vaapi 播放H.264 编码的 1080p 视频会让cpu的负载减半 (与XV相比) ，但播放很不稳定, 而 720p 则很到位 <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=150550">[5]</a>。其他一些用户也提到这点<a rel="nofollow" class="external autonumber" href="http://www.emmolution.org/?p=192&amp;cpage=1#comment-12292">[6]</a>。
</p>
<h3>
<span id=".E8.AE.BE.E7.BD.AE.E4.BC.BD.E9.A9.AC.E5.92.8C.E4.BA.AE.E5.BA.A6"></span><span class="mw-headline" id="设置伽马和亮度">设置伽马和亮度</span>
</h3>
<p>See <a href="../en/Backlight.html" title="Backlight">Backlight</a>.
</p>
<h2>
<span id=".E7.96.91.E9.9A.BE.E8.A7.A3.E7.AD.94"></span><span class="mw-headline" id="疑难解答">疑难解答</span>
</h2>
<h3>
<span id="SNA_.E9.97.AE.E9.A2.98"></span><span class="mw-headline" id="SNA_问题">SNA 问题</span>
</h3>
<p>xf86-video-intel 现在默认的加速方式为SNA，如果出现图形问题，可以尝试使用使用旧的 UXA 加速方式, 创建包含下列内容的<code>/etc/X11/xorg.conf.d/20-intel.conf</code> 就可使用UXA:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/20-intel.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "Device"
   Identifier  "Intel Graphics"
   Driver      "intel"
   Option      "AccelMethod"  "uxa"
EndSection</pre>
<h3>
<span id="DRI3_.E9.97.AE.E9.A2.98"></span><span class="mw-headline" id="DRI3_问题">DRI3 问题</span>
</h3>
<p><i>DRI3</i> 是 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-video-intel">xf86-video-intel</a></span> 默认的 DRI 版本，在有些系统上可能出现 <a rel="nofollow" class="external text" href="https://bugs.chromium.org/p/chromium/issues/detail?id=370022">问题</a>。要退回到 <i>DRI2</i>，在配置文件中加入:
</p>
<pre>Option "DRI" "2"
</pre>
<h3>
<span id="Font_and_screen_corruption_in_GTK.2B_applications_.28missing_glyphs_after_suspend.2Fresume.29"></span><span class="mw-headline" id="Font_and_screen_corruption_in_GTK+_applications_(missing_glyphs_after_suspend/resume)">Font and screen corruption in GTK+ applications (missing glyphs after suspend/resume)</span>
</h3>
<p>Should you experience missing font glyphs in GTK+ applications, the following workaround might help. <a href="../en/Help:Reading.html#Append,_add,_create,_edit" class="mw-redirect" title="Textedit">Edit</a> <code>/etc/environment</code> to add the following line:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/environment</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">COGL_ATLAS_DEFAULT_BLIT_MODE=framebuffer</pre>
<p>See also <a rel="nofollow" class="external text" href="https://bugs.freedesktop.org/show_bug.cgi?id=88584">FreeDesktop bug 88584</a>.
</p>
<h3>
<span id=".E5.9C.A8.E5.90.AF.E5.8A.A8.E9.98.B6.E6.AE.B5.EF.BC.8C.E5.BD.93_.22Loading_modules.22_.E6.97.B6.E9.BB.91.E5.B1.8F"></span><span class="mw-headline" id='在启动阶段，当_"Loading_modules"_时黑屏'>在启动阶段，当 "Loading modules" 时黑屏</span>
</h3>
<p>若使用 "late start" KMS ，当 "Loading modules" 时黑屏, 在 initramfs 中添加 <code>i915</code> 和 <code>intel_agp</code> 可能有帮助. 查看 <a href="../en/Intel_graphics.html#KMS_(Kernel_Mode_Setting)" class="mw-redirect" title="Intel">the above</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" class="mw-redirect" title="ArchWiki:Requests">断开的链接</a>：无效的部分]</sup> 的 KMS 节.
</p>
<p>在尾部添加下面 <a href="../en/Kernel_parameters.html" title="Kernel parameters">kernel parameter</a> 可能也会有效果:
</p>
<pre>video=SVIDEO-1:d
</pre>
<p>如果是输出到 VGA:
</p>
<pre>video=VGA-1:1280x800
</pre>
<h3>
<span id="X_.E5.86.BB.E7.BB.93.2F.E5.B4.A9.E6.BA.83"></span><span class="mw-headline" id="X_冻结/崩溃">X 冻结/崩溃</span>
</h3>
<p>使用 <code>NoAccel</code> 选项可能对 X 冻结／崩溃或显卡停止工作有效。
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/20-intel.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "Device"
   Identifier "Intel Graphics"
   Driver "intel"
   Option "NoAccel" "True"
EndSection</pre>
<p>此外， 也可尝试 <code>DRI</code> 选项来禁用 3D 加速:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/20-intel.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "Device"
   Identifier "Intel Graphics"
   Driver "intel"
   Option "DRI" "False"
EndSection</pre>
<p>If you experience crashes and have
</p>
<pre>Option "TearFree" "true"
Option "AccelMethod" "sna"
</pre>
<p>in your configuration file, in most cases these can be fixed by adding
</p>
<pre>i915.semaphores=1
</pre>
<p>to your boot parameters.
</p>
<p>If you are using kernel 4.0.X or above on Baytrail architecture and frequently encounter complete system freezes (especially when watching video or using GFX intensivelly), you should try adding the following kernel option as a workaround, until <a rel="nofollow" class="external text" href="https://bugzilla.kernel.org/show_bug.cgi?id=109051">this bug</a> will be fixed permanently.
</p>
<pre> intel_idle.max_cstate=1
</pre>
<h3>
<span id=".E6.B7.BB.E5.8A.A0.E6.9C.AA.E8.AF.86.E5.88.AB.E5.88.86.E8.BE.A8.E7.8E.87"></span><span class="mw-headline" id="添加未识别分辨率">添加未识别分辨率</span>
</h3>
<p><a href="../en/Xrandr.html#Adding_undetected_resolutions" title="Xrandr">Xrandr page</a> 讲到了此问题。
</p>
<h3>
<span id="Weathered_colors_.28color_range_problem.29"></span><span class="mw-headline" id="Weathered_colors_(color_range_problem)">Weathered colors (color range problem)</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This problem is related to the <a rel="nofollow" class="external text" href="https://lists.freedesktop.org/archives/dri-devel/2013-January/033576.html">changes</a> in the kernel 3.9. This problem still remains in kernel 4.1.</div>
<p>Kernel 3.9 contains a new default "Automatic" mode for the "Broadcast RGB" property in the Intel driver. It is almost equivalent to "Limited 16:235" (instead of the old default "Full") whenever an HDMI/DP output is in a <a rel="nofollow" class="external text" href="https://raspberrypi.stackexchange.com/questions/7332/what-is-the-difference-between-cea-and-dmt">CEA mode</a>. If a monitor does not support signal in limited color range, it will cause weathered colors.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Some monitors/TVs support both color range. In that case an option often known as <i>Black Level</i> may need to be adjusted to make them handle the signal correctly. Some TVs can handle signal in limited range only. Setting Broadcast RGB to "Full" will cause color clipping. You may need to set it to "Limited 16:235" manually to avoid the clipping.</div>
<p>One can force mode e.g. <code>xrandr --output &lt;HDMI&gt; --set "Broadcast RGB" "Full"</code> (replace <code>&lt;HDMI&gt;</code> with the appropriate output device, verify by running <code>xrandr</code>).
</p>
<p>Unfortunately, the Intel driver does not support setting the color range through an <code>xorg.conf.d</code> configuration file.
</p>
<p>A <a rel="nofollow" class="external text" href="https://bugzilla.kernel.org/show_bug.cgi?id=94921">bug report</a> is filed and a patch can be found in the attachment.
</p>
<p>Also there are other related problems which can be fixed editing GPU registers. More information can be found <a rel="nofollow" class="external autonumber" href="https://lists.freedesktop.org/archives/intel-gfx/2012-April/016217.html">[7]</a> and <a rel="nofollow" class="external autonumber" href="https://github.com/OpenELEC/OpenELEC.tv/commit/09109e9259eb051f34f771929b6a02635806404c">[8]</a>.
</p>
<h3><span class="mw-headline" id="Backlight_is_not_adjustable">Backlight is not adjustable</span></h3>
<p>If after resuming from suspend, the hotkeys for changing the screen brightness do not take effect, check your configuration against the <a href="../en/Backlight.html" title="Backlight">Backlight</a> article.
</p>
<p>If the problem persists, try one of the following <a href="../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a>:
</p>
<pre>acpi_osi=Linux
acpi_osi="!Windows 2012"
acpi_osi=
</pre>
<h3><span class="mw-headline" id="Disabling_frame_buffer_compression">Disabling frame buffer compression</span></h3>
<p>Enabling frame buffer compression on pre-Sandy Bridge CPUs results in endless error messages:
</p>
<pre># dmesg |tail 
[ 2360.475430] [drm] not enough stolen space for compressed buffer (need 4325376 bytes), disabling
[ 2360.475437] [drm] hint: you may be able to increase stolen memory size in the BIOS to avoid this
</pre>
<p>The solution is to disable frame buffer compression which will slightly increase power consumption. In order to disable it add <code>i915.enable_fbc=0</code> to the kernel line parameters. More information on the results of disabled compression can be found <a rel="nofollow" class="external text" href="http://zinc.canonical.com/~cking/power-benchmarking/background-colour-and-framebuffer-compression/results.txt">here</a><sup title="最后检查状态：domain name not resolved">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-02 ⓘ]</sup>.
</p>
<h3>
<span id="Corruption.2FUnresponsiveness_in_Chromium_and_Firefox"></span><span class="mw-headline" id="Corruption/Unresponsiveness_in_Chromium_and_Firefox">Corruption/Unresponsiveness in Chromium and Firefox</span>
</h3>
<p>If you experience corruption or unresponsiveness in Chromium and/or Firefox <a href="#SNA_issues">set the AccelMethod to "uxa"</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" class="mw-redirect" title="ArchWiki:Requests">断开的链接</a>：无效的部分]</sup>.
</p>
<h3>
<span id="Kernel_crashing_w.2Fkernels_4.0.2B_on_Broadwell.2FCore-M_chips"></span><span class="mw-headline" id="Kernel_crashing_w/kernels_4.0+_on_Broadwell/Core-M_chips">Kernel crashing w/kernels 4.0+ on Broadwell/Core-M chips</span>
</h3>
<p>A few seconds after X/Wayland loads the machine will freeze and journalctl will log a kernel crash referencing the Intel graphics as below:
</p>
<pre>Jun 16 17:54:03 hostname kernel: BUG: unable to handle kernel NULL pointer dereference at           (null)
Jun 16 17:54:03 hostname kernel: IP: [&lt;          (null)&gt;]           (null)
...
Jun 16 17:54:03 hostname kernel: CPU: 0 PID: 733 Comm: gnome-shell Tainted: G     U     O    4.0.5-1-ARCH #1
...
Jun 16 17:54:03 hostname kernel: Call Trace:
Jun 16 17:54:03 hostname kernel:  [&lt;ffffffffa055cc27&gt;] ? i915_gem_object_sync+0xe7/0x190 [i915]
Jun 16 17:54:03 hostname kernel:  [&lt;ffffffffa0579634&gt;] intel_execlists_submission+0x294/0x4c0 [i915]
Jun 16 17:54:03 hostname kernel:  [&lt;ffffffffa05539fc&gt;] i915_gem_do_execbuffer.isra.12+0xabc/0x1230 [i915]
Jun 16 17:54:03 hostname kernel:  [&lt;ffffffffa055d349&gt;] ? i915_gem_object_set_to_cpu_domain+0xa9/0x1f0 [i915]
Jun 16 17:54:03 hostname kernel:  [&lt;ffffffff811ba2ae&gt;] ? __kmalloc+0x2e/0x2a0
Jun 16 17:54:03 hostname kernel:  [&lt;ffffffffa0555471&gt;] i915_gem_execbuffer2+0x141/0x2b0 [i915]
Jun 16 17:54:03 hostname kernel:  [&lt;ffffffffa042fcab&gt;] drm_ioctl+0x1db/0x640 [drm]
Jun 16 17:54:03 hostname kernel:  [&lt;ffffffffa0555330&gt;] ? i915_gem_execbuffer+0x450/0x450 [i915]
Jun 16 17:54:03 hostname kernel:  [&lt;ffffffff8122339b&gt;] ? eventfd_ctx_read+0x16b/0x200
Jun 16 17:54:03 hostname kernel:  [&lt;ffffffff811ebc36&gt;] do_vfs_ioctl+0x2c6/0x4d0
Jun 16 17:54:03 hostname kernel:  [&lt;ffffffff811f6452&gt;] ? __fget+0x72/0xb0
Jun 16 17:54:03 hostname kernel:  [&lt;ffffffff811ebec1&gt;] SyS_ioctl+0x81/0xa0
Jun 16 17:54:03 hostname kernel:  [&lt;ffffffff8157a589&gt;] system_call_fastpath+0x12/0x17
Jun 16 17:54:03 hostname kernel: Code:  Bad RIP value.
Jun 16 17:54:03 hostname kernel: RIP  [&lt;          (null)&gt;]           (null)
</pre>
<p>This can be fixed by disabling execlist support which was changed to default on with kernel 4.0. Add the following kernel parameter:
</p>
<pre>i915.enable_execlists=0
</pre>
<p>This is known to be broken to at least kernel 4.0.5.
</p>
<h3><span class="mw-headline" id="Skylake_support">Skylake support</span></h3>
<p>For linux kernels older than 4.3.x, <code>i915.preliminary_hw_support=1</code> must be added to your boot parameters for the driver to work on the new Intel Skylake (6th gen.) GPUs. On a fully updated system running kernel 4.3.x and up, this step is unneccesary.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Fixes for the GPU/DRM bugs are pending in kernel 4.6. The following steps are unneccesary if you have <a href="../en/Official_repositories.html#Testing_repositories" class="mw-redirect" title="Testing">testing</a> repo enabled, or once 4.6 lands in <a href="../en/Official_repositories.html#core" title="Official repositories">core</a>.</div>
<p>The i915 DRM driver is known to cause various GPU hangs, crashes and even full system freezes. It might be neccesary to disable hardware acceleration to workaround these issues. One solution is to use the following Xorg configuration.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/20-intel.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "Device"
	Identifier  "Intel Graphics"
	Driver      "intel"
	Option	    "DRI"	"false"
EndSection
</pre>
<p>Otherwise, specific applications such as Chromium and Firefox browsers can be instructed to disable hardware rendering directly.
</p>
<p>Another option that seems to work for some users is to add the <code>i915.enable_rc6=0</code> kernel boot parameter, which will cause the CPU/GPU to remain in high-power modes, but seems to resolve most cases of GPU hangs and system freezes.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If the system appears to hang after "Loading Initial Ramdisk", make sure that the IGD aperture size in BIOS is less than 4GB.</div>
<h3><span class="mw-headline" id="Lag_in_Windows_guests">Lag in Windows guests</span></h3>
<p>The video output of a Windows guests in VirtualBox sometimes hangs until the host forces a screen update (e.g. by moving the mouse cursor). Removing the <code>enable_fbc=1</code> option fixes this issue.
</p>
<h2>
<span id=".E6.9B.B4.E5.A4.9A.E4.BF.A1.E6.81.AF"></span><span class="mw-headline" id="更多信息">更多信息</span>
</h2>
<ul>
<li>
<a rel="nofollow" class="external free" href="http://intellinuxgraphics.org/documentation.html">http://intellinuxgraphics.org/documentation.html</a> (包括一个被支持的硬件列表)</li>
<li>
<a href="../en/Kernel_mode_setting.html" class="mw-redirect" title="KMS">KMS</a> — Arch维基上关于 kernel mode setting 的文章</li>
<li>
<a href="../en/Xrandr.html" title="Xrandr">Xrandr</a> — 如果你有关于分辨率方面的问题，请参阅它。</li>
<li>Arch Linux 论坛中的讨论: <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=522665#p522665">Intel 945GM, Xorg, Kernel - performance</a>
</li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../zh-CN/Category:X_server.html" title="Category:X server (简体中文)">X server (简体中文)</a></li>
<li><a href="../zh-CN/Category:Graphics.html" title="Category:Graphics (简体中文)">Graphics (简体中文)</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li>
<li><a href="../en/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Intel_graphics_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;oldid=663813">https://wiki.archlinux.org/index.php?title=Intel_graphics_(简体中文)&amp;oldid=663813</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 23 April 2021, at 16:49.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
