<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>tmux (简体中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Tmux_简体中文 rootpage-Tmux_简体中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">tmux (简体中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<p><span></span>
</p>
<div class="archwiki-template-meta-related-articles-start">
<p>相关文章</p>
<ul>
<li><a href="../en/Dtach.html" title="Dtach">dtach</a></li>
<li><a href="../en/GNU_Screen.html" title="GNU Screen">GNU Screen</a></li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>翻译状态：</strong>本文是 <a href="../en/Tmux.html" title="Tmux">Tmux</a> 的<a href="../zh-CN/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (简体中文)">翻译</a>。上次翻译日期：2017-10-24。如果英文版本有所<a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Tmux&amp;diff=0&amp;oldid=492457">更改</a>，则您可以帮助同步翻译。</div>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-preferences-desktop-locale.png" class="image"><img alt="Tango-preferences-desktop-locale.png" src="../File:Tango-preferences-desktop-locale.png" decoding="async" width="48" height="48"></a><b>本文或本节需要<a href="../zh-CN/ArchWiki:Contributing.html#%E7%BF%BB%E8%AF%91" title="ArchWiki:Contributing (简体中文)">翻译</a>。要贡献翻译，请访问<a href="../zh-CN/ArchWiki:Translation_Team.html" class="mw-redirect" title="ArchWiki Translation Team (简体中文)">简体中文翻译团队</a>。</b><a href="../File:Tango-preferences-desktop-locale.png" class="image"><img alt="Tango-preferences-desktop-locale.png" src="../File:Tango-preferences-desktop-locale.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>附注：</b> 部分内容未翻译（在 <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Tmux_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">Talk:Tmux (简体中文)#</a> 中讨论）</div>
</div>
<p><a rel="nofollow" class="external text" href="https://tmux.github.io/">tmux</a> 是一个终端复用器: 可以激活多个终端或窗口, 在每个终端都可以单独访问，每一个终端都可以访问，运行和控制各自的程序.tmux类似于screen，可以关闭窗口将程序放在后台运行，需要的时候再重新连接。
</p>
<p>Tmux 与基于 ISC 协议发布的 <a href="../en/GNU_Screen.html" class="mw-redirect" title="Screen Tips">GNU Screen</a> 类似，这个<a rel="nofollow" class="external text" href="https://raw.githubusercontent.com/tmux/tmux/master/FAQ">tmux FAQ 页面</a><sup title="最后检查状态：404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-06 ⓘ]</sup>包含两者的区别。
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#%E5%AE%89%E8%A3%85"><span class="tocnumber">1</span> <span class="toctext">安装</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#%E9%85%8D%E7%BD%AE"><span class="tocnumber">2</span> <span class="toctext">配置</span></a>
<ul>
<li class="toclevel-2 tocsection-3">
<a href="#%E5%BF%AB%E6%8D%B7%E9%94%AE%E5%89%8D%E7%BC%80"><span class="tocnumber">2.1</span> <span class="toctext">快捷键前缀</span></a>
<ul>
<li class="toclevel-3 tocsection-4"><a href="#%E5%A4%8D%E5%88%B6%E6%A8%A1%E5%BC%8F"><span class="tocnumber">2.1.1</span> <span class="toctext">复制模式</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-5"><a href="#%E6%89%93%E5%BC%80URL"><span class="tocnumber">2.2</span> <span class="toctext">打开URL</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#%E6%AD%A3%E7%A1%AE%E8%AE%BE%E7%BD%AE_term"><span class="tocnumber">2.3</span> <span class="toctext">正确设置 term</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#%E5%85%B6%E4%BB%96%E8%AE%BE%E7%BD%AE"><span class="tocnumber">2.4</span> <span class="toctext">其他设置</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#%E7%94%A8systemd%E5%90%8E%E5%8F%B0%E8%87%AA%E5%90%AFtmux"><span class="tocnumber">2.5</span> <span class="toctext">用systemd后台自启tmux</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#%E4%BC%9A%E8%AF%9D%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="tocnumber">3</span> <span class="toctext">会话初始化</span></a></li>
<li class="toclevel-1 tocsection-10">
<a href="#%E6%8F%90%E7%A4%BA%E5%92%8C%E5%B0%8F%E6%8A%80%E5%B7%A7"><span class="tocnumber">4</span> <span class="toctext">提示和小技巧</span></a>
<ul>
<li class="toclevel-2 tocsection-11">
<a href="#%E5%90%AF%E5%8A%A8%E6%97%B6%E4%BD%BF%E7%94%A8%E9%BB%98%E8%AE%A4%E5%B8%83%E5%B1%80"><span class="tocnumber">4.1</span> <span class="toctext">启动时使用默认布局</span></a>
<ul>
<li class="toclevel-3 tocsection-12"><a href="#%E8%8E%B7%E5%8F%96%E9%BB%98%E8%AE%A4%E5%B8%83%E5%B1%80%E5%8F%82%E6%95%B0"><span class="tocnumber">4.1.1</span> <span class="toctext">获取默认布局参数</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#%E5%AE%9A%E4%B9%89%E9%BB%98%E8%AE%A4%E5%B8%83%E5%B1%80"><span class="tocnumber">4.1.2</span> <span class="toctext">定义默认布局</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#%E8%87%AA%E5%8A%A8%E4%BD%BF%E7%94%A8%E9%BB%98%E8%AE%A4%E5%B8%83%E5%B1%80%E5%90%AF%E5%8A%A8tmux"><span class="tocnumber">4.1.3</span> <span class="toctext">自动使用默认布局启动tmux</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#%E9%BB%98%E8%AE%A4%E4%BC%9A%E8%AF%9D%E7%9A%84%E6%9B%BF%E4%BB%A3%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F"><span class="tocnumber">4.1.4</span> <span class="toctext">默认会话的替代实现方式</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-16"><a href="#Start_tmux_in_urxvt"><span class="tocnumber">4.2</span> <span class="toctext">Start tmux in urxvt</span></a></li>
<li class="toclevel-2 tocsection-17">
<a href="#%E5%90%AF%E5%8A%A8shell%E6%97%B6%E8%87%AA%E5%8A%A8%E5%90%AF%E5%8A%A8tmux"><span class="tocnumber">4.3</span> <span class="toctext">启动shell时自动启动tmux</span></a>
<ul>
<li class="toclevel-3 tocsection-18"><a href="#Bash"><span class="tocnumber">4.3.1</span> <span class="toctext">Bash</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-19"><a href="#%E5%90%AF%E5%8A%A8non-login_shell"><span class="tocnumber">4.4</span> <span class="toctext">启动non-login shell</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#%E5%83%8F%E6%A0%87%E7%AD%BE%E4%B8%80%E6%A0%B7%E4%BD%BF%E7%94%A8%E7%AA%97%E5%8F%A3"><span class="tocnumber">4.5</span> <span class="toctext">像标签一样使用窗口</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#Clients_simultaneously_interacting_with_various_windows_of_a_session"><span class="tocnumber">4.6</span> <span class="toctext">Clients simultaneously interacting with various windows of a session</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#%E6%A0%B9%E6%8D%AE%E7%BB%88%E7%AB%AF%E7%B1%BB%E5%9E%8B%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%AD%A3TERM%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="tocnumber">4.7</span> <span class="toctext">根据终端类型自动更正TERM环境变量</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#%E4%B8%8D%E7%94%A8%E9%87%8D%E5%90%AFtmux%E5%B0%B1%E8%83%BD%E5%8A%A0%E8%BD%BD%E6%96%B0%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="tocnumber">4.8</span> <span class="toctext">不用重启tmux就能加载新的配置</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#%E6%A0%B7%E4%BE%8B%E4%BB%A3%E7%A0%81:attach%E5%B7%B2%E5%90%AF%E5%8A%A8%E7%9A%84%E4%BC%9A%E8%AF%9D%E8%80%8C%E4%B8%8D%E6%98%AF%E6%96%B0%E5%BC%80%E4%B8%80%E4%B8%AA"><span class="tocnumber">4.9</span> <span class="toctext">样例代码:attach已启动的会话而不是新开一个</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="#%E6%A0%87%E9%A2%98%E6%A0%8F%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%94%B9"><span class="tocnumber">4.10</span> <span class="toctext">标题栏自动更改</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="#%E8%87%AA%E5%8A%A8%E5%B8%83%E5%B1%80"><span class="tocnumber">4.11</span> <span class="toctext">自动布局</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#%E4%BD%BF%E7%94%A8%E7%B1%BB%E4%BC%BCVim%E7%9A%84%E5%BF%AB%E6%8D%B7%E9%94%AE%E8%AE%BE%E7%BD%AE"><span class="tocnumber">4.12</span> <span class="toctext">使用类似Vim的快捷键设置</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-28">
<a href="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E4%B8%8E%E8%A7%A3%E7%AD%94"><span class="tocnumber">5</span> <span class="toctext">常见问题与解答</span></a>
<ul>
<li class="toclevel-2 tocsection-29"><a href="#%E6%BB%9A%E5%8A%A8%E9%97%AE%E9%A2%98"><span class="tocnumber">5.1</span> <span class="toctext">滚动问题</span></a></li>
<li class="toclevel-2 tocsection-30"><a href="#Shift+F6_not_working_in_Midnight_Commander"><span class="tocnumber">5.2</span> <span class="toctext">Shift+F6 not working in Midnight Commander</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-31">
<a href="#ICCCM_Selection_Integration"><span class="tocnumber">6</span> <span class="toctext">ICCCM Selection Integration</span></a>
<ul>
<li class="toclevel-2 tocsection-32"><a href="#Urxvt_MiddleClick_Solution"><span class="tocnumber">6.1</span> <span class="toctext">Urxvt MiddleClick Solution</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-33"><a href="#%E5%A4%96%E9%83%A8%E9%93%BE%E6%8E%A5"><span class="tocnumber">7</span> <span class="toctext">外部链接</span></a></li>
</ul>
</div>

<h2>
<span id=".E5.AE.89.E8.A3.85"></span><span class="mw-headline" id="安装">安装</span>
</h2>
<p>从<a href="../en/Official_repositories.html" title="Official repositories">官方源</a><a href="../en/Pacman.html" title="Pacman">安装</a>软件包<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=tmux">tmux</a></span>。可选安装<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/tmux-bash-completion/">tmux-bash-completion</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">断开的链接</a>：package not found]</sup>为tmux提供了bash补全功能。
</p>
<h2>
<span id=".E9.85.8D.E7.BD.AE"></span><span class="mw-headline" id="配置">配置</span>
</h2>
<p>用户私人配置文件在<code>~/.tmux.conf</code>, 全局配置文件在 <code>/etc/tmux.conf</code>。
</p>
<h3>
<span id=".E5.BF.AB.E6.8D.B7.E9.94.AE.E5.89.8D.E7.BC.80"></span><span class="mw-headline" id="快捷键前缀">快捷键前缀</span>
</h3>
<table class="wikitable" style="float: right; width: 200px;">
<caption>
<i>前缀为</i> <code>Ctrl-b</code>
</caption>
<tbody>
<tr>
<th>按键
</th>
<th>动作
</th>
</tr>
<tr>
<td>c
</td>
<td>创建一个新窗口
</td>
</tr>
<tr>
<td>n
</td>
<td>切换至下一窗口
</td>
</tr>
<tr>
<td>p
</td>
<td>切换到上一个窗口
</td>
</tr>
<tr>
<td>"
</td>
<td>水平分割窗口
</td>
</tr>
<tr>
<td>%
</td>
<td>垂直分割窗口
</td>
</tr>
<tr>
<td>,
</td>
<td>重新命名当前窗口
</td>
</tr>
<tr>
<td>o
</td>
<td>移动至下一个面板
</td>
</tr>
</tbody>
</table>
<p>默认绑定的前缀按键为Ctrl-b. 比如说垂直分割窗口的快捷键就是 <code>Ctrl-b %</code>。
</p>
<p>使用多个面板分割窗口后, 先按前缀快捷键(比如说：<code>Ctrl-b</code>)然后按住Ctrl键就可以使用方向键调整面板大小。 如果要交换面板也是采用同样的方式，只是按键由方向键换成“O“键。
</p>
<p>快捷键前缀可以用<code>tmux.conf</code>中的bind和unbind命令修改。比如你可以在配置文件中增加下面命令,把前缀<code>Ctrl-b</code>改成<code>Ctrl-a</code>：
</p>
<pre>unbind C-b
set -g prefix C-a
bind C-a send-prefix
</pre>
<p><br>
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>提示：</strong> 使用特殊字符作为前缀，你必须使用<code>Alt</code>键(Meta键)代替<code>Ctrl</code>键。例如：<code>set -g prefix m-'\'</code>
</div>
<p>。
</p>
<p>其他几种在窗口间移动的快捷键:
</p>
<pre>Ctrl-b l (回到上一个选定的窗口)
Ctrl-b w (显示所有的窗口和窗口序号)
Ctrl-b &lt;window number&gt; (移动到指定序号的窗口, 默认序号是 0 – 9)
Ctrl-b q  (显示当前面板号时, 输入指定的面板号可跳转.)
</pre>
<p>如果你打开10个以上的面板怎么办? tmux有寻找窗口的选项和快捷键. 
</p>
<pre>Ctrl-b f &lt;window name&gt; (寻找指定名字的窗口)
Ctrl-b w (从交互式列表中选择窗口)
</pre>
<h4>
<span id=".E5.A4.8D.E5.88.B6.E6.A8.A1.E5.BC.8F"></span><span class="mw-headline" id="复制模式">复制模式</span>
</h4>
<p>一个tmux窗口可能处于几个模式中的一个。默认模式允许直接访问连接到窗口的终端；另一种是复制模式。一旦在复制模式下，你可以在缓冲区包括滚动历史。vi或emacs风格的按键方式绑定在复制模式中，默认是emacs,除非编辑器包含"vi"。
</p>
<p>使用下列快捷键可以进入滚动模式:
</p>
<pre>Ctrl-b [
</pre>
<p>可以在默认编辑器的缓冲区中进行浏览。
离开复制模式，使用下面的按键：
vi模式
</p>
<pre> q
</pre>
<p>emacs模式
</p>
<pre> Esc
</pre>
<h3>
<span id=".E6.89.93.E5.BC.80URL"></span><span class="mw-headline" id="打开URL">打开URL</span>
</h3>
<p>你需要安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/urlview/">urlview</a></span><sup><small>AUR</small></sup>来打开URL 另外需要配置如下： 
</p>
<p>打开一个新的终端:
</p>
<pre>bind-key u capture-pane \; save-buffer /tmp/tmux-buffer \; run-shell "$TERMINAL -e urlview /tmp/tmux-buffer"
</pre>
<p>或者直接在tmux的一个新窗口 (不需要新终端):
</p>
<pre>bind-key u capture-pane \; save-buffer /tmp/tmux-buffer \; new-window -n "urlview" '$SHELL -c "urlview &lt; /tmp/tmux-buffer"'
</pre>
<h3>
<span id=".E6.AD.A3.E7.A1.AE.E8.AE.BE.E7.BD.AE_term"></span><span class="mw-headline" id="正确设置_term">正确设置 term</span>
</h3>
<p>如果使用的是 256 色的终端，必须在 tmux 的配置文件 <code>tmux.conf</code> 中将终端设置为 <code>tmux</code> 或 <code>tmux-256color</code>:
</p>
<pre> set -g default-terminal "tmux-256color"  
</pre>
<p>或在 <code>.bashrc</code> 中添加:
</p>
<pre># for tmux: export 256color
[ -n "$TMUX" ] &amp;&amp; export TERM=screen-256color
</pre>
<p>如果你在 <code>tmux.conf</code> 启用xterm-keys, 那你需要构建一个新的终端信息来声明新的退出命令，否则程序无法获取退出方式。用 <code>tic</code>  编译下列信息，你可以使用 "xterm-screen-256color" 来作为你的TERM:
</p>
<pre># A screen- based TERMINFO that declares the escape sequences
# enabled by the tmux config "set-window-option -g xterm-keys".
#
# Prefix the name with xterm- since some applications inspect
# the TERM *name* in addition to the terminal capabilities advertised.
xterm-screen-256color|GNU Screen with 256 colors bce and tmux xterm-keys,

# As of Nov'11, the below keys are picked up by
# .../tmux/blob/master/trunk/xterm-keys.c:
	kDC=\E[3;2~, kEND=\E[1;2F, kHOM=\E[1;2H,
	kIC=\E[2;2~, kLFT=\E[1;2D, kNXT=\E[6;2~, kPRV=\E[5;2~,
	kRIT=\E[1;2C,

# Change this to screen-256color if the terminal you run tmux in
# doesn't support bce:
	use=screen-256color-bce,
</pre>
<h3>
<span id=".E5.85.B6.E4.BB.96.E8.AE.BE.E7.BD.AE"></span><span class="mw-headline" id="其他设置">其他设置</span>
</h3>
<p>设置最多回滚的行数
</p>
<pre>set -g history-limit 10000
</pre>
<h3>
<span id=".E7.94.A8systemd.E5.90.8E.E5.8F.B0.E8.87.AA.E5.90.AFtmux"></span><span class="mw-headline" id="用systemd后台自启tmux">用systemd后台自启tmux</span>
</h3>
<p>开机自启tmux有诸多好处，当tmux服务在后台运行时,启动一个tmux会话能减少许多延时。
</p>
<p>此外，即使你没有登录，对tmux会话的任何定制都将保留，tmux会话也将会被持久化。这对于那些有重度tmux配置（启动慢）或者共享tmux会话的人来说特别有用。
</p>
<p>下面这个systemd service配置可作为参考  (启动 <code>tmux@<i>username</i>.service</code>):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/tmux@.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Start tmux in detached session

[Service]
Type=forking
User=%I
ExecStart=/usr/bin/tmux new-session -s %u -d
ExecStop=/usr/bin/tmux kill-session -t %u

[Install]
WantedBy=multi-user.target
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>提示：</strong> 可以通过 <code>WorkingDirectory=<i>custom_path</i></code> 设置工作路径.</div>
<p>把这个文件放在 <a href="../en/Systemd/User.html" title="Systemd/User">systemd/User</a> 目录下,如 <code>~/.config/systemd/user/tmux.service</code>. 这样tmux service 就会在你登录时自动启动.
</p>
<h2>
<span id=".E4.BC.9A.E8.AF.9D.E5.88.9D.E5.A7.8B.E5.8C.96"></span><span class="mw-headline" id="会话初始化">会话初始化</span>
</h2>
<p>可以通过修改配置文件<code>~/.tmux.conf</code>来使得tmux在初始化一个session的时候自动新建窗口, 比如:
</p>
<pre>new  -n WindowName Command
neww -n WindowName Command
neww -n WindowName Command
</pre>
<p>如果想在tmux启动session的时候自动分割窗口, 只需要把相应分割命令加在你想分割的窗口的neww命令之下, 如下:
</p>
<pre>new  -s SessionName -n WindowName Command
neww -n foo/bar foo
# 在这之下添加分割窗口命令
splitw -v -p 50 -t 0 bar
selectw -t 1 
selectp -t 0
</pre>
<p>这将启动两个窗口, 第二个窗口会被命名为foo/bar并且会被垂直对半分割, 其中窗格foo会在窗格bar的上面,光标会在第二个窗口(foo/bar)上面的窗格(foo)
</p>
<p>{{注意|除非你在你得配置文件<code>.conf</code>中特别指定, 否则会话(session), window(窗口),panes(窗格)的序号都是从0开始算起.}
</p>
<p>想要管理多个会话, 需要在你的配置文件中用source命令分别执行相应会话的配置文件
</p>
<pre># initialize sessions
bind F source-file ~/.tmux/foo
bind B source-file ~/.tmux/bar
</pre>
<h2>
<span id=".E6.8F.90.E7.A4.BA.E5.92.8C.E5.B0.8F.E6.8A.80.E5.B7.A7"></span><span class="mw-headline" id="提示和小技巧">提示和小技巧</span>
</h2>
<h3>
<span id=".E5.90.AF.E5.8A.A8.E6.97.B6.E4.BD.BF.E7.94.A8.E9.BB.98.E8.AE.A4.E5.B8.83.E5.B1.80"></span><span class="mw-headline" id="启动时使用默认布局">启动时使用默认布局</span>
</h3>
<p>Session managers like tmuxinator and <a href="../en/Tmuxp.html" title="Tmuxp">tmuxp</a> make it easy to manage common session configurations.
</p>
<p>For tmuxinator, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/tmuxinator/">tmuxinator</a></span><sup><small>AUR</small></sup> from <a href="../en/Arch_User_Repository.html" class="mw-redirect" title="AUR">AUR</a>. Test your installation with
</p>
<pre>tmuxinator doctor
</pre>
<h4>
<span id=".E8.8E.B7.E5.8F.96.E9.BB.98.E8.AE.A4.E5.B8.83.E5.B1.80.E5.8F.82.E6.95.B0"></span><span class="mw-headline" id="获取默认布局参数">获取默认布局参数</span>
</h4>
<p>Start tmux as usual and configure your windows and panes layout as you like. When finished, get the current layout values by executing (while you are still within the current tmux session)
</p>
<pre>tmux list-windows
</pre>
<p>The output may look like this (two windows with 3 panes and 2 panes layout)
</p>
<pre>0: default* (3 panes) [274x83] [layout 20a0,274x83,0,0{137x83,0,0,3,136x83,138,0[136x41,138,0,5,136x41,138,42,6]}] @2 (active)
1: remote- (2 panes) [274x83] [layout e3d3,274x83,0,0[274x41,0,0,4,274x41,0,42,7]] @3                                         
</pre>
<p>The Interesting part you need to copy for later use begins after <b>[layout...</b> and excludes <b>... ] @2 (active)</b>. For the first window layout you need to copy e.g. <b>20a0,274x83,0,0{137x83,0,0,3,136x83,138,0[136x41,138,0,5,136x41,138,42,6]}</b>
</p>
<h4>
<span id=".E5.AE.9A.E4.B9.89.E9.BB.98.E8.AE.A4.E5.B8.83.E5.B1.80"></span><span class="mw-headline" id="定义默认布局">定义默认布局</span>
</h4>
<p>Knowing this, you can exit the current tmux session. Following this, you create your default tmux session layout by editing tmuxinator's config file (Don't copy the example, get your layout values as described above)
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.tmuxinator/default.yml</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">name: default
root: ~/
windows:
  - default:
      layout: 20a0,274x83,0,0{137x83,0,0,3,136x83,138,0[136x41,138,0,5,136x41,138,42,6]}
      panes:
        - clear
        - vim
        - clear &amp;&amp; emacs -nw
  - remote:
      layout: 24ab,274x83,0,0{137x83,0,0,3,136x83,138,0,4}
      panes:
        - 
        - 
</pre>
<p>The example defines two windows named "default" and "remote". With your determined layout values. For each pane you have to use at least one <code>-</code> line. Within the first window panes you start the commandline "clear" in pane one, "vim" in pane two and "clear &amp;&amp; emacs -nw" executes two commands in pane three on each tmux start. The second window layout has two panes without defining any start commmands.
</p>
<p>Test the new default layout with (yes, it is "mux"):
</p>
<pre>mux default
</pre>
<h4>
<span id=".E8.87.AA.E5.8A.A8.E4.BD.BF.E7.94.A8.E9.BB.98.E8.AE.A4.E5.B8.83.E5.B1.80.E5.90.AF.E5.8A.A8tmux"></span><span class="mw-headline" id="自动使用默认布局启动tmux">自动使用默认布局启动tmux</span>
</h4>
<p>如果想在启动终端的时候直接进入tmux, 并且使用默认布局, 可以设置
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.bashrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"> if [ -z "$TMUX" ]; then
   mux default          
 fi                     
</pre>
<h4>
<span id=".E9.BB.98.E8.AE.A4.E4.BC.9A.E8.AF.9D.E7.9A.84.E6.9B.BF.E4.BB.A3.E5.AE.9E.E7.8E.B0.E6.96.B9.E5.BC.8F"></span><span class="mw-headline" id="默认会话的替代实现方式">默认会话的替代实现方式</span>
</h4>
<p>Instead of using the above method, one can just write a bash script that when run, will create the default session and attach to it.
Then you can execute it from a terminal to get the pre-designed configuration in that terminal
</p>
<pre>#!/bin/bash
tmux new-session -d -n WindowName Command
tmux new-window -n NewWindowName
tmux split-window -v
tmux selectp -t 1
tmux split-window -h
tmux selectw -t 1
tmux -2 attach-session -d
</pre>
<h3><span class="mw-headline" id="Start_tmux_in_urxvt">Start tmux in urxvt</span></h3>
<p>Use this command to start urxvt with a started tmux session.  I use this with the exec command from my .ratpoisonrc file.
</p>
<pre>urxvt -e bash -c "tmux -q has-session &amp;&amp; exec tmux attach-session -d || exec tmux new-session -n$USER -s$USER@$HOSTNAME"</pre>
<h3>
<span id=".E5.90.AF.E5.8A.A8shell.E6.97.B6.E8.87.AA.E5.8A.A8.E5.90.AF.E5.8A.A8tmux"></span><span class="mw-headline" id="启动shell时自动启动tmux">启动shell时自动启动tmux</span>
</h3>
<h4><span class="mw-headline" id="Bash">Bash</span></h4>
<p>对bash用户, 只需要将下面命令添加到自己家目录下的.bashrc, 要注意这句命令需要在alias配置之前.对其它shell的配置也是类似的
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.bashrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># If not running interactively, do not do anything
[[ $- != *i* ]] &amp;&amp; return
[[ -z "$TMUX" ]] &amp;&amp; exec tmux
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 这些代码确保tmux不会在tmux中启动(tmux嵌套于tmux中). tmux 通过设置环境变量$TMUX 来设置tmux启动所用的socket, 如果$TMUX不存在,或者长度为0那么就可以知道当前没有运行tmux.</div>
<p>下面的配置会尝试只启动一个会话, 当你登录时, 如果之前启动过会话, 那么它会直接attach, 而不是新开一个. 想要新开一个session要么是因为之前没有会话, 要么是你手动启动一个新的会话.
</p>
<pre># TMUX
if which tmux &gt;/dev/null 2&gt;&amp;1; then
    #if not inside a tmux session, and if no session is started, start a new session
    test -z "$TMUX" &amp;&amp; (tmux attach || tmux new-session)
fi
</pre>
<p>下面的配置实现的功能相似, 但是他会在启动tmux之前先检查一下tmux是否已经安装. 它也会在你登出之前帮你重新连接上未关闭的session, 这样可以让你手动关闭会话并保存相应的工作,避免数据丢失,进程异常中断.  
</p>
<pre># TMUX
if which tmux &gt;/dev/null 2&gt;&amp;1; then
    # if no session is started, start a new session
    test -z ${TMUX} &amp;&amp; tmux

    # when quitting tmux, try to attach
    while test -z ${TMUX}; do
        tmux attach || break
    done
fi
</pre>
<p>另外一种配置, 一样可以实现自动连接已存在的会话,否则会新开一个:
</p>
<pre>if [[ -z "$TMUX" ]] ;then
    ID="`tmux ls | grep -vm1 attached | cut -d: -f1`" # get the id of a deattached session
    if [[ -z "$ID" ]] ;then # if not available create a new one
        tmux new-session
    else
        tmux attach-session -t "$ID" # if available attach to it
    fi
fi
</pre>
<h3>
<span id=".E5.90.AF.E5.8A.A8non-login_shell"></span><span class="mw-headline" id="启动non-login_shell">启动non-login shell</span>
</h3>
<p>Tmux starts a <a rel="nofollow" class="external text" href="https://unix.stackexchange.com/questions/38175">login shell</a> <a rel="nofollow" class="external text" href="http://comments.gmane.org/gmane.comp.terminal-emulators.tmux.user/5997">by default</a>, which may result in multiple negative side effects:
</p>
<ul>
<li>Users of <a href="https://en.wikipedia.org/wiki/fortune_(Unix)" class="extiw" title="wikipedia:fortune (Unix)">fortune</a> may notice that quotes are printed when creating a new panel.</li>
<li>The configuration files for login shells such as <code>~/.profile</code> are interpreted each time a new panel is created, so commands intended to be run on session initialization (e.g. setting audio level) are executed.</li>
</ul>
<p>To disable this behaviour, add to <code>~/.tmux.conf</code>:
</p>
<pre>set -g default-command "${SHELL}"
</pre>
<h3>
<span id=".E5.83.8F.E6.A0.87.E7.AD.BE.E4.B8.80.E6.A0.B7.E4.BD.BF.E7.94.A8.E7.AA.97.E5.8F.A3"></span><span class="mw-headline" id="像标签一样使用窗口">像标签一样使用窗口</span>
</h3>
<p>The following settings added to <code>~/.tmux.conf</code> allow to use tmux windows like tabs, such as those provided by the reference of these hotkeys — <a href="../en/Rxvt-unicode.html#urxvtq_with_tabbing" title="Rxvt-unicode">urxvt's tabbing extensions</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" class="mw-redirect" title="ArchWiki:Requests">断开的链接</a>：无效的部分]</sup>. An advantage thereof is that these virtual “tabs” are independent of the terminal emulator.
</p>
<pre>#urxvt tab like window switching (-n: no prior escape seq)
bind -n S-down new-window
bind -n S-left prev
bind -n S-right next
bind -n C-left swap-window -t -1
bind -n C-right swap-window -t +1
</pre>
<p>Of course, those should not overlap with other applications' hotkeys, such as the terminal's. Given that they substitute terminal tabbing that might as well be deactivated, though.
</p>
<p>It can also come handy to supplement the EOT hotkey <code>Ctrl+d</code> with one for tmux's detach:
</p>
<pre>bind-key -n C-j detach
</pre>
<h3><span class="mw-headline" id="Clients_simultaneously_interacting_with_various_windows_of_a_session">Clients simultaneously interacting with various windows of a session</span></h3>
<p>In <a rel="nofollow" class="external text" href="http://mutelight.org/articles/practical-tmux">Practical Tmux</a>, Brandur Leach writes:
</p>
<dl>
<dd>Screen and tmux's behaviour for when multiple clients are attached to one session differs slightly. In Screen, each client can be connected to the session but view different windows within it, but in tmux, all clients connected to one session must view the same window.</dd>
<dd>This problem can be solved in tmux by spawning two separate sessions and synchronizing the second one to the windows of the first, then pointing a second new session to the first.</dd>
</dl>
<p>The script “<code>tmx</code>” below implements this — the version here is slightly modified to execute “<code>tmux new-window</code>” if “1” is its second parameter. Invoked as <code>tmx &lt;base session name&gt; [1]</code> it launches the base session if necessary. Otherwise a new “client” session linked to the base, optionally add a new window and attach, setting it to kill itself once it turns “zombie”.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">tmx</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/bash

#
# Modified TMUX start script from:
#     http://forums.gentoo.org/viewtopic-t-836006-start-0.html
#
# Store it to `~/bin/tmx` and issue `chmod +x`.
#

# Works because bash automatically trims by assigning to variables and by 
# passing arguments
trim() { echo $1; }

if [[ -z "$1" ]]; then
    echo "Specify session name as the first argument"
    exit
fi

# Only because I often issue `ls` to this script by accident
if [[ "$1" == "ls" ]]; then
    tmux ls
    exit
fi

base_session="$1"
# This actually works without the trim() on all systems except OSX
tmux_nb=$(trim `tmux ls | grep "^$base_session" | wc -l`)
if [[ "$tmux_nb" == "0" ]]; then
    echo "Launching tmux base session $base_session ..."
    tmux new-session -s $base_session
else
    # Make sure we are not already in a tmux session
    if [[ -z "$TMUX" ]]; then
        echo "Launching copy of base session $base_session ..."
        # Session id is date and time to prevent conflict
        session_id=`date +%Y%m%d%H%M%S`
        # Create a new session (without attaching it) and link to base session 
        # to share windows
        tmux new-session -d -t $base_session -s $session_id
        if [[ "$2" == "1" ]]; then
		# Create a new window in that session
		tmux new-window
	fi
        # Attach to the new session &amp; kill it once orphaned
	tmux attach-session -t $session_id \; set-option destroy-unattached
    fi
fi
</pre>
<p>A useful setting for this is
</p>
<pre>setw -g aggressive-resize on
</pre>
<p>added to <code>~/.tmux.conf</code>. It causes tmux to resize a window based on the smallest client actually viewing it, not on the smallest one attached to the entire session.
</p>
<p>An alternative taken from <a rel="nofollow" class="external autonumber" href="http://comments.gmane.org/gmane.comp.terminal-emulators.tmux.user/2632">[1]</a> is to put the following ~/.bashrc:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">.bashrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">function rsc() {
  CLIENTID=$1.`date +%S`
  tmux new-session -d -t $1 -s $CLIENTID \; set-option destroy-unattached \; attach-session -t $CLIENTID
}

function mksc() {
  tmux new-session -d -s $1
  rsc $1
}
</pre>
<p>Citing the author:
</p>
<dl>
<dd>"mksc foo" creates a always detached permanent client named "foo". It also calls "rsc foo" to create a client to newly created session. "rsc foo" creates a new client grouped by "foo" name. It has destroy-unattached turned on so when I leave it, it kills client.</dd>
<dd>Therefore, when my computer looses network connectivity, all "foo.something" clients are killed while "foo" remains. I can then call "rsc foo" to continue work from where I stopped.</dd>
</dl>
<h3>
<span id=".E6.A0.B9.E6.8D.AE.E7.BB.88.E7.AB.AF.E7.B1.BB.E5.9E.8B.E8.87.AA.E5.8A.A8.E6.9B.B4.E6.AD.A3TERM.E7.8E.AF.E5.A2.83.E5.8F.98.E9.87.8F"></span><span class="mw-headline" id="根据终端类型自动更正TERM环境变量">根据终端类型自动更正TERM环境变量</span>
</h3>
<p>Instead of <a href="#Setting_the_correct_term">setting a fixed TERM variable in tmux</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" class="mw-redirect" title="ArchWiki:Requests">断开的链接</a>：无效的部分]</sup>, it is possible to set the proper TERM (either <code>screen</code> or <code>screen-256color</code>) according to the type of your terminal emulator:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.tmux.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">## set the default TERM
set -g default-terminal screen

## update the TERM variable of terminal emulator when creating a new session or attaching a existing session
set -g update-environment 'DISPLAY SSH_ASKPASS SSH_AGENT_PID SSH_CONNECTION WINDOWID XAUTHORITY TERM'
## determine if we should enable 256-colour support
if "[[ ${TERM} =~ 256color || ${TERM} == fbterm ]]" 'set -g default-terminal screen-256color'
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">## workaround for handling TERM variable in multiple tmux sessions properly from <a rel="nofollow" class="external free" href="http://sourceforge.net/p/tmux/mailman/message/32751663/">http://sourceforge.net/p/tmux/mailman/message/32751663/</a><sup title="最后检查状态：404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-06 ⓘ]</sup> by Nicholas Marriott
if [[ -n ${TMUX} &amp;&amp; -n ${commands[tmux]} ]];then
        case $(tmux showenv TERM 2&gt;/dev/null) in
                *256color) ;&amp;
                TERM=fbterm)
                        TERM=screen-256color ;;
                *)
                        TERM=screen
        esac
fi</pre>
<h3>
<span id=".E4.B8.8D.E7.94.A8.E9.87.8D.E5.90.AFtmux.E5.B0.B1.E8.83.BD.E5.8A.A0.E8.BD.BD.E6.96.B0.E7.9A.84.E9.85.8D.E7.BD.AE"></span><span class="mw-headline" id="不用重启tmux就能加载新的配置">不用重启tmux就能加载新的配置</span>
</h3>
<p>如果对tmux的配置文件<code>~/.tmux.conf</code>做了修改, 默认情况下tmux是不会自动重新加载的, 除非关闭所有正在运行的tmux会话. 如果不想关闭会话而手动加载tmux的配置文件, 可以在命令行下输入:
</p>
<pre>tmux source-file &lt;path&gt;
</pre>
<p>也可以在配置文件 <code>~/.tmux.conf</code> 中加入下面配置(这样下次输入 ctrl+b r就可以加载新的配置文件了):
</p>
<pre>bind r source-file &lt;path&gt;
</pre>
<p>还有一种做法是输入前缀+冒号(ctrl+b :),然后输入如下命令:
</p>
<pre>source .tmux.conf
</pre>
<h3>
<span id=".E6.A0.B7.E4.BE.8B.E4.BB.A3.E7.A0.81:attach.E5.B7.B2.E5.90.AF.E5.8A.A8.E7.9A.84.E4.BC.9A.E8.AF.9D.E8.80.8C.E4.B8.8D.E6.98.AF.E6.96.B0.E5.BC.80.E4.B8.80.E4.B8.AA"></span><span class="mw-headline" id="样例代码:attach已启动的会话而不是新开一个">样例代码:attach已启动的会话而不是新开一个</span>
</h3>
<p>This script checks for a program presumed to have been started by a previous run of itself. Unless found it creates a new tmux session and attaches to a window named after and running the program. If however the program was found it merely attaches to the session and selects the window.
</p>
<pre>#!/bin/bash

PID=$(pidof $1)

if [ -z "$PID" ]; then
    tmux new-session -d -s main ;
    tmux new-window -t main -n $1 "$*" ;
fi
    tmux attach-session -d -t main ;
    tmux select-window -t $1 ;
exit 0
</pre>
<p>A derived version to run <i>irssi</i> with the <i>nicklist</i> plugin can be found on <a href="../en/Irssi.html#Irssi_with_nicklist_in_tmux" title="Irssi">its ArchWiki page</a>.
</p>
<h3>
<span id=".E6.A0.87.E9.A2.98.E6.A0.8F.E8.87.AA.E5.8A.A8.E6.9B.B4.E6.94.B9"></span><span class="mw-headline" id="标题栏自动更改">标题栏自动更改</span>
</h3>
<p>If you SSH into a host in a tmux window, you'll notice the window title of your terminal emulator remains to be <code>user@localhost</code> rather than <code>user@server</code>. To allow the title bar to adapt to whatever host you connect to, set the following in <code>~/.tmux.conf</code>
</p>
<pre>set -g set-titles on
set -g set-titles-string "#T"
</pre>
<p>For <code>set-titles-string</code>, <code>#T</code> will display <code>user@host:~</code> and change accordingly as you connect to different hosts.
</p>
<h3>
<span id=".E8.87.AA.E5.8A.A8.E5.B8.83.E5.B1.80"></span><span class="mw-headline" id="自动布局">自动布局</span>
</h3>
<p>When creating new splits or destroying older ones the currently selected layout isn't applied. To fix that, add following binds which will apply the currently selected layout to new or remaining panes:
</p>
<pre>bind-key -n M-c kill-pane \; select-layout
bind-key -n M-n split-window \; select-layout
</pre>
<h3>
<span id=".E4.BD.BF.E7.94.A8.E7.B1.BB.E4.BC.BCVim.E7.9A.84.E5.BF.AB.E6.8D.B7.E9.94.AE.E8.AE.BE.E7.BD.AE"></span><span class="mw-headline" id="使用类似Vim的快捷键设置">使用类似Vim的快捷键设置</span>
</h3>
<p>See <a rel="nofollow" class="external autonumber" href="https://gist.github.com/anonymous/6bebae3eb9f7b972e6f0">[2]</a> for a configuration friendly to <a href="../en/Vim.html" title="Vim">vim</a> users.
</p>
<p>With tmux 2.4 change:
</p>
<pre>bind -t vi-copy 'v' begin-selection
bind -t vi-copy 'y' copy-selection
bind -t vi-copy 'Space' halfpage-down
bind -t vi-copy 'Bspace' halfpage-up
</pre>
<p>to:
</p>
<pre>bind-key -T copy-mode-vi 'v' send -X begin-selection
bind-key -T copy-mode-vi 'y' send -X copy-selection
bind-key -T copy-mode-vi 'Space' send -X halfpage-down
bind-key -T copy-mode-vi 'Bspace' send -X halfpage-up
</pre>
<h2>
<span id=".E5.B8.B8.E8.A7.81.E9.97.AE.E9.A2.98.E4.B8.8E.E8.A7.A3.E7.AD.94"></span><span class="mw-headline" id="常见问题与解答">常见问题与解答</span>
</h2>
<h3>
<span id=".E6.BB.9A.E5.8A.A8.E9.97.AE.E9.A2.98"></span><span class="mw-headline" id="滚动问题">滚动问题</span>
</h3>
<p>如果你在终端中使用Shift-PageUp/Shift-PageDown 翻页有问题,把下面加到配置文件中试试:
</p>
<pre>set -g terminal-overrides 'xterm*:smcup@:rmcup@'
</pre>
<h3>
<span id="Shift.2BF6_not_working_in_Midnight_Commander"></span><span class="mw-headline" id="Shift+F6_not_working_in_Midnight_Commander">Shift+F6 not working in Midnight Commander</span>
</h3>
<p>If the <code>Shift+F6</code> key combination is not working with either <code>TERM=screen</code> or <code>TERM=screen-256color</code>, then from inside tmux, run this command:
</p>
<pre>infocmp &gt; screen (or screen-256color)
</pre>
<p>Open the file in a text editor, and add the following to the bottom of that file:
</p>
<pre>kf16=\E[29~,
</pre>
<p>Then compile the file with <code>tic</code>. The keys should be working now.
</p>
<h2><span class="mw-headline" id="ICCCM_Selection_Integration">ICCCM Selection Integration</span></h2>
<p>It is possible to copy a tmux paste buffer to an ICCCM selection, and vice-versa, by defining a shell command which interfaces tmux with an X11 selection interface. The following tmux config file snippet effectively integrates <code>CLIPBOARD</code> with the current tmux paste buffer using xclip:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.tmux.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
##CLIPBOARD selection integration
##Requires prefix key before the command key
#Copy tmux paste buffer to CLIPBOARD
bind C-c run "tmux save-buffer - | xclip -i -selection clipboard"
#Copy CLIPBOARD to tmux paste buffer and paste tmux paste buffer
bind C-v run "tmux set-buffer -- \"$(xclip -o -selection clipboard)\"; tmux paste-buffer"
</pre>
<p>As alternative you can use <code>xsel</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.tmux.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
##CLIPBOARD selection integration
##Requires prefix key before the command key
#Copy tmux paste buffer to CLIPBOARD
bind C-c run "tmux show-buffer | xsel -i -b"
#Copy CLIPBOARD to tmux paste buffer and paste tmux paste buffer
bind C-v run "tmux set-buffer -- \"$(xsel -o -b)\"; tmux paste-buffer"
</pre>
<p>It seems <code>xclip</code> does not close <code>STDOUT</code> after it has read from <code>tmux</code>'s buffer.  As such, <code>tmux</code> doesn't know that the copy task has completed, and continues to /await <code>xclip</code>'s termination, thereby rendering the window manager unresponsive. To work around this, you can execute the command via <code>run-shell -b</code> instead of <code>run</code>, you can redirect <code>STDOUT</code> of <code>xclip</code> to <code>/dev/null</code>, or you can use an alternative command like <code>xsel</code>.
</p>
<h3><span class="mw-headline" id="Urxvt_MiddleClick_Solution">Urxvt MiddleClick Solution</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> To use this, you need to enable mouse support</div>
<p>There is an unofficial perl extension (mentioned in the official <a rel="nofollow" class="external text" href="http://sourceforge.net/p/tmux/tmux-code/ci/master/tree/FAQ">FAQ</a><sup title="最后检查状态：404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-06 ⓘ]</sup>) to enable copying/pasting in and out of urxvt with tmux via Middle Mouse Clicking.
</p>
<p>First, you will need to download the perl script and place it into urxvts perl lib:
</p>
<pre>wget <a rel="nofollow" class="external free" href="http://anti.teamidiot.de/static/nei/*/Code/urxvt/osc-xterm-clipboard">http://anti.teamidiot.de/static/nei/*/Code/urxvt/osc-xterm-clipboard</a>
mv osc-xterm-clipboard /usr/lib/urxvt/perl/</pre>
<p>You will also need to enable that perl script in your .Xdefaults:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.Xdefaults</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
*URxvt.perl-ext-common:		osc-xterm-clipboard
...
</pre>
<p>Next, you want to tell tmux about the new function and enable mouse support (if you haven't already). The third option is optional, to enable scrolling and selecting inside panes with your mouse:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.tmux.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
set-option -ga terminal-override ',rxvt-uni*:XT:Ms=\E]52;%p1%s;%p2%s\007'
set-window-option -g mode-mouse on
set-option -g mouse-select-pane on
...
</pre>
<p>That's it. Be sure to end all instances of tmux before trying the new MiddleClick functionality.
</p>
<p>While in tmux, Shift+MiddleMouseClick will paste the clipboard selection while just MiddleMouseClick will paste your tmux buffer.
Outside of tmux, just use MiddleMouseClick to paste your tmux buffer and your standard Ctrl-c to copy.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The current tmux version 1.8-1 has a bug where it sometimes might not be possible to paste tmux buffer between different panes of tmux. This behaviour is fixed in the git-version (2013.10.15) </div>
<h2>
<span id=".E5.A4.96.E9.83.A8.E9.93.BE.E6.8E.A5"></span><span class="mw-headline" id="外部链接">外部链接</span>
</h2>
<ul>
<li>
<a rel="nofollow" class="external text" href="http://mutelight.org/articles/practical-tmux">Practical Tmux</a> by Brandur Leach, providing a number of configuration tips</li>
<li>
<a rel="nofollow" class="external text" href="http://www.openbsd.org/faq/faq7.html#tmux">Tmux tutorial</a> section from the OpenBSD FAQ</li>
<li><a rel="nofollow" class="external text" href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmux">OpenBSD Reference Manual for tmux</a></li>
<li>
<a rel="nofollow" class="external text" href="http://www.dayid.org/os/notes/tm.html">Screen and tmux feature comparison</a> page by Dayid Alan</li>
<li>
<a rel="nofollow" class="external text" href="http://blog.hawkhost.com/2010/06/28/tmux-the-terminal-multiplexer/">Tmux tutorial Part 1</a> &amp; <a rel="nofollow" class="external text" href="http://blog.hawkhost.com/2010/07/02/tmux-%E2%80%93-the-terminal-multiplexer-part-2">Part 2</a> blog posts on Hawk Host</li>
<li>
<a rel="nofollow" class="external text" href="https://github.com/kooothor/.dotfiles/blob/master/tmux.conf">tmux.conf</a><sup title="最后检查状态：404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-06 ⓘ]</sup> example with CPU bar and shortcut to search man pages and display them vertically</li>
<li>
<a rel="nofollow" class="external text" href="https://github.com/Lokaltog/powerline">powerline</a> provides a powerful, dynamic statusbar configuration for tmux</li>
</ul>
<p><b>Forum threads</b>
</p>
<ul><li>2009-11-06 - Arch Linux - <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=84157&amp;p=1">Anyone loving Tmux in place of Screen? Info/Tips etc. URLs I've found</a>
</li></ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../zh-CN/Category:Terminal_multiplexers.html" title="Category:Terminal multiplexers (简体中文)">Terminal multiplexers (简体中文)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../zh-CN/Category:Pages_or_sections_flagged_with_Template:Translateme.html" title="Category:Pages or sections flagged with Template:Translateme (简体中文)">Pages or sections flagged with Template:Translateme (简体中文)</a></li>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
<li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li>
<li><a href="../en/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Tmux_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;oldid=638670">https://wiki.archlinux.org/index.php?title=Tmux_(简体中文)&amp;oldid=638670</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 14 October 2020, at 07:19.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
