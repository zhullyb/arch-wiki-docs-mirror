<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Bash (简体中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Bash_简体中文 rootpage-Bash_简体中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Bash (简体中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../zh-CN/f7bdd569c79dc10d4b322fbffc46bb33.html" title="Bash (简体中文)/Functions (简体中文)">Bash (简体中文)/Functions (简体中文)</a></li>
<li><a href="../zh-CN/d0406127f5741a98b01b764014acc63b.html" title="Bash (简体中文)/Prompt customization (简体中文)">Bash (简体中文)/Prompt customization (简体中文)</a></li>
<li><a href="../zh-CN/Environment_variables.html" title="Environment variables (简体中文)">Environment variables (简体中文)</a></li>
<li><a href="../zh-CN/Readline.html" title="Readline (简体中文)">Readline (简体中文)</a></li>
<li><a href="../en/Fortune.html" title="Fortune">Fortune</a></li>
<li><a href="../zh-CN/Pkgfile.html" title="Pkgfile (简体中文)">Pkgfile (简体中文)</a></li>
<li><a href="../en/Command-line_shell.html" title="Command-line shell">Command-line shell</a></li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>翻译状态：</strong>本文是 <a href="../en/Bash.html" title="Bash">Bash</a> 的<a href="../zh-CN/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (简体中文)">翻译</a>。上次翻译日期：2020-07-21。如果英文版本有所<a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Bash&amp;diff=0&amp;oldid=626072">更改</a>，则您可以帮助同步翻译。</div>
<p><a rel="nofollow" class="external text" href="https://www.gnu.org/software/bash/">Bash</a> (Bourne-again Shell) 是一个来自 <a href="../zh-CN/GNU.html" title="GNU (简体中文)">GNU</a>的<a href="../en/Command-line_shell.html" title="Command-line shell">命令行解释器</a>/编程语言。它的名字是向它的前身——很早以前的 Bourne shell 致敬。Bash可以运行在大部分类 UNIX 操作系统中，包括 GNU/Linux。
</p>
<p>Bash是Arch Linux的默认命令行解释器。
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#%E8%B0%83%E7%94%A8"><span class="tocnumber">1</span> <span class="toctext">调用</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="tocnumber">1.1</span> <span class="toctext">配置文件</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Shell_%E4%B8%8E%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="tocnumber">1.2</span> <span class="toctext">Shell 与环境变量</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4">
<a href="#%E5%91%BD%E4%BB%A4%E8%A1%8C"><span class="tocnumber">2</span> <span class="toctext">命令行</span></a>
<ul>
<li class="toclevel-2 tocsection-5">
<a href="#Tab_%E9%94%AE%E8%A1%A5%E5%85%A8"><span class="tocnumber">2.1</span> <span class="toctext">Tab 键补全</span></a>
<ul>
<li class="toclevel-3 tocsection-6"><a href="#Tab_%E6%8C%89%E4%B8%8B%E7%9A%84%E6%AC%A1%E6%95%B0"><span class="tocnumber">2.1.1</span> <span class="toctext">Tab 按下的次数</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E9%80%89%E9%A1%B9%E8%A1%A5%E5%85%A8"><span class="tocnumber">2.1.2</span> <span class="toctext">常用命令的选项补全</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%91%BD%E4%BB%A4%E8%A1%A5%E5%85%A8"><span class="tocnumber">2.1.3</span> <span class="toctext">自定义命令补全</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-9">
<a href="#%E5%8E%86%E5%8F%B2"><span class="tocnumber">2.2</span> <span class="toctext">历史</span></a>
<ul>
<li class="toclevel-3 tocsection-10"><a href="#%E5%8E%86%E5%8F%B2%E8%A1%A5%E5%85%A8"><span class="tocnumber">2.2.1</span> <span class="toctext">历史补全</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#%E6%9B%B4%E8%BF%91%E7%9A%84%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95"><span class="tocnumber">2.2.2</span> <span class="toctext">更近的历史记录</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="#%E7%A6%81%E7%94%A8%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95"><span class="tocnumber">2.2.3</span> <span class="toctext">禁用历史记录</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-13"><a href="#%E6%A8%A1%E4%BB%BF_Zsh_%E7%9A%84%E5%B8%AE%E5%8A%A9%E5%8A%9F%E8%83%BD"><span class="tocnumber">2.3</span> <span class="toctext">模仿 Zsh 的帮助功能</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-14"><a href="#%E5%88%AB%E5%90%8D"><span class="tocnumber">3</span> <span class="toctext">别名</span></a></li>
<li class="toclevel-1 tocsection-15">
<a href="#%E6%8F%90%E7%A4%BA%E4%B8%8E%E6%8A%80%E5%B7%A7"><span class="tocnumber">4</span> <span class="toctext">提示与技巧</span></a>
<ul>
<li class="toclevel-2 tocsection-16"><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8F%90%E7%A4%BA%E7%AC%A6"><span class="tocnumber">4.1</span> <span class="toctext">自定义提示符</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#%E6%89%BE%E4%B8%8D%E5%88%B0%E5%91%BD%E4%BB%A4"><span class="tocnumber">4.2</span> <span class="toctext">找不到命令</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#%E5%9C%A8%E7%BB%88%E7%AB%AF%E5%86%85%E7%A6%81%E7%94%A8Ctrl+Z"><span class="tocnumber">4.3</span> <span class="toctext">在终端内禁用Ctrl+Z</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#%E7%99%BB%E5%87%BA%E5%90%8E%E6%B8%85%E7%A9%BA%E5%B1%8F%E5%B9%95"><span class="tocnumber">4.4</span> <span class="toctext">登出后清空屏幕</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#%E8%BE%93%E5%85%A5%E8%B7%AF%E5%BE%84%E8%87%AA%E5%8A%A8%E6%B7%BB%E5%8A%A0%22cd%22"><span class="tocnumber">4.5</span> <span class="toctext">输入路径自动添加"cd"</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#%E8%87%AA%E5%8A%A8%E8%B7%B3%E8%BD%AC"><span class="tocnumber">4.6</span> <span class="toctext">自动跳转</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#%E9%98%B2%E6%AD%A2%E8%A6%86%E7%9B%96%E6%96%87%E4%BB%B6"><span class="tocnumber">4.7</span> <span class="toctext">防止覆盖文件</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-23">
<a href="#%E9%94%99%E8%AF%AF%E6%8E%92%E9%99%A4"><span class="tocnumber">5</span> <span class="toctext">错误排除</span></a>
<ul>
<li class="toclevel-2 tocsection-24"><a href="#%E4%BF%AE%E6%AD%A3%E7%AA%97%E5%8F%A3%E5%A4%A7%E5%B0%8F%E8%B0%83%E6%95%B4%E6%97%B6%E7%9A%84%E6%8D%A2%E8%A1%8C"><span class="tocnumber">5.1</span> <span class="toctext">修正窗口大小调整时的换行</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="#%E8%AE%BE%E7%BD%AE_ignoreeof_%E5%90%8E_shell_%E4%BB%8D%E7%84%B6%E9%80%80%E5%87%BA"><span class="tocnumber">5.2</span> <span class="toctext">设置 ignoreeof 后 shell 仍然退出</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-26">
<a href="#%E6%9B%B4%E5%A4%9A%E4%BF%A1%E6%81%AF_%EF%BC%88%E8%8B%B1%E8%AF%AD%EF%BC%89"><span class="tocnumber">6</span> <span class="toctext">更多信息 （英语）</span></a>
<ul>
<li class="toclevel-2 tocsection-27"><a href="#%E6%95%99%E7%A8%8B"><span class="tocnumber">6.1</span> <span class="toctext">教程</span></a></li>
<li class="toclevel-2 tocsection-28"><a href="#%E7%A4%BE%E5%8C%BA"><span class="tocnumber">6.2</span> <span class="toctext">社区</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="#%E4%BE%8B%E5%AD%90"><span class="tocnumber">6.3</span> <span class="toctext">例子</span></a></li>
</ul>
</li>
</ul>
</div>

<h2>
<span id=".E8.B0.83.E7.94.A8"></span><span class="mw-headline" id="调用">调用</span>
</h2>
<p>Bash 的运行方式会取决于 Bash 被调用的方式。下面是一些不同模式的描述。
</p>
<p>如果 Bash 以TTY中的<code>login</code>、<a href="../zh-CN/Secure_Shell.html" class="mw-redirect" title="SSH (简体中文)">SSH</a> 守护进程、或者其它类似的方式派生出来，我们称之为登录 (login) shell。你可以使用命令行选项 <code>-l</code> 或 <code>--login</code> 来使用这种模式。
</p>
<p>如果 Bash 的标准输入和标准错误输出都连接到终端(比如说，一个终端模拟器)，并且在启动的时候既没有使用 <code>-c</code> 选项和<a rel="nofollow" class="external text" href="https://unix.stackexchange.com/a/96805">非选项参数</a>(比如说，<code>bash <b>script</b></code>)，我们称之为交互 (interactive) shell。所有的交互式 shell 都会执行<code>/etc/bash.bashrc</code> 和 <code>~/.bashrc</code> 文件中的配置，而登录shell还会执行<code>/etc/profile</code> 和 <code>~/.bash_profile</code> 中的配置。
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 在 Arch Linux 中 <code>/bin/sh</code> (过去是 Bourne shell 的执行文件名) 是 <code>/bin/bash</code> 的符号链接。如果 Bash 通过 <code>sh</code> 方式调用，它会尽量模拟历史上 <code>sh</code> 的启动行为，包括 POSIX 兼容能力。</div>
<p>通过在Bash启动时使用 <code>--posix</code> 命令行参数或者在启动后执行 ‘<code>set -o posix</code>’ 来使Bash在增强的POSIX标准下运行。
</p>
<h3>
<span id=".E9.85.8D.E7.BD.AE.E6.96.87.E4.BB.B6"></span><span class="mw-headline" id="配置文件">配置文件</span>
</h3>
<p>关于更详尽的描述，您可以参考<code>/usr/share/doc/bash/bashref.html</code> (<a rel="nofollow" class="external text" href="https://www.gnu.org/software/bash/manual/bash.html#Bash-Startup-Files">在线链接</a>) 文件的第 6.2 节 "Bash Startup Files" 和<a href="https://mywiki.wooledge.org/DotFiles" class="extiw" title="gregswiki:DotFiles">GregsWiki:DotFiles</a>。
</p>
<table class="wikitable">
<tbody>
<tr>
<th>文件
</th>
<th>描述
</th>
<th>登录 shell
<p><sup>(见下)</sup>
</p>
</th>
<th>交互 shell
<p><sup>非登录</sup>
</p>
</th>
</tr>
<tr>
<td>
<code>/etc/profile</code>
</td>
<td>
<a href="../zh-CN/Help:Reading.html#Source" title="Help:Reading (简体中文)">加载</a>全部储存在 <code>/etc/profile.d/*.sh</code> 和 <code>/etc/bash.bashrc</code> 中的配置。
</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">是
</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">否
</td>
</tr>
<tr>
<td>
<code>~/.bash_profile</code>
</td>
<td>针对每个用户，紧接 <code>/etc/profile</code> 执行。如果这个文件不存在，会顺序检查 <code>~/.bash_login</code> 和 <code>~/.profile</code> 文件。框架文件 <code>/etc/skel/.bash_profile</code> 同时会引用 <code>~/.bashrc</code>。
</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">是
</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">否
</td>
</tr>
<tr>
<td>
<code>~/.bash_logout</code>
</td>
<td>针对每个用户，退出登录 shell 后。
</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">是
</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">否
</td>
</tr>
<tr>
<td>
<code>/etc/bash.bash_logout</code>
</td>
<td>取决于 <code>-DSYS_BASH_LOGOUT="/etc/bash.bash_logout"</code> 编译标记。退出登录 shell 后。
</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">是
</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">否
</td>
</tr>
<tr>
<td>
<code>/etc/bash.bashrc</code>
</td>
<td>取决于编译标志 <code>-DSYS_BASHRC="/etc/bash.bashrc"</code>。加载 <code>/usr/share/bash-completion/bash_completion</code> 配置。
</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">否
</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">是
</td>
</tr>
<tr>
<td>
<code>~/.bashrc</code>
</td>
<td>针对每个用户，在 <code>/etc/bash.bashrc</code> 后加载。
</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">否
</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">是
</td>
</tr>
</tbody>
</table>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 
<ul>
<li>如果以  <code>--login</code> 调用，登录 shell 可能不是交互式的。</li>
<li>如果可以交互，<i>非登录</i> shell <b>不会</b> 加载 <code>~/.bash_profile</code>。它会继承调用他们的父进程（可能是一个登录 shell）的环境参数。更多信息，请参考<a href="https://mywiki.wooledge.org/ProcessManagement#On_processes.2C_environments_and_inheritance" class="extiw" title="gregswiki:ProcessManagement">GregsWiki:ProcessManagement#On processes, environments and inheritance</a>。</li>
</ul>
</div>
<h3>
<span id="Shell_.E4.B8.8E.E7.8E.AF.E5.A2.83.E5.8F.98.E9.87.8F"></span><span class="mw-headline" id="Shell_与环境变量">Shell 与环境变量</span>
</h3>
<p>Bash的行为和通过它启动的程序会被许多环境变量影响。<a href="../zh-CN/Environment_variables.html" title="Environment variables (简体中文)">环境变量</a>用于储存有用的值，比如命令搜索路径，或者默认浏览器。当一个新的 shell 或者脚本被启动时，这个 shell 会继承它的父进程的环境变量，从而这个 shell 会带有内部 shell 变量<a rel="nofollow" class="external autonumber" href="http://www.kingcomputerservices.com/unix_101/understanding_unix_shells_and_environment_variables.htm">[1]</a>。
</p>
<p>这些内部 shell 变量可以以此导出以变成环境变量：
</p>
<pre>VARIABLE=content
export VARIABLE
</pre>
<p>或者
</p>
<pre>export VARIABLE=content
</pre>
<p>环境变量依照惯例放置在<code>~/.profile</code>或者<code>/etc/profile</code>中，这样其他兼容 Bourne shell 的 shell 也可以使用。
</p>
<p>关于更详尽的内容，您可以参考<a href="../zh-CN/Environment_variables.html" title="Environment variables (简体中文)">Environment variables (简体中文)</a>。
</p>
<h2>
<span id=".E5.91.BD.E4.BB.A4.E8.A1.8C"></span><span class="mw-headline" id="命令行">命令行</span>
</h2>
<p>Bash 的命令行由一个叫做 <a href="../zh-CN/Readline.html" title="Readline (简体中文)">Readline</a> 的分离库来管理。Readline 提供了<a href="../zh-CN/Emacs.html" title="Emacs (简体中文)">emacs</a> 和 <a href="../zh-CN/Vi.html" title="Vi (简体中文)">vi</a> 风格的快捷键用于操作命令行，比如说，以单词为基准前后移动、删除等。管理输入<a href="../zh-CN/Readline.html#%E5%8E%86%E5%8F%B2" title="Readline (简体中文)">历史</a>也是 Readline 的职责。它还允许你创造<a href="../zh-CN/Readline.html#Macros" title="Readline (简体中文)">宏</a>。
</p>
<h3>
<span id="Tab_.E9.94.AE.E8.A1.A5.E5.85.A8"></span><span class="mw-headline" id="Tab_键补全">Tab 键补全</span>
</h3>
<p><a href="https://en.wikipedia.org/wiki/Command-line_completion" class="extiw" title="wikipedia:Command-line completion">Tab 键补全</a>，提供在按下 <code>tab</code> 键后自动补全命令的功能（这个功能默认启用）。
</p>
<h4>
<span id="Tab_.E6.8C.89.E4.B8.8B.E7.9A.84.E6.AC.A1.E6.95.B0"></span><span class="mw-headline" id="Tab_按下的次数">Tab 按下的次数</span>
</h4>
<p>可能最多需要按三次 tab 才能显示所有的补全选项。如果希望减少这个数值，请参考 <a href="../en/Readline.html#Faster_completion" title="Readline">更快的补全操作</a>。
</p>
<h4>
<span id=".E5.B8.B8.E7.94.A8.E5.91.BD.E4.BB.A4.E7.9A.84.E9.80.89.E9.A1.B9.E8.A1.A5.E5.85.A8"></span><span class="mw-headline" id="常用命令的选项补全">常用命令的选项补全</span>
</h4>
<p>通常来讲，Bash 中按下 tab 只会补全命令、文件名和变量。安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bash-completion">bash-completion</a></span> 包，并加载 <code>/usr/share/bash-completion/bash_completion</code> 文件中的配置，可以提供更多针对常见命令的选项的 tab 补全。安装这个包后，常规的补全（比如说 <code>$ ls file.*&lt;tab&gt;&lt;tab&gt;</code>）可能会表现得不同。但是，您可以通过{ic|$ compopt -o bashdefault <i>program</i>}}命令来重新启用。(更多细节，请参考 <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=128471">[2]</a> and <a rel="nofollow" class="external autonumber" href="https://www.gnu.org/software/bash/manual/html_node/Programmable-Completion-Builtins.html">[3]</a>。)
</p>
<h4>
<span id=".E8.87.AA.E5.AE.9A.E4.B9.89.E5.91.BD.E4.BB.A4.E8.A1.A5.E5.85.A8"></span><span class="mw-headline" id="自定义命令补全">自定义命令补全</span>
</h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 使用 <code>complete</code> 功能可能与 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bash-completion">bash-completion</a></span> 冲突。</div>
<p>通常来讲，Bash 中按下 tab 只会补全命令后的文件名。通过<code>complete -c</code>命令，Bash 可以规定某些命令后的补全形式为命令，比如：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.bashrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">complete -c man which
</pre>
<p>或通过<code>-cf</code>命令，规定补全形式为命令和文件，比如：
</p>
<pre>complete -cf sudo</pre>
<p>更多补全形式，请参考Bash的手册页。
</p>
<h3>
<span id=".E5.8E.86.E5.8F.B2"></span><span class="mw-headline" id="历史">历史</span>
</h3>
<h4>
<span id=".E5.8E.86.E5.8F.B2.E8.A1.A5.E5.85.A8"></span><span class="mw-headline" id="历史补全">历史补全</span>
</h4>
<p>您可以绑定上下键来在 Bash 的历史中查找（请参考 <a href="../zh-CN/Readline.html#%E5%8E%86%E5%8F%B2" title="Readline (简体中文)">Readline (简体中文)#历史</a> and <a rel="nofollow" class="external text" href="https://www.gnu.org/software/bash/manual/html_node/Readline-Init-File-Syntax.html">Readline 启动文件语法</a>)：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.bashrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"> bind '"\e[A": history-search-backward'
 bind '"\e[B": history-search-forward'
</pre>
<p>或者所有 Readline 程序：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.inputrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">"\e[A": history-search-backward
"\e[B": history-search-forward
</pre>
<h4>
<span id=".E6.9B.B4.E8.BF.91.E7.9A.84.E5.8E.86.E5.8F.B2.E8.AE.B0.E5.BD.95"></span><span class="mw-headline" id="更近的历史记录">更近的历史记录</span>
</h4>
<p><code>HISTCONTROL</code>变量可以避免历史记录记录特定的命令，比如不记录重复的命令
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.bashrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">export HISTCONTROL=ignoredups</pre>
<p>将其设置为 <code>erasedups</code> 可以让 Bash 的历史记录对一条命令只保留一个历史记录（与顺序无关）。更多选项，请参考Bash的手册页。
</p>
<h4>
<span id=".E7.A6.81.E7.94.A8.E5.8E.86.E5.8F.B2.E8.AE.B0.E5.BD.95"></span><span class="mw-headline" id="禁用历史记录">禁用历史记录</span>
</h4>
<p>临时禁用历史记录：
</p>
<pre>set +o history
</pre>
<p>现在输入的命令将不会存入<code>$HISTFILE</code>。
</p>
<p>比如说，你现在可以执行 <code>printf secret | sha256sum</code> 来生成密码文件的散列值，或是隐藏您使用GPG的历史，如执行<code>gpg -eaF secret-pubkey.asc</code>命令。这些秘密不会被写入磁盘。
</p>
<p>开启历史记录：
</p>
<pre>set -o history
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>提示：</strong> 如果 <code>HISTCONTROL</code> 变量包含了 <code>ignorespace</code>，以空格开头的命令将不会记入历史。这样可以更加方便地控制历史记录。更多细节，请参考<span class="plainlinks archwiki-template-man" title="$ man 1 bash"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/bash.1#Shell_Variables">bash(1) § Shell Variables</a></span>。</div>
<p>禁用所有的 Bash 历史：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.bashrc or /etc/profile</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">export HISTSIZE=0
</pre>
<p>为了保险（这会永远清除所有的历史记录）：
</p>
<pre># warning. this will destroy your old histfile forever
wipe -i -l2 -x4 -p4 "$HISTFILE"
ln -sv /dev/null "$HISTFILE"
</pre>
<h3>
<span id=".E6.A8.A1.E4.BB.BF_Zsh_.E7.9A.84.E5.B8.AE.E5.8A.A9.E5.8A.9F.E8.83.BD"></span><span class="mw-headline" id="模仿_Zsh_的帮助功能">模仿 Zsh 的帮助功能</span>
</h3>
<p><a href="../zh-CN/Zsh.html" title="Zsh (简体中文)">Zsh</a> 可以在光标指向命令的时候按 <code>Alt+h</code> 来调用这个命令的手册。
相同的行为可以通过这个 <a href="../zh-CN/Readline.html" title="Readline (简体中文)">Readline (简体中文)</a> 绑定在 Bash 中开启：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.bashrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">run-help() { help "$READLINE_LINE" 2&gt;/dev/null || man "$READLINE_LINE"; }
bind -m vi-insert -x '"\eh": run-help'
bind -m emacs -x     '"\eh": run-help'
</pre>
<p>这个操作假设你使用（默认的）Emacs <a href="../en/Readline.html#Editing_mode" title="Readline">编辑模式</a>。
</p>
<h2>
<span id=".E5.88.AB.E5.90.8D"></span><span class="mw-headline" id="别名">别名</span>
</h2>
<p><a href="https://en.wikipedia.org/wiki/alias" class="extiw" title="wikipedia:alias">别名</a>（alias）是可以让您用另一个字符串来替换一个字符串的命令。这个命令常常被用来缩短系统命令，或者用来将默认参数加入到常用命令中。
</p>
<p>推荐将针对用户的别名保存在<code>~/.bashrc</code>, 而将系统级的别名(这些会影响所有用户)存放在<code>/etc/bash.bashrc</code>。别名的示例，请参考 <a rel="nofollow" class="external autonumber" href="https://gist.github.com/anonymous/a9055e30f97bd19645c2">[4]</a>。
</p>
<p>关于函数，请参考 <a href="../zh-CN/f7bdd569c79dc10d4b322fbffc46bb33.html" title="Bash (简体中文)/Functions (简体中文)">函数</a>。
</p>
<h2>
<span id=".E6.8F.90.E7.A4.BA.E4.B8.8E.E6.8A.80.E5.B7.A7"></span><span class="mw-headline" id="提示与技巧">提示与技巧</span>
</h2>
<h3>
<span id=".E8.87.AA.E5.AE.9A.E4.B9.89.E6.8F.90.E7.A4.BA.E7.AC.A6"></span><span class="mw-headline" id="自定义提示符">自定义提示符</span>
</h3>
<p>参见 <a href="../zh-CN/d0406127f5741a98b01b764014acc63b.html" title="Bash (简体中文)/Prompt customization (简体中文)">自定义提示符</a>。
</p>
<h3>
<span id=".E6.89.BE.E4.B8.8D.E5.88.B0.E5.91.BD.E4.BB.A4"></span><span class="mw-headline" id="找不到命令">找不到命令</span>
</h3>
<p><a href="../zh-CN/Pkgfile.html" title="Pkgfile (简体中文)">pkgfile</a> 提供了一个"找不到命令"的钩子，可以在输入未知命令后自动查找官方的软件包。
</p>
<p>你需要<a href="../zh-CN/Help:Reading.html#Source" title="Help:Reading (简体中文)">加载</a>这个钩子来启用它，如下：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.bashrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">source /usr/share/doc/pkgfile/command-not-found.bash</pre>
<p>现在，运行一个不可用的命令将会显示如下信息：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ abiword</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">abiword may be found in the following packages:
  extra/abiword 3.0.1-2	/usr/bin/abiword
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 需要先更新 pkgfile 的数据库才能运作。更多细节，请参考<a href="../zh-CN/Pkgfile.html#%E5%AE%89%E8%A3%85" title="Pkgfile (简体中文)">pkgfile (简体中文)#安装</a>。</div>
<p>另一个"找不到命令"的钩子由 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/command-not-found/">command-not-found</a></span><sup><small>AUR</small></sup> 包提供，它看起来像这个样子：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ abiword</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">The command 'abiword' is provided by the following packages:
<b>abiword</b> (2.8.6-7) from extra
	[ abiword ]
<b>abiword</b> (2.8.6-7) from staging
	[ abiword ]
<b>abiword</b> (2.8.6-7) from testing
	[ abiword ]
</pre>
<h3>
<span id=".E5.9C.A8.E7.BB.88.E7.AB.AF.E5.86.85.E7.A6.81.E7.94.A8Ctrl.2BZ"></span><span class="mw-headline" id="在终端内禁用Ctrl+Z">在终端内禁用Ctrl+Z</span>
</h3>
<p>你可以相这样包装你的命令，来关闭 <code>Ctrl+Z</code> 功能（暂停/关闭程序）。通过在这个脚本中包装命令
</p>
<pre>#!/bin/bash
trap "" 20
<i>adom</i>
</pre>
<p>这时如果你在玩 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/adom/">adom</a></span><sup><small>AUR</small></sup> 要按 <code>Shift+Z</code> 组合键时不小心按下了 <code>Ctrl+Z</code> 组合键，你的游戏就不会停止运行了，因为我们已经禁用了<code>Ctrl+Z</code>。
</p>
<h3>
<span id=".E7.99.BB.E5.87.BA.E5.90.8E.E6.B8.85.E7.A9.BA.E5.B1.8F.E5.B9.95"></span><span class="mw-headline" id="登出后清空屏幕">登出后清空屏幕</span>
</h3>
<p>当登出虚拟终端时，清空屏幕：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.bash_logout</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">clear
reset
</pre>
<h3>
<span id=".E8.BE.93.E5.85.A5.E8.B7.AF.E5.BE.84.E8.87.AA.E5.8A.A8.E6.B7.BB.E5.8A.A0.22cd.22"></span><span class="mw-headline" id='输入路径自动添加"cd"'>输入路径自动添加"cd"</span>
</h3>
<p>Bash 可以自动在输入的一个路径前添加 <code>cd </code>。比如说：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ /etc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">bash: /etc: Is a directory
</pre>
<p>但是如果在 <code>.bashrc</code> 文件里添加一行:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.bashrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
shopt -s autocd
...
</pre>
<p>你会得到：
</p>
<pre>[user@host ~]$ /etc
cd /etc
[user@host etc]$
</pre>
<h3>
<span id=".E8.87.AA.E5.8A.A8.E8.B7.B3.E8.BD.AC"></span><span class="mw-headline" id="自动跳转">自动跳转</span>
</h3>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/autojump-git/">autojump-git</a></span><sup><small>AUR</small></sup> 允许在用户访问最多的路径中搜索文件系统。
</p>
<p>安装完后，<a href="../zh-CN/Help:Reading.html#Source" title="Help:Reading (简体中文)">加载</a> <code>/etc/profile.d/autojump.bash</code> 来启动这项功能。
</p>
<h3>
<span id=".E9.98.B2.E6.AD.A2.E8.A6.86.E7.9B.96.E6.96.87.E4.BB.B6"></span><span class="mw-headline" id="防止覆盖文件">防止覆盖文件</span>
</h3>
<p>在当前的会话中，防止 shell 输出重定向覆盖一个已有的文件：
</p>
<pre>$ set -o noclobber
</pre>
<p>这和<code>set -C</code>命令是一样的。
</p>
<p>如果想让该用户一直生效：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.bashrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
set -o noclobber</pre>
<p>在设定 <code>noclobber</code> 的情况下强制覆盖文件：
</p>
<pre>$ echo "output" &gt;| file.txt
</pre>
<h2>
<span id=".E9.94.99.E8.AF.AF.E6.8E.92.E9.99.A4"></span><span class="mw-headline" id="错误排除">错误排除</span>
</h2>
<h3>
<span id=".E4.BF.AE.E6.AD.A3.E7.AA.97.E5.8F.A3.E5.A4.A7.E5.B0.8F.E8.B0.83.E6.95.B4.E6.97.B6.E7.9A.84.E6.8D.A2.E8.A1.8C"></span><span class="mw-headline" id="修正窗口大小调整时的换行">修正窗口大小调整时的换行</span>
</h3>
<p>如果您调整了<a href="../zh-CN/8314ab1a17f32a288211cd6cba3d4eb8.html#%E7%BB%88%E7%AB%AF%E6%A8%A1%E6%8B%9F%E5%99%A8" title="List of applications (简体中文)/Utilities (简体中文)">终端模拟器</a>的大小，Bash 可能并没有得到大小重调的信号，你键入的文本就不会正确的换行，并且与已输入内容重叠。启用 <code>checkwinsize</code> 选项可以在每一个命令后检查窗口的大小，并按需更新 <code>LINES</code> 和 <code>COLUMNS</code> 的值来调整。
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.bashrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">shopt -s checkwinsize
</pre>
<h3>
<span id=".E8.AE.BE.E7.BD.AE_ignoreeof_.E5.90.8E_shell_.E4.BB.8D.E7.84.B6.E9.80.80.E5.87.BA"></span><span class="mw-headline" id="设置_ignoreeof_后_shell_仍然退出">设置 ignoreeof 后 shell 仍然退出</span>
</h3>
<p>如果您设置了 <code>ignoreeof</code> 选项，但是如果重复按下 <code>ctrl-D</code> shell 仍然会退出。因为这个选项只允许忽略 10 次连续的EOF记号（即 <code>Ctrl+D</code>）。
</p>
<p>如果需要将这个次数调的更高，需要使用 IGNOREEOF 变量。
</p>
<p>比如：
</p>
<pre>export IGNOREEOF=100
</pre>
<h2>
<span id=".E6.9B.B4.E5.A4.9A.E4.BF.A1.E6.81.AF_.EF.BC.88.E8.8B.B1.E8.AF.AD.EF.BC.89"></span><span class="mw-headline" id="更多信息_（英语）">更多信息 （英语）</span>
</h2>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Bash_(Unix_shell)" class="extiw" title="wikipedia:Bash (Unix shell)">Wikipedia:Bash (Unix shell)</a></li>
<li>
<a rel="nofollow" class="external text" href="https://www.gnu.org/software/bash/manual/bashref.html">Bash 参考手册</a>，或是 <code>/usr/share/doc/bash/bashref.html</code>
</li>
<li><a rel="nofollow" class="external text" href="https://www.gnu.org/software/bash/manual/html_node/Readline-Init-File-Syntax.html">Readline 启动文件语法</a></li>
<li>
<a rel="nofollow" class="external text" href="http://www.aosabook.org/en/bash.html">The Bourne-Again Shell</a> - <i>开源软件架构</i> 第三章</li>
<li>
<a rel="nofollow" class="external text" href="http://shellcheck.net">Shellcheck</a> - Bash 脚本常见错误检查指南 (基于 <a rel="nofollow" class="external text" href="https://github.com/koalaman/shellcheck">shellcheck</a>)</li>
<li>
<a rel="nofollow" class="external text" href="http://bashrcgenerator.com/">PS1 生成器</a> - 生成你的 .bashrc/PS1 脚本，这样就可以在命令行中使用鼠标拖拽了。</li>
<li><a rel="nofollow" class="external text" href="https://serverfault.com/questions/3743/what-useful-things-can-one-add-to-ones-bashrc">有用的 .bashrc 命令</a></li>
</ul>
<h3>
<span id=".E6.95.99.E7.A8.8B"></span><span class="mw-headline" id="教程">教程</span>
</h3>
<ul>
<li><a href="https://mywiki.wooledge.org/" class="extiw" title="gregswiki:">Greg's Wiki</a></li>
<li><a href="https://mywiki.wooledge.org/BashGuide" class="extiw" title="gregswiki:BashGuide">GregsWiki:BashGuide</a></li>
<li><a href="https://mywiki.wooledge.org/BashFAQ" class="extiw" title="gregswiki:BashFAQ">GregsWiki:BashFAQ</a></li>
<li>
<a rel="nofollow" class="external text" href="http://wiki.bash-hackers.org/doku.php">Bash Hackers Wiki</a><sup title="最后检查状态：SSL error">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-12-20 ⓘ]</sup>
</li>
<li>
<a rel="nofollow" class="external text" href="http://wiki.bash-hackers.org/scripting/tutoriallist">Bash Hackers Wiki: List of Bash online tutorials</a><sup title="最后检查状态：SSL error">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-12-20 ⓘ]</sup>
</li>
<li><a rel="nofollow" class="external text" href="http://www.grymoire.com/Unix/Quote.html">Quote Tutorial</a></li>
</ul>
<h3>
<span id=".E7.A4.BE.E5.8C.BA"></span><span class="mw-headline" id="社区">社区</span>
</h3>
<ul><li><a rel="nofollow" class="external text" href="ircs://chat.freenode.net/bash">一个 Bash 的活跃友好的IRC频道</a></li></ul>
<h3>
<span id=".E4.BE.8B.E5.AD.90"></span><span class="mw-headline" id="例子">例子</span>
</h3>
<ul><li><a rel="nofollow" class="external text" href="https://tldp.org/HOWTO/Xterm-Title-4.html">怎样修改 xterm 的标题</a></li></ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../zh-CN/Category:Command-line_shells.html" title="Category:Command-line shells (简体中文)">Command-line shells (简体中文)</a></li>
<li><a href="../zh-CN/Category:GNU.html" title="Category:GNU (简体中文)">GNU (简体中文)</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Bash_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;oldid=647476">https://wiki.archlinux.org/index.php?title=Bash_(简体中文)&amp;oldid=647476</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 28 December 2020, at 11:47.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
