<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Redshift (简体中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Redshift_简体中文 rootpage-Redshift_简体中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Redshift (简体中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>翻译状态：</strong>本文是 <a href="../en/Redshift.html" title="Redshift">Redshift</a> 的<a href="../zh-CN/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (简体中文)">翻译</a>。上次翻译日期：2019-6-12。如果英文版本有所<a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Redshift&amp;diff=0&amp;oldid=575179">更改</a>，则您可以帮助同步翻译。</div>
<p>来自 <a rel="nofollow" class="external text" href="http://jonls.dk/redshift/">Redshift project web page</a>:
</p>
<dl><dd>
<a href="https://en.wikipedia.org/wiki/Redshift_(software)" class="extiw" title="wikipedia:Redshift (software)">Redshift</a> 会根据你的周围环境调节屏幕色温，如果你晚上在屏幕前工作，这可能帮助你减少对眼睛的伤害。 这个程序启发于 <a rel="nofollow" class="external text" href="http://justgetflux.com">f.lux</a>。</dd></dl>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> Redshift 不支持 <a href="../en/Wayland.html" title="Wayland">Wayland</a> 因为它无法调节色温 <a rel="nofollow" class="external autonumber" href="https://github.com/jonls/redshift/issues/55">[1]</a>。查看 <a href="../en/Wayland.html#Gamma" title="Wayland">Wayland#Gamma</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" class="mw-redirect" title="ArchWiki:Requests">断开的链接</a>：无效的部分]</sup> 了解更多。</div>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#%E5%AE%89%E8%A3%85"><span class="tocnumber">1</span> <span class="toctext">安装</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#%E5%89%8D%E7%AB%AF"><span class="tocnumber">1.1</span> <span class="toctext">前端</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-3">
<a href="#%E4%BD%BF%E7%94%A8"><span class="tocnumber">2</span> <span class="toctext">使用</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B"><span class="tocnumber">2.1</span> <span class="toctext">快速开始</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#%E8%87%AA%E5%8A%A8%E5%90%AF%E5%8A%A8"><span class="tocnumber">2.2</span> <span class="toctext">自动启动</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6">
<a href="#%E9%85%8D%E7%BD%AE"><span class="tocnumber">3</span> <span class="toctext">配置</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#Automatic_location_based_on_GeoClue2"><span class="tocnumber">3.1</span> <span class="toctext">Automatic location based on GeoClue2</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Automatic_location_based_on_GPS"><span class="tocnumber">3.2</span> <span class="toctext">Automatic location based on GPS</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Use_real_screen_brightness"><span class="tocnumber">3.3</span> <span class="toctext">Use real screen brightness</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10">
<a href="#%E7%96%91%E9%9A%BE%E8%A7%A3%E7%AD%94"><span class="tocnumber">4</span> <span class="toctext">疑难解答</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#Screen_1_could_not_be_found"><span class="tocnumber">4.1</span> <span class="toctext">Screen 1 could not be found</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#%E7%82%B9%E5%87%BB%E6%89%98%E7%9B%98%E5%9B%BE%E8%A1%A8%E4%B8%8D%E5%B7%A5%E4%BD%9C"><span class="tocnumber">4.2</span> <span class="toctext">点击托盘图表不工作</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Redshift_%E8%AE%A9%E5%B1%8F%E5%B9%95%E5%9C%A8%E8%AE%BE%E7%BD%AE%E7%9A%84%E8%89%B2%E6%B8%A9%E5%80%BC%E5%92%8C%E9%BB%98%E8%AE%A4%E7%9A%84%E8%89%B2%E6%B8%A9%E5%80%BC%E4%B9%8B%E9%97%B4%E5%BF%AB%E9%80%9F%E9%97%AA%E7%83%81"><span class="tocnumber">4.3</span> <span class="toctext">Redshift 让屏幕在设置的色温值和默认的色温值之间快速闪烁</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Redshift_%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E5%90%AF%E5%8A%A8%E6%97%B6%E5%8F%AF%E4%BB%A5%E5%B7%A5%E4%BD%9C_%E4%BD%86%E6%98%AF%E4%BB%A5_systemd_service_%E5%90%AF%E5%8A%A8%E5%A4%B1%E8%B4%A5"><span class="tocnumber">4.4</span> <span class="toctext">Redshift 使用命令启动时可以工作 但是以 systemd service 启动失败</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Redshift_temporarily_resets_using_some_wine_apps_that_reset_gamma_values"><span class="tocnumber">4.5</span> <span class="toctext">Redshift temporarily resets using some wine apps that reset gamma values</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Redshift_GDBus.Error:org.freedesktop.DBus.Error.AccessDenied_on_start"><span class="tocnumber">4.6</span> <span class="toctext">Redshift GDBus.Error:org.freedesktop.DBus.Error.AccessDenied on start</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-17"><a href="#%E5%8F%82%E8%A7%81"><span class="tocnumber">5</span> <span class="toctext">参见</span></a></li>
</ul>
</div>

<h2>
<span id=".E5.AE.89.E8.A3.85"></span><span class="mw-headline" id="安装">安装</span>
</h2>
<p>安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=redshift">redshift</a></span> 包。或者安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/redshift-minimal/">redshift-minimal</a></span><sup><small>AUR</small></sup> 包（最小依赖版本）。
</p>
<h3>
<span id=".E5.89.8D.E7.AB.AF"></span><span class="mw-headline" id="前端">前端</span>
</h3>
<p><i>redshift-gtk</i> 命令 来自 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=redshift">redshift</a></span> 包 提供托盘图标用于控制 Redshift。 请参阅可选的依赖。
</p>
<p>另外，也可以使用这些前端 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/redshiftgui-bin/">redshiftgui-bin</a></span><sup><small>AUR</small></sup> (GTK) 和 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/redshift-qt/">redshift-qt</a></span><sup><small>AUR</small></sup>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/redshiftconf/">redshiftconf</a></span><sup><small>AUR</small></sup> 或者 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=plasma5-applets-redshift-control">plasma5-applets-redshift-control</a></span><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">断开的链接</a>：package not found]</sup> 和 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/plasma5-applets-redshift-control-git/">plasma5-applets-redshift-control-git</a></span><sup><small>AUR</small></sup> (Qt)。
</p>
<h2>
<span id=".E4.BD.BF.E7.94.A8"></span><span class="mw-headline" id="使用">使用</span>
</h2>
<p>Redshift 需要你的位置才能开始运行 (除非使用 <code>-O</code> 选项)，即需要你所在位置的经纬度。Redshift 使用一些程序获得你的位置。如果这些程序不工作 (比如这些程序都没有安装), 你需要手动输入你的位置。
</p>
<h3>
<span id=".E5.BF.AB.E9.80.9F.E5.BC.80.E5.A7.8B"></span><span class="mw-headline" id="快速开始">快速开始</span>
</h3>
<p>以基本的设置启动：
</p>
<pre>$ redshift -l <i>LATITUDE</i>:<i>LONGITUDE</i>
</pre>
<p><i>LATITUDE</i> 为所在位置的维度 ， <i>LONGITUDE</i> 为所在位置的经度。 
</p>
<p>立即更改屏幕色温：
</p>
<pre>$ redshift -P -O <i>TEMPERATURE</i>
</pre>
<p><i>TEMPERATURE</i> 为期望的色温值 (介于 <code>1000</code> 和 <code>25000</code> 之间)。
</p>
<h3>
<span id=".E8.87.AA.E5.8A.A8.E5.90.AF.E5.8A.A8"></span><span class="mw-headline" id="自动启动">自动启动</span>
</h3>
<p>有几个选项可以自动启动Redshif：
</p>
<ul>
<li>鼠标右键点击托盘图标选择 <i>Autostart</i> 当 <i>redshift-gtk</i> 或者 <i>plasma5-applets-redshift-control</i> 已经启动的时候。</li>
<li>放置 Redshift <a href="../en/Desktop_entries.html" class="mw-redirect" title="Desktop entry">Desktop entry</a> 在 <code>~/.config/autostart/</code> 或通过添加 <code>redshift</code> 到你的窗口管理器或者桌面环境的 <a href="../en/Autostarting.html" title="Autostarting">Autostarting</a> 方法中。</li>
<li>使用 <a href="../en/Systemd/User.html" title="Systemd/User">Systemd/User</a>。 软件提供了两个 srvices: <code>redshift.service</code> 和 <code>redshift-gtk.service</code>。激活哪一个服务取决于你是否想要显示系统托盘图表。</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>The Redshift service files contain <code>Restart=always</code> so they will restart infinitely. See <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.service"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.service.5">systemd.service(5)</a></span>.</li>
<li>When using a systemd user service, <a href="../en/Xorg.html" title="Xorg">Xorg</a> must be started before execution of the service, which is not the case without a <a href="../en/Display_manager.html" title="Display manager">Display manager</a>. Otherwise you will get <code>RANDR Query Version' returned error -1</code> and <code>Initialization of randr failed</code>.</li>
</ul>
</div>
<h2>
<span id=".E9.85.8D.E7.BD.AE"></span><span class="mw-headline" id="配置">配置</span>
</h2>
<p>Redshift 会读取配置文件 <code>~/.config/redshift/redshift.conf</code> <a rel="nofollow" class="external autonumber" href="https://github.com/jonls/redshift/releases/tag/v1.12">[2]</a> （如果该文件存在的话）。 然而，Redshift 不会自动创建这个文件, 因此你可能需要手动创建它。配置文件示例：<a rel="nofollow" class="external text" href="https://raw.githubusercontent.com/jonls/redshift/master/redshift.conf.sample">redshift.conf.sample</a>。
</p>
<h3><span class="mw-headline" id="Automatic_location_based_on_GeoClue2">Automatic location based on GeoClue2</span></h3>
<p>In order to allow access Redshift to use GeoClue2, add the following lines to <code>/etc/geoclue/geoclue.conf</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/geoclue/geoclue.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[redshift]
allowed=true
system=false
users=</pre>
<p><a href="../en/Systemd.html#Using_units" class="mw-redirect" title="Restart">Restart</a> <code>redshift.service</code> and/or any other Redshift instance to apply the changes.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>This workaround is not needed with Geoclue2 version 2.5.0 and above.</li>
<li>If using <a href="../en/GNOME.html" title="GNOME">GNOME</a>, also toggle Location Services to "On" in <i>Settings &gt; Privacy</i>.</li>
<li>Due possible bugs with geoclue2 and Redshift <a rel="nofollow" class="external autonumber" href="https://github.com/jonls/redshift/issues/318">[3]</a>, it may be required to use the <code>manual</code> location-provider instead, e.g. for Paris:</li>
</ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/redshift/redshift.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[redshift]
...
; Set the location-provider: 'geoclue2', 'manual'
; type 'redshift -l list' to see possible values.
; The location provider settings are in a different section.
location-provider=manual

...

; Keep in mind that longitudes west of Greenwich (e.g. the Americas)
; are negative numbers.
[manual]
lat=48.853
lon=2.349</pre>
<ul><li>If using <a href="../en/I3.html" class="mw-redirect" title="I3wm">i3wm</a> or similar, you will also need to enable the geoclue agent on startup. As well as <code>systemctl --user enable redshift-gtk</code> or <code>redshift</code> user service.</li></ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.i3/config</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
exec --no-startup-id /usr/lib/geoclue-2.0/demos/agent
...</pre>
</div>
<h3><span class="mw-headline" id="Automatic_location_based_on_GPS">Automatic location based on GPS</span></h3>
<p>You can also use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gpsd">gpsd</a></span> to automatically determine your <a href="../en/GPS.html" title="GPS">GPS</a> location and use it as an input for Redshift. Create the following script and pass <code>$lat</code> and <code>$lon</code> to <code>redshift -l $lat;$lon</code>:
</p>
<pre>#!/bin/bash
date
#gpsdata=$( gpspipe -w -n 10 |   grep -m 1 lon )
gpsdata=$( gpspipe -w | grep -m 1 TPV )
lat=$( echo "$gpsdata"  | jsawk 'return this.lat' )
lon=$( echo "$gpsdata"  | jsawk 'return this.lon' )
alt=$( echo "$gpsdata"  | jsawk 'return this.alt' )
dt=$( echo "$gpsdata" | jsawk 'return this.time' )
echo "$dt"
echo "You are here: $lat, $lon at $alt"
</pre>
<p>For more information, see <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1389735#p1389735">this</a> forums thread.
</p>
<h3><span class="mw-headline" id="Use_real_screen_brightness">Use real screen brightness</span></h3>
<p>Redshift has a brightness adjustment setting, but it does not work the way most people might expect. In fact it is a fake brightness adjustment obtained by manipulating the gamma ramps, which means that it does not reduce the backlight of the screen. <a rel="nofollow" class="external autonumber" href="http://jonls.dk/redshift/#known-bugs-and-limitations">[4]</a>
</p>
<p>Changing screen backlight is possible with redshift hooks and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xorg-xrandr">xorg-xrandr</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xorg-xbacklight">xorg-xbacklight</a></span> but, please see <a href="../en/Backlight.html#xbacklight" title="Backlight">Backlight#xbacklight</a> as there are some limitations and you may have to find another method of controlling the backlight depending on your hardware.
</p>
<p>You need to create a file in <code>~/.config/redshift/hooks</code> and make it executable. You can use and edit the following example:
</p>
<pre>$ mkdir -p ~/.config/redshift/hooks
</pre>
<p>Create and adjust the following script:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/redshift/hooks/brightness.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

# Set brightness via xbrightness when redshift status changes

# Set brightness values for each status.
# Range from 1 to 100 is valid
brightness_day=100
brightness_transition=50
brightness_night=10
# Set fade time for changes to one minute
fade_time=60000

if [ "$1" = period-changed ]; then
	case $3 in
		night)
			xbacklight -set $brightness_night -time $fade_time
			;;
		transition)
			xbacklight -set $brightness_transition -time $fade_time
			;;
		daytime)
			xbacklight -set $brightness_day -time $fade_time
			;;
	esac
fi</pre>
<p>Make it <a href="../en/Help:Reading.html#Make_executable" class="mw-redirect" title="Executable">executable</a>:
</p>
<pre>$ chmod +x ~/.config/redshift/hooks/brightness.sh
</pre>
<p><a href="../en/Systemd.html#Using_units" class="mw-redirect" title="Restart">Restart</a> the <code>redshift.service</code> to apply changes.
</p>
<p>Check the service status as it should <b>not</b> contain the following message:
</p>
<pre>redshift[..]: No outputs have backlight property
</pre>
<h2>
<span id=".E7.96.91.E9.9A.BE.E8.A7.A3.E7.AD.94"></span><span class="mw-headline" id="疑难解答">疑难解答</span>
</h2>
<h3><span class="mw-headline" id="Screen_1_could_not_be_found">Screen 1 could not be found</span></h3>
<p>修改配置文件 "redshift.conf" 将 "screen 1" 改为 "screen 0"。
</p>
<h3>
<span id=".E7.82.B9.E5.87.BB.E6.89.98.E7.9B.98.E5.9B.BE.E8.A1.A8.E4.B8.8D.E5.B7.A5.E4.BD.9C"></span><span class="mw-headline" id="点击托盘图表不工作">点击托盘图表不工作</span>
</h3>
<p>安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libappindicator-gtk3">libappindicator-gtk3</a></span>。 请看 <a rel="nofollow" class="external text" href="https://github.com/jonls/redshift/issues/363">redshift issue 363</a> and <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/49971">FS#49971</a>.
</p>
<h3>
<span id="Redshift_.E8.AE.A9.E5.B1.8F.E5.B9.95.E5.9C.A8.E8.AE.BE.E7.BD.AE.E7.9A.84.E8.89.B2.E6.B8.A9.E5.80.BC.E5.92.8C.E9.BB.98.E8.AE.A4.E7.9A.84.E8.89.B2.E6.B8.A9.E5.80.BC.E4.B9.8B.E9.97.B4.E5.BF.AB.E9.80.9F.E9.97.AA.E7.83.81"></span><span class="mw-headline" id="Redshift_让屏幕在设置的色温值和默认的色温值之间快速闪烁">Redshift 让屏幕在设置的色温值和默认的色温值之间快速闪烁</span>
</h3>
<p>确认没有多个Redshift实例在同时运行。
</p>
<h3>
<span id="Redshift_.E4.BD.BF.E7.94.A8.E5.91.BD.E4.BB.A4.E5.90.AF.E5.8A.A8.E6.97.B6.E5.8F.AF.E4.BB.A5.E5.B7.A5.E4.BD.9C_.E4.BD.86.E6.98.AF.E4.BB.A5_systemd_service_.E5.90.AF.E5.8A.A8.E5.A4.B1.E8.B4.A5"></span><span class="mw-headline" id="Redshift_使用命令启动时可以工作_但是以_systemd_service_启动失败">Redshift 使用命令启动时可以工作 但是以 systemd service 启动失败</span>
</h3>
<p><a href="../en/Systemd.html" title="Systemd">systemd</a> unit 有一行在 <code>redshift.service</code> 文件中，要求必须在<code>display-manager.service</code> unit 被一个显示管理器 <a href="../en/Display_manager.html" title="Display manager">display manager</a> 启动后才能启动。 如果你不使用显示管理器, 编辑 <code>redshift.service</code> 用户服务文件删除 <code>After=display-manager.service</code> 行. 运行 <code>systemctl --user daemon-reload</code> 后服务应该会正确初始化。
</p>
<h3><span class="mw-headline" id="Redshift_temporarily_resets_using_some_wine_apps_that_reset_gamma_values">Redshift temporarily resets using some wine apps that reset gamma values</span></h3>
<p>If you notice that using some wine apps, redshift seems to reset temporarily upon launch, or adjusting settings, or etc, then there is a useful registry key that seems to alleviate this. See <a rel="nofollow" class="external autonumber" href="https://www.winehq.org/pipermail/wine-bugs/2015-January/403770.html">[5]</a> and <a rel="nofollow" class="external autonumber" href="https://wiki.winehq.org/UsefulRegistryKeys">[6]</a>. Set or create the string value
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">HKEY_CURRENT_USER\Software\Wine\X11 Driver</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">UseXVidMode="N"</pre>
<p>using the registry editor, or import/set it otherwise.
</p>
<h3><span class="mw-headline" id="Redshift_GDBus.Error:org.freedesktop.DBus.Error.AccessDenied_on_start">Redshift GDBus.Error:org.freedesktop.DBus.Error.AccessDenied on start</span></h3>
<p>If running <code>$ redshift</code> and you are getting:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ redshift</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Trying location provider `geoclue2'...
Using provider `geoclue2'.
Unable to start GeoClue client: GDBus.Error:org.freedesktop.DBus.Error.AccessDenied: 'redshift' disallowed, no agent for UID 1000.
Unable to connect to GeoClue.
Unable to get location from provider.
</pre>
<p>or running <code>$ redshift-gtk</code> and getting the similar error:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ redshift-gtk</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Failed to run Redshift
Trying location provider `geoclue2'...
Unable to start GeoClue client:
GDBus.Error:org.freedesktop.DBus.Error.AccessDenied:
'redshift' disallowed, no agent for UID 1000.
Unable to connect to GeoClue.
Unable to get location from provider.
</pre>
<p>You can create a <a href="../en/Systemd.html" title="Systemd">systemd</a> unit file in <code>~/.config/systemd/user/geoclue-agent.service</code> with the following config:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/systemd/user/geoclue-agent.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=redshift needs to get a (geo)clue

[Service]
ExecStart=/usr/lib/geoclue-2.0/demos/agent

[Install]
WantedBy=default.target</pre>
<p>Start and enable the service with systemctl: <code>$ systemctl --user enable --now geoclue-agent.service</code> and try running redshift again.
</p>
<p>If you still get the same error, it may be because of geoclue being locked down to a few programs by default. Try adding the following lines to <code>/etc/geoclue/geoclue.conf</code> (see <a rel="nofollow" class="external text" href="https://github.com/jonls/redshift/issues/158#issuecomment-71329118">redshift issue 158</a> and <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/40360">FS#40360</a>) and run <code>$ redshift</code> again:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/geoclue/geoclue.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[redshift]
allowed=true
system=false
users=</pre>
<h2>
<span id=".E5.8F.82.E8.A7.81"></span><span class="mw-headline" id="参见">参见</span>
</h2>
<ul>
<li><a rel="nofollow" class="external text" href="http://jonls.dk/redshift">Redshift website</a></li>
<li><a rel="nofollow" class="external text" href="https://github.com/jonls/redshift">Redshift on github</a></li>
<li><a href="https://en.wikipedia.org/wiki/Redshift_(software)" class="extiw" title="wikipedia:Redshift (software)">Wikipedia:Redshift (software)</a></li>
<li>Similar software: <a rel="nofollow" class="external autonumber" href="https://github.com/jumper149/blugon">[7]</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/blugon/">blugon</a></span><sup><small>AUR</small></sup>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xflux-gui-git/">xflux-gui-git</a></span><sup><small>AUR</small></sup>
</li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../zh-CN/Category:X_server.html" title="Category:X server (简体中文)">X server (简体中文)</a></li>
<li><a href="../zh-CN/Category:Eye_candy.html" title="Category:Eye candy (简体中文)">Eye candy (简体中文)</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li>
<li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Redshift_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;oldid=629458">https://wiki.archlinux.org/index.php?title=Redshift_(简体中文)&amp;oldid=629458</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 4 August 2020, at 15:47.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
