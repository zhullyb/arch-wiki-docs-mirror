<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Xdg-menu (简体中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Xdg-menu_简体中文 rootpage-Xdg-menu_简体中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Xdg-menu (简体中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>翻译状态：</strong>本文是 <a href="../en/Xdg-menu.html" title="Xdg-menu">Xdg-menu</a> 的<a href="../zh-CN/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (简体中文)">翻译</a>。上次翻译日期：2020-04-10。如果英文版本有所<a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Xdg-menu&amp;diff=0&amp;oldid=604755">更改</a>，则您可以帮助同步翻译。</div>
<p>xdg-menu是一个为以下窗口管理器生成<a rel="nofollow" class="external text" href="https://specifications.freedesktop.org/menu-spec/menu-spec-latest.html">xdg桌面菜单</a>的工具：
</p>
<ul>
<li><a href="../en/Awesome.html" title="Awesome">awesome</a></li>
<li><a href="../en/Blackbox.html" title="Blackbox">Blackbox</a></li>
<li><a href="../en/Fluxbox.html" title="Fluxbox">Fluxbox</a></li>
<li><a href="../en/FVWM.html" class="mw-redirect" title="FVWM2">FVWM2</a></li>
<li><a href="../en/IceWM.html" title="IceWM">IceWM</a></li>
<li><a href="../en/ArchWiki:Archive.html" class="mw-redirect" title="Ion3">ion3</a></li>
<li><a href="../en/Openbox.html" title="Openbox">Openbox</a></li>
<li><a href="../en/Twm.html" title="Twm">twm</a></li>
<li><a href="../en/Window_Maker.html" title="Window Maker">Window Maker</a></li>
</ul>
<p>KDE, Gnome, Xfce, Enlightenment已经与XDG兼容。
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#%E5%AE%89%E8%A3%85"><span class="tocnumber">1</span> <span class="toctext">安装</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#%E8%8F%9C%E5%8D%95%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84"><span class="tocnumber">2</span> <span class="toctext">菜单层次结构</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#%E9%85%8D%E7%BD%AE"><span class="tocnumber">3</span> <span class="toctext">配置</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#%E4%BB%8E%E5%85%B6%E4%BB%96%E7%9B%AE%E5%BD%95%E6%B7%BB%E5%8A%A0%E6%A1%8C%E9%9D%A2%E6%9D%A1%E7%9B%AE"><span class="tocnumber">3.1</span> <span class="toctext">从其他目录添加桌面条目</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5">
<a href="#%E4%BD%BF%E7%94%A8"><span class="tocnumber">4</span> <span class="toctext">使用</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#xdg_menu"><span class="tocnumber">4.1</span> <span class="toctext">xdg_menu</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#update-menus"><span class="tocnumber">4.2</span> <span class="toctext">update-menus</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8">
<a href="#%E7%A4%BA%E4%BE%8B"><span class="tocnumber">5</span> <span class="toctext">示例</span></a>
<ul>
<li class="toclevel-2 tocsection-9">
<a href="#Awesome"><span class="tocnumber">5.1</span> <span class="toctext">Awesome</span></a>
<ul>
<li class="toclevel-3 tocsection-10"><a href="#%E4%BD%BF%E7%94%A8_xdg_menu"><span class="tocnumber">5.1.1</span> <span class="toctext">使用 xdg_menu</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-11">
<a href="#IceWM"><span class="tocnumber">5.2</span> <span class="toctext">IceWM</span></a>
<ul>
<li class="toclevel-3 tocsection-12"><a href="#%E4%BD%BF%E7%94%A8_xdg_menu_2"><span class="tocnumber">5.2.1</span> <span class="toctext">使用 xdg_menu</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#%E4%BD%BF%E7%94%A8_update-menus"><span class="tocnumber">5.2.2</span> <span class="toctext">使用 update-menus</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-14">
<a href="#Ion3"><span class="tocnumber">5.3</span> <span class="toctext">Ion3</span></a>
<ul>
<li class="toclevel-3 tocsection-15"><a href="#%E4%BD%BF%E7%94%A8_xdg_menu_3"><span class="tocnumber">5.3.1</span> <span class="toctext">使用 xdg_menu</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="#%E4%BD%BF%E7%94%A8update-menus"><span class="tocnumber">5.3.2</span> <span class="toctext">使用update-menus</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-17">
<a href="#FluxBox"><span class="tocnumber">5.4</span> <span class="toctext">FluxBox</span></a>
<ul>
<li class="toclevel-3 tocsection-18"><a href="#%E4%BD%BF%E7%94%A8_xdg_menu_4"><span class="tocnumber">5.4.1</span> <span class="toctext">使用 xdg_menu</span></a></li>
<li class="toclevel-3 tocsection-19"><a href="#%E4%BD%BF%E7%94%A8_update-menus_2"><span class="tocnumber">5.4.2</span> <span class="toctext">使用 update-menus</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-20">
<a href="#OpenBox"><span class="tocnumber">5.5</span> <span class="toctext">OpenBox</span></a>
<ul>
<li class="toclevel-3 tocsection-21"><a href="#%E4%BD%BF%E7%94%A8_xdg_menu_5"><span class="tocnumber">5.5.1</span> <span class="toctext">使用 xdg_menu</span></a></li>
<li class="toclevel-3 tocsection-22"><a href="#%E4%BD%9C%E4%B8%BA%E7%AE%A1%E9%81%93%E8%8F%9C%E5%8D%95"><span class="tocnumber">5.5.2</span> <span class="toctext">作为管道菜单</span></a></li>
<li class="toclevel-3 tocsection-23"><a href="#%E4%BD%BF%E7%94%A8_update-menus_3"><span class="tocnumber">5.5.3</span> <span class="toctext">使用 update-menus</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-24">
<a href="#Twm"><span class="tocnumber">5.6</span> <span class="toctext">Twm</span></a>
<ul>
<li class="toclevel-3 tocsection-25"><a href="#%E4%BD%BF%E7%94%A8_xdg_menu_6"><span class="tocnumber">5.6.1</span> <span class="toctext">使用 xdg_menu</span></a></li>
<li class="toclevel-3 tocsection-26"><a href="#%E4%BD%BF%E7%94%A8_update-menus_4"><span class="tocnumber">5.6.2</span> <span class="toctext">使用 update-menus</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-27">
<a href="#WindowMaker"><span class="tocnumber">5.7</span> <span class="toctext">WindowMaker</span></a>
<ul>
<li class="toclevel-3 tocsection-28"><a href="#%E4%BD%BF%E7%94%A8_xdg_menu_7"><span class="tocnumber">5.7.1</span> <span class="toctext">使用 xdg_menu</span></a></li>
<li class="toclevel-3 tocsection-29"><a href="#%E4%BD%BF%E7%94%A8_update-menus_5"><span class="tocnumber">5.7.2</span> <span class="toctext">使用 update-menus</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-30">
<a href="#Fvwm2"><span class="tocnumber">5.8</span> <span class="toctext">Fvwm2</span></a>
<ul>
<li class="toclevel-3 tocsection-31"><a href="#%E4%BD%BF%E7%94%A8_xdg_menu_8"><span class="tocnumber">5.8.1</span> <span class="toctext">使用 xdg_menu</span></a></li>
<li class="toclevel-3 tocsection-32"><a href="#%E4%BD%BF%E7%94%A8_update-menus_6"><span class="tocnumber">5.8.2</span> <span class="toctext">使用 update-menus</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-33">
<a href="#BlackBox"><span class="tocnumber">5.9</span> <span class="toctext">BlackBox</span></a>
<ul>
<li class="toclevel-3 tocsection-34"><a href="#%E4%BD%BF%E7%94%A8_xdg_menu_9"><span class="tocnumber">5.9.1</span> <span class="toctext">使用 xdg_menu</span></a></li>
<li class="toclevel-3 tocsection-35"><a href="#%E4%BD%BF%E7%94%A8_update-menus_7"><span class="tocnumber">5.9.2</span> <span class="toctext">使用 update-menus</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-36"><a href="#%E5%8F%A6%E8%AF%B7%E5%8F%82%E8%A7%81"><span class="tocnumber">6</span> <span class="toctext">另请参见</span></a></li>
</ul>
</div>

<h2>
<span id=".E5.AE.89.E8.A3.85"></span><span class="mw-headline" id="安装">安装</span>
</h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">安装</a><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=archlinux-xdg-menu">archlinux-xdg-menu</a></span>包。
</p>
<h2>
<span id=".E8.8F.9C.E5.8D.95.E5.B1.82.E6.AC.A1.E7.BB.93.E6.9E.84"></span><span class="mw-headline" id="菜单层次结构">菜单层次结构</span>
</h2>
<ul><li>应用
<ul>
<li>辅助功能</li>
<li>配饰</li>
<li>开发</li>
<li>教育</li>
<li>游戏</li>
<li>图形</li>
<li>互联网</li>
<li>多媒体</li>
<li>办公</li>
<li>其他</li>
<li>科学</li>
<li>系统</li>
</ul>
</li></ul>
<h2>
<span id=".E9.85.8D.E7.BD.AE"></span><span class="mw-headline" id="配置">配置</span>
</h2>
<p>Xdg_menu依赖于三组信息来生成菜单：根菜单或换句话说，通常在命令行上传递的XML菜单模板、上次运行时缓存的信息以及一系列配置文件。
</p>
<ul>
<li>您可以在<code>/etc/xdg/menus</code>中找到一些XML菜单模板.</li>
<li>如果更改xdg_menu中的代码以更改布局，请确保删除<code>~/.xdg_menu_cache</code>中的所有内容，否则您将花费数小时试图找出对perl脚本所做的更改不起作用的原因。</li>
<li>您可以在<code>/usr/share/applications</code>中找到各个应用程序配置</li>
</ul>
<p>其他配置文件目录可以在<code>/usr/share</code>下找到。在大多数情况下你不需要碰这些东西。但是，如果要更改菜单的分层方式，可以更改菜单模板以进行细微更改。主要的更改需要调整实际的 xdg_menu perl脚本。如果您发现应用程序没有出现或者它们被称为奇怪的东西，那么您需要查看<code>/usr/share/applications</code>中的.desktop文件。检查<a rel="nofollow" class="external text" href="https://specifications.freedesktop.org/desktop-entry-spec/desktop-entry-spec-latest.html">桌面条目规范</a>。
</p>
<h3>
<span id=".E4.BB.8E.E5.85.B6.E4.BB.96.E7.9B.AE.E5.BD.95.E6.B7.BB.E5.8A.A0.E6.A1.8C.E9.9D.A2.E6.9D.A1.E7.9B.AE"></span><span class="mw-headline" id="从其他目录添加桌面条目">从其他目录添加桌面条目</span>
</h3>
<p>默认情况下，Xdg菜单将填充那些将桌面条目安装到<code>/usr/share/applications</code>的应用程序。若要将应用程序添加到将桌面项安装到用户文件夹（如<code>~/.local/share/applications</code>的菜单中，请编辑<code>/etc/xdg/menus/arch applications.menu</code>文件，并为相关目录添加<code>&lt;AppDir&gt;</code>标记，请参见以下内容：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/xdg/menus/arch-applications.menu</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;Menu&gt;

  &lt;Name&gt;Applications&lt;/Name&gt;
  &lt;Directory&gt;Arch-Applications.directory&lt;/Directory&gt;
  &lt;DefaultAppDirs/&gt;
  <b>&lt;AppDir&gt;/home/<i>username</i>/.local/share/applications&lt;/AppDir&gt;</b>
  &lt;DefaultDirectoryDirs/&gt;
  &lt;DefaultMergeDirs/&gt;
  ...
</pre>
<h2>
<span id=".E4.BD.BF.E7.94.A8"></span><span class="mw-headline" id="使用">使用</span>
</h2>
<h3><span class="mw-headline" id="xdg_menu">xdg_menu</span></h3>
<pre>xdg_menu [--format &lt;format&gt;] [--desktop &lt;desktop&gt;] 
         [--charset &lt;charset&gt;] [--language &lt;language&gt;]  
	 [--root-menu &lt;root-menu&gt;] [--die-on-error]
	 [--fullmenu] [--help]
		 
	format - output format
	         possible formats: twm, WindowMaker, fvwm2, icewm, ion3
	                           blackbox, fluxbox, openbox, 
				   xfce4, openbox3, openbox3-pipe, awesome
				   readable
		 default: WindowMaker
		
 	fullmenu  - output a full menu and not only a submenu

	desktop - desktop name for NotShowIn and OnlyShowIn
		 default: the same as format
			 
	charset - output charset
		 default: &lt;locale&gt;
			 
	language - output language
		 default: &lt;locale&gt;
			 
	root-menu - location of root menu file
		 default: /opt/gnome/etc/xdg/menus/applications.menu
			 
	die-on-error - abort execution on any error, 
		 default: try to continue

	verbose - print debugging information
		 
	help - print this text
</pre>
<h3><span class="mw-headline" id="update-menus">update-menus</span></h3>
<p><b>update-menus</b> 从XDG内容更新窗口管理器的菜单，并可以使用配置自动完成。
</p>
<p>这是xdg_menu的脚本包装器，它依赖于 <code>/etc/update-menus.conf</code>
</p>
<p>你需要安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=archlinux-xdg-menu">archlinux-xdg-menu</a></span> (xdg_menu)
</p>
<p><code>/etc/update-menus.conf</code> 从应该为其生成菜单的窗口管理器列表中进行选择。允许带#的内容。
</p>
<p>所有生成的菜单都放在<code>/var/cache/xdg-menu/</code>中。有关更多信息，请参阅本页的“wm特定示例”部分。
</p>
<h2>
<span id=".E7.A4.BA.E4.BE.8B"></span><span class="mw-headline" id="示例">示例</span>
</h2>
<h3><span class="mw-headline" id="Awesome">Awesome</span></h3>
<h4>
<span id=".E4.BD.BF.E7.94.A8_xdg_menu"></span><span class="mw-headline" id="使用_xdg_menu">使用 xdg_menu</span>
</h4>
<pre>$ xdg_menu --format awesome --root-menu /etc/xdg/menus/arch-applications.menu &gt;~/.config/awesome/archmenu.lua
</pre>
<p>然后编辑 rc.lua ，如下所示
</p>
<ul>
<li>为新的 menu.lua 文件添加一个要求的声明</li>
<li>为调用 xdgmenu 的新菜单的 awful.menu 对象添加一个条目</li>
</ul>
<pre>...
xdg_menu = require("archmenu")
...

...
mymainmenu = awful.menu({ items = { { "awesome", myawesomemenu, beautiful.awesome_icon },
                                    { "Applications", xdgmenu },
                                    { "open terminal", terminal }
                                  }
                        })
...
</pre>
<h3><span class="mw-headline" id="IceWM">IceWM</span></h3>
<h4>
<span id=".E4.BD.BF.E7.94.A8_xdg_menu_2"></span><span class="mw-headline" id="使用_xdg_menu_2">使用 xdg_menu</span>
</h4>
<pre>$ xdg_menu --format icewm --fullmenu --root-menu /etc/xdg/menus/arch-applications.menu &gt;&gt;~/.icewm/programs
</pre>
<h4>
<span id=".E4.BD.BF.E7.94.A8_update-menus"></span><span class="mw-headline" id="使用_update-menus">使用 update-menus</span>
</h4>
<ul>
<li>在 /etc/update-menus.conf 取消对icewm的注释</li>
<li>使用root用户运行 update-menus 命令</li>
<li>将 ~/.icewm/programs 符号链接到 /var/cache/xdg-menu/icewm/programs</li>
</ul>
<h3><span class="mw-headline" id="Ion3">Ion3</span></h3>
<h4>
<span id=".E4.BD.BF.E7.94.A8_xdg_menu_3"></span><span class="mw-headline" id="使用_xdg_menu_3">使用 xdg_menu</span>
</h4>
<pre>$ xdg_menu --format ion3  --root-menu /etc/xdg/menus/arch-applications.menu &gt;~/.ion3/default-session--0/_xdg-menu.lua
</pre>
<p>之后，将 cfg_menus.lua 更改为包含 _xdg-menu.lua 文件，并将菜单添加到主菜单中。例如：
</p>
<pre>...

dopath("_xdg-menu")

-- Main menu
defmenu("mainmenu", {
    submenu("XDG Menu",         "&lt;NAME-OF-FIRST-MENU-IN-_xdg-menu.lua-FILE&gt;"),
    submenu("Programs",         "appmenu"),
    menuentry("Lock screen",    "ioncore.exec_on(_, 'xlock')"),
    menuentry("Help",           "mod_query.query_man(_)"),
    menuentry("About Ion",      "mod_query.show_about_ion(_)"),
    submenu("Styles",           "stylemenu"),
    submenu("Session",          "sessionmenu"),
})

...
</pre>
<h4>
<span id=".E4.BD.BF.E7.94.A8update-menus"></span><span class="mw-headline" id="使用update-menus">使用update-menus</span>
</h4>
<ul>
<li>在 /etc/update-menus.conf 取消对ion3的注释</li>
<li>使用root用户运行 update-menus 命令</li>
<li>将 cfg_menus.lua 更改为包含 xdg-menu.lua 文件，并将菜单添加到主菜单中</li>
</ul>
<p>例如:
</p>
<pre>...

dopath("/var/cache/xdg-menu/ion3/xdg-menu.lua")

-- Main menu
defmenu("mainmenu", {
    submenu("XDG Menu",         "&lt;NAME-OF-FIRST-MENU-IN-xdg-menu.lua-FILE&gt;"),
    submenu("Programs",         "appmenu"),
    menuentry("Lock screen",    "ioncore.exec_on(_, 'xlock')"),
    menuentry("Help",           "mod_query.query_man(_)"),
    menuentry("About Ion",      "mod_query.show_about_ion(_)"),
    submenu("Styles",           "stylemenu"),
    submenu("Session",          "sessionmenu"),
})

...
</pre>
<h3><span class="mw-headline" id="FluxBox">FluxBox</span></h3>
<h4>
<span id=".E4.BD.BF.E7.94.A8_xdg_menu_4"></span><span class="mw-headline" id="使用_xdg_menu_4">使用 xdg_menu</span>
</h4>
<pre>$ xdg_menu --format fluxbox  --root-menu /etc/xdg/menus/arch-applications.menu &gt;~/.fluxbox/my-menu
</pre>
<p>将菜单文件更改为包含生成的菜单。
</p>
<p>例如添加行:
</p>
<pre>      [include] (my-menu)
</pre>
<h4>
<span id=".E4.BD.BF.E7.94.A8_update-menus_2"></span><span class="mw-headline" id="使用_update-menus_2">使用 update-menus</span>
</h4>
<ul>
<li>在 /etc/update-menu.conf 中取消对fluxbox的注释</li>
<li>使用root用户运行 update-menus</li>
<li>将菜单文件更改为包含生成的菜单</li>
</ul>
<p>例如添加行:
</p>
<pre>      [include] (/var/cache/xdg-menu/fluxbox/boxrc)
</pre>
<h3><span class="mw-headline" id="OpenBox">OpenBox</span></h3>
<h4>
<span id=".E4.BD.BF.E7.94.A8_xdg_menu_5"></span><span class="mw-headline" id="使用_xdg_menu_5">使用 xdg_menu</span>
</h4>
<p>生成菜单:
</p>
<pre>$ xdg_menu --format openbox3 --root-menu /etc/xdg/menus/arch-applications.menu &gt; xdg-menu.xml
</pre>
<p>然后手动将其添加到 menu.xml 中。例如，将 xdg-menu.xml 放入 menu.xml 并添加：
</p>
<pre>&lt;menu id="Applications" /&gt;
</pre>
<p>进入根菜单。
</p>
<h4>
<span id=".E4.BD.9C.E4.B8.BA.E7.AE.A1.E9.81.93.E8.8F.9C.E5.8D.95"></span><span class="mw-headline" id="作为管道菜单">作为管道菜单</span>
</h4>
<p>使用 xdg_open 作为管道菜单，您可以获得额外的好处，即在安装新应用程序时，菜单会自动更新。
</p>
<p>在 menu.xml 中的根菜单标记之间添加以下内容:
</p>
<pre>&lt;menu id="applications" label="Applications" execute="xdg_menu --format openbox3-pipe --root-menu /etc/xdg/menus/arch-applications.menu" /&gt;
</pre>
<p>一个非常基本的例子:
</p>
<pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;openbox_menu xmlns="http://openbox.org/3.4/menu"&gt;

&lt;menu id="root-menu" label="Openbox 3"&gt;
  &lt;menu id="applications" label="Applications" execute="xdg_menu --format openbox3-pipe --root-menu /etc/xdg/menus/arch-applications.menu" /&gt;
  &lt;separator /&gt;
  &lt;item label="Log Out"&gt;
    &lt;action name="Exit"&gt;
      &lt;prompt&gt;yes&lt;/prompt&gt;
    &lt;/action&gt;
  &lt;/item&gt;
&lt;/menu&gt;

&lt;/openbox_menu&gt;
</pre>
<h4>
<span id=".E4.BD.BF.E7.94.A8_update-menus_3"></span><span class="mw-headline" id="使用_update-menus_3">使用 update-menus</span>
</h4>
<ul>
<li>在 /etc/update-menu.conf 中取消对openbox的注释</li>
<li>以root用户运行 update-menus</li>
<li>将 menu.xml 文件更改为包含生成的菜单</li>
</ul>
<p>例如，在根菜单中添加以下内容:
</p>
<pre>&lt;menu id="xdg-menu" label="XDG Menu" execute="cat /var/cache/xdg-menu/openbox/menu.xml"/&gt;
</pre>
<h3><span class="mw-headline" id="Twm">Twm</span></h3>
<h4>
<span id=".E4.BD.BF.E7.94.A8_xdg_menu_6"></span><span class="mw-headline" id="使用_xdg_menu_6">使用 xdg_menu</span>
</h4>
<p>使用
</p>
<pre>$ xdg_menu --format twm --root-menu /etc/xdg/menus/arch-applications.menu &gt;my-twm-menu
</pre>
<p>并手动添加到 twmrc 中。对于具有m4预处理的twm衍生物，如vtwm或ctwm，可通过添加
</p>
<pre>sinclude(`/PATH/TO/my-twm-menu')
</pre>
<p>到 *twmrc.
</p>
<h4>
<span id=".E4.BD.BF.E7.94.A8_update-menus_4"></span><span class="mw-headline" id="使用_update-menus_4">使用 update-menus</span>
</h4>
<ul>
<li>在 /etc/update-menu.conf 中取消对twm的注释</li>
<li>添加到 /etc/X11/twm/system.twmrc 文件应用程序菜单中 (添加以下这行:</li>
</ul>
<pre> "apps"          f.menu "Applications"
</pre>
<p>)到菜单中
</p>
<ul>
<li>使用root用户运行 update-menus</li>
<li>运行 twm -f /var/cache/xdg-menu/twm/twmrc</li>
</ul>
<p>(您还需要将其他自定义项添加到 /etc/X11/twm/system.twmrc)
</p>
<h3><span class="mw-headline" id="WindowMaker">WindowMaker</span></h3>
<h4>
<span id=".E4.BD.BF.E7.94.A8_xdg_menu_7"></span><span class="mw-headline" id="使用_xdg_menu_7">使用 xdg_menu</span>
</h4>
<p>使用
</p>
<pre>$ xdg_menu --format WindowMaker --root-menu /etc/xdg/menus/arch-applications.menu &gt;my-wm-menu
</pre>
<p>然后添加
</p>
<pre>#include "my-wm-menu"
</pre>
<p>到你的 WindowMaker 菜单文件。
</p>
<p>您还可以使用WPrefs“应用程序菜单定义”，并将xdg命令作为参数添加到“生成的子菜单”对象中。
</p>
<h4>
<span id=".E4.BD.BF.E7.94.A8_update-menus_5"></span><span class="mw-headline" id="使用_update-menus_5">使用 update-menus</span>
</h4>
<ul>
<li>在 /etc/update-menus.conf 取消对 WindowMaker 的注释</li>
<li>用root用户运行 update-menus</li>
<li>添加</li>
</ul>
<pre>#include "/var/cache/xdg-menu/WindowMaker/wmrc"
</pre>
<p>到你的菜单文件
</p>
<h3><span class="mw-headline" id="Fvwm2">Fvwm2</span></h3>
<h4>
<span id=".E4.BD.BF.E7.94.A8_xdg_menu_8"></span><span class="mw-headline" id="使用_xdg_menu_8">使用 xdg_menu</span>
</h4>
<p>生成菜单
</p>
<pre>$ xdg_menu --format fvwm2 --root-menu /etc/xdg/menus/arch-applications.menu &gt;fvwm2-menu
</pre>
<p>然后把菜单添加到根菜单
</p>
<pre>read fvwm2-menu

AddToMenu MenuFvwmRoot  "Root Menu"             Title
+                       "&amp;0. XDG Menu"          Popup xdg_menu
</pre>
<h4>
<span id=".E4.BD.BF.E7.94.A8_update-menus_6"></span><span class="mw-headline" id="使用_update-menus_6">使用 update-menus</span>
</h4>
<ul>
<li>在 /etc/update-menus.conf 取消对 fvwm2 的注释</li>
<li>使用root用户运行 update-menus</li>
<li>修改你的 .fvwm2rc 以使其包含创建的菜单，示例:</li>
</ul>
<pre>AddToMenu MenuFvwmRoot  "Root Menu"             Title
+                       "&amp;0. XDG Menu"          Popup xdg_menu
</pre>
<pre>read /var/cache/xdg-menu/fvwm2/fvwm2rc
</pre>
<h3><span class="mw-headline" id="BlackBox">BlackBox</span></h3>
<h4>
<span id=".E4.BD.BF.E7.94.A8_xdg_menu_9"></span><span class="mw-headline" id="使用_xdg_menu_9">使用 xdg_menu</span>
</h4>
<pre>$ xdg_menu --format blackbox  --root-menu /etc/xdg/menus/arch-applications.menu &gt;my-menu
</pre>
<p>修改你的菜单文件以使其包含创建的菜单
</p>
<p>例如添加:
</p>
<pre>[include] (my-menu)
</pre>
<h4>
<span id=".E4.BD.BF.E7.94.A8_update-menus_7"></span><span class="mw-headline" id="使用_update-menus_7">使用 update-menus</span>
</h4>
<ul>
<li>在 /etc/update-menus.conf 取消 blackbox 的注释</li>
<li>使用root用户运行 update-menus</li>
<li>更改你的菜单文件以使其包含创建的菜单</li>
</ul>
<p>例如添加:
</p>
<pre>[include] (/var/cache/xdg-menu/blackbox/boxrc)
</pre>
<h2>
<span id=".E5.8F.A6.E8.AF.B7.E5.8F.82.E8.A7.81"></span><span class="mw-headline" id="另请参见">另请参见</span>
</h2>
<ul>
<li><a href="../en/Sawfish.html#Menus" title="Sawfish">Sawfish#Menus</a></li>
<li><a rel="nofollow" class="external free" href="https://github.com/gapan/xdgmenumaker">https://github.com/gapan/xdgmenumaker</a></li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../zh-CN/Category:Freedesktop.org.html" title="Category:Freedesktop.org (简体中文)">Freedesktop.org (简体中文)</a></li></ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Xdg-menu_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;oldid=631639">https://wiki.archlinux.org/index.php?title=Xdg-menu_(简体中文)&amp;oldid=631639</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 12 August 2020, at 09:39.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
