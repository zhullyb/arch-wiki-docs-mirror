<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>GNOME (简体中文)/Keyring (简体中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-GNOME_简体中文_Keyring_简体中文 rootpage-GNOME_简体中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">GNOME (简体中文)/Keyring (简体中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"><span class="subpages">&lt; <a href="../zh-CN/GNOME.html" title="GNOME (简体中文)">GNOME (简体中文)</a></span></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>翻译状态：</strong>本文是 <a href="../en/GNOME/Keyring.html" class="mw-redirect" title="GNOME Keyring">GNOME Keyring</a> 的<a href="../zh-CN/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (简体中文)">翻译</a>。上次翻译日期：2020-04-28。如果英文版本有所<a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=GNOME_Keyring&amp;diff=0&amp;oldid=607364">更改</a>，则您可以帮助同步翻译。</div>
<p><a rel="nofollow" class="external text" href="https://wiki.gnome.org/Projects/GnomeKeyring">GNOME Keyring</a> 是 GNOME 提供的一组工具，能够存储秘密、密码、密钥、认证并提供给其它程序使用。
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#%E5%AE%89%E8%A3%85"><span class="tocnumber">1</span> <span class="toctext">安装</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#%E7%94%A8GUI%E7%AE%A1%E7%90%86"><span class="tocnumber">2</span> <span class="toctext">用GUI管理</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#%E5%9C%A8GNOME%E5%A4%96%E9%83%A8%E4%BD%BF%E7%94%A8%E9%92%A5%E5%8C%99%E7%8E%AF"><span class="tocnumber">3</span> <span class="toctext">在GNOME外部使用钥匙环</span></a>
<ul>
<li class="toclevel-2 tocsection-4">
<a href="#%E6%B2%A1%E6%9C%89%E5%8F%AF%E8%A7%86%E5%8C%96%E7%AE%A1%E7%90%86%E8%BD%AF%E4%BB%B6%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B"><span class="tocnumber">3.1</span> <span class="toctext">没有可视化管理软件的情况下</span></a>
<ul>
<li class="toclevel-3 tocsection-5"><a href="#%E8%87%AA%E5%8A%A8%E7%99%BB%E9%99%86"><span class="tocnumber">3.1.1</span> <span class="toctext">自动登陆</span></a></li>
<li class="toclevel-3 tocsection-6">
<a href="#%E6%8E%A7%E5%88%B6%E5%8F%B0%E7%99%BB%E9%99%86"><span class="tocnumber">3.1.2</span> <span class="toctext">控制台登陆</span></a>
<ul>
<li class="toclevel-4 tocsection-7"><a href="#%E7%94%A8PAM%E7%9A%84%E6%96%B9%E6%B3%95"><span class="tocnumber">3.1.2.1</span> <span class="toctext">用PAM的方法</span></a></li>
<li class="toclevel-4 tocsection-8"><a href="#%E7%94%A8xinitrc%E5%90%AF%E5%8A%A8"><span class="tocnumber">3.1.2.2</span> <span class="toctext">用xinitrc启动</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2 tocsection-9"><a href="#%E4%BD%BF%E7%94%A8%E6%98%BE%E7%A4%BA%E7%AE%A1%E7%90%86%E5%99%A8"><span class="tocnumber">3.2</span> <span class="toctext">使用显示管理器</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10">
<a href="#SSH%E5%AF%86%E9%92%A5"><span class="tocnumber">4</span> <span class="toctext">SSH密钥</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#Start_SSH_and_Secrets_components_of_keyring_daemon"><span class="tocnumber">4.1</span> <span class="toctext">Start SSH and Secrets components of keyring daemon</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#%E7%A6%81%E7%94%A8%E9%92%A5%E5%8C%99%E7%8E%AF%E7%9A%84%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B%E7%BB%84%E4%BB%B6"><span class="tocnumber">4.2</span> <span class="toctext">禁用钥匙环的守护进程组件</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-13">
<a href="#%E6%8F%90%E7%A4%BA%E4%B8%8E%E5%B0%8F%E6%8A%80%E5%B7%A7"><span class="tocnumber">5</span> <span class="toctext">提示与小技巧</span></a>
<ul>
<li class="toclevel-2 tocsection-14"><a href="#%E8%BD%AF%E4%BB%B6%E4%B8%AD%E7%9A%84%E6%8F%92%E4%BB%B6"><span class="tocnumber">5.1</span> <span class="toctext">软件中的插件</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#%E5%8E%BB%E9%99%A4%E5%AF%86%E7%A0%81"><span class="tocnumber">5.2</span> <span class="toctext">去除密码</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Git%E7%9A%84%E6%8F%92%E4%BB%B6"><span class="tocnumber">5.3</span> <span class="toctext">Git的插件</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#GnuPG%E7%9A%84%E6%8F%92%E4%BB%B6"><span class="tocnumber">5.4</span> <span class="toctext">GnuPG的插件</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-18">
<a href="#%E6%95%85%E9%9A%9C%E6%8E%92%E9%99%A4"><span class="tocnumber">6</span> <span class="toctext">故障排除</span></a>
<ul>
<li class="toclevel-2 tocsection-19"><a href="#%E5%AF%86%E7%A0%81%E6%B2%A1%E8%A2%AB%E8%AE%B0%E4%BD%8F"><span class="tocnumber">6.1</span> <span class="toctext">密码没被记住</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#%E9%87%8D%E7%BD%AE%E5%AF%86%E9%92%A5%E7%8E%AF"><span class="tocnumber">6.2</span> <span class="toctext">重置密钥环</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-21"><a href="#%E5%8F%82%E8%A7%81"><span class="tocnumber">7</span> <span class="toctext">参见</span></a></li>
</ul>
</div>

<h2>
<span id=".E5.AE.89.E8.A3.85"></span><span class="mw-headline" id="安装">安装</span>
</h2>
<p>如果使用的是GNOME, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnome-keyring">gnome-keyring</a></span> 作为 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/groups/x86_64/gnome/">gnome</a></span> 组的一个包自动安装。在其他情况下，请<a href="../zh-CN/Help:Reading.html#%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E5%8C%85" class="mw-redirect" title="安装">安装</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnome-keyring">gnome-keyring</a></span> 包。安装<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libsecret">libsecret</a></span>来让应用程序使用 keyrings。不推荐安装<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libgnome-keyring">libgnome-keyring</a></span>，除非有一些应用程序一定要用它。
</p>
<p>与GNOME keyring相关的其他工具包括：
</p>
<ul><li>
<b>secret-tool</b> — 通过命令行访问GNOME keyring (以及其他任何实现了<a rel="nofollow" class="external text" href="https://specifications.freedesktop.org/secret-service/">DBus Secret Service API</a>的服务) 。</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://wiki.gnome.org/Projects/Libsecret">https://wiki.gnome.org/Projects/Libsecret</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libsecret">libsecret</a></span>
</dd></dl>
<ul><li>
<b>gnome-keyring-query</b> — 提供一个用于从GNOME Keyring的密码库查询密码的命令行工具， 但是用的是不推荐的<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libgnome-keyring">libgnome-keyring</a></span>包。</li></ul>
<dl><dd>|| <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gnome-keyring-query/">gnome-keyring-query</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>gkeyring</b> — 从命令行查询密码，用的是不推荐的<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libgnome-keyring">libgnome-keyring</a></span>包。</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/kparal/gkeyring">https://github.com/kparal/gkeyring</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gkeyring/">gkeyring</a></span><sup><small>AUR</small></sup>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gkeyring-git/">gkeyring-git</a></span><sup><small>AUR</small></sup>
</dd></dl>
<h2>
<span id=".E7.94.A8GUI.E7.AE.A1.E7.90.86"></span><span class="mw-headline" id="用GUI管理">用GUI管理</span>
</h2>
<p>你可以通过Seahorse来管理GNOME Keyring的内容。<a href="../zh-CN/Help:Reading.html#%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E5%8C%85" class="mw-redirect" title="安装">安装</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=seahorse">seahorse</a></span> 包。
</p>
<p>留空或者更改GNOME keyring的密码是允许的。在seahorse里，在 "View" 下拉菜单里，选择 "By Keyring"。在Passwords标签页里，右键单击 "Passwords: login" 然后选择 "Change password." 输入旧密码然后留空新密码，你会收到警告说正在使用未加密的储存方式，如果确定请点击"Use Unsafe Storage."
</p>
<h2>
<span id=".E5.9C.A8GNOME.E5.A4.96.E9.83.A8.E4.BD.BF.E7.94.A8.E9.92.A5.E5.8C.99.E7.8E.AF"></span><span class="mw-headline" id="在GNOME外部使用钥匙环">在GNOME外部使用钥匙环</span>
</h2>
<h3>
<span id=".E6.B2.A1.E6.9C.89.E5.8F.AF.E8.A7.86.E5.8C.96.E7.AE.A1.E7.90.86.E8.BD.AF.E4.BB.B6.E7.9A.84.E6.83.85.E5.86.B5.E4.B8.8B"></span><span class="mw-headline" id="没有可视化管理软件的情况下">没有可视化管理软件的情况下</span>
</h3>
<h4>
<span id=".E8.87.AA.E5.8A.A8.E7.99.BB.E9.99.86"></span><span class="mw-headline" id="自动登陆">自动登陆</span>
</h4>
<p>如果你在用自动登陆，则需要把 login keyring 的密码设成空。
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong>  所有密码会明文保存。</div>
<h4>
<span id=".E6.8E.A7.E5.88.B6.E5.8F.B0.E7.99.BB.E9.99.86"></span><span class="mw-headline" id="控制台登陆">控制台登陆</span>
</h4>
<p>用控制台（tty）登陆的时候，可以用 <a href="../en/PAM.html" title="PAM">PAM</a> 或 <a href="../en/Xinit.html#xinitrc" class="mw-redirect" title="Xinitrc">xinitrc</a> 启动密钥环守护进程。如果用 PAM 的话它会在登陆时自动解锁密钥环。
</p>
<h5>
<span id=".E7.94.A8PAM.E7.9A.84.E6.96.B9.E6.B3.95"></span><span class="mw-headline" id="用PAM的方法">用PAM的方法</span>
</h5>
<p>编辑 <code>/etc/pam.d/login</code> 文件，在 <code>auth</code> 部分的末尾添加 <code>auth optional pam_gnome_keyring.so</code>，在 <code>session</code> 末尾添加 <code>session optional pam_gnome_keyring.so auto_start</code>。
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pam.d/login</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#%PAM-1.0
 
auth       required     pam_securetty.so
auth       requisite    pam_nologin.so
auth       include      system-local-login
<b>auth       optional     pam_gnome_keyring.so</b>
account    include      system-local-login
session    include      system-local-login
<b>session    optional     pam_gnome_keyring.so auto_start</b></pre>
<p>如果用的是 <a href="../en/SDDM.html" title="SDDM">SDDM</a>, 编辑 <code>/etc/pam.d/sddm</code>.
</p>
<p>对 <a href="../en/GDM.html" title="GDM">GDM</a>, 在 <code>/etc/pam.d/passwd</code> 文件的最后添加 <code>password optional pam_gnome_keyring.so</code>：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pam.d/passwd</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#%PAM-1.0

#password	required	pam_cracklib.so difok=2 minlen=8 dcredit=2 ocredit=2 retry=3
#password	required	pam_unix.so sha512 shadow use_authtok
password	required	pam_unix.so sha512 shadow nullok
<b>password	optional	pam_gnome_keyring.so</b></pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 
<ul>
<li>为了自动解锁，密钥环的密码需要和帐户登录密码一样。</li>
<li>依然需要按下面的章节的指示用 <code>~/.xinitrc</code> 设置环境变量。</li>
</ul>
</div>
<h5>
<span id=".E7.94.A8xinitrc.E5.90.AF.E5.8A.A8"></span><span class="mw-headline" id="用xinitrc启动">用xinitrc启动</span>
</h5>
<p>把下面的代码添加到 <code>~/.xinitrc</code> 里：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.xinitrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">eval $(/usr/bin/gnome-keyring-daemon --start --components=pkcs11,secrets,ssh)
export SSH_AUTH_SOCK</pre>
<p>如果用的是 Xfce，参考 <a href="../en/Xfce.html#SSH_agents" title="Xfce">Xfce#SSH agents</a>。
</p>
<h3>
<span id=".E4.BD.BF.E7.94.A8.E6.98.BE.E7.A4.BA.E7.AE.A1.E7.90.86.E5.99.A8"></span><span class="mw-headline" id="使用显示管理器">使用显示管理器</span>
</h3>
<p>如果用显示管理器（display manager），基本上不需要进行配置。下面这些显示管理器会在登录时自动解锁密钥环：
</p>
<ul>
<li><a href="../zh-CN/GDM.html" title="GDM (简体中文)">GDM (简体中文)</a></li>
<li><a href="../zh-CN/LightDM.html" title="LightDM (简体中文)">LightDM (简体中文)</a></li>
<li><a href="../zh-CN/LXDM.html" title="LXDM (简体中文)">LXDM (简体中文)</a></li>
<li><a href="../zh-CN/SDDM.html" title="SDDM (简体中文)">SDDM (简体中文)</a></li>
</ul>
<p>对于 GDM 和 LightDM, 密钥环 <a rel="nofollow" class="external text" href="https://wiki.gnome.org/Projects/GnomeKeyring/Pam">必须</a> 被命名为 <i>login</i> 来实现自动解锁。
</p>
<p>如果要让在终端运行的程序也能访问密钥环（比如SSH），请添加下面的内容到 <code>~/.bash_profile</code>、<code>~/.zshenv</code>或者类似的环境变量声明文件里:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.bash_profile</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">if [ -n "$DESKTOP_SESSION" ];then
    eval $(gnome-keyring-daemon --start)
    export SSH_AUTH_SOCK
fi</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/fish/config.fish</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">if test -n "$DESKTOP_SESSION"
    set (gnome-keyring-daemon --start | string split "=")
end</pre>
<h2>
<span id="SSH.E5.AF.86.E9.92.A5"></span><span class="mw-headline" id="SSH密钥">SSH密钥</span>
</h2>
<p>添加密钥:
</p>
<pre>$ ssh-add ~/.ssh/id_rsa
Enter passphrase for /home/mith/.ssh/id_rsa:
</pre>
<p>列出自动加载的密钥:
</p>
<pre>$ ssh-add -L
</pre>
<p>禁用全部密钥:
</p>
<pre>$ ssh-add -D
</pre>
<p>导入密钥之后，ssh连接远程服务器的时候，会弹出一个对话框要你输入这个密钥的密码。如果你勾上登录时自动解锁密钥，那以后ssh用密钥的时候就不需要再输密码。
</p>
<p>或者如果要永久储存密码到密钥环里的话，用 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=seahorse">seahorse</a></span> 提供的 <code>ssh-askpass</code> 命令：
</p>
<pre>/usr/lib/seahorse/ssh-askpass <i>my_key</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 你需要把对应的 <code>.pub</code> （公钥文件）放到和私钥相同的目录里 (例子里公钥是<code>~/.ssh/id_rsa.pub</code>)，而且公钥文件的全名应该是私钥文件的名字加上扩展名 <code>.pub</code>。</div>
<h3><span class="mw-headline" id="Start_SSH_and_Secrets_components_of_keyring_daemon">Start SSH and Secrets components of keyring daemon</span></h3>
<p>如果你用显示管理器或者PAM启动了 Gnome Keyring 但是你的桌面不是 Gnome, Unity or Mate，SSH 和 Secrets 组件可能不会自动启动。所以你需要把 <code>gnome-keyring-ssh.desktop</code> 和 <code>gnome-keyring-secrets.desktop</code> 从 <code>/etc/xdg/autostart/</code> 里复制到 <code>~/.config/autostart/</code>，而且删除文件里面的 <code>OnlyShowIn</code>。下面是例子
</p>
<pre>$ cp /etc/xdg/autostart/{gnome-keyring-secrets.desktop,gnome-keyring-ssh.desktop} ~/.config/autostart/
$ sed -i '/^OnlyShowIn.*$/d' ~/.config/autostart/gnome-keyring-secrets.desktop
$ sed -i '/^OnlyShowIn.*$/d' ~/.config/autostart/gnome-keyring-ssh.desktop
</pre>
<h3>
<span id=".E7.A6.81.E7.94.A8.E9.92.A5.E5.8C.99.E7.8E.AF.E7.9A.84.E5.AE.88.E6.8A.A4.E8.BF.9B.E7.A8.8B.E7.BB.84.E4.BB.B6"></span><span class="mw-headline" id="禁用钥匙环的守护进程组件">禁用钥匙环的守护进程组件</span>
</h3>
<p>如果你想要用别的 SSH 客户端，比如<a href="../en/SSH_keys.html#ssh-agent" title="SSH keys">ssh-agent</a>、<a href="../en/GnuPG.html#gpg-agent" title="GnuPG">gpg-agent</a>，你需要禁用 GNOME Keyring的 <code>ssh</code> 组件。如果只想对某个用户做这种更改，复制 <code>/etc/xdg/autostart/gnome-keyring-ssh.desktop</code> 到 <code>~/.config/autostart</code> 然后往 <code>~/.config/autostart/gnome-keyring-ssh.desktop</code>里面添加 <code>Hidden=true</code>。然后重新登录。
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 如果你用的是基于 <a href="../en/Wayland.html" title="Wayland">Wayland</a> 的 <a href="../en/GNOME.html" title="GNOME">GNOME</a> 3.24 或者更老的版本，gnome-shell 会让 <code>SSH_AUTH_SOCK</code> 指向 gnome-keyring（无论它有没有运行）。为了阻止这个，你需要在 gnome-shell 启动之前设置 <code>GSM_SKIP_SSH_AGENT_WORKAROUND</code> 环境变量，比如把 <code>GSM_SKIP_SSH_AGENT_WORKAROUND	DEFAULT=1</code> 添加到 <code>~/.pam_environment</code>。</div>
<h2>
<span id=".E6.8F.90.E7.A4.BA.E4.B8.8E.E5.B0.8F.E6.8A.80.E5.B7.A7"></span><span class="mw-headline" id="提示与小技巧">提示与小技巧</span>
</h2>
<h3>
<span id=".E8.BD.AF.E4.BB.B6.E4.B8.AD.E7.9A.84.E6.8F.92.E4.BB.B6"></span><span class="mw-headline" id="软件中的插件">软件中的插件</span>
</h3>
<ul><li><a href="../en/Firefox.html#KDE.2FGNOME_integration" title="Firefox">Firefox</a></li></ul>
<h3>
<span id=".E5.8E.BB.E9.99.A4.E5.AF.86.E7.A0.81"></span><span class="mw-headline" id="去除密码">去除密码</span>
</h3>
<pre>gnome-keyring-daemon -r -d
</pre>
<p>这个命令会启动新的 gnome keyring 守护进程并把之前运行的 gnome keyring 都关掉。
</p>
<h3>
<span id="Git.E7.9A.84.E6.8F.92.E4.BB.B6"></span><span class="mw-headline" id="Git的插件">Git的插件</span>
</h3>
<p>如果你用 HTTPS 来 push <a href="../en/Git.html" title="Git">Git</a>，GNOME keyring 很有用。
</p>
<p><a href="../zh-CN/Help:Reading.html#%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E5%8C%85" class="mw-redirect" title="安装">安装</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libsecret">libsecret</a></span>。 
</p>
<p>配置 Git 使用 gnome kerying：
</p>
<pre>$ git config --global credential.helper /usr/lib/git-core/git-credential-libsecret
</pre>
<p>下一次 <i>git push</i> 的时候如果你没有解锁密钥环，它会提示你解锁。
</p>
<h3>
<span id="GnuPG.E7.9A.84.E6.8F.92.E4.BB.B6"></span><span class="mw-headline" id="GnuPG的插件">GnuPG的插件</span>
</h3>
<p>某些使用 GnuPG 的程序要求指定 <code>pinentry-program</code>。 在 <code>~/.gnupg/gpg-agent.conf</code> 里添加以下内容来让 Gnome 3 pinentry for Gnome Keyring 去管理密码弹窗（passphrase prompts）。
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.gnupg/gpg-agent.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">pinentry-program /usr/bin/pinentry-gnome3</pre>
<p>或者可以使用 <a href="../en/GnuPG.html#Unattended_passphrase" title="GnuPG">force loopback for GPG</a> 来实现在应用内输入密码。
</p>
<h2>
<span id=".E6.95.85.E9.9A.9C.E6.8E.92.E9.99.A4"></span><span class="mw-headline" id="故障排除">故障排除</span>
</h2>
<h3>
<span id=".E5.AF.86.E7.A0.81.E6.B2.A1.E8.A2.AB.E8.AE.B0.E4.BD.8F"></span><span class="mw-headline" id="密码没被记住">密码没被记住</span>
</h3>
<p>如果你每次登陆的时候都收到密码提示框，并且你发现你的密码没有被自动保持你可能需要创建或设置一个默认钥匙环
</p>
<p>确保 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=seahorse">seahorse</a></span> 包已经 <a href="../zh-CN/Help:Reading.html#%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E5%8C%85" class="mw-redirect" title="安装">安装</a>了, 打开它 (系统设置中的"密码和密钥") 并且选中“视图” &gt; “根据钥匙环”。
如果在左边的一竖排中没看到钥匙环 (一个锁一样的图标)， 打开“文件” &gt; “新建” &gt; “密码钥匙环”，然后取一个名字，你可能会被要求输入一个密码。如果你没有给钥匙环密码，钥匙环将会自动解锁，即使使用自动登陆，密码也不会被安全保存。最后，右键你创建的钥匙环并选择“设为默认”。
</p>
<h3>
<span id=".E9.87.8D.E7.BD.AE.E5.AF.86.E9.92.A5.E7.8E.AF"></span><span class="mw-headline" id="重置密钥环">重置密钥环</span>
</h3>
<p>如果出现报错 "The password you use to login to your computer no longer matches that of your login keyring", 可能要重置密钥环。在 seahorse 中右键点击 “默认密钥”，并选择修改密码。
</p>
<p>也可以删除 <code>~/.local/share/keyrings/</code> 中的 "login.keyring" and "user.keystore"，密钥环里的所有密码都会丢失，删除后重新登录。
</p>
<h2>
<span id=".E5.8F.82.E8.A7.81"></span><span class="mw-headline" id="参见">参见</span>
</h2>
<ul><li><a rel="nofollow" class="external text" href="https://wiki.gnome.org/action/show/Projects/GnomeKeyring">GNOME wiki</a></li></ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../zh-CN/Category:GNOME.html" title="Category:GNOME (简体中文)">GNOME (简体中文)</a></li></ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=GNOME_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)/Keyring_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;oldid=610557">https://wiki.archlinux.org/index.php?title=GNOME_(简体中文)/Keyring_(简体中文)&amp;oldid=610557</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 4 May 2020, at 13:27.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
