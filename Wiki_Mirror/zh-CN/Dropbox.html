<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Dropbox (简体中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Dropbox_简体中文 rootpage-Dropbox_简体中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Dropbox (简体中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../en/Synchronization_and_backup_programs.html" class="mw-redirect" title="Backup programs">Backup programs</a></li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>翻译状态：</strong>本文是 <a href="../en/Dropbox.html" title="Dropbox">Dropbox</a> 的<a href="../zh-CN/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (简体中文)">翻译</a>。上次翻译日期：2014-12-16。如果英文版本有所<a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Dropbox&amp;diff=0&amp;oldid=349226">更改</a>，则您可以帮助同步翻译。</div>
<p><a rel="nofollow" class="external text" href="https://www.dropbox.com">Dropbox</a> is a file sharing system that recently introduced a GNU/Linux client.  Use it to transparently sync files across computers and architectures. Simply drop files into your <code>~/Dropbox</code> folder, and they will automatically sync to your centralized repository.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#%E5%AE%89%E8%A3%85"><span class="tocnumber">1</span> <span class="toctext">安装</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#AUR"><span class="tocnumber">1.1</span> <span class="toctext">AUR</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85"><span class="tocnumber">1.2</span> <span class="toctext">手动安装</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#%E5%8F%AF%E9%80%89%E8%BD%AF%E4%BB%B6%E5%8C%85"><span class="tocnumber">1.3</span> <span class="toctext">可选软件包</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5">
<a href="#%E5%90%AF%E5%8A%A8"><span class="tocnumber">2</span> <span class="toctext">启动</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#%E8%87%AA%E5%8A%A8%E5%90%AF%E5%8A%A8_Dropbox"><span class="tocnumber">2.1</span> <span class="toctext">自动启动 Dropbox</span></a></li>
<li class="toclevel-2 tocsection-7">
<a href="#%E4%BD%9C%E4%B8%BA_systemd_%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%90%AF%E5%8A%A8"><span class="tocnumber">2.2</span> <span class="toctext">作为 systemd 的服务启动</span></a>
<ul>
<li class="toclevel-3 tocsection-8"><a href="#Run_as_a_daemon_with_systemd_user"><span class="tocnumber">2.2.1</span> <span class="toctext">Run as a daemon with systemd user</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#%E4%B8%8D%E5%AE%89%E8%A3%85_Dropbox_%E8%80%8C%E8%AE%BF%E9%97%AE%E6%96%87%E4%BB%B6"><span class="tocnumber">3</span> <span class="toctext">不安装 Dropbox 而访问文件</span></a></li>
<li class="toclevel-1 tocsection-10">
<a href="#Securing_your_Dropbox"><span class="tocnumber">4</span> <span class="toctext">Securing your Dropbox</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#Setup_EncFS_with_Dropbox"><span class="tocnumber">4.1</span> <span class="toctext">Setup EncFS with Dropbox</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="#Multiple_Dropbox_instances"><span class="tocnumber">5</span> <span class="toctext">Multiple Dropbox instances</span></a></li>
<li class="toclevel-1 tocsection-13">
<a href="#Dropbox_on_laptops"><span class="tocnumber">6</span> <span class="toctext">Dropbox on laptops</span></a>
<ul>
<li class="toclevel-2 tocsection-14"><a href="#Using_netctl"><span class="tocnumber">6.1</span> <span class="toctext">Using netctl</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Using_NetworkManager"><span class="tocnumber">6.2</span> <span class="toctext">Using NetworkManager</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Using_wicd"><span class="tocnumber">6.3</span> <span class="toctext">Using wicd</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-17">
<a href="#Troubleshooting"><span class="tocnumber">7</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-18"><a href="#Dropbox_keeps_saying_Downloading_files"><span class="tocnumber">7.1</span> <span class="toctext">Dropbox keeps saying Downloading files</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#Change_the_Dropbox_location_from_the_installation_wizard"><span class="tocnumber">7.2</span> <span class="toctext">Change the Dropbox location from the installation wizard</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Context_menu_entries_in_file_manager_do_not_work"><span class="tocnumber">7.3</span> <span class="toctext">Context menu entries in file manager do not work</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#Connecting..."><span class="tocnumber">7.4</span> <span class="toctext">Connecting...</span></a></li>
<li class="toclevel-2 tocsection-22">
<a href="#Dropbox_does_not_start_-_%22This_is_usually_because_of_a_permission_error%22"><span class="tocnumber">7.5</span> <span class="toctext">Dropbox does not start - "This is usually because of a permission error"</span></a>
<ul>
<li class="toclevel-3 tocsection-23"><a href="#Check_permissions"><span class="tocnumber">7.5.1</span> <span class="toctext">Check permissions</span></a></li>
<li class="toclevel-3 tocsection-24"><a href="#Re-linking_your_account"><span class="tocnumber">7.5.2</span> <span class="toctext">Re-linking your account</span></a></li>
<li class="toclevel-3 tocsection-25"><a href="#Errors_caused_by_running_out_of_space"><span class="tocnumber">7.5.3</span> <span class="toctext">Errors caused by running out of space</span></a></li>
<li class="toclevel-3 tocsection-26"><a href="#Locale_caused_errors"><span class="tocnumber">7.5.4</span> <span class="toctext">Locale caused errors</span></a></li>
<li class="toclevel-3 tocsection-27"><a href="#Filesystem_monitoring_problem"><span class="tocnumber">7.5.5</span> <span class="toctext">Filesystem monitoring problem</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-28"><a href="#%E4%BB%A3%E7%90%86%E8%AE%BE%E7%BD%AE"><span class="tocnumber">7.6</span> <span class="toctext">代理设置</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="#%E4%B8%8D%E8%A6%81%E8%AE%A9%E5%AE%83%E8%87%AA%E5%8A%A8%E5%8D%87%E7%BA%A7"><span class="tocnumber">7.7</span> <span class="toctext">不要让它自动升级</span></a></li>
</ul>
</li>
</ul>
</div>

<h2>
<span id=".E5.AE.89.E8.A3.85"></span><span class="mw-headline" id="安装">安装</span>
</h2>
<h3><span class="mw-headline" id="AUR">AUR</span></h3>
<p>您可以从 <a href="../zh-CN/Arch_User_Repository.html" title="Arch User Repository (简体中文)">AUR</a> 安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/dropbox/">dropbox</a></span><sup><small>AUR</small></sup> 。或者, 也可以安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/dropbox-experimental/">dropbox-experimental</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">断开的链接</a>：package not found]</sup>。
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 如果 PKGBUILD 已经过时，你可以在下载后更新它，或者在  <a href="../zh-CN/Arch_User_Repository.html" title="Arch User Repository (简体中文)">AUR</a> 页面标记其为过期。</div>
<ol>
<li>安装完毕，您就可以从程序菜单中的图标或者是在命令行中输入 <code>dropboxd</code> 启动 Dropbox。 您将会在系统托盘中看到程序的图标。</li>
<li>Dropbox 也许会有弹窗提示（此程序非官网下载等等），你知道这个程序是从 AUR 下载安装的就好啦，然后你可以放心大胆的点击“Don't ask again”来忽视这个提示。</li>
<li>然后会看到一个要求您输入账户信息的窗口，您可以输入已有账户或者是新建一个账户。</li>
<li>再然后您会看到 Dropbox 的欢迎页面，此处将会有一个关于如何使用 Dropbox 的简短的介绍。</li>
<li>点击 "Finish and go to My Dropbox"。</li>
</ol>
<h3>
<span id=".E6.89.8B.E5.8A.A8.E5.AE.89.E8.A3.85"></span><span class="mw-headline" id="手动安装">手动安装</span>
</h3>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a><b>The factual accuracy of this article or section is disputed.</b><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> 应该尽量使用 pacman 来安装和管理软件包，或是从 PKGBUILD 建立软件包。 (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Dropbox_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">Talk:Dropbox (简体中文)#</a>)</div>
</div>
<p>以下的内容将介绍 <a rel="nofollow" class="external text" href="https://www.dropbox.com/install">从命令行下手动安装 Dropbox</a>。以 64 位系统为例，运行：
</p>
<pre>$ cd ~
$ wget -O - "<a rel="nofollow" class="external free" href="https://www.dropbox.com/download?plat=lnx.x86_64">https://www.dropbox.com/download?plat=lnx.x86_64</a>" | tar xzf -
</pre>
<p>然后，启动 Dropbox：
</p>
<pre>$ ~/.dropbox-dist/dropboxd
</pre>
<h3>
<span id=".E5.8F.AF.E9.80.89.E8.BD.AF.E4.BB.B6.E5.8C.85"></span><span class="mw-headline" id="可选软件包">可选软件包</span>
</h3>
<ul>
<li>纯命令行界面，从 <a href="../en/Arch_User_Repository.html" class="mw-redirect" title="AUR">AUR</a> 安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/dropbox-cli/">dropbox-cli</a></span><sup><small>AUR</small></sup>。</li>
<li>GNOME 集成，从 <a href="../en/Arch_User_Repository.html" class="mw-redirect" title="AUR">AUR</a> 安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/nautilus-dropbox/">nautilus-dropbox</a></span><sup><small>AUR</small></sup>，此插件将会自动启动 Dropbox。</li>
<li>Nemo 集成，从 <a href="../en/Arch_User_Repository.html" class="mw-redirect" title="AUR">AUR</a> 安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/nemo-dropbox-git/">nemo-dropbox-git</a></span><sup><small>AUR</small></sup>。</li>
<li>
<a href="../en/Thunar.html" title="Thunar">Thunar</a> 集成, 从 <a href="../en/Arch_User_Repository.html" class="mw-redirect" title="AUR">AUR</a> 安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/thunar-dropbox/">thunar-dropbox</a></span><sup><small>AUR</small></sup>。</li>
<li>对于 <a href="../en/KDE.html" title="KDE">KDE</a> 用户，也可以在 <a href="../en/Arch_User_Repository.html" class="mw-redirect" title="AUR">AUR</a> 中找到 KDE 下的应用：<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/kfilebox/">kfilebox</a></span><sup><small>AUR</small></sup>。</li>
</ul>
<h2>
<span id=".E5.90.AF.E5.8A.A8"></span><span class="mw-headline" id="启动">启动</span>
</h2>
<h3>
<span id=".E8.87.AA.E5.8A.A8.E5.90.AF.E5.8A.A8_Dropbox"></span><span class="mw-headline" id="自动启动_Dropbox">自动启动 Dropbox</span>
</h3>
<p>对于 <a href="../en/KDE.html" title="KDE">KDE</a> 用户来说，在注销用户或者是重启机器后，之前正在运行的程序将会自动重新启动。<a href="../en/Xfce.html" title="Xfce">Xfce</a> 稍有不同，将 <code>dropbox.desktop</code> 放置在 {ic|~/.config/autostart}} 下，Dropbox 在下次启动时就会自动启动了。
</p>
<p>如果这些都不能正常的工作，那您也可以将 <code>~/.dropbox-dist/dropboxd &amp;</code> 添加到 <code>~/.xinitrc</code> 来让窗口管理器控制它的启动（也有可能在 <code>~/.config/openbox/autostart</code>,看你的设置了）。当然，您也可以将 Dropbox <a href="#Run_as_a_daemon_with_systemd_user">作为服务启动</a>.
</p>
<h3>
<span id=".E4.BD.9C.E4.B8.BA_systemd_.E7.9A.84.E6.9C.8D.E5.8A.A1.E5.90.AF.E5.8A.A8"></span><span class="mw-headline" id="作为_systemd_的服务启动">作为 systemd 的服务启动</span>
</h3>
<p>当前的 Dropbox 版本已经包含了 systemd 服务文件。默认的 systemd 服务文件并不能在系统托盘中显示软件的图标，但是依旧在后台默默的为您同步您的文件。如果您需要托盘图标支持，那么建立 <code>/etc/systemd/system/dropbox@.service</code> ，修改环境变量 <code>DISPLAY</code> 后替换默认的 systemd 服务文件：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/dropbox@.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">.include /usr/lib/systemd/system/dropbox@.service
[Service]
Environment=DISPLAY=:0
</pre>
<p>最后，启动此服务，在登录时 Dropbox 将能够自动运行：
</p>
<pre># systemctl enable dropbox@&lt;user&gt;
</pre>
<p>Note that you have to manually start Dropbox the first time after installation, so that it runs through the login and setup screen. Further, you need to uncheck the option <b>Start Dropbox on system startup</b> in order to prevent Dropbox from being started twice. The daemon can then be used subsequently.
</p>
<h4><span class="mw-headline" id="Run_as_a_daemon_with_systemd_user">Run as a daemon with systemd user</span></h4>
<p>If you have followed the <a href="../en/Systemd/User.html" title="Systemd/User">systemd/User</a> wiki page, you probably want to start dropbox only when you log in or launch your WM/DE. The solution in that case is to create a service in your home directory instead of using the sysadmin account:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$HOME/.config/systemd/user/dropbox@.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Dropbox as a systemd service
After=xorg.target

[Service]
ExecStart=/home/&lt;user&gt;/.dropbox-dist/dropboxd
ExecReload=/bin/kill -HUP $MAINPID
Environment=DISPLAY=%i

[Install]
WantedBy=default.target
</pre>
<p>Then you can start or enable it with:
</p>
<pre>$ systemctl --user {start|enable} dropbox@:0.service
</pre>
<p>That way you can easily start it in your main display (likely :0) or in another one, without having to hard code it.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> After a lot of trial and error I found that using <code>/usr/bin/dropboxd</code> did not start the service and it did not show any error either (even when running it directly from the terminal worked fine). I believe it has to do that starting it that way systemd does not know which user is actually running the daemon.</div>
<h2>
<span id=".E4.B8.8D.E5.AE.89.E8.A3.85_Dropbox_.E8.80.8C.E8.AE.BF.E9.97.AE.E6.96.87.E4.BB.B6"></span><span class="mw-headline" id="不安装_Dropbox_而访问文件">不安装 Dropbox 而访问文件</span>
</h2>
<p>如果您仅需要基本的访问文件的功能，那么您可以访问 <a rel="nofollow" class="external free" href="https://www.dropbox.com/">https://www.dropbox.com/</a> 来上传或者是下载您的文件。此方法不需要安装 Dropbox 。
</p>
<p>另外，您也可以尝试从 <a href="../en/Arch_User_Repository.html" class="mw-redirect" title="AUR">AUR</a> 安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/droxi/">droxi</a></span><sup><small>AUR</small></sup> ，此终端工具提供了类似于 GNU <code>ftp</code> 客户端的功能。
</p>
<h2><span class="mw-headline" id="Securing_your_Dropbox">Securing your Dropbox</span></h2>
<p>If you want to store sensitive data in your Dropbox, you should encrypt it before. Syncing to Dropbox is encrypted, but all files are (for the time being) stored on the server unencrypted just as you put them in your Dropbox.
</p>
<ul><li>Dropbox works with <a href="../en/TrueCrypt.html" title="TrueCrypt">TrueCrypt</a>, and after you initially uploaded the TrueCrypt volume to Dropbox, performance is quite okay, because Dropbox has a working binary diff.</li></ul>
<ul><li>Another possibility is to use <a href="../en/EncFS.html" title="EncFS">EncFS</a>, which has the advantage that all files are encrypted separately, i.e. you do not have to determine in advance the size of the content you want to encrypt and your encrypted directory grows and shrinks while you add/delete/modify files in it. You can also mount an encrypted volume at startup using the <code>-S</code> option of <code>encfs</code> to avoid having to input the passphrase, but note that your encrypted files are not secure from someone who has direct access to your computer.</li></ul>
<h3><span class="mw-headline" id="Setup_EncFS_with_Dropbox">Setup EncFS with Dropbox</span></h3>
<p>Follow the Wiki instructions to install <a href="../en/EncFS.html" title="EncFS">EncFS</a>.
</p>
<p>Assuming you have set your Dropbox directory as <code>~/Dropbox</code>:
</p>
<p>Create a folder.  Files you want synced to Dropbox will go in here.
</p>
<pre>$ mkdir ~/Private
</pre>
<p>Run the following and enter a password when asked:
</p>
<pre>$ encfs ~/Dropbox/Encrypted ~/Private
</pre>
<p>Your secure folder is ready for use; creating any file inside <code>~/Private</code> will automatically encrypt it into <code>~/Dropbox/Encrypted</code>, which will then be synced to your cloud storage.
</p>
<p>To mount your EncFS folder on every boot, follow the instructions in the <a href="../en/EncFS.html#User_friendly_mounting" title="EncFS">EncFS</a> wiki page.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Consider using the <code>ENCFS6_CONFIG</code> variable and moving the <code>.encfs6.xml</code> file to another location (like a USB stick), to help ensure that your encrypted data and the means to realistically decrypt it do not exist together online.</div>
<h2><span class="mw-headline" id="Multiple_Dropbox_instances">Multiple Dropbox instances</span></h2>
<p>If you need to separate or distinguish your data, personal and work usage for example, you can subscribe to Dropbox with different email addresses and have their directories synced by different Dropbox instances running on a single machine.
</p>
<p>The basic principle and general how-to are described in the <a rel="nofollow" class="external text" href="http://www.dropboxwiki.com/Multiple_Instances_On_Unix">Dropbox Wiki</a>.
</p>
<p>To summarize, you can setup new or additional instances with:
</p>
<pre>mkdir /path/to/.dropbox-alt-1
HOME=/path/to/.dropbox-alt-1 /usr/bin/dropbox start -i
</pre>
<p>Once that is done, stop any Dropbox instance still running and start them like this:
</p>
<pre>HOME=/path/to/.dropbox-alt-1 /path/to/.dropbox-alt-1/.dropbox-dist/dropboxd
HOME=/path/to/.dropbox-alt-2 /path/to/.dropbox-alt-2/.dropbox-dist/dropboxd
</pre>
<p>Pay attention to use different <code>.../.dropbox-dist/dropboxd</code> binaries. Even when setting a custom HOME value, the <code>/opt/dropbox/dropbox</code> or <code>/opt/dropbox/dropboxd</code> wrappers allow only one instance and when started they will kill the one already running.
</p>
<h2><span class="mw-headline" id="Dropbox_on_laptops">Dropbox on laptops</span></h2>
<p>Dropbox itself is pretty good at dealing with connectivity problems. If you have a laptop and roam between different network environments, Dropbox will have problems reconnecting if you do not restart it. <b>Try one of the methods described below first,</b> if for some reason the problem remains, you may try one of these hackish solutions: <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?pid=790905">[1]</a>, <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?pid=1012343#p1012343">[2]</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> When using any of these methods, you need to prevent Dropbox from doing a standard autostart by unchecking <i>Dropbox - Preferences - General - Start Dropbox on system startup</i>. This prevents Dropbox from creating the <code>~/.config/autostart/dropbox.desktop</code> file and thus from starting twice.</div>
<h3><span class="mw-headline" id="Using_netctl">Using netctl</span></h3>
<p>For <a href="../en/Netctl.html" title="Netctl">netctl</a>, use <code>ExecUpPost</code> and <code>ExecDownPre</code> respectively in every network profile you use, or for example in <code>/etc/netctl/interfaces/wlan0</code> to start Dropbox automatically whenever profile on <code>wlan0</code> is active. Add '|| true' to your command to make sure <a href="../en/Netctl.html" title="Netctl">netctl</a> will bring up your profile, although Dropbox fails to start.
</p>
<pre>ExecUpPost="<i>any other code</i>; su -c 'DISPLAY=:0 /usr/bin/dropboxd &amp;' <i>your_user</i> || true"
ExecDownPre="<i>any other code</i>; killall dropbox"
</pre>
<p>Obviously, <code><i>your_user</i></code> has to be edited and <code><i>any other code</i>;</code> can be omitted if you do not have any. The above will make sure that Dropbox is running only if there is a network profile active.
</p>
<h3><span class="mw-headline" id="Using_NetworkManager">Using NetworkManager</span></h3>
<p>If you have connectivity problem with <a href="../en/NetworkManager.html" title="NetworkManager">NetworkManager</a>, try using a <a href="../en/NetworkManager.html#Network_services_with_NetworkManager_dispatcher" title="NetworkManager">dispatcher script</a>: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/networkmanager-dispatcher-dropbox/">networkmanager-dispatcher-dropbox</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">断开的链接</a>：package not found]</sup> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/networkmanager-dispatcher-dropbox-systemd/">networkmanager-dispatcher-dropbox-systemd</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">断开的链接</a>：package not found]</sup>.
</p>
<h3><span class="mw-headline" id="Using_wicd">Using wicd</span></h3>
<p>Create /etc/wicd/scripts/postconnect/dropbox:
</p>
<pre>#!/usr/bin/env bash
su -c 'DISPLAY=:0 /usr/bin/dbus-launch dropboxd &amp;' your_username
</pre>
<p>or, if you use dropbox with systemd:
</p>
<pre>#!/usr/bin/env bash
systemctl restart dropbox@&lt;user&gt;
</pre>
<p>Create /etc/wicd/scripts/postdisconnect/dropbox:
</p>
<pre>#!/usr/bin/env bash
killall dropbox
</pre>
<p>or, if you use dropbox with systemd:
</p>
<pre>#!/usr/bin/env bash
systemctl stop dropbox@&lt;user&gt;
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you use PCManFM as your file manager, Dropbox will use 'xdg-open' calls pcmanfm to open the Dropbox folder.However, without a dbus session, you can not use Trash in PCManFM. You should refer to <a href="../en/D-Bus.html" class="mw-redirect" title="Dbus">Dbus</a> and <a href="../en/General_troubleshooting.html#Session_permissions" title="General troubleshooting">General troubleshooting#Session permissionsto</a> edit your ~/.xinitrc based on /etc/skel/.xinitrc to start a D-Bus session before your launch any other program in ~/.xinitrc. Do use 'dbus-launch dropboxd' instead of just 'dropboxd' in wicd postconnect script. otherwise pcmanfm launched by clicking dropbox icon can not use the Trash.</div>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Dropbox_keeps_saying_Downloading_files">Dropbox keeps saying Downloading files</span></h3>
<p>But in fact now files are synced with your box. This problem is likely to appear when your Dropbox folder is located on a NTFS partition whose mount path contains spaces, or permissions are not set for that partition. See more in the <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=153368">forums</a>. To resolve the problem pay attention to your entry in <code>/etc/fstab</code>. Avoid spaces in the mount path and set write permissions with the "default_permissions" option:
</p>
<pre>UUID=01CD2ABB65E17DE0 /run/media/username/Windows ntfs-3g uid=username,gid=users,default_permissions 0 0
</pre>
<h3><span class="mw-headline" id="Change_the_Dropbox_location_from_the_installation_wizard">Change the Dropbox location from the installation wizard</span></h3>
<p>Some users experience the problem during setting-up Dropbox that they cannot select a Dropbox folder other than <code>/home/username/Dropbox</code>. In this case when the window for changing the path is shown , hit <code>Ctrl+l</code>, enter the location (e.g. /mnt/data/Dropbox) and click on the '"Choose" or "Open" button.
</p>
<h3><span class="mw-headline" id="Context_menu_entries_in_file_manager_do_not_work">Context menu entries in file manager do not work</span></h3>
<p>Several file managers such as Thunar, GNOME Files or its fork Nemo come with extensions that provide context menu entries for files and folders inside your Dropbox. Most of them will result in a browser action such as opening the file or folder in dropbox.com or sharing the link. If you experience these entries not working, then it is likely you have not set the <code>$BROWSER</code> variable which Dropbox requires. See <a href="../en/Environment_variables.html" title="Environment variables">Environment variables</a> for details.
</p>
<h3><span class="mw-headline" id="Connecting...">Connecting...</span></h3>
<p>It may happen that Dropbox cannot connect successfully because it was loaded before an internet connection was established. This can happen on wireless connections, or fast loading machines on wired networks. The best solution to this problem, for wired and wireless connections, is <a href="#Dropbox_on_laptops">#Dropbox on laptops</a> which will ensure that Dropbox is started only after the connection is established. 
</p>
<p>An alternative solution, for those not using netctl or NetworkManager, is to delay the startup of dropbox:
</p>
<ul>
<li><code>cp ~/.config/autostart/dropbox.desktop ~/.config/autostart/dropbox-delayed.desktop</code></li>
<li>Prevent dropbox from doing a standard autostart by unchecking Dropbox - Preferences - General - Start Dropbox on system startup. This removes <code>~/.config/autostart/dropbox.desktop</code>.</li>
<li>Edit <code>~/.config/autostart/dropbox-delayed.desktop</code> and replace <code>Exec=dropboxd</code> with <code>Exec=bash -c "sleep <i>timeout</i> &amp;&amp; dropboxd"</code>. Tweak the <i>timeout</i> parameter, the value of <code>3</code> is a good start.</li>
</ul>
<h3>
<span id="Dropbox_does_not_start_-_.22This_is_usually_because_of_a_permission_error.22"></span><span class="mw-headline" id='Dropbox_does_not_start_-_"This_is_usually_because_of_a_permission_error"'>Dropbox does not start - "This is usually because of a permission error"</span>
</h3>
<h4><span class="mw-headline" id="Check_permissions">Check permissions</span></h4>
<p>Make sure that you own Dropbox's directories before running the application. This includes
</p>
<ul>
<li>
<code>~/.dropbox</code> - Dropbox's configuration directory</li>
<li>
<code>~/Dropbox</code> - Dropbox's download directory (default)</li>
</ul>
<p>You can ensure this by changing their owner with <code>chown -R</code>.
</p>
<p>This error could also be caused by <code>/var</code> being full.
</p>
<h4><span class="mw-headline" id="Re-linking_your_account">Re-linking your account</span></h4>
<p><a rel="nofollow" class="external text" href="https://www.dropbox.com/help/72">Dropbox's FAQ</a> suggests that this error may be caused by misconfiguration and is fixed by (re)moving the current configuration folder
</p>
<pre># mv ~/.dropbox ~/.dropbox.old
</pre>
<p>and restarting Dropbox.
</p>
<h4><span class="mw-headline" id="Errors_caused_by_running_out_of_space">Errors caused by running out of space</span></h4>
<p>A common error that might happen is that there is no more available space on your <code>/tmp</code> and <code>/var</code> partitions. If this happens, Dropbox will crash on startup with the following error in its log:
</p>
<pre>Exception: Not a valid FileCache file
</pre>
<p>A detailed story of such an occurrence can be found in the <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=973458">forums</a>. Make sure there is enough space available before launching Dropbox.
</p>
<p>Another case is when the root partition is full:
</p>
<pre>OperationalError: database or disk is full
</pre>
<p>Check to see the available space on partitions with <code>df</code>.
</p>
<h4><span class="mw-headline" id="Locale_caused_errors">Locale caused errors</span></h4>
<p>Try starting <code>dropboxd</code> with this code:
</p>
<pre>LANG=$LOCALE
dropboxd
</pre>
<p>(You can also use a different value for LANG; it must be in the format "en_US.UTF-8")
This helps when running from a Bash script or Bash shell where <code>/etc/rc.d/functions</code> has been loaded
</p>
<h4><span class="mw-headline" id="Filesystem_monitoring_problem">Filesystem monitoring problem</span></h4>
<p>If you have a lot of files to sync in your Dropbox folder, you might get the following error:
</p>
<pre>Unable to monitor filesystem
Please run: echo 100000 | sudo tee /proc/sys/fs/inotify/max_user_watches and restart Dropbox to correct the problem.
</pre>
<p>This can be fixed easily by adding
</p>
<pre>fs.inotify.max_user_watches = 100000
</pre>
<p>to <code>/etc/sysctl.d/99-sysctl.conf</code> and then reload the kernel parameters
</p>
<pre># sysctl --system
</pre>
<h3>
<span id=".E4.BB.A3.E7.90.86.E8.AE.BE.E7.BD.AE"></span><span class="mw-headline" id="代理设置">代理设置</span>
</h3>
<p>最简单的方法是在 Dropbox 的首选项页面设置代理。另外也可以设置为自动选择代理，它将会读取 http_proxy 的变量而使用合适的代理。
</p>
<pre>env http_proxy=http://your.proxy.here:port /usr/bin/dropboxd</pre>
<p>或者
</p>
<pre>export http_proxy=http://your.proxy.here:port
/usr/bin/dropboxd
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Dropbox 仅支持此形式的 <code>http://your.proxy.here:port</code> 代理表示方法， 此表示方法不被支持 <code>your.proxy.here:port</code>（大部分程序都不支持此方法） 。</div>
<h3>
<span id=".E4.B8.8D.E8.A6.81.E8.AE.A9.E5.AE.83.E8.87.AA.E5.8A.A8.E5.8D.87.E7.BA.A7"></span><span class="mw-headline" id="不要让它自动升级">不要让它自动升级</span>
</h3>
<pre>rm -rf ~/.dropbox-dist
install -dm0 ~/.dropbox-dist
</pre>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../zh-CN/Category:File_sharing.html" title="Category:File sharing (简体中文)">File sharing (简体中文)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Dropbox_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;oldid=658234">https://wiki.archlinux.org/index.php?title=Dropbox_(简体中文)&amp;oldid=658234</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 7 April 2021, at 21:25.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
