<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Emacs (简体中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Emacs_简体中文 rootpage-Emacs_简体中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Emacs (简体中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>翻译状态：</strong>本文是 <a href="../en/Emacs.html" title="Emacs">Emacs</a> 的<a href="../zh-CN/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (简体中文)">翻译</a>。上次翻译日期：2018-03-07。如果英文版本有所<a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Emacs&amp;diff=0&amp;oldid=229169">更改</a>，则您可以帮助同步翻译。</div>
<p><a href="https://en.wikipedia.org/wiki/Emacs" class="extiw" title="wikipedia:Emacs">Emacs</a>是一个可扩展、可定制、自文档化的实时显示编辑器。Emacs的核心构建在<a href="https://en.wikipedia.org/wiki/Emacs_Lisp" class="extiw" title="wikipedia:Emacs Lisp">Emacs Lisp</a>解释器之上，Emacs Lisp是大部分Emacs内建函数和拓展模块的实现语言。在图形界面系统下，Emacs使用GTK作为默认的X工具，在命令行界面下(CLI)，Emacs也可以工作良好。在文本编辑能力上，Emacs常被拿来和<a href="../en/Vim.html" title="Vim">vim</a>比较。
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#%E5%AE%89%E8%A3%85"><span class="tocnumber">1</span> <span class="toctext">安装</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#%E8%BF%90%E8%A1%8CEmacs"><span class="tocnumber">2</span> <span class="toctext">运行Emacs</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#%E6%B2%A1%E6%9C%89%E9%A2%9C%E8%89%B2"><span class="tocnumber">2.1</span> <span class="toctext">没有颜色</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#%E4%BD%9C%E4%B8%BA%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B"><span class="tocnumber">2.2</span> <span class="toctext">作为守护进程</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#%E4%BD%9C%E4%B8%BAsystemd%E5%8D%95%E5%85%83"><span class="tocnumber">2.3</span> <span class="toctext">作为systemd单元</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6">
<a href="#%E8%8E%B7%E5%BE%97%E5%B8%AE%E5%8A%A9"><span class="tocnumber">3</span> <span class="toctext">获得帮助</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#%E6%89%8B%E5%86%8C"><span class="tocnumber">3.1</span> <span class="toctext">手册</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8">
<a href="#%E5%AE%9A%E5%88%B6%E5%8C%96"><span class="tocnumber">4</span> <span class="toctext">定制化</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="tocnumber">4.1</span> <span class="toctext">配置文件</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10">
<a href="#%E6%8F%90%E7%A4%BA%E5%92%8C%E6%8A%80%E5%B7%A7"><span class="tocnumber">5</span> <span class="toctext">提示和技巧</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#TRAMP"><span class="tocnumber">5.1</span> <span class="toctext">TRAMP</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#%E4%BD%BF%E7%94%A8Emacs%E4%BD%9C%E4%B8%BAgit_mergetool"><span class="tocnumber">5.2</span> <span class="toctext">使用Emacs作为git mergetool</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#%E4%BD%BF%E7%94%A8%E5%A4%A7%E5%86%99%E9%94%81%E5%AE%9A%E4%BD%9C%E4%B8%BA%E6%8E%A7%E5%88%B6%E9%94%AE"><span class="tocnumber">5.3</span> <span class="toctext">使用大写锁定作为控制键</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#emacsclient"><span class="tocnumber">5.4</span> <span class="toctext">emacsclient</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#%E5%A4%9A%E7%A7%8D%E9%85%8D%E7%BD%AE"><span class="tocnumber">5.5</span> <span class="toctext">多种配置</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Local_and_custom_variables"><span class="tocnumber">5.6</span> <span class="toctext">Local and custom variables</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Custom_colors_and_theme"><span class="tocnumber">5.7</span> <span class="toctext">Custom colors and theme</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#SyncTeX_support"><span class="tocnumber">5.8</span> <span class="toctext">SyncTeX support</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#Syntax_highlighting_for_systemd_Files"><span class="tocnumber">5.9</span> <span class="toctext">Syntax highlighting for systemd Files</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Clipboard_support_for_emacs-nox"><span class="tocnumber">5.10</span> <span class="toctext">Clipboard support for emacs-nox</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-21"><a href="#Packages"><span class="tocnumber">6</span> <span class="toctext">Packages</span></a></li>
<li class="toclevel-1 tocsection-22">
<a href="#%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87"><span class="tocnumber">7</span> <span class="toctext">疑难杂症</span></a>
<ul>
<li class="toclevel-2 tocsection-23"><a href="#%E5%BD%A9%E8%89%B2%E8%BE%93%E5%87%BA%E7%9A%84%E9%97%AE%E9%A2%98"><span class="tocnumber">7.1</span> <span class="toctext">彩色输出的问题</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#%E8%8F%9C%E5%8D%95%E6%98%BE%E7%A4%BA%E4%B8%BA%E7%A9%BA"><span class="tocnumber">7.2</span> <span class="toctext">菜单显示为空</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="#X_%E7%AA%97%E5%8F%A3%E4%B8%8B%E7%9A%84%E5%AD%97%E7%AC%A6%E6%98%BE%E7%A4%BA%E9%97%AE%E9%A2%98"><span class="tocnumber">7.3</span> <span class="toctext">X 窗口下的字符显示问题</span></a></li>
<li class="toclevel-2 tocsection-26">
<a href="#%E5%90%AF%E5%8A%A8%E9%80%9F%E5%BA%A6%E6%85%A2"><span class="tocnumber">7.4</span> <span class="toctext">启动速度慢</span></a>
<ul>
<li class="toclevel-3 tocsection-27"><a href="#%E9%94%99%E8%AF%AF%E7%9A%84%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE"><span class="tocnumber">7.4.1</span> <span class="toctext">错误的网络配置</span></a></li>
<li class="toclevel-3 tocsection-28"><a href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD%E6%85%A2"><span class="tocnumber">7.4.2</span> <span class="toctext">初始化文件加载慢</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-29"><a href="#%E4%B8%8D%E8%83%BD%E6%89%93%E5%BC%80%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6:_..."><span class="tocnumber">7.5</span> <span class="toctext">不能打开配置文件: ...</span></a></li>
<li class="toclevel-2 tocsection-30"><a href="#Dead-accent_keys_problem:_'&lt;dead-acute&gt;_is_undefined'"><span class="tocnumber">7.6</span> <span class="toctext">Dead-accent keys problem: '&lt;dead-acute&gt; is undefined'</span></a></li>
<li class="toclevel-2 tocsection-31"><a href="#C-M-%_and_some_other_bindings_do_not_work_in_emacs_nox"><span class="tocnumber">7.7</span> <span class="toctext">C-M-% and some other bindings do not work in emacs nox</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#Emacs_client_gets_stuck_when_switching_back_to_it"><span class="tocnumber">7.8</span> <span class="toctext">Emacs client gets stuck when switching back to it</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#Emacs-nox_output_gets_messy"><span class="tocnumber">7.9</span> <span class="toctext">Emacs-nox output gets messy</span></a></li>
<li class="toclevel-2 tocsection-34"><a href="#Shift_+_Arrow_keys_not_working_in_emacs_within_tmux"><span class="tocnumber">7.10</span> <span class="toctext">Shift + Arrow keys not working in emacs within tmux</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-35"><a href="#%E6%9B%BF%E4%BB%A3%E6%96%B9%E6%A1%88"><span class="tocnumber">8</span> <span class="toctext">替代方案</span></a></li>
<li class="toclevel-1 tocsection-36"><a href="#%E8%B5%84%E6%BA%90"><span class="tocnumber">9</span> <span class="toctext">资源</span></a></li>
</ul>
</div>

<h2>
<span id=".E5.AE.89.E8.A3.85"></span><span class="mw-headline" id="安装">安装</span>
</h2>
<p>Emacs有众多发行版本（有时候称作<i>emacsen</i>）。 最常见的莫过于 <a rel="nofollow" class="external text" href="https://www.gnu.org/software/emacs/">GNU Emacs</a>。
</p>
<p>在 <a href="../en/Official_repositories.html" title="Official repositories">official repositories</a> 中可以<a href="../zh-CN/Help:Reading.html#%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E5%8C%85" class="mw-redirect" title="安装">安装</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=emacs">emacs</a></span> 。如果你经常使用命令行，你可能更喜欢没有GTK+支持的 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=emacs-nox">emacs-nox</a></span>（也没有声音或其它花哨的东西）。值得注意的是，文字模式的Emacs有一些缺点：它支持的颜色和字体设置功能都要更少（实时改变字体大小，单文档多字体，等等）。而且emacs-nox存在一些高级功能上的缺陷，比如Speedbar和GUD（调试环境），处理复杂的外观（face，文本在Emacs中呈现的样子）的时候速度也会变慢。
</p>
<p>如果要用 <code>feature/native-comp</code> 分支的 Emacs(参考 <a rel="nofollow" class="external text" href="https://www.emacswiki.org/emacs/GccEmacs">GccEmacs</a>)，请安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/emacs-native-comp-git/">emacs-native-comp-git</a></span><sup><small>AUR</small></sup> 包。如果你需求是使用原生编译分支和使用新的渲染引擎 pgtk，你可以安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/emacs-pgtk-native-comp-git/">emacs-pgtk-native-comp-git</a></span><sup><small>AUR</small></sup> 或者 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/emacs-native-comp-git-enhanced/">emacs-native-comp-git-enhanced</a></span><sup><small>AUR</small></sup>，这两个包都是用于安装非官方克隆的 <code>pgtk-nativecomp</code>。
</p>
<h2>
<span id=".E8.BF.90.E8.A1.8CEmacs"></span><span class="mw-headline" id="运行Emacs">运行Emacs</span>
</h2>
<p>启动Emacs之前，你应该知道怎样关掉它（特别是你在终端里运行时）：使用 <code>Ctrl+x</code><code>Ctrl+c</code> 按键顺序。
</p>
<p>启动Emacs：
</p>
<pre>$ emacs
</pre>
<p>或者以文字模式启动：
</p>
<pre>$ emacs -nw
</pre>
<p>又或者，快速启动（不解析.emacs文件）并以文字模式启动：
</p>
<pre>$ emacs -Q -nw
</pre>
<p>如果你安装的是nox版本，'emacs' 和 'emacs -nw' 效果是一样的。
</p>
<p>可以提供文件名直接打开文件：
</p>
<pre>$ emacs filename.txt
</pre>
<h3>
<span id=".E6.B2.A1.E6.9C.89.E9.A2.9C.E8.89.B2"></span><span class="mw-headline" id="没有颜色">没有颜色</span>
</h3>
<p>默认情况下，Emacs以颜色主题开始，显示超链接为深蓝色。
</p>
<p>以文本模式，不使用任何颜色主题启动Emacs：
</p>
<pre>$ emacs -nw --color=no
</pre>
<p>这将导致所有的文本采用终端的字体颜色 –– 通常是黑色背景之上的白色文本，或白色背景上的黑色文本。
</p>
<h3>
<span id=".E4.BD.9C.E4.B8.BA.E5.AE.88.E6.8A.A4.E8.BF.9B.E7.A8.8B"></span><span class="mw-headline" id="作为守护进程">作为守护进程</span>
</h3>
<p>如过不想让Emacs每次启动都读取配置文件的话，可以以守护进程运行Emacs：
</p>
<pre>$ emacs --daemon
</pre>
<p>连接到守护进程：
</p>
<pre>$ emacsclient -nc
</pre>
<p>这个命令会创建一个新的frame <code>-c</code>（如果你更喜欢文字模式，使用 <code>-t</code> ）并且不会独占终端 <code>-n</code> （<code>--no-wait</code>）。
有的程序，如Mutt和Git，（为了提交信息）会等待编辑器完成编辑，所以不能使用 <code>-n</code> 参数。
如果你的默认编辑器是默认使用<code>-n</code>，你需要为那些程序指定一个替代编辑器（比如 <code>emacsclient -a "" -t</code>）。
</p>
<h3>
<span id=".E4.BD.9C.E4.B8.BAsystemd.E5.8D.95.E5.85.83"></span><span class="mw-headline" id="作为systemd单元">作为systemd单元</span>
</h3>
<p>旧的systemd单元方法有一些需要注意的地方。 它给了一个限制shell调用的有限的shell环境，所以我们需要使用一个user单元，它往往比调用<i>emacs --daemon</i>好得多。
为Emacs创建一个systemd单元：
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 这样一个单元文件将会包含在Emacs 26.1中， 参见 <a rel="nofollow" class="external text" href="https://debbugs.gnu.org/cgi/bugreport.cgi?bug=16507">emacs bug 16507</a>.</div>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/systemd/user/emacs.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Emacs: the extensible, self-documenting text editor

[Service]
Type=forking
ExecStart=/usr/bin/emacs --daemon
ExecStop=/usr/bin/emacsclient --eval "(kill-emacs)"
Restart=always

[Install]
WantedBy=default.target
</pre>
<p>需要启动并启用该单元，以便其在每次电脑启动时启动（请注意 - 请勿“以root运行” - 我们希望它以user，而不是根root user运行）：
</p>
<pre>$ systemctl --user enable --now emacs
</pre>
<p>请注意，systemd user单元不会从登录shell（例如<code>〜/.bash_profile</code>）继承环境变量，因此你可能需要在<code>〜/.pam_environment</code>中设置变量。有关更多信息，请参见<a href="../en/Systemd/User.html" title="Systemd/User">Systemd/User</a>。
</p>
<p>如启动emacs作为守护程序，你可能会想把<code>VISUAL</code>和<code>EDITOR</code>环境变量设置为<code>emacsclient</code>，以便启动编辑器的程序使用emacsclient而不是一个完整的编辑器。使用外部编辑器的程序，包括电子邮件程序（用于编辑消息），Git（用于编辑提交消息）和less（用于编辑显示文件的<code>v</code>命令）。 不要对emacsclient使用<code>-n</code>（<code>--nowait</code>）选项，因为程序通常要求在编辑器退出时编辑完成。
</p>
<p>建议将Emacs的任何GUI开始菜单条目（或等效条目）更改为指向emacsclient而不是emacs，以便使用emacs守护程序而不是启动新的emacs进程。
</p>
<h2>
<span id=".E8.8E.B7.E5.BE.97.E5.B8.AE.E5.8A.A9"></span><span class="mw-headline" id="获得帮助">获得帮助</span>
</h2>
<p>尽管Emacs很复杂，但了解定制和可扩展性带来的好处并不需要很长时间。此外，已有的各种扩展允许将其转变为针对几乎任何形式的强大文本编辑环境。
</p>
<p>Emacs有一个很好的内置教程，可以通过点击启动画面上的第一个链接进行访问; 通过从菜单中选择<i>帮助-&gt; Emacs 教程</i>或按<b>F1 + t</b>，亦或者按 <b>C-h t</b> (C 默认是 Ctrl 键, - 符号代表同时按下，也就是说你需要按 Ctrl 键的同时按 h 键，然后放开再按 t 键)
</p>
<p>Emacs设计为良好的自文档化。 因此，你很容易知道一些特定命令和快捷键是什么意思，比如命令 <b>find-file</b> ,而它的默认快捷键是 <b>C-x C-f</b>, f 键可联想为file。Emacs 提供大量文档给使用者，建议频繁使用<b>C-h C-h</b>查看所有命令，快捷键和方法。
</p>
<p>Emacs还包含一组参考卡，对初学者和专家都很有用，请参阅<code>/usr/share/emacs/&lt;version&gt;/etc/refcards/</code>（用您的emacs版本替换&lt;version&gt;）。
</p>
<h3>
<span id=".E6.89.8B.E5.86.8C"></span><span class="mw-headline" id="手册">手册</span>
</h3>
<p>如果你真的想要掌握Emacs，最推荐的文档来源仍然是官方手册：
</p>
<ul>
<li>Emacs：完整的Emacs用户手册。</li>
<li>Emacs 常见问题。</li>
<li>Emacs Lisp简介：如果你以前从未使用任何编程语言。</li>
<li>Elisp：如果你已经熟悉一门编程语言。</li>
</ul>
<p>通过内置'info'阅读器，你可以从官网的 PDF 文档<a rel="nofollow" class="external text" href="https://www.gnu.org/software/emacs/manual/">GNU.org</a> 或直接从 Emacs 本身访问：<b>C-h i</b>。 可以按 m 键快速选择特定章节。
</p>
<p>有些用户更喜欢使用'info'阅读器来阅读文本，因为它有很方便的默认快捷键来帮使用者浏览整本书。另外其段落会适应窗口宽度，字体会适应当前屏幕分辨率。有些人觉得这样不那么刺激眼睛。最后，你可以轻松地将章节中的内容复制到任何Emacs缓冲区，甚至可以直接从文本的示例中执行Lisp代码片段。
</p>
<p>尝试用 <b>C-h i m info &lt;RET&gt;</b> 快捷键获取更多 info reader 的信息。 在info模式下按 ？ 可以快速查看快捷键列表。
</p>
<h2>
<span id=".E5.AE.9A.E5.88.B6.E5.8C.96"></span><span class="mw-headline" id="定制化">定制化</span>
</h2>
<p>Emacs 其中一个主要的特点就是拥有极高自由度的扩展性，而且配置起来很容易。Emacs 内置自定义页面，你可以通过<code>M-x customize</code>快捷键查看自定义选项列表，亦或者用<code>M-x customize-group</code>查询特定插件的自定义列表。更多详细请查询 Emacs manual <code>C-h r</code> 里的 <b>Easy Customization</b>。
</p>
<h3>
<span id=".E9.85.8D.E7.BD.AE.E6.96.87.E4.BB.B6"></span><span class="mw-headline" id="配置文件">配置文件</span>
</h3>
<p>当Emacs启动时，通常会自动加载初始化配置文件。这些配置文件由 lisp 语言编写(准确地来说是Emacs lisp),配置文件默认是在<code>~/.emacs.el</code>或者<code>~/.emacs</code>。你也可以把配置文件放在目录里方便管理，默认下是在<code>~/.emacs/init.el</code>。更多详细请看 Emacs manual 里的 <b>Init File</b> 章节。
</p>
<h2>
<span id=".E6.8F.90.E7.A4.BA.E5.92.8C.E6.8A.80.E5.B7.A7"></span><span class="mw-headline" id="提示和技巧">提示和技巧</span>
</h2>
<h3><span class="mw-headline" id="TRAMP">TRAMP</span></h3>
<p>TRAMP (Transparent Remote Access, Multiple Protocols) ，顾名思义，是一个可以通过很多协议透明访问远程文件的一个扩展。当提示输入文件名时，输入特定的格式就可以使用TRAMPP。比如：
</p>
<p>在打开<code>/etc/hosts</code>文件之前提示输入root的密码以获取root权限：
</p>
<pre>C-x C-f /su::/etc/hosts
</pre>
<p>要通过SSH使用'you'用户名登录'remotehost'主机打开文件<code>~/example.txt</code>：
</p>
<pre>C-x C-f /ssh:you@remotehost:~/example.txt
</pre>
<p>TRAMP的路径一般是这种格式'/[protocol]:[[user@]host]:&lt;file&gt;'。
</p>
<p>作为用户'you'连接至'myhost'并以sudo编辑<code>／etc/hosts</code>：
</p>
<pre>/ssh:you@remotehost|sudo:remotehost:/etc/hosts
</pre>
<p>TRAMP支持的不只上面的两个简单例子。请查看Emacs里面的TRAMPP info手册了解更多的信息。
</p>
<h3>
<span id=".E4.BD.BF.E7.94.A8Emacs.E4.BD.9C.E4.B8.BAgit_mergetool"></span><span class="mw-headline" id="使用Emacs作为git_mergetool">使用Emacs作为git mergetool</span>
</h3>
<p>默认情况下，Git支持使用Emacs的Emerge模式作为合并工具。但是你可能更喜欢Ediff模式。不幸的是，由于技术原因，这种模式不被git支持。通过在emacs调用时对一些elisp代码赋值，仍然有一种方法可以使用Ediff。
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">.gitconfig</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[mergetool.ediff]
    cmd = emacs --eval \" (progn (defun ediff-write-merge-buffer () (let ((file ediff-merge-store-file)) (set-buffer ediff-buffer-C) (write-region (point-min) (point-max) file) (message \\\"Merge buffer saved in: %s\\\" file) (set-buffer-modified-p nil) (sit-for 1))) (setq ediff-quit-hook 'kill-emacs ediff-quit-merge-hook 'ediff-write-merge-buffer) (ediff-merge-files-with-ancestor \\\"$LOCAL\\\" \\\"$REMOTE\\\" \\\"$BASE\\\" nil \\\"$MERGED\\\"))\" 

[merge]
	tool = ediff
</pre>
<p>请注意，该命令必须在同一行上。在上面的例子中，我们启动了一个Emacs的新实例。你可能想要使用emacsclient更快地启动; 不建议这样做，因为Ediff调用不是很干净：它可能会打断当前的Emacs会话。
</p>
<p>如果你想要一个即时启动，可以使用-q参数。如果想在保留至少一部分配置的情况下快速启动Emacs，则可以这样使用Emacs：
</p>
<pre>emacs -q -l ~/.emacs-light
</pre>
<p>light配置文件仅加载Ediff所需的内容。
</p>
<p>关于这个技巧的细节和Ediff问题，参见<a rel="nofollow" class="external text" href="http://kerneltrap.org/mailarchive/git/2007/7/1/250424">kerneltrap.org</a><sup title="最后检查状态：domain name not resolved">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-02 ⓘ]</sup>和 <a rel="nofollow" class="external text" href="https://stackoverflow.com/questions/1817370/using-ediff-as-git-mergetool">stackoverflow</a>。
</p>
<h3>
<span id=".E4.BD.BF.E7.94.A8.E5.A4.A7.E5.86.99.E9.94.81.E5.AE.9A.E4.BD.9C.E4.B8.BA.E6.8E.A7.E5.88.B6.E9.94.AE"></span><span class="mw-headline" id="使用大写锁定作为控制键">使用大写锁定作为控制键</span>
</h3>
<p>一些用户喜欢这种个修改，以避免所谓的'emacs pinky'。如果你想在 X Keyboard 上试用它，运行
</p>
<pre>$ setxkbmap -option 'ctrl:nocaps'
</pre>
<p>或者，<b>交换</b>键值，运行
</p>
<pre>$ setxkbmap -option 'ctrl:swapcaps'
</pre>
<p>要永久更改它，请考虑将其添加到.xinitrc文件中。
</p>
<p>如果要将一个区域变为大写，只需使用默认的C-x C-u键绑定，调用upcase-region函数。
</p>
<p>参见<a rel="nofollow" class="external autonumber" href="http://ergoemacs.org/emacs/swap_CapsLock_Ctrl.html">[1]</a>了解另一种方法。
</p>
<p>如果缺少Caps Lock功能，请同时将其映射为“Shift”。
</p>
<pre>$ setxkbmap -option "shift:both_capslock"
</pre>
<p>某些桌面环境包含图形工具以简化键盘重新映射。 例如，在<a href="../en/KDE.html#Plasma" class="mw-redirect" title="Plasma">Plasma 5</a>中打开系统设置并点击输入设备。选择键盘，然后在高级选项卡中会看到Caps Lock设置，可以在其中选择Caps Lock也是一个Ctrl。
</p>
<h3><span class="mw-headline" id="emacsclient">emacsclient</span></h3>
<p>emacsclient
</p>
<h3>
<span id=".E5.A4.9A.E7.A7.8D.E9.85.8D.E7.BD.AE"></span><span class="mw-headline" id="多种配置">多种配置</span>
</h3>
<p>你可以使用少量配置然后告诉Emacs来加载其他配置。
</p>
<p>例如，我们来定义两个配置文件。
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">.emacs</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">(load "~/.emacs.d/main" nil t)
(load "~/.emacs.d/functions" nil t)
(load "~/.emacs.d/modes" nil t)
(load "~/.emacs.d/plugins" nil t)
(load "~/.emacs.d/theme" nil t)
</pre>
<p>这是我们在后台载入的完整配置。但是plugins文件太大导致载入太慢，如果我们要打开一个新的Emacs窗口，可能就不会使用plugins配置，每次加载它实在是太笨重了。
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">.emacs-light</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">(load "~/.emacs.d/main" nil t)
(load "~/.emacs.d/functions" nil t)
(load "~/.emacs.d/modes" nil t)
(load "~/.emacs.d/theme" nil t)
</pre>
<p>现在我们这样来加载Emacs：
</p>
<pre>emacs -q -l ~/.emacs-light
</pre>
<p>你可以为这个命令创建一个别名。
</p>
<h3><span class="mw-headline" id="Local_and_custom_variables">Local and custom variables</span></h3>
<p>You can define variables in your configuration file that can be later one modified locally for a file.
</p>
<pre>(defcustom my-compiler "gcc" "Some documentation")
</pre>
<p>Now in any file you can define local variables in two ways:
</p>
<ul><li>On the very first line, write</li></ul>
<pre>// -*- my-compiler:g++; mode:c++ -*-
</pre>
<ul><li>If you cannot (or do not want to) write this on the first line, you can put it at the end:</li></ul>
<pre>// Local Variables:
// my-compiler: g++
// mode: c++
// End:
</pre>
<p>Note that the beginning characters need to be comments for the current language, that's why here we used two backslashes for C++. For Elisp you would use
</p>
<pre>;; -*- mode:emacs-lisp -*-
</pre>
<p>There is two functions that may help you in defining the variables: <i>add-file-local-variable</i> and <i>add-file-local-variable-prop-line</i>.
</p>
<p>Finally, custom variable are considered insecure by default. If you try to open a file that contains local variable redefining insecure custom variables, Emacs will ask you for confirmation.
</p>
<p>If you know what you are doing, you can declare the variable as secure, thus removing the Emacs prompt for confirmation. You need to specify a predicate that any new value has to verify so that it can be considered safe.
</p>
<pre>(defcustom my-compiler "gcc" "Some documentation" :safe 'stringp)
</pre>
<p>In the previous example, if you attempt to set anything else than a string, Emacs will consider it insecure.
</p>
<h3><span class="mw-headline" id="Custom_colors_and_theme">Custom colors and theme</span></h3>
<p>Colors can be easily customized using the <i>face</i> facility.
</p>
<pre>(set-face-background  'region                 "color-17")
(set-face-foreground  'region                 "white")
(set-face-bold-p      'font-lock-builtin-face t ) 
</pre>
<p>You can have let Emacs tell you the name of the face where the point is. Use the <i>customize-face</i> function for that. The facility will show you how to set colors, bold, underline, etc.
</p>
<p>Emacs in console can handle 256 colors, but you will have to use an appropriate terminal for that. For instance URxvt has support for 256 colors. You can use the <i>list-colors-display</i> for a comprehensive list of supported colors. This is highly terminal-dependent.
</p>
<h3><span class="mw-headline" id="SyncTeX_support">SyncTeX support</span></h3>
<p>Emacs is definitely one of the most powerful LaTeX editor. This is mostly due to the fact you can adapt or create a LaTeX mode to fit your needs best.
</p>
<p>Still, there might be some challenges, like SyncTeX support. First you need to make sure your TeX distribution has it. If you installed TeX Live manually, you may need to install the <i>synctex</i> package.
</p>
<pre># umask 022 &amp;&amp; tlmgr install synctex
</pre>
<p>SyncTeX support is viewer-dependent. Here we will use Zathura as an example, so the code needs to be adapted if you want to use another PDF viewer.
</p>
<pre>(defcustom tex-my-viewer "zathura --fork -s -x \"emacsclient --eval '(progn (switch-to-buffer  (file-name-nondirectory \"'\"'\"%{input}\"'\"'\")) (goto-line %{line}))'\"" 
  "PDF Viewer for TeX documents. You may want to fork the viewer
so that it detects when the same document is launched twice, and
persists when Emacs gets closed.

Simple command:

  zathura --fork

We can use

  emacsclient --eval '(progn (switch-to-buffer  (file-name-nondirectory \"%{input}\")) (goto-line %{line}))'

to reverse-search a pdf using SyncTeX. Note that the quotes and double-quotes matter and must be escaped appropriately."
:safe 'stringp)
</pre>
<p>Here we define our custom variable. If you are using AucTeX or Emacs default LaTeX-mode, you will have to set the viewer accordingly.
</p>
<p>Now open a LaTeX source file with Emacs, compile the document, and launch the viewer. Zathura will spawn. If you press <code>Ctrl+Left click</code> Emacs should place the point at the corresponding position.
</p>
<h3><span class="mw-headline" id="Syntax_highlighting_for_systemd_Files">Syntax highlighting for systemd Files</span></h3>
<p>You can use <a rel="nofollow" class="external text" href="https://github.com/holomorph/systemd-mode">systemd-mode</a>.
</p>
<p>Alternatively, you can simply tell emacs to colour systemd files (services, timer, etc.), by adding this to your init file:
</p>
<pre> (add-to-list 'auto-mode-alist '("\\.service\\'" . conf-unix-mode))
 (add-to-list 'auto-mode-alist '("\\.timer\\'" . conf-unix-mode))
 (add-to-list 'auto-mode-alist '("\\.target\\'" . conf-unix-mode))
 (add-to-list 'auto-mode-alist '("\\.mount\\'" . conf-unix-mode))
 (add-to-list 'auto-mode-alist '("\\.automount\\'" . conf-unix-mode))
 (add-to-list 'auto-mode-alist '("\\.slice\\'" . conf-unix-mode))
 (add-to-list 'auto-mode-alist '("\\.socket\\'" . conf-unix-mode))
 (add-to-list 'auto-mode-alist '("\\.path\\'" . conf-unix-mode))
 (add-to-list 'auto-mode-alist '("\\.netdev\\'" . conf-unix-mode))
 (add-to-list 'auto-mode-alist '("\\.network\\'" . conf-unix-mode))
 (add-to-list 'auto-mode-alist '("\\.link\\'" . conf-unix-mode))
</pre>
<h3><span class="mw-headline" id="Clipboard_support_for_emacs-nox">Clipboard support for emacs-nox</span></h3>
<p>To use the <a href="../en/Xorg.html" title="Xorg">Xorg</a> clipboard in emacs-nox, <a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">install</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xclip">xclip</a></span> and add the following function to <code>~/.emacs</code> <a rel="nofollow" class="external autonumber" href="https://lists.gnu.org/archive/html/help-gnu-emacs/2014-08/msg00189.html">[2]</a>
</p>
<pre>;; use xclip to copy/paste in emacs-nox
(unless window-system
  (when (getenv "DISPLAY")
    (defun xclip-cut-function (text &amp;optional push)
      (with-temp-buffer
	(insert text)
	(call-process-region (point-min) (point-max) "xclip" nil 0 nil "-i" "-selection" "clipboard")))
    (defun xclip-paste-function()
      (let ((xclip-output (shell-command-to-string "xclip -o -selection clipboard")))
	(unless (string= (car kill-ring) xclip-output)
	  xclip-output )))
    (setq interprogram-cut-function 'xclip-cut-function)
    (setq interprogram-paste-function 'xclip-paste-function)
    ))</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> You may also enable terminal mouse support by adding:
<pre>;; xterm mouse support
(require 'mouse)
(xterm-mouse-mode t)</pre>
See also <a rel="nofollow" class="external text" href="http://www.opensource.apple.com/source/emacs/emacs-51/emacs/lisp/mwheel.el">mwheel.el</a><sup title="最后检查状态：domain name not resolved">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-12-24 ⓘ]</sup>.</div>
<h2><span class="mw-headline" id="Packages">Packages</span></h2>
<p>Emacs's functionality can be extended with third-party packages. The built-in package manager <code>package.el</code> is the officially supported way to do this, though there are several other package managers written by members of the Emacs community. <code>package.el</code> relies on the variable <code>package-archives</code> to find packages. By default, this includes the <a rel="nofollow" class="external text" href="https://elpa.gnu.org/">Emacs Lisp Package Archive (ELPA)</a>. <code>M-x list-packages</code> will create a buffer listing all the packages your Emacs knows about. The manual (<code><a rel="nofollow" class="external text" href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Packages.html">(info "(emacs) Packages")</a></code>) contains much more information. 
</p>
<p>Third-party package archives can be added. The most widely used of these is <a rel="nofollow" class="external text" href="https://melpa.org/">MELPA</a>.
</p>
<p>A number of popular extensions are available as packages in the <code>[community]</code> repository, and more still, via the <a href="../en/Arch_User_Repository.html" class="mw-redirect" title="AUR">AUR</a>.  The name of such packages usually have a 'emacs-' prefix (for example, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=emacs-lua-mode">emacs-lua-mode</a></span>), though not always (for example, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/auctex/">auctex</a></span><sup><small>AUR</small></sup>).
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Arch Linux Wiki contributors may be interested in the <a href="../en/Mediawiki-el.html" class="mw-redirect" title="Emacs Mediawiki">Emacs Mediawiki</a> package.</div>
<p>Some packages may require you to make changes to your configuration file in order to activate them so that their features are available during an Emacs session. For example, if you install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/auctex/">auctex</a></span><sup><small>AUR</small></sup>, you will need to add 
</p>
<pre>(load "auctex.el" nil t t)
(load "preview-latex.el" nil t t)</pre>
<p>to your configuration file. Other packages should let you know how to activate them in the commentary section of their source code or in their README.
</p>
<h2>
<span id=".E7.96.91.E9.9A.BE.E6.9D.82.E7.97.87"></span><span class="mw-headline" id="疑难杂症">疑难杂症</span>
</h2>
<h3>
<span id=".E5.BD.A9.E8.89.B2.E8.BE.93.E5.87.BA.E7.9A.84.E9.97.AE.E9.A2.98"></span><span class="mw-headline" id="彩色输出的问题">彩色输出的问题</span>
</h3>
<p>Emacs默认使用原生的转义串来输出颜色。也就是说，它会在要显示颜色的地方显示奇怪的字符。
</p>
<p>在<code>~/.emacs</code>中加入下面的代码解决这个问题：
</p>
<pre>(add-hook 'shell-mode-hook 'ansi-color-for-comint-mode-on)
</pre>
<h3>
<span id=".E8.8F.9C.E5.8D.95.E6.98.BE.E7.A4.BA.E4.B8.BA.E7.A9.BA"></span><span class="mw-headline" id="菜单显示为空">菜单显示为空</span>
</h3>
<p>一些菜单显示为空，这是GNU Emacs 23.1的一个bug（使用GTK toolkit的时候）。好像在Emacs的CVS trunk中已经修复了。对应的<a rel="nofollow" class="external text" href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=550541">Debian bug report</a> 有一个应对措施。
</p>
<h3>
<span id="X_.E7.AA.97.E5.8F.A3.E4.B8.8B.E7.9A.84.E5.AD.97.E7.AC.A6.E6.98.BE.E7.A4.BA.E9.97.AE.E9.A2.98"></span><span class="mw-headline" id="X_窗口下的字符显示问题">X 窗口下的字符显示问题</span>
</h3>
<p>当你使用X窗口启动emacs时，如果发现主窗口中的所有字符都是黑框白块（就像你没有安装正确的字体看到的字符一样），那么你需要安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xorg-fonts-75dpi">xorg-fonts-75dpi</a></span> 或者 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xorg-fonts-100dpi">xorg-fonts-100dpi</a></span> 并且重启X窗口。
</p>
<h3>
<span id=".E5.90.AF.E5.8A.A8.E9.80.9F.E5.BA.A6.E6.85.A2"></span><span class="mw-headline" id="启动速度慢">启动速度慢</span>
</h3>
<p>启动速度慢经常是由下面两种情况引起的。
</p>
<p>要确定是哪种情况，这样打开Emacs：
</p>
<pre>$ emacs -q
</pre>
<p>如果Emacs还是启动很慢，则是<a href="../en/Emacs.html#Incorrect_network_configuration" title="Emacs">错误的网络配置</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" class="mw-redirect" title="ArchWiki:Requests">断开的链接</a>：无效的部分]</sup>。如果不是，则可以确定是<a href="../en/Emacs.html#Init_file_loads_slowly" title="Emacs">.emacs的问题</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" class="mw-redirect" title="ArchWiki:Requests">断开的链接</a>：无效的部分]</sup>。
</p>
<h4>
<span id=".E9.94.99.E8.AF.AF.E7.9A.84.E7.BD.91.E7.BB.9C.E9.85.8D.E7.BD.AE"></span><span class="mw-headline" id="错误的网络配置">错误的网络配置</span>
</h4>
<p>当启动Emacs的时候，一些错误，特别是在/etc/hosts中的，经常会导致5秒以上的延迟。在网络配置指南中查看'<a href="../en/Network_configuration.html#Set_the_hostname" class="mw-redirect" title="Configuring network">set the hostname</a>' 了解更多内容。
</p>
<h4>
<span id=".E5.88.9D.E5.A7.8B.E5.8C.96.E6.96.87.E4.BB.B6.E5.8A.A0.E8.BD.BD.E6.85.A2"></span><span class="mw-headline" id="初始化文件加载慢">初始化文件加载慢</span>
</h4>
<p>一个很简单的方法查找原因是注释掉（比如在行开头使用';'）你的~/.emacs（或者~/.emacs.d/init.el）里面可疑的地方，然后再启动Emacs，看速度是否有改善。记住，使用"require"和"load"会减慢启动速度，特别是用在很大的插件上。一般来说，他们应该用在当目标是Emacs启动的时候就需要或者提供仅仅是一个扩展的"autoloads"。否则，直接使用'autoload'函数。比如，不是这样：
</p>
<pre>(require 'anything)
</pre>
<p>你应该这样:
</p>
<pre>(autoload 'anything "anything" "Select anything" t)
</pre>
<h3>
<span id=".E4.B8.8D.E8.83.BD.E6.89.93.E5.BC.80.E9.85.8D.E7.BD.AE.E6.96.87.E4.BB.B6:_..."></span><span class="mw-headline" id="不能打开配置文件:_...">不能打开配置文件: ...</span>
</h3>
<p>这个错误最常见的原因是'load-path'变量没有包含某些插件的目录。要解决这个问题，在加载插件前，把需要加载的插件目录加入到要搜索的list中：
</p>
<pre> (add-to-list 'load-path "/path/to/directory/")
</pre>
<p>当尝试使用一个插件的包，而这个包又被Emacs加上了非'/usr'的前缀时，load-path需要更新。把下面的代码放到使用这个插件的包的代码的前面：
</p>
<pre> (add-to-list 'load-path "/usr/share/emacs/site-lisp")
</pre>
<p>如果手动编译Emacs，记住默认的前缀是'/usr/local'。
</p>
<h3>
<span id="Dead-accent_keys_problem:_.27.3Cdead-acute.3E_is_undefined.27"></span><span class="mw-headline" id="Dead-accent_keys_problem:_'&lt;dead-acute&gt;_is_undefined'">Dead-accent keys problem: '&lt;dead-acute&gt; is undefined'</span>
</h3>
<p>Searching about this bug on Google, we find this link:
<a rel="nofollow" class="external free" href="https://lists.gnu.org/archive/html/help-gnu-emacs/2009-05/msg00167.html">https://lists.gnu.org/archive/html/help-gnu-emacs/2009-05/msg00167.html</a>
</p>
<p>Explaining the problem: in recent versions of
b72
</p>
<pre>Emacs, the normal way to use accent keys does not work as expected. Trying to accent a word like 'fiancé' will produce the message above.
</pre>
<p>A way to solve it is just put the line above on your startup file, <code>~/.emacs</code>:
</p>
<pre>  (require 'iso-transl)
</pre>
<p>And no, it is not a bug, but a feature of new Emacs versions. Reading the subsequent messages about it on the mail list, we found it (<a rel="nofollow" class="external free" href="https://lists.gnu.org/archive/html/help-gnu-emacs/2009-05/msg00179.html">https://lists.gnu.org/archive/html/help-gnu-emacs/2009-05/msg00179.html</a>):
</p>
<dl><dd><i>It seems that nothing is loaded automatically because there is a choice betwee iso-transl and iso-acc. Both seem to provide an input method with C-x 8 or Alt-&lt;accent&gt; prefix, but what you and I are doing is just pressing a dead key (^, ´, `, ~, ¨) for the accent and then another key to "compose" the accented character. And there is no Alt key used in this! And according to documentation it seems be appropriate for 8-bit encodings, so it should be pretty useless in UTF-8. I reported this bug when it was introduced, but the bug seems to be</i></dd></dl>
<p>a3b
</p>
<pre>classified as a feature ... Maybe it's just because the file is auto-loaded though pretty useless. <i></i>
</pre>
<h3>
<span id="C-M-.25_and_some_other_bindings_do_not_work_in_emacs_nox"></span><span class="mw-headline" id="C-M-%_and_some_other_bindings_do_not_work_in_emacs_nox">C-M-% and some other bindings do not work in emacs nox</span>
</h3>
<p>This is because terminals are more limited than Xorg. Some terminals may handle more bindings than other, though. Two solutions:
</p>
<ul>
<li>either use the graphical version,</li>
<li>or change the binding to a supported one.</li>
</ul>
<p>Example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">.emacs</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">(global-set-key (kbd "C-M-y") 'query-replace-regexp)
</pre>
<h3><span class="mw-headline" id="Emacs_client_gets_stuck_when_switching_back_to_it">Emacs client gets stuck when switching back to it</span></h3>
<p>If you are using Emacs daemon, then you should know that input is blocking. If one Emacs instance is in the minibuffer (after an <b>M-x</b> for instance), then all other instance will wait for it to finish. Press <b>C-g</b> to cancel any input to make sure this Emacs session is not blocking.
</p>
<h3><span class="mw-headline" id="Emacs-nox_output_gets_messy">Emacs-nox output gets messy</span></h3>
<p>When working in a terminal, the color, indentation, or anything related to the output might become crazy. This is (probably?) because Emacs was sent a special character at some point which may conflict with the current terminal.
There is not much to be done but restarting emacs. If someone has a workaround or a more detailed explanation on the issue, feel free to contribute.
</p>
<p>Graphical Emacs does not suffer from this issue.
</p>
<h3>
<span id="Shift_.2B_Arrow_keys_not_working_in_emacs_within_tmux"></span><span class="mw-headline" id="Shift_+_Arrow_keys_not_working_in_emacs_within_tmux">Shift + Arrow keys not working in emacs within tmux</span>
</h3>
<p>First you must enable xterm-keys in your <a href="../en/Tmux.html" title="Tmux">tmux</a> config.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">.tmux.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">setw -g xterm-keys on
</pre>
<p>But, this will break other key combinations. To fix them, put the following in your emacs config.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">.emacs</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">;; handle tmux's xterm-keys
;; put the following line in your ~/.tmux.conf:
;;   setw -g xterm-keys on
(if (getenv "TMUX")
    (progn
      (let ((x 2) (tkey ""))
	(while (&lt;= x 8)
	  ;; shift
	  (if (= x 2)
	      (setq tkey "S-"))
	  ;; alt
	  (if (= x 3)
	      (setq tkey "M-"))
	  ;; alt + shift
	  (if (= x 4)
	      (setq tkey "M-S-"))
	  ;; ctrl
	  (if (= x 5)
	      (setq tkey "C-"))
	  ;; ctrl + shift
	  (if (= x 6)
	      (setq tkey "C-S-"))
	  ;; ctrl + alt
	  (if (= x 7)
	      (setq tkey "C-M-"))
	  ;; ctrl + alt + shift
	  (if (= x 8)
	      (setq tkey "C-M-S-"))

	  ;; arrows
	  (define-key key-translation-map (kbd (format "M-[ 1 ; %d A" x)) (kbd (format "%s&lt;up&gt;" tkey)))
	  (define-key key-translation-map (kbd (format "M-[ 1 ; %d B" x)) (kbd (format "%s&lt;down&gt;" tkey)))
	  (define-key key-translation-map (kbd (format "M-[ 1 ; %d C" x)) (kbd (format "%s&lt;right&gt;" tkey)))
	  (define-key key-translation-map (kbd (format "M-[ 1 ; %d D" x)) (kbd (format "%s&lt;left&gt;" tkey)))
	  ;; home
	  (define-key key-translation-map (kbd (format "M-[ 1 ; %d H" x)) (kbd (format "%s&lt;home&gt;" tkey)))
	  ;; end
	  (define-key key-translation-map (kbd (format "M-[ 1 ; %d F" x)) (kbd (format "%s&lt;end&gt;" tkey)))
	  ;; page up
	  (define-key key-translation-map (kbd (format "M-[ 5 ; %d ~" x)) (kbd (format "%s&lt;prior&gt;" tkey)))
	  ;; page down
	  (define-key key-translation-map (kbd (format "M-[ 6 ; %d ~" x)) (kbd (format "%s&lt;next&gt;" tkey)))
	  ;; insert
	  (define-key key-translation-map (kbd (format "M-[ 2 ; %d ~" x)) (kbd (format "%s&lt;delete&gt;" tkey)))
	  ;; delete
	  (define-key key-translation-map (kbd (format "M-[ 3 ; %d ~" x)) (kbd (format "%s&lt;delete&gt;" tkey)))
	  ;; f1
	  (define-key key-translation-map (kbd (format "M-[ 1 ; %d P" x)) (kbd (format "%s&lt;f1&gt;" tkey)))
	  ;; f2
	  (define-key key-translation-map (kbd (format "M-[ 1 ; %d Q" x)) (kbd (format "%s&lt;f2&gt;" tkey)))
	  ;; f3
	  (define-key key-translation-map (kbd (format "M-[ 1 ; %d R" x)) (kbd (format "%s&lt;f3&gt;" tkey)))
	  ;; f4
	  (define-key key-translation-map (kbd (format "M-[ 1 ; %d S" x)) (kbd (format "%s&lt;f4&gt;" tkey)))
	  ;; f5
	  (define-key key-translation-map (kbd (format "M-[ 15 ; %d ~" x)) (kbd (format "%s&lt;f5&gt;" tkey)))
	  ;; f6
	  (define-key key-translation-map (kbd (format "M-[ 17 ; %d ~" x)) (kbd (format "%s&lt;f6&gt;" tkey)))
	  ;; f7
	  (define-key key-translation-map (kbd (format "M-[ 18 ; %d ~" x)) (kbd (format "%s&lt;f7&gt;" tkey)))
	  ;; f8
	  (define-key key-translation-map (kbd (format "M-[ 19 ; %d ~" x)) (kbd (format "%s&lt;f8&gt;" tkey)))
	  ;; f9
	  (define-key key-translation-map (kbd (format "M-[ 20 ; %d ~" x)) (kbd (format "%s&lt;f9&gt;" tkey)))
	  ;; f10
	  (define-key key-translation-map (kbd (format "M-[ 21 ; %d ~" x)) (kbd (format "%s&lt;f10&gt;" tkey)))
	  ;; f11
	  (define-key key-translation-map (kbd (format "M-[ 23 ; %d ~" x)) (kbd (format "%s&lt;f11&gt;" tkey)))
	  ;; f12
	  (define-key key-translation-map (kbd (format "M-[ 24 ; %d ~" x)) (kbd (format "%s&lt;f12&gt;" tkey)))
	  ;; f13
	  (define-key key-translation-map (kbd (format "M-[ 25 ; %d ~" x)) (kbd (format "%s&lt;f13&gt;" tkey)))
	  ;; f14
	  (define-key key-translation-map (kbd (format "M-[ 26 ; %d ~" x)) (kbd (format "%s&lt;f14&gt;" tkey)))
	  ;; f15
	  (define-key key-translation-map (kbd (format "M-[ 28 ; %d ~" x)) (kbd (format "%s&lt;f15&gt;" tkey)))
	  ;; f16
	  (define-key key-translation-map (kbd (format "M-[ 29 ; %d ~" x)) (kbd (format "%s&lt;f16&gt;" tkey)))
	  ;; f17
	  (define-key key-translation-map (kbd (format "M-[ 31 ; %d ~" x)) (kbd (format "%s&lt;f17&gt;" tkey)))
	  ;; f18
	  (define-key key-translation-map (kbd (format "M-[ 32 ; %d ~" x)) (kbd (format "%s&lt;f18&gt;" tkey)))
	  ;; f19
	  (define-key key-translation-map (kbd (format "M-[ 33 ; %d ~" x)) (kbd (format "%s&lt;f19&gt;" tkey)))
	  ;; f20
	  (define-key key-translation-map (kbd (format "M-[ 34 ; %d ~" x)) (kbd (format "%s&lt;f20&gt;" tkey)))

	  (setq x (+ x 1))
	  ))
      )
  )
</pre>
<h2>
<span id=".E6.9B.BF.E4.BB.A3.E6.96.B9.E6.A1.88"></span><span class="mw-headline" id="替代方案">替代方案</span>
</h2>
<p>这里有几个类似 Emacs的工具。
你也可以尝试在在Arch仓库或在<a rel="nofollow" class="external text" href="https://aur.archlinux.org/">AUR</a>中找相似 Emacs 的工具。
</p>
<ul><li>
<b>mg</b> —  C 语言编写实现轻量级 emacs。注意这软件不支持 UTF-8。</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="http://homepage.boetes.org/software/mg/">http://homepage.boetes.org/software/mg/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mg">mg</a></span>
</dd></dl>
<ul><li>
<b>Zile</b> — "Zile Is Lossy Emacs", 一个轻量级的克隆版本，编写得尽可能类似 Emacs 。</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://www.gnu.org/software/zile/">https://www.gnu.org/software/zile/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=zile">zile</a></span>
</dd></dl>
<ul><li>
<b>uemacs</b> —  由 Linus Torvalds定制的“ Micro-emacs”版本。</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://git.kernel.org/pub/scm/editors/uemacs/uemacs.git">https://git.kernel.org/pub/scm/editors/uemacs/uemacs.git</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/uemacs-git/">uemacs-git</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>remacs</b> — Rust 主打的 emacs。</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/remacs/remacs">https://github.com/remacs/remacs</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/remacs/">remacs</a></span><sup><small>AUR</small></sup>
</dd></dl>
<h2>
<span id=".E8.B5.84.E6.BA.90"></span><span class="mw-headline" id="资源">资源</span>
</h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://www.gnu.org/software/emacs/">GNU Emacs home page</a></li>
<li><a rel="nofollow" class="external text" href="https://www.gnu.org/software/emacs/manual/emacs.html">GNU Emacs manual</a></li>
<li><a rel="nofollow" class="external text" href="https://www.emacswiki.org/cgi-bin/wiki/">Emacs Wiki</a></li>
<li><a rel="nofollow" class="external text" href="https://wikemacs.org/wiki/Main_Page">- a more readable, but less complete Emacs wiki</a></li>
<li><a rel="nofollow" class="external text" href="http://www2.lib.uchicago.edu/keith/tcl-course/emacs-tutorial.html">Useful introduction to Emacs and its shortcuts</a></li>
<li><a rel="nofollow" class="external text" href="https://www.gnu.org/software/emacs/refcards/pdf/refcard.pdf">Official reference card</a></li>
<li>
<a href="../en/EXWM.html" title="EXWM">EXWM</a>, the Emacs X Window Manager</li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../zh-CN/Category:Text_editors.html" title="Category:Text editors (简体中文)">Text editors (简体中文)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
<li><a href="../en/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Emacs_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;oldid=660975">https://wiki.archlinux.org/index.php?title=Emacs_(简体中文)&amp;oldid=660975</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 16 April 2021, at 21:47.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
