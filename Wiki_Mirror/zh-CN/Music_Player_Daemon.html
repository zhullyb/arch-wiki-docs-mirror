<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Music Player Daemon (简体中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Music_Player_Daemon_简体中文 rootpage-Music_Player_Daemon_简体中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Music Player Daemon (简体中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>相关文章</p>
<ul>
<li><a href="/title/MPD/Tips_and_Tricks" class="mw-redirect" title="MPD/Tips and Tricks">MPD/Tips and Tricks</a></li>
<li><a href="/title/MPD/Troubleshooting" class="mw-redirect" title="MPD/Troubleshooting">MPD/Troubleshooting</a></li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>翻译状态：</strong>本文是 <a href="/title/Music_Player_Daemon" title="Music Player Daemon">Music_Player_Daemon</a> 的<a href="/title/ArchWiki:Translation_Team_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)" title="ArchWiki:Translation Team (简体中文)">翻译</a>。上次翻译日期：2015-01-17。如果英文版本有所<a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Music_Player_Daemon&amp;diff=0&amp;oldid=352912">更改</a>，则您可以帮助同步翻译。</div>
<p><a rel="nofollow" class="external text" href="https://www.musicpd.org/">MPD</a>（Music Player Daemon，音乐播放器守护进程）是一个服务器-客户端架构的音频播放器。占用极少资源的同时有着播放音频、管理播放列表和音乐等功能。与它进行交互需要一个单独的 <a href="#%E5%AE%A2%E6%88%B7%E7%AB%AF">客户端</a>。
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#%E5%AE%89%E8%A3%85"><span class="tocnumber">1</span> <span class="toctext">安装</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#%E8%AE%BE%E7%BD%AE"><span class="tocnumber">2</span> <span class="toctext">设置</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#%E5%8D%95%E7%94%A8%E6%88%B7%E9%85%8D%E7%BD%AE"><span class="tocnumber">2.1</span> <span class="toctext">单用户配置</span></a></li>
<li class="toclevel-2 tocsection-4">
<a href="#%E5%85%A8%E7%B3%BB%E7%BB%9F%E8%8C%83%E5%9B%B4%E9%85%8D%E7%BD%AE"><span class="tocnumber">2.2</span> <span class="toctext">全系统范围配置</span></a>
<ul>
<li class="toclevel-3 tocsection-5"><a href="#%E9%9F%B3%E4%B9%90%E7%9B%AE%E5%BD%95"><span class="tocnumber">2.2.1</span> <span class="toctext">音乐目录</span></a></li>
<li class="toclevel-3 tocsection-6">
<a href="#%E5%90%AF%E5%8A%A8_MPD"><span class="tocnumber">2.2.2</span> <span class="toctext">启动 MPD</span></a>
<ul>
<li class="toclevel-4 tocsection-7"><a href="#%E5%A5%97%E6%8E%A5%E5%AD%97%E5%90%AF%E5%8A%A8"><span class="tocnumber">2.2.2.1</span> <span class="toctext">套接字启动</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-8"><a href="#%E9%85%8D%E7%BD%AE%E9%9F%B3%E9%A2%91"><span class="tocnumber">2.2.3</span> <span class="toctext">配置音频</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="#%E6%9B%B4%E6%94%B9%E7%94%A8%E6%88%B7"><span class="tocnumber">2.2.4</span> <span class="toctext">更改用户</span></a></li>
<li class="toclevel-3 tocsection-10"><a href="#MPD_%E5%90%AF%E5%8A%A8%E6%97%B6%E9%97%B4%E8%BD%B4"><span class="tocnumber">2.2.5</span> <span class="toctext">MPD 启动时间轴</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-11">
<a href="#%E6%9C%AC%E5%9C%B0%E9%85%8D%E7%BD%AE%EF%BC%88%E5%8D%95%E7%94%A8%E6%88%B7%EF%BC%89"><span class="tocnumber">2.3</span> <span class="toctext">本地配置（单用户）</span></a>
<ul>
<li class="toclevel-3 tocsection-12"><a href="#%E5%9C%A8_tty_%E7%99%BB%E9%99%86%E6%97%B6%E8%87%AA%E5%90%AF%E5%8A%A8"><span class="tocnumber">2.3.1</span> <span class="toctext">在 tty 登陆时自启动</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#%E5%9C%A8_X_%E4%B8%8B%E8%87%AA%E5%90%AF%E5%8A%A8"><span class="tocnumber">2.3.2</span> <span class="toctext">在 X 下自启动</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#%E9%80%9A%E8%BF%87_systemd_%E8%87%AA%E5%90%AF%E5%8A%A8"><span class="tocnumber">2.3.3</span> <span class="toctext">通过 systemd 自启动</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#%E8%84%9A%E6%9C%AC%E9%85%8D%E7%BD%AE"><span class="tocnumber">2.3.4</span> <span class="toctext">脚本配置</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-16"><a href="#%E5%A4%9A_mpd_%E5%AE%9E%E4%BE%8B%E8%AE%BE%E7%BD%AE"><span class="tocnumber">2.4</span> <span class="toctext">多 mpd 实例设置</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-17">
<a href="#%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="tocnumber">3</span> <span class="toctext">客户端</span></a>
<ul>
<li class="toclevel-2 tocsection-18"><a href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%8B"><span class="tocnumber">3.1</span> <span class="toctext">命令行下</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#%E5%9B%BE%E5%BD%A2%E7%95%8C%E9%9D%A2%E4%B8%8B"><span class="tocnumber">3.2</span> <span class="toctext">图形界面下</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Web%E7%95%8C%E9%9D%A2"><span class="tocnumber">3.3</span> <span class="toctext">Web界面</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-21"><a href="#%E5%8F%82%E9%98%85"><span class="tocnumber">4</span> <span class="toctext">参阅</span></a></li>
</ul>
</div>

<h2>
<span id=".E5.AE.89.E8.A3.85"></span><span class="mw-headline" id="安装">安装</span>
</h2>
<p>安装 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mpd">mpd</a></span> 软件包，或者开发版本 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/mpd-git/">mpd-git</a></span><sup><small>AUR</small></sup>。
</p>
<h2>
<span id=".E8.AE.BE.E7.BD.AE"></span><span class="mw-headline" id="设置">设置</span>
</h2>
<p>MPD 可以以 <a href="#%E5%8D%95%E7%94%A8%E6%88%B7%E9%85%8D%E7%BD%AE">#单用户配置</a>、<a href="#%E5%85%A8%E7%B3%BB%E7%BB%9F%E8%8C%83%E5%9B%B4%E9%85%8D%E7%BD%AE">#全系统范围配置</a> （即配置应用给所有用户）模式运行，也可以在 <a href="#MPD_%E5%A4%9A%E5%AE%9E%E4%BE%8B%E8%BF%90%E8%A1%8C%E8%AE%BE%E7%BD%AE">#MPD 多实例运行设置</a><sup>[<a href="/title/ArchWiki:Requests#Broken_section_links" class="mw-redirect" title="ArchWiki:Requests">断开的链接</a>：无效的部分]</sup> 下同时运行多个实例。将 MPD 设置成哪种方式运行取决于使用它的方式：例如，单用户配置更容易设置，也可能更适合桌面系统环境。全系统范围配置则更适合多用户共享单个 MPD 实例的常在线音频服务器。
</p>
<p>为了让 MPD 能够播放音频，须要先设置好 <a href="/title/Advanced_Linux_Sound_Architecture_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)" title="Advanced Linux Sound Architecture (简体中文)">ALSA</a>  (可选 <a href="/title/PulseAudio_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)" title="PulseAudio (简体中文)">PulseAudio</a>)，并让它们正常工作。下文的 <a href="#%E9%9F%B3%E9%A2%91%E9%85%8D%E7%BD%AE">#音频配置</a><sup>[<a href="/title/ArchWiki:Requests#Broken_section_links" class="mw-redirect" title="ArchWiki:Requests">断开的链接</a>：无效的部分]</sup> 小节会说明 <i>ALSA</i> 或者 <i>PulseAudio</i> 所需的参数。
</p>
<p>MPD 由 <span class="plainlinks archwiki-template-man" title="$ man 5 mpd.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/mpd.conf.5">mpd.conf(5)</a></span> 文件进行配置，运行方式不同（单用户或全系统范围），文件的位置也不同。简单来说，有以下两个常用位置：
</p>
<ol>
<li>
<code>~/.config/mpd/mpd.conf</code> —— 单用户配置模式，这是第一个会搜索的位置，</li>
<li>
<code>/etc/mpd.conf</code> —— 全系统范围配置。</li>
</ol>
<p>下面是常用的配置选项:
</p>
<ul>
<li>
<code>pid_file</code> - MPD 存储进程 ID（PID）的文件</li>
<li>
<code>db_file</code> - 音乐数据库</li>
<li>
<code>state_file</code> - 记录 MPD 当前状态</li>
<li>
<code>playlist_directory</code> - 播放列表存储文件夹</li>
<li>
<code>music_directory</code> - MPD 在这个文件夹中扫描音乐</li>
<li>
<code>sticker_file</code> - 标签数据库</li>
</ul>
<h3>
<span id=".E5.8D.95.E7.94.A8.E6.88.B7.E9.85.8D.E7.BD.AE"></span><span class="mw-headline" id="单用户配置">单用户配置</span>
</h3>
<p>MPD 可配置为单用户使用。以普通用户运行它有几点好处：
</p>
<ul>
<li>在一个文件夹  <code>~/.config/mpd/</code> 下 （或任何其他在 <code>$HOME</code> 家目录下的文件夹）重新部署（管理）所有 MPD 配置文件。</li>
<li>避免不可预见的文件夹和文件权限错误。</li>
</ul>
<h3>
<span id=".E5.85.A8.E7.B3.BB.E7.BB.9F.E8.8C.83.E5.9B.B4.E9.85.8D.E7.BD.AE"></span><span class="mw-headline" id="全系统范围配置">全系统范围配置</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>警告：</strong> 使用 PulseAudio 并且将 mpd 设置为全局配置的用户可能需要 <a href="/title/Music_Player_Daemon/Tips_and_tricks#Local_(with_separate_mpd_user)" title="Music Player Daemon/Tips and tricks">一个小技巧</a> 来作为自己的用户运行 mpd！</div>
<p>The default /etc/mpd.conf keeps the setup in /var/lib/mpd which is assigned to user as well as primary group mpd.
</p>
<h4>
<span id=".E9.9F.B3.E4.B9.90.E7.9B.AE.E5.BD.95"></span><span class="mw-headline" id="音乐目录">音乐目录</span>
</h4>
<p>音乐目录需要通过 <code>/etc/mpd.conf</code> 文件中的 <code>music_directory</code> 参数来设置：
</p>
<pre>music_directory "/path/to/music"
</pre>
<p>MPD需要拥有 <b>所有</b> 音乐收藏父目录的 <code>+x</code> 权限并且可以读包含音乐的目录，这经常与用户的音乐目录的默认设置冲突。
</p>
<p>有很多方法可以解决这个问题，下面是其中不错的一个
</p>
<ul>
<li><a href="#%E6%9C%AC%E5%9C%B0%E9%85%8D%E7%BD%AE%EF%BC%88%E5%8D%95%E7%94%A8%E6%88%B7%EF%BC%89">将 MPD 作为用户运行</a></li>
<li>将 mpd 用户添加到登录组，并授予用户目录组权限。</li>
</ul>
<pre># gpasswd -a mpd &lt;your login group&gt;
$ chmod 710 /home/&lt;your home dir&gt;
</pre>
<ul><li>采取以下方式将音乐集合放到不同的路径</li></ul>
<p>（a）完全移动
（b）绑定挂载
（c）使用 <a href="/title/Btrfs#Subvolumes" title="Btrfs">Btrfs 子卷</a>（需要将这一永久改变写入 <code>/etc/fstab</code> 中）。可以使用 <a href="/title/Access_Control_Lists" title="Access Control Lists">Access Control Lists</a> 调整备用目录的权限。
</p>
<p>MPD 配置必须仅包含一个目录，如果音乐集包含在多个目录下，那么在 <code>/var/lib/mpd</code> 的主音乐目录下创建符号链接。记得为被链接的目录设置相应的权限。
</p>
<h4>
<span id=".E5.90.AF.E5.8A.A8_MPD"></span><span class="mw-headline" id="启动_MPD">启动 MPD</span>
</h4>
<p>可以使用 <a href="/title/Systemd_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E4%BD%BF%E7%94%A8%E5%8D%95%E5%85%83" title="Systemd (简体中文)">systemd</a> 来控制 MPD 服务，即<code>mpd.service</code>，第一次启动 MPD 时会花费一些时间，因为 MPD 会扫描音乐目录。
</p>
<p>安装一个客户端程序 (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ncmpc">ncmpc</a></span> 是一个轻便易用的客户端程序)，享受音乐吧！
</p>
<h5>
<span id=".E5.A5.97.E6.8E.A5.E5.AD.97.E5.90.AF.E5.8A.A8"></span><span class="mw-headline" id="套接字启动">套接字启动</span>
</h5>
<p>如果启用了 <code>mpd.socket</code>，但没有启用 <code>mpd.service</code>，systemd 不会立刻启动 mpd，而是会监听相应的套接字。当一个 mpd 客户端试图连接其中的套接字，systemd 将启动 <code>mpd.service</code>，
然后透明地将端口的控制权交给 mpd 进程。
</p>
<p>如果你希望监听不同的 UNIX 套接字或者网络端口（甚至是每个类型的多个套接字），或者你完全不希望监听网络端口。你需要 <b>添加/编辑/删除</b> <code>mpd.socket</code> 文件中 <code>[Socket]</code> 章节下的 <code>"ListenStream="</code> 行，<b>并且</b>更改 <code>/etc/mpd.conf</code> 文件中的相应行（具体查看 <span class="plainlinks archwiki-template-man" title="$ man 5 mpd.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/mpd.conf.5">mpd.conf(5)</a></span>）。
</p>
<h4>
<span id=".E9.85.8D.E7.BD.AE.E9.9F.B3.E9.A2.91"></span><span class="mw-headline" id="配置音频">配置音频</span>
</h4>
<p><a href="/title/ALSA" class="mw-redirect" title="ALSA">ALSA</a> 用户需要做以下设备定义，使用声卡名字或者 pcm (aplay --list-pcms) 代替下面的 <code>My Sound Card</code> 字段。
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/mpd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">audio_output {
        type            "alsa"
        name            "My Sound Card"
        mixer_type      "software"      # optional
}</pre>
<p><code>mixer_type "software"</code> 选项告诉 'mpd' 使用自己的独立软件音量控制。
</p>
<p><a href="/title/PulseAudio" title="PulseAudio">PulseAudio</a> 用户需要做以下修改：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/mpd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">audio_output {
        type            "pulse"
        name            "pulse audio"
}</pre>
<p>PulseAudio 支持多种高级操作。例如：将音频传输到不同的机器。MPD 的高级设置参考 <a rel="nofollow" class="external text" href="https://mpd.fandom.com/wiki/PulseAudio">Music Player Daemon Community Wiki</a>。
</p>
<h4>
<span id=".E6.9B.B4.E6.94.B9.E7.94.A8.E6.88.B7"></span><span class="mw-headline" id="更改用户">更改用户</span>
</h4>
<p>更改用户组，可能会导致 MPD 运行出现以下类似错误： <code>output: Failed to open "My ALSA Device"</code>， <code>[alsa]: Failed to open ALSA device "default": No such file or directory</code> ，<code>player_thread: problems opening audio device while playing "Song Name.mp3"</code>
</p>
<p>这是因为 MPD 用户需要是 <i>audio</i> 组的成员来访问 <code>/dev/snd/</code> 下的音频设备。将 MPD 用户添加到 <i>audio</i> 组里来解决这个问题。
</p>
<pre># gpasswd -a <b>mpd</b> audio
</pre>
<h4>
<span id="MPD_.E5.90.AF.E5.8A.A8.E6.97.B6.E9.97.B4.E8.BD.B4"></span><span class="mw-headline" id="MPD_启动时间轴">MPD 启动时间轴</span>
</h4>
<p>下面列出的是 MPD 正常启动的时间轴，用以描述何时 MPD 放弃超级用户权限，而使用配置中用户组的权限。
</p>
<ol>
<li>以 root 身份通过 systemd 启动 MPD 后，MPD 首先读取 <code>/etc/mpd.conf</code> 文件。</li>
<li>然后 MPD 读取 <code>/etc/mpd.conf</code> 中的用户变量，从 root 切换到该用户。</li>
<li>最后 MPD 读取 <code>/etc/mpd.conf</code> 中的设置内容，根据内容配置自己。</li>
</ol>
<p>注意，MPD 会改变运行用户，从 root 切换到 <code>/etc/mpd.conf</code> 文件中命名的一个用户。这样，在配置文件中使用 <code>~</code> 会正确的指向 home 用户目录，而不是 root 目录。将所有的 <code>~</code> 修改成 <code>/home/username</code> 来避免在 MPD 行为这一方面上的困惑很有必要。
</p>
<h3>
<span id=".E6.9C.AC.E5.9C.B0.E9.85.8D.E7.BD.AE.EF.BC.88.E5.8D.95.E7.94.A8.E6.88.B7.EF.BC.89"></span><span class="mw-headline" id="本地配置（单用户）">本地配置（单用户）</span>
</h3>
<p>好的做法是为所有需要的文件和播放列表创建一个单独目录。该目录可以是任何一个你可以读写的目录。例如： <code>~/.config/mpd/</code> 或者 <code>~/.mpd/</code>。本章节假设该目录是 <code>~/.config/mpd/</code>，其对应 <code>$XDG_CONFIG_HOME</code> （ <a rel="nofollow" class="external text" href="https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html">XDG Base Directory Specification</a> 的部分）的缺省值 。
</p>
<p>MPD 首先搜索配置文件 <code>$XDG_CONFIG_HOME/mpd/mpd.conf</code>，其次搜索 <code>~/.mpdconf</code>。还可以通过命令行参数指定其他路径。
</p>
<p>将示例配置文件复制到所需的位置。例如：
</p>
<pre>$ cp /usr/share/doc/mpd/mpdconf.example ~/.config/mpd/mpd.conf
</pre>
<p>编辑 <code>~/.config/mpd/mpd.conf</code> 并且指定所需文件：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/mpd/mpd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Required files
db_file            "~/.config/mpd/database"
log_file           "~/.config/mpd/log"

# Optional
music_directory    "~/Music"
playlist_directory "~/.config/mpd/playlists"
pid_file           "~/.config/mpd/pid"
state_file         "~/.config/mpd/state"
sticker_file       "~/.config/mpd/sticker.sql"
</pre>
<p>创建所有上述配置中提及的文件和目录：
</p>
<pre>$ mkdir ~/.config/mpd/playlists
$ touch ~/.config/mpd/{database,log,pid,state,sticker.sql}
</pre>
<p>当配置了所需文件的路径后，就可以启动 MPD 了。要指定配置文件的自定义位置，运行：
</p>
<pre>$ mpd <i>config_file</i>
</pre>
<h4>
<span id=".E5.9C.A8_tty_.E7.99.BB.E9.99.86.E6.97.B6.E8.87.AA.E5.90.AF.E5.8A.A8"></span><span class="mw-headline" id="在_tty_登陆时自启动">在 tty 登陆时自启动</span>
</h4>
<p>要使 MPD 在登陆时启动，在 <code>~/.profile</code> （或者其他的 <a href="/title/Autostarting#Shells" title="Autostarting">自启动文件</a><sup>[<a href="/title/ArchWiki:Requests#Broken_section_links" class="mw-redirect" title="ArchWiki:Requests">断开的链接</a>：无效的部分]</sup> ）中添加以下命令：
</p>
<pre># MPD daemon start (if no other user instance exists)
[ ! -s ~/.config/mpd/pid ] &amp;&amp; mpd
</pre>
<h4>
<span id=".E5.9C.A8_X_.E4.B8.8B.E8.87.AA.E5.90.AF.E5.8A.A8"></span><span class="mw-headline" id="在_X_下自启动">在 X 下自启动</span>
</h4>
<p>如果你安装了<a href="/title/Desktop_environment_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)" title="Desktop environment (简体中文)">桌面环境</a>，编辑下面的文件并将其放到 <code>~/.config/autostart/</code> ：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/autostart/mpd.desktop</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Desktop Entry]
Encoding=UTF-8
Type=Application
Name=Music Player Daemon
Comment=Server for playing audio files
Exec=mpd
StartupNotify=false
Terminal=false
Hidden=false
X-GNOME-Autostart-enabled=false
</pre>
<p>如果没有使用桌面环境，将 <a href="#%E5%9C%A8_tty_%E7%99%BB%E9%99%86%E6%97%B6%E8%87%AA%E5%90%AF%E5%8A%A8">#在 tty 登陆时自启动</a> 中的命令加入到 <a href="/title/Autostarting#Graphical" title="Autostarting">自启动文件</a><sup>[<a href="/title/ArchWiki:Requests#Broken_section_links" class="mw-redirect" title="ArchWiki:Requests">断开的链接</a>：无效的部分]</sup>。
</p>
<h4>
<span id=".E9.80.9A.E8.BF.87_systemd_.E8.87.AA.E5.90.AF.E5.8A.A8"></span><span class="mw-headline" id="通过_systemd_自启动">通过 systemd 自启动</span>
</h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 本章节假设 systemd 用户会话管理器已经运行。具体信息查看 <a href="/title/Systemd/User_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)" class="mw-redirect" title="Systemd/User (简体中文)">systemd/User (简体中文)</a>。</div>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mpd">mpd</a></span> 提供了用户服务文件 <code>/usr/lib/systemd/user/mpd.service</code>。配置文件预计存在 <code>~/.mpdconf</code> 或者 <code>~/.config/mpd/mpd.conf</code> 中，如果想要使用不同的路径，参考 <a href="/title/Systemd_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E4%BF%AE%E6%94%B9%E7%8E%B0%E5%AD%98%E5%8D%95%E5%85%83%E6%96%87%E4%BB%B6" title="Systemd (简体中文)">systemd (简体中文)#修改现存单元文件</a>。进程不会以 root 启动，所以在 MPD 配置文件中不能使用 <code>user</code> 和 <code>group</code> 变量，进程已经拥有用户权限，因此没有必要进一步更改他们。
</p>
<p>所有你需要做的是启用和启动 <code>mpd</code> <a href="/title/Systemd/User_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)" class="mw-redirect" title="Systemd/User (简体中文)">用户服务</a>。
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 
<ul>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mpd">mpd</a></span> 也提供了系统服务文件 <code>/usr/lib/systemd/system/mpd.service</code>，但是当以 root 身份启动进程时，进程不会读取用户配置文件而是会回落到 <code>/etc/mpd.conf</code>。<a href="#%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE">全局配置</a><sup>[<a href="/title/ArchWiki:Requests#Broken_section_links" class="mw-redirect" title="ArchWiki:Requests">断开的链接</a>：无效的部分]</sup> 中已经介绍过了。</li>
<li>确保停用任何以前用过的启动 mpd 的方法。</li>
</ul>
</div>
<h4>
<span id=".E8.84.9A.E6.9C.AC.E9.85.8D.E7.BD.AE"></span><span class="mw-headline" id="脚本配置">脚本配置</span>
</h4>
<p>Rasi 创建了一个脚本，该脚本可以创建合适的目录结构、配置文件，并且提示用户音乐目录的位置。可以在 <a rel="nofollow" class="external text" href="https://web.archive.org/web/20150918131634/http://dl.53280.de/mpdsetup.sh">这里</a> 下载。
</p>
<h3>
<span id=".E5.A4.9A_mpd_.E5.AE.9E.E4.BE.8B.E8.AE.BE.E7.BD.AE"></span><span class="mw-headline" id="多_mpd_实例设置">多 mpd 实例设置</span>
</h3>
<p><b>在运行 icecast 服务器中很有用</b>
</p>
<p>如果第二个 mpd （例如：通过网络使用 icecast 输出来分享音乐）使用和上一个 mpd 相同的音乐和播放列表，只需要复制上一个的配置文件来创建一个新文件（例如：<code>/home/username/.mpd/config-icecast</code>），并且更改 log_file, error_file, pid_file 和 state_file 的参数（例如：<code>mpd-icecast.log</code>, <code>mpd-icecast.error</code> 等等），使用相同的音乐目录路径和播放列表目录将确保第二个 mpd 和第一个 mpd 使用相同的音乐收藏。在第一个 mpd 守护进程下创建和编辑播放列表也会影响第二个守护进程。不需要为第二个守护进程创建相同的播放列表。以相同的方式从上述 <code>~/.xinitrc</code> 调用第二个守护进程。（仅仅需要确保使用不同的端口号，这样不会和第一个 mpd 守护进程冲突）。
</p>
<p><b>更好的方法：卫星模式设置</b>
</p>
<p>上述的方法在工作过程中，当两个 mpd 实例写相同的数据库文件时，在理论上可能导致数据库问题。MPD 有一种卫星模式，该模式下，一个实例可以从另一个已经运行的 mpd 实例上接受数据库。
</p>
<p>在 config-icecast 中添加以下代码，host 和 port 反映了主要 mpd 服务器的主机和端口。
</p>
<pre>   database {
   plugin "proxy"
   host "localhost"
   port "6600"
   }
</pre>
<h2>
<span id=".E5.AE.A2.E6.88.B7.E7.AB.AF"></span><span class="mw-headline" id="客户端">客户端</span>
</h2>
<p>需要安装独立客户端才能控制mpd。 常用的有这些：
</p>
<h3>
<span id=".E5.91.BD.E4.BB.A4.E8.A1.8C.E4.B8.8B"></span><span class="mw-headline" id="命令行下">命令行下</span>
</h3>
<ul><li>
<b>mpc</b> — 简单的基于KISS原则的客户端。 拥有所有的基本功能。</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://mpd.fandom.com/wiki/Client:Mpc">https://mpd.fandom.com/wiki/Client:Mpc</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mpc">mpc</a></span>
</dd></dl>
<ul><li>
<b>ncmpc</b> — 一个使用NCursers的客户端。</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://mpd.fandom.com/wiki/Client:Ncmpc">https://mpd.fandom.com/wiki/Client:Ncmpc</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ncmpc">ncmpc</a></span>
</dd></dl>
<ul><li>
<b><a href="/title/Ncmpcpp" title="Ncmpcpp">ncmpcpp</a></b> — 差不多是完全克隆ncmpc的客户端， 但是有一些用C++写成的新功能(tag editor, search engine)</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://rybczak.net/ncmpcpp/">https://rybczak.net/ncmpcpp/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ncmpcpp">ncmpcpp</a></span>
</dd></dl>
<ul><li>
<b>pms</b> — Highly configurable and accessible ncurses client</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="http://pms.sourceforge.net/">http://pms.sourceforge.net/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pmus/">pmus</a></span><sup><small>AUR</small></sup><sup>[<a href="/title/Help:Procedures#Fix_broken_package_links" title="Help:Procedures">断开的链接</a>：package not found]</sup>
</dd></dl>
<ul><li>
<b>vimpc</b> — 基于ncurses的MPD客户端， 使用类似vi的快捷键</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://sourceforge.net/projects/vimpc/">https://sourceforge.net/projects/vimpc/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/vimpc/">vimpc</a></span><sup><small>AUR</small></sup><sup>[<a href="/title/Help:Procedures#Fix_broken_package_links" title="Help:Procedures">断开的链接</a>：package not found]</sup>
</dd></dl>
<h3>
<span id=".E5.9B.BE.E5.BD.A2.E7.95.8C.E9.9D.A2.E4.B8.8B"></span><span class="mw-headline" id="图形界面下">图形界面下</span>
</h3>
<ul><li>
<b>Ario</b> — 一个功能非常丰富的 GTK2 界面的客户端，灵感来自于 Rhythmbox。</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="http://ario-player.sourceforge.net/">http://ario-player.sourceforge.net/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ario">ario</a></span>
</dd></dl>
<ul><li>
<b>QmpdClient</b> — 用 Qt 4.x 写的图形客户端。</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://bitcheese.net/QMPDClient">https://bitcheese.net/QMPDClient</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/qmpdclient/">qmpdclient</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>Sonata</b> — 一个用 Python 写的客户端，非常优雅。</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://www.nongnu.org/sonata/">https://www.nongnu.org/sonata/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/sonata/">sonata</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>gmpc</b> — GTK2 写的 MPD 前端。被设计为轻量且易用，同时也对所有的 MPD 的特性提供完全访问。为用户提供几种不同的方法来浏览音乐。可以通过很多可获得的插件来扩展。</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="http://gmpclient.org/">http://gmpclient.org/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gmpc/">gmpc</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>Cantata</b> — 多功能的 Qt4, Qt5 或者 KDE4 客户端，具有很多可配置的接口。</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://code.google.com/p/cantata/">https://code.google.com/p/cantata/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=cantata">cantata</a></span>
</dd></dl>
<h3>
<span id="Web.E7.95.8C.E9.9D.A2"></span><span class="mw-headline" id="Web界面">Web界面</span>
</h3>
<ul><li>
<b>Patchfork</b> — 用 PHP 和 Ajax 写的 web 客户端</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://web.archive.org/web/20170102164901/http://mpd.wikia.com/wiki/Client:Pitchfork">https://web.archive.org/web/20170102164901/http://mpd.wikia.com/wiki/Client:Pitchfork</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/patchfork-git/">patchfork-git</a></span><sup><small>AUR</small></sup><sup>[<a href="/title/Help:Procedures#Fix_broken_package_links" title="Help:Procedures">断开的链接</a>：package not found]</sup>.</dd></dl>
<p>在 <a rel="nofollow" class="external text" href="https://mpd.fandom.com/wiki/Clients">mpd wiki</a> 上可以查看到客户端列表。
</p>
<h2>
<span id=".E5.8F.82.E9.98.85"></span><span class="mw-headline" id="参阅">参阅</span>
</h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://mpd.fandom.com/wiki/Clients">Sorted List of MPD Clients</a></li>
<li><a rel="nofollow" class="external text" href="https://forum.musicpd.org/">MPD forum</a></li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="/title/Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="/title/Category:Music_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)" title="Category:Music (简体中文)">Music (简体中文)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="/title/Category:Pages_with_broken_section_links" title="Category:Pages with broken section links">Pages with broken section links</a></li>
<li><a href="/title/Category:Pages_with_broken_package_links" title="Category:Pages with broken package links">Pages with broken package links</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Music_Player_Daemon_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;oldid=667409">https://wiki.archlinux.org/index.php?title=Music_Player_Daemon_(简体中文)&amp;oldid=667409</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 2 May 2021, at 18:24.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="/title/ArchWiki:Privacy_policy" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="/title/ArchWiki:About" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="/title/ArchWiki:General_disclaimer" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
