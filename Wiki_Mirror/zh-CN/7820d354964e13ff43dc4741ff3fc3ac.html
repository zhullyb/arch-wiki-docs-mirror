<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Python (简体中文)/Virtual environment (简体中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Python_简体中文_Virtual_environment_简体中文 rootpage-Python_简体中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Python (简体中文)/Virtual environment (简体中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"><span class="subpages">&lt; <a href="../zh-CN/Python.html" title="Python (简体中文)">Python (简体中文)</a></span></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>翻译状态：</strong>本文是 <a href="../en/Python/Virtual_environment.html" class="mw-redirect" title="Python/Virtualenv">Python/Virtualenv</a> 的<a href="../zh-CN/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (简体中文)">翻译</a>。上次翻译日期：2017-10-19。如果英文版本有所<a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Python/Virtualenv&amp;diff=0&amp;oldid=492893">更改</a>，则您可以帮助同步翻译。</div>
<p><i>virtualenv</i> 是为 <a href="../en/Python.html" title="Python">Python</a> 程序建立独立环境的工具，可以安装本地软件包，建立工作环境并在其中执行 <a href="../en/Python.html" title="Python">Python</a>。
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#%E6%A6%82%E8%A7%88"><span class="tocnumber">1</span> <span class="toctext">概览</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#%E5%AE%89%E8%A3%85"><span class="tocnumber">2</span> <span class="toctext">安装</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#%E4%BD%BF%E7%94%A8"><span class="tocnumber">3</span> <span class="toctext">使用</span></a>
<ul>
<li class="toclevel-2 tocsection-4">
<a href="#%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83"><span class="tocnumber">3.1</span> <span class="toctext">创建虚拟环境</span></a>
<ul>
<li class="toclevel-3 tocsection-5"><a href="#venv"><span class="tocnumber">3.1.1</span> <span class="toctext">venv</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#virtualenv"><span class="tocnumber">3.1.2</span> <span class="toctext">virtualenv</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-7"><a href="#%E6%BF%80%E6%B4%BB"><span class="tocnumber">3.2</span> <span class="toctext">激活</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="#Python_%E7%89%88%E6%9C%AC"><span class="tocnumber">4</span> <span class="toctext">Python 版本</span></a></li>
<li class="toclevel-1 tocsection-9">
<a href="#virtualenvwrapper"><span class="tocnumber">5</span> <span class="toctext">virtualenvwrapper</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#Installation"><span class="tocnumber">5.1</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Basic_usage"><span class="tocnumber">5.2</span> <span class="toctext">Basic usage</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="#See_also"><span class="tocnumber">6</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2>
<span id=".E6.A6.82.E8.A7.88"></span><span class="mw-headline" id="概览">概览</span>
</h2>
<p>虚拟环境是一个包含二进制程序和 shell 脚本的目录。二进制程序包含执行脚本的 <i>python</i> 和安装其它模块的 <i>pip</i>。脚本包括激活环境的脚本，<a href="../en/Bash.html" title="Bash">bash</a>, csh 和<a href="../en/Fish.html" title="Fish">fish</a> 个有一个。这个虚拟环境模拟了一个完整的 <a href="../en/Python.html" title="Python">Python</a> 执行环境和需要的模块，将程序运行的环境与系统其它部分隔离开来。
</p>
<h2>
<span id=".E5.AE.89.E8.A3.85"></span><span class="mw-headline" id="安装">安装</span>
</h2>
<p><a href="../en/Python.html" title="Python">Python</a> 从 3.3 开始包含了 <i>venv</i> 程序，无需单独安装。 如果使用的是老版本的 Python, 需要额外<a href="../zh-CN/Help:Reading.html#%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E5%8C%85" class="mw-redirect" title="安装">安装</a> <i>virtualenv</i>。
</p>
<ul>
<li>Python 3.3+: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=python">python</a></span>
</li>
<li>Python 3: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=python-virtualenv">python-virtualenv</a></span>
</li>
<li>Python 2: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=python2-virtualenv">python2-virtualenv</a></span>
</li>
</ul>
<h2>
<span id=".E4.BD.BF.E7.94.A8"></span><span class="mw-headline" id="使用">使用</span>
</h2>
<p>不同工具的使用方式基本相同。
</p>
<h3>
<span id=".E5.88.9B.E5.BB.BA.E8.99.9A.E6.8B.9F.E7.8E.AF.E5.A2.83"></span><span class="mw-headline" id="创建虚拟环境">创建虚拟环境</span>
</h3>
<p>使用<i>venv</i> 或 <i>virtualenv</i> 在项目目录创建虚拟环境，请将 venv 目录加入版本控制系统，这样只要执行 <code>pip freeze</code> 就可以重建虚拟环境。
</p>
<h4><span class="mw-headline" id="venv">venv</span></h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 此方法代替了从 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=python">python</a></span> 3.6 就不建议使用的 <i>pyvenv</i>。</div>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=python">python</a></span> 软件包从 3.3 开始就提供了此工具:
</p>
<pre>$ python -m venv venv
</pre>
<h4><span class="mw-headline" id="virtualenv">virtualenv</span></h4>
<p>Python 3 使用 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=python-virtualenv">python-virtualenv</a></span> 提供的 <i>virtualenv</i>。
</p>
<pre>$ virtualenv venv
</pre>
<p>Python 2 使用 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=python2-virtualenv">python2-virtualenv</a></span> 提供的 <i>virtualenv2</i>。
</p>
<pre>$ virtualenv2 venv
</pre>
<h3>
<span id=".E6.BF.80.E6.B4.BB"></span><span class="mw-headline" id="激活">激活</span>
</h3>
<p>要激活虚拟环境(这里假设使用的是 bash):
</p>
<pre>$ source venv/bin/activate
(venv) $
</pre>
<p>一旦进入虚拟环境，就可以通过 <i>pip</i> 安装软件包，并正常执行脚本。
</p>
<p>要退出寻环境，执行 <code>bin/activate</code> 下的:
</p>
<pre>(venv) $ deactivate
</pre>
<h2>
<span id="Python_.E7.89.88.E6.9C.AC"></span><span class="mw-headline" id="Python_版本">Python 版本</span>
</h2>
<p>二进制的版本由使用的虚拟环境工具决定。使用 Python 2 工具创建的虚拟环境中，<i>python</i> 命令指向 <code>bin/python2.7</code>，<i>venv</i> 创建的环境中， python 指向 <code>bin/python3.6</code>.
</p>
<p><i>venv</i> 和 <i>virtualenv</i> 差别在于 venv 默认使用系统的 Python 程序:
</p>
<pre>$ ls -l venv/bin/python3.6
lrwxrwxrwx 1 foo foo 7 Jun  3 19:57 venv/bin/python3.6 -&gt; /usr/bin/python3
</pre>
<p>而 <i>virtualenv</i> 工具使用环境目录中的 Python 程序:
</p>
<pre>$ ls -l virtualenv/bin/python3.6
lrwxrwxrwx 1 foo foo 7 Jun  3 19:58 virtualenv/bin/python3.6 -&gt; python3
</pre>
<h2><span class="mw-headline" id="virtualenvwrapper">virtualenvwrapper</span></h2>
<p><i>virtualenvwrapper</i> allows more natural command line interaction with your virtual environemnts by exposing several useful commands to create, activate and remove virtual environments. This package is a wrapper for both <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=python-virtualenv">python-virtualenv</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=python2-virtualenv">python2-virtualenv</a></span>.
</p>
<h3><span class="mw-headline" id="Installation">Installation</span></h3>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=python-virtualenvwrapper">python-virtualenvwrapper</a></span> package from the <a href="../en/Official_repositories.html" title="Official repositories">official repositories</a>.
</p>
<p>Now add the following lines to your <code>~/.bashrc</code>:
</p>
<pre>export WORKON_HOME=~/.virtualenvs
source /usr/bin/virtualenvwrapper.sh
</pre>
<p>Since python3 is a system-wide default in Arch, in order to be able to create python2 environments, you need to set <code>VIRTUALENVWRAPPER_PYTHON</code> and <code>VIRTUALENVWRAPPER_VIRTUALENV</code> prior to sourcing <code>virtualenvwrapper.sh</code> in your <code>~/.bashrc</code>:
</p>
<pre>export VIRTUALENVWRAPPER_PYTHON=/usr/bin/python2.7
export VIRTUALENVWRAPPER_VIRTUALENV=/usr/bin/virtualenv2
</pre>
<p>The line <code>source /usr/bin/virtualenvwrapper.sh</code> can cause some slowdown when starting a new shell. To fix this try using <code>source /usr/bin/virtualenvwrapper_lazy.sh</code>, which will load virtualenvwrapper the first time a virtualenvwrapper function is called.
</p>
<p>If you are not using python3 by default (check the output of <code>python --version</code>) you need to add the following line to your <code>~/.bashrc</code> prior sourcing the <code>virtualenvwrapper.sh</code> script.
</p>
<pre>export VIRTUALENVWRAPPER_PYTHON=/usr/bin/python3
</pre>
<p>Re-open your console and create the <code>WORKON_HOME</code> folder:
</p>
<pre>$ mkdir $WORKON_HOME
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This seems to happen now automatically after re-open the console for the first time.</div>
<h3><span class="mw-headline" id="Basic_usage">Basic usage</span></h3>
<p>The main information source on virtualenvwrapper usage (and extension capability) is Doug Hellmann's <a rel="nofollow" class="external text" href="http://www.doughellmann.com/docs/virtualenvwrapper/">page</a>.
</p>
<p>Create the virtual environment:
</p>
<pre>$ mkvirtualenv -p /usr/bin/python2.7 my_env
</pre>
<p>Activate the virtual environment:
</p>
<pre>$ workon my_env
</pre>
<p>Install some package inside the virtual environment (say, Django):
</p>
<pre>(my_env) $ pip install django
</pre>
<p>After you have done your things, leave the virtual environment:
</p>
<pre>(my_env) $ deactivate
</pre>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://docs.python.org/3/library/venv.html">Python venv</a></li>
<li><a rel="nofollow" class="external text" href="https://pypi.python.org/pypi/virtualenv">virtualenv Pypi page</a></li>
<li>
<a rel="nofollow" class="external text" href="http://wiki.pylonshq.com/display/pylonscookbook/Using+a+Virtualenv+Sandbox">Tutorial for virtualenv</a><sup title="最后检查状态：SSL error">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-04 ⓘ]</sup>
</li>
<li><a rel="nofollow" class="external text" href="http://www.doughellmann.com/docs/virtualenvwrapper/">virtualenvwrapper page at Doug Hellmann's</a></li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../zh-CN/Category:Development.html" title="Category:Development (简体中文)">Development (简体中文)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Python_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)/Virtual_environment_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;oldid=629911">https://wiki.archlinux.org/index.php?title=Python_(简体中文)/Virtual_environment_(简体中文)&amp;oldid=629911</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 6 August 2020, at 07:07.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
