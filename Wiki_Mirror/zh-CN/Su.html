<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>su (简体中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Su_简体中文 rootpage-Su_简体中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">su (简体中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<p><span></span>
</p>
<div class="archwiki-template-meta-related-articles-start">
<p>相关文章</p>
<ul>
<li><a href="../zh-CN/Users_and_groups.html" title="Users and groups (简体中文)">Users and groups (简体中文)</a></li>
<li><a href="../zh-CN/Sudo.html" title="Sudo (简体中文)">sudo (简体中文)</a></li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>翻译状态：</strong>本文是 <a href="../en/Su.html" title="Su">su</a> 的<a href="../zh-CN/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (简体中文)">翻译</a>。上次翻译日期：2018-04-10。如果英文版本有所<a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Su&amp;diff=0&amp;oldid=516603">更改</a>，则您可以帮助同步翻译。</div>
<p><b>su</b> 命令 (<b>s</b>ubstitute <b>u</b>ser) 用来切换当前用户身份到其他用户身份，默认切换成 root。
</p>
<p>参阅 <a href="../en/PAM.html" title="PAM">PAM</a> 可以找到配置 <b>su</b> 其他特性的方法。
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#%E5%AE%89%E8%A3%85"><span class="tocnumber">1</span> <span class="toctext">安装</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#%E7%94%A8%E6%B3%95"><span class="tocnumber">2</span> <span class="toctext">用法</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#%E5%8F%A6%E4%B8%80%E4%B8%AA%E9%80%89%E6%8B%A9%EF%BC%9ASudo"><span class="tocnumber">3</span> <span class="toctext">另一个选择：Sudo</span></a></li>
<li class="toclevel-1 tocsection-4">
<a href="#%E6%8F%90%E7%A4%BA%E5%92%8C%E6%8A%80%E5%B7%A7"><span class="tocnumber">4</span> <span class="toctext">提示和技巧</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#%E2%80%9C%E7%99%BB%E5%BD%95%E8%87%B3%E2%80%9D%E5%85%B6%E4%BB%96%E7%94%A8%E6%88%B7"><span class="tocnumber">4.1</span> <span class="toctext">“登录至”其他用户</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#su_%E5%92%8C_wheel_%E7%94%A8%E6%88%B7%E7%BB%84"><span class="tocnumber">4.2</span> <span class="toctext">su 和 wheel 用户组</span></a></li>
</ul>
</li>
</ul>
</div>

<h2>
<span id=".E5.AE.89.E8.A3.85"></span><span class="mw-headline" id="安装">安装</span>
</h2>
<p>su 是 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=util-linux">util-linux</a></span> 包的一部分，默认已经作为 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=base">base</a></span> 组的一部分安装到 Arch 中了。
</p>
<h2>
<span id=".E7.94.A8.E6.B3.95"></span><span class="mw-headline" id="用法">用法</span>
</h2>
<p>要切换到其他用户身份，将要切换的用户名传递给 su，像这样：
</p>
<pre># su <i>username</i>
</pre>
<p>然后就能看到提示符，要求输入所要切换用户的密码。
</p>
<p>如果没有传入用户名，su 默认切换为 root 用户，要求输入的密码也应该是 root 用户的密码。
</p>
<h2>
<span id=".E5.8F.A6.E4.B8.80.E4.B8.AA.E9.80.89.E6.8B.A9.EF.BC.9ASudo"></span><span class="mw-headline" id="另一个选择：Sudo">另一个选择：Sudo</span>
</h2>
<div class="noprint archwiki-template-message">
<p><a href="../File:Merge-arrows-2.png" class="image"><img alt="Merge-arrows-2.png" src="../File:Merge-arrows-2.png" decoding="async" width="48" height="48"></a><b>This article or section is a candidate for merging with <a href="../en/Sudo.html" title="Sudo">sudo</a>.</b><a href="../File:Merge-arrows-2.png" class="image"><img alt="Merge-arrows-2.png" src="../File:Merge-arrows-2.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Notes:</b> 这些文档应该在 <a href="../en/Sudo.html" title="Sudo">sudo</a> 页面上显示。 (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Su_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">Talk:Su (简体中文)#</a>)</div>
</div>
<div class="noprint archwiki-template-message">
<p><a href="../File:Merge-arrows-2.png" class="image"><img alt="Merge-arrows-2.png" src="../File:Merge-arrows-2.png" decoding="async" width="48" height="48"></a><b>This article or section is a candidate for merging with <a href="../en/Security.html#Use_sudo_instead_of_su" title="Security">Security#Use_sudo_instead_of_su</a>.</b><a href="../File:Merge-arrows-2.png" class="image"><img alt="Merge-arrows-2.png" src="../File:Merge-arrows-2.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Notes:</b> 在 <a href="../en/Security.html" title="Security">Security</a> 页面上论述了相同的主题。 (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Su_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">Talk:Su (简体中文)#</a>)</div>
</div>
<p><a href="../en/Sudo.html" title="Sudo">sudo</a> 可以提供和 su 类似的功能，且更加可定制化，根据具体要求和威胁模型分析，可以作为 su 的一个替代。sudo 系统会提示你输入你自己的密码，或者根本没有密码（如果以这种方式配置的话），而不是目标用户（你正试图使用的帐户）的密码。这样就不必在用户之间共享密码，并且如果需要阻止一个用户获得 root 权限（或获得其他用户权限），则无需更改 root 密码（更改密码将给其他人造成不便），你只需要撤销该用户的 sudo 访问权。
</p>
<p>如果 sudo 被配置为允许用户以 root 身份运行 shell，那么用户只要用 <code>sudo -s</code> 或 <code>sudo -i</code> 命令就可以分别模拟出 <code>su</code> 或 <code>su -l</code> 命令的效果，而且是用他自己的密码（或没有密码），而不是 root 的密码。同样，如果允许以 john 身份运行 shell，<code>sudo -u john -i</code> 和 <code>su -l john</code> 效果一样。
</p>
<h2>
<span id=".E6.8F.90.E7.A4.BA.E5.92.8C.E6.8A.80.E5.B7.A7"></span><span class="mw-headline" id="提示和技巧">提示和技巧</span>
</h2>
<h3>
<span id=".E2.80.9C.E7.99.BB.E5.BD.95.E8.87.B3.E2.80.9D.E5.85.B6.E4.BB.96.E7.94.A8.E6.88.B7"></span><span class="mw-headline" id="“登录至”其他用户">“登录至”其他用户</span>
</h3>
<p>su 的默认行为是保持在当前目录中并保持原始用户的环境变量（而不是切换到新用户的环境变量）。
</p>
<p>这一特性的优劣需要注意以下重要的对比因素：
</p>
<ul><li>系统管理员可以使用普通用户的 shell 而不是自己的。特别是在有些时候，解决用户问题的最有效的方法，就是登录到该用户的帐户以重现问题或进行调试。</li></ul>
<ul><li>但是通常情况下，root 用户不能登录普通用户的 shell 并使用该用户的环境变量进行操作，而是用自己的环境变量操作，这在很多情况下是不可取的，甚至是危险的。在无意中使用普通用户的 shell 时，root 可能会安装程序，或对系统进行其他更改，而这些更改与使用 root 帐户时所做的结果不同。例如，可能会安装某个程序，使得普通用户能够意外地损坏系统或未经授权访问某些数据。</li></ul>
<p>因此，建议系统管理员以及被授权使用 su 的任何其他用户（建议只有极少数用户），始终保持用 <code>-l</code> 或 <code>--login</code> 选项运行 su 命令的习惯。它有两个作用：
</p>
<ol>
<li>通过 <i>登录至</i> 目标用户，从当前工作目录切换到目标用户的主目录（比如切换到 root 用户就是 <code>/root</code>）。</li>
<li>根据目标用户的 <code>~/.bashrc</code> 切换到目标用户的环境变量。也就是说，当前工作目录和环境将会切换到和目标用户登录新会话时一样的目录和环境（而不是仅接管现有用户的会话）。</li>
</ol>
<p>因此，管理员通常应该这样使用 su：
</p>
<pre>$ su -l
</pre>
<p>添加用户名 root 结果一样：
</p>
<pre>$ su -l root
</pre>
<p>对于任何其他用户（如名为 archie 的用户），同样可以做到：
</p>
<pre># su -l archie
</pre>
<p>你可能希望在 <code>~/.bashrc</code> 里为这个规则添加一个 alias：
</p>
<pre>alias su="su -l"
</pre>
<h3>
<span id="su_.E5.92.8C_wheel_.E7.94.A8.E6.88.B7.E7.BB.84"></span><span class="mw-headline" id="su_和_wheel_用户组">su 和 wheel 用户组</span>
</h3>
<p>BSD su 默认仅允许 "wheel" <a href="../zh-CN/Users_and_groups.html#%E7%94%A8%E6%88%B7%E7%BB%84%E7%AE%A1%E7%90%86" title="Users and groups (简体中文)">用户组</a> 成员切换至 root 身份。而 GNU su 默认没有这一特性，可以使用 <a href="../zh-CN/PAM.html" title="PAM (简体中文)">PAM</a> 来模拟这一特性。将 <code>/etc/pam.d/su</code> 和 <code>/etc/pam.d/su-l</code> 中相应的行取消注释：
</p>
<pre>auth required pam_wheel.so use_uid
</pre>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../zh-CN/Category:Security.html" title="Category:Security (简体中文)">Security (简体中文)</a></li>
<li><a href="../zh-CN/Category:Commands.html" title="Category:Commands (简体中文)">Commands (简体中文)</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Merge.html" title="Category:Pages or sections flagged with Template:Merge">Pages or sections flagged with Template:Merge</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Su_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;oldid=608110">https://wiki.archlinux.org/index.php?title=Su_(简体中文)&amp;oldid=608110</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 25 April 2020, at 12:04.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
