<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Extra keyboard keys (简体中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Extra_keyboard_keys_简体中文 rootpage-Extra_keyboard_keys_简体中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Extra keyboard keys (简体中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>相关文章</p>
<ul>
<li><a href="/title/Xorg_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)" title="Xorg (简体中文)">Xorg</a></li>
<li><a href="/title/Xmodmap" title="Xmodmap">Xmodmap</a></li>
<li><a href="/title/Extra_keyboard_keys_in_Xorg" class="mw-redirect" title="Extra keyboard keys in Xorg">Extra keyboard keys in Xorg</a></li>
<li><a href="/title/Extra_keyboard_keys_in_console" class="mw-redirect" title="Extra keyboard keys in console">Extra keyboard keys in console</a></li>
</ul>
</div>
<div class="noprint archwiki-template-message">
<p><a href="/title/File:Tango-preferences-desktop-locale.png" class="image"><img alt="Tango-preferences-desktop-locale.png" src="../File:Tango-preferences-desktop-locale.png" decoding="async" width="48" height="48"></a><b>本文或本节需要<a href="/title/ArchWiki:Contributing_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E7%BF%BB%E8%AF%91" title="ArchWiki:Contributing (简体中文)">翻译</a>。要贡献翻译，请访问<a href="/title/ArchWiki_Translation_Team_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)" class="mw-redirect" title="ArchWiki Translation Team (简体中文)">简体中文翻译团队</a>。</b><a href="/title/File:Tango-preferences-desktop-locale.png" class="image"><img alt="Tango-preferences-desktop-locale.png" src="../File:Tango-preferences-desktop-locale.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>附注：</b> <span style="color:red;">请使用模板的第一个参数进行更详细的指示。</span>（在 <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/title/Talk:Extra_keyboard_keys_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">Talk:Extra keyboard keys (简体中文)#</a> 中讨论）</div>
</div>
<p>许多键盘都有一些"特殊按键"(也叫热键)，用于执行某个应用程序或者输入那些不被包含在标准键盘映射表中的特殊字符。由于没有相应的规格标准，内核无法知道如何处处理它们，这也是为什么我们需要(手工的)将这些按键映射到特定的动作。我们有两种方法来实现：
</p>
<ul><li>通用的做法，使用 <a href="/title/Xorg" title="Xorg">Xorg</a> 提供的工具 (以及桌面环境的工具)。</li></ul>
<p>开始之前，你需要学习一些(新)词汇...
</p>
<p><b>扫描码(scancode)</b>是一个键的最小识别 ID。如果一个键没有扫描码值，我们无法做任何事，因为内核看不到它。
</p>
<p><b>键位码(keycode)</b>是一个键的第二级识别 ID，对应到一个函数。
</p>
<p><b>符号(symbol)</b>是一个键的第三级识别 ID，Xorg 通过该 ID 引用按键。
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A_%E6%98%A0%E5%B0%84%E6%89%AB%E6%8F%8F%E7%A0%81"><span class="tocnumber">1</span> <span class="toctext">第一步： 映射扫描码</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#%E4%BD%BF%E7%94%A8_xev"><span class="tocnumber">1.1</span> <span class="toctext">使用 xev</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#%E4%BD%BF%E7%94%A8_showkey"><span class="tocnumber">1.2</span> <span class="toctext">使用 showkey</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#2.6_%E5%86%85%E6%A0%B8"><span class="tocnumber">1.3</span> <span class="toctext">2.6 内核</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#%E6%A3%80%E6%9F%A5%E6%89%AB%E6%8F%8F%E7%A0%81"><span class="tocnumber">1.4</span> <span class="toctext">检查扫描码</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6">
<a href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5:_%E6%98%A0%E5%B0%84%E6%8C%89%E9%94%AE%E7%A0%81"><span class="tocnumber">2</span> <span class="toctext">第二步: 映射按键码</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#%E7%BB%88%E7%AB%AF%E4%B8%AD"><span class="tocnumber">2.1</span> <span class="toctext">终端中</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Xorg_%E4%B8%AD"><span class="tocnumber">2.2</span> <span class="toctext">Xorg 中</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9">
<a href="#%E7%AC%94%E8%AE%B0%E6%9C%AC"><span class="tocnumber">3</span> <span class="toctext">笔记本</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#Asus_M_series"><span class="tocnumber">3.1</span> <span class="toctext">Asus M series</span></a></li>
</ul>
</li>
</ul>
</div>

<h2>
<span id=".E7.AC.AC.E4.B8.80.E6.AD.A5.EF.BC.9A_.E6.98.A0.E5.B0.84.E6.89.AB.E6.8F.8F.E7.A0.81"></span><span class="mw-headline" id="第一步：_映射扫描码">第一步： 映射扫描码</span>
</h2>
<p>你的大部分按键应该已经有键位码了，或者至少有扫描码。没有扫描码的键无法被内核识别。
</p>
<h3>
<span id=".E4.BD.BF.E7.94.A8_xev"></span><span class="mw-headline" id="使用_xev">使用 xev</span>
</h3>
<p>使用图形界面程序 "xev" (不需要切换到终端环境)。安装 xev 程序：
</p>
<pre># pacman -S xorg-xev</pre>
<p>使用下面一行命令你可以启动 xev 然后直接 grep 到重要的部分：
</p>
<pre>$ xev | grep -A2 --line-buffered '^KeyRelease' | sed -n '/keycode /s/^.*keycode \([0-9]*\).* (.*, \(.*\)).*$/\1 \2/p'
</pre>
<p>在下面的例子中，我按下 "a", "r", "c" 和 "h" 键，以及两个我的 Dell 键盘上的媒体键。这样我得到以下输出：
</p>
<pre>38 a
27 r
54 c
43 h
153 NoSymbol
144 NoSymbol
</pre>
<p>这个输出的意思是 "a", "r", "c" 和 "h" 键的键位码分别是 38, 27, 54 和 43 并且被正确的映射。而键位码 153 和 144 的媒体键没有对应的功能，使用 "NoSymbol" 指示。如果你按下一个按键之后终端里没有显示，那就意味这内核无法看到这个按键或者没有映射。
</p>
<h3>
<span id=".E4.BD.BF.E7.94.A8_showkey"></span><span class="mw-headline" id="使用_showkey">使用 showkey</span>
</h3>
<p>通常来说，使用<code>showkey</code>程序可以知道你的按键是否拥有一个keycode。使用showkey程序后，你可以按下一个按键来查看屏幕上的输出，如果什么都不做，程序将在10秒后退出，这也是退出showkey程序的唯一方法。你需要在一个真正的控制台下执行showkey程序，就是说你得切出图形界面，用ctrl+alt+F1组合键就能回到命令行的界面了。
</p>
<pre> $ showkey
</pre>
<p>尝试按下你的按键。如果有keycode输出则说明这个键是被映射了的。如果没有，啊，真是一个悲剧。这说明内核认不出这个键或者是这个按键还没被映射。
</p>
<h3>
<span id="2.6_.E5.86.85.E6.A0.B8"></span><span class="mw-headline" id="2.6_内核">2.6 内核</span>
</h3>
<p>根据 keymap man page:
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 在 2.6 内核中，raw 模式，或者叫扫描码模式，一点也不 raw 。扫描码首先翻译成键位码，当需要键位码时再翻译回来...不同的转换被涉及，并且无法确保最终结果与键盘硬件发送的信号对应。</div>
<p>有可能 keymaps 从 showkey 获取的以及 <a href="/title/Setkeycodes" class="mw-redirect" title="Setkeycodes">setkeycodes</a> 是设置的键位码与 X 中的 xev 获取的值不同。记住当把 keymaps 翻译成 keysyms 时，使用 xmodmap (参见 <a href="/title/Extra_keyboard_keys_in_Xorg" class="mw-redirect" title="Extra keyboard keys in Xorg">Extra keyboard keys in Xorg</a>).
</p>
<p>如果找到了键盘码，请跳到后面的第二步，否则：
</p>
<h3>
<span id=".E6.A3.80.E6.9F.A5.E6.89.AB.E6.8F.8F.E7.A0.81"></span><span class="mw-headline" id="检查扫描码">检查扫描码</span>
</h3>
<p>如果按键没有键盘码，可以通过 dmesg 命令从内核日志中查找扫描码：
</p>
<pre># dmesg|tail -5
</pre>
<p>按下按键后可以看到：
</p>
<pre>atkbd.c: Unknown key pressed (translated set 2, code 0xf1 on isa0060/serio0).
atkbd.c: Use 'setkeycodes e071 &lt;keycode&gt;' to make it known.
</pre>
<p>这样就找到了按键的扫描码，可以映射到键盘码，参见 <a href="/title/Map_scancodes_to_keycodes" title="Map scancodes to keycodes">Map scancodes to keycodes</a>。
</p>
<p>如果没有新日志信息，说明内核不识别这个按键，无法使用它。
</p>
<h2>
<span id=".E7.AC.AC.E4.BA.8C.E6.AD.A5:_.E6.98.A0.E5.B0.84.E6.8C.89.E9.94.AE.E7.A0.81"></span><span class="mw-headline" id="第二步:_映射按键码">第二步: 映射按键码</span>
</h2>
<h3>
<span id=".E7.BB.88.E7.AB.AF.E4.B8.AD"></span><span class="mw-headline" id="终端中">终端中</span>
</h3>
<p>终端中可以用热键打印某个字符或字符串，如果字符串设置为命令加回车，将自动执行命令！
</p>
<p>详情参见： <a href="/title/Extra_keyboard_keys_in_console" class="mw-redirect" title="Extra keyboard keys in console">Extra keyboard keys in console</a>。
</p>
<h3>
<span id="Xorg_.E4.B8.AD"></span><span class="mw-headline" id="Xorg_中">Xorg 中</span>
</h3>
<p>图形环境中有多种方式将热键映射到命令，参见：<a href="/title/Extra_keyboard_keys_in_Xorg" class="mw-redirect" title="Extra keyboard keys in Xorg">Extra keyboard keys in Xorg</a>。
</p>
<h2>
<span id=".E7.AC.94.E8.AE.B0.E6.9C.AC"></span><span class="mw-headline" id="笔记本">笔记本</span>
</h2>
<h3><span class="mw-headline" id="Asus_M_series">Asus M series</span></h3>
<p>可能在其它系列中也可以使用，使用下面方法可以使用多媒体按键，禁用光传感器：编辑 <code>/etc/rc.local</code>,添加：
</p>
<pre>$ echo 0 &gt; /sys/devices/platform/asus-laptop/ls_switch
</pre>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="/title/Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="/title/Category:Keyboards_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)" title="Category:Keyboards (简体中文)">Keyboards (简体中文)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="/title/Category:Pages_or_sections_flagged_with_Template:Translateme_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)" title="Category:Pages or sections flagged with Template:Translateme (简体中文)">Pages or sections flagged with Template:Translateme (简体中文)</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Extra_keyboard_keys_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;oldid=664262">https://wiki.archlinux.org/index.php?title=Extra_keyboard_keys_(简体中文)&amp;oldid=664262</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 25 April 2021, at 19:14.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="/title/ArchWiki:Privacy_policy" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="/title/ArchWiki:About" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="/title/ArchWiki:General_disclaimer" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
