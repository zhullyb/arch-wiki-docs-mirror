<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Archboot (简体中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Archboot_简体中文 rootpage-Archboot_简体中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Archboot (简体中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="/title/Archiso" title="Archiso">Archiso</a></li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>翻译状态：</strong>本文是 <a href="/title/Archboot" title="Archboot">Archboot</a> 的<a href="/title/ArchWiki:Translation_Team_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)" title="ArchWiki:Translation Team (简体中文)">翻译</a>。上次翻译日期：2020-05-08。如果英文版本有所<a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Archboot&amp;diff=0&amp;oldid=565034">更改</a>，则您可以帮助同步翻译。</div>
<div class="noprint archwiki-template-message">
<p><a href="/title/File:Tango-preferences-desktop-locale.png" class="image"><img alt="Tango-preferences-desktop-locale.png" src="../File:Tango-preferences-desktop-locale.png" decoding="async" width="48" height="48"></a><b>本文或本节需要<a href="/title/ArchWiki:Contributing_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E7%BF%BB%E8%AF%91" title="ArchWiki:Contributing (简体中文)">翻译</a>。要贡献翻译，请访问<a href="/title/ArchWiki_Translation_Team_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)" class="mw-redirect" title="ArchWiki Translation Team (简体中文)">简体中文翻译团队</a>。</b><a href="/title/File:Tango-preferences-desktop-locale.png" class="image"><img alt="Tango-preferences-desktop-locale.png" src="../File:Tango-preferences-desktop-locale.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>附注：</b> 大量内容（尤其后面）没有被翻译！（在 <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/title/Talk:Archboot_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">Talk:Archboot (简体中文)#</a> 中讨论）</div>
</div>
<p>"Archboot"是一组启动 CD/USB/PXE 等启动介质的非官方脚本。它用来安装或者恢复系统。它不依赖于任何文件系统，只能运行在内存中。
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#%E5%AE%89%E8%A3%85"><span class="tocnumber">1</span> <span class="toctext">安装</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#%E4%B8%8E_archiso_%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="tocnumber">2</span> <span class="toctext">与 archiso 的区别</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#Archboot%E7%9A%84%E5%8F%91%E5%B8%83"><span class="tocnumber">3</span> <span class="toctext">Archboot的发布</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#%E7%83%A7%E5%BD%95%E5%8F%91%E5%B8%83"><span class="tocnumber">3.1</span> <span class="toctext">烧录发布</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#PXE_%E5%90%AF%E5%8A%A8_/_%E6%81%A2%E5%A4%8D%E7%B3%BB%E7%BB%9F"><span class="tocnumber">3.2</span> <span class="toctext">PXE 启动 / 恢复系统</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Supported_boot_modes_of_Archboot_media"><span class="tocnumber">3.3</span> <span class="toctext">Supported boot modes of Archboot media</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#How_to_do_a_remote_installation_with_ssh?"><span class="tocnumber">3.4</span> <span class="toctext">How to do a remote installation with ssh?</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Interactive_setup_features"><span class="tocnumber">3.5</span> <span class="toctext">Interactive setup features</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#FAQ,_Known_Issues_and_limitations"><span class="tocnumber">3.6</span> <span class="toctext">FAQ, Known Issues and limitations</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#%E5%8E%86%E5%8F%B2"><span class="tocnumber">3.7</span> <span class="toctext">历史</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Bugs"><span class="tocnumber">3.8</span> <span class="toctext">Bugs</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="#Archboot_BETA_ISO_Release"><span class="tocnumber">4</span> <span class="toctext">Archboot BETA ISO Release</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="#%E9%93%BE%E6%8E%A5"><span class="tocnumber">5</span> <span class="toctext">链接</span></a></li>
<li class="toclevel-1 tocsection-14">
<a href="#Howto:_Create_image_files"><span class="tocnumber">6</span> <span class="toctext">Howto: Create image files</span></a>
<ul>
<li class="toclevel-2 tocsection-15"><a href="#Requirements"><span class="tocnumber">6.1</span> <span class="toctext">Requirements</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Create_archboot_chroots"><span class="tocnumber">6.2</span> <span class="toctext">Create archboot chroots</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Install_archboot_and_update_to_latest_packages"><span class="tocnumber">6.3</span> <span class="toctext">Install archboot and update to latest packages</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Generate_images"><span class="tocnumber">6.4</span> <span class="toctext">Generate images</span></a></li>
</ul>
</li>
</ul>
</div>

<h2>
<span id=".E5.AE.89.E8.A3.85"></span><span class="mw-headline" id="安装">安装</span>
</h2>
<p><a href="/title/Install" class="mw-redirect" title="Install">安装</a> 软件包 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=archboot">archboot</a></span>。
</p>
<h2>
<span id=".E4.B8.8E_archiso_.E7.9A.84.E5.8C.BA.E5.88.AB"></span><span class="mw-headline" id="与_archiso_的区别">与 archiso 的区别</span>
</h2>
<ul>
<li>提供了额外的交互安装和快速安装脚本.</li>
<li>内含 [core] 软件仓库.</li>
<li>在 initramfs 中运行一个修改过的 Arch Linux 系统.</li>
<li>仅在内存中使用，所有非必要的组件，例如手册说明等都没有提供</li>
<li>启动过程中无任何挂载.</li>
<li>支持通过 ssh 远程安装.</li>
</ul>
<h2>
<span id="Archboot.E7.9A.84.E5.8F.91.E5.B8.83"></span><span class="mw-headline" id="Archboot的发布">Archboot的发布</span>
</h2>
<ul><li>提供ISO镜像文件和BT种子，并且包含x86_64的core库。</li></ul>
<dl><dd>标记为 network 的镜像不含 [core].</dd></dl>
<ul>
<li>使用前请检查md5sum。</li>
<li>
<a rel="nofollow" class="external text" href="https://downloads.archlinux.de/iso/archboot/2018.06">Download 2018.06 „2k18-R1“</a> / <a rel="nofollow" class="external text" href="ftp://ftp.archlinux.org/iso/archboot/Changelog-2018.06-1.txt">Changelog</a> / <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=182439">Forum thread</a>
</li>
</ul>
<dl>
<dd>kernel: 4.17.2-1</dd>
<dd>pacman: 5.1.0-2</dd>
<dd>systemd: 238.133-1</dd>
<dd>RAM recommendations: 1500 MB</dd>
</dl>
<h3>
<span id=".E7.83.A7.E5.BD.95.E5.8F.91.E5.B8.83"></span><span class="mw-headline" id="烧录发布">烧录发布</span>
</h3>
<p>Hybrid镜像是一个CD和硬盘镜像。 
</p>
<ul>
<li>可以用来刻录CD(RW)光盘.</li>
<li>可以使用'dd' 或者 similar 工具写入磁盘介质. 这种方法也可用用来制作USB盘。</li>
</ul>
<pre>'dd if=&lt;imagefile&gt; of=/dev/&lt;yourdevice&gt; bs=1M'</pre>
<h3>
<span id="PXE_.E5.90.AF.E5.8A.A8_.2F_.E6.81.A2.E5.A4.8D.E7.B3.BB.E7.BB.9F"></span><span class="mw-headline" id="PXE_启动_/_恢复系统">PXE 启动 / 恢复系统</span>
</h3>
<p><a rel="nofollow" class="external text" href="https://downloads.archlinux.de/iso/archboot/2018.06/boot">Download 2018.12 „2k18-R1“</a> needed files from the directory.
</p>
<ul>
<li>vmlinuz_x86_64 +  initramfs_x86_64.img(x86_64)</li>
<li>intel-ucode.img (x86_64)</li>
<li>For PXE booting add the kernel and initrd to your tftp setup and you will get a running installation/rescue system.</li>
<li>For Rescue booting add a entry to your bootloader pointing to the kernel and initrd.</li>
</ul>
<h3><span class="mw-headline" id="Supported_boot_modes_of_Archboot_media">Supported boot modes of Archboot media</span></h3>
<ul>
<li>It supports BIOS booting with syslinux.</li>
<li>It supports UEFI/UEFI_CD booting with <a href="/title/Systemd-boot" title="Systemd-boot">systemd-boot</a> and <a href="/title/EFISTUB" title="EFISTUB">EFISTUB</a>.</li>
<li>It support UEFI_MIX_MODE booting with grub.</li>
<li>It supports Secure Boot with prebootloader.</li>
<li>It supports grub(2)'s iso loopback support.</li>
</ul>
<dl>
<dd>variables used (below for example):</dd>
<dd>iso_loop_dev=PARTUUID=XXXX</dd>
<dd>iso_loop_path=/blah/archboot.iso</dd>
</dl>
<pre>menuentry "Archboot" --class iso {
loopback loop (hdX,X)/&lt;archboot.iso&gt;
linux (loop)/boot/vmlinuz_x86_64 iso_loop_dev=/dev/sdXX iso_loop_path=/&lt;archboot.iso&gt;
initrd (loop)/boot/initramfs_x86_64.img
}</pre>
<ul><li>It supports booting using syslinux's memdisk (only in BIOS mode).</li></ul>
<pre>menuentry "Archboot Memdisk" {
   linux16 /memdisk iso
   initrd16 hd(X,X)/&lt;archboot.iso&gt;
}</pre>
<h3>
<span id="How_to_do_a_remote_installation_with_ssh.3F"></span><span class="mw-headline" id="How_to_do_a_remote_installation_with_ssh?">How to do a remote installation with ssh?</span>
</h3>
<ul>
<li>During boot all network interfaces will try to obtain an IP address through dhcp.</li>
<li>root password is not set by default! If you need privacy during installation set a password.</li>
</ul>
<pre>'ssh root@&lt;yourip&gt;'</pre>
<h3><span class="mw-headline" id="Interactive_setup_features">Interactive setup features</span></h3>
<ul>
<li>Media and Network installation mode</li>
<li>Changing keymap and consolefont</li>
<li>Changing time and date</li>
<li>Setup network with netctl</li>
<li>Preparing storage disk, like auto-prepare, partitioning, GUID (gpt) support, 4k sector drive support etc.</li>
<li>Creation of software raid/raid partitions, lvm2 devices and luks encrypted devices</li>
<li>Supports standard linux,raid/raid_partitions,dmraid/fakeraid,lvm2 and encrypted devices</li>
<li>Filesystem support: ext2/3/4, btrfs, f2fs, nilfs2, reiserfs,xfs,jfs,ntfs-3g,vfat</li>
<li>Name scheme support: PARTUUID, PARTLABEL, FSUUID, FSLABEL and KERNEL</li>
<li>Mount support of grub(2) loopback and memdisk installation media</li>
<li>Package selection support</li>
<li>hwdetect script is used for preconfiguration</li>
<li>Auto/Preconfiguration of fstab, kms mode, ssd, mkinitcpio.conf, systemd, crypttab and mdadm.conf</li>
<li>Configuration of basic system files</li>
<li>Setting root password</li>
<li>grub(2) (BIOS and UEFI), refind-efi, systemd-boot, syslinux (BIOS and UEFI) bootloader support</li>
</ul>
<h3>
<span id="FAQ.2C_Known_Issues_and_limitations"></span><span class="mw-headline" id="FAQ,_Known_Issues_and_limitations">FAQ, Known Issues and limitations</span>
</h3>
<ul>
<li>Release specific known issues and workarounds are posted in changelog files.</li>
<li>Check also the forum threads for posted fixes and workarounds.</li>
<li>Why screen stays blank or other weird screen issues happen?</li>
</ul>
<dl><dd><dl><dd>Some hardware does not like the KMS activation, use radeon.modeset=0, i915.modeset=0 or nouveau.modeset=0 on boot prompt.</dd></dl></dd></dl>
<ul><li>dmraid/fakeraid might be broken on some boards, support is not perfect here.</li></ul>
<dl><dd><dl>
<dd>The reason is there are so many different hardware components out there. At the moment 1.0.0rc16 is included, with latest fedora patchset, development has been stopped.</dd>
<dd>mdadm supports some isw and ddf fakeraid chipsets, but assembling during boot is deactivated in /etc/mdadm.conf!</dd>
</dl></dd></dl>
<ul><li>grub2 cannot detect correct bios boot order:</li></ul>
<dl><dd><dl>
<dd>It may happen that hd(x,x) entries are not correct, thus first reboot may not work.</dd>
<dd>Reason: grub cannot detect bios boot order.</dd>
<dd>Fix: Either change bios boot order or change menu.lst to correct entries after successful boot. This cannot be fixed it is a restriction in grub2!</dd>
</dl></dd></dl>
<ul><li>Why is parted used in setup routine, instead of cfdisk in msdos partitiontable mode?</li></ul>
<dl><dd><dl>
<dd>parted is the only linux partition program that can handle all type of things the setup routine offers.</dd>
<dd>cfdisk cannot handle GPT/GUID nor it can allign partitions correct with 1MB spaces for 4k sector disks.</dd>
<dd>cfdisk is a nice tool but is too limited to be the standard partitioner anymore.</dd>
<dd>cfdisk is still included but has to be run in another terminal.</dd>
</dl></dd></dl>
<h3>
<span id=".E5.8E.86.E5.8F.B2"></span><span class="mw-headline" id="历史">历史</span>
</h3>
<p>发布历史可以从 <a rel="nofollow" class="external text" href="ftp://ftp.archlinux.org/iso/archboot/history">这里</a> 找到.
</p>
<h3><span class="mw-headline" id="Bugs">Bugs</span></h3>
<p><a rel="nofollow" class="external text" href="https://bugs.archlinux.org">Arch Linux Bugtracker</a>
</p>
<h2><span class="mw-headline" id="Archboot_BETA_ISO_Release">Archboot BETA ISO Release</span></h2>
<ul>
<li>Hybrid image file is provided, which only supports network installation.</li>
<li>Please read the according Changelog files for RAM limitations.</li>
<li>Please check md5sum before using it.</li>
<li>No beta ISO available at the moment.</li>
</ul>
<h2>
<span id=".E9.93.BE.E6.8E.A5"></span><span class="mw-headline" id="链接">链接</span>
</h2>
<ul><li><a rel="nofollow" class="external text" href="https://projects.archlinux.org/archboot.git/">GIT repository</a></li></ul>
<h2><span class="mw-headline" id="Howto:_Create_image_files">Howto: Create image files</span></h2>
<p>(Quick regeneration of installation media with latest available core packages)
</p>
<h3><span class="mw-headline" id="Requirements">Requirements</span></h3>
<ul>
<li>x86_64 architecture</li>
<li>~ 3GB free space on disk</li>
</ul>
<h3><span class="mw-headline" id="Create_archboot_chroots">Create archboot chroots</span></h3>
<ul><li>Install archboot:</li></ul>
<pre># mkdir -p <i>x86_64_chroot</i>/var/lib/pacman
# pacman --root "<i>x86_64_chroot</i>" -Sy base --noconfirm --noprogressbar
</pre>
<ul><li>Enter archboot x86_64 container:</li></ul>
<pre># systemd-nspawn --capability=CAP_MKNOD --register=no -M $(uname -m) -D <i>x86_64_chroot</i>
</pre>
<h3><span class="mw-headline" id="Install_archboot_and_update_to_latest_packages">Install archboot and update to latest packages</span></h3>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=archboot">archboot</a></span> in chroot and <a href="/title/Pacman#Upgrading_packages" title="Pacman">update</a> to latest available packages.
</p>
<h3><span class="mw-headline" id="Generate_images">Generate images</span></h3>
<pre># run in both chroots (needs quite some time ...)
archboot-allinone.sh -t
# put the generated tarballs in one directory and run (needs quite some time ...)
archboot-allinone.sh -g
</pre>
<ul><li>Finished you get a bunch of images.</li></ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="/title/Special:Categories" title="Special:Categories">Categories</a>: <ul>
<li><a href="/title/Category:System_recovery_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)" title="Category:System recovery (简体中文)">System recovery (简体中文)</a></li>
<li><a href="/title/Category:Installation_process_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)" title="Category:Installation process (简体中文)">Installation process (简体中文)</a></li>
<li><a href="/title/Category:Live_Arch_systems_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)" title="Category:Live Arch systems (简体中文)">Live Arch systems (简体中文)</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="/title/Category:Pages_or_sections_flagged_with_Template:Translateme_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)" title="Category:Pages or sections flagged with Template:Translateme (简体中文)">Pages or sections flagged with Template:Translateme (简体中文)</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Archboot_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;oldid=670320">https://wiki.archlinux.org/index.php?title=Archboot_(简体中文)&amp;oldid=670320</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 10 May 2021, at 19:38.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="/title/ArchWiki:Privacy_policy" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="/title/ArchWiki:About" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="/title/ArchWiki:General_disclaimer" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
