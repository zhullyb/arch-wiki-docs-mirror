<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Virtual user mail system with Postfix, Dovecot and Roundcube (简体中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Virtual_user_mail_system_with_Postfix_Dovecot_and_Roundcube_简体中文 rootpage-Virtual_user_mail_system_with_Postfix_Dovecot_and_Roundcube_简体中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Virtual user mail system with Postfix, Dovecot and Roundcube (简体中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../en/Courier_Mail_Server.html" class="mw-redirect" title="Courier MTA">Courier MTA</a></li>
<li><a href="../en/OpenDKIM.html" title="OpenDKIM">OpenDKIM</a></li>
<li><a href="../en/Postfix.html" title="Postfix">Postfix</a></li>
<li><a href="../en/SOGo.html" title="SOGo">SOGo</a></li>
</ul>
</div>
<div class="noprint archwiki-template-message">
<p><a href="../File:Merge-arrows-2.png" class="image"><img alt="Merge-arrows-2.png" src="../File:Merge-arrows-2.png" decoding="async" width="48" height="48"></a><b>This article or section is a candidate for merging with <a href="../en/Postfix.html" title="Postfix">Postfix</a>.</b><a href="../File:Merge-arrows-2.png" class="image"><img alt="Merge-arrows-2.png" src="../File:Merge-arrows-2.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Notes:</b> 文章有有和 <a href="../en/Postfix.html" title="Postfix">Postfix</a>、 <a href="../en/Dovecot.html" title="Dovecot">Dovecot</a> 、 <a href="../en/Roundcube.html" title="Roundcube">Roundcube</a> 中重复的部份，例如一些配置代码的片断等。 (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Virtual_user_mail_system_with_Postfix,_Dovecot_and_Roundcube_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">Talk:Virtual user mail system with Postfix, Dovecot and Roundcube (简体中文)#</a>)</div>
</div>
<p>这篇文章主要介绍怎么配置一个使用虚拟用户的邮件系统。例如：些邮件系统的发信人、收信人并不是linux的系统用户（不存在于<code>/etc/passwd</code>中）。
</p>
<p>概略来讲，本文使用<a href="../zh-CN/Postfix.html" title="Postfix (简体中文)">Postfix</a>提供邮件发送服务， 使用<a href="../en/Dovecot.html" title="Dovecot">Dovecot</a>提供IMAP接收服务， 使用<a href="../en/Roundcube.html" title="Roundcube">Roundcube</a>作为邮件的web前端， 使用<a href="../en/PostfixAdmin.html" title="PostfixAdmin">PostfixAdmin</a>作为管理界面来管控这一整套系统。
</p>
<p>本文提供的解决方案将允许您使用当前最好的安全机制，您将能够使用SMTP和SMTPS发送邮件，并使用POP3，POP3S，IMAP和IMAPS接收邮件。 此外，由于使用了PostfixAdmin，配置将很容易，用户将能够使用Roundcube登录。
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#%E5%AE%89%E8%A3%85"><span class="tocnumber">1</span> <span class="toctext">安装</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#%E9%85%8D%E7%BD%AE"><span class="tocnumber">2</span> <span class="toctext">配置</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#%E7%94%A8%E6%88%B7"><span class="tocnumber">2.1</span> <span class="toctext">用户</span></a></li>
<li class="toclevel-2 tocsection-4">
<a href="#%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="tocnumber">2.2</span> <span class="toctext">数据库</span></a>
<ul>
<li class="toclevel-3 tocsection-5"><a href="#%E4%BD%BF%E7%94%A8_PostfixAdmin"><span class="tocnumber">2.2.1</span> <span class="toctext">使用 PostfixAdmin</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-6"><a href="#%E9%80%9A%E4%BF%A1%E5%8A%A0%E5%AF%86%E8%AF%81%E4%B9%A6"><span class="tocnumber">2.3</span> <span class="toctext">通信加密证书</span></a></li>
<li class="toclevel-2 tocsection-7">
<a href="#Postfix"><span class="tocnumber">2.4</span> <span class="toctext">Postfix</span></a>
<ul>
<li class="toclevel-3 tocsection-8"><a href="#Setting_up_Postfix"><span class="tocnumber">2.4.1</span> <span class="toctext">Setting up Postfix</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="#Create_the_file_structure"><span class="tocnumber">2.4.2</span> <span class="toctext">Create the file structure</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-10">
<a href="#Dovecot"><span class="tocnumber">2.5</span> <span class="toctext">Dovecot</span></a>
<ul>
<li class="toclevel-3 tocsection-11"><a href="#DH_parameters"><span class="tocnumber">2.5.1</span> <span class="toctext">DH parameters</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-12"><a href="#PostfixAdmin"><span class="tocnumber">2.6</span> <span class="toctext">PostfixAdmin</span></a></li>
<li class="toclevel-2 tocsection-13">
<a href="#Roundcube"><span class="tocnumber">2.7</span> <span class="toctext">Roundcube</span></a>
<ul>
<li class="toclevel-3 tocsection-14"><a href="#Apache_configuration"><span class="tocnumber">2.7.1</span> <span class="toctext">Apache configuration</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#Roundcube:_Change_Password_Plugin"><span class="tocnumber">2.7.2</span> <span class="toctext">Roundcube: Change Password Plugin</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-16"><a href="#Fire_it_up"><span class="tocnumber">3</span> <span class="toctext">Fire it up</span></a></li>
<li class="toclevel-1 tocsection-17">
<a href="#Testing"><span class="tocnumber">4</span> <span class="toctext">Testing</span></a>
<ul>
<li class="toclevel-2 tocsection-18"><a href="#Error_response"><span class="tocnumber">4.1</span> <span class="toctext">Error response</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#See_that_you_have_received_a_email"><span class="tocnumber">4.2</span> <span class="toctext">See that you have received a email</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-20">
<a href="#Optional_Items"><span class="tocnumber">5</span> <span class="toctext">Optional Items</span></a>
<ul>
<li class="toclevel-2 tocsection-21"><a href="#Quota"><span class="tocnumber">5.1</span> <span class="toctext">Quota</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#Autocreate_and_autosubscribe_folders_in_Dovecot"><span class="tocnumber">5.2</span> <span class="toctext">Autocreate and autosubscribe folders in Dovecot</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#Dovecot_public_folder_and_global_ACLs"><span class="tocnumber">5.3</span> <span class="toctext">Dovecot public folder and global ACLs</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#Fighting_Spam"><span class="tocnumber">5.4</span> <span class="toctext">Fighting Spam</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-25">
<a href="#Sidenotes"><span class="tocnumber">6</span> <span class="toctext">Sidenotes</span></a>
<ul>
<li class="toclevel-2 tocsection-26"><a href="#Alternative_vmail_folder_structure"><span class="tocnumber">6.1</span> <span class="toctext">Alternative vmail folder structure</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-27">
<a href="#Troubleshooting"><span class="tocnumber">7</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-28"><a href="#IMAP/POP3_client_failing_to_receive_mails"><span class="tocnumber">7.1</span> <span class="toctext">IMAP/POP3 client failing to receive mails</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="#Roundcube_not_able_to_delete_emails_or_view_any_'standard'_folders"><span class="tocnumber">7.2</span> <span class="toctext">Roundcube not able to delete emails or view any 'standard' folders</span></a></li>
<li class="toclevel-2 tocsection-30"><a href="#LMTP_/_Sieve"><span class="tocnumber">7.3</span> <span class="toctext">LMTP / Sieve</span></a></li>
<li class="toclevel-2 tocsection-31"><a href="#Are_your_emails_sent_to_gmail_users_ending_up_in_their_junk/spam_folders?"><span class="tocnumber">7.4</span> <span class="toctext">Are your emails sent to gmail users ending up in their junk/spam folders?</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-32"><a href="#See_also"><span class="tocnumber">8</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2>
<span id=".E5.AE.89.E8.A3.85"></span><span class="mw-headline" id="安装">安装</span>
</h2>
<p>开始这一步之前, 你需要按照链接中的页面安装好<a href="../zh-CN/MySQL.html" title="MySQL (简体中文)">Mysql</a>和<a href="../zh-CN/Postfix.html" title="Postfix (简体中文)">Postfix</a>。
</p>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">安装</a> 这两个软件包： <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dovecot">dovecot</a></span> 和 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=roundcubemail">roundcubemail</a></span> 。
</p>
<h2>
<span id=".E9.85.8D.E7.BD.AE"></span><span class="mw-headline" id="配置">配置</span>
</h2>
<h3>
<span id=".E7.94.A8.E6.88.B7"></span><span class="mw-headline" id="用户">用户</span>
</h3>
<p>出于安全原因，应创建一个新用户来存储邮件：
</p>
<pre># groupadd -g 5000 vmail
# useradd -u 5000 -g vmail -s /usr/bin/nologin -d /home/vmail -m vmail
</pre>
<p>gid 和 uid 都使用 5000 ，这样可以避免和普通用户的冲突。所有你的邮件都会存储在 <code>/home/vmail</code>中。也可以将家目录更改到像是 <code>/var/mail/vmail</code> 这样的你自已定义的目录，需要注意的是下面的所有配置中都要对应修改。
</p>
<h3>
<span id=".E6.95.B0.E6.8D.AE.E5.BA.93"></span><span class="mw-headline" id="数据库">数据库</span>
</h3>
<p>你需要建立一个空数据库和相应的用户。 在这篇文章中，用户： <i>postfix_user</i> 有 读/写 这个数据库： <i>postfix_db</i> 的权限 我们将这个用户的密码设为： <i>hunter2</i> 。 你需要去创建数据库和用户，并给它们合适的权限。下面列出了操作命令：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ mysql -u root -p</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">CREATE DATABASE postfix_db;
GRANT ALL ON postfix_db.* TO 'postfix_user'@'localhost' IDENTIFIED BY 'hunter2';
FLUSH PRIVILEGES;
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 这里没有列出安装mysql的步骤，如果需要请参考这个链接：<a href="../zh-CN/MySQL.html" title="MySQL (简体中文)">Mysql</a>
</div>
<p>现在您可以转到PostfixAdmin的设置页面，让PostfixAdmin创建所需的表并在那里创建用户。
</p>
<h4>
<span id=".E4.BD.BF.E7.94.A8_PostfixAdmin"></span><span class="mw-headline" id="使用_PostfixAdmin">使用 PostfixAdmin</span>
</h4>
<p>请参见： <a href="../en/PostfixAdmin.html" title="PostfixAdmin">PostfixAdmin</a>.
</p>
<h3>
<span id=".E9.80.9A.E4.BF.A1.E5.8A.A0.E5.AF.86.E8.AF.81.E4.B9.A6"></span><span class="mw-headline" id="通信加密证书">通信加密证书</span>
</h3>
<p>您将需要一个SSL证书来加密邮件通信（SMTPS / IMAPS / POP3S）。 如果您没有，请创建一个：
</p>
<pre># cd /etc/ssl/private/
# openssl req -new -x509 -nodes -newkey rsa:4096 -keyout vmail.key -out vmail.crt -days 1460 #days are optional
# chmod 400 vmail.key
# chmod 444 vmail.crt
</pre>
<p>或者，使用<a href="../en/Certbot.html" class="mw-redirect" title="Let's Encrypt">Let's Encrypt</a>创建免费的可信证书。 私钥会生成在 <code>/etc/letsencrypt/live/<i>yourdomain</i>/privkey.pem</code>, 证书会生成在 <code>/etc/letsencrypt/live/<i>yourdomain</i>/fullchain.pem</code>。 相应地更改配置，或将键符号链接到 <code>/etc/ssl/private</code>:
</p>
<pre># ln -s /etc/letsencrypt/live/<i>yourdomain</i>/privkey.pem /etc/ssl/private/vmail.key
# ln -s /etc/letsencrypt/live/<i>yourdomain</i>/fullchain.pem /etc/ssl/private/vmail.crt
</pre>
<h3><span class="mw-headline" id="Postfix">Postfix</span></h3>
<p>Before you copy &amp; paste the configuration below, check if <code>relay_domains</code> has already been already set. If you leave more than one active, you will receive warnings during runtime.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> <code>relay_domains</code> can be dangerous. You usually do not want Postfix to forward mail of strangers. <code>$mydestination</code> is a sane default value. Double check its value before running postfix! See <a rel="nofollow" class="external free" href="http://www.postfix.org/BASIC_CONFIGURATION_README.html#relay_to">http://www.postfix.org/BASIC_CONFIGURATION_README.html#relay_to</a>
</div> 
<p>Also follow <a href="../en/Postfix.html#Secure_SMTP_(receiving)" title="Postfix">Postfix#Secure SMTP (receiving)</a> pointing to the files you created in <a href="#SSL_certificate">#SSL certificate</a><sup>[<a href="../en/ArchWiki:Requests.html#Broken_section_links" class="mw-redirect" title="ArchWiki:Requests">断开的链接</a>：无效的部分]</sup>.
</p>
<h4><span class="mw-headline" id="Setting_up_Postfix">Setting up Postfix</span></h4>
<p>To <code>/etc/postfix/main.cf</code> append:
</p>
<pre>relay_domains = $mydestination
virtual_alias_maps = proxy:mysql:/etc/postfix/virtual_alias_maps.cf
virtual_mailbox_domains = proxy:mysql:/etc/postfix/virtual_mailbox_domains.cf
virtual_mailbox_maps = proxy:mysql:/etc/postfix/virtual_mailbox_maps.cf
virtual_mailbox_base = /home/vmail
virtual_mailbox_limit = 512000000
virtual_minimum_uid = 5000
virtual_transport = virtual
virtual_uid_maps = static:5000
virtual_gid_maps = static:5000
local_transport = virtual
local_recipient_maps = $virtual_mailbox_maps
transport_maps = hash:/etc/postfix/transport

smtpd_sasl_auth_enable = yes
smtpd_sasl_type = dovecot
smtpd_sasl_path = /var/run/dovecot/auth-client
smtpd_recipient_restrictions = permit_mynetworks, permit_sasl_authenticated, reject_unauth_destination
smtpd_relay_restrictions = permit_mynetworks, permit_sasl_authenticated, reject_unauth_destination
smtpd_sasl_security_options = noanonymous
smtpd_sasl_tls_security_options = $smtpd_sasl_security_options
smtpd_tls_security_level = may
smtpd_tls_auth_only = yes
smtpd_tls_received_header = yes
smtpd_tls_cert_file = /etc/ssl/private/vmail.crt
smtpd_tls_key_file = /etc/ssl/private/vmail.key
smtpd_sasl_local_domain = $mydomain
broken_sasl_auth_clients = yes
smtpd_tls_loglevel = 1
smtp_tls_security_level = may
smtp_tls_loglevel = 1
</pre>
<ul><li>In the configuration above <code>virtual_mailbox_domains</code> is a list of the domains that you want to receive mail for. This CANNOT contain the domain that is set in <code>mydestination</code>. That is why we left <code>mydestination</code> to be localhost only.</li></ul>
<ul><li>
<code>virtual_mailbox_maps</code> will contain the information of virtual users and their mailbox locations. We are using a hash file to store the more permanent maps, and these will then override the forwards in the MySQL database.</li></ul>
<ul><li>
<code>virtual_mailbox_base</code> is the base directory where the virtual mailboxes will be stored.</li></ul>
<p>The <code>virtual_uid_maps</code> and <code>virtual_gid_maps</code> are the real system user IDs that the virtual mails will be owned by. This is for storage purposes. 
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Since we will be using a web interface (Roundcube), and do not want people accessing this by any other means, we will be creating this account later without providing any login access.</div>
<h4><span class="mw-headline" id="Create_the_file_structure">Create the file structure</span></h4>
<p>Those new additional settings reference a lot of files that do not even exist yet. We will create them with the following steps.
</p>
<p>If you were setting up your database with PostfixAdmin and created the database schema through PostfixAdmin, you can create the following files. Do not forget to change the password:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/postfix/virtual_alias_maps.cf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">user = postfix_user
password = hunter2
hosts = localhost
dbname = postfix_db
table = alias
select_field = goto
where_field = address
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/postfix/virtual_mailbox_domains.cf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">user = postfix_user
password = hunter2
hosts = localhost
dbname = postfix_db
table = domain
select_field = domain
where_field = domain
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/postfix/virtual_mailbox_maps.cf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">user = postfix_user
password = hunter2
hosts = localhost
dbname = postfix_db
table = mailbox
select_field = maildir
where_field = username
</pre>
<p>For alias domains functionality adjust the following files:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/postfix/main.cf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">virtual_alias_maps = proxy:mysql:/etc/postfix/virtual_alias_maps.cf,proxy:mysql:/etc/postfix/virtual_alias_domains_maps.cf
virtual_alias_domains = proxy:mysql:/etc/postfix/virtual_alias_domains.cf
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/postfix/virtual_alias_domains_maps.cf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">user = postfix_user
password = hunter2
hosts = localhost
dbname = postfix_db
query = SELECT goto FROM alias,alias_domain WHERE alias_domain.alias_domain = '%d' and alias.address = CONCAT('%u', '@', alias_domain.target_domain) AND alias.active = 1 AND alias_domain.active='1'
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/postfix/virtual_alias_domains.cf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">user = postfix_user
password = hunter2
hosts = localhost
dbname = postfix_db
query = SELECT alias_domain FROM alias_domain WHERE alias_domain='%s' AND active = '1'
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  For setups without using PostfixAdmin, create the following files.</div>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/postfix/virtual_alias_maps.cf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">user = postfix_user
password = hunter2
hosts = localhost
dbname = postfix_db
table = domains
select_field = virtual
where_field = domain
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/postfix/virtual_mailbox_domains.cf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">user = postfix_user
password = hunter2
hosts = localhost
dbname = postfix_db
table = forwardings
select_field = destination
where_field = source
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/postfix/virtual_mailbox_maps.cf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">user = postfix_user
password = hunter2
hosts = localhost
dbname = postfix_db
table = users
select_field = concat(domain,'/',email,'/')
where_field = email
</pre>
<p>Run <i>postmap</i> on <i>transport</i> to generate its db:
</p>
<pre># postmap /etc/postfix/transport
</pre>
<h3><span class="mw-headline" id="Dovecot">Dovecot</span></h3>
<p>Instead of using the provided Dovecot example config file, we will create our own <code>/etc/dovecot/dovecot.conf</code>. Please note that the user and group here might be vmail <b>instead of postfix</b>!
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/dovecot/dovecot.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">protocols = imap pop3
auth_mechanisms = plain
passdb {
    driver = sql
    args = /etc/dovecot/dovecot-sql.conf
}
userdb {
    driver = sql
    args = /etc/dovecot/dovecot-sql.conf
}
 
service auth {
    unix_listener auth-client {
        group = postfix
        mode = 0660
        user = postfix
    }
    user = root
}

mail_home = /home/vmail/%d/%n
mail_location = maildir:~

ssl_cert = &lt;/etc/ssl/private/vmail.crt
ssl_key = &lt;/etc/ssl/private/vmail.key
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you instead want to modify <code>dovecot.conf.sample</code>, beware that the default configuration file imports the content of <code>conf.d/*.conf</code>. Those files call other files that are not present in our configuration.</div>
<p>Now we create <code>/etc/dovecot/dovecot-sql.conf</code>, which we just referenced in the config above. Use the following contents and check if everything is set accordingly to your system's configuration.
</p>
<p>If you used PostfixAdmin, then you add the following:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/dovecot/dovecot-sql.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">driver = mysql
connect = host=localhost dbname=postfix_db user=postfix_user password=hunter2
# It is highly recommended to not use deprecated MD5-CRYPT. Read more at http://wiki2.dovecot.org/Authentication/PasswordSchemes
default_pass_scheme = SHA512-CRYPT
# Get the mailbox
user_query = SELECT '/home/vmail/%d/%n' as home, 'maildir:/home/vmail/%d/%n' as mail, 5000 AS uid, 5000 AS gid, concat('dirsize:storage=',  quota) AS quota FROM mailbox WHERE username = '%u' AND active = '1'
# Get the password
password_query = SELECT username as user, password, '/home/vmail/%d/%n' as userdb_home, 'maildir:/home/vmail/%d/%n' as userdb_mail, 5000 as  userdb_uid, 5000 as userdb_gid FROM mailbox WHERE username = '%u' AND active = '1'
# If using client certificates for authentication, comment the above and uncomment the following
#password_query = SELECT null AS password, ‘%u’ AS user
</pre>
<p>Without having used PostfixAdmin you can use:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/dovecot/dovecot-sql.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">driver = mysql
connect = host=localhost dbname=postfix_db user=postfix_user password=hunter2
# It is highly recommended to not use deprecated MD5-CRYPT. Read more at http://wiki2.dovecot.org/Authentication/PasswordSchemes
default_pass_scheme = SHA512-CRYPT
# Get the mailbox
user_query = SELECT '/home/vmail/%d/%n' as home, 'maildir:/home/vmail/%d/%n' as mail, 5000 AS uid, 5000 AS gid, concat('dirsize:storage=',  quota) AS quota FROM users WHERE email = '%u'
# Get the password
password_query = SELECT email as user, password, '/home/vmail/%d/%n' as userdb_home, 'maildir:/home/vmail/%d/%n' as userdb_mail, 5000 as  userdb_uid, 5000 as userdb_gid FROM users WHERE email = '%u'
# If using client certificates for authentication, comment the above and uncomment the following
#password_query = SELECT null AS password, ‘%u’ AS user
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Visit <a rel="nofollow" class="external free" href="https://wiki2.dovecot.org/Variables">https://wiki2.dovecot.org/Variables</a> to learn more about Dovecot variables.</div>
<h4><span class="mw-headline" id="DH_parameters">DH parameters</span></h4>
<p>With v2.3 you are required to provide <code>ssl_dh = &lt;/path/to/dh.pem</code> yourself.
</p>
<p>To generate a new DH parameters file (this will take very long):
</p>
<pre># openssl dhparam -out /etc/dovecot/dh.pem 4096
</pre>
<p>then add the file to <code>/etc/dovecot/dovecot.conf</code>
</p>
<pre>ssl_dh = &lt;/etc/dovecot/dh.pem
</pre>
<h3><span class="mw-headline" id="PostfixAdmin">PostfixAdmin</span></h3>
<p>See <a href="../en/PostfixAdmin.html" title="PostfixAdmin">PostfixAdmin</a>.
</p>
<p>Note: To match the configuration in this file, config.inc.php should contain the following.
</p>
<pre>   # /etc/webapps/postfixadmin/config.inc.php
   ...
   $CONF['domain_path'] = 'YES';
   $CONF['domain_in_mailbox'] = 'NO';
   ...
</pre>
<h3><span class="mw-headline" id="Roundcube">Roundcube</span></h3>
<p>Make sure that both <code>extension=pdo_mysql</code> and <code>extension=iconv</code> are uncommented in your <code>php.ini</code> file. Also check the <code>.htaccess</code> for access restrictions. Assuming that localhost is your current host, navigate a browser to <code><a rel="nofollow" class="external free" href="http://localhost/roundcube/installer/">http://localhost/roundcube/installer/</a></code> and follow the instructions. 
</p>
<p>Roundcube needs a separate database to work. You should not use the same database for Roundcube and PostfixAdmin. Create a second database <code>roundcube_db</code> and a new user named <code>roundcube_user</code>.
</p>
<p>While running the installer ...
</p>
<ul>
<li>For the address of the IMAP host, use <code>ssl://localhost/</code> or <code>tls://localhost/</code> and not just <code>localhost</code>.</li>
<li>Use port <code>993</code>. Likewise with SMTP.</li>
<li>For the address of the SMTP host, use <code>tls://localhost/</code> and port <code>587</code> if you used the proper TLS mode.</li>
</ul>
<dl><dd>(use <code>ssl://localhost/</code> with port <code>465</code> if you used the wrapper mode)</dd></dl>
<ul><li>See <a href="#Postfix">#Postfix</a> for an explanation on that.</li></ul>
<p>The post install process is similar to any other webapp like <a href="../en/PhpMyAdmin.html" title="PhpMyAdmin">PhpMyAdmin</a> or PostFixAdmin. The configuration file is in <code>/etc/webapps/roundcubemail/config/config.inc.php</code> which works as an override over <code>default.inc.php</code>.
</p>
<h4><span class="mw-headline" id="Apache_configuration">Apache configuration</span></h4>
<p>If you are using Apache, copy the example configuration file to your webserver configuration directory.
</p>
<pre># cp /etc/webapps/roundcubemail/apache.conf /etc/httpd/conf/extra/httpd-roundcubemail.conf
</pre>
<p>Add the following line in
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/httpd/conf/httpd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Include conf/extra/httpd-roundcubemail.conf
</pre>
<h4><span class="mw-headline" id="Roundcube:_Change_Password_Plugin">Roundcube: Change Password Plugin</span></h4>
<p>To let users change their passwords from within Roundcube, do the following:
</p>
<p>Enable the password plugin by adding this line to
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/webapps/roundcubemail/config/config.inc.php</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">$config['plugins'] = array('password');
</pre>
<p>Configure the password plugin and make sure you alter the settings accordingly:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/share/webapps/roundcubemail/plugins/password/config.inc.php</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">$config['password_driver'] = 'sql';
$config['password_db_dsn'] = 'mysql://&lt;postfix_database_user&gt;:&lt;password&gt;@localhost/&lt;postfix_database_name&gt;';
// for dovecot salted passwords only
// $config['password_dovecotpw'] = 'doveadm pw';
// $config['password_dovecotpw_method'] = 'SHA512-CRYPT';
// $config['password_dovecotpw_with_method'] = true;
$config['password_query'] = 'UPDATE mailbox SET password=%c WHERE username=%u';
</pre>
<h2><span class="mw-headline" id="Fire_it_up">Fire it up</span></h2>
<p>All necessary daemons should be started in order to test the configuration. <a href="../en/Systemd.html#Using_units" class="mw-redirect" title="Start">Start</a> both <code>postfix</code> and <code>dovecot</code>.
</p>
<p>Now for testing purposes, create a domain and mail account in PostfixAdmin. Try to login to this account using Roundcube. Now send yourself a mail.
</p>
<h2><span class="mw-headline" id="Testing">Testing</span></h2>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a><b>This article or section needs language, wiki syntax or style improvements. See <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a> for reference.</b><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Needs some cleanup. There are probably more general ways to write this. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Virtual_user_mail_system_with_Postfix,_Dovecot_and_Roundcube_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">Talk:Virtual user mail system with Postfix, Dovecot and Roundcube (简体中文)#</a>)</div>
</div>
<p>Now lets see if Postfix is going to deliver mail for our test user.
</p>
<pre>nc servername 25
helo testmail.org
mail from:&lt;test@testmail.org&gt;
rcpt to:&lt;cactus@virtualdomain.tld&gt;
data
This is a test email.
.
quit
</pre>
<h3><span class="mw-headline" id="Error_response">Error response</span></h3>
<pre>451 4.3.0 &lt;lisi@test.com&gt;:Temporary lookup failure
</pre>
<p>Maybe you have entered the wrong user/password for MySQL or the MySQL socket is not in the right place.
</p>
<p>This error will also occur if you neglect to run newaliases at least once before starting postfix. MySQL is not required for local only usage of postfix.
</p>
<pre>550 5.1.1 &lt;email@spam.me&gt;: Recipient address rejected: User unknown in virtual mailbox table.
</pre>
<p>Double check content of mysql_virtual_mailboxes.cf and check the main.cf for mydestination
</p>
<h3><span class="mw-headline" id="See_that_you_have_received_a_email">See that you have received a email</span></h3>
<p>Now type <code>$ find /home/vmailer</code>.
</p>
<p>You should see something like the following:
</p>
<pre>/home/vmailer/virtualdomain.tld/cactus@virtualdomain.tld
/home/vmailer/virtualdomain.tld/cactus@virtualdomain.tld/tmp
/home/vmailer/virtualdomain.tld/cactus@virtualdomain.tld/cur
/home/vmailer/virtualdomain.tld/cactus@virtualdomain.tld/new
/home/vmailer/virtualdomain.tld/cactus@virtualdomain.tld/new/1102974226.2704_0.bonk.testmail.org
</pre>
<p>The key is the last entry. This is an actual email, if you see that, it is working.
</p>
<h2><span class="mw-headline" id="Optional_Items">Optional Items</span></h2>
<p>Although these items are not required, they definitely add more completeness to your setup
</p>
<h3><span class="mw-headline" id="Quota">Quota</span></h3>
<p>To enable mailbox quota support by dovecot, do the following: 
</p>
<ul><li>First add the following lines to /etc/dovecot/dovecot.conf</li></ul>
<pre>dict {
	quotadict = mysql:/etc/dovecot/dovecot-dict-sql.conf.ext
}
service dict {
	unix_listener dict {
		group = vmail
		mode = 0660
		user = vmail
	}
	user = root
}
service quota-warning {
	executable = script /usr/local/bin/quota-warning.sh
	user = vmail
	unix_listener quota-warning {
		group = vmail
		mode = 0660
		user = vmail
	}
}	
mail_plugins=quota
protocol pop3 {
	 mail_plugins = quota
	 pop3_client_workarounds = outlook-no-nuls oe-ns-eoh
	 pop3_uidl_format = %08Xu%08Xv
}
protocol lda {
	mail_plugins = quota
	postmaster_address = postmaster@yourdomain.com
}
protocol imap {
	mail_plugins = $mail_plugins imap_quota
	mail_plugin_dir = /usr/lib/dovecot/modules
}
plugin {
       quota = dict:User quota::proxy::quotadict
       quota_rule2 = Trash:storage=+10%%
       quota_warning = storage=100%% quota-warning +100 %u
       quota_warning2 = storage=95%% quota-warning +95 %u
       quota_warning3 = storage=80%% quota-warning +80 %u
       quota_warning4 = -storage=100%% quota-warning -100 %u # user is no longer over quota
}
</pre>
<ul><li>Create a new file /etc/dovecot/dovecot-dict-sql.conf.ext with the following code:</li></ul>
<pre>connect = host=localhost dbname=yourdb user=youruser password=yourpassword
map {
	pattern = priv/quota/storage
	table = quota2
	username_field = username
	value_field = bytes
}
map {
	pattern = priv/quota/messages
	table = quota2
	username_field = username
	value_field = messages
}
</pre>
<ul><li>Create a warning script /usr/local/bin/quota-warning.sh and make sure it is executable. This warning script works with postfix lmtp configuration as well.</li></ul>
<pre> #!/bin/sh
 BOUNDARY="$1"
 USER="$2"
 MSG=""
 if [[ "$BOUNDARY" = "+100" ]]; then
    MSG="Your mailbox is now overfull (&gt;100%). In order for your account to continue functioning properly, you need to remove some emails NOW."
 elif [[ "$BOUNDARY" = "+95" ]]; then
    MSG="Your mailbox is now over 95% full. Please remove some emails ASAP."
 elif [[ "$BOUNDARY" = "+80" ]]; then
    MSG="Your mailbox is now over 80% full. Please consider removing some emails to save space."
 elif [[ "$BOUNDARY" = "-100" ]]; then
    MSG="Your mailbox is now back to normal (&lt;100%)."
 fi
 
 cat &lt;&lt; EOF | /usr/lib/dovecot/dovecot-lda -d $USER -o "plugin/quota=maildir:User quota:noenforcing"
 From: postmaster@yourdomain.com
 Subject: Email Account Quota Warning
 
 Dear User,
 
 $MSG
 
 Best regards,
 Your Mail System
 EOF
</pre>
<ul><li>Edit the user_query line and add iterat_query in dovecot-sql.conf as following:</li></ul>
<pre> user_query = SELECT '/home/vmail/%d/%n' as home, 'maildir:/home/vmail/%d/%n' as mail, 5000 AS uid, 5000 AS gid, concat('*:bytes=', quota) AS quota_rule FROM mailbox WHERE username = '%u' AND active = '1'
 iterate_query = SELECT username AS user FROM mailbox
</pre>
<ul><li>Set up LDA as described above under SpamAssassin. If you are not using SpamAssassin, the pipe should look like this in /etc/postfix/master.cf :</li></ul>
<pre> dovecot    unix  -       n       n       -       -       pipe
 flags=DRhu user=vmail:vmail argv=/usr/lib/dovecot/deliver -f ${sender} -d ${recipient}
</pre>
<p>As above activate it in Postfix main.cf
</p>
<pre> virtual_transport = dovecot
</pre>
<ul><li>You can set up quota per each mailbox in postfixadmin. Make sure the relevant lines in config.inc.php look like this:</li></ul>
<pre>$CONF['quota'] = 'YES';
$CONF['quota_multiplier'] = '1024000';
</pre>
<p>Restart postfix and dovecot services. If things go well, you should be able to list all users' quota and usage by the this command:
</p>
<pre>doveadm quota get -A
</pre>
<p>You should be able to see the quota in roundcube too.
</p>
<h3><span class="mw-headline" id="Autocreate_and_autosubscribe_folders_in_Dovecot">Autocreate and autosubscribe folders in Dovecot</span></h3>
<p>To automatically create the "usual" mail hierarchy, modify your <code>/etc/dovecot/dovecot.conf</code> as follows, editing to your specific needs.
</p>
<pre>namespace inbox {
  type = private
  separator = /
  prefix =
  inbox = yes
}
namespace inbox {
  mailbox Drafts {
    auto = subscribe
    special_use = \Drafts
  }
  mailbox Junk {
   auto = subscribe
   special_use = \Junk
 }
 mailbox Trash {
   auto = subscribe
   special_use = \Trash
 }
 mailbox Sent {
   auto = subscribe
   special_use = \Sent
 }
}</pre>
<h3><span class="mw-headline" id="Dovecot_public_folder_and_global_ACLs">Dovecot public folder and global ACLs</span></h3>
<p>In this section we enable IMAP namespace public folders combined with global and per-folder <a href="../en/Access_Control_Lists.html" class="mw-redirect" title="ACL">ACLs</a>.
</p>
<p>First, add the following lines to <code>/etc/dovecot/dovecot.conf</code>:
</p>
<pre>### ACLs
mail_plugins = acl
protocol imap {
  mail_plugins = $mail_plugins imap_acl
}
plugin {
 acl = vfile
 # With global ACL files in /etc/dovecot/dovecot-acls file (v2.2.11+):
 acl = vfile:/etc/dovecot/dovecot-acl
}

### Public Mailboxes
namespace {
 type = public
 separator = /
 prefix = public/
 location = maildir:/home/vmail/public:INDEXPVT=~/public
 subscriptions = no
 list = children
}</pre>
<p>Create the root directory <code>/home/vmail/public</code> and the folders you want to publicly share, for example (the period is required!) <code>/home/vmail/public/.example-1</code>.
</p>
<p>Change the ownership of all files in the root directory:
</p>
<pre>$ chown -R vmail:vmail /home/vmail/public
</pre>
<p>Finally, create and modify your global ACL file to allow users access to these folders:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/dovecot/dovecot-acl</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">public/* user=admin@example.com lrwstipekxa</pre>
<p>In the above example, user <code>admin@example.com</code> has access to, and can do anything to, all the public folders. Edit to fit your specific needs.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>
<code>lrwstipekxa</code> are the permissions being granted. Visit the Dovecot wiki for further details.</li>
<li>Make sure the user subscribes to the folders in the client they are using.</li>
</ul>
</div>
<h3><span class="mw-headline" id="Fighting_Spam">Fighting Spam</span></h3>
<p>As an alternative to SpamAssassin, consider <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=rspamd">rspamd</a></span>. Out of the box, it delivers an amazing amount of spam reduction, greylisting, etc and includes a nifty webui. See also <a rel="nofollow" class="external autonumber" href="https://thomas-leister.de/en/mailserver-debian-stretch/">[1]</a>.
</p>
<h2><span class="mw-headline" id="Sidenotes">Sidenotes</span></h2>
<h3><span class="mw-headline" id="Alternative_vmail_folder_structure">Alternative vmail folder structure</span></h3>
<p>Instead of having a directory structure like <code>/home/vmail/example.com/user@example.com</code> you can have cleaner subdirectories (without the additional domain name) by replacing <code>select_field</code> and <code>where_field</code> with:
</p>
<pre>query = SELECT CONCAT(SUBSTRING_INDEX(email,'@',-1),'/',SUBSTRING_INDEX(email,'@',1),'/') FROM users WHERE email='%s'</pre>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3>
<span id="IMAP.2FPOP3_client_failing_to_receive_mails"></span><span class="mw-headline" id="IMAP/POP3_client_failing_to_receive_mails">IMAP/POP3 client failing to receive mails</span>
</h3>
<p>If you get similar errors, take a look into <code>/var/log/mail.log</code> or use <code>journalctl -xn --unit postfix.service</code> to find out more.
</p>
<p>It may turn out that the Maildir <code>/home/vmail/mail@domain.tld</code> is just being created if there is at least one email waiting. Otherwise there would not be any need for the directory creation before.
</p>
<h3>
<span id="Roundcube_not_able_to_delete_emails_or_view_any_.27standard.27_folders"></span><span class="mw-headline" id="Roundcube_not_able_to_delete_emails_or_view_any_'standard'_folders">Roundcube not able to delete emails or view any 'standard' folders</span>
</h3>
<p>Ensure that the Roundcube config.inc.php file contains the following:
</p>
<pre>$rcmail_config['default_imap_folders'] = array('INBOX', 'Drafts', 'Sent', 'Junk', 'Trash');
$rcmail_config['create_default_folders'] = true;
$rcmail_config['protect_default_folders'] = true;</pre>
<h3>
<span id="LMTP_.2F_Sieve"></span><span class="mw-headline" id="LMTP_/_Sieve">LMTP / Sieve</span>
</h3>
<p>Is LMTP not connecting to sieve? Ensure that your server is not routing the messages locally. This can be set in <code> /etc/postfix/main.cf</code>:
</p>
<pre>mydestination =</pre>
<h3>
<span id="Are_your_emails_sent_to_gmail_users_ending_up_in_their_junk.2Fspam_folders.3F"></span><span class="mw-headline" id="Are_your_emails_sent_to_gmail_users_ending_up_in_their_junk/spam_folders?">Are your emails sent to gmail users ending up in their junk/spam folders?</span>
</h3>
<p>Google gmail (and most other large email providers) will send your emails straight into your recipients junk / spam folder if you have not implemented SPF / DKIM / DMARC policies. (Hint: Rspamd, via the link above, shows you how to set this up, and will DKIM sign your emails.)
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul><li><a href="https://wiki.gentoo.org/wiki/Complete_Virtual_Mail_Server" class="extiw" title="gentoo:Complete Virtual Mail Server">Gentoo:Complete Virtual Mail Server</a></li></ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../zh-CN/Category:Mail_server.html" title="Category:Mail server (简体中文)">Mail server (简体中文)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Merge.html" title="Category:Pages or sections flagged with Template:Merge">Pages or sections flagged with Template:Merge</a></li>
<li><a href="../en/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Virtual_user_mail_system_with_Postfix,_Dovecot_and_Roundcube_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;oldid=662560">https://wiki.archlinux.org/index.php?title=Virtual_user_mail_system_with_Postfix,_Dovecot_and_Roundcube_(简体中文)&amp;oldid=662560</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 18 April 2021, at 21:24.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
