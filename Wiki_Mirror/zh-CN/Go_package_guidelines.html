<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Go package guidelines (简体中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Go_package_guidelines_简体中文 rootpage-Go_package_guidelines_简体中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Go package guidelines (简体中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="toc" style="display:block; text-align: center; margin-bottom: 1em;">
<b><a href="../en/Arch_package_guidelines.html" title="Arch package guidelines">Arch 软件包准则</a></b>
<hr>
<p><a href="../zh-CN/32-bit_package_guidelines.html" title="32-bit package guidelines (简体中文)">32-bit</a> – <a href="../zh-CN/CLR_package_guidelines.html" title="CLR package guidelines (简体中文)">CLR</a> – <a href="../zh-CN/CMake_package_guidelines.html" title="CMake package guidelines (简体中文)">CMake</a> – <a href="/index.php?title=Cross-compiling_tools_package_guidelines_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;action=edit&amp;redlink=1" class="new" title="Cross-compiling tools package guidelines (简体中文) (page does not exist)">Cross</a> – <a href="/index.php?title=DKMS_package_guidelines_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;action=edit&amp;redlink=1" class="new" title="DKMS package guidelines (简体中文) (page does not exist)">DKMS</a> – <a href="../zh-CN/Eclipse_plugin_package_guidelines.html" title="Eclipse plugin package guidelines (简体中文)">Eclipse</a> – <a href="/index.php?title=Electron_package_guidelines_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;action=edit&amp;redlink=1" class="new" title="Electron package guidelines (简体中文) (page does not exist)">Electron</a> – <a href="/index.php?title=Font_packaging_guidelines_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;action=edit&amp;redlink=1" class="new" title="Font packaging guidelines (简体中文) (page does not exist)">Font</a> – <a href="../zh-CN/Free_Pascal_package_guidelines.html" title="Free Pascal package guidelines (简体中文)">Free Pascal</a> – <a href="/index.php?title=GNOME_package_guidelines_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;action=edit&amp;redlink=1" class="new" title="GNOME package guidelines (简体中文) (page does not exist)">GNOME</a> – <a class="mw-selflink selflink">Go</a> – <a href="../zh-CN/Haskell_package_guidelines.html" title="Haskell package guidelines (简体中文)">Haskell</a> – <a href="../zh-CN/Java_package_guidelines.html" title="Java package guidelines (简体中文)">Java</a> – <a href="/index.php?title=KDE_package_guidelines_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;action=edit&amp;redlink=1" class="new" title="KDE package guidelines (简体中文) (page does not exist)">KDE</a> – <a href="../zh-CN/Kernel_module_package_guidelines.html" title="Kernel module package guidelines (简体中文)">Kernel</a> – <a href="/index.php?title=Lisp_package_guidelines_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;action=edit&amp;redlink=1" class="new" title="Lisp package guidelines (简体中文) (page does not exist)">Lisp</a> – <a href="/index.php?title=Meson_package_guidelines_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;action=edit&amp;redlink=1" class="new" title="Meson package guidelines (简体中文) (page does not exist)">Meson</a> – <a href="/index.php?title=MinGW_package_guidelines_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;action=edit&amp;redlink=1" class="new" title="MinGW package guidelines (简体中文) (page does not exist)">MinGW</a> – <a href="/index.php?title=Node.js_package_guidelines_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;action=edit&amp;redlink=1" class="new" title="Node.js package guidelines (简体中文) (page does not exist)">Node.js</a> – <a href="/index.php?title=Nonfree_applications_package_guidelines_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;action=edit&amp;redlink=1" class="new" title="Nonfree applications package guidelines (简体中文) (page does not exist)">Nonfree</a> – <a href="/index.php?title=OCaml_package_guidelines_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;action=edit&amp;redlink=1" class="new" title="OCaml package guidelines (简体中文) (page does not exist)">OCaml</a> – <a href="/index.php?title=Perl_package_guidelines_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;action=edit&amp;redlink=1" class="new" title="Perl package guidelines (简体中文) (page does not exist)">Perl</a> – <a href="../zh-CN/PHP_package_guidelines.html" title="PHP package guidelines (简体中文)">PHP</a> – <a href="../zh-CN/Python_package_guidelines.html" title="Python package guidelines (简体中文)">Python</a> – <a href="/index.php?title=R_package_guidelines_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;action=edit&amp;redlink=1" class="new" title="R package guidelines (简体中文) (page does not exist)">R</a> – <a href="/index.php?title=Ruby_Gem_package_guidelines_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;action=edit&amp;redlink=1" class="new" title="Ruby Gem package guidelines (简体中文) (page does not exist)">Ruby</a> – <a href="/index.php?title=Rust_package_guidelines_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;action=edit&amp;redlink=1" class="new" title="Rust package guidelines (简体中文) (page does not exist)">Rust</a> – <a href="../zh-CN/VCS_package_guidelines.html" title="VCS package guidelines (简体中文)">VCS</a> – <a href="/index.php?title=Web_application_package_guidelines_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;action=edit&amp;redlink=1" class="new" title="Web application package guidelines (简体中文) (page does not exist)">Web</a> – <a href="/index.php?title=Wine_package_guidelines_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;action=edit&amp;redlink=1" class="new" title="Wine package guidelines (简体中文) (page does not exist)">Wine</a>
</p>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>翻译状态：</strong>本文是 <a href="../en/Go_package_guidelines.html" title="Go package guidelines">Go package guidelines</a> 的<a href="../zh-CN/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (简体中文)">翻译</a>。上次翻译日期：2018-05-03。如果英文版本有所<a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Go_package_guidelines&amp;diff=0&amp;oldid=491187">更改</a>，则您可以帮助同步翻译。</div>
<p>Arch Linux 对 <a href="https://en.wikipedia.org/wiki/Go_(programming_language)" class="extiw" title="wikipedia:Go (programming language)">Go</a> 的支持非常完善。
</p>
<p>软件包 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=go">go</a></span> 中包含了 <b>go</b> 工具 (用于运行 <code>go fix</code>, <code>go build</code> 等)。 另外还有个提供 <code>gccgo</code> 的 <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gcc-go">gcc-go</a></span> 软件包。
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#%E9%80%9A%E7%94%A8%E5%87%86%E5%88%99"><span class="tocnumber">1</span> <span class="toctext">通用准则</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#%E5%91%BD%E5%90%8D"><span class="tocnumber">1.1</span> <span class="toctext">命名</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#%E6%89%93%E5%8C%85"><span class="tocnumber">1.2</span> <span class="toctext">打包</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4">
<a href="#PKGBUILD_%E8%8C%83%E4%BE%8B"><span class="tocnumber">2</span> <span class="toctext">PKGBUILD 范例</span></a>
<ul>
<li class="toclevel-2 tocsection-5">
<a href="#Go_%E8%AF%AD%E8%A8%80%E5%BC%80%E5%8F%91%E7%9A%84%E7%8B%AC%E7%AB%8B%E7%A8%8B%E5%BA%8F_PKGBUILD"><span class="tocnumber">2.1</span> <span class="toctext">Go 语言开发的独立程序 PKGBUILD</span></a>
<ul>
<li class="toclevel-3 tocsection-6"><a href="#%E5%8F%82%E8%80%83%E7%A4%BA%E4%BE%8B%E5%8C%85"><span class="tocnumber">2.1.1</span> <span class="toctext">参考示例包</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-7">
<a href="#%E4%BB%85%E5%8C%85%E5%90%AB%E5%8D%95%E4%B8%AAGo%E6%96%87%E4%BB%B6%E7%9A%84%E7%A8%8B%E5%BA%8F_PKGBUILD"><span class="tocnumber">2.2</span> <span class="toctext">仅包含单个Go文件的程序 PKGBUILD</span></a>
<ul>
<li class="toclevel-3 tocsection-8"><a href="#%E5%8F%82%E8%80%83%E7%A4%BA%E4%BE%8B%E5%8C%85_2"><span class="tocnumber">2.2.1</span> <span class="toctext">参考示例包</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-9">
<a href="#%E5%8C%85%E5%90%AB%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6%E7%9A%84Go%E8%AF%AD%E8%A8%80%E5%BA%93_PKGBUILD"><span class="tocnumber">2.3</span> <span class="toctext">包含可执行文件的Go语言库 PKGBUILD</span></a>
<ul>
<li class="toclevel-3 tocsection-10"><a href="#%E4%BD%BF%E7%94%A8_go_get"><span class="tocnumber">2.3.1</span> <span class="toctext">使用 <i>go get</i></span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#%E4%BD%BF%E7%94%A8_go_get_2"><span class="tocnumber">2.3.2</span> <span class="toctext">使用 <i>go get</i></span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<h2>
<span id=".E9.80.9A.E7.94.A8.E5.87.86.E5.88.99"></span><span class="mw-headline" id="通用准则">通用准则</span>
</h2>
<h3>
<span id=".E5.91.BD.E5.90.8D"></span><span class="mw-headline" id="命名">命名</span>
</h3>
<ul>
<li>对于使用 Go 语言编写的软件库，请使用小写字母的 <code>go-<i>库名</i></code> 作为软件包名。
<ul><li>如果软件库名本身就是以 <code>go-</code> 开头的，请不要使用 <code>go-<i>go-模块名</i></code> 这样的名字，而改用 <code>go-<i>模块名</i></code>。</li></ul>
</li>
<li>对于使用"go"工具下载的软件包，只有当它不是从tar包或者tagged提交(而是从trunk/HEAD)下载源码时，软件包名才添加"-git"后缀。
<ul>
<li>类似的，对于mercurial 版本控制系统，只有当软件包未从release-revision下载源码时，才添加"-hg"后缀。</li>
<li>其他版本控制系统，请一并参考该准则。</li>
<li>"go"工具下载那个分支或者Tag通常有他自己的一套逻辑。请参考 <code>go get --help</code>.</li>
</ul>
</li>
<li>如果有多个同名的软件包，可考虑将作者的名字添加到软件包名之中，例如：<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/dcpu16-kballard/">dcpu16-kballard</a></span><sup><small>AUR</small></sup>。
<ul><li>当然，通常情况下，最流行的软件包会使用最短或者"最佳"的软件包名。</li></ul>
</li>
<li>如果软件开发者本身并没有正式的官方发布，那么这种后缀名 (例如 <code>-hg</code>, <code>-git</code> 或 <code>-svn</code>) 只是可选的。 一方面，这种软件包通常都是直接通过源码版本库下载使用的。另一方面, 大多数 Go 语言项目从不发布任何tarball，而只发布源码版本库。并将版本库的master分支、HEAD提交以外的分支、Tag作为官方发布的方式。另一方面，Go语言官方的模块安装方式 <code>go get</code> 也往往直接使用源码版本库。所以请根据情况作出最佳选择。</li>
</ul>
<h3>
<span id=".E6.89.93.E5.8C.85"></span><span class="mw-headline" id="打包">打包</span>
</h3>
<ul>
<li>Go 语言项目通常只包含软件库、可执行文件或者两者俱有。请以合适的方式打包他们。后续有几个例子以供参考。</li>
<li>有些 Go 语言项目并不支持最新版本的Go编译。这种情况下
<ul><li>直接执行 <code>go build -fix</code> 一般就可以搞定了。如果仍有问题，请上报给上游开发者，并且他们修复。</li></ul>
</li>
<li>有些Go语言项目并没有版本号或者授权协议文件。这种情况下：
<ul>
<li>使用 license=('unknown') 并向上游开发者提交授权协议缺失的报告。</li>
<li>如果没有版本号，请使用 "0.1", "1" 或者Git库的revision ( 其他版本控制系统类似)。</li>
<li>作为备选，可以用当前日期作为版本号，格式形如 <code>YYYYMMDD</code>。</li>
</ul>
</li>
</ul>
<h2>
<span id="PKGBUILD_.E8.8C.83.E4.BE.8B"></span><span class="mw-headline" id="PKGBUILD_范例">PKGBUILD 范例</span>
</h2>
<h3>
<span id="Go_.E8.AF.AD.E8.A8.80.E5.BC.80.E5.8F.91.E7.9A.84.E7.8B.AC.E7.AB.8B.E7.A8.8B.E5.BA.8F_PKGBUILD"></span><span class="mw-headline" id="Go_语言开发的独立程序_PKGBUILD">Go 语言开发的独立程序 PKGBUILD</span>
</h3>
<pre># Maintainer: NAME &lt;EMAIL&gt;

pkgname=PACKAGE NAME
pkgver=1.2.3
pkgrel=1
pkgdesc="PACKAGE DESCRIPTION"
arch=('x86_64' 'i686')
url="http://SERVER/$pkgname/"
license=('MIT')
makedepends=('go')
options=('!strip' '!emptydirs')
source=("http://SERVER/$pkgname/$pkgname-$pkgver.tar.gz")
sha256sums=('00112233445566778899aabbccddeeff')

build() {
  cd "$pkgname-$pkgver"

  go build
}

package() {
  cd "$pkgname-$pkgver"

  install -Dm755 "$pkgname-$pkgver" "$pkgdir/usr/bin/$pkgname"
  install -Dm644 LICENSE "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}

# vim:set ts=2 sw=2 et:</pre>
<h4>
<span id=".E5.8F.82.E8.80.83.E7.A4.BA.E4.BE.8B.E5.8C.85"></span><span class="mw-headline" id="参考示例包">参考示例包</span>
</h4>
<ul>
<li><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gendesk">gendesk</a></span></li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/dcpu16/">dcpu16</a></span><sup><small>AUR</small></sup>
</li>
</ul>
<h3>
<span id=".E4.BB.85.E5.8C.85.E5.90.AB.E5.8D.95.E4.B8.AAGo.E6.96.87.E4.BB.B6.E7.9A.84.E7.A8.8B.E5.BA.8F_PKGBUILD"></span><span class="mw-headline" id="仅包含单个Go文件的程序_PKGBUILD">仅包含单个Go文件的程序 PKGBUILD</span>
</h3>
<pre># Maintainer: NAME &lt;EMAIL&gt;

pkgname=PACKAGE NAME
pkgver=1.2.3
pkgrel=1
pkgdesc="PACKAGE DESCRIPTION"
arch=('x86_64' 'i686')
url="http://SERVER/$pkgname/"
license=('GPL3')
makedepends=('go')
options=('!strip' '!emptydirs')
source=("http://SERVER/$pkgname/$pkgname.go")
sha256sums=('00112233445566778899aabbccddeeff')

build() {
  go build -o "$pkgname"
}

package() {
  install -Dm755 "$pkgname" "$pkgdir/usr/bin/$pkgname"
}

# vim:set ts=2 sw=2 et:</pre>
<h4>
<span id=".E5.8F.82.E8.80.83.E7.A4.BA.E4.BE.8B.E5.8C.85_2"></span><span class="mw-headline" id="参考示例包_2">参考示例包</span>
</h4>
<ul><li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gorun/">gorun</a></span><sup><small>AUR</small></sup>
</li></ul>
<h3>
<span id=".E5.8C.85.E5.90.AB.E5.8F.AF.E6.89.A7.E8.A1.8C.E6.96.87.E4.BB.B6.E7.9A.84Go.E8.AF.AD.E8.A8.80.E5.BA.93_PKGBUILD"></span><span class="mw-headline" id="包含可执行文件的Go语言库_PKGBUILD">包含可执行文件的Go语言库 PKGBUILD</span>
</h3>
<h4>
<span id=".E4.BD.BF.E7.94.A8_go_get"></span><span class="mw-headline" id="使用_go_get">使用 <i>go get</i></span>
</h4>
<p>这是推荐的使用"go get"的方式，请优先选用这种方式，后文介绍的那种仅供参考。
</p>
<p>这种方式将依赖于"go get"。
</p>
<p>通常情况下你无需修改 build() 或 package() 函数，只需要修改前面定义的变量 (pkgname 等)即可。
</p>
<p>如果打包失败，请先确保手动执行"go get"能成功。
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>提示：</strong>  如果打包失败，尝试去掉 <code>/...</code>再试试！</div>
<pre># Maintainer: NAME &lt;EMAIL&gt;

pkgname=codesearch
pkgver=20120515
pkgrel=1
pkgdesc="Code indexing and search written in Go"
arch=('x86_64' 'i686')
url="https://github.com/google/codesearch"
license=('BSD')
depends=('go')
makedepends=('mercurial')
options=('!strip' '!emptydirs')
_gourl=github.com/google/codesearch

build() {
  GOPATH="$srcdir" go get -fix -v -x ${_gourl}/...
}

check() {
  GOPATH="$GOPATH:$srcdir" go test -v -x ${_gourl}/...
}

package() {
  mkdir -p "$pkgdir/usr/bin"
  install -p -m755 "$srcdir/bin/"* "$pkgdir/usr/bin"

  mkdir -p "$pkgdir/$GOPATH"
  cp -Rv --preserve=timestamps "$srcdir/"{src,pkg} "$pkgdir/$GOPATH"

  # Package license (if available)
  for f in LICENSE COPYING LICENSE.* COPYING.*; do
    if [ -e "$srcdir/src/$_gourl/$f" ]; then
      install -Dm644 "$srcdir/src/$_gourl/$f" \
        "$pkgdir/usr/share/licenses/$pkgname/$f"
    fi
  done
}

# vim:set ts=2 sw=2 et:</pre>
<p>感谢 Rémy Oudompheng‎ 提供该范例。
</p>
<h4>
<span id=".E4.BD.BF.E7.94.A8_go_get_2"></span><span class="mw-headline" id="使用_go_get_2">使用 <i>go get</i></span>
</h4>
<p>另外一种依靠 <code>go get</code>的方式如下。
</p>
<p>一般不需要修改 build() 或 package() 函数，只需要修改前面的变量 (pkgname 等)即可。
</p>
<p>如果打包有问题，请先确保手动执行 <code>go get</code> 没问题。
</p>
<pre># Maintainer: NAME &lt;EMAIL&gt;

pkgname=PACKAGE NAME
pkgver=1.2.3
pkgrel=1
pkgdesc="PACKAGE DESCRIPTION"
arch=('x86_64' 'i686')
url="http://SERVER/$pkgname/"
license=('MIT')
makedepends=('go' 'git')
options=('!strip' '!emptydirs')
_gourl=SERVER.NET/PATH/MODULENAME

build() {
  export GOROOT=/usr/lib/go

  rm -rf build
  mkdir -p build/go
  cd build/go

  for f in "$GOROOT/"*; do
    ln -s "$f"
  done

  rm pkg
  mkdir pkg
  cd pkg

  for f in "$GOROOT/pkg/"*; do
    ln -s "$f"
  done

  platform=`for f in "$GOROOT/pkg/"*; do echo \`basename $f\`; done|grep linux`

  rm -f "$platform"
  mkdir "$platform"
  cd "$platform"

  for f in "$GOROOT/pkg/$platform/"*.h; do
    ln -s "$f"
  done

  export GOROOT="$srcdir/build/go"
  export GOPATH="$srcdir/build"

  go get -fix "$_gourl"

  # Prepare executable
  if [ -d "$srcdir/build/src" ]; then
    cd "$srcdir/build/src/$_gourl"
    go build -o "$srcdir/build/$pkgname"
  else
    echo 'Old sources for a previous version of this package are already present!'
    echo 'Build in a chroot or uninstall the previous version.'
    return 1
  fi
}

package() {
  export GOROOT="$GOPATH"

  # Package go package files
  for f in "$srcdir/build/go/pkg/"* "$srcdir/build/pkg/"*; do
    # If it's a directory
    if [ -d "$f" ]; then
      cd "$f"
      mkdir -p "$pkgdir/$GOROOT/pkg/`basename $f`"
      for z in *; do
        # Check if the directory name matches
        if [ "$z" == `echo $_gourl | cut -d/ -f1` ]; then
          cp -r $z "$pkgdir/$GOROOT/pkg/`basename $f`"
        fi
      done
      cd ..
    fi
  done

  # Package source files
  if [ -d "$srcdir/build/src" ]; then
    mkdir -p "$pkgdir/$GOROOT/src/pkg"
    cp -r "$srcdir/build/src/"* "$pkgdir/$GOROOT/src/pkg/"
    find "$pkgdir" -depth -type d -name .git -exec rm -r {} \;
  fi

  # Package license (if available)
  for f in LICENSE COPYING; do
    if [ -e "$srcdir/build/src/$_gourl/$f" ]; then
      install -Dm644 "$srcdir/build/src/$_gourl/$f" \
        "$pkgdir/usr/share/licenses/$pkgname/$f"
    fi
  done

  # Package executables
  if [ -e "$srcdir/build/$pkgname" ]; then
    install -Dm755 "$srcdir/build/$pkgname" \
      "$pkgdir/usr/bin/$pkgname"
  fi
}

# vim:set ts=2 sw=2 et:</pre>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../zh-CN/Category:Package_development.html" title="Category:Package development (简体中文)">Package development (简体中文)</a></li></ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Go_package_guidelines_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;oldid=608284">https://wiki.archlinux.org/index.php?title=Go_package_guidelines_(简体中文)&amp;oldid=608284</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 26 April 2020, at 10:21.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
