<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>FreeNX (简体中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-FreeNX_简体中文 rootpage-FreeNX_简体中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">FreeNX (简体中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<p><i>NX 是一项令人激动的远程控制技术。它提供了在高延迟、低带宽环境中 <u></u></i><u>接近本地速度<i></i></u><i> 的应用程序响应链接。NX 的核心库由 <a rel="nofollow" class="external text" href="http://www.nomachine.com/">NoMachine</a> 在 GPL 授权下提供。<b>FreeNX</b> 是一个 NX 服务器和客户端组件的 GPL 实现。</i>
</p>
<dl><dd>— <a rel="nofollow" class="external text" href="http://freenx.berlios.de/">FreeNX - 自由的 NX</a>
</dd></dl>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#%E5%AE%89%E8%A3%85"><span class="tocnumber">1</span> <span class="toctext">安装</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#%E8%AE%BE%E7%BD%AE"><span class="tocnumber">2</span> <span class="toctext">设置</span></a>
<ul>
<li class="toclevel-2 tocsection-3">
<a href="#%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="tocnumber">2.1</span> <span class="toctext">服务器</span></a>
<ul>
<li class="toclevel-3 tocsection-4"><a href="#%E5%AF%86%E9%92%A5"><span class="tocnumber">2.1.1</span> <span class="toctext">密钥</span></a></li>
<li class="toclevel-3 tocsection-5"><a href="#%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="tocnumber">2.1.2</span> <span class="toctext">启动服务器</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-6">
<a href="#%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="tocnumber">2.2</span> <span class="toctext">客户端</span></a>
<ul>
<li class="toclevel-3 tocsection-7"><a href="#Arch_Linux"><span class="tocnumber">2.2.1</span> <span class="toctext">Arch Linux</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="#Windows"><span class="tocnumber">2.2.2</span> <span class="toctext">Windows</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="#%E9%85%8D%E7%BD%AE"><span class="tocnumber">2.2.3</span> <span class="toctext">配置</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-10">
<a href="#%E8%BF%90%E8%A1%8C"><span class="tocnumber">3</span> <span class="toctext">运行</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#%E9%94%AE%E7%9B%98%E5%BF%AB%E6%8D%B7%E9%94%AE"><span class="tocnumber">3.1</span> <span class="toctext">键盘快捷键</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#%E9%80%80%E5%87%BA%E5%85%A8%E5%B1%8F"><span class="tocnumber">3.2</span> <span class="toctext">退出全屏</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Tips_on_resume"><span class="tocnumber">3.3</span> <span class="toctext">Tips on resume</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#%E4%BF%AE%E5%A4%8D_DPI_%E8%AE%BE%E7%BD%AE"><span class="tocnumber">3.4</span> <span class="toctext">修复 DPI 设置</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-15"><a href="#%E5%9C%A8%E5%B7%B2%E6%9C%89%E5%B1%8F%E5%B9%95%E4%B8%8A%E4%BD%BF%E7%94%A8_FreeNX"><span class="tocnumber">4</span> <span class="toctext">在已有屏幕上使用 FreeNX</span></a></li>
<li class="toclevel-1 tocsection-16">
<a href="#%E8%AE%BE%E7%BD%AE%E9%9D%9E_KDE_%E6%88%96%E9%9D%9E_Gnome_%E6%A1%8C%E9%9D%A2%E7%AE%A1%E7%90%86%E5%99%A8"><span class="tocnumber">5</span> <span class="toctext">设置非 KDE 或非 Gnome 桌面管理器</span></a>
<ul>
<li class="toclevel-2 tocsection-17"><a href="#Alternative_fix"><span class="tocnumber">5.1</span> <span class="toctext">Alternative fix</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-18">
<a href="#%E9%97%AE%E9%A2%98"><span class="tocnumber">6</span> <span class="toctext">问题</span></a>
<ul>
<li class="toclevel-2 tocsection-19"><a href="#%E8%B0%83%E8%AF%95%E9%97%AE%E9%A2%98"><span class="tocnumber">6.1</span> <span class="toctext">调试问题</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#%E9%AA%8C%E8%AF%81_OK,_%E4%BD%86%E8%BF%9E%E6%8E%A5%E5%A4%B1%E8%B4%A5"><span class="tocnumber">6.2</span> <span class="toctext">验证 OK, 但连接失败</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#%E6%8C%89%E9%94%AE%E6%94%B9%E5%8F%98"><span class="tocnumber">6.3</span> <span class="toctext">按键改变</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#Xorg_7"><span class="tocnumber">6.4</span> <span class="toctext">Xorg 7</span></a></li>
<li class="toclevel-2 tocsection-23">
<a href="#%E5%AF%86%E7%A0%81%E9%94%99%E8%AF%AF_/_%E6%B2%A1%E6%9C%89%E5%8F%AF%E7%94%A8%E8%BF%9E%E6%8E%A5"><span class="tocnumber">6.5</span> <span class="toctext">密码错误 / 没有可用连接</span></a>
<ul>
<li class="toclevel-3 tocsection-24"><a href="#%E5%9C%A8%E5%90%AF%E5%8A%A8_session_%E6%97%B6_NX_%E5%B4%A9%E6%BA%83"><span class="tocnumber">6.5.1</span> <span class="toctext">在启动 session 时 NX 崩溃</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-25"><a href="#%E6%98%BE%E7%A4%BA_NX_%E5%BE%BD%E6%A0%87%E4%B9%8B%E5%90%8E%E9%BB%91%E5%B1%8F"><span class="tocnumber">6.6</span> <span class="toctext">显示 NX 徽标之后黑屏</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="#GDM/XDM_Session_Menu_Error_with_non-KDE_or_Gnome_Desktop_Managers_(more_common_with_non-Arch_Linux_users)"><span class="tocnumber">6.7</span> <span class="toctext">GDM/XDM Session Menu Error with non-KDE or Gnome Desktop Managers (more common with non-Arch Linux users)</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#Cannot_connect_because_command_sessreg_not_found"><span class="tocnumber">6.8</span> <span class="toctext">Cannot connect because command sessreg not found</span></a></li>
</ul>
</li>
</ul>
</div>

<h2>
<span id=".E5.AE.89.E8.A3.85"></span><span class="mw-headline" id="安装">安装</span>
</h2>
<p>包分为两部分：
</p>
<ul>
<li>freenx （服务器）</li>
<li>nxclient （客户端）</li>
</ul>
<p>如果你打算用 freenx 来连接无头 PC，记得你得有一个配置好的 X 服务器，这样你应该就能安装任何与 <a href="../en/Xorg.html" title="Xorg">xorg</a> 相关联的包了。
</p>
<h2>
<span id=".E8.AE.BE.E7.BD.AE"></span><span class="mw-headline" id="设置">设置</span>
</h2>
<h3>
<span id=".E6.9C.8D.E5.8A.A1.E5.99.A8"></span><span class="mw-headline" id="服务器">服务器</span>
</h3>
<p>自由（免费）的服务器在 'freenx' 包中。你必须安装 sshd 守护进程，并且让它正确运行：
</p>
<pre># systemctl enable sshd
</pre>
<p>要使 freenx 的登录验证工作，sshd 必须正确配置。检查 /etc/ssh/sshd_config 中下列项：
</p>
<pre>RSAAuthentication yes
AllowUsers someuser nx
</pre>
<p>NX 的主配置文件位于:
</p>
<pre>/opt/NX/etc/node.conf
</pre>
<p><i>如果你的 ssh 守护进程不是运行在默认的 22 端口，你需要取消注释并修改：</i></p>
<pre>SSHD_PORT=22</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> As of OpenSSL 1.0.0, it is necessary to set proper md5sum command in <code>/opt/NX/etc/node.conf</code>: <pre>COMMAND_MD5SUM="md5sum"</pre>
</div>
<p>如果你在用 Gnome 或 KDE 桌面环境，你不需要编辑此文件，应为修改过的 MD5SUM 与默认配置在这种场合下能够工作。如果你在使用其它窗口管理器，比如 Fluxbox/Openbox 或 Xfce，你大概需要稍微修改这个文件（见下方）。
</p>
<p>安装完 freenx 包，运行 <code>/opt/NX/bin/nxsetup --help</code> for an overview of the install and uninstall procedures.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> You should also install "xdialog" on the server or you will not see the "suspend/terminate" dialog when you try to close the window or hit "ctrl-alt-T": <pre>pacman -S xdialog</pre>
</div>
<h4>
<span id=".E5.AF.86.E9.92.A5"></span><span class="mw-headline" id="密钥">密钥</span>
</h4>
<p>服务器需要用密钥来验证客户端。默认情况下，在安装时会产生一对随机密钥，一个是服务器的，另一个是客户端的。你需要给每一个想要连接的客户端（Windows 也好， linux 也好）复制一份客户端密钥。
</p>
<p>客户端密钥能在这儿找到：
</p>
<pre>/opt/NX/home/nx/.ssh/client.id_dsa.key
</pre>
<p>Alternatively you can use the default key that is provided by NoMachine with all clients.  In this case you do not need to copy a custom generated key to each client.  To get the server to accept the default client keys run:
</p>
<pre>/opt/NX/bin/nxsetup --install --setup-nomachine-key
</pre>
<p>Recreation of random keys:
</p>
<pre>/opt/NX/bin/nxsetup --install
</pre>
<p><br>
</p>
<p>Transferring nx keys to another freenx server:
</p>
<ul><li>/opt/NX/home/nx/.ssh contains the key files</li></ul>
<pre> -rw------- 1 nx root  697  9. Okt 12:55 authorized_keys
 -rw------- 1 nx root  668  9. Okt 11:48 client.id_dsa.key
 -rw------- 1 nx root  609  9. Okt 12:55 server.id_dsa.pub.key
</pre>
<ul>
<li>Save those files.</li>
<li>Add those files to your new server, they need the same permissions, names, group and directory!</li>
</ul>
<pre> # cp authorized_keys client.id_dsa.key server.id_dsa.pub.key /opt/NX/home/nx/.ssh/
 # chmod 600 /opt/NX/home/nx/.ssh/*
 # chown nx /opt/NX/home/nx/.ssh/*
 # chgrp root /opt/NX/home/nx/.ssh/*
</pre>
<ul><li>Recreate known_hosts file:</li></ul>
<pre> # echo -n 127.0.0.1 &gt; /opt/NX/home/nx/.ssh/known_hosts
 # cat /etc/ssh/ssh_host_rsa_key.pub &gt;&gt; /opt/NX/home/nx/.ssh/known_hosts
 # chmod 633 /opt/NX/home/nx/.ssh/known_hosts
 # chown nx /opt/NX/home/nx/.ssh/known_hosts
 # chgrp root /opt/NX/home/nx/.ssh/known_hosts
</pre>
<h4>
<span id=".E5.90.AF.E5.8A.A8.E6.9C.8D.E5.8A.A1.E5.99.A8"></span><span class="mw-headline" id="启动服务器">启动服务器</span>
</h4>
<p>Once installed the server is effectively running and ready to go, you do not have to do anything manually   The only thing that must be running in order to connect is the sshd daemon.  This is because the nxserver is actually started by logging into sshd as the special user 'nx'.  This user has been set up to use the nxserver as its shell, much like a normal user has bash as the default shell.
</p>
<p>You can specify the local addresses sshd should listen for by editing /etc/ssh/sshd_config and adding them in the following format:
</p>
<pre>ListenAddress host|IPv4_addr|IPv6_addr
</pre>
<p>The original ListenAddress in sshd_config is 0.0.0.0.  This listens to all addresses, however adding any address will take precedent to this and and accept connections from the new address only.
</p>
<p>Restart the sshd daemon to put any changes to its configuration into effect:
</p>
<pre># systemctl restart sshd
</pre>
<p>In actual fact, if you check the process list (<code>ps aux</code>) you may not see the nxserver running even though it is.  This is because the nxserver is actually started by logging into sshd as the special user 'nx'.  This user has been set up to use the nxserver as its shell, much like a normal user has bash as the default shell.
</p>
<h3>
<span id=".E5.AE.A2.E6.88.B7.E7.AB.AF"></span><span class="mw-headline" id="客户端">客户端</span>
</h3>
<h4><span class="mw-headline" id="Arch_Linux">Arch Linux</span></h4>
<p>Get the client from pacman:
</p>
<pre>pacman -S nxclient
</pre>
<h4><span class="mw-headline" id="Windows">Windows</span></h4>
<p>Get the client from nomachine's homepage: <a rel="nofollow" class="external free" href="http://www.nomachine.com">http://www.nomachine.com</a>
</p>
<p>Tip: Nomachine tends to remove old clients from their homepage,
If your setup works with a client save it at a safe place ;)
</p>
<h4>
<span id=".E9.85.8D.E7.BD.AE"></span><span class="mw-headline" id="配置">配置</span>
</h4>
<p>As mentioned above, the client must contain the correct key to connect to the server.  If you are using the custom keys generated during install, you need to copy the client key to the following locations:
</p>
<ul>
<li>Windows: <code>&lt;yourinstalldironwindows&gt;/share/keys/client.id_dsa.key</code>
</li>
<li>Arch Linux: <code>/opt/NX/share/keys/client.id_dsa.key</code>
</li>
</ul>
<p>After moving the keys you may have use the nxclient GUI to import the new keys.  From the configuration dialog press the 'Key...' button and import the new client key.
</p>
<p><br>
</p>
<h2>
<span id=".E8.BF.90.E8.A1.8C"></span><span class="mw-headline" id="运行">运行</span>
</h2>
<p>After installing nxclient on Arch Linux, executables are available in /opt/NX/bin. At the first run of /opt/NX/bin/nxclient, the user will be led through a wizard. 
</p>
<h3>
<span id=".E9.94.AE.E7.9B.98.E5.BF.AB.E6.8D.B7.E9.94.AE"></span><span class="mw-headline" id="键盘快捷键">键盘快捷键</span>
</h3>
<pre>CTR+ALT+F          Toggles full-screen mode. 
CTRL+ALT+T         Shows the terminate, suspend dialog.
CTRL+ALT+M         Maximizes of minimizes the window 
CTRL+ALT+Mouse     Drags the viewport, so you can view different portions 
                   of the desktop. 
CTRL+ALT+Arrows 
or                 Moves the viewport by an incremental amount of pixels. 
CTRL+ALT+Keypad 
CTRL+ALT+S         It will activate "screen-scraping" mode, so all the GetImage
                   originated by the clients will be forwarded to the real
                   display. This should make happy those who love taking
                   screenshots ;-). By pressing the sequence again, nxagent
                   will revert to the usual "fast" mode.
CTRL+ALT+E         lazy image encoding
CTRL+ALT+Shift+ESC Emergency-exit and kill-window
</pre>
<h3>
<span id=".E9.80.80.E5.87.BA.E5.85.A8.E5.B1.8F"></span><span class="mw-headline" id="退出全屏">退出全屏</span>
</h3>
<p>There is a magic-pixel in the top right corner of nearly every nx-application
in fullscreenmode. Right-click the pixel and application-window gets iconified.
</p>
<h3><span class="mw-headline" id="Tips_on_resume">Tips on resume</span></h3>
<ul>
<li>Resume is a bit experimental, crashes might appear after session has resumed. You have to find out which apps like resuming and which do not ;) .</li>
<li>Resuming between Linux and Windows sessions does not work. UPDATE: It appears that version 3.2.0-14 is able to resume Windows-suspended sessions.</li>
<li>If resume fails let it time out and don't use the cancel button, else sessions will stay open and consume RAM on server. To kill such sessions use the Session Admin program to kill them.</li>
</ul>
<h3>
<span id=".E4.BF.AE.E5.A4.8D_DPI_.E8.AE.BE.E7.BD.AE"></span><span class="mw-headline" id="修复_DPI_设置">修复 DPI 设置</span>
</h3>
<p>If you like to have the same font-sizes/dpi sizes on all your client session,
set the X resource "Xft.dpi". For example putting the following line into a
user's "~/.Xresources" makes her/his "desktop" a 100dpi.
Xft.dpi: 100
</p>
<h2>
<span id=".E5.9C.A8.E5.B7.B2.E6.9C.89.E5.B1.8F.E5.B9.95.E4.B8.8A.E4.BD.BF.E7.94.A8_FreeNX"></span><span class="mw-headline" id="在已有屏幕上使用_FreeNX">在已有屏幕上使用 FreeNX</span>
</h2>
<p>Usually, when connecting to a NX server, a new X session is created. Sometimes it might be useful, to connect to an existing X session, e.g. the root session. This is not possible with NX in default setup, but can be reached, using <code>tightvnc</code> and <code>x11vnc</code>. Do the following steps on the NX server system.
</p>
<pre># pacman -S tightvnc x11vnc
</pre>
<p>x11vnc will serve the X session, we have to create a file <code>$HOME/.x11vncrc</code> to give x11vnc some options, e.g.:
</p>
<pre>display :0
shared
forever
localhost
rfbauth /home/USER/.x11vnc/passwd
</pre>
<p>Create the VNC password file:
</p>
<pre>$ mkdir $HOME/.x11vnc
$ x11vnc -storepasswd PASSWORD $HOME/.x11vnc/passwd
$ chmod 600 $HOME/.x11vnc/passwd
</pre>
<p>Create a shell script, which starts the x11vnc service, if not running and starts the vncviewer provided by the package tightvnc.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The variable <code>$VNC_PORT</code> in the following script defines the X display, which is configured as <code>display :0</code> under <code>$HOME/.x11vncrc</code>, <code>590<b>0</b></code> is the root session, if you want to use <code>display :1</code> use the port <code>590<b>1</b></code> and so on</div>
<pre>#!/bin/sh
VNC_VIEWER=vncviewer
VNC_SERVER=x11vnc
VNC_RESOLUTION=1024x786
VNC_PASSWD=/home/USER/.x11vnc/passwd
VNC_PORT=5900

if [ -z "$(pgrep ${VNC_SERVER})" ]; then
	echo $VNC_SERVER not running, starting...
	exec $VNC_SERVER &amp;
	sleep 5
fi

exec $VNC_VIEWER -geometry $VNC_RESOLUTION -passwd $VNC_PASSWD localhost::$VNC_PORT
</pre>
<p>Save this script with a texteditor of your choice, e.g. under <code>$HOME/shell/nxvnc.sh</code>. Make it executable and create a symbolic link, e.g:
</p>
<pre>$ chmod +x $HOME/shell/nxvnc.sh
# ln -s /home/USER/shell/nxvnc.sh /usr/local/bin/nxvnc
</pre>
<p>At this point, you might want to test the current configuration: <code>$ /usr/local/bin/nxvnc</code>
</p>
<p>If the x11vnc service and a vncviewer session is started, you configuration works well. You are now able to connect to the current X session using your NX client with following options:
</p>
<pre>Login, Password, Host, Port: your default entries
Desktop: Unix -&gt; Custom
 - Settings:
   - Run the following command: /usr/local/bin/nxvnc
   - New virtual desktop
Display:
  - Fullscreen or Custom with you preferred resolution
</pre>
<p>You are able to connect to your current X session via NX client now.
</p>
<dl><dd>— <a rel="nofollow" class="external text" href="http://en.opensuse.org/SDB:FreeNX_to_existing_display">FreeNX to existing display (opensuse.org)</a>
</dd></dl>
<h2>
<span id=".E8.AE.BE.E7.BD.AE.E9.9D.9E_KDE_.E6.88.96.E9.9D.9E_Gnome_.E6.A1.8C.E9.9D.A2.E7.AE.A1.E7.90.86.E5.99.A8"></span><span class="mw-headline" id="设置非_KDE_或非_Gnome_桌面管理器">设置非 KDE 或非 Gnome 桌面管理器</span>
</h2>
<p>Before following anything in this part, make sure the server working setup and accepting connections. This section only deals with problems once NXClient has logged on.
</p>
<p>It is quite simple (once the server is setup) to connect to Gnome and KDE sessions, however connecting to other window managers (fluxbox, xfce, whatever) is slightly different.
</p>
<p>Choosing "custom" and using a command like startx of startfluxbox will either result in a blank screen after the !M logo or the Client to present an error complaining about lack of a X server. A way around this is open a session with the command "startx", and the another with the command to start your window-manager-of-choice.
</p>
<p>If you do not want to do this, you can start X by <a href="../en/Display_manager.html" title="Display manager">installing a login manager like SLIM or XDM</a>. I would recomend using SLiM because of it's small size.
</p>
<p>(Authors note: This is how I got fluxbox, xfce and others to work on my arch installation- however, I have now removed slim from inittab and set the run level back to 3, and yet I can still login perfectly with NXClient. Possibly try this if you get your system working this way, if like me you have a low memory machine.)
</p>
<h4><span class="mw-headline" id="Alternative_fix">Alternative fix</span></h4>
<p>A simple fix without resorting to the above seems to involve a simple edit to the config file.  This should work for fluxbox/openbox/xfce or any other window manager that uses the <b>.xinitrc</b> startup file in a call to <b>startx</b>.
</p>
<p>Simply edit the config file (as root):
</p>
<pre>/opt/NX/etc/node.conf
</pre>
<p>and change
</p>
<pre>#USER_X_STARTUP_SCRIPT=.Xclients
</pre>
<p>to
</p>
<pre>USER_X_STARTUP_SCRIPT=.xinitrc
</pre>
<p>Remember to remove the # symbol from the start of the line.
</p>
<p>Then in the client under configuration settings, choose <b>Custom</b> as the desktop, and click on settings:
</p>
<ul>
<li>In the first group select -  <b><code>Run the default X client Script on server</code></b>
</li>
<li>In the second group select - <b><code>New virtual desktop</code></b>
</li>
</ul>
<p><br>
</p>
<h2>
<span id=".E9.97.AE.E9.A2.98"></span><span class="mw-headline" id="问题">问题</span>
</h2>
<h3>
<span id=".E8.B0.83.E8.AF.95.E9.97.AE.E9.A2.98"></span><span class="mw-headline" id="调试问题">调试问题</span>
</h3>
<p>Edit the nxserver config file:
</p>
<pre> vi /opt/NX/etc/node.conf
</pre>
<p>Change:
</p>
<pre> #SESSION_LOG_CLEAN=1
</pre>
<p>to 
</p>
<pre> SESSION_LOG_CLEAN=0
</pre>
<p>Then you can look/debug the log files in:
</p>
<pre> $HOME/.nx/T-C-&lt;hostname&gt;-&lt;display&gt;-&lt;session-id&gt;
</pre>
<p>For succesfull connections and:
</p>
<pre> $HOME/.nx/F-C-&lt;hostname&gt;-&lt;display&gt;-&lt;session-id&gt;
</pre>
<p>For failed ones.
</p>
<p><br>
</p>
<h3>
<span id=".E9.AA.8C.E8.AF.81_OK.2C_.E4.BD.86.E8.BF.9E.E6.8E.A5.E5.A4.B1.E8.B4.A5"></span><span class="mw-headline" id="验证_OK,_但连接失败">验证 OK, 但连接失败</span>
</h3>
<p>If you are trying to startkde 
</p>
<p><br>
</p>
<pre> vi /opt/NX/etc/node.conf
</pre>
<p><br>
</p>
<p>And search for:
</p>
<pre> COMMAND_START_KDE=startkde
</pre>
<p>Replace for:
</p>
<p><br>
</p>
<pre> COMMAND_START_KDE=/usr/bin/startkde
</pre>
<h3>
<span id=".E6.8C.89.E9.94.AE.E6.94.B9.E5.8F.98"></span><span class="mw-headline" id="按键改变">按键改变</span>
</h3>
<p>Change the key in GUI setup to new generated key.
</p>
<h3><span class="mw-headline" id="Xorg_7">Xorg 7</span></h3>
<p>Be aware that you have to remove the /usr/X11R6 directory, else strange things
can happen.
</p>
<h3>
<span id=".E5.AF.86.E7.A0.81.E9.94.99.E8.AF.AF_.2F_.E6.B2.A1.E6.9C.89.E5.8F.AF.E7.94.A8.E8.BF.9E.E6.8E.A5"></span><span class="mw-headline" id="密码错误_/_没有可用连接">密码错误 / 没有可用连接</span>
</h3>
<ul><li>If you have changed your ssh daemon to run on an alternate port, be sure to modify SSHD_PORT within /opt/NX/etc/node.conf.</li></ul>
<ul><li>If you get always wrong password or no connection after authentication was done and you are sure that you typed it correct, check that your server can connect to itself using localhost by ssh.</li></ul>
<ul><li>If you messed up your key files, create new ones or fix the old ones, it's probably caused by a wrong known_hosts file.</li></ul>
<ul><li>If you get wrong password or login, put <b>ENABLE_PASSDB_AUTHENTICATION="1"</b> in /opt/NX/etc/node.conf and add a user by</li></ul>
<pre># /opt/NX/bin/nxserver --adduser [username]
# /opt/NX/bin/nxserver --passwd [username]
</pre>
<h4>
<span id=".E5.9C.A8.E5.90.AF.E5.8A.A8_session_.E6.97.B6_NX_.E5.B4.A9.E6.BA.83"></span><span class="mw-headline" id="在启动_session_时_NX_崩溃">在启动 session 时 NX 崩溃</span>
</h4>
<p>If your NX Client shows the NX logo then disappears with a Connection Problem dialog afterwards.
</p>
<p>Then it could be due to missing fonts. Mostly applies if you have installed Arch Linux base and then installed freenx after without the whole X11 set.
</p>
<p>Solution until FreeNX Dependencies is fixed is to install xorg-fonts-misc on your NX Server (pacman -S xorg-fonts-misc) and your NX should work.
</p>
<p>Note: This does not apply to freenx 0.6.1-3 and above, fix has been incorporated in it and following versions.
</p>
<h3>
<span id=".E6.98.BE.E7.A4.BA_NX_.E5.BE.BD.E6.A0.87.E4.B9.8B.E5.90.8E.E9.BB.91.E5.B1.8F"></span><span class="mw-headline" id="显示_NX_徽标之后黑屏">显示 NX 徽标之后黑屏</span>
</h3>
<p>If you see the NX logo (!M) then a blank screen.
</p>
<p>This problem can be solved by running a login manager- The problem is that X11 is not started, and it appears that "startx" or similar do not work from the freenx client.
Follow these instructions to setup a login manager and load it at startup: <a href="../en/Display_manager.html" title="Display manager">Display manager</a>
</p>
<p>Blind: If this does not resolve your issues, be aware that freenx and bash_completion do not play well together. I only got things to work after removing bash_completion from the .bashrc.
</p>
<h3>
<span id="GDM.2FXDM_Session_Menu_Error_with_non-KDE_or_Gnome_Desktop_Managers_.28more_common_with_non-Arch_Linux_users.29"></span><span class="mw-headline" id="GDM/XDM_Session_Menu_Error_with_non-KDE_or_Gnome_Desktop_Managers_(more_common_with_non-Arch_Linux_users)">GDM/XDM Session Menu Error with non-KDE or Gnome Desktop Managers (more common with non-Arch Linux users)</span>
</h3>
<p>Problem: A session menu comes up talking about "chooseSessionListWidget." A window manager never loads.
</p>
<p>Fix :
</p>
<p>Double check to see if ~/.xinitrc is executable.
</p>
<pre> ls -la ~/ | grep .xinitrc
</pre>
<p>If the file is not executable, simply
</p>
<pre> chmod +x ~/.xinitrc
</pre>
<p>Keep in mind this command should be executed along with pertinent instructions on this page about "Setting up non-KDE or Gnome desktop managers"
</p>
<p><br>
</p>
<h3><span class="mw-headline" id="Cannot_connect_because_command_sessreg_not_found">Cannot connect because command sessreg not found</span></h3>
<p>If you get the following error while connecting
</p>
<pre> /opt/NX/bin/nxserver: line 941: sessreg: command not found
 NX&gt; 280 Exiting on signal: 15
</pre>
<p>then you have to install the package xorg-server-utils.
</p>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../zh-CN/Category:X_server.html" title="Category:X server (简体中文)">X server (简体中文)</a></li></ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=FreeNX_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;oldid=478621">https://wiki.archlinux.org/index.php?title=FreeNX_(简体中文)&amp;oldid=478621</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 30 May 2017, at 05:50.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
