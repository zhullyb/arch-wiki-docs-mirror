<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Xcompmgr (简体中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Xcompmgr_简体中文 rootpage-Xcompmgr_简体中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Xcompmgr (简体中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>相关文章</p>
<ul>
<li><a href="../en/Xorg.html#Composite" class="mw-redirect" title="Composite">Composite</a></li>
<li><a href="../zh-CN/Compiz.html" title="Compiz (简体中文)">Compiz</a></li>
<li><a href="../en/Window_manager.html" title="Window manager">Window manager</a></li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>翻译状态：</strong>本文是 <a href="../en/Xcompmgr.html" title="Xcompmgr">Xcompmgr</a> 的<a href="../zh-CN/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (简体中文)">翻译</a>。上次翻译日期：2015-06-22。如果英文版本有所<a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Xcompmgr&amp;diff=0&amp;oldid=376307">更改</a>，则您可以帮助同步翻译。</div>
<p><b>Xcompmgr</b>是一个简单的混合窗口管理器，可以实现阴影、原生窗口透明（配合<code>transset</code>工具）等特效。Xcompmgr设计初衷只是实现混合窗口管理器的概念，所以比起同类混合窗口管理器如 <a href="../zh-CN/Compiz.html" title="Compiz (简体中文)">Compiz Fusion</a>，Xcompmgr轻量许多。
</p>
<p>Xcompmgr不替代任何窗口管理器，所以对于<a href="../zh-CN/Openbox.html" title="Openbox (简体中文)">Openbox</a>和<a href="../en/Fluxbox.html" title="Fluxbox">Fluxbox</a>这类缺乏特效的<a href="../zh-CN/Window_manager.html" class="mw-redirect" title="窗口管理器">窗口管理器</a>来讲，配合Xcompmgr能得到更华丽的视觉效果。
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#%E5%AE%89%E8%A3%85"><span class="tocnumber">1</span> <span class="toctext">安装</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#%E5%88%86%E6%94%AF%E7%89%88%E6%9C%AC"><span class="tocnumber">1.1</span> <span class="toctext">分支版本</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-3">
<a href="#%E9%85%8D%E7%BD%AE"><span class="tocnumber">2</span> <span class="toctext">配置</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#%E7%AA%97%E5%8F%A3%E9%80%8F%E6%98%8E%E5%BA%A6"><span class="tocnumber">2.1</span> <span class="toctext">窗口透明度</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5">
<a href="#%E5%B0%8F%E6%8F%90%E7%A4%BA"><span class="tocnumber">3</span> <span class="toctext">小提示</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#%E6%96%B9%E4%BE%BF%E5%BC%80%E5%85%B3xcompmgr%E7%9A%84%E8%84%9A%E6%9C%AC"><span class="tocnumber">3.1</span> <span class="toctext">方便开关xcompmgr的脚本</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#%E4%BB%85%E7%94%A8%E4%B8%80%E4%B8%AA%E5%BF%AB%E6%8D%B7%E9%94%AE%E5%B0%B1%E5%88%87%E6%8D%A2_xcompmgr"><span class="tocnumber">3.2</span> <span class="toctext">仅用一个快捷键就切换 xcompmgr</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8">
<a href="#%E7%96%91%E9%9A%BE%E8%A7%A3%E7%AD%94"><span class="tocnumber">4</span> <span class="toctext">疑难解答</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="#Mozilla_Firefox_%E6%89%93%E5%BC%80_Flash_%E6%97%B6%E5%B4%A9%E6%BA%83"><span class="tocnumber">4.1</span> <span class="toctext">Mozilla Firefox 打开 Flash 时崩溃</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#%E7%99%BB%E9%99%86%E5%90%8E%E5%8F%98%E6%88%90%E6%B5%85%E7%81%B0%E8%89%B2%E8%83%8C%E6%99%AF_%EF%BC%88%E5%A6%82Openbox%EF%BC%89"><span class="tocnumber">4.2</span> <span class="toctext">登陆后变成浅灰色背景 （如Openbox）</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#%E5%9C%A8_awesome_%E7%AA%97%E5%8F%A3%E7%AE%A1%E7%90%86%E5%99%A8%E4%B8%AD%E5%87%BA%E7%8E%B0_BadPicture_request"><span class="tocnumber">4.3</span> <span class="toctext">在 awesome 窗口管理器中出现 BadPicture request</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Chromium_&amp;_Xcompmgr_&amp;_Awesome_&amp;_Conky"><span class="tocnumber">4.4</span> <span class="toctext">Chromium &amp; Xcompmgr &amp; Awesome &amp; Conky</span></a></li>
</ul>
</li>
</ul>
</div>

<h2>
<span id=".E5.AE.89.E8.A3.85"></span><span class="mw-headline" id="安装">安装</span>
</h2>
<p>在安装 Xcompmgr 前，请先确认您已经正确安装并配置了 <a href="../zh-CN/Xorg.html" title="Xorg (简体中文)">Xorg</a>。如果你使用了自定义配置，请打开X服务器中的 <a href="../en/Xorg.html#Composite" class="mw-redirect" title="Composite">Composite</a> 拓展。
</p>
<p>您可以直接从<a href="../zh-CN/Official_repositories.html" title="Official repositories (简体中文)">官方软件仓库</a>中安装<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xcompmgr">xcompmgr</a></span>以及透明度设置工具<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/transset-df/">transset-df</a></span><sup><small>AUR</small></sup>。
</p>
<h3>
<span id=".E5.88.86.E6.94.AF.E7.89.88.E6.9C.AC"></span><span class="mw-headline" id="分支版本">分支版本</span>
</h3>
<p>您还可以选用 Xcompmgr 的分支版本，它们修正了一些错误：
</p>
<ul><li>
<b>xcompmgr-dana</b> — One of the first forks of Xcompmgr.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="http://oliwer.net/xcompmgr-dana/">http://oliwer.net/xcompmgr-dana/</a><sup title="最后检查状态：404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">失效链接</a> 2020-08-06 ⓘ]</sup> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xcompmgr-dana/">xcompmgr-dana</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">断开的链接</a>：package not found]</sup>
</dd></dl>
<ul><li>
<b><a href="../en/Picom.html" class="mw-redirect" title="Compton">Compton</a></b> — A fork of Xcompmgr that contains most of the previous fixes as well as many others.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/chjj/compton">https://github.com/chjj/compton</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/compton-git/">compton-git</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">断开的链接</a>：package not found]</sup>
</dd></dl>
<h2>
<span id=".E9.85.8D.E7.BD.AE"></span><span class="mw-headline" id="配置">配置</span>
</h2>
<p>运行 <code>xcompmgr</code>：
</p>
<pre>$ xcompmgr -c
</pre>
<p>如果要在每次 Xorg 启动时运行，添加以下内容到<a href="../en/Xprofile.html" title="Xprofile">xprofile</a>：
</p>
<pre>xcompmgr -c &amp;
</pre>
<p>用户可以通过命令行参数调整阴影、消隐等效果，以下是一个常用的配置：
</p>
<pre>xcompmgr -c -C -t-5 -l-5 -r4.2 -o.55 &amp;
</pre>
<p>查看命令行帮助：
</p>
<pre>$ xcompmgr --help
</pre>
<h3>
<span id=".E7.AA.97.E5.8F.A3.E9.80.8F.E6.98.8E.E5.BA.A6"></span><span class="mw-headline" id="窗口透明度">窗口透明度</span>
</h3>
<p><code>transset-df</code> 工具用来设置单个窗口的透明度，透明特效可能会降低系统性能。
</p>
<p>先启动要设置透明度的程序，然后运行：
</p>
<pre>transset-df n
</pre>
<p>.. 此处 <code>n</code> 是0到1之间的数字，0表示完全透明（不可见），1表示不透明。例如：<code>transset .25</code> 代表75%的透明度。
</p>
<p>运行后，鼠标会变成十字形。点击要设置的窗口，即可应用透明度设置。
</p>
<h2>
<span id=".E5.B0.8F.E6.8F.90.E7.A4.BA"></span><span class="mw-headline" id="小提示">小提示</span>
</h2>
<h3>
<span id=".E6.96.B9.E4.BE.BF.E5.BC.80.E5.85.B3xcompmgr.E7.9A.84.E8.84.9A.E6.9C.AC"></span><span class="mw-headline" id="方便开关xcompmgr的脚本">方便开关xcompmgr的脚本</span>
</h3>
<p>把这个脚本放在合适的应用程序目录，可以方便地启动、关闭xcompmgr。
</p>
<pre>#!/bin/bash
#
# Start a composition manager.
# (xcompmgr in this case)

comphelp() {
  echo "Composition Manager:"
  echo "   (re)start: COMP"
  echo "   stop:      COMP -s"
  echo "   query:     COMP -q"
  echo "              returns 0 if composition manager is running, else 1"
  exit
}

checkcomp() {
  pgrep xcompmgr &amp;&gt;/dev/null
}

stopcomp() {
  checkcomp &amp;&amp; killall xcompmgr
}

startcomp() {
  stopcomp
# Example settings only. Replace with your own.
  xcompmgr -CcfF -I-.015 -O-.03 -D6 -t-1 -l-3 -r4.2 -o.5 &amp;
  exit
}

case "$1" in
    "") startcomp ;;
  "-q") checkcomp ;;
  "-s") stopcomp; exit ;;
     *) comphelp ;;
esac
</pre>
<h3>
<span id=".E4.BB.85.E7.94.A8.E4.B8.80.E4.B8.AA.E5.BF.AB.E6.8D.B7.E9.94.AE.E5.B0.B1.E5.88.87.E6.8D.A2_xcompmgr"></span><span class="mw-headline" id="仅用一个快捷键就切换_xcompmgr">仅用一个快捷键就切换 xcompmgr</span>
</h3>
<p>利用上面脚本的状态部分，将下面脚本设置为某个快捷键的脚本：
</p>
<pre>#!/bin/bash

if pgrep xcompmgr &amp;&gt;/dev/null; then
       echo "Turning xcompmgr ON"
       xcompmgr -c -C -t-5 -l-5 -r4.2 -o.55 &amp;
else
       echo "Turning xcompmgr OFF"
       pkill xcompmgr &amp;
fi

exit 0
</pre>
<h2>
<span id=".E7.96.91.E9.9A.BE.E8.A7.A3.E7.AD.94"></span><span class="mw-headline" id="疑难解答">疑难解答</span>
</h2>
<h3>
<span id="Mozilla_Firefox_.E6.89.93.E5.BC.80_Flash_.E6.97.B6.E5.B4.A9.E6.BA.83"></span><span class="mw-headline" id="Mozilla_Firefox_打开_Flash_时崩溃">Mozilla Firefox 打开 Flash 时崩溃</span>
</h3>
<p>新建可执行文件<code>/etc/profile.d/flash.sh</code>，文件内容如下：
</p>
<pre>export XLIB_SKIP_ARGB_VISUALS=1
</pre>
<p>这将关闭混合特效。
</p>
<h3>
<span id=".E7.99.BB.E9.99.86.E5.90.8E.E5.8F.98.E6.88.90.E6.B5.85.E7.81.B0.E8.89.B2.E8.83.8C.E6.99.AF_.EF.BC.88.E5.A6.82Openbox.EF.BC.89"></span><span class="mw-headline" id="登陆后变成浅灰色背景_（如Openbox）">登陆后变成浅灰色背景 （如Openbox）</span>
</h3>
<p>安装<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=hsetroot">hsetroot</a></span>，在运行xcompmgr之前，执行<code>hsetroot -solid "#000000"</code>（将000000替换成你想要的颜色代码）。
</p>
<h3>
<span id=".E5.9C.A8_awesome_.E7.AA.97.E5.8F.A3.E7.AE.A1.E7.90.86.E5.99.A8.E4.B8.AD.E5.87.BA.E7.8E.B0_BadPicture_request"></span><span class="mw-headline" id="在_awesome_窗口管理器中出现_BadPicture_request">在 awesome 窗口管理器中出现 BadPicture request</span>
</h3>
<p>如果你在 <a href="../en/Awesome.html" title="Awesome">awesome</a> 得到以下错误信息：
</p>
<pre> error 163: BadPicture request 149 minor 8 serial 34943
 error 163: BadPicture request 149 minor 8 serial 34988
 error 163: BadPicture request 149 minor 8 serial 35033
</pre>
<p>只需要安装软件包 <a href="../en/Feh.html" title="Feh">feh</a> 然后重启 <a href="../en/Awesome.html" title="Awesome">awesome</a>。
</p>
<h3>
<span id="Chromium_.26_Xcompmgr_.26_Awesome_.26_Conky"></span><span class="mw-headline" id="Chromium_&amp;_Xcompmgr_&amp;_Awesome_&amp;_Conky">Chromium &amp; Xcompmgr &amp; Awesome &amp; Conky</span>
</h3>
<p>I got some problems at startup after changing the displayresolution and autostarting Chromium in AwesomeWM (laptop with external monitor). In Combination with Conky there is always some part of the screen "stuck", the problem came from my resolution change at start via <code>.xinitrc</code> and Awesome setting the background afterwards via feh.
I solved this by putting 
</p>
<pre>hsetroot -solid "#000066"
</pre>
<p>in my .xinitrc just before xcompmgr.
</p>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../zh-CN/Category:X_server.html" title="Category:X server (简体中文)">X server (简体中文)</a></li>
<li><a href="../zh-CN/Category:Eye_candy.html" title="Category:Eye candy (简体中文)">Eye candy (简体中文)</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
<li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li>
</ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Xcompmgr_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;oldid=630206">https://wiki.archlinux.org/index.php?title=Xcompmgr_(简体中文)&amp;oldid=630206</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 6 August 2020, at 22:25.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
