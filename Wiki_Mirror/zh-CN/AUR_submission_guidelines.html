<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>AUR submission guidelines (简体中文) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-AUR_submission_guidelines_简体中文 rootpage-AUR_submission_guidelines_简体中文 skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">AUR submission guidelines (简体中文)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>相关文章</p>
<ul>
<li><a href="../zh-CN/Arch_User_Repository.html" title="Arch User Repository (简体中文)">Arch User Repository (简体中文)</a></li>
<li><a href="../en/Arch_package_guidelines.html" title="Arch package guidelines">Arch package guidelines</a></li>
<li><a href="../en/AUR_Trusted_User_Guidelines.html" title="AUR Trusted User Guidelines">AUR Trusted User Guidelines</a></li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>翻译状态：</strong>本文是 <a href="../en/AUR_submission_guidelines.html" title="AUR submission guidelines">AUR submission guidelines</a> 的<a href="../zh-CN/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (简体中文)">翻译</a>。上次翻译日期：2020-02-27。如果英文版本有所<a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=AUR_submission_guidelines&amp;diff=0&amp;oldid=599332">更改</a>，则您可以帮助同步翻译。</div>
<p>用户可以通过 <a href="../en/Arch_User_Repository.html" title="Arch User Repository">Arch User Repository</a> <b>分享</b> PKGBUILD。AUR 中不包含任何二进制包，仅包含用户上传的 <a href="../zh-CN/PKGBUILD.html" title="PKGBUILD (简体中文)">PKGBUILD</a>，供其他用户下载使用。所有软件包都是非官方的，使用风险自担。
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#%E6%8F%90%E4%BA%A4%E8%BD%AF%E4%BB%B6%E5%8C%85"><span class="tocnumber">1</span> <span class="toctext">提交软件包</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#%E6%8F%90%E4%BA%A4%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%9A%84%E8%A7%84%E5%88%99"><span class="tocnumber">1.1</span> <span class="toctext">提交软件包的规则</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#%E8%AE%A4%E8%AF%81"><span class="tocnumber">1.2</span> <span class="toctext">认证</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#%E5%88%9B%E5%BB%BA%E8%BD%AF%E4%BB%B6%E5%8C%85%E4%BB%93%E5%BA%93"><span class="tocnumber">1.3</span> <span class="toctext">创建软件包仓库</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#%E6%8F%90%E4%BA%A4%E5%92%8C%E6%9B%B4%E6%96%B0%E8%BD%AF%E4%BB%B6%E5%8C%85"><span class="tocnumber">1.4</span> <span class="toctext">提交和更新软件包</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="#%E7%BB%B4%E6%8A%A4%E8%BD%AF%E4%BB%B6%E5%8C%85"><span class="tocnumber">2</span> <span class="toctext">维护软件包</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#%E5%85%B6%E4%BB%96%E4%BA%8B%E9%A1%B9"><span class="tocnumber">3</span> <span class="toctext">其他事项</span></a></li>
</ul>
</div>

<h2>
<span id=".E6.8F.90.E4.BA.A4.E8.BD.AF.E4.BB.B6.E5.8C.85"></span><span class="mw-headline" id="提交软件包">提交软件包</span>
</h2>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>警告：</strong> 在提交前请先熟悉 <a href="../en/Arch_package_guidelines.html" class="mw-redirect" title="Arch packaging standards">Arch packaging standards</a> 及所有的"相关文章"。违反相应规则的软件包可能不经警告被直接删除。</div>
<p>如果对自己的 PKGBUILD 缺乏信心，可以先把它贴到<a rel="nofollow" class="external text" href="https://mailman.archlinux.org/mailman/listinfo/aur-general">AUR 邮件列表</a>，<a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewforum.php?id=4">论坛 AUR 版</a>或 <a href="../en/Arch_IRC_channels.html" class="mw-redirect" title="IRC Channels">IRC 频道</a>，让大家帮您检查。
</p>
<h3>
<span id=".E6.8F.90.E4.BA.A4.E8.BD.AF.E4.BB.B6.E5.8C.85.E7.9A.84.E8.A7.84.E5.88.99"></span><span class="mw-headline" id="提交软件包的规则">提交软件包的规则</span>
</h3>
<p>提交软件包时请遵循下列的规则:
</p>
<ul>
<li>仔细检查上传的文件。编写PKGBUILD前务必阅读 <a href="../zh-CN/Arch_package_guidelines.html" class="mw-redirect" title="Arch packaging standards (简体中文)">Arch软件打包标准</a>。劣质的 PKGBUILD 会影响软件的正常使用，不要指望别人会因为您糟糕的 PKGBUILD 浪费了他们的时间而收到感谢。</li>
<li>任何提交的 PKGBUILD 都不能编译<b>已经</b>位于<b>官方</b>二进制软件包<b>仓库</b>的程序。如果认为官方仓库的软件包已过期，请标记它。如果它有问题或者缺少功能，请反馈 <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/">bug 报告</a>。</li>
</ul>
<dl><dd>
<b>唯一的例外</b>是和官方打包版本相比增加或开启了<b>新的功能</b>或者使用了不同的<b>补丁</b>。这时需要修改 pkgname 来表示新增的功能。例如加入了边栏支持的 <code>screen</code> 应该命名为 <code>screen-sidebar</code>。此外还需要同时添加 <code>provides=('screen')</code> 以避免与官方仓库中的包冲突。</dd></dl>
<ul>
<li>
<b>检查 AUR</b> 中是否<b>已有</b>相同软件包。如果已经有人维护某软件包，可以以评论的形式将变化报告给维护人员。如果软件包无人维护或不存在，用户提交的软件包将被认领。别创建重复的包。</li>
<li>确保您的软件包<b>有人需要</b>，有人会用这个软件包吗？它非常特别吗？如果有一些人觉得它有用，就提交它。</li>
</ul>
<dl><dd>AUR 和官方软件仓库中计划放置通用软件和软件相关的内容，包括：可执行文件、配置文件、软件的在线/离线文档和软件直接使用的媒体数据。</dd></dl>
<ul>
<li>不要在 AUR PKGBUILD 中使用 <code>replaces</code>，除非这个软件包将要被重命名（例如当 <i>Ethereal</i> 变成 <i>Wireshark</i> 时）。如果这个软件包是已经存在的软件包的另一版本，使用 <code>conflicts</code> （或者如果这个软件包被其他软件需要时，使用 <code>provides</code>）。两者的主要区别是：在 pacman 同步（-Sy）之后，如果遇到与 <code>replaces</code> 匹配并已经安装的软件包时，pacman 会立刻想去替换它。而 <code>conflicts</code> 则在安装软件包时进行替换。</li>
<li>如果源代码是可取得的，请<b>避免</b>提交<b>二进制文件</b>。AUR不应当包含 <code>makepkg</code> 创建的二进制包，也不应当包含文件列表。</li>
<li>请在 <code>PKGBUILD</code> 最上端加入包含当前<b>维护者</b>和过去的<b>贡献者</b>的信息，记得对邮件地址进行必要的处理以避免被垃圾邮件骚扰。然后移除所有不必要的行。例如：</li>
</ul>
<dl>
<dd>如果您从其它人接手了一个 PKGBUILD，像这样把您的名字和邮件地址加到最上面。</dd>
<dd><pre># Maintainer: Your Name &lt;address at domain dot tld&gt;
</pre></dd>
<dd>如果在您之前有其他的维护者，请将它们添加到贡献者中。如果您是协同维护者，也请加上现在的其他维护者。</dd>
<dd><pre># Maintainer: Your name &lt;address at domain dot tld&gt;
# Maintainer: Other maintainer's name &lt;address at domain dot tld&gt;
# Contributor: Previous maintainer's name &lt;address at domain dot tld&gt;	
# Contributor: Original submitter's name &lt;address at domain dot tld&gt;
</pre></dd>
</dl>
<h3>
<span id=".E8.AE.A4.E8.AF.81"></span><span class="mw-headline" id="认证">认证</span>
</h3>
<p>要向 AUR 写入软件包，用户需要创建一个 <a href="../en/SSH_keys.html" title="SSH keys">SSH key</a> 。将公钥导入到用户账户的<i>我的帐号</i>一节，然后为 <code>aur.archlinux.org</code> 指定私钥的位置，例如：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.ssh/config</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Host aur.archlinux.org
  IdentityFile ~/.ssh/aur
  User aur</pre>
<p>建议为 AUR 创建一个新的密钥（而不是用旧的），这样出问题时可以直接废除密钥：
</p>
<pre>$ ssh-keygen -f ~/.ssh/aur
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>提示：</strong> 在输入公钥时可以通过换行的方式设置添加多个公钥。</div>
<h3>
<span id=".E5.88.9B.E5.BB.BA.E8.BD.AF.E4.BB.B6.E5.8C.85.E4.BB.93.E5.BA.93"></span><span class="mw-headline" id="创建软件包仓库">创建软件包仓库</span>
</h3>
<p>如果您正在<a href="../en/Creating_packages.html" title="Creating packages">创建新的软件包</a>，请通过克隆所需的 <a href="../en/PKGBUILD.html#pkgbase" title="PKGBUILD">pkgbase</a> 的方式建立一个远程 AUR 仓库和本地 Git 仓库。如果软件包还不存在，则会出现以下预料之中的警告：
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ git clone ssh://aur@aur.archlinux.org/<i>pkgbase</i>.git</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Cloning into '<i>pkgbase</i>'...
warning: You appear to have cloned an empty repository.
Checking connectivity... done.</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 即使 AUR 中的软件包被删除 Git 仓库也不会删除，所以您可能会发现 clone 一个 AUR 中还不存在的软件包时不会看到这个警告。 </div>
<p>如果您已经有一个软件包了，如果它不是 Git 仓库的话，<a href="../en/Git.html#Getting_a_Git_repository" title="Git">初始化</a>并添加远程 AUR 地址：
</p>
<pre>$ git remote add <i>label</i> ssh://aur@aur.archlinux.org/<i>pkgbase</i>.git
</pre>
<p>然后从远程<a href="../en/Git.html#Using_remotes" title="Git">获取</a>文件并初始化。
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>提示：</strong> 使用<a rel="nofollow" class="external text" href="https://git-scm.com/docs/git-pull#git-pull---rebasefalsetruemergespreserveinteractive">推送和变基</a>来解决 <code><i>pkgbase</i></code> 匹配到已删除软件包的冲突问题。</div>
<h3>
<span id=".E6.8F.90.E4.BA.A4.E5.92.8C.E6.9B.B4.E6.96.B0.E8.BD.AF.E4.BB.B6.E5.8C.85"></span><span class="mw-headline" id="提交和更新软件包">提交和更新软件包</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>警告：</strong> 不想以全局身份提交？记得通过 <code>git config user.name [...]</code> 和 <code>git config user.email [...]</code> 编辑自己的本地身份！</div>
<p>当释出新版本的软件时，更新 <a href="../en/PKGBUILD.html#pkgver" title="PKGBUILD">pkgver</a> 或者 <a href="../en/PKGBUILD.html#pkgrel" title="PKGBUILD">pkgrel</a> 变量来提示所有的用户更新。如果仅仅是对 <a href="../zh-CN/PKGBUILD.html" title="PKGBUILD (简体中文)">PKGBUILD</a> 的小修改（例如修正笔误），请不要更新这些变量。
</p>
<p>无论何时 <code>PKGBUILD</code> 的元数据发生变动（例如更新了 <code>pkgver()</code>），都需要重新生成 <a href="../zh-CN/.SRCINFO.html" title=".SRCINFO (简体中文)">.SRCINFO</a> 。否则AUR不会显示更新后的版本号。
</p>
<p>要上传或者更新一个软件包，<i>至少</i>要<a href="../en/Git.html#Staging_changes" title="Git">添加</a> <code>PKGBUILD</code> 和 <code>.SRCINFO</code> 和其他所有新增的或者修改过的辅助文件（例如 <a href="../en/PKGBUILD.html#install" title="PKGBUILD"><i>.install</i></a> 文件或者如<a href="../en/Patching_packages.html" title="Patching packages">补丁</a>之类的<a href="../en/PKGBUILD.html#source" title="PKGBUILD">本地源码文件</a>），<a href="../en/Git.html#Committing_changes" title="Git">提交</a>，最后<a href="../en/Git.html#Push_to_a_repository" title="Git">推送</a>这些变动到AUR上。
</p>
<p>例如:
</p>
<pre>$ makepkg --printsrcinfo &gt; .SRCINFO
$ git add PKGBUILD .SRCINFO
$ git commit -m "<i>useful commit message</i>"
$ git push
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>注意：</strong> 如果您忘记在首次提交中包含 <code>.SRCINFO</code>，您可以使用 <a rel="nofollow" class="external text" href="https://git-scm.com/docs/git-rebase#git-rebase---root">rebasing with --root</a> 或是 <a rel="nofollow" class="external text" href="https://git-scm.com/docs/git-filter-branch#git-filter-branch---tree-filterltcommandgt">filtering the tree</a> 使得 AUR 接受您的第一次推送</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>提示：</strong> 为了保持工作目录和提交尽可能的干净，可以创建 <span class="plainlinks archwiki-template-man" title="$ man 5 gitignore"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/gitignore.5">gitignore(5)</a></span> 文件来排除所有文件，然后再按需添加文件。</div>
<h2>
<span id=".E7.BB.B4.E6.8A.A4.E8.BD.AF.E4.BB.B6.E5.8C.85"></span><span class="mw-headline" id="维护软件包">维护软件包</span>
</h2>
<ul>
<li>阅读其他用户的反馈，并试着听从建议改进软件包，这是个学习的过程！</li>
<li>升级软件包后，不要在评论中加入版本更新信息，这些信息会冲淡更重要的用户评论。</li>
<li>不要提交软件包后就放任不管！检查更新并改进 PKGBUILD 是维护者的责任。</li>
<li>发觉自己不再想维护某个软件包？可以通过 AUR web 界面 <code>disown</code> 一个软件包或是在 AUR 邮件列表发条消息。如果这个包的所有维护者都disown，那么它就会变成一个 <a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/?SB=n&amp;do_Orphans=Orphans">“orphaned”</a> 软件包.</li>
</ul>
<h2>
<span id=".E5.85.B6.E4.BB.96.E4.BA.8B.E9.A1.B9"></span><span class="mw-headline" id="其他事项">其他事项</span>
</h2>
<p>取消维护权限、删除、合并请求可以通过右侧 "Package actions" 的 "File Request" 链接执行。这会给当前的维护者和 <a rel="nofollow" class="external text" href="https://mailman.archlinux.org/mailman/listinfo/aur-requests">aur-requests 邮件列表</a>自动发送邮件通知。<a href="../en/Trusted_Users.html" title="Trusted Users">Trusted Users</a> 会接受或拒绝请求。
</p>
<ul>
<li>如果现在的维护者在两周之内没有反应，orphan 请求就会通过。</li>
<li>合并请求会删除软件包 base，并将现有的投票数、评论转移到另一个软件包 base 中。将要合并到的软件包 base 是必须的。请注意这和 git merge 或者 GitLab 的 merge request 没有任何关系。</li>
<li>移除请求需要如下信息（务必用英语）：
<ul>
<li>简要解释请求删除的原因。注意仅仅在软件包下评论是不足以指出需要删除的原因的。因为在 TU 采取行动之前，aur-requests 是唯一能取得这些信息的地方。</li>
<li>支持删除原因的详细内容，例如这个软件包已经由另一个软件包提供。</li>
<li>移除请求可能会被拒绝。例如如果您是维护者的话，您很有可能被建议 disown 这个软件包，以便让其他打包者认领。</li>
<li>软件包被删除之后，它的 Git 仓库仍然能从 AUR 中被获取。</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../zh-CN/Category:About_Arch.html" title="Category:About Arch (简体中文)">About Arch (简体中文)</a></li>
<li><a href="../zh-CN/Category:Package_development.html" title="Category:Package development (简体中文)">Package development (简体中文)</a></li>
<li><a href="../zh-CN/Category:Package_management.html" title="Category:Package management (简体中文)">Package management (简体中文)</a></li>
</ul>
</div></div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=AUR_submission_guidelines_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&amp;oldid=599356">https://wiki.archlinux.org/index.php?title=AUR_submission_guidelines_(简体中文)&amp;oldid=599356</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 27 February 2020, at 13:37.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
