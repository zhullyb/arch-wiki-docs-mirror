<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>NetworkManager (Česky) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.35.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="noindex,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-NetworkManager_Česky rootpage-NetworkManager_Česky skin-vector action-view skin-vector-legacy">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">NetworkManager (Česky)</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<div class="warningbox">The printable version is no longer supported and may have rendering errors. Please update your browser bookmarks and please use the default browser print function instead.</div>
<div class="mw-parser-output">
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-preferences-desktop-locale.png" class="image"><img alt="Tango-preferences-desktop-locale.png" src="../File:Tango-preferences-desktop-locale.png" decoding="async" width="48" height="48"></a><b>This article or section needs to be <a href="../en/ArchWiki:Contributing.html#Translating" title="ArchWiki:Contributing">translated</a>.</b><a href="../File:Tango-preferences-desktop-locale.png" class="image"><img alt="Tango-preferences-desktop-locale.png" src="../File:Tango-preferences-desktop-locale.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Notes:</b> <span style="color:red;">please use the first argument of the template to provide more detailed indications.</span> (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:NetworkManager_(%C4%8Cesky)">Talk:NetworkManager (Česky)#</a>)</div>
</div>
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../cs/Network_configuration.html" class="mw-redirect" title="Network Configuration (Česky)">Network Configuration (Česky)</a></li>
<li><a href="../cs/c90420c5a022acc58009274851671aed.html" class="mw-redirect" title="Wireless Setup (Česky)">Wireless Setup (Česky)</a></li>
<li><a href="../cs/Netctl.html" title="Netctl (Česky)">Netctl (Česky)</a></li>
<li><a href="../en/Wicd.html" title="Wicd">Wicd</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://projects.gnome.org/NetworkManager/">NetworkManager</a> je program pro poskytování detekce a konfigurace pro systém automatického připojování k síti. Funkcionalita NetworkManageru může být použitelná jak pro bezdrátové tak i pro drátové sítě.  Pro bezdrátové sítě, NetworkManager upřednostňuje známé bezdrátové sítě a má schopnost vhodně přepínat do nejspolehlivějších sítí. NetworkManager-vnímající aplikace mohou přepínat mezi online a offline módem. NetworkManager také upřednostňuje kabelové spoje před bezdrátovými, obsahuje podporu modemových připojení a určitých druhů VPN.  NetworkManager byl původně vyvinut společností RedHat a nyní je hostován projektem <a href="../en/GNOME.html" title="GNOME">GNOME</a>.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2 id="mw-toc-heading">Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Z%C3%A1kladn%C3%AD_instalace"><span class="tocnumber">1</span> <span class="toctext">Základní instalace</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Grafick%C3%A1_n%C3%A1stavba"><span class="tocnumber">2</span> <span class="toctext">Grafická nástavba</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#GNOME"><span class="tocnumber">2.1</span> <span class="toctext">GNOME</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#KDE4"><span class="tocnumber">2.2</span> <span class="toctext">KDE4</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Openbox"><span class="tocnumber">2.3</span> <span class="toctext">Openbox</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Ostatn%C3%AD_desktopy_a_Okenn%C3%AD_mana%C5%BEery"><span class="tocnumber">2.4</span> <span class="toctext">Ostatní desktopy a Okenní manažery</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#P%C5%99%C3%ADkazov%C3%BD_%C5%99%C3%A1dek"><span class="tocnumber">2.5</span> <span class="toctext">Příkazový řádek</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8">
<a href="#Nastaven%C3%AD"><span class="tocnumber">3</span> <span class="toctext">Nastavení</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="#Vypnut%C3%AD_sou%C4%8Dasn%C3%A9ho_s%C3%AD%C5%A5ov%C3%A9ho_nastaven%C3%AD"><span class="tocnumber">3.1</span> <span class="toctext">Vypnutí současného síťového nastavení</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#%C3%9Aprava_d%C3%A9mon%C5%AF"><span class="tocnumber">3.2</span> <span class="toctext">Úprava démonů</span></a></li>
<li class="toclevel-2 tocsection-11">
<a href="#S%C3%AD%C5%A5ov%C3%A9_slu%C5%BEby_s_NetworkManager_Dispatcher"><span class="tocnumber">3.3</span> <span class="toctext">Síťové služby s NetworkManager Dispatcher</span></a>
<ul>
<li class="toclevel-3 tocsection-12"><a href="#Pou%C5%BEit%C3%AD_dispatcheru_k_p%C5%99ipojen%C3%AD_vpn_p%C5%99es_ji%C5%BE_nav%C3%A1zan%C3%A9_s%C3%AD%C5%A5ov%C3%A9_p%C5%99ipojen%C3%AD"><span class="tocnumber">3.3.1</span> <span class="toctext">Použití dispatcheru k připojení vpn přes již navázané síťové připojení</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-13"><a href="#Nastaven%C3%AD_proxy"><span class="tocnumber">3.4</span> <span class="toctext">Nastavení proxy</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-14"><a href="#Testov%C3%A1n%C3%AD"><span class="tocnumber">4</span> <span class="toctext">Testování</span></a></li>
<li class="toclevel-1 tocsection-15">
<a href="#%C5%98e%C5%A1en%C3%AD_probl%C3%A9m%C5%AF"><span class="tocnumber">5</span> <span class="toctext">Řešení problémů</span></a>
<ul>
<li class="toclevel-2 tocsection-16"><a href="#Network_Management_Disabled"><span class="tocnumber">5.1</span> <span class="toctext">Network Management Disabled</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#NetworkManager_zabra%C5%88uje_DHCPCD_aby_pou%C5%BE%C3%ADval_resolv.conf.head_and_resolv.conf.tail"><span class="tocnumber">5.2</span> <span class="toctext">NetworkManager zabraňuje DHCPCD aby používal resolv.conf.head and resolv.conf.tail</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Zamezen%C3%AD_zm%C4%9Bn%C3%A1m_v_resolv.conf"><span class="tocnumber">5.3</span> <span class="toctext">Zamezení změnám v resolv.conf</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#Probl%C3%A9my_s_DHCP"><span class="tocnumber">5.4</span> <span class="toctext">Problémy s DHCP</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Jak_se_vyhnout_Gnome_keyring_p%C5%99i_norm%C3%A1ln%C3%ADm_u%C5%BEivatelsk%C3%A9m_p%C5%99ipojen%C3%AD_bezdr%C3%A1tov%C3%A9_s%C3%ADt%C4%9B"><span class="tocnumber">5.5</span> <span class="toctext">Jak se vyhnout Gnome keyring při normálním uživatelském připojení bezdrátové sítě</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#Chyb%C4%9Bj%C3%ADc%C3%AD_default_route"><span class="tocnumber">5.6</span> <span class="toctext">Chybějící default route</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#3G_modem_nen%C3%AD_detekov%C3%A1n"><span class="tocnumber">5.7</span> <span class="toctext">3G modem není detekován</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#VPN_probl%C3%A9my_v_Networkmanageru_0.7.999"><span class="tocnumber">5.8</span> <span class="toctext">VPN problémy v Networkmanageru 0.7.999</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#Vyp%C3%ADn%C3%A1n%C3%AD_WLAN_na_laptopech"><span class="tocnumber">5.9</span> <span class="toctext">Vypínání WLAN na laptopech</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="#Nastaven%C3%AD_statick%C3%A9_IP_se_vrac%C3%AD_k_DHCP"><span class="tocnumber">5.10</span> <span class="toctext">Nastavení statické IP se vrací k DHCP</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-26">
<a href="#Tipy_and_triky"><span class="tocnumber">6</span> <span class="toctext">Tipy and triky</span></a>
<ul>
<li class="toclevel-2 tocsection-27"><a href="#Kontrola_jestli_je_networking_spou%C5%A1t%C4%9Bn_cronem_nebo_skriptem"><span class="tocnumber">6.1</span> <span class="toctext">Kontrola jestli je networking spouštěn cronem nebo skriptem</span></a></li>
<li class="toclevel-2 tocsection-28">
<a href="#Automatick%C3%A9_odemknut%C3%AD_keyring_po_p%C5%99ihl%C3%A1%C5%A1en%C3%AD"><span class="tocnumber">6.2</span> <span class="toctext">Automatické odemknutí keyring po přihlášení</span></a>
<ul>
<li class="toclevel-3 tocsection-29"><a href="#Gnome_2"><span class="tocnumber">6.2.1</span> <span class="toctext">Gnome</span></a></li>
<li class="toclevel-3 tocsection-30"><a href="#KDE"><span class="tocnumber">6.2.2</span> <span class="toctext">KDE</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-31"><a href="#Automatick%C3%A9_p%C5%99ipojen%C3%AD_p%C5%99i_bootu"><span class="tocnumber">6.3</span> <span class="toctext">Automatické připojení při bootu</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#Ignorov%C3%A1n%C3%AD_ur%C4%8Dit%C3%BDch_za%C5%99%C3%ADzen%C3%AD"><span class="tocnumber">6.4</span> <span class="toctext">Ignorování určitých zařízení</span></a></li>
</ul>
</li>
</ul>
</div>

<h2>
<span id="Z.C3.A1kladn.C3.AD_instalace"></span><span class="mw-headline" id="Základní_instalace">Základní instalace</span>
</h2>
<p>NetworkManager je dostupný z oficiálních repozitářů:
</p>
<pre># pacman -S networkmanager
</pre>
<h2>
<span id="Grafick.C3.A1_n.C3.A1stavba"></span><span class="mw-headline" id="Grafická_nástavba">Grafická nástavba</span>
</h2>
<p>Ke konfiguraci a snadnému přístupu k NetworkManageru bude mnoho lidí chtít nainstalovat miniaplikaci. Tato GUI nástavba se obvykle usadí v system tray (nebo oznamovací oblasti) a dovolí výběr sítě a nastavení NetworkManageru. Různé miniaplikace existují pro rozdílné druhy desktopů.
</p>
<h3><span class="mw-headline" id="GNOME">GNOME</span></h3>
<p>GNOME aplety (dříve gnome-network-manager) je dostatečně odlehčené a pracuje přes všechna prostředí:
</p>
<pre># pacman -S network-manager-applet
</pre>
<p>Jestliže chcete uchovávat autentizační detaily (Wireless/DSL) a zapnout globální nastavení připojení, např "dostupnost pro všechny uživatele":
</p>
<pre># pacman -S gnome-keyring
</pre>
<h3><span class="mw-headline" id="KDE4">KDE4</span></h3>
<p>KNetworkManager nadstavba je dostupná v KDE verzy 4.4 jako plasma widget:
</p>
<pre># pacman -S kdeplasma-applets-networkmanagement
</pre>
<p>GNOME protějšek pracuje stejně pěkně nebo dokonce lépe (má více prvků a detekuje víc hardwaru).
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Jestliže přecházíte z jiného nástroje pro správu sítí jako např. Wicd nezapomeňte nastavit základní 'Network Management Backend' v  
System Settings -&gt; Hardware -&gt; Information Sources</div>
<h3><span class="mw-headline" id="Openbox">Openbox</span></h3>
<p>GNOME aplet pracuje dobře s xfce4-notifyd notification daemon:
</p>
<pre># pacman -S network-manager-applet xfce4-notifyd hicolor-icon-theme gnome-icon-theme
</pre>
<p>Jestliže chcete uchovávat autentizační detaily (Wireless/DSL):
</p>
<pre># pacman -S gnome-keyring
</pre>
<p>Aby Openboxový autostart.sh nastartoval nm-applet dobře, bude možná potřeba smazat soubor /etc/xdg/autostart/nm-applet.desktop   (Je možné, že bude potřeba mazat tento soubor po každé změně v network-manager-apletu)
</p>
<p>Potom v autostart.sh, nastartuje nm-applet tímto řádkem:
</p>
<pre>(sleep 3 &amp;&amp; /usr/bin/nm-applet --sm-disable) &amp;
</pre>
<h3>
<span id="Ostatn.C3.AD_desktopy_a_Okenn.C3.AD_mana.C5.BEery"></span><span class="mw-headline" id="Ostatní_desktopy_a_Okenní_manažery">Ostatní desktopy a Okenní manažery</span>
</h3>
<p>Je doporučeno používat GNOME aplety. Také je potřeba zajistit, že GNOME hicolor theme je nainstalováno, kvůli zobrazení tohoto apletu:
</p>
<pre># pacman -S hicolor-icon-theme gnome-icon-theme
</pre>
<h3>
<span id="P.C5.99.C3.ADkazov.C3.BD_.C5.99.C3.A1dek"></span><span class="mw-headline" id="Příkazový_řádek">Příkazový řádek</span>
</h3>
<p>Balíček Networkmanager od verze 0.8.1 obsahuje <span class="plainlinks archwiki-template-man" title="$ man 1 nmcli"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/nmcli.1">nmcli(1)</a></span>
</p>
<h2>
<span id="Nastaven.C3.AD"></span><span class="mw-headline" id="Nastavení">Nastavení</span>
</h2>
<p>NetworkManager vyžaduje pár dodatečných kroků, aby mohl pracovat korektně.
</p>
<p>Ověřte zda je váš <code>/etc/hosts</code> je správný, před tím než budete pokračovat.  Jestliže jste se předčasně pokoušeli připojit před následujícím krokem, NetworkManager to může oznámit.  Příklad hostname řádku v <code>/etc/hosts</code>:
</p>
<pre>#&lt;ip-address&gt; &lt;hostname.domain.org&gt;           &lt;hostname&gt;                        
127.0.0.1     localhost.localdomain localhost dell-latitude
</pre>
<h3>
<span id="Vypnut.C3.AD_sou.C4.8Dasn.C3.A9ho_s.C3.AD.C5.A5ov.C3.A9ho_nastaven.C3.AD"></span><span class="mw-headline" id="Vypnutí_současného_síťového_nastavení">Vypnutí současného síťového nastavení</span>
</h3>
<p>Abyste správně otestovali NetworkManagera, změnte své současné síťové nastavení.  Nejdříve (Při použítí Arch Linux síťových skriptů) zastavte sítě:
</p>
<pre>/etc/rc.d/network stop
</pre>
<p>Ukončete vaše NIC's (Network Interface Controllers, tj. síťové karty).  Například:
</p>
<pre>ifconfig eth0  down
ifconfig wlan0 down
</pre>
<p>Upravte <code>/etc/rc.conf</code> a kde je definováno DHCP nebo  statická IP adresa, okomentujte:
</p>
<pre>#eth0="dhcp"                                                                    
#wlan0="dhcp"                                                                   
INTERFACES=(!eth0 !wlan0)</pre>
<h3>
<span id=".C3.9Aprava_d.C3.A9mon.C5.AF"></span><span class="mw-headline" id="Úprava_démonů">Úprava démonů</span>
</h3>
<p>Musíte <i>odstranit</i> základního <b>network</b> démona a přidat <b>networkmanager</b> démona, za dbus démona:
</p>
<pre>DAEMONS=( ...<b>dbus networkmanager</b>... )
</pre>
<p>Ujistěte se, že balíček <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dbus">dbus</a></span> je nainstalován tak jak to NetworkManager vyžaduje. Ke nastartování ostatních služeb (démonů) které vyžaduje síťové připojení si ukážeme v následující sekcí na jejich nastavení. Ačkoliv je zde NetworkManager démon nastartován, nepřipojí se (v základu) do sítě dokud není aplet nahrany a specifikace apletu potřebné k připojení. To znamená, že síťové služby je potřeba specifikovat NetworkManageru až když běží.
</p>
<h3>
<span id="S.C3.AD.C5.A5ov.C3.A9_slu.C5.BEby_s_NetworkManager_Dispatcher"></span><span class="mw-headline" id="Síťové_služby_s_NetworkManager_Dispatcher">Síťové služby s NetworkManager Dispatcher</span>
</h3>
<p>Je zde pár síťových služeb, které nebudou chtít běžet na rozhraní spuštěném NetworkManagerem. Dobrým příkladem jsou <b>openntpd</b> a síťová souborová připojení různých typů (například <b>netfs</b>). NetworkManager má schopnost spustit tyto služby když se připojujete k síti (interface up), a zastavit je když už nejsou potřeba  (interface down).
</p>
<p>Pro použítí těchto pruvku může být přidán skript do adresáře <code>/etc/NetworkManager/dispatcher.d</code>. Tyto skripty potřebují mít uživatelské právo ke spuštění.  Kvůli bezpečnosti je dobrým zvykem udělat jejich vlastníkem uživatele  <b>root:root</b> a příznak zápisu jen pro vlastníka.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Z bezpečnostních důvodů byste měli vypnout právo zápisu pro skupiny a ostatní. Například použít masku 755.
Jinak Dispatcher může odmítnout vykonat skrip s chybovou zprávou "nm-dispatcher.action: Script could not be executed: writable by group or other, or set-UID." in /var/log/messages.log </div>
<p>Skripty budou spouštěny v abecedním pořadí v čase připojení (s argumenty <i>interface up</i>), a v obráceném abecedním pořadí v čase odpojení (<i>interface down</i>). Pro zajištění správného pořadí, je běžné použití číslic před jménem skriptu (například <code>10_portmap</code> nebo <code>30_netfs</code> (který zajišťuje že portmapper je spuštěn před pokusem o přimountování NFS).
</p>
<p>Následují skript nastartuje démona openntpd když je rozhraní spouštěno. Uložte soubor jako <code>/etc/NetworkManager/dispatcher.d/20_openntpd</code> a udělte mu práva ke spuštění.
</p>
<pre>#!/bin/sh

INTERFACE=$1 # The interface which is brought up or down
STATUS=$2 # The new state of the interface

case "$STATUS" in
    'up') # $INTERFACE is up
	exec /etc/rc.d/openntpd start
	;;
    'down') # $INTERFACE is down
	# Check for active interface and down if no one active
	if [ ! `nm-tool|grep State|cut -f2 -d' '` == "connected" ]; then
		exec /etc/rc.d/openntpd stop
	fi
	;;
esac
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Jestliže se připojujete k cizím nebo veřejným sítím, uvědomte si které služby spouštíte a které servery očekáváte, že budou dostupné pro ty kteří se chtějí připojit.
Mohl byste vytvořit bezpečnostní riziko spuštěním špatné služby během připojení k veřejné síti.</div>
<h4>
<span id="Pou.C5.BEit.C3.AD_dispatcheru_k_p.C5.99ipojen.C3.AD_vpn_p.C5.99es_ji.C5.BE_nav.C3.A1zan.C3.A9_s.C3.AD.C5.A5ov.C3.A9_p.C5.99ipojen.C3.AD"></span><span class="mw-headline" id="Použití_dispatcheru_k_připojení_vpn_přes_již_navázané_síťové_připojení">Použití dispatcheru k připojení vpn přes již navázané síťové připojení</span>
</h4>
<p>V tomto případě se chceme automaticky připojit k vpn definovaném pomocí NetworManager-skriptu - viz. předešlý příklad. Nejdříve vytvoříme dispather skript, který definuje co se bude dělat po připojení síti.
</p>
<p>1. Vytvořte dispatcher sckipt v <code>/etc/NetworkManager/dispatcher.d/vpn-up</code>
</p>
<pre>case "$2" in
       up)
               sudo -u username DISPLAY=:0 /usr/bin/python /etc/NetworkManager/vpn-up.py
               ;;
esac
</pre>
<p>Nezapomeňte změnit příznak spustitelný pomocí chmod +x a správný <b>username</b>.
</p>
<p>2. Vytvořte <code>/etc/NetworkManager/vpn-up.py</code> a změňte <b>network-ESSID</b> na vámi požadované. Kók najdete <a rel="nofollow" class="external text" href="http://dpaste.com/hold/203441/">zde</a>.
</p>
<p>Nyní by se měl NetworkManager pokusit připojik k vaší vpn, která je definována ve vašem profilu.
</p>
<h3>
<span id="Nastaven.C3.AD_proxy"></span><span class="mw-headline" id="Nastavení_proxy">Nastavení proxy</span>
</h3>
<p>Network Manager nezvládá přímé nastavení proxy, ale jestliže používáte GNOME, mohli by jste použít <a rel="nofollow" class="external text" href="http://marin.jb.free.fr/proxydriver/">proxydriver</a>, který  zvládá proxy nastavení s použitím informací z Network Manageru. Balíček <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/proxydriver/">proxydriver</a></span><sup><small>AUR</small></sup> je dostupný v <a href="../en/Arch_User_Repository.html" class="mw-redirect" title="AUR">AUR</a>.
</p>
<p>Aby byl proxydriver schopen měnit nastavení proxy, měl by jste vykonoat tento příkaz jako součást GNOME startovacího procesu (
System-&gt;Preferences-&gt;Startup Applications):
</p>
<pre>xhost +si:localuser:your_username
</pre>
<p>Podívejte se: <a href="../en/Proxy_server.html" class="mw-redirect" title="Proxy settings">Proxy settings</a>
</p>
<h2>
<span id="Testov.C3.A1n.C3.AD"></span><span class="mw-headline" id="Testování">Testování</span>
</h2>
<p>NetworkManager applety jsou konstruovány tak aby byli nahrány před přihlášením, proto by žádná další konfigurace, pro většínu uživatelů, neměla být nutná. Jestliže jste si již vypnuli předchozí síťové nastavení a odpojili jste se od vaší sítě, nyní můžete otestovat, zda-li váš NetworkManager fungujue.  Nejdříve spustíme démona:
</p>
<pre>/etc/rc.d/networkmanager start
</pre>
<p>Některé aplety vám jsou poskytovány jako .desktop soubory, takže aplet NetworkManageru může být nahrán skrz aplikační menu. A když ne, buď budete muset objevit příkaz k použití nebo se odhlásit a znovu příhlásit ke spuštění apletu. Jakmile je aplet nastartován, pravděpodobně vám dovolí volit síťová připojení s podporou automatického nastavení pomocí DHCP serveru.
</p>
<p>Ke spuštění GNOME apletu v non-xdg-compliant Window Manageru jako Awesome:
</p>
<pre>nm-applet --sm-disable &amp;
</pre>
<p>Pro statické IP budete muset nakonfigurovat NetworkManager tak aby je znal. Proces obvykle zahrnuje kliknutí pravým tlačítkem myši na aplet a výběr něčeho jako je 'Správa spojení' nebo 'Edit Connections'.
</p>
<h2>
<span id=".C5.98e.C5.A1en.C3.AD_probl.C3.A9m.C5.AF"></span><span class="mw-headline" id="Řešení_problémů">Řešení problémů</span>
</h2>
<p>Řešení některých běžných problémů.
</p>
<h3><span class="mw-headline" id="Network_Management_Disabled">Network Management Disabled</span></h3>
<p>Někdy při vypnutí NM, není pid (statusový) soubor vymazán a obdržíte zprávu 'Network management disabled'. Jakmile se toto stane budete muset tento soubor vymazat manuálně:
</p>
<pre>rm /var/lib/NetworkManager/NetworkManager.state
</pre>
<p>Jestliže se toto stane po restartu, můžete přidat tuto akci do vašeho <code>etc/rc.local</code> pro vymazání při startu systému:
</p>
<pre>nmpid=/var/lib/NetworkManager/NetworkManager.state
[ -f $nmpid ] &amp;&amp; rm $nmpid</pre>
<h3>
<span id="NetworkManager_zabra.C5.88uje_DHCPCD_aby_pou.C5.BE.C3.ADval_resolv.conf.head_and_resolv.conf.tail"></span><span class="mw-headline" id="NetworkManager_zabraňuje_DHCPCD_aby_používal_resolv.conf.head_and_resolv.conf.tail">NetworkManager zabraňuje DHCPCD aby používal resolv.conf.head and resolv.conf.tail</span>
</h3>
<p>Občas je problematické přidat statické položky do resolv.conf když je neustále přepisován nm a dhcpcd. Můžete použít balíček networkmanager-dhclient z AUR, ale lepším řešením je použití následujícího skriptu:
</p>
<pre>#!/bin/bash
# 
# /etc/NetworkManager/dispatcher.d/99-resolv.conf-head_and_tail
# Include /etc/resolv.conf.head and /etc/resolv.conf.tail to /etc/resolv.conf
#
# scripts in the /etc/NetworkManager/dispatcher.d/ directory
# are called alphabetically and are passed two parameters:
# $1 is the interface name, and $2 is “up” or “down” as the
# case may be.

resolvconf='/etc/resolv.conf';
cat "$resolvconf"{.head,,.tail} 2&gt;/dev/null &gt; "$resolvconf".tmp
mv -f "$resolvconf".tmp "$resolvconf"</pre>
<h3>
<span id="Zamezen.C3.AD_zm.C4.9Bn.C3.A1m_v_resolv.conf"></span><span class="mw-headline" id="Zamezení_změnám_v_resolv.conf">Zamezení změnám v resolv.conf</span>
</h3>
<p>NetworkManager se pokusí zapsat DNS informace z DHCP do <code>/etc/resolv.conf</code>, přepsáním již existujícího obsahu. K zamezení můžete použít immutable(neměnný) bit na souboru (jako root):
</p>
<pre># chattr +i /etc/resolv.conf
</pre>
<p>Pro budoucí upravy tohoto souboru, nejdříve odstraňte immutable (neměnný) bit:
</p>
<pre># chattr -i /etc/resolv.conf
</pre>
<h3>
<span id="Probl.C3.A9my_s_DHCP"></span><span class="mw-headline" id="Problémy_s_DHCP">Problémy s DHCP</span>
</h3>
<p>Jestliže máte problémy s obdržením IP adrasy skrz DHCP, zkuste přidat následující řádky do vašeho <code>/etc/dhclient.conf</code>:
</p>
<pre> interface "eth0" {
   send dhcp-client-identifier 01:aa:bb:cc:dd:ee:ff;
 }
</pre>
<p>Kde <code>aa:bb:cc:dd:ee:ff</code> je MAC-adresa tohoto NIC.
</p>
<h3>
<span id="Jak_se_vyhnout_Gnome_keyring_p.C5.99i_norm.C3.A1ln.C3.ADm_u.C5.BEivatelsk.C3.A9m_p.C5.99ipojen.C3.AD_bezdr.C3.A1tov.C3.A9_s.C3.ADt.C4.9B"></span><span class="mw-headline" id="Jak_se_vyhnout_Gnome_keyring_při_normálním_uživatelském_připojení_bezdrátové_sítě">Jak se vyhnout Gnome keyring při normálním uživatelském připojení bezdrátové sítě</span>
</h3>
<p>Je to velice jednoduché! Nejdříve vytvořte skupinu zvanou <b>networkmanager</b> následujícím příkazem (nebo jiným způsobem, jenž upřednostňujete):
</p>
<pre># groupadd networkmanager
</pre>
<p>Po té předejte uživatele do této skupiny použítím nasledujícího příkazu (nebo jiným způsobem, jenž upřednostňujete):
</p>
<pre># gpasswd -a username networkmanager
</pre>
<p>Nahraďte, v předchozím príkazu, username vaším aktuálním uživatelským jménem.
</p>
<p>Nyní jako root spusťte nm-connection-editor a nastavte připojení:
</p>
<pre># nm-connection-editor
</pre>
<p>Označte zatržítko vedle "Available to all users" a použijte nastavení. 
</p>
<p>Od teď nebudete vyrušováni Gnome keyringem! <i>(citation needed)</i>
Také, případně zapnete-li "connect automatically", vaše připojení bude dostupné a připojené dokonce předtím než se nalogujete k vašemu desktopu a dělá tím celý startovací proces ještě rychlejší!
</p>
<h3>
<span id="Chyb.C4.9Bj.C3.ADc.C3.AD_default_route"></span><span class="mw-headline" id="Chybějící_default_route">Chybějící default route</span>
</h3>
<p>Přinejmenším v KDE4 systému, není vytvořena default route při navázání bezdrátového spojení pomocí NetvworkManageru. Pro změnu route nastavení bezdrátového připojení odstraňte základní výběr "Use only for resources on this noccection",které řeší tuto zálažitost.
</p>
<h3>
<span id="3G_modem_nen.C3.AD_detekov.C3.A1n"></span><span class="mw-headline" id="3G_modem_není_detekován">3G modem není detekován</span>
</h3>
<p>Jestliže NetworkManager (od verze 0.7.999) nedetekuje váš 3G modem, ale i nadále jste schopní se připojit přes <a href="../en/Wvdial.html" title="Wvdial">wvdial</a>, zkuste nainstalovat balíček 
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=modemmanager">modemmanager</a></span> příkazem <code>pacman -S modemmanager</code> a restartujte NetworkManager démona <code>/etc/rc.d/networkmanager restart</code>. Odpojte a znovu připojte váš modem nebo restartujte. Tato utilita poskytuje podporu pro hardware, který není v základní databázi networkmanageru.
</p>
<h3>
<span id="VPN_probl.C3.A9my_v_Networkmanageru_0.7.999"></span><span class="mw-headline" id="VPN_problémy_v_Networkmanageru_0.7.999">VPN problémy v Networkmanageru 0.7.999</span>
</h3>
<p>Jestliže obdržíte chybovou zprávu "invalid secrets" když se pokoušíte připojit k vašemu VPN poskytovateli prostřednictvím PPTP protokolu, zkuste místotoho nainstalovat (git version): <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=networkmanager">networkmanager</a></span>, <a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages.php?ID=26516">nm-applet</a> a <a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages.php?ID=29178">pptp plugin</a>.
</p>
<h3>
<span id="Vyp.C3.ADn.C3.A1n.C3.AD_WLAN_na_laptopech"></span><span class="mw-headline" id="Vypínání_WLAN_na_laptopech">Vypínání WLAN na laptopech</span>
</h3>
<p>Občas networkmanager nebude pracovat když vypnete váš Wifi adaptér vaším vypínačem na vašem laptopu a později se pokusíte o znovuzapnutí. Toto je častý problém s rfkill. Nainstalujte rfkill z repa:
Sometimes networkmanager will not work when you disable your Wifi-adapter with a switch on your laptop and try to enable it again afterwards. This is often a problem with rfkill. Install rfkill from the repo:
</p>
<pre># pacman -S rfkill
</pre>
<p>a použíjte
</p>
<pre>$ watch -n1 rfkill list all
</pre>
<p>ke kontrole, že váš ovladač oznámil stav bezdrátového adaptéru.
Jestliže jeden identifikátor zůstane blokován poté co jste zapnulí adaptér, zkuste to manuálně odemnknout tímto příkazem (kde X je číslo identifikátoru poskytnuté předchzím výstupem):
</p>
<pre># rfkill event unblock X
</pre>
<h3>
<span id="Nastaven.C3.AD_statick.C3.A9_IP_se_vrac.C3.AD_k_DHCP"></span><span class="mw-headline" id="Nastavení_statické_IP_se_vrací_k_DHCP">Nastavení statické IP se vrací k DHCP</span>
</h3>
<p>Kvůli nevyřešenému bugu, když měníme základní připojení na statické IP, nm-applet nemusí přesně uložit konfigurační změny a vrátí se automaticky k DHCP. Ke zprovoznění postupujte podle následujících pokynů.
</p>
<p>Editujte defaultní nastavení připojení (eg "Auto eth0) v nm-appletu. Změňte jméno připojení (eg "my eth0"), odškrtněte v zaškrtávacím políčku "Available to all users", dále změňte vaši statickou IP tak jak požadujete a klikněte na Applay (Použít).
</p>
<p>Dále budete chtít aby se defaultní připojení nepřipojovalo automaticky. To uděláte tak, že spustíte:
</p>
<pre>$ sudo nm-connection-editor  # you must use sudo, not su
</pre>
<p>V connection editor editujte defalult conection (eg "Auto eth0") a odškrtněte "Connect automatically". Klikněte na Applay(Použít) a zavřete connection editor.
</p>
<h2><span class="mw-headline" id="Tipy_and_triky">Tipy and triky</span></h2>
<h3>
<span id="Kontrola_jestli_je_networking_spou.C5.A1t.C4.9Bn_cronem_nebo_skriptem"></span><span class="mw-headline" id="Kontrola_jestli_je_networking_spouštěn_cronem_nebo_skriptem">Kontrola jestli je networking spouštěn cronem nebo skriptem</span>
</h3>
<p>Některé úlohy cronu k úspěchu vyžadují, aby byla síť funkční. Možná si bude přát vyhnout se spouštění těchto úloh, když je síť vypnutá. K dokončení tohoto přidejte <b>if</b> test pro síť, který je vyžadován NetworkManager <b>nm-tool</b> a zkontroluje status sítě. Test zde uspěje jestliže některé rozhraní je činné a selže jesltiže jsou všechna rozhraní nečinná. Toto je vhodné pro laptopy, které mohoubýt připojeni drátově, bezdrátově nebo nepřipojeny.
</p>
<pre>if [ `nm-tool|grep State|cut -f2 -d' '` == "connected" ]; then
       #Whatever you want to do if the network is online
else
       #Whatever you want to do if the network is offline - note, this and the else above are optional
fi
</pre>
<p>Toto je užitečné pro skrip cron.hourly který například spouští <b>fpupdate</b> pro F-Prot virus skaner update. Další způsosb, který může být užitečný jen s malími úpravami, je rozdíl mezi sítěmi používající různé výstupy z <b>nm-tool</b>; například od té doby co je aktivní bezdrátová síť označena hvězdičkou, můžete použít grep pro vyfiltrování síťového jména a pak pomocí grepu odfiltrovat znak hvězdička.
</p>
<h3>
<span id="Automatick.C3.A9_odemknut.C3.AD_keyring_po_p.C5.99ihl.C3.A1.C5.A1en.C3.AD"></span><span class="mw-headline" id="Automatické_odemknutí_keyring_po_přihlášení">Automatické odemknutí keyring po přihlášení</span>
</h3>
<h4><span class="mw-headline" id="Gnome_2">Gnome</span></h4>
<ol>
<li>Klikněte pravým tlačítkem na ikonu NM ve vašem panelu a vyberte Edit Connections a otevřete záložku Wireless</li>
<li>Vyberte to spojení které chcete upravovat a klikněte na tlačítko Edit</li>
<li>Zaškrtněte "Connect Automatically" a "Available to all users"</li>
</ol>
<p>K dokončení se odhlašte a znovu přihlašte.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Následující metoda je zastaralá a je známo, že nepracuje na úplně každém stroji!</div>
<p><i>*V <code>/etc/pam.d/gdm</code> (nebo vašem odpovídajícím démonu v /etc/pam.d), přidejte tyto řádky na konec bloku "auth" a "session" za předpokladu, že ještě neexistují: </i>
</p>
<pre> auth            optional        pam_gnome_keyring.so
 session         optional        pam_gnome_keyring.so  auto_start
</pre>
<ul><li>V <code>/etc/pam.d/passwd</code>, použijte tento řádek pro blok 'password':</li></ul>
<pre> password    optional    pam_gnome_keyring.so
</pre>
<dl><dd>Příště až se přihlásíte, měli by jste být dotázáni, jestli chcete aby heslo bylo odemknuto automaticky při přihlášení.<i></i>
</dd></dl>
<h4><span class="mw-headline" id="KDE">KDE</span></h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Pro podrobnosti se podívejte na <a rel="nofollow" class="external free" href="http://live.gnome.org/GnomeKeyring/Pam">http://live.gnome.org/GnomeKeyring/Pam</a> a pokud používáte kde / kdm, můžete použít pam-keyring-tool z AUR.</div>
<ul><li>Vložte skript jako je ten následující do ~/.kde4/Autostart:</li></ul>
<pre> $!/bin/sh
 echo PASSWORD | /usr/bin/pam-keyring-tool --unlock --keyring=default -s
</pre>
<dl><dd>Podobné by měli pracovat s openbox, lxde, etc.</dd></dl>
<h3>
<span id="Automatick.C3.A9_p.C5.99ipojen.C3.AD_p.C5.99i_bootu"></span><span class="mw-headline" id="Automatické_připojení_při_bootu">Automatické připojení při bootu</span>
</h3>
<p>Od verze 0.7 je NetworkManager schopen se připojit při bootu, před přihlášením uživatele a odemknutí keyringu.
</p>
<ul><li>Nejdříve se ujistěte, že keyfile plugin je nahrán; <code>/etc/NetworkManager/NetworkManager.conf</code> měl by vypadat takhle:</li></ul>
<pre> [main]
 plugins=keyfile
</pre>
<ul><li>Jestliže to nebylo v souboru předtím, budete muset restartovat <b>nm-system-settings</b>:</li></ul>
<pre> # killall -TERM nm-system-settings
</pre>
<dl><dd>nebo jednoduše restartovat celý systém.</dd></dl>
<ul><li>Nyní garantujte přístupová práva vašemu uživateli modifikovat system-connection (systémová připojení):</li></ul>
<p>Pomocí <b>polkit</b>:
</p>
<p>Umístěte následující v /etc/polkit-1/localauthority/50-local.d/10-org-freedesktop-network-manager-settings.pkla
</p>
<pre>[Allow user YOURUSERNAME to create wireless connections for all users]
Identity=unix-user:YOURUSERNAME
Action=org.freedesktop.network-manager-settings.system.modify
ResultAny=no
ResultInactive=no
ResultActive=yes</pre>
<dl><dd>Konečeně, v editoru připojení (z gnome appletu), zaškrtněte <b>Available to all users</b>.</dd></dl>
<p>Připojení je nyní uloženo v <b>/etc/NetworkManager/system-connections/"CONNECTION NAME"</b>. Při startu se NetworkManager pokusí připojit, pokud je v dosahu sítě.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Podle <a rel="nofollow" class="external text" href="https://bugs.kde.org/show_bug.cgi?id=204340">tohoto</a> nahlášení bugu, <code>knetworkmanager</code> ještě nemá implementován tento prvek. Budete potřebovat použít GNOME síťový applet (<code>nm-applet</code>). Nainstalování bylo popsáno výše na této stránce, <code>"killall knetworkmanager"</code>, po té nastartujte <code>nm-applet</code>.
<br>Prosím hlasujte pro tento bug!</div>
<h3>
<span id="Ignorov.C3.A1n.C3.AD_ur.C4.8Dit.C3.BDch_za.C5.99.C3.ADzen.C3.AD"></span><span class="mw-headline" id="Ignorování_určitých_zařízení">Ignorování určitých zařízení</span>
</h3>
<p>Občas může být vyžadována, aby network manager ignoroval některá zařízení a nepokoušel se získat IP.
</p>
<ul><li>Nejprve musíte zjistit Hal UDI (např. pomocí lshal):</li></ul>
<pre> ...
 info.product = 'Networking Interface'  (string)
 info.subsystem = 'net'  (string)
 info.udi = '/org/freedesktop/Hal/devices/net_00_1f_11_01_06_55'  (string)
 linux.hotplug_type = 2  (0x2)  (int)
 linux.subsystem = 'net'  (string)
 ...
</pre>
<ul><li>Přidat toto udi do /etc/NetworkManager/nm-system-settings.conf:</li></ul>
<pre> [keyfile]
   unmanaged-devices=/org/freedesktop/Hal/devices/net_00_1f_11_01_06_55
</pre>
<dl><dd>Složená zařízení mohou být specifikovaána, ohraničena středníky:</dd></dl>
<pre> [keyfile]
   unmanaged-devices=/org/freedesktop/Hal/devices/net_00_1f_11_01_06_55;/org/freedesktop/Hal/devices/net_00_2c_6d_e2_08_af
</pre>
<p>Po aplikování změn nebude potřeba restartovat NetworkManager.
</p>
<ul><li>Ignoring a type of device at boot time.</li></ul>
<p>this script was used to ignore all ethernet devices at boot time of a archiso build, it can be changed to ignore wifi devices etc.
/!\being used on a non-persistant filesystem, the nm-system-settings.conf is default at run time
</p>
<pre>  #!/bin/sh
  # author: tim noise &lt;darknoise@drkns.net&gt;
  COUNT=0
  TARGET_FILE="/etc/NetworkManager/nm-system-settings.conf"
  for i in `lshal | grep -A6 'Networking Interface' | awk -F "'" '/info.udi = / {print $2}'`; do
      if [ $COUNT = 0 ]; then
          COUNT=$COUNT+1;
          echo "unmanaged-devices=$i" &gt;&gt; $TARGET_FILE
      else
          echo -n ";$i" &gt;&gt; $TARGET_FILE
      fi
  done
  printf "\n" &gt;&gt; $TARGET_FILE
</pre>
</div>
</div>
<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../cs/Category:Networking.html" title="Category:Networking (Česky)">Networking (Česky)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Translateme.html" title="Category:Pages or sections flagged with Template:Translateme">Pages or sections flagged with Template:Translateme</a></li></ul>
</div>
</div>
	</div>
</div>

<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
		<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=NetworkManager_(%C4%8Cesky)&amp;oldid=663148">https://wiki.archlinux.org/index.php?title=NetworkManager_(Česky)&amp;oldid=663148</a>"</li>
		<li id="footer-info-lastmod"> This page was last edited on 20 April 2021, at 23:02.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
	<br>
</ul>
	<ul id="footer-places">
		<li id="footer-places-privacy"><a href="../en/ArchWiki:Privacy_policy.html" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../en/ArchWiki:About.html" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico">
	</ul>
	<div style="clear: both;"></div>
</footer>



</body>
</html>
